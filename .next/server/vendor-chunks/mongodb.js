"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/mongodb";
exports.ids = ["vendor-chunks/mongodb"];
exports.modules = {

/***/ "(ssr)/./node_modules/mongodb/lib/admin.js":
/*!*******************************************!*\
  !*** ./node_modules/mongodb/lib/admin.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Admin = void 0;\nconst add_user_1 = __webpack_require__(/*! ./operations/add_user */ \"(ssr)/./node_modules/mongodb/lib/operations/add_user.js\");\nconst execute_operation_1 = __webpack_require__(/*! ./operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst list_databases_1 = __webpack_require__(/*! ./operations/list_databases */ \"(ssr)/./node_modules/mongodb/lib/operations/list_databases.js\");\nconst remove_user_1 = __webpack_require__(/*! ./operations/remove_user */ \"(ssr)/./node_modules/mongodb/lib/operations/remove_user.js\");\nconst run_command_1 = __webpack_require__(/*! ./operations/run_command */ \"(ssr)/./node_modules/mongodb/lib/operations/run_command.js\");\nconst validate_collection_1 = __webpack_require__(/*! ./operations/validate_collection */ \"(ssr)/./node_modules/mongodb/lib/operations/validate_collection.js\");\n/**\n * The **Admin** class is an internal class that allows convenient access to\n * the admin functionality and commands for MongoDB.\n *\n * **ADMIN Cannot directly be instantiated**\n * @public\n *\n * @example\n * ```ts\n * import { MongoClient } from 'mongodb';\n *\n * const client = new MongoClient('mongodb://localhost:27017');\n * const admin = client.db().admin();\n * const dbInfo = await admin.listDatabases();\n * for (const db of dbInfo.databases) {\n *   console.log(db.name);\n * }\n * ```\n */ class Admin {\n    /**\n     * Create a new Admin instance\n     * @internal\n     */ constructor(db){\n        this.s = {\n            db\n        };\n    }\n    /**\n     * Execute a command\n     *\n     * The driver will ensure the following fields are attached to the command sent to the server:\n     * - `lsid` - sourced from an implicit session or options.session\n     * - `$readPreference` - defaults to primary or can be configured by options.readPreference\n     * - `$db` - sourced from the name of this database\n     *\n     * If the client has a serverApi setting:\n     * - `apiVersion`\n     * - `apiStrict`\n     * - `apiDeprecationErrors`\n     *\n     * When in a transaction:\n     * - `readConcern` - sourced from readConcern set on the TransactionOptions\n     * - `writeConcern` - sourced from writeConcern set on the TransactionOptions\n     *\n     * Attaching any of the above fields to the command will have no effect as the driver will overwrite the value.\n     *\n     * @param command - The command to execute\n     * @param options - Optional settings for the command\n     */ async command(command, options) {\n        return (0, execute_operation_1.executeOperation)(this.s.db.client, new run_command_1.RunCommandOperation(this.s.db, command, {\n            dbName: \"admin\",\n            ...options\n        }));\n    }\n    /**\n     * Retrieve the server build information\n     *\n     * @param options - Optional settings for the command\n     */ async buildInfo(options) {\n        return this.command({\n            buildinfo: 1\n        }, options);\n    }\n    /**\n     * Retrieve the server build information\n     *\n     * @param options - Optional settings for the command\n     */ async serverInfo(options) {\n        return this.command({\n            buildinfo: 1\n        }, options);\n    }\n    /**\n     * Retrieve this db's server status.\n     *\n     * @param options - Optional settings for the command\n     */ async serverStatus(options) {\n        return this.command({\n            serverStatus: 1\n        }, options);\n    }\n    /**\n     * Ping the MongoDB server and retrieve results\n     *\n     * @param options - Optional settings for the command\n     */ async ping(options) {\n        return this.command({\n            ping: 1\n        }, options);\n    }\n    /**\n     * Add a user to the database\n     *\n     * @param username - The username for the new user\n     * @param passwordOrOptions - An optional password for the new user, or the options for the command\n     * @param options - Optional settings for the command\n     * @deprecated Use the createUser command in `db.command()` instead.\n     * @see https://www.mongodb.com/docs/manual/reference/command/createUser/\n     */ async addUser(username, passwordOrOptions, options) {\n        options = options != null && typeof options === \"object\" ? options : passwordOrOptions != null && typeof passwordOrOptions === \"object\" ? passwordOrOptions : undefined;\n        const password = typeof passwordOrOptions === \"string\" ? passwordOrOptions : undefined;\n        return (0, execute_operation_1.executeOperation)(this.s.db.client, new add_user_1.AddUserOperation(this.s.db, username, password, {\n            dbName: \"admin\",\n            ...options\n        }));\n    }\n    /**\n     * Remove a user from a database\n     *\n     * @param username - The username to remove\n     * @param options - Optional settings for the command\n     */ async removeUser(username, options) {\n        return (0, execute_operation_1.executeOperation)(this.s.db.client, new remove_user_1.RemoveUserOperation(this.s.db, username, {\n            dbName: \"admin\",\n            ...options\n        }));\n    }\n    /**\n     * Validate an existing collection\n     *\n     * @param collectionName - The name of the collection to validate.\n     * @param options - Optional settings for the command\n     */ async validateCollection(collectionName, options = {}) {\n        return (0, execute_operation_1.executeOperation)(this.s.db.client, new validate_collection_1.ValidateCollectionOperation(this, collectionName, options));\n    }\n    /**\n     * List the available databases\n     *\n     * @param options - Optional settings for the command\n     */ async listDatabases(options) {\n        return (0, execute_operation_1.executeOperation)(this.s.db.client, new list_databases_1.ListDatabasesOperation(this.s.db, options));\n    }\n    /**\n     * Get ReplicaSet status\n     *\n     * @param options - Optional settings for the command\n     */ async replSetGetStatus(options) {\n        return this.command({\n            replSetGetStatus: 1\n        }, options);\n    }\n}\nexports.Admin = Admin; //# sourceMappingURL=admin.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvYWRtaW4uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGFBQWEsR0FBRyxLQUFLO0FBQ3JCLE1BQU1HLGFBQWFDLG1CQUFPQSxDQUFDLHNGQUF1QjtBQUNsRCxNQUFNQyxzQkFBc0JELG1CQUFPQSxDQUFDLHdHQUFnQztBQUNwRSxNQUFNRSxtQkFBbUJGLG1CQUFPQSxDQUFDLGtHQUE2QjtBQUM5RCxNQUFNRyxnQkFBZ0JILG1CQUFPQSxDQUFDLDRGQUEwQjtBQUN4RCxNQUFNSSxnQkFBZ0JKLG1CQUFPQSxDQUFDLDRGQUEwQjtBQUN4RCxNQUFNSyx3QkFBd0JMLG1CQUFPQSxDQUFDLDRHQUFrQztBQUN4RTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBa0JDLEdBQ0QsTUFBTUY7SUFDRjs7O0tBR0MsR0FDRFEsWUFBWUMsRUFBRSxDQUFFO1FBQ1osSUFBSSxDQUFDQyxDQUFDLEdBQUc7WUFBRUQ7UUFBRztJQUNsQjtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0FxQkMsR0FDRCxNQUFNRSxRQUFRQSxPQUFPLEVBQUVDLE9BQU8sRUFBRTtRQUM1QixPQUFPLENBQUMsR0FBR1Qsb0JBQW9CVSxnQkFBZ0IsRUFBRSxJQUFJLENBQUNILENBQUMsQ0FBQ0QsRUFBRSxDQUFDSyxNQUFNLEVBQUUsSUFBSVIsY0FBY1MsbUJBQW1CLENBQUMsSUFBSSxDQUFDTCxDQUFDLENBQUNELEVBQUUsRUFBRUUsU0FBUztZQUFFSyxRQUFRO1lBQVMsR0FBR0osT0FBTztRQUFDO0lBQy9KO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU1LLFVBQVVMLE9BQU8sRUFBRTtRQUNyQixPQUFPLElBQUksQ0FBQ0QsT0FBTyxDQUFDO1lBQUVPLFdBQVc7UUFBRSxHQUFHTjtJQUMxQztJQUNBOzs7O0tBSUMsR0FDRCxNQUFNTyxXQUFXUCxPQUFPLEVBQUU7UUFDdEIsT0FBTyxJQUFJLENBQUNELE9BQU8sQ0FBQztZQUFFTyxXQUFXO1FBQUUsR0FBR047SUFDMUM7SUFDQTs7OztLQUlDLEdBQ0QsTUFBTVEsYUFBYVIsT0FBTyxFQUFFO1FBQ3hCLE9BQU8sSUFBSSxDQUFDRCxPQUFPLENBQUM7WUFBRVMsY0FBYztRQUFFLEdBQUdSO0lBQzdDO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU1TLEtBQUtULE9BQU8sRUFBRTtRQUNoQixPQUFPLElBQUksQ0FBQ0QsT0FBTyxDQUFDO1lBQUVVLE1BQU07UUFBRSxHQUFHVDtJQUNyQztJQUNBOzs7Ozs7OztLQVFDLEdBQ0QsTUFBTVUsUUFBUUMsUUFBUSxFQUFFQyxpQkFBaUIsRUFBRVosT0FBTyxFQUFFO1FBQ2hEQSxVQUNJQSxXQUFXLFFBQVEsT0FBT0EsWUFBWSxXQUNoQ0EsVUFDQVkscUJBQXFCLFFBQVEsT0FBT0Esc0JBQXNCLFdBQ3REQSxvQkFDQUM7UUFDZCxNQUFNQyxXQUFXLE9BQU9GLHNCQUFzQixXQUFXQSxvQkFBb0JDO1FBQzdFLE9BQU8sQ0FBQyxHQUFHdEIsb0JBQW9CVSxnQkFBZ0IsRUFBRSxJQUFJLENBQUNILENBQUMsQ0FBQ0QsRUFBRSxDQUFDSyxNQUFNLEVBQUUsSUFBSWIsV0FBVzBCLGdCQUFnQixDQUFDLElBQUksQ0FBQ2pCLENBQUMsQ0FBQ0QsRUFBRSxFQUFFYyxVQUFVRyxVQUFVO1lBQUVWLFFBQVE7WUFBUyxHQUFHSixPQUFPO1FBQUM7SUFDcEs7SUFDQTs7Ozs7S0FLQyxHQUNELE1BQU1nQixXQUFXTCxRQUFRLEVBQUVYLE9BQU8sRUFBRTtRQUNoQyxPQUFPLENBQUMsR0FBR1Qsb0JBQW9CVSxnQkFBZ0IsRUFBRSxJQUFJLENBQUNILENBQUMsQ0FBQ0QsRUFBRSxDQUFDSyxNQUFNLEVBQUUsSUFBSVQsY0FBY3dCLG1CQUFtQixDQUFDLElBQUksQ0FBQ25CLENBQUMsQ0FBQ0QsRUFBRSxFQUFFYyxVQUFVO1lBQUVQLFFBQVE7WUFBUyxHQUFHSixPQUFPO1FBQUM7SUFDaEs7SUFDQTs7Ozs7S0FLQyxHQUNELE1BQU1rQixtQkFBbUJDLGNBQWMsRUFBRW5CLFVBQVUsQ0FBQyxDQUFDLEVBQUU7UUFDbkQsT0FBTyxDQUFDLEdBQUdULG9CQUFvQlUsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDSCxDQUFDLENBQUNELEVBQUUsQ0FBQ0ssTUFBTSxFQUFFLElBQUlQLHNCQUFzQnlCLDJCQUEyQixDQUFDLElBQUksRUFBRUQsZ0JBQWdCbkI7SUFDbko7SUFDQTs7OztLQUlDLEdBQ0QsTUFBTXFCLGNBQWNyQixPQUFPLEVBQUU7UUFDekIsT0FBTyxDQUFDLEdBQUdULG9CQUFvQlUsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDSCxDQUFDLENBQUNELEVBQUUsQ0FBQ0ssTUFBTSxFQUFFLElBQUlWLGlCQUFpQjhCLHNCQUFzQixDQUFDLElBQUksQ0FBQ3hCLENBQUMsQ0FBQ0QsRUFBRSxFQUFFRztJQUM5SDtJQUNBOzs7O0tBSUMsR0FDRCxNQUFNdUIsaUJBQWlCdkIsT0FBTyxFQUFFO1FBQzVCLE9BQU8sSUFBSSxDQUFDRCxPQUFPLENBQUM7WUFBRXdCLGtCQUFrQjtRQUFFLEdBQUd2QjtJQUNqRDtBQUNKO0FBQ0FkLGFBQWEsR0FBR0UsT0FDaEIsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2FkbWluLmpzP2VlMWQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkFkbWluID0gdm9pZCAwO1xuY29uc3QgYWRkX3VzZXJfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvYWRkX3VzZXJcIik7XG5jb25zdCBleGVjdXRlX29wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9leGVjdXRlX29wZXJhdGlvblwiKTtcbmNvbnN0IGxpc3RfZGF0YWJhc2VzXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2xpc3RfZGF0YWJhc2VzXCIpO1xuY29uc3QgcmVtb3ZlX3VzZXJfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvcmVtb3ZlX3VzZXJcIik7XG5jb25zdCBydW5fY29tbWFuZF8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9ydW5fY29tbWFuZFwiKTtcbmNvbnN0IHZhbGlkYXRlX2NvbGxlY3Rpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvdmFsaWRhdGVfY29sbGVjdGlvblwiKTtcbi8qKlxuICogVGhlICoqQWRtaW4qKiBjbGFzcyBpcyBhbiBpbnRlcm5hbCBjbGFzcyB0aGF0IGFsbG93cyBjb252ZW5pZW50IGFjY2VzcyB0b1xuICogdGhlIGFkbWluIGZ1bmN0aW9uYWxpdHkgYW5kIGNvbW1hbmRzIGZvciBNb25nb0RCLlxuICpcbiAqICoqQURNSU4gQ2Fubm90IGRpcmVjdGx5IGJlIGluc3RhbnRpYXRlZCoqXG4gKiBAcHVibGljXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBNb25nb0NsaWVudCB9IGZyb20gJ21vbmdvZGInO1xuICpcbiAqIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCgnbW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNycpO1xuICogY29uc3QgYWRtaW4gPSBjbGllbnQuZGIoKS5hZG1pbigpO1xuICogY29uc3QgZGJJbmZvID0gYXdhaXQgYWRtaW4ubGlzdERhdGFiYXNlcygpO1xuICogZm9yIChjb25zdCBkYiBvZiBkYkluZm8uZGF0YWJhc2VzKSB7XG4gKiAgIGNvbnNvbGUubG9nKGRiLm5hbWUpO1xuICogfVxuICogYGBgXG4gKi9cbmNsYXNzIEFkbWluIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgQWRtaW4gaW5zdGFuY2VcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkYikge1xuICAgICAgICB0aGlzLnMgPSB7IGRiIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGUgYSBjb21tYW5kXG4gICAgICpcbiAgICAgKiBUaGUgZHJpdmVyIHdpbGwgZW5zdXJlIHRoZSBmb2xsb3dpbmcgZmllbGRzIGFyZSBhdHRhY2hlZCB0byB0aGUgY29tbWFuZCBzZW50IHRvIHRoZSBzZXJ2ZXI6XG4gICAgICogLSBgbHNpZGAgLSBzb3VyY2VkIGZyb20gYW4gaW1wbGljaXQgc2Vzc2lvbiBvciBvcHRpb25zLnNlc3Npb25cbiAgICAgKiAtIGAkcmVhZFByZWZlcmVuY2VgIC0gZGVmYXVsdHMgdG8gcHJpbWFyeSBvciBjYW4gYmUgY29uZmlndXJlZCBieSBvcHRpb25zLnJlYWRQcmVmZXJlbmNlXG4gICAgICogLSBgJGRiYCAtIHNvdXJjZWQgZnJvbSB0aGUgbmFtZSBvZiB0aGlzIGRhdGFiYXNlXG4gICAgICpcbiAgICAgKiBJZiB0aGUgY2xpZW50IGhhcyBhIHNlcnZlckFwaSBzZXR0aW5nOlxuICAgICAqIC0gYGFwaVZlcnNpb25gXG4gICAgICogLSBgYXBpU3RyaWN0YFxuICAgICAqIC0gYGFwaURlcHJlY2F0aW9uRXJyb3JzYFxuICAgICAqXG4gICAgICogV2hlbiBpbiBhIHRyYW5zYWN0aW9uOlxuICAgICAqIC0gYHJlYWRDb25jZXJuYCAtIHNvdXJjZWQgZnJvbSByZWFkQ29uY2VybiBzZXQgb24gdGhlIFRyYW5zYWN0aW9uT3B0aW9uc1xuICAgICAqIC0gYHdyaXRlQ29uY2VybmAgLSBzb3VyY2VkIGZyb20gd3JpdGVDb25jZXJuIHNldCBvbiB0aGUgVHJhbnNhY3Rpb25PcHRpb25zXG4gICAgICpcbiAgICAgKiBBdHRhY2hpbmcgYW55IG9mIHRoZSBhYm92ZSBmaWVsZHMgdG8gdGhlIGNvbW1hbmQgd2lsbCBoYXZlIG5vIGVmZmVjdCBhcyB0aGUgZHJpdmVyIHdpbGwgb3ZlcndyaXRlIHRoZSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb21tYW5kIC0gVGhlIGNvbW1hbmQgdG8gZXhlY3V0ZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgY29tbWFuZChjb21tYW5kLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLnMuZGIuY2xpZW50LCBuZXcgcnVuX2NvbW1hbmRfMS5SdW5Db21tYW5kT3BlcmF0aW9uKHRoaXMucy5kYiwgY29tbWFuZCwgeyBkYk5hbWU6ICdhZG1pbicsIC4uLm9wdGlvbnMgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSB0aGUgc2VydmVyIGJ1aWxkIGluZm9ybWF0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIGJ1aWxkSW5mbyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbW1hbmQoeyBidWlsZGluZm86IDEgfSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIHRoZSBzZXJ2ZXIgYnVpbGQgaW5mb3JtYXRpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgc2VydmVySW5mbyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbW1hbmQoeyBidWlsZGluZm86IDEgfSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIHRoaXMgZGIncyBzZXJ2ZXIgc3RhdHVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBzZXJ2ZXJTdGF0dXMob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21tYW5kKHsgc2VydmVyU3RhdHVzOiAxIH0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQaW5nIHRoZSBNb25nb0RCIHNlcnZlciBhbmQgcmV0cmlldmUgcmVzdWx0c1xuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBwaW5nKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tbWFuZCh7IHBpbmc6IDEgfSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIHVzZXIgdG8gdGhlIGRhdGFiYXNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXNlcm5hbWUgLSBUaGUgdXNlcm5hbWUgZm9yIHRoZSBuZXcgdXNlclxuICAgICAqIEBwYXJhbSBwYXNzd29yZE9yT3B0aW9ucyAtIEFuIG9wdGlvbmFsIHBhc3N3b3JkIGZvciB0aGUgbmV3IHVzZXIsIG9yIHRoZSBvcHRpb25zIGZvciB0aGUgY29tbWFuZFxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBjcmVhdGVVc2VyIGNvbW1hbmQgaW4gYGRiLmNvbW1hbmQoKWAgaW5zdGVhZC5cbiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9jb21tYW5kL2NyZWF0ZVVzZXIvXG4gICAgICovXG4gICAgYXN5bmMgYWRkVXNlcih1c2VybmFtZSwgcGFzc3dvcmRPck9wdGlvbnMsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9XG4gICAgICAgICAgICBvcHRpb25zICE9IG51bGwgJiYgdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zXG4gICAgICAgICAgICAgICAgOiBwYXNzd29yZE9yT3B0aW9ucyAhPSBudWxsICYmIHR5cGVvZiBwYXNzd29yZE9yT3B0aW9ucyA9PT0gJ29iamVjdCdcbiAgICAgICAgICAgICAgICAgICAgPyBwYXNzd29yZE9yT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgcGFzc3dvcmQgPSB0eXBlb2YgcGFzc3dvcmRPck9wdGlvbnMgPT09ICdzdHJpbmcnID8gcGFzc3dvcmRPck9wdGlvbnMgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLnMuZGIuY2xpZW50LCBuZXcgYWRkX3VzZXJfMS5BZGRVc2VyT3BlcmF0aW9uKHRoaXMucy5kYiwgdXNlcm5hbWUsIHBhc3N3b3JkLCB7IGRiTmFtZTogJ2FkbWluJywgLi4ub3B0aW9ucyB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIHVzZXIgZnJvbSBhIGRhdGFiYXNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXNlcm5hbWUgLSBUaGUgdXNlcm5hbWUgdG8gcmVtb3ZlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyByZW1vdmVVc2VyKHVzZXJuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLnMuZGIuY2xpZW50LCBuZXcgcmVtb3ZlX3VzZXJfMS5SZW1vdmVVc2VyT3BlcmF0aW9uKHRoaXMucy5kYiwgdXNlcm5hbWUsIHsgZGJOYW1lOiAnYWRtaW4nLCAuLi5vcHRpb25zIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgYW4gZXhpc3RpbmcgY29sbGVjdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbGxlY3Rpb25OYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGNvbGxlY3Rpb24gdG8gdmFsaWRhdGUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyB2YWxpZGF0ZUNvbGxlY3Rpb24oY29sbGVjdGlvbk5hbWUsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5zLmRiLmNsaWVudCwgbmV3IHZhbGlkYXRlX2NvbGxlY3Rpb25fMS5WYWxpZGF0ZUNvbGxlY3Rpb25PcGVyYXRpb24odGhpcywgY29sbGVjdGlvbk5hbWUsIG9wdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGlzdCB0aGUgYXZhaWxhYmxlIGRhdGFiYXNlc1xuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBsaXN0RGF0YWJhc2VzKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMucy5kYi5jbGllbnQsIG5ldyBsaXN0X2RhdGFiYXNlc18xLkxpc3REYXRhYmFzZXNPcGVyYXRpb24odGhpcy5zLmRiLCBvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBSZXBsaWNhU2V0IHN0YXR1c1xuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyByZXBsU2V0R2V0U3RhdHVzKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tbWFuZCh7IHJlcGxTZXRHZXRTdGF0dXM6IDEgfSwgb3B0aW9ucyk7XG4gICAgfVxufVxuZXhwb3J0cy5BZG1pbiA9IEFkbWluO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRtaW4uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQWRtaW4iLCJhZGRfdXNlcl8xIiwicmVxdWlyZSIsImV4ZWN1dGVfb3BlcmF0aW9uXzEiLCJsaXN0X2RhdGFiYXNlc18xIiwicmVtb3ZlX3VzZXJfMSIsInJ1bl9jb21tYW5kXzEiLCJ2YWxpZGF0ZV9jb2xsZWN0aW9uXzEiLCJjb25zdHJ1Y3RvciIsImRiIiwicyIsImNvbW1hbmQiLCJvcHRpb25zIiwiZXhlY3V0ZU9wZXJhdGlvbiIsImNsaWVudCIsIlJ1bkNvbW1hbmRPcGVyYXRpb24iLCJkYk5hbWUiLCJidWlsZEluZm8iLCJidWlsZGluZm8iLCJzZXJ2ZXJJbmZvIiwic2VydmVyU3RhdHVzIiwicGluZyIsImFkZFVzZXIiLCJ1c2VybmFtZSIsInBhc3N3b3JkT3JPcHRpb25zIiwidW5kZWZpbmVkIiwicGFzc3dvcmQiLCJBZGRVc2VyT3BlcmF0aW9uIiwicmVtb3ZlVXNlciIsIlJlbW92ZVVzZXJPcGVyYXRpb24iLCJ2YWxpZGF0ZUNvbGxlY3Rpb24iLCJjb2xsZWN0aW9uTmFtZSIsIlZhbGlkYXRlQ29sbGVjdGlvbk9wZXJhdGlvbiIsImxpc3REYXRhYmFzZXMiLCJMaXN0RGF0YWJhc2VzT3BlcmF0aW9uIiwicmVwbFNldEdldFN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/admin.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/bson.js":
/*!******************************************!*\
  !*** ./node_modules/mongodb/lib/bson.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.resolveBSONOptions = exports.pluckBSONSerializeOptions = exports.Timestamp = exports.serialize = exports.ObjectId = exports.MinKey = exports.MaxKey = exports.Long = exports.Int32 = exports.Double = exports.deserialize = exports.Decimal128 = exports.DBRef = exports.Code = exports.calculateObjectSize = exports.BSONType = exports.BSONSymbol = exports.BSONRegExp = exports.BSON = exports.Binary = void 0;\nvar bson_1 = __webpack_require__(/*! bson */ \"(ssr)/./node_modules/bson/lib/bson.cjs\");\nObject.defineProperty(exports, \"Binary\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.Binary;\n    }\n}));\nObject.defineProperty(exports, \"BSON\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.BSON;\n    }\n}));\nObject.defineProperty(exports, \"BSONRegExp\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.BSONRegExp;\n    }\n}));\nObject.defineProperty(exports, \"BSONSymbol\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.BSONSymbol;\n    }\n}));\nObject.defineProperty(exports, \"BSONType\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.BSONType;\n    }\n}));\nObject.defineProperty(exports, \"calculateObjectSize\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.calculateObjectSize;\n    }\n}));\nObject.defineProperty(exports, \"Code\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.Code;\n    }\n}));\nObject.defineProperty(exports, \"DBRef\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.DBRef;\n    }\n}));\nObject.defineProperty(exports, \"Decimal128\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.Decimal128;\n    }\n}));\nObject.defineProperty(exports, \"deserialize\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.deserialize;\n    }\n}));\nObject.defineProperty(exports, \"Double\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.Double;\n    }\n}));\nObject.defineProperty(exports, \"Int32\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.Int32;\n    }\n}));\nObject.defineProperty(exports, \"Long\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.Long;\n    }\n}));\nObject.defineProperty(exports, \"MaxKey\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.MaxKey;\n    }\n}));\nObject.defineProperty(exports, \"MinKey\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.MinKey;\n    }\n}));\nObject.defineProperty(exports, \"ObjectId\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.ObjectId;\n    }\n}));\nObject.defineProperty(exports, \"serialize\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.serialize;\n    }\n}));\nObject.defineProperty(exports, \"Timestamp\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.Timestamp;\n    }\n}));\nfunction pluckBSONSerializeOptions(options) {\n    const { fieldsAsRaw, useBigInt64, promoteValues, promoteBuffers, promoteLongs, serializeFunctions, ignoreUndefined, bsonRegExp, raw, enableUtf8Validation } = options;\n    return {\n        fieldsAsRaw,\n        useBigInt64,\n        promoteValues,\n        promoteBuffers,\n        promoteLongs,\n        serializeFunctions,\n        ignoreUndefined,\n        bsonRegExp,\n        raw,\n        enableUtf8Validation\n    };\n}\nexports.pluckBSONSerializeOptions = pluckBSONSerializeOptions;\n/**\n * Merge the given BSONSerializeOptions, preferring options over the parent's options, and\n * substituting defaults for values not set.\n *\n * @internal\n */ function resolveBSONOptions(options, parent) {\n    const parentOptions = parent?.bsonOptions;\n    return {\n        raw: options?.raw ?? parentOptions?.raw ?? false,\n        useBigInt64: options?.useBigInt64 ?? parentOptions?.useBigInt64 ?? false,\n        promoteLongs: options?.promoteLongs ?? parentOptions?.promoteLongs ?? true,\n        promoteValues: options?.promoteValues ?? parentOptions?.promoteValues ?? true,\n        promoteBuffers: options?.promoteBuffers ?? parentOptions?.promoteBuffers ?? false,\n        ignoreUndefined: options?.ignoreUndefined ?? parentOptions?.ignoreUndefined ?? false,\n        bsonRegExp: options?.bsonRegExp ?? parentOptions?.bsonRegExp ?? false,\n        serializeFunctions: options?.serializeFunctions ?? parentOptions?.serializeFunctions ?? false,\n        fieldsAsRaw: options?.fieldsAsRaw ?? parentOptions?.fieldsAsRaw ?? {},\n        enableUtf8Validation: options?.enableUtf8Validation ?? parentOptions?.enableUtf8Validation ?? true\n    };\n}\nexports.resolveBSONOptions = resolveBSONOptions; //# sourceMappingURL=bson.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvYnNvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMEJBQTBCLEdBQUdBLGlDQUFpQyxHQUFHQSxpQkFBaUIsR0FBR0EsaUJBQWlCLEdBQUdBLGdCQUFnQixHQUFHQSxjQUFjLEdBQUdBLGNBQWMsR0FBR0EsWUFBWSxHQUFHQSxhQUFhLEdBQUdBLGNBQWMsR0FBR0EsbUJBQW1CLEdBQUdBLGtCQUFrQixHQUFHQSxhQUFhLEdBQUdBLFlBQVksR0FBR0EsMkJBQTJCLEdBQUdBLGdCQUFnQixHQUFHQSxrQkFBa0IsR0FBR0Esa0JBQWtCLEdBQUdBLFlBQVksR0FBR0EsY0FBYyxHQUFHLEtBQUs7QUFDeFosSUFBSXNCLFNBQVNDLG1CQUFPQSxDQUFDLG9EQUFNO0FBQzNCekIsMENBQXlDO0lBQUUwQixZQUFZO0lBQU1DLEtBQUs7UUFBYyxPQUFPSCxPQUFPRCxNQUFNO0lBQUU7QUFBRSxDQUFDLEVBQUM7QUFDMUd2Qix3Q0FBdUM7SUFBRTBCLFlBQVk7SUFBTUMsS0FBSztRQUFjLE9BQU9ILE9BQU9GLElBQUk7SUFBRTtBQUFFLENBQUMsRUFBQztBQUN0R3RCLDhDQUE2QztJQUFFMEIsWUFBWTtJQUFNQyxLQUFLO1FBQWMsT0FBT0gsT0FBT0gsVUFBVTtJQUFFO0FBQUUsQ0FBQyxFQUFDO0FBQ2xIckIsOENBQTZDO0lBQUUwQixZQUFZO0lBQU1DLEtBQUs7UUFBYyxPQUFPSCxPQUFPSixVQUFVO0lBQUU7QUFBRSxDQUFDLEVBQUM7QUFDbEhwQiw0Q0FBMkM7SUFBRTBCLFlBQVk7SUFBTUMsS0FBSztRQUFjLE9BQU9ILE9BQU9MLFFBQVE7SUFBRTtBQUFFLENBQUMsRUFBQztBQUM5R25CLHVEQUFzRDtJQUFFMEIsWUFBWTtJQUFNQyxLQUFLO1FBQWMsT0FBT0gsT0FBT04sbUJBQW1CO0lBQUU7QUFBRSxDQUFDLEVBQUM7QUFDcElsQix3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Yi9saWIvYnNvbi5qcz8xZWNhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5yZXNvbHZlQlNPTk9wdGlvbnMgPSBleHBvcnRzLnBsdWNrQlNPTlNlcmlhbGl6ZU9wdGlvbnMgPSBleHBvcnRzLlRpbWVzdGFtcCA9IGV4cG9ydHMuc2VyaWFsaXplID0gZXhwb3J0cy5PYmplY3RJZCA9IGV4cG9ydHMuTWluS2V5ID0gZXhwb3J0cy5NYXhLZXkgPSBleHBvcnRzLkxvbmcgPSBleHBvcnRzLkludDMyID0gZXhwb3J0cy5Eb3VibGUgPSBleHBvcnRzLmRlc2VyaWFsaXplID0gZXhwb3J0cy5EZWNpbWFsMTI4ID0gZXhwb3J0cy5EQlJlZiA9IGV4cG9ydHMuQ29kZSA9IGV4cG9ydHMuY2FsY3VsYXRlT2JqZWN0U2l6ZSA9IGV4cG9ydHMuQlNPTlR5cGUgPSBleHBvcnRzLkJTT05TeW1ib2wgPSBleHBvcnRzLkJTT05SZWdFeHAgPSBleHBvcnRzLkJTT04gPSBleHBvcnRzLkJpbmFyeSA9IHZvaWQgMDtcbnZhciBic29uXzEgPSByZXF1aXJlKFwiYnNvblwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkJpbmFyeVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYnNvbl8xLkJpbmFyeTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkJTT05cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5CU09OOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQlNPTlJlZ0V4cFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYnNvbl8xLkJTT05SZWdFeHA7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJCU09OU3ltYm9sXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzEuQlNPTlN5bWJvbDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkJTT05UeXBlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzEuQlNPTlR5cGU7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJjYWxjdWxhdGVPYmplY3RTaXplXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzEuY2FsY3VsYXRlT2JqZWN0U2l6ZTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvZGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5Db2RlOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiREJSZWZcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5EQlJlZjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkRlY2ltYWwxMjhcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5EZWNpbWFsMTI4OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiZGVzZXJpYWxpemVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5kZXNlcmlhbGl6ZTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkRvdWJsZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYnNvbl8xLkRvdWJsZTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkludDMyXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzEuSW50MzI7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJMb25nXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzEuTG9uZzsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1heEtleVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYnNvbl8xLk1heEtleTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1pbktleVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYnNvbl8xLk1pbktleTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk9iamVjdElkXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzEuT2JqZWN0SWQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJzZXJpYWxpemVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5zZXJpYWxpemU7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJUaW1lc3RhbXBcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5UaW1lc3RhbXA7IH0gfSk7XG5mdW5jdGlvbiBwbHVja0JTT05TZXJpYWxpemVPcHRpb25zKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGZpZWxkc0FzUmF3LCB1c2VCaWdJbnQ2NCwgcHJvbW90ZVZhbHVlcywgcHJvbW90ZUJ1ZmZlcnMsIHByb21vdGVMb25ncywgc2VyaWFsaXplRnVuY3Rpb25zLCBpZ25vcmVVbmRlZmluZWQsIGJzb25SZWdFeHAsIHJhdywgZW5hYmxlVXRmOFZhbGlkYXRpb24gfSA9IG9wdGlvbnM7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmllbGRzQXNSYXcsXG4gICAgICAgIHVzZUJpZ0ludDY0LFxuICAgICAgICBwcm9tb3RlVmFsdWVzLFxuICAgICAgICBwcm9tb3RlQnVmZmVycyxcbiAgICAgICAgcHJvbW90ZUxvbmdzLFxuICAgICAgICBzZXJpYWxpemVGdW5jdGlvbnMsXG4gICAgICAgIGlnbm9yZVVuZGVmaW5lZCxcbiAgICAgICAgYnNvblJlZ0V4cCxcbiAgICAgICAgcmF3LFxuICAgICAgICBlbmFibGVVdGY4VmFsaWRhdGlvblxuICAgIH07XG59XG5leHBvcnRzLnBsdWNrQlNPTlNlcmlhbGl6ZU9wdGlvbnMgPSBwbHVja0JTT05TZXJpYWxpemVPcHRpb25zO1xuLyoqXG4gKiBNZXJnZSB0aGUgZ2l2ZW4gQlNPTlNlcmlhbGl6ZU9wdGlvbnMsIHByZWZlcnJpbmcgb3B0aW9ucyBvdmVyIHRoZSBwYXJlbnQncyBvcHRpb25zLCBhbmRcbiAqIHN1YnN0aXR1dGluZyBkZWZhdWx0cyBmb3IgdmFsdWVzIG5vdCBzZXQuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVCU09OT3B0aW9ucyhvcHRpb25zLCBwYXJlbnQpIHtcbiAgICBjb25zdCBwYXJlbnRPcHRpb25zID0gcGFyZW50Py5ic29uT3B0aW9ucztcbiAgICByZXR1cm4ge1xuICAgICAgICByYXc6IG9wdGlvbnM/LnJhdyA/PyBwYXJlbnRPcHRpb25zPy5yYXcgPz8gZmFsc2UsXG4gICAgICAgIHVzZUJpZ0ludDY0OiBvcHRpb25zPy51c2VCaWdJbnQ2NCA/PyBwYXJlbnRPcHRpb25zPy51c2VCaWdJbnQ2NCA/PyBmYWxzZSxcbiAgICAgICAgcHJvbW90ZUxvbmdzOiBvcHRpb25zPy5wcm9tb3RlTG9uZ3MgPz8gcGFyZW50T3B0aW9ucz8ucHJvbW90ZUxvbmdzID8/IHRydWUsXG4gICAgICAgIHByb21vdGVWYWx1ZXM6IG9wdGlvbnM/LnByb21vdGVWYWx1ZXMgPz8gcGFyZW50T3B0aW9ucz8ucHJvbW90ZVZhbHVlcyA/PyB0cnVlLFxuICAgICAgICBwcm9tb3RlQnVmZmVyczogb3B0aW9ucz8ucHJvbW90ZUJ1ZmZlcnMgPz8gcGFyZW50T3B0aW9ucz8ucHJvbW90ZUJ1ZmZlcnMgPz8gZmFsc2UsXG4gICAgICAgIGlnbm9yZVVuZGVmaW5lZDogb3B0aW9ucz8uaWdub3JlVW5kZWZpbmVkID8/IHBhcmVudE9wdGlvbnM/Lmlnbm9yZVVuZGVmaW5lZCA/PyBmYWxzZSxcbiAgICAgICAgYnNvblJlZ0V4cDogb3B0aW9ucz8uYnNvblJlZ0V4cCA/PyBwYXJlbnRPcHRpb25zPy5ic29uUmVnRXhwID8/IGZhbHNlLFxuICAgICAgICBzZXJpYWxpemVGdW5jdGlvbnM6IG9wdGlvbnM/LnNlcmlhbGl6ZUZ1bmN0aW9ucyA/PyBwYXJlbnRPcHRpb25zPy5zZXJpYWxpemVGdW5jdGlvbnMgPz8gZmFsc2UsXG4gICAgICAgIGZpZWxkc0FzUmF3OiBvcHRpb25zPy5maWVsZHNBc1JhdyA/PyBwYXJlbnRPcHRpb25zPy5maWVsZHNBc1JhdyA/PyB7fSxcbiAgICAgICAgZW5hYmxlVXRmOFZhbGlkYXRpb246IG9wdGlvbnM/LmVuYWJsZVV0ZjhWYWxpZGF0aW9uID8/IHBhcmVudE9wdGlvbnM/LmVuYWJsZVV0ZjhWYWxpZGF0aW9uID8/IHRydWVcbiAgICB9O1xufVxuZXhwb3J0cy5yZXNvbHZlQlNPTk9wdGlvbnMgPSByZXNvbHZlQlNPTk9wdGlvbnM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ic29uLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInJlc29sdmVCU09OT3B0aW9ucyIsInBsdWNrQlNPTlNlcmlhbGl6ZU9wdGlvbnMiLCJUaW1lc3RhbXAiLCJzZXJpYWxpemUiLCJPYmplY3RJZCIsIk1pbktleSIsIk1heEtleSIsIkxvbmciLCJJbnQzMiIsIkRvdWJsZSIsImRlc2VyaWFsaXplIiwiRGVjaW1hbDEyOCIsIkRCUmVmIiwiQ29kZSIsImNhbGN1bGF0ZU9iamVjdFNpemUiLCJCU09OVHlwZSIsIkJTT05TeW1ib2wiLCJCU09OUmVnRXhwIiwiQlNPTiIsIkJpbmFyeSIsImJzb25fMSIsInJlcXVpcmUiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib3B0aW9ucyIsImZpZWxkc0FzUmF3IiwidXNlQmlnSW50NjQiLCJwcm9tb3RlVmFsdWVzIiwicHJvbW90ZUJ1ZmZlcnMiLCJwcm9tb3RlTG9uZ3MiLCJzZXJpYWxpemVGdW5jdGlvbnMiLCJpZ25vcmVVbmRlZmluZWQiLCJic29uUmVnRXhwIiwicmF3IiwiZW5hYmxlVXRmOFZhbGlkYXRpb24iLCJwYXJlbnQiLCJwYXJlbnRPcHRpb25zIiwiYnNvbk9wdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/bson.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/bulk/common.js":
/*!*************************************************!*\
  !*** ./node_modules/mongodb/lib/bulk/common.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.BulkOperationBase = exports.FindOperators = exports.MongoBulkWriteError = exports.mergeBatchResults = exports.WriteError = exports.WriteConcernError = exports.BulkWriteResult = exports.Batch = exports.BatchType = void 0;\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst delete_1 = __webpack_require__(/*! ../operations/delete */ \"(ssr)/./node_modules/mongodb/lib/operations/delete.js\");\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst insert_1 = __webpack_require__(/*! ../operations/insert */ \"(ssr)/./node_modules/mongodb/lib/operations/insert.js\");\nconst operation_1 = __webpack_require__(/*! ../operations/operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\nconst update_1 = __webpack_require__(/*! ../operations/update */ \"(ssr)/./node_modules/mongodb/lib/operations/update.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst write_concern_1 = __webpack_require__(/*! ../write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\n/** @internal */ const kServerError = Symbol(\"serverError\");\n/** @public */ exports.BatchType = Object.freeze({\n    INSERT: 1,\n    UPDATE: 2,\n    DELETE: 3\n});\n/**\n * Keeps the state of a unordered batch so we can rewrite the results\n * correctly after command execution\n *\n * @public\n */ class Batch {\n    constructor(batchType, originalZeroIndex){\n        this.originalZeroIndex = originalZeroIndex;\n        this.currentIndex = 0;\n        this.originalIndexes = [];\n        this.batchType = batchType;\n        this.operations = [];\n        this.size = 0;\n        this.sizeBytes = 0;\n    }\n}\nexports.Batch = Batch;\n/**\n * @public\n * The result of a bulk write.\n */ class BulkWriteResult {\n    static generateIdMap(ids) {\n        const idMap = {};\n        for (const doc of ids){\n            idMap[doc.index] = doc._id;\n        }\n        return idMap;\n    }\n    /**\n     * Create a new BulkWriteResult instance\n     * @internal\n     */ constructor(bulkResult){\n        this.result = bulkResult;\n        this.insertedCount = this.result.nInserted ?? 0;\n        this.matchedCount = this.result.nMatched ?? 0;\n        this.modifiedCount = this.result.nModified ?? 0;\n        this.deletedCount = this.result.nRemoved ?? 0;\n        this.upsertedCount = this.result.upserted.length ?? 0;\n        this.upsertedIds = BulkWriteResult.generateIdMap(this.result.upserted);\n        this.insertedIds = BulkWriteResult.generateIdMap(this.result.insertedIds);\n        Object.defineProperty(this, \"result\", {\n            value: this.result,\n            enumerable: false\n        });\n    }\n    /** Evaluates to true if the bulk operation correctly executes */ get ok() {\n        return this.result.ok;\n    }\n    /**\n     * The number of inserted documents\n     * @deprecated Use insertedCount instead.\n     */ get nInserted() {\n        return this.result.nInserted;\n    }\n    /**\n     * Number of upserted documents\n     * @deprecated User upsertedCount instead.\n     */ get nUpserted() {\n        return this.result.nUpserted;\n    }\n    /**\n     * Number of matched documents\n     * @deprecated Use matchedCount instead.\n     */ get nMatched() {\n        return this.result.nMatched;\n    }\n    /**\n     * Number of documents updated physically on disk\n     * @deprecated Use modifiedCount instead.\n     */ get nModified() {\n        return this.result.nModified;\n    }\n    /**\n     * Number of removed documents\n     * @deprecated Use deletedCount instead.\n     */ get nRemoved() {\n        return this.result.nRemoved;\n    }\n    /**\n     * Returns an array of all inserted ids\n     * @deprecated Use insertedIds instead.\n     */ getInsertedIds() {\n        return this.result.insertedIds;\n    }\n    /**\n     * Returns an array of all upserted ids\n     * @deprecated Use upsertedIds instead.\n     */ getUpsertedIds() {\n        return this.result.upserted;\n    }\n    /** Returns the upserted id at the given index */ getUpsertedIdAt(index) {\n        return this.result.upserted[index];\n    }\n    /** Returns raw internal result */ getRawResponse() {\n        return this.result;\n    }\n    /** Returns true if the bulk operation contains a write error */ hasWriteErrors() {\n        return this.result.writeErrors.length > 0;\n    }\n    /** Returns the number of write errors off the bulk operation */ getWriteErrorCount() {\n        return this.result.writeErrors.length;\n    }\n    /** Returns a specific write error object */ getWriteErrorAt(index) {\n        return index < this.result.writeErrors.length ? this.result.writeErrors[index] : undefined;\n    }\n    /** Retrieve all write errors */ getWriteErrors() {\n        return this.result.writeErrors;\n    }\n    /** Retrieve the write concern error if one exists */ getWriteConcernError() {\n        if (this.result.writeConcernErrors.length === 0) {\n            return;\n        } else if (this.result.writeConcernErrors.length === 1) {\n            // Return the error\n            return this.result.writeConcernErrors[0];\n        } else {\n            // Combine the errors\n            let errmsg = \"\";\n            for(let i = 0; i < this.result.writeConcernErrors.length; i++){\n                const err = this.result.writeConcernErrors[i];\n                errmsg = errmsg + err.errmsg;\n                // TODO: Something better\n                if (i === 0) errmsg = errmsg + \" and \";\n            }\n            return new WriteConcernError({\n                errmsg,\n                code: error_1.MONGODB_ERROR_CODES.WriteConcernFailed\n            });\n        }\n    }\n    toString() {\n        return `BulkWriteResult(${this.result})`;\n    }\n    isOk() {\n        return this.result.ok === 1;\n    }\n}\nexports.BulkWriteResult = BulkWriteResult;\n/**\n * An error representing a failure by the server to apply the requested write concern to the bulk operation.\n * @public\n * @category Error\n */ class WriteConcernError {\n    constructor(error){\n        this[kServerError] = error;\n    }\n    /** Write concern error code. */ get code() {\n        return this[kServerError].code;\n    }\n    /** Write concern error message. */ get errmsg() {\n        return this[kServerError].errmsg;\n    }\n    /** Write concern error info. */ get errInfo() {\n        return this[kServerError].errInfo;\n    }\n    toJSON() {\n        return this[kServerError];\n    }\n    toString() {\n        return `WriteConcernError(${this.errmsg})`;\n    }\n}\nexports.WriteConcernError = WriteConcernError;\n/**\n * An error that occurred during a BulkWrite on the server.\n * @public\n * @category Error\n */ class WriteError {\n    constructor(err){\n        this.err = err;\n    }\n    /** WriteError code. */ get code() {\n        return this.err.code;\n    }\n    /** WriteError original bulk operation index. */ get index() {\n        return this.err.index;\n    }\n    /** WriteError message. */ get errmsg() {\n        return this.err.errmsg;\n    }\n    /** WriteError details. */ get errInfo() {\n        return this.err.errInfo;\n    }\n    /** Returns the underlying operation that caused the error */ getOperation() {\n        return this.err.op;\n    }\n    toJSON() {\n        return {\n            code: this.err.code,\n            index: this.err.index,\n            errmsg: this.err.errmsg,\n            op: this.err.op\n        };\n    }\n    toString() {\n        return `WriteError(${JSON.stringify(this.toJSON())})`;\n    }\n}\nexports.WriteError = WriteError;\n/** Merges results into shared data structure */ function mergeBatchResults(batch, bulkResult, err, result) {\n    // If we have an error set the result to be the err object\n    if (err) {\n        result = err;\n    } else if (result && result.result) {\n        result = result.result;\n    }\n    if (result == null) {\n        return;\n    }\n    // Do we have a top level error stop processing and return\n    if (result.ok === 0 && bulkResult.ok === 1) {\n        bulkResult.ok = 0;\n        const writeError = {\n            index: 0,\n            code: result.code || 0,\n            errmsg: result.message,\n            errInfo: result.errInfo,\n            op: batch.operations[0]\n        };\n        bulkResult.writeErrors.push(new WriteError(writeError));\n        return;\n    } else if (result.ok === 0 && bulkResult.ok === 0) {\n        return;\n    }\n    // If we have an insert Batch type\n    if (isInsertBatch(batch) && result.n) {\n        bulkResult.nInserted = bulkResult.nInserted + result.n;\n    }\n    // If we have an insert Batch type\n    if (isDeleteBatch(batch) && result.n) {\n        bulkResult.nRemoved = bulkResult.nRemoved + result.n;\n    }\n    let nUpserted = 0;\n    // We have an array of upserted values, we need to rewrite the indexes\n    if (Array.isArray(result.upserted)) {\n        nUpserted = result.upserted.length;\n        for(let i = 0; i < result.upserted.length; i++){\n            bulkResult.upserted.push({\n                index: result.upserted[i].index + batch.originalZeroIndex,\n                _id: result.upserted[i]._id\n            });\n        }\n    } else if (result.upserted) {\n        nUpserted = 1;\n        bulkResult.upserted.push({\n            index: batch.originalZeroIndex,\n            _id: result.upserted\n        });\n    }\n    // If we have an update Batch type\n    if (isUpdateBatch(batch) && result.n) {\n        const nModified = result.nModified;\n        bulkResult.nUpserted = bulkResult.nUpserted + nUpserted;\n        bulkResult.nMatched = bulkResult.nMatched + (result.n - nUpserted);\n        if (typeof nModified === \"number\") {\n            bulkResult.nModified = bulkResult.nModified + nModified;\n        } else {\n            bulkResult.nModified = 0;\n        }\n    }\n    if (Array.isArray(result.writeErrors)) {\n        for(let i = 0; i < result.writeErrors.length; i++){\n            const writeError = {\n                index: batch.originalIndexes[result.writeErrors[i].index],\n                code: result.writeErrors[i].code,\n                errmsg: result.writeErrors[i].errmsg,\n                errInfo: result.writeErrors[i].errInfo,\n                op: batch.operations[result.writeErrors[i].index]\n            };\n            bulkResult.writeErrors.push(new WriteError(writeError));\n        }\n    }\n    if (result.writeConcernError) {\n        bulkResult.writeConcernErrors.push(new WriteConcernError(result.writeConcernError));\n    }\n}\nexports.mergeBatchResults = mergeBatchResults;\nfunction executeCommands(bulkOperation, options, callback) {\n    if (bulkOperation.s.batches.length === 0) {\n        return callback(undefined, new BulkWriteResult(bulkOperation.s.bulkResult));\n    }\n    const batch = bulkOperation.s.batches.shift();\n    function resultHandler(err, result) {\n        // Error is a driver related error not a bulk op error, return early\n        if (err && \"message\" in err && !(err instanceof error_1.MongoWriteConcernError)) {\n            return callback(new MongoBulkWriteError(err, new BulkWriteResult(bulkOperation.s.bulkResult)));\n        }\n        if (err instanceof error_1.MongoWriteConcernError) {\n            return handleMongoWriteConcernError(batch, bulkOperation.s.bulkResult, err, callback);\n        }\n        // Merge the results together\n        mergeBatchResults(batch, bulkOperation.s.bulkResult, err, result);\n        const writeResult = new BulkWriteResult(bulkOperation.s.bulkResult);\n        if (bulkOperation.handleWriteError(callback, writeResult)) return;\n        // Execute the next command in line\n        executeCommands(bulkOperation, options, callback);\n    }\n    const finalOptions = (0, utils_1.resolveOptions)(bulkOperation, {\n        ...options,\n        ordered: bulkOperation.isOrdered\n    });\n    if (finalOptions.bypassDocumentValidation !== true) {\n        delete finalOptions.bypassDocumentValidation;\n    }\n    // Set an operationIf if provided\n    if (bulkOperation.operationId) {\n        resultHandler.operationId = bulkOperation.operationId;\n    }\n    // Is the bypassDocumentValidation options specific\n    if (bulkOperation.s.bypassDocumentValidation === true) {\n        finalOptions.bypassDocumentValidation = true;\n    }\n    // Is the checkKeys option disabled\n    if (bulkOperation.s.checkKeys === false) {\n        finalOptions.checkKeys = false;\n    }\n    if (finalOptions.retryWrites) {\n        if (isUpdateBatch(batch)) {\n            finalOptions.retryWrites = finalOptions.retryWrites && !batch.operations.some((op)=>op.multi);\n        }\n        if (isDeleteBatch(batch)) {\n            finalOptions.retryWrites = finalOptions.retryWrites && !batch.operations.some((op)=>op.limit === 0);\n        }\n    }\n    try {\n        if (isInsertBatch(batch)) {\n            (0, execute_operation_1.executeOperation)(bulkOperation.s.collection.client, new insert_1.InsertOperation(bulkOperation.s.namespace, batch.operations, finalOptions), resultHandler);\n        } else if (isUpdateBatch(batch)) {\n            (0, execute_operation_1.executeOperation)(bulkOperation.s.collection.client, new update_1.UpdateOperation(bulkOperation.s.namespace, batch.operations, finalOptions), resultHandler);\n        } else if (isDeleteBatch(batch)) {\n            (0, execute_operation_1.executeOperation)(bulkOperation.s.collection.client, new delete_1.DeleteOperation(bulkOperation.s.namespace, batch.operations, finalOptions), resultHandler);\n        }\n    } catch (err) {\n        // Force top level error\n        err.ok = 0;\n        // Merge top level error and return\n        mergeBatchResults(batch, bulkOperation.s.bulkResult, err, undefined);\n        callback();\n    }\n}\nfunction handleMongoWriteConcernError(batch, bulkResult, err, callback) {\n    mergeBatchResults(batch, bulkResult, undefined, err.result);\n    callback(new MongoBulkWriteError({\n        message: err.result?.writeConcernError.errmsg,\n        code: err.result?.writeConcernError.result\n    }, new BulkWriteResult(bulkResult)));\n}\n/**\n * An error indicating an unsuccessful Bulk Write\n * @public\n * @category Error\n */ class MongoBulkWriteError extends error_1.MongoServerError {\n    /** Creates a new MongoBulkWriteError */ constructor(error, result){\n        super(error);\n        this.writeErrors = [];\n        if (error instanceof WriteConcernError) this.err = error;\n        else if (!(error instanceof Error)) {\n            this.message = error.message;\n            this.code = error.code;\n            this.writeErrors = error.writeErrors ?? [];\n        }\n        this.result = result;\n        Object.assign(this, error);\n    }\n    get name() {\n        return \"MongoBulkWriteError\";\n    }\n    /** Number of documents inserted. */ get insertedCount() {\n        return this.result.insertedCount;\n    }\n    /** Number of documents matched for update. */ get matchedCount() {\n        return this.result.matchedCount;\n    }\n    /** Number of documents modified. */ get modifiedCount() {\n        return this.result.modifiedCount;\n    }\n    /** Number of documents deleted. */ get deletedCount() {\n        return this.result.deletedCount;\n    }\n    /** Number of documents upserted. */ get upsertedCount() {\n        return this.result.upsertedCount;\n    }\n    /** Inserted document generated Id's, hash key is the index of the originating operation */ get insertedIds() {\n        return this.result.insertedIds;\n    }\n    /** Upserted document generated Id's, hash key is the index of the originating operation */ get upsertedIds() {\n        return this.result.upsertedIds;\n    }\n}\nexports.MongoBulkWriteError = MongoBulkWriteError;\n/**\n * A builder object that is returned from {@link BulkOperationBase#find}.\n * Is used to build a write operation that involves a query filter.\n *\n * @public\n */ class FindOperators {\n    /**\n     * Creates a new FindOperators object.\n     * @internal\n     */ constructor(bulkOperation){\n        this.bulkOperation = bulkOperation;\n    }\n    /** Add a multiple update operation to the bulk operation */ update(updateDocument) {\n        const currentOp = buildCurrentOp(this.bulkOperation);\n        return this.bulkOperation.addToOperationsList(exports.BatchType.UPDATE, (0, update_1.makeUpdateStatement)(currentOp.selector, updateDocument, {\n            ...currentOp,\n            multi: true\n        }));\n    }\n    /** Add a single update operation to the bulk operation */ updateOne(updateDocument) {\n        if (!(0, utils_1.hasAtomicOperators)(updateDocument)) {\n            throw new error_1.MongoInvalidArgumentError(\"Update document requires atomic operators\");\n        }\n        const currentOp = buildCurrentOp(this.bulkOperation);\n        return this.bulkOperation.addToOperationsList(exports.BatchType.UPDATE, (0, update_1.makeUpdateStatement)(currentOp.selector, updateDocument, {\n            ...currentOp,\n            multi: false\n        }));\n    }\n    /** Add a replace one operation to the bulk operation */ replaceOne(replacement) {\n        if ((0, utils_1.hasAtomicOperators)(replacement)) {\n            throw new error_1.MongoInvalidArgumentError(\"Replacement document must not use atomic operators\");\n        }\n        const currentOp = buildCurrentOp(this.bulkOperation);\n        return this.bulkOperation.addToOperationsList(exports.BatchType.UPDATE, (0, update_1.makeUpdateStatement)(currentOp.selector, replacement, {\n            ...currentOp,\n            multi: false\n        }));\n    }\n    /** Add a delete one operation to the bulk operation */ deleteOne() {\n        const currentOp = buildCurrentOp(this.bulkOperation);\n        return this.bulkOperation.addToOperationsList(exports.BatchType.DELETE, (0, delete_1.makeDeleteStatement)(currentOp.selector, {\n            ...currentOp,\n            limit: 1\n        }));\n    }\n    /** Add a delete many operation to the bulk operation */ delete() {\n        const currentOp = buildCurrentOp(this.bulkOperation);\n        return this.bulkOperation.addToOperationsList(exports.BatchType.DELETE, (0, delete_1.makeDeleteStatement)(currentOp.selector, {\n            ...currentOp,\n            limit: 0\n        }));\n    }\n    /** Upsert modifier for update bulk operation, noting that this operation is an upsert. */ upsert() {\n        if (!this.bulkOperation.s.currentOp) {\n            this.bulkOperation.s.currentOp = {};\n        }\n        this.bulkOperation.s.currentOp.upsert = true;\n        return this;\n    }\n    /** Specifies the collation for the query condition. */ collation(collation) {\n        if (!this.bulkOperation.s.currentOp) {\n            this.bulkOperation.s.currentOp = {};\n        }\n        this.bulkOperation.s.currentOp.collation = collation;\n        return this;\n    }\n    /** Specifies arrayFilters for UpdateOne or UpdateMany bulk operations. */ arrayFilters(arrayFilters) {\n        if (!this.bulkOperation.s.currentOp) {\n            this.bulkOperation.s.currentOp = {};\n        }\n        this.bulkOperation.s.currentOp.arrayFilters = arrayFilters;\n        return this;\n    }\n    /** Specifies hint for the bulk operation. */ hint(hint) {\n        if (!this.bulkOperation.s.currentOp) {\n            this.bulkOperation.s.currentOp = {};\n        }\n        this.bulkOperation.s.currentOp.hint = hint;\n        return this;\n    }\n}\nexports.FindOperators = FindOperators;\n/**\n * TODO(NODE-4063)\n * BulkWrites merge complexity is implemented in executeCommands\n * This provides a vehicle to treat bulkOperations like any other operation (hence \"shim\")\n * We would like this logic to simply live inside the BulkWriteOperation class\n * @internal\n */ class BulkWriteShimOperation extends operation_1.AbstractCallbackOperation {\n    constructor(bulkOperation, options){\n        super(options);\n        this.bulkOperation = bulkOperation;\n    }\n    executeCallback(server, session, callback) {\n        if (this.options.session == null) {\n            // An implicit session could have been created by 'executeOperation'\n            // So if we stick it on finalOptions here, each bulk operation\n            // will use this same session, it'll be passed in the same way\n            // an explicit session would be\n            this.options.session = session;\n        }\n        return executeCommands(this.bulkOperation, this.options, callback);\n    }\n}\n/** @public */ class BulkOperationBase {\n    /**\n     * Create a new OrderedBulkOperation or UnorderedBulkOperation instance\n     * @internal\n     */ constructor(collection, options, isOrdered){\n        // determine whether bulkOperation is ordered or unordered\n        this.isOrdered = isOrdered;\n        const topology = (0, utils_1.getTopology)(collection);\n        options = options == null ? {} : options;\n        // TODO Bring from driver information in hello\n        // Get the namespace for the write operations\n        const namespace = collection.s.namespace;\n        // Used to mark operation as executed\n        const executed = false;\n        // Current item\n        const currentOp = undefined;\n        // Set max byte size\n        const hello = topology.lastHello();\n        // If we have autoEncryption on, batch-splitting must be done on 2mb chunks, but single documents\n        // over 2mb are still allowed\n        const usingAutoEncryption = !!(topology.s.options && topology.s.options.autoEncrypter);\n        const maxBsonObjectSize = hello && hello.maxBsonObjectSize ? hello.maxBsonObjectSize : 1024 * 1024 * 16;\n        const maxBatchSizeBytes = usingAutoEncryption ? 1024 * 1024 * 2 : maxBsonObjectSize;\n        const maxWriteBatchSize = hello && hello.maxWriteBatchSize ? hello.maxWriteBatchSize : 1000;\n        // Calculates the largest possible size of an Array key, represented as a BSON string\n        // element. This calculation:\n        //     1 byte for BSON type\n        //     # of bytes = length of (string representation of (maxWriteBatchSize - 1))\n        //   + 1 bytes for null terminator\n        const maxKeySize = (maxWriteBatchSize - 1).toString(10).length + 2;\n        // Final options for retryable writes\n        let finalOptions = Object.assign({}, options);\n        finalOptions = (0, utils_1.applyRetryableWrites)(finalOptions, collection.s.db);\n        // Final results\n        const bulkResult = {\n            ok: 1,\n            writeErrors: [],\n            writeConcernErrors: [],\n            insertedIds: [],\n            nInserted: 0,\n            nUpserted: 0,\n            nMatched: 0,\n            nModified: 0,\n            nRemoved: 0,\n            upserted: []\n        };\n        // Internal state\n        this.s = {\n            // Final result\n            bulkResult,\n            // Current batch state\n            currentBatch: undefined,\n            currentIndex: 0,\n            // ordered specific\n            currentBatchSize: 0,\n            currentBatchSizeBytes: 0,\n            // unordered specific\n            currentInsertBatch: undefined,\n            currentUpdateBatch: undefined,\n            currentRemoveBatch: undefined,\n            batches: [],\n            // Write concern\n            writeConcern: write_concern_1.WriteConcern.fromOptions(options),\n            // Max batch size options\n            maxBsonObjectSize,\n            maxBatchSizeBytes,\n            maxWriteBatchSize,\n            maxKeySize,\n            // Namespace\n            namespace,\n            // Topology\n            topology,\n            // Options\n            options: finalOptions,\n            // BSON options\n            bsonOptions: (0, bson_1.resolveBSONOptions)(options),\n            // Current operation\n            currentOp,\n            // Executed\n            executed,\n            // Collection\n            collection,\n            // Fundamental error\n            err: undefined,\n            // check keys\n            checkKeys: typeof options.checkKeys === \"boolean\" ? options.checkKeys : false\n        };\n        // bypass Validation\n        if (options.bypassDocumentValidation === true) {\n            this.s.bypassDocumentValidation = true;\n        }\n    }\n    /**\n     * Add a single insert document to the bulk operation\n     *\n     * @example\n     * ```ts\n     * const bulkOp = collection.initializeOrderedBulkOp();\n     *\n     * // Adds three inserts to the bulkOp.\n     * bulkOp\n     *   .insert({ a: 1 })\n     *   .insert({ b: 2 })\n     *   .insert({ c: 3 });\n     * await bulkOp.execute();\n     * ```\n     */ insert(document) {\n        if (document._id == null && !shouldForceServerObjectId(this)) {\n            document._id = new bson_1.ObjectId();\n        }\n        return this.addToOperationsList(exports.BatchType.INSERT, document);\n    }\n    /**\n     * Builds a find operation for an update/updateOne/delete/deleteOne/replaceOne.\n     * Returns a builder object used to complete the definition of the operation.\n     *\n     * @example\n     * ```ts\n     * const bulkOp = collection.initializeOrderedBulkOp();\n     *\n     * // Add an updateOne to the bulkOp\n     * bulkOp.find({ a: 1 }).updateOne({ $set: { b: 2 } });\n     *\n     * // Add an updateMany to the bulkOp\n     * bulkOp.find({ c: 3 }).update({ $set: { d: 4 } });\n     *\n     * // Add an upsert\n     * bulkOp.find({ e: 5 }).upsert().updateOne({ $set: { f: 6 } });\n     *\n     * // Add a deletion\n     * bulkOp.find({ g: 7 }).deleteOne();\n     *\n     * // Add a multi deletion\n     * bulkOp.find({ h: 8 }).delete();\n     *\n     * // Add a replaceOne\n     * bulkOp.find({ i: 9 }).replaceOne({writeConcern: { j: 10 }});\n     *\n     * // Update using a pipeline (requires Mongodb 4.2 or higher)\n     * bulk.find({ k: 11, y: { $exists: true }, z: { $exists: true } }).updateOne([\n     *   { $set: { total: { $sum: [ '$y', '$z' ] } } }\n     * ]);\n     *\n     * // All of the ops will now be executed\n     * await bulkOp.execute();\n     * ```\n     */ find(selector) {\n        if (!selector) {\n            throw new error_1.MongoInvalidArgumentError(\"Bulk find operation must specify a selector\");\n        }\n        // Save a current selector\n        this.s.currentOp = {\n            selector: selector\n        };\n        return new FindOperators(this);\n    }\n    /** Specifies a raw operation to perform in the bulk write. */ raw(op) {\n        if (op == null || typeof op !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError(\"Operation must be an object with an operation key\");\n        }\n        if (\"insertOne\" in op) {\n            const forceServerObjectId = shouldForceServerObjectId(this);\n            if (op.insertOne && op.insertOne.document == null) {\n                // NOTE: provided for legacy support, but this is a malformed operation\n                if (forceServerObjectId !== true && op.insertOne._id == null) {\n                    op.insertOne._id = new bson_1.ObjectId();\n                }\n                return this.addToOperationsList(exports.BatchType.INSERT, op.insertOne);\n            }\n            if (forceServerObjectId !== true && op.insertOne.document._id == null) {\n                op.insertOne.document._id = new bson_1.ObjectId();\n            }\n            return this.addToOperationsList(exports.BatchType.INSERT, op.insertOne.document);\n        }\n        if (\"replaceOne\" in op || \"updateOne\" in op || \"updateMany\" in op) {\n            if (\"replaceOne\" in op) {\n                if (\"q\" in op.replaceOne) {\n                    throw new error_1.MongoInvalidArgumentError(\"Raw operations are not allowed\");\n                }\n                const updateStatement = (0, update_1.makeUpdateStatement)(op.replaceOne.filter, op.replaceOne.replacement, {\n                    ...op.replaceOne,\n                    multi: false\n                });\n                if ((0, utils_1.hasAtomicOperators)(updateStatement.u)) {\n                    throw new error_1.MongoInvalidArgumentError(\"Replacement document must not use atomic operators\");\n                }\n                return this.addToOperationsList(exports.BatchType.UPDATE, updateStatement);\n            }\n            if (\"updateOne\" in op) {\n                if (\"q\" in op.updateOne) {\n                    throw new error_1.MongoInvalidArgumentError(\"Raw operations are not allowed\");\n                }\n                const updateStatement = (0, update_1.makeUpdateStatement)(op.updateOne.filter, op.updateOne.update, {\n                    ...op.updateOne,\n                    multi: false\n                });\n                if (!(0, utils_1.hasAtomicOperators)(updateStatement.u)) {\n                    throw new error_1.MongoInvalidArgumentError(\"Update document requires atomic operators\");\n                }\n                return this.addToOperationsList(exports.BatchType.UPDATE, updateStatement);\n            }\n            if (\"updateMany\" in op) {\n                if (\"q\" in op.updateMany) {\n                    throw new error_1.MongoInvalidArgumentError(\"Raw operations are not allowed\");\n                }\n                const updateStatement = (0, update_1.makeUpdateStatement)(op.updateMany.filter, op.updateMany.update, {\n                    ...op.updateMany,\n                    multi: true\n                });\n                if (!(0, utils_1.hasAtomicOperators)(updateStatement.u)) {\n                    throw new error_1.MongoInvalidArgumentError(\"Update document requires atomic operators\");\n                }\n                return this.addToOperationsList(exports.BatchType.UPDATE, updateStatement);\n            }\n        }\n        if (\"deleteOne\" in op) {\n            if (\"q\" in op.deleteOne) {\n                throw new error_1.MongoInvalidArgumentError(\"Raw operations are not allowed\");\n            }\n            return this.addToOperationsList(exports.BatchType.DELETE, (0, delete_1.makeDeleteStatement)(op.deleteOne.filter, {\n                ...op.deleteOne,\n                limit: 1\n            }));\n        }\n        if (\"deleteMany\" in op) {\n            if (\"q\" in op.deleteMany) {\n                throw new error_1.MongoInvalidArgumentError(\"Raw operations are not allowed\");\n            }\n            return this.addToOperationsList(exports.BatchType.DELETE, (0, delete_1.makeDeleteStatement)(op.deleteMany.filter, {\n                ...op.deleteMany,\n                limit: 0\n            }));\n        }\n        // otherwise an unknown operation was provided\n        throw new error_1.MongoInvalidArgumentError(\"bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany\");\n    }\n    get bsonOptions() {\n        return this.s.bsonOptions;\n    }\n    get writeConcern() {\n        return this.s.writeConcern;\n    }\n    get batches() {\n        const batches = [\n            ...this.s.batches\n        ];\n        if (this.isOrdered) {\n            if (this.s.currentBatch) batches.push(this.s.currentBatch);\n        } else {\n            if (this.s.currentInsertBatch) batches.push(this.s.currentInsertBatch);\n            if (this.s.currentUpdateBatch) batches.push(this.s.currentUpdateBatch);\n            if (this.s.currentRemoveBatch) batches.push(this.s.currentRemoveBatch);\n        }\n        return batches;\n    }\n    async execute(options = {}) {\n        if (this.s.executed) {\n            throw new error_1.MongoBatchReExecutionError();\n        }\n        const writeConcern = write_concern_1.WriteConcern.fromOptions(options);\n        if (writeConcern) {\n            this.s.writeConcern = writeConcern;\n        }\n        // If we have current batch\n        if (this.isOrdered) {\n            if (this.s.currentBatch) this.s.batches.push(this.s.currentBatch);\n        } else {\n            if (this.s.currentInsertBatch) this.s.batches.push(this.s.currentInsertBatch);\n            if (this.s.currentUpdateBatch) this.s.batches.push(this.s.currentUpdateBatch);\n            if (this.s.currentRemoveBatch) this.s.batches.push(this.s.currentRemoveBatch);\n        }\n        // If we have no operations in the bulk raise an error\n        if (this.s.batches.length === 0) {\n            throw new error_1.MongoInvalidArgumentError(\"Invalid BulkOperation, Batch cannot be empty\");\n        }\n        this.s.executed = true;\n        const finalOptions = {\n            ...this.s.options,\n            ...options\n        };\n        const operation = new BulkWriteShimOperation(this, finalOptions);\n        return (0, execute_operation_1.executeOperation)(this.s.collection.client, operation);\n    }\n    /**\n     * Handles the write error before executing commands\n     * @internal\n     */ handleWriteError(callback, writeResult) {\n        if (this.s.bulkResult.writeErrors.length > 0) {\n            const msg = this.s.bulkResult.writeErrors[0].errmsg ? this.s.bulkResult.writeErrors[0].errmsg : \"write operation failed\";\n            callback(new MongoBulkWriteError({\n                message: msg,\n                code: this.s.bulkResult.writeErrors[0].code,\n                writeErrors: this.s.bulkResult.writeErrors\n            }, writeResult));\n            return true;\n        }\n        const writeConcernError = writeResult.getWriteConcernError();\n        if (writeConcernError) {\n            callback(new MongoBulkWriteError(writeConcernError, writeResult));\n            return true;\n        }\n        return false;\n    }\n}\nexports.BulkOperationBase = BulkOperationBase;\nObject.defineProperty(BulkOperationBase.prototype, \"length\", {\n    enumerable: true,\n    get () {\n        return this.s.currentIndex;\n    }\n});\nfunction shouldForceServerObjectId(bulkOperation) {\n    if (typeof bulkOperation.s.options.forceServerObjectId === \"boolean\") {\n        return bulkOperation.s.options.forceServerObjectId;\n    }\n    if (typeof bulkOperation.s.collection.s.db.options?.forceServerObjectId === \"boolean\") {\n        return bulkOperation.s.collection.s.db.options?.forceServerObjectId;\n    }\n    return false;\n}\nfunction isInsertBatch(batch) {\n    return batch.batchType === exports.BatchType.INSERT;\n}\nfunction isUpdateBatch(batch) {\n    return batch.batchType === exports.BatchType.UPDATE;\n}\nfunction isDeleteBatch(batch) {\n    return batch.batchType === exports.BatchType.DELETE;\n}\nfunction buildCurrentOp(bulkOp) {\n    let { currentOp } = bulkOp.s;\n    bulkOp.s.currentOp = undefined;\n    if (!currentOp) currentOp = {};\n    return currentOp;\n} //# sourceMappingURL=common.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvYnVsay9jb21tb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHlCQUF5QixHQUFHQSxxQkFBcUIsR0FBR0EsMkJBQTJCLEdBQUdBLHlCQUF5QixHQUFHQSxrQkFBa0IsR0FBR0EseUJBQXlCLEdBQUdBLHVCQUF1QixHQUFHQSxhQUFhLEdBQUdBLGlCQUFpQixHQUFHLEtBQUs7QUFDbE8sTUFBTVcsU0FBU0MsbUJBQU9BLENBQUMseURBQVM7QUFDaEMsTUFBTUMsVUFBVUQsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUUsV0FBV0YsbUJBQU9BLENBQUMsbUZBQXNCO0FBQy9DLE1BQU1HLHNCQUFzQkgsbUJBQU9BLENBQUMseUdBQWlDO0FBQ3JFLE1BQU1JLFdBQVdKLG1CQUFPQSxDQUFDLG1GQUFzQjtBQUMvQyxNQUFNSyxjQUFjTCxtQkFBT0EsQ0FBQyx5RkFBeUI7QUFDckQsTUFBTU0sV0FBV04sbUJBQU9BLENBQUMsbUZBQXNCO0FBQy9DLE1BQU1PLFVBQVVQLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1RLGtCQUFrQlIsbUJBQU9BLENBQUMsMkVBQWtCO0FBQ2xELGNBQWMsR0FDZCxNQUFNUyxlQUFlQyxPQUFPO0FBQzVCLFlBQVksR0FDWnRCLGlCQUFpQixHQUFHRixPQUFPeUIsTUFBTSxDQUFDO0lBQzlCQyxRQUFRO0lBQ1JDLFFBQVE7SUFDUkMsUUFBUTtBQUNaO0FBQ0E7Ozs7O0NBS0MsR0FDRCxNQUFNakI7SUFDRmtCLFlBQVlDLFNBQVMsRUFBRUMsaUJBQWlCLENBQUU7UUFDdEMsSUFBSSxDQUFDQSxpQkFBaUIsR0FBR0E7UUFDekIsSUFBSSxDQUFDQyxZQUFZLEdBQUc7UUFDcEIsSUFBSSxDQUFDQyxlQUFlLEdBQUcsRUFBRTtRQUN6QixJQUFJLENBQUNILFNBQVMsR0FBR0E7UUFDakIsSUFBSSxDQUFD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WCxFQUNBLGtDQUFrQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9idWxrL2NvbW1vbi5qcz9mN2NiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5CdWxrT3BlcmF0aW9uQmFzZSA9IGV4cG9ydHMuRmluZE9wZXJhdG9ycyA9IGV4cG9ydHMuTW9uZ29CdWxrV3JpdGVFcnJvciA9IGV4cG9ydHMubWVyZ2VCYXRjaFJlc3VsdHMgPSBleHBvcnRzLldyaXRlRXJyb3IgPSBleHBvcnRzLldyaXRlQ29uY2VybkVycm9yID0gZXhwb3J0cy5CdWxrV3JpdGVSZXN1bHQgPSBleHBvcnRzLkJhdGNoID0gZXhwb3J0cy5CYXRjaFR5cGUgPSB2b2lkIDA7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi4vYnNvblwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBkZWxldGVfMSA9IHJlcXVpcmUoXCIuLi9vcGVyYXRpb25zL2RlbGV0ZVwiKTtcbmNvbnN0IGV4ZWN1dGVfb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9leGVjdXRlX29wZXJhdGlvblwiKTtcbmNvbnN0IGluc2VydF8xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMvaW5zZXJ0XCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9vcGVyYXRpb25cIik7XG5jb25zdCB1cGRhdGVfMSA9IHJlcXVpcmUoXCIuLi9vcGVyYXRpb25zL3VwZGF0ZVwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCB3cml0ZV9jb25jZXJuXzEgPSByZXF1aXJlKFwiLi4vd3JpdGVfY29uY2VyblwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtTZXJ2ZXJFcnJvciA9IFN5bWJvbCgnc2VydmVyRXJyb3InKTtcbi8qKiBAcHVibGljICovXG5leHBvcnRzLkJhdGNoVHlwZSA9IE9iamVjdC5mcmVlemUoe1xuICAgIElOU0VSVDogMSxcbiAgICBVUERBVEU6IDIsXG4gICAgREVMRVRFOiAzXG59KTtcbi8qKlxuICogS2VlcHMgdGhlIHN0YXRlIG9mIGEgdW5vcmRlcmVkIGJhdGNoIHNvIHdlIGNhbiByZXdyaXRlIHRoZSByZXN1bHRzXG4gKiBjb3JyZWN0bHkgYWZ0ZXIgY29tbWFuZCBleGVjdXRpb25cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIEJhdGNoIHtcbiAgICBjb25zdHJ1Y3RvcihiYXRjaFR5cGUsIG9yaWdpbmFsWmVyb0luZGV4KSB7XG4gICAgICAgIHRoaXMub3JpZ2luYWxaZXJvSW5kZXggPSBvcmlnaW5hbFplcm9JbmRleDtcbiAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSAwO1xuICAgICAgICB0aGlzLm9yaWdpbmFsSW5kZXhlcyA9IFtdO1xuICAgICAgICB0aGlzLmJhdGNoVHlwZSA9IGJhdGNoVHlwZTtcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zID0gW107XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuc2l6ZUJ5dGVzID0gMDtcbiAgICB9XG59XG5leHBvcnRzLkJhdGNoID0gQmF0Y2g7XG4vKipcbiAqIEBwdWJsaWNcbiAqIFRoZSByZXN1bHQgb2YgYSBidWxrIHdyaXRlLlxuICovXG5jbGFzcyBCdWxrV3JpdGVSZXN1bHQge1xuICAgIHN0YXRpYyBnZW5lcmF0ZUlkTWFwKGlkcykge1xuICAgICAgICBjb25zdCBpZE1hcCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGRvYyBvZiBpZHMpIHtcbiAgICAgICAgICAgIGlkTWFwW2RvYy5pbmRleF0gPSBkb2MuX2lkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpZE1hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IEJ1bGtXcml0ZVJlc3VsdCBpbnN0YW5jZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGJ1bGtSZXN1bHQpIHtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSBidWxrUmVzdWx0O1xuICAgICAgICB0aGlzLmluc2VydGVkQ291bnQgPSB0aGlzLnJlc3VsdC5uSW5zZXJ0ZWQgPz8gMDtcbiAgICAgICAgdGhpcy5tYXRjaGVkQ291bnQgPSB0aGlzLnJlc3VsdC5uTWF0Y2hlZCA/PyAwO1xuICAgICAgICB0aGlzLm1vZGlmaWVkQ291bnQgPSB0aGlzLnJlc3VsdC5uTW9kaWZpZWQgPz8gMDtcbiAgICAgICAgdGhpcy5kZWxldGVkQ291bnQgPSB0aGlzLnJlc3VsdC5uUmVtb3ZlZCA/PyAwO1xuICAgICAgICB0aGlzLnVwc2VydGVkQ291bnQgPSB0aGlzLnJlc3VsdC51cHNlcnRlZC5sZW5ndGggPz8gMDtcbiAgICAgICAgdGhpcy51cHNlcnRlZElkcyA9IEJ1bGtXcml0ZVJlc3VsdC5nZW5lcmF0ZUlkTWFwKHRoaXMucmVzdWx0LnVwc2VydGVkKTtcbiAgICAgICAgdGhpcy5pbnNlcnRlZElkcyA9IEJ1bGtXcml0ZVJlc3VsdC5nZW5lcmF0ZUlkTWFwKHRoaXMucmVzdWx0Lmluc2VydGVkSWRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdyZXN1bHQnLCB7IHZhbHVlOiB0aGlzLnJlc3VsdCwgZW51bWVyYWJsZTogZmFsc2UgfSk7XG4gICAgfVxuICAgIC8qKiBFdmFsdWF0ZXMgdG8gdHJ1ZSBpZiB0aGUgYnVsayBvcGVyYXRpb24gY29ycmVjdGx5IGV4ZWN1dGVzICovXG4gICAgZ2V0IG9rKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQub2s7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgaW5zZXJ0ZWQgZG9jdW1lbnRzXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIGluc2VydGVkQ291bnQgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgbkluc2VydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQubkluc2VydGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOdW1iZXIgb2YgdXBzZXJ0ZWQgZG9jdW1lbnRzXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlciB1cHNlcnRlZENvdW50IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IG5VcHNlcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0Lm5VcHNlcnRlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTnVtYmVyIG9mIG1hdGNoZWQgZG9jdW1lbnRzXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIG1hdGNoZWRDb3VudCBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCBuTWF0Y2hlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0Lm5NYXRjaGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOdW1iZXIgb2YgZG9jdW1lbnRzIHVwZGF0ZWQgcGh5c2ljYWxseSBvbiBkaXNrXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIG1vZGlmaWVkQ291bnQgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgbk1vZGlmaWVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQubk1vZGlmaWVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOdW1iZXIgb2YgcmVtb3ZlZCBkb2N1bWVudHNcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgZGVsZXRlZENvdW50IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IG5SZW1vdmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQublJlbW92ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgYWxsIGluc2VydGVkIGlkc1xuICAgICAqIEBkZXByZWNhdGVkIFVzZSBpbnNlcnRlZElkcyBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldEluc2VydGVkSWRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQuaW5zZXJ0ZWRJZHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgYWxsIHVwc2VydGVkIGlkc1xuICAgICAqIEBkZXByZWNhdGVkIFVzZSB1cHNlcnRlZElkcyBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldFVwc2VydGVkSWRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQudXBzZXJ0ZWQ7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSB1cHNlcnRlZCBpZCBhdCB0aGUgZ2l2ZW4gaW5kZXggKi9cbiAgICBnZXRVcHNlcnRlZElkQXQoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0LnVwc2VydGVkW2luZGV4XTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgcmF3IGludGVybmFsIHJlc3VsdCAqL1xuICAgIGdldFJhd1Jlc3BvbnNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQ7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIGJ1bGsgb3BlcmF0aW9uIGNvbnRhaW5zIGEgd3JpdGUgZXJyb3IgKi9cbiAgICBoYXNXcml0ZUVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0LndyaXRlRXJyb3JzLmxlbmd0aCA+IDA7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygd3JpdGUgZXJyb3JzIG9mZiB0aGUgYnVsayBvcGVyYXRpb24gKi9cbiAgICBnZXRXcml0ZUVycm9yQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3VsdC53cml0ZUVycm9ycy5sZW5ndGg7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgc3BlY2lmaWMgd3JpdGUgZXJyb3Igb2JqZWN0ICovXG4gICAgZ2V0V3JpdGVFcnJvckF0KGluZGV4KSB7XG4gICAgICAgIHJldHVybiBpbmRleCA8IHRoaXMucmVzdWx0LndyaXRlRXJyb3JzLmxlbmd0aCA/IHRoaXMucmVzdWx0LndyaXRlRXJyb3JzW2luZGV4XSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqIFJldHJpZXZlIGFsbCB3cml0ZSBlcnJvcnMgKi9cbiAgICBnZXRXcml0ZUVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0LndyaXRlRXJyb3JzO1xuICAgIH1cbiAgICAvKiogUmV0cmlldmUgdGhlIHdyaXRlIGNvbmNlcm4gZXJyb3IgaWYgb25lIGV4aXN0cyAqL1xuICAgIGdldFdyaXRlQ29uY2VybkVycm9yKCkge1xuICAgICAgICBpZiAodGhpcy5yZXN1bHQud3JpdGVDb25jZXJuRXJyb3JzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMucmVzdWx0LndyaXRlQ29uY2VybkVycm9ycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc3VsdC53cml0ZUNvbmNlcm5FcnJvcnNbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBDb21iaW5lIHRoZSBlcnJvcnNcbiAgICAgICAgICAgIGxldCBlcnJtc2cgPSAnJztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yZXN1bHQud3JpdGVDb25jZXJuRXJyb3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyID0gdGhpcy5yZXN1bHQud3JpdGVDb25jZXJuRXJyb3JzW2ldO1xuICAgICAgICAgICAgICAgIGVycm1zZyA9IGVycm1zZyArIGVyci5lcnJtc2c7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogU29tZXRoaW5nIGJldHRlclxuICAgICAgICAgICAgICAgIGlmIChpID09PSAwKVxuICAgICAgICAgICAgICAgICAgICBlcnJtc2cgPSBlcnJtc2cgKyAnIGFuZCAnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBXcml0ZUNvbmNlcm5FcnJvcih7IGVycm1zZywgY29kZTogZXJyb3JfMS5NT05HT0RCX0VSUk9SX0NPREVTLldyaXRlQ29uY2VybkZhaWxlZCB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBCdWxrV3JpdGVSZXN1bHQoJHt0aGlzLnJlc3VsdH0pYDtcbiAgICB9XG4gICAgaXNPaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0Lm9rID09PSAxO1xuICAgIH1cbn1cbmV4cG9ydHMuQnVsa1dyaXRlUmVzdWx0ID0gQnVsa1dyaXRlUmVzdWx0O1xuLyoqXG4gKiBBbiBlcnJvciByZXByZXNlbnRpbmcgYSBmYWlsdXJlIGJ5IHRoZSBzZXJ2ZXIgdG8gYXBwbHkgdGhlIHJlcXVlc3RlZCB3cml0ZSBjb25jZXJuIHRvIHRoZSBidWxrIG9wZXJhdGlvbi5cbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBXcml0ZUNvbmNlcm5FcnJvciB7XG4gICAgY29uc3RydWN0b3IoZXJyb3IpIHtcbiAgICAgICAgdGhpc1trU2VydmVyRXJyb3JdID0gZXJyb3I7XG4gICAgfVxuICAgIC8qKiBXcml0ZSBjb25jZXJuIGVycm9yIGNvZGUuICovXG4gICAgZ2V0IGNvZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tTZXJ2ZXJFcnJvcl0uY29kZTtcbiAgICB9XG4gICAgLyoqIFdyaXRlIGNvbmNlcm4gZXJyb3IgbWVzc2FnZS4gKi9cbiAgICBnZXQgZXJybXNnKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trU2VydmVyRXJyb3JdLmVycm1zZztcbiAgICB9XG4gICAgLyoqIFdyaXRlIGNvbmNlcm4gZXJyb3IgaW5mby4gKi9cbiAgICBnZXQgZXJySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba1NlcnZlckVycm9yXS5lcnJJbmZvO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tTZXJ2ZXJFcnJvcl07XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYFdyaXRlQ29uY2VybkVycm9yKCR7dGhpcy5lcnJtc2d9KWA7XG4gICAgfVxufVxuZXhwb3J0cy5Xcml0ZUNvbmNlcm5FcnJvciA9IFdyaXRlQ29uY2VybkVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciB0aGF0IG9jY3VycmVkIGR1cmluZyBhIEJ1bGtXcml0ZSBvbiB0aGUgc2VydmVyLlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIFdyaXRlRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGVycikge1xuICAgICAgICB0aGlzLmVyciA9IGVycjtcbiAgICB9XG4gICAgLyoqIFdyaXRlRXJyb3IgY29kZS4gKi9cbiAgICBnZXQgY29kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyLmNvZGU7XG4gICAgfVxuICAgIC8qKiBXcml0ZUVycm9yIG9yaWdpbmFsIGJ1bGsgb3BlcmF0aW9uIGluZGV4LiAqL1xuICAgIGdldCBpbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyLmluZGV4O1xuICAgIH1cbiAgICAvKiogV3JpdGVFcnJvciBtZXNzYWdlLiAqL1xuICAgIGdldCBlcnJtc2coKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVyci5lcnJtc2c7XG4gICAgfVxuICAgIC8qKiBXcml0ZUVycm9yIGRldGFpbHMuICovXG4gICAgZ2V0IGVyckluZm8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVyci5lcnJJbmZvO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgdW5kZXJseWluZyBvcGVyYXRpb24gdGhhdCBjYXVzZWQgdGhlIGVycm9yICovXG4gICAgZ2V0T3BlcmF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lcnIub3A7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHsgY29kZTogdGhpcy5lcnIuY29kZSwgaW5kZXg6IHRoaXMuZXJyLmluZGV4LCBlcnJtc2c6IHRoaXMuZXJyLmVycm1zZywgb3A6IHRoaXMuZXJyLm9wIH07XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYFdyaXRlRXJyb3IoJHtKU09OLnN0cmluZ2lmeSh0aGlzLnRvSlNPTigpKX0pYDtcbiAgICB9XG59XG5leHBvcnRzLldyaXRlRXJyb3IgPSBXcml0ZUVycm9yO1xuLyoqIE1lcmdlcyByZXN1bHRzIGludG8gc2hhcmVkIGRhdGEgc3RydWN0dXJlICovXG5mdW5jdGlvbiBtZXJnZUJhdGNoUmVzdWx0cyhiYXRjaCwgYnVsa1Jlc3VsdCwgZXJyLCByZXN1bHQpIHtcbiAgICAvLyBJZiB3ZSBoYXZlIGFuIGVycm9yIHNldCB0aGUgcmVzdWx0IHRvIGJlIHRoZSBlcnIgb2JqZWN0XG4gICAgaWYgKGVycikge1xuICAgICAgICByZXN1bHQgPSBlcnI7XG4gICAgfVxuICAgIGVsc2UgaWYgKHJlc3VsdCAmJiByZXN1bHQucmVzdWx0KSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXN1bHQ7XG4gICAgfVxuICAgIGlmIChyZXN1bHQgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIERvIHdlIGhhdmUgYSB0b3AgbGV2ZWwgZXJyb3Igc3RvcCBwcm9jZXNzaW5nIGFuZCByZXR1cm5cbiAgICBpZiAocmVzdWx0Lm9rID09PSAwICYmIGJ1bGtSZXN1bHQub2sgPT09IDEpIHtcbiAgICAgICAgYnVsa1Jlc3VsdC5vayA9IDA7XG4gICAgICAgIGNvbnN0IHdyaXRlRXJyb3IgPSB7XG4gICAgICAgICAgICBpbmRleDogMCxcbiAgICAgICAgICAgIGNvZGU6IHJlc3VsdC5jb2RlIHx8IDAsXG4gICAgICAgICAgICBlcnJtc2c6IHJlc3VsdC5tZXNzYWdlLFxuICAgICAgICAgICAgZXJySW5mbzogcmVzdWx0LmVyckluZm8sXG4gICAgICAgICAgICBvcDogYmF0Y2gub3BlcmF0aW9uc1swXVxuICAgICAgICB9O1xuICAgICAgICBidWxrUmVzdWx0LndyaXRlRXJyb3JzLnB1c2gobmV3IFdyaXRlRXJyb3Iod3JpdGVFcnJvcikpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsc2UgaWYgKHJlc3VsdC5vayA9PT0gMCAmJiBidWxrUmVzdWx0Lm9rID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gSWYgd2UgaGF2ZSBhbiBpbnNlcnQgQmF0Y2ggdHlwZVxuICAgIGlmIChpc0luc2VydEJhdGNoKGJhdGNoKSAmJiByZXN1bHQubikge1xuICAgICAgICBidWxrUmVzdWx0Lm5JbnNlcnRlZCA9IGJ1bGtSZXN1bHQubkluc2VydGVkICsgcmVzdWx0Lm47XG4gICAgfVxuICAgIC8vIElmIHdlIGhhdmUgYW4gaW5zZXJ0IEJhdGNoIHR5cGVcbiAgICBpZiAoaXNEZWxldGVCYXRjaChiYXRjaCkgJiYgcmVzdWx0Lm4pIHtcbiAgICAgICAgYnVsa1Jlc3VsdC5uUmVtb3ZlZCA9IGJ1bGtSZXN1bHQublJlbW92ZWQgKyByZXN1bHQubjtcbiAgICB9XG4gICAgbGV0IG5VcHNlcnRlZCA9IDA7XG4gICAgLy8gV2UgaGF2ZSBhbiBhcnJheSBvZiB1cHNlcnRlZCB2YWx1ZXMsIHdlIG5lZWQgdG8gcmV3cml0ZSB0aGUgaW5kZXhlc1xuICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdC51cHNlcnRlZCkpIHtcbiAgICAgICAgblVwc2VydGVkID0gcmVzdWx0LnVwc2VydGVkLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQudXBzZXJ0ZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJ1bGtSZXN1bHQudXBzZXJ0ZWQucHVzaCh7XG4gICAgICAgICAgICAgICAgaW5kZXg6IHJlc3VsdC51cHNlcnRlZFtpXS5pbmRleCArIGJhdGNoLm9yaWdpbmFsWmVyb0luZGV4LFxuICAgICAgICAgICAgICAgIF9pZDogcmVzdWx0LnVwc2VydGVkW2ldLl9pZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocmVzdWx0LnVwc2VydGVkKSB7XG4gICAgICAgIG5VcHNlcnRlZCA9IDE7XG4gICAgICAgIGJ1bGtSZXN1bHQudXBzZXJ0ZWQucHVzaCh7XG4gICAgICAgICAgICBpbmRleDogYmF0Y2gub3JpZ2luYWxaZXJvSW5kZXgsXG4gICAgICAgICAgICBfaWQ6IHJlc3VsdC51cHNlcnRlZFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gSWYgd2UgaGF2ZSBhbiB1cGRhdGUgQmF0Y2ggdHlwZVxuICAgIGlmIChpc1VwZGF0ZUJhdGNoKGJhdGNoKSAmJiByZXN1bHQubikge1xuICAgICAgICBjb25zdCBuTW9kaWZpZWQgPSByZXN1bHQubk1vZGlmaWVkO1xuICAgICAgICBidWxrUmVzdWx0Lm5VcHNlcnRlZCA9IGJ1bGtSZXN1bHQublVwc2VydGVkICsgblVwc2VydGVkO1xuICAgICAgICBidWxrUmVzdWx0Lm5NYXRjaGVkID0gYnVsa1Jlc3VsdC5uTWF0Y2hlZCArIChyZXN1bHQubiAtIG5VcHNlcnRlZCk7XG4gICAgICAgIGlmICh0eXBlb2Ygbk1vZGlmaWVkID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgYnVsa1Jlc3VsdC5uTW9kaWZpZWQgPSBidWxrUmVzdWx0Lm5Nb2RpZmllZCArIG5Nb2RpZmllZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJ1bGtSZXN1bHQubk1vZGlmaWVkID0gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQud3JpdGVFcnJvcnMpKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0LndyaXRlRXJyb3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB3cml0ZUVycm9yID0ge1xuICAgICAgICAgICAgICAgIGluZGV4OiBiYXRjaC5vcmlnaW5hbEluZGV4ZXNbcmVzdWx0LndyaXRlRXJyb3JzW2ldLmluZGV4XSxcbiAgICAgICAgICAgICAgICBjb2RlOiByZXN1bHQud3JpdGVFcnJvcnNbaV0uY29kZSxcbiAgICAgICAgICAgICAgICBlcnJtc2c6IHJlc3VsdC53cml0ZUVycm9yc1tpXS5lcnJtc2csXG4gICAgICAgICAgICAgICAgZXJySW5mbzogcmVzdWx0LndyaXRlRXJyb3JzW2ldLmVyckluZm8sXG4gICAgICAgICAgICAgICAgb3A6IGJhdGNoLm9wZXJhdGlvbnNbcmVzdWx0LndyaXRlRXJyb3JzW2ldLmluZGV4XVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJ1bGtSZXN1bHQud3JpdGVFcnJvcnMucHVzaChuZXcgV3JpdGVFcnJvcih3cml0ZUVycm9yKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJlc3VsdC53cml0ZUNvbmNlcm5FcnJvcikge1xuICAgICAgICBidWxrUmVzdWx0LndyaXRlQ29uY2VybkVycm9ycy5wdXNoKG5ldyBXcml0ZUNvbmNlcm5FcnJvcihyZXN1bHQud3JpdGVDb25jZXJuRXJyb3IpKTtcbiAgICB9XG59XG5leHBvcnRzLm1lcmdlQmF0Y2hSZXN1bHRzID0gbWVyZ2VCYXRjaFJlc3VsdHM7XG5mdW5jdGlvbiBleGVjdXRlQ29tbWFuZHMoYnVsa09wZXJhdGlvbiwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBpZiAoYnVsa09wZXJhdGlvbi5zLmJhdGNoZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayh1bmRlZmluZWQsIG5ldyBCdWxrV3JpdGVSZXN1bHQoYnVsa09wZXJhdGlvbi5zLmJ1bGtSZXN1bHQpKTtcbiAgICB9XG4gICAgY29uc3QgYmF0Y2ggPSBidWxrT3BlcmF0aW9uLnMuYmF0Y2hlcy5zaGlmdCgpO1xuICAgIGZ1bmN0aW9uIHJlc3VsdEhhbmRsZXIoZXJyLCByZXN1bHQpIHtcbiAgICAgICAgLy8gRXJyb3IgaXMgYSBkcml2ZXIgcmVsYXRlZCBlcnJvciBub3QgYSBidWxrIG9wIGVycm9yLCByZXR1cm4gZWFybHlcbiAgICAgICAgaWYgKGVyciAmJiAnbWVzc2FnZScgaW4gZXJyICYmICEoZXJyIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb1dyaXRlQ29uY2VybkVycm9yKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBNb25nb0J1bGtXcml0ZUVycm9yKGVyciwgbmV3IEJ1bGtXcml0ZVJlc3VsdChidWxrT3BlcmF0aW9uLnMuYnVsa1Jlc3VsdCkpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb1dyaXRlQ29uY2VybkVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlTW9uZ29Xcml0ZUNvbmNlcm5FcnJvcihiYXRjaCwgYnVsa09wZXJhdGlvbi5zLmJ1bGtSZXN1bHQsIGVyciwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIC8vIE1lcmdlIHRoZSByZXN1bHRzIHRvZ2V0aGVyXG4gICAgICAgIG1lcmdlQmF0Y2hSZXN1bHRzKGJhdGNoLCBidWxrT3BlcmF0aW9uLnMuYnVsa1Jlc3VsdCwgZXJyLCByZXN1bHQpO1xuICAgICAgICBjb25zdCB3cml0ZVJlc3VsdCA9IG5ldyBCdWxrV3JpdGVSZXN1bHQoYnVsa09wZXJhdGlvbi5zLmJ1bGtSZXN1bHQpO1xuICAgICAgICBpZiAoYnVsa09wZXJhdGlvbi5oYW5kbGVXcml0ZUVycm9yKGNhbGxiYWNrLCB3cml0ZVJlc3VsdCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIG5leHQgY29tbWFuZCBpbiBsaW5lXG4gICAgICAgIGV4ZWN1dGVDb21tYW5kcyhidWxrT3BlcmF0aW9uLCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGNvbnN0IGZpbmFsT3B0aW9ucyA9ICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKShidWxrT3BlcmF0aW9uLCB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIG9yZGVyZWQ6IGJ1bGtPcGVyYXRpb24uaXNPcmRlcmVkXG4gICAgfSk7XG4gICAgaWYgKGZpbmFsT3B0aW9ucy5ieXBhc3NEb2N1bWVudFZhbGlkYXRpb24gIT09IHRydWUpIHtcbiAgICAgICAgZGVsZXRlIGZpbmFsT3B0aW9ucy5ieXBhc3NEb2N1bWVudFZhbGlkYXRpb247XG4gICAgfVxuICAgIC8vIFNldCBhbiBvcGVyYXRpb25JZiBpZiBwcm92aWRlZFxuICAgIGlmIChidWxrT3BlcmF0aW9uLm9wZXJhdGlvbklkKSB7XG4gICAgICAgIHJlc3VsdEhhbmRsZXIub3BlcmF0aW9uSWQgPSBidWxrT3BlcmF0aW9uLm9wZXJhdGlvbklkO1xuICAgIH1cbiAgICAvLyBJcyB0aGUgYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uIG9wdGlvbnMgc3BlY2lmaWNcbiAgICBpZiAoYnVsa09wZXJhdGlvbi5zLmJ5cGFzc0RvY3VtZW50VmFsaWRhdGlvbiA9PT0gdHJ1ZSkge1xuICAgICAgICBmaW5hbE9wdGlvbnMuYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uID0gdHJ1ZTtcbiAgICB9XG4gICAgLy8gSXMgdGhlIGNoZWNrS2V5cyBvcHRpb24gZGlzYWJsZWRcbiAgICBpZiAoYnVsa09wZXJhdGlvbi5zLmNoZWNrS2V5cyA9PT0gZmFsc2UpIHtcbiAgICAgICAgZmluYWxPcHRpb25zLmNoZWNrS2V5cyA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZmluYWxPcHRpb25zLnJldHJ5V3JpdGVzKSB7XG4gICAgICAgIGlmIChpc1VwZGF0ZUJhdGNoKGJhdGNoKSkge1xuICAgICAgICAgICAgZmluYWxPcHRpb25zLnJldHJ5V3JpdGVzID0gZmluYWxPcHRpb25zLnJldHJ5V3JpdGVzICYmICFiYXRjaC5vcGVyYXRpb25zLnNvbWUob3AgPT4gb3AubXVsdGkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0RlbGV0ZUJhdGNoKGJhdGNoKSkge1xuICAgICAgICAgICAgZmluYWxPcHRpb25zLnJldHJ5V3JpdGVzID1cbiAgICAgICAgICAgICAgICBmaW5hbE9wdGlvbnMucmV0cnlXcml0ZXMgJiYgIWJhdGNoLm9wZXJhdGlvbnMuc29tZShvcCA9PiBvcC5saW1pdCA9PT0gMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKGlzSW5zZXJ0QmF0Y2goYmF0Y2gpKSB7XG4gICAgICAgICAgICAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKShidWxrT3BlcmF0aW9uLnMuY29sbGVjdGlvbi5jbGllbnQsIG5ldyBpbnNlcnRfMS5JbnNlcnRPcGVyYXRpb24oYnVsa09wZXJhdGlvbi5zLm5hbWVzcGFjZSwgYmF0Y2gub3BlcmF0aW9ucywgZmluYWxPcHRpb25zKSwgcmVzdWx0SGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNVcGRhdGVCYXRjaChiYXRjaCkpIHtcbiAgICAgICAgICAgICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKGJ1bGtPcGVyYXRpb24ucy5jb2xsZWN0aW9uLmNsaWVudCwgbmV3IHVwZGF0ZV8xLlVwZGF0ZU9wZXJhdGlvbihidWxrT3BlcmF0aW9uLnMubmFtZXNwYWNlLCBiYXRjaC5vcGVyYXRpb25zLCBmaW5hbE9wdGlvbnMpLCByZXN1bHRIYW5kbGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0RlbGV0ZUJhdGNoKGJhdGNoKSkge1xuICAgICAgICAgICAgKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikoYnVsa09wZXJhdGlvbi5zLmNvbGxlY3Rpb24uY2xpZW50LCBuZXcgZGVsZXRlXzEuRGVsZXRlT3BlcmF0aW9uKGJ1bGtPcGVyYXRpb24ucy5uYW1lc3BhY2UsIGJhdGNoLm9wZXJhdGlvbnMsIGZpbmFsT3B0aW9ucyksIHJlc3VsdEhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gRm9yY2UgdG9wIGxldmVsIGVycm9yXG4gICAgICAgIGVyci5vayA9IDA7XG4gICAgICAgIC8vIE1lcmdlIHRvcCBsZXZlbCBlcnJvciBhbmQgcmV0dXJuXG4gICAgICAgIG1lcmdlQmF0Y2hSZXN1bHRzKGJhdGNoLCBidWxrT3BlcmF0aW9uLnMuYnVsa1Jlc3VsdCwgZXJyLCB1bmRlZmluZWQpO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhbmRsZU1vbmdvV3JpdGVDb25jZXJuRXJyb3IoYmF0Y2gsIGJ1bGtSZXN1bHQsIGVyciwgY2FsbGJhY2spIHtcbiAgICBtZXJnZUJhdGNoUmVzdWx0cyhiYXRjaCwgYnVsa1Jlc3VsdCwgdW5kZWZpbmVkLCBlcnIucmVzdWx0KTtcbiAgICBjYWxsYmFjayhuZXcgTW9uZ29CdWxrV3JpdGVFcnJvcih7XG4gICAgICAgIG1lc3NhZ2U6IGVyci5yZXN1bHQ/LndyaXRlQ29uY2VybkVycm9yLmVycm1zZyxcbiAgICAgICAgY29kZTogZXJyLnJlc3VsdD8ud3JpdGVDb25jZXJuRXJyb3IucmVzdWx0XG4gICAgfSwgbmV3IEJ1bGtXcml0ZVJlc3VsdChidWxrUmVzdWx0KSkpO1xufVxuLyoqXG4gKiBBbiBlcnJvciBpbmRpY2F0aW5nIGFuIHVuc3VjY2Vzc2Z1bCBCdWxrIFdyaXRlXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29CdWxrV3JpdGVFcnJvciBleHRlbmRzIGVycm9yXzEuTW9uZ29TZXJ2ZXJFcnJvciB7XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgTW9uZ29CdWxrV3JpdGVFcnJvciAqL1xuICAgIGNvbnN0cnVjdG9yKGVycm9yLCByZXN1bHQpIHtcbiAgICAgICAgc3VwZXIoZXJyb3IpO1xuICAgICAgICB0aGlzLndyaXRlRXJyb3JzID0gW107XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFdyaXRlQ29uY2VybkVycm9yKVxuICAgICAgICAgICAgdGhpcy5lcnIgPSBlcnJvcjtcbiAgICAgICAgZWxzZSBpZiAoIShlcnJvciBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgICAgIHRoaXMuY29kZSA9IGVycm9yLmNvZGU7XG4gICAgICAgICAgICB0aGlzLndyaXRlRXJyb3JzID0gZXJyb3Iud3JpdGVFcnJvcnMgPz8gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgZXJyb3IpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb0J1bGtXcml0ZUVycm9yJztcbiAgICB9XG4gICAgLyoqIE51bWJlciBvZiBkb2N1bWVudHMgaW5zZXJ0ZWQuICovXG4gICAgZ2V0IGluc2VydGVkQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3VsdC5pbnNlcnRlZENvdW50O1xuICAgIH1cbiAgICAvKiogTnVtYmVyIG9mIGRvY3VtZW50cyBtYXRjaGVkIGZvciB1cGRhdGUuICovXG4gICAgZ2V0IG1hdGNoZWRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0Lm1hdGNoZWRDb3VudDtcbiAgICB9XG4gICAgLyoqIE51bWJlciBvZiBkb2N1bWVudHMgbW9kaWZpZWQuICovXG4gICAgZ2V0IG1vZGlmaWVkQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3VsdC5tb2RpZmllZENvdW50O1xuICAgIH1cbiAgICAvKiogTnVtYmVyIG9mIGRvY3VtZW50cyBkZWxldGVkLiAqL1xuICAgIGdldCBkZWxldGVkQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3VsdC5kZWxldGVkQ291bnQ7XG4gICAgfVxuICAgIC8qKiBOdW1iZXIgb2YgZG9jdW1lbnRzIHVwc2VydGVkLiAqL1xuICAgIGdldCB1cHNlcnRlZENvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQudXBzZXJ0ZWRDb3VudDtcbiAgICB9XG4gICAgLyoqIEluc2VydGVkIGRvY3VtZW50IGdlbmVyYXRlZCBJZCdzLCBoYXNoIGtleSBpcyB0aGUgaW5kZXggb2YgdGhlIG9yaWdpbmF0aW5nIG9wZXJhdGlvbiAqL1xuICAgIGdldCBpbnNlcnRlZElkcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0Lmluc2VydGVkSWRzO1xuICAgIH1cbiAgICAvKiogVXBzZXJ0ZWQgZG9jdW1lbnQgZ2VuZXJhdGVkIElkJ3MsIGhhc2gga2V5IGlzIHRoZSBpbmRleCBvZiB0aGUgb3JpZ2luYXRpbmcgb3BlcmF0aW9uICovXG4gICAgZ2V0IHVwc2VydGVkSWRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQudXBzZXJ0ZWRJZHM7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0J1bGtXcml0ZUVycm9yID0gTW9uZ29CdWxrV3JpdGVFcnJvcjtcbi8qKlxuICogQSBidWlsZGVyIG9iamVjdCB0aGF0IGlzIHJldHVybmVkIGZyb20ge0BsaW5rIEJ1bGtPcGVyYXRpb25CYXNlI2ZpbmR9LlxuICogSXMgdXNlZCB0byBidWlsZCBhIHdyaXRlIG9wZXJhdGlvbiB0aGF0IGludm9sdmVzIGEgcXVlcnkgZmlsdGVyLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgRmluZE9wZXJhdG9ycyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBGaW5kT3BlcmF0b3JzIG9iamVjdC5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihidWxrT3BlcmF0aW9uKSB7XG4gICAgICAgIHRoaXMuYnVsa09wZXJhdGlvbiA9IGJ1bGtPcGVyYXRpb247XG4gICAgfVxuICAgIC8qKiBBZGQgYSBtdWx0aXBsZSB1cGRhdGUgb3BlcmF0aW9uIHRvIHRoZSBidWxrIG9wZXJhdGlvbiAqL1xuICAgIHVwZGF0ZSh1cGRhdGVEb2N1bWVudCkge1xuICAgICAgICBjb25zdCBjdXJyZW50T3AgPSBidWlsZEN1cnJlbnRPcCh0aGlzLmJ1bGtPcGVyYXRpb24pO1xuICAgICAgICByZXR1cm4gdGhpcy5idWxrT3BlcmF0aW9uLmFkZFRvT3BlcmF0aW9uc0xpc3QoZXhwb3J0cy5CYXRjaFR5cGUuVVBEQVRFLCAoMCwgdXBkYXRlXzEubWFrZVVwZGF0ZVN0YXRlbWVudCkoY3VycmVudE9wLnNlbGVjdG9yLCB1cGRhdGVEb2N1bWVudCwge1xuICAgICAgICAgICAgLi4uY3VycmVudE9wLFxuICAgICAgICAgICAgbXVsdGk6IHRydWVcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKiogQWRkIGEgc2luZ2xlIHVwZGF0ZSBvcGVyYXRpb24gdG8gdGhlIGJ1bGsgb3BlcmF0aW9uICovXG4gICAgdXBkYXRlT25lKHVwZGF0ZURvY3VtZW50KSB7XG4gICAgICAgIGlmICghKDAsIHV0aWxzXzEuaGFzQXRvbWljT3BlcmF0b3JzKSh1cGRhdGVEb2N1bWVudCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1VwZGF0ZSBkb2N1bWVudCByZXF1aXJlcyBhdG9taWMgb3BlcmF0b3JzJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudE9wID0gYnVpbGRDdXJyZW50T3AodGhpcy5idWxrT3BlcmF0aW9uKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVsa09wZXJhdGlvbi5hZGRUb09wZXJhdGlvbnNMaXN0KGV4cG9ydHMuQmF0Y2hUeXBlLlVQREFURSwgKDAsIHVwZGF0ZV8xLm1ha2VVcGRhdGVTdGF0ZW1lbnQpKGN1cnJlbnRPcC5zZWxlY3RvciwgdXBkYXRlRG9jdW1lbnQsIHsgLi4uY3VycmVudE9wLCBtdWx0aTogZmFsc2UgfSkpO1xuICAgIH1cbiAgICAvKiogQWRkIGEgcmVwbGFjZSBvbmUgb3BlcmF0aW9uIHRvIHRoZSBidWxrIG9wZXJhdGlvbiAqL1xuICAgIHJlcGxhY2VPbmUocmVwbGFjZW1lbnQpIHtcbiAgICAgICAgaWYgKCgwLCB1dGlsc18xLmhhc0F0b21pY09wZXJhdG9ycykocmVwbGFjZW1lbnQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdSZXBsYWNlbWVudCBkb2N1bWVudCBtdXN0IG5vdCB1c2UgYXRvbWljIG9wZXJhdG9ycycpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRPcCA9IGJ1aWxkQ3VycmVudE9wKHRoaXMuYnVsa09wZXJhdGlvbik7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1bGtPcGVyYXRpb24uYWRkVG9PcGVyYXRpb25zTGlzdChleHBvcnRzLkJhdGNoVHlwZS5VUERBVEUsICgwLCB1cGRhdGVfMS5tYWtlVXBkYXRlU3RhdGVtZW50KShjdXJyZW50T3Auc2VsZWN0b3IsIHJlcGxhY2VtZW50LCB7IC4uLmN1cnJlbnRPcCwgbXVsdGk6IGZhbHNlIH0pKTtcbiAgICB9XG4gICAgLyoqIEFkZCBhIGRlbGV0ZSBvbmUgb3BlcmF0aW9uIHRvIHRoZSBidWxrIG9wZXJhdGlvbiAqL1xuICAgIGRlbGV0ZU9uZSgpIHtcbiAgICAgICAgY29uc3QgY3VycmVudE9wID0gYnVpbGRDdXJyZW50T3AodGhpcy5idWxrT3BlcmF0aW9uKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVsa09wZXJhdGlvbi5hZGRUb09wZXJhdGlvbnNMaXN0KGV4cG9ydHMuQmF0Y2hUeXBlLkRFTEVURSwgKDAsIGRlbGV0ZV8xLm1ha2VEZWxldGVTdGF0ZW1lbnQpKGN1cnJlbnRPcC5zZWxlY3RvciwgeyAuLi5jdXJyZW50T3AsIGxpbWl0OiAxIH0pKTtcbiAgICB9XG4gICAgLyoqIEFkZCBhIGRlbGV0ZSBtYW55IG9wZXJhdGlvbiB0byB0aGUgYnVsayBvcGVyYXRpb24gKi9cbiAgICBkZWxldGUoKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRPcCA9IGJ1aWxkQ3VycmVudE9wKHRoaXMuYnVsa09wZXJhdGlvbik7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1bGtPcGVyYXRpb24uYWRkVG9PcGVyYXRpb25zTGlzdChleHBvcnRzLkJhdGNoVHlwZS5ERUxFVEUsICgwLCBkZWxldGVfMS5tYWtlRGVsZXRlU3RhdGVtZW50KShjdXJyZW50T3Auc2VsZWN0b3IsIHsgLi4uY3VycmVudE9wLCBsaW1pdDogMCB9KSk7XG4gICAgfVxuICAgIC8qKiBVcHNlcnQgbW9kaWZpZXIgZm9yIHVwZGF0ZSBidWxrIG9wZXJhdGlvbiwgbm90aW5nIHRoYXQgdGhpcyBvcGVyYXRpb24gaXMgYW4gdXBzZXJ0LiAqL1xuICAgIHVwc2VydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJ1bGtPcGVyYXRpb24ucy5jdXJyZW50T3ApIHtcbiAgICAgICAgICAgIHRoaXMuYnVsa09wZXJhdGlvbi5zLmN1cnJlbnRPcCA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnVsa09wZXJhdGlvbi5zLmN1cnJlbnRPcC51cHNlcnQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIFNwZWNpZmllcyB0aGUgY29sbGF0aW9uIGZvciB0aGUgcXVlcnkgY29uZGl0aW9uLiAqL1xuICAgIGNvbGxhdGlvbihjb2xsYXRpb24pIHtcbiAgICAgICAgaWYgKCF0aGlzLmJ1bGtPcGVyYXRpb24ucy5jdXJyZW50T3ApIHtcbiAgICAgICAgICAgIHRoaXMuYnVsa09wZXJhdGlvbi5zLmN1cnJlbnRPcCA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnVsa09wZXJhdGlvbi5zLmN1cnJlbnRPcC5jb2xsYXRpb24gPSBjb2xsYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogU3BlY2lmaWVzIGFycmF5RmlsdGVycyBmb3IgVXBkYXRlT25lIG9yIFVwZGF0ZU1hbnkgYnVsayBvcGVyYXRpb25zLiAqL1xuICAgIGFycmF5RmlsdGVycyhhcnJheUZpbHRlcnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJ1bGtPcGVyYXRpb24ucy5jdXJyZW50T3ApIHtcbiAgICAgICAgICAgIHRoaXMuYnVsa09wZXJhdGlvbi5zLmN1cnJlbnRPcCA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnVsa09wZXJhdGlvbi5zLmN1cnJlbnRPcC5hcnJheUZpbHRlcnMgPSBhcnJheUZpbHRlcnM7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogU3BlY2lmaWVzIGhpbnQgZm9yIHRoZSBidWxrIG9wZXJhdGlvbi4gKi9cbiAgICBoaW50KGhpbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJ1bGtPcGVyYXRpb24ucy5jdXJyZW50T3ApIHtcbiAgICAgICAgICAgIHRoaXMuYnVsa09wZXJhdGlvbi5zLmN1cnJlbnRPcCA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnVsa09wZXJhdGlvbi5zLmN1cnJlbnRPcC5oaW50ID0gaGludDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuZXhwb3J0cy5GaW5kT3BlcmF0b3JzID0gRmluZE9wZXJhdG9ycztcbi8qKlxuICogVE9ETyhOT0RFLTQwNjMpXG4gKiBCdWxrV3JpdGVzIG1lcmdlIGNvbXBsZXhpdHkgaXMgaW1wbGVtZW50ZWQgaW4gZXhlY3V0ZUNvbW1hbmRzXG4gKiBUaGlzIHByb3ZpZGVzIGEgdmVoaWNsZSB0byB0cmVhdCBidWxrT3BlcmF0aW9ucyBsaWtlIGFueSBvdGhlciBvcGVyYXRpb24gKGhlbmNlIFwic2hpbVwiKVxuICogV2Ugd291bGQgbGlrZSB0aGlzIGxvZ2ljIHRvIHNpbXBseSBsaXZlIGluc2lkZSB0aGUgQnVsa1dyaXRlT3BlcmF0aW9uIGNsYXNzXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgQnVsa1dyaXRlU2hpbU9wZXJhdGlvbiBleHRlbmRzIG9wZXJhdGlvbl8xLkFic3RyYWN0Q2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGJ1bGtPcGVyYXRpb24sIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuYnVsa09wZXJhdGlvbiA9IGJ1bGtPcGVyYXRpb247XG4gICAgfVxuICAgIGV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2Vzc2lvbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBBbiBpbXBsaWNpdCBzZXNzaW9uIGNvdWxkIGhhdmUgYmVlbiBjcmVhdGVkIGJ5ICdleGVjdXRlT3BlcmF0aW9uJ1xuICAgICAgICAgICAgLy8gU28gaWYgd2Ugc3RpY2sgaXQgb24gZmluYWxPcHRpb25zIGhlcmUsIGVhY2ggYnVsayBvcGVyYXRpb25cbiAgICAgICAgICAgIC8vIHdpbGwgdXNlIHRoaXMgc2FtZSBzZXNzaW9uLCBpdCdsbCBiZSBwYXNzZWQgaW4gdGhlIHNhbWUgd2F5XG4gICAgICAgICAgICAvLyBhbiBleHBsaWNpdCBzZXNzaW9uIHdvdWxkIGJlXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuc2Vzc2lvbiA9IHNlc3Npb247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4ZWN1dGVDb21tYW5kcyh0aGlzLmJ1bGtPcGVyYXRpb24sIHRoaXMub3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbn1cbi8qKiBAcHVibGljICovXG5jbGFzcyBCdWxrT3BlcmF0aW9uQmFzZSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IE9yZGVyZWRCdWxrT3BlcmF0aW9uIG9yIFVub3JkZXJlZEJ1bGtPcGVyYXRpb24gaW5zdGFuY2VcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBvcHRpb25zLCBpc09yZGVyZWQpIHtcbiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgYnVsa09wZXJhdGlvbiBpcyBvcmRlcmVkIG9yIHVub3JkZXJlZFxuICAgICAgICB0aGlzLmlzT3JkZXJlZCA9IGlzT3JkZXJlZDtcbiAgICAgICAgY29uc3QgdG9wb2xvZ3kgPSAoMCwgdXRpbHNfMS5nZXRUb3BvbG9neSkoY29sbGVjdGlvbik7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zID09IG51bGwgPyB7fSA6IG9wdGlvbnM7XG4gICAgICAgIC8vIFRPRE8gQnJpbmcgZnJvbSBkcml2ZXIgaW5mb3JtYXRpb24gaW4gaGVsbG9cbiAgICAgICAgLy8gR2V0IHRoZSBuYW1lc3BhY2UgZm9yIHRoZSB3cml0ZSBvcGVyYXRpb25zXG4gICAgICAgIGNvbnN0IG5hbWVzcGFjZSA9IGNvbGxlY3Rpb24ucy5uYW1lc3BhY2U7XG4gICAgICAgIC8vIFVzZWQgdG8gbWFyayBvcGVyYXRpb24gYXMgZXhlY3V0ZWRcbiAgICAgICAgY29uc3QgZXhlY3V0ZWQgPSBmYWxzZTtcbiAgICAgICAgLy8gQ3VycmVudCBpdGVtXG4gICAgICAgIGNvbnN0IGN1cnJlbnRPcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gU2V0IG1heCBieXRlIHNpemVcbiAgICAgICAgY29uc3QgaGVsbG8gPSB0b3BvbG9neS5sYXN0SGVsbG8oKTtcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBhdXRvRW5jcnlwdGlvbiBvbiwgYmF0Y2gtc3BsaXR0aW5nIG11c3QgYmUgZG9uZSBvbiAybWIgY2h1bmtzLCBidXQgc2luZ2xlIGRvY3VtZW50c1xuICAgICAgICAvLyBvdmVyIDJtYiBhcmUgc3RpbGwgYWxsb3dlZFxuICAgICAgICBjb25zdCB1c2luZ0F1dG9FbmNyeXB0aW9uID0gISEodG9wb2xvZ3kucy5vcHRpb25zICYmIHRvcG9sb2d5LnMub3B0aW9ucy5hdXRvRW5jcnlwdGVyKTtcbiAgICAgICAgY29uc3QgbWF4QnNvbk9iamVjdFNpemUgPSBoZWxsbyAmJiBoZWxsby5tYXhCc29uT2JqZWN0U2l6ZSA/IGhlbGxvLm1heEJzb25PYmplY3RTaXplIDogMTAyNCAqIDEwMjQgKiAxNjtcbiAgICAgICAgY29uc3QgbWF4QmF0Y2hTaXplQnl0ZXMgPSB1c2luZ0F1dG9FbmNyeXB0aW9uID8gMTAyNCAqIDEwMjQgKiAyIDogbWF4QnNvbk9iamVjdFNpemU7XG4gICAgICAgIGNvbnN0IG1heFdyaXRlQmF0Y2hTaXplID0gaGVsbG8gJiYgaGVsbG8ubWF4V3JpdGVCYXRjaFNpemUgPyBoZWxsby5tYXhXcml0ZUJhdGNoU2l6ZSA6IDEwMDA7XG4gICAgICAgIC8vIENhbGN1bGF0ZXMgdGhlIGxhcmdlc3QgcG9zc2libGUgc2l6ZSBvZiBhbiBBcnJheSBrZXksIHJlcHJlc2VudGVkIGFzIGEgQlNPTiBzdHJpbmdcbiAgICAgICAgLy8gZWxlbWVudC4gVGhpcyBjYWxjdWxhdGlvbjpcbiAgICAgICAgLy8gICAgIDEgYnl0ZSBmb3IgQlNPTiB0eXBlXG4gICAgICAgIC8vICAgICAjIG9mIGJ5dGVzID0gbGVuZ3RoIG9mIChzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgKG1heFdyaXRlQmF0Y2hTaXplIC0gMSkpXG4gICAgICAgIC8vICAgKyAxIGJ5dGVzIGZvciBudWxsIHRlcm1pbmF0b3JcbiAgICAgICAgY29uc3QgbWF4S2V5U2l6ZSA9IChtYXhXcml0ZUJhdGNoU2l6ZSAtIDEpLnRvU3RyaW5nKDEwKS5sZW5ndGggKyAyO1xuICAgICAgICAvLyBGaW5hbCBvcHRpb25zIGZvciByZXRyeWFibGUgd3JpdGVzXG4gICAgICAgIGxldCBmaW5hbE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgZmluYWxPcHRpb25zID0gKDAsIHV0aWxzXzEuYXBwbHlSZXRyeWFibGVXcml0ZXMpKGZpbmFsT3B0aW9ucywgY29sbGVjdGlvbi5zLmRiKTtcbiAgICAgICAgLy8gRmluYWwgcmVzdWx0c1xuICAgICAgICBjb25zdCBidWxrUmVzdWx0ID0ge1xuICAgICAgICAgICAgb2s6IDEsXG4gICAgICAgICAgICB3cml0ZUVycm9yczogW10sXG4gICAgICAgICAgICB3cml0ZUNvbmNlcm5FcnJvcnM6IFtdLFxuICAgICAgICAgICAgaW5zZXJ0ZWRJZHM6IFtdLFxuICAgICAgICAgICAgbkluc2VydGVkOiAwLFxuICAgICAgICAgICAgblVwc2VydGVkOiAwLFxuICAgICAgICAgICAgbk1hdGNoZWQ6IDAsXG4gICAgICAgICAgICBuTW9kaWZpZWQ6IDAsXG4gICAgICAgICAgICBuUmVtb3ZlZDogMCxcbiAgICAgICAgICAgIHVwc2VydGVkOiBbXVxuICAgICAgICB9O1xuICAgICAgICAvLyBJbnRlcm5hbCBzdGF0ZVxuICAgICAgICB0aGlzLnMgPSB7XG4gICAgICAgICAgICAvLyBGaW5hbCByZXN1bHRcbiAgICAgICAgICAgIGJ1bGtSZXN1bHQsXG4gICAgICAgICAgICAvLyBDdXJyZW50IGJhdGNoIHN0YXRlXG4gICAgICAgICAgICBjdXJyZW50QmF0Y2g6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGN1cnJlbnRJbmRleDogMCxcbiAgICAgICAgICAgIC8vIG9yZGVyZWQgc3BlY2lmaWNcbiAgICAgICAgICAgIGN1cnJlbnRCYXRjaFNpemU6IDAsXG4gICAgICAgICAgICBjdXJyZW50QmF0Y2hTaXplQnl0ZXM6IDAsXG4gICAgICAgICAgICAvLyB1bm9yZGVyZWQgc3BlY2lmaWNcbiAgICAgICAgICAgIGN1cnJlbnRJbnNlcnRCYXRjaDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY3VycmVudFVwZGF0ZUJhdGNoOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjdXJyZW50UmVtb3ZlQmF0Y2g6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGJhdGNoZXM6IFtdLFxuICAgICAgICAgICAgLy8gV3JpdGUgY29uY2VyblxuICAgICAgICAgICAgd3JpdGVDb25jZXJuOiB3cml0ZV9jb25jZXJuXzEuV3JpdGVDb25jZXJuLmZyb21PcHRpb25zKG9wdGlvbnMpLFxuICAgICAgICAgICAgLy8gTWF4IGJhdGNoIHNpemUgb3B0aW9uc1xuICAgICAgICAgICAgbWF4QnNvbk9iamVjdFNpemUsXG4gICAgICAgICAgICBtYXhCYXRjaFNpemVCeXRlcyxcbiAgICAgICAgICAgIG1heFdyaXRlQmF0Y2hTaXplLFxuICAgICAgICAgICAgbWF4S2V5U2l6ZSxcbiAgICAgICAgICAgIC8vIE5hbWVzcGFjZVxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgLy8gVG9wb2xvZ3lcbiAgICAgICAgICAgIHRvcG9sb2d5LFxuICAgICAgICAgICAgLy8gT3B0aW9uc1xuICAgICAgICAgICAgb3B0aW9uczogZmluYWxPcHRpb25zLFxuICAgICAgICAgICAgLy8gQlNPTiBvcHRpb25zXG4gICAgICAgICAgICBic29uT3B0aW9uczogKDAsIGJzb25fMS5yZXNvbHZlQlNPTk9wdGlvbnMpKG9wdGlvbnMpLFxuICAgICAgICAgICAgLy8gQ3VycmVudCBvcGVyYXRpb25cbiAgICAgICAgICAgIGN1cnJlbnRPcCxcbiAgICAgICAgICAgIC8vIEV4ZWN1dGVkXG4gICAgICAgICAgICBleGVjdXRlZCxcbiAgICAgICAgICAgIC8vIENvbGxlY3Rpb25cbiAgICAgICAgICAgIGNvbGxlY3Rpb24sXG4gICAgICAgICAgICAvLyBGdW5kYW1lbnRhbCBlcnJvclxuICAgICAgICAgICAgZXJyOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAvLyBjaGVjayBrZXlzXG4gICAgICAgICAgICBjaGVja0tleXM6IHR5cGVvZiBvcHRpb25zLmNoZWNrS2V5cyA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5jaGVja0tleXMgOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICAvLyBieXBhc3MgVmFsaWRhdGlvblxuICAgICAgICBpZiAob3B0aW9ucy5ieXBhc3NEb2N1bWVudFZhbGlkYXRpb24gPT09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMucy5ieXBhc3NEb2N1bWVudFZhbGlkYXRpb24gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIHNpbmdsZSBpbnNlcnQgZG9jdW1lbnQgdG8gdGhlIGJ1bGsgb3BlcmF0aW9uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzXG4gICAgICogY29uc3QgYnVsa09wID0gY29sbGVjdGlvbi5pbml0aWFsaXplT3JkZXJlZEJ1bGtPcCgpO1xuICAgICAqXG4gICAgICogLy8gQWRkcyB0aHJlZSBpbnNlcnRzIHRvIHRoZSBidWxrT3AuXG4gICAgICogYnVsa09wXG4gICAgICogICAuaW5zZXJ0KHsgYTogMSB9KVxuICAgICAqICAgLmluc2VydCh7IGI6IDIgfSlcbiAgICAgKiAgIC5pbnNlcnQoeyBjOiAzIH0pO1xuICAgICAqIGF3YWl0IGJ1bGtPcC5leGVjdXRlKCk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgaW5zZXJ0KGRvY3VtZW50KSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5faWQgPT0gbnVsbCAmJiAhc2hvdWxkRm9yY2VTZXJ2ZXJPYmplY3RJZCh0aGlzKSkge1xuICAgICAgICAgICAgZG9jdW1lbnQuX2lkID0gbmV3IGJzb25fMS5PYmplY3RJZCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmFkZFRvT3BlcmF0aW9uc0xpc3QoZXhwb3J0cy5CYXRjaFR5cGUuSU5TRVJULCBkb2N1bWVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyBhIGZpbmQgb3BlcmF0aW9uIGZvciBhbiB1cGRhdGUvdXBkYXRlT25lL2RlbGV0ZS9kZWxldGVPbmUvcmVwbGFjZU9uZS5cbiAgICAgKiBSZXR1cm5zIGEgYnVpbGRlciBvYmplY3QgdXNlZCB0byBjb21wbGV0ZSB0aGUgZGVmaW5pdGlvbiBvZiB0aGUgb3BlcmF0aW9uLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0c1xuICAgICAqIGNvbnN0IGJ1bGtPcCA9IGNvbGxlY3Rpb24uaW5pdGlhbGl6ZU9yZGVyZWRCdWxrT3AoKTtcbiAgICAgKlxuICAgICAqIC8vIEFkZCBhbiB1cGRhdGVPbmUgdG8gdGhlIGJ1bGtPcFxuICAgICAqIGJ1bGtPcC5maW5kKHsgYTogMSB9KS51cGRhdGVPbmUoeyAkc2V0OiB7IGI6IDIgfSB9KTtcbiAgICAgKlxuICAgICAqIC8vIEFkZCBhbiB1cGRhdGVNYW55IHRvIHRoZSBidWxrT3BcbiAgICAgKiBidWxrT3AuZmluZCh7IGM6IDMgfSkudXBkYXRlKHsgJHNldDogeyBkOiA0IH0gfSk7XG4gICAgICpcbiAgICAgKiAvLyBBZGQgYW4gdXBzZXJ0XG4gICAgICogYnVsa09wLmZpbmQoeyBlOiA1IH0pLnVwc2VydCgpLnVwZGF0ZU9uZSh7ICRzZXQ6IHsgZjogNiB9IH0pO1xuICAgICAqXG4gICAgICogLy8gQWRkIGEgZGVsZXRpb25cbiAgICAgKiBidWxrT3AuZmluZCh7IGc6IDcgfSkuZGVsZXRlT25lKCk7XG4gICAgICpcbiAgICAgKiAvLyBBZGQgYSBtdWx0aSBkZWxldGlvblxuICAgICAqIGJ1bGtPcC5maW5kKHsgaDogOCB9KS5kZWxldGUoKTtcbiAgICAgKlxuICAgICAqIC8vIEFkZCBhIHJlcGxhY2VPbmVcbiAgICAgKiBidWxrT3AuZmluZCh7IGk6IDkgfSkucmVwbGFjZU9uZSh7d3JpdGVDb25jZXJuOiB7IGo6IDEwIH19KTtcbiAgICAgKlxuICAgICAqIC8vIFVwZGF0ZSB1c2luZyBhIHBpcGVsaW5lIChyZXF1aXJlcyBNb25nb2RiIDQuMiBvciBoaWdoZXIpXG4gICAgICogYnVsay5maW5kKHsgazogMTEsIHk6IHsgJGV4aXN0czogdHJ1ZSB9LCB6OiB7ICRleGlzdHM6IHRydWUgfSB9KS51cGRhdGVPbmUoW1xuICAgICAqICAgeyAkc2V0OiB7IHRvdGFsOiB7ICRzdW06IFsgJyR5JywgJyR6JyBdIH0gfSB9XG4gICAgICogXSk7XG4gICAgICpcbiAgICAgKiAvLyBBbGwgb2YgdGhlIG9wcyB3aWxsIG5vdyBiZSBleGVjdXRlZFxuICAgICAqIGF3YWl0IGJ1bGtPcC5leGVjdXRlKCk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZmluZChzZWxlY3Rvcikge1xuICAgICAgICBpZiAoIXNlbGVjdG9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdCdWxrIGZpbmQgb3BlcmF0aW9uIG11c3Qgc3BlY2lmeSBhIHNlbGVjdG9yJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2F2ZSBhIGN1cnJlbnQgc2VsZWN0b3JcbiAgICAgICAgdGhpcy5zLmN1cnJlbnRPcCA9IHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiBzZWxlY3RvclxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3IEZpbmRPcGVyYXRvcnModGhpcyk7XG4gICAgfVxuICAgIC8qKiBTcGVjaWZpZXMgYSByYXcgb3BlcmF0aW9uIHRvIHBlcmZvcm0gaW4gdGhlIGJ1bGsgd3JpdGUuICovXG4gICAgcmF3KG9wKSB7XG4gICAgICAgIGlmIChvcCA9PSBudWxsIHx8IHR5cGVvZiBvcCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ09wZXJhdGlvbiBtdXN0IGJlIGFuIG9iamVjdCB3aXRoIGFuIG9wZXJhdGlvbiBrZXknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJ2luc2VydE9uZScgaW4gb3ApIHtcbiAgICAgICAgICAgIGNvbnN0IGZvcmNlU2VydmVyT2JqZWN0SWQgPSBzaG91bGRGb3JjZVNlcnZlck9iamVjdElkKHRoaXMpO1xuICAgICAgICAgICAgaWYgKG9wLmluc2VydE9uZSAmJiBvcC5pbnNlcnRPbmUuZG9jdW1lbnQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIE5PVEU6IHByb3ZpZGVkIGZvciBsZWdhY3kgc3VwcG9ydCwgYnV0IHRoaXMgaXMgYSBtYWxmb3JtZWQgb3BlcmF0aW9uXG4gICAgICAgICAgICAgICAgaWYgKGZvcmNlU2VydmVyT2JqZWN0SWQgIT09IHRydWUgJiYgb3AuaW5zZXJ0T25lLl9pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wLmluc2VydE9uZS5faWQgPSBuZXcgYnNvbl8xLk9iamVjdElkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZFRvT3BlcmF0aW9uc0xpc3QoZXhwb3J0cy5CYXRjaFR5cGUuSU5TRVJULCBvcC5pbnNlcnRPbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZvcmNlU2VydmVyT2JqZWN0SWQgIT09IHRydWUgJiYgb3AuaW5zZXJ0T25lLmRvY3VtZW50Ll9pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgb3AuaW5zZXJ0T25lLmRvY3VtZW50Ll9pZCA9IG5ldyBic29uXzEuT2JqZWN0SWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZFRvT3BlcmF0aW9uc0xpc3QoZXhwb3J0cy5CYXRjaFR5cGUuSU5TRVJULCBvcC5pbnNlcnRPbmUuZG9jdW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgncmVwbGFjZU9uZScgaW4gb3AgfHwgJ3VwZGF0ZU9uZScgaW4gb3AgfHwgJ3VwZGF0ZU1hbnknIGluIG9wKSB7XG4gICAgICAgICAgICBpZiAoJ3JlcGxhY2VPbmUnIGluIG9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKCdxJyBpbiBvcC5yZXBsYWNlT25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1JhdyBvcGVyYXRpb25zIGFyZSBub3QgYWxsb3dlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVTdGF0ZW1lbnQgPSAoMCwgdXBkYXRlXzEubWFrZVVwZGF0ZVN0YXRlbWVudCkob3AucmVwbGFjZU9uZS5maWx0ZXIsIG9wLnJlcGxhY2VPbmUucmVwbGFjZW1lbnQsIHsgLi4ub3AucmVwbGFjZU9uZSwgbXVsdGk6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgIGlmICgoMCwgdXRpbHNfMS5oYXNBdG9taWNPcGVyYXRvcnMpKHVwZGF0ZVN0YXRlbWVudC51KSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdSZXBsYWNlbWVudCBkb2N1bWVudCBtdXN0IG5vdCB1c2UgYXRvbWljIG9wZXJhdG9ycycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRUb09wZXJhdGlvbnNMaXN0KGV4cG9ydHMuQmF0Y2hUeXBlLlVQREFURSwgdXBkYXRlU3RhdGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgndXBkYXRlT25lJyBpbiBvcCkge1xuICAgICAgICAgICAgICAgIGlmICgncScgaW4gb3AudXBkYXRlT25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1JhdyBvcGVyYXRpb25zIGFyZSBub3QgYWxsb3dlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVTdGF0ZW1lbnQgPSAoMCwgdXBkYXRlXzEubWFrZVVwZGF0ZVN0YXRlbWVudCkob3AudXBkYXRlT25lLmZpbHRlciwgb3AudXBkYXRlT25lLnVwZGF0ZSwge1xuICAgICAgICAgICAgICAgICAgICAuLi5vcC51cGRhdGVPbmUsXG4gICAgICAgICAgICAgICAgICAgIG11bHRpOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghKDAsIHV0aWxzXzEuaGFzQXRvbWljT3BlcmF0b3JzKSh1cGRhdGVTdGF0ZW1lbnQudSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignVXBkYXRlIGRvY3VtZW50IHJlcXVpcmVzIGF0b21pYyBvcGVyYXRvcnMnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkVG9PcGVyYXRpb25zTGlzdChleHBvcnRzLkJhdGNoVHlwZS5VUERBVEUsIHVwZGF0ZVN0YXRlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJ3VwZGF0ZU1hbnknIGluIG9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKCdxJyBpbiBvcC51cGRhdGVNYW55KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1JhdyBvcGVyYXRpb25zIGFyZSBub3QgYWxsb3dlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVTdGF0ZW1lbnQgPSAoMCwgdXBkYXRlXzEubWFrZVVwZGF0ZVN0YXRlbWVudCkob3AudXBkYXRlTWFueS5maWx0ZXIsIG9wLnVwZGF0ZU1hbnkudXBkYXRlLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLm9wLnVwZGF0ZU1hbnksXG4gICAgICAgICAgICAgICAgICAgIG11bHRpOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCEoMCwgdXRpbHNfMS5oYXNBdG9taWNPcGVyYXRvcnMpKHVwZGF0ZVN0YXRlbWVudC51KSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdVcGRhdGUgZG9jdW1lbnQgcmVxdWlyZXMgYXRvbWljIG9wZXJhdG9ycycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRUb09wZXJhdGlvbnNMaXN0KGV4cG9ydHMuQmF0Y2hUeXBlLlVQREFURSwgdXBkYXRlU3RhdGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoJ2RlbGV0ZU9uZScgaW4gb3ApIHtcbiAgICAgICAgICAgIGlmICgncScgaW4gb3AuZGVsZXRlT25lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignUmF3IG9wZXJhdGlvbnMgYXJlIG5vdCBhbGxvd2VkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRUb09wZXJhdGlvbnNMaXN0KGV4cG9ydHMuQmF0Y2hUeXBlLkRFTEVURSwgKDAsIGRlbGV0ZV8xLm1ha2VEZWxldGVTdGF0ZW1lbnQpKG9wLmRlbGV0ZU9uZS5maWx0ZXIsIHsgLi4ub3AuZGVsZXRlT25lLCBsaW1pdDogMSB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdkZWxldGVNYW55JyBpbiBvcCkge1xuICAgICAgICAgICAgaWYgKCdxJyBpbiBvcC5kZWxldGVNYW55KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignUmF3IG9wZXJhdGlvbnMgYXJlIG5vdCBhbGxvd2VkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRUb09wZXJhdGlvbnNMaXN0KGV4cG9ydHMuQmF0Y2hUeXBlLkRFTEVURSwgKDAsIGRlbGV0ZV8xLm1ha2VEZWxldGVTdGF0ZW1lbnQpKG9wLmRlbGV0ZU1hbnkuZmlsdGVyLCB7IC4uLm9wLmRlbGV0ZU1hbnksIGxpbWl0OiAwIH0pKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBvdGhlcndpc2UgYW4gdW5rbm93biBvcGVyYXRpb24gd2FzIHByb3ZpZGVkXG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ2J1bGtXcml0ZSBvbmx5IHN1cHBvcnRzIGluc2VydE9uZSwgdXBkYXRlT25lLCB1cGRhdGVNYW55LCBkZWxldGVPbmUsIGRlbGV0ZU1hbnknKTtcbiAgICB9XG4gICAgZ2V0IGJzb25PcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLmJzb25PcHRpb25zO1xuICAgIH1cbiAgICBnZXQgd3JpdGVDb25jZXJuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLndyaXRlQ29uY2VybjtcbiAgICB9XG4gICAgZ2V0IGJhdGNoZXMoKSB7XG4gICAgICAgIGNvbnN0IGJhdGNoZXMgPSBbLi4udGhpcy5zLmJhdGNoZXNdO1xuICAgICAgICBpZiAodGhpcy5pc09yZGVyZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnMuY3VycmVudEJhdGNoKVxuICAgICAgICAgICAgICAgIGJhdGNoZXMucHVzaCh0aGlzLnMuY3VycmVudEJhdGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnMuY3VycmVudEluc2VydEJhdGNoKVxuICAgICAgICAgICAgICAgIGJhdGNoZXMucHVzaCh0aGlzLnMuY3VycmVudEluc2VydEJhdGNoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnMuY3VycmVudFVwZGF0ZUJhdGNoKVxuICAgICAgICAgICAgICAgIGJhdGNoZXMucHVzaCh0aGlzLnMuY3VycmVudFVwZGF0ZUJhdGNoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnMuY3VycmVudFJlbW92ZUJhdGNoKVxuICAgICAgICAgICAgICAgIGJhdGNoZXMucHVzaCh0aGlzLnMuY3VycmVudFJlbW92ZUJhdGNoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmF0Y2hlcztcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMucy5leGVjdXRlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29CYXRjaFJlRXhlY3V0aW9uRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cml0ZUNvbmNlcm4gPSB3cml0ZV9jb25jZXJuXzEuV3JpdGVDb25jZXJuLmZyb21PcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBpZiAod3JpdGVDb25jZXJuKSB7XG4gICAgICAgICAgICB0aGlzLnMud3JpdGVDb25jZXJuID0gd3JpdGVDb25jZXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHdlIGhhdmUgY3VycmVudCBiYXRjaFxuICAgICAgICBpZiAodGhpcy5pc09yZGVyZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnMuY3VycmVudEJhdGNoKVxuICAgICAgICAgICAgICAgIHRoaXMucy5iYXRjaGVzLnB1c2godGhpcy5zLmN1cnJlbnRCYXRjaCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zLmN1cnJlbnRJbnNlcnRCYXRjaClcbiAgICAgICAgICAgICAgICB0aGlzLnMuYmF0Y2hlcy5wdXNoKHRoaXMucy5jdXJyZW50SW5zZXJ0QmF0Y2gpO1xuICAgICAgICAgICAgaWYgKHRoaXMucy5jdXJyZW50VXBkYXRlQmF0Y2gpXG4gICAgICAgICAgICAgICAgdGhpcy5zLmJhdGNoZXMucHVzaCh0aGlzLnMuY3VycmVudFVwZGF0ZUJhdGNoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnMuY3VycmVudFJlbW92ZUJhdGNoKVxuICAgICAgICAgICAgICAgIHRoaXMucy5iYXRjaGVzLnB1c2godGhpcy5zLmN1cnJlbnRSZW1vdmVCYXRjaCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBubyBvcGVyYXRpb25zIGluIHRoZSBidWxrIHJhaXNlIGFuIGVycm9yXG4gICAgICAgIGlmICh0aGlzLnMuYmF0Y2hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0ludmFsaWQgQnVsa09wZXJhdGlvbiwgQmF0Y2ggY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zLmV4ZWN1dGVkID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgZmluYWxPcHRpb25zID0geyAuLi50aGlzLnMub3B0aW9ucywgLi4ub3B0aW9ucyB9O1xuICAgICAgICBjb25zdCBvcGVyYXRpb24gPSBuZXcgQnVsa1dyaXRlU2hpbU9wZXJhdGlvbih0aGlzLCBmaW5hbE9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5zLmNvbGxlY3Rpb24uY2xpZW50LCBvcGVyYXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSB3cml0ZSBlcnJvciBiZWZvcmUgZXhlY3V0aW5nIGNvbW1hbmRzXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgaGFuZGxlV3JpdGVFcnJvcihjYWxsYmFjaywgd3JpdGVSZXN1bHQpIHtcbiAgICAgICAgaWYgKHRoaXMucy5idWxrUmVzdWx0LndyaXRlRXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IHRoaXMucy5idWxrUmVzdWx0LndyaXRlRXJyb3JzWzBdLmVycm1zZ1xuICAgICAgICAgICAgICAgID8gdGhpcy5zLmJ1bGtSZXN1bHQud3JpdGVFcnJvcnNbMF0uZXJybXNnXG4gICAgICAgICAgICAgICAgOiAnd3JpdGUgb3BlcmF0aW9uIGZhaWxlZCc7XG4gICAgICAgICAgICBjYWxsYmFjayhuZXcgTW9uZ29CdWxrV3JpdGVFcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogbXNnLFxuICAgICAgICAgICAgICAgIGNvZGU6IHRoaXMucy5idWxrUmVzdWx0LndyaXRlRXJyb3JzWzBdLmNvZGUsXG4gICAgICAgICAgICAgICAgd3JpdGVFcnJvcnM6IHRoaXMucy5idWxrUmVzdWx0LndyaXRlRXJyb3JzXG4gICAgICAgICAgICB9LCB3cml0ZVJlc3VsdCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JpdGVDb25jZXJuRXJyb3IgPSB3cml0ZVJlc3VsdC5nZXRXcml0ZUNvbmNlcm5FcnJvcigpO1xuICAgICAgICBpZiAod3JpdGVDb25jZXJuRXJyb3IpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBNb25nb0J1bGtXcml0ZUVycm9yKHdyaXRlQ29uY2VybkVycm9yLCB3cml0ZVJlc3VsdCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmV4cG9ydHMuQnVsa09wZXJhdGlvbkJhc2UgPSBCdWxrT3BlcmF0aW9uQmFzZTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWxrT3BlcmF0aW9uQmFzZS5wcm90b3R5cGUsICdsZW5ndGgnLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMuY3VycmVudEluZGV4O1xuICAgIH1cbn0pO1xuZnVuY3Rpb24gc2hvdWxkRm9yY2VTZXJ2ZXJPYmplY3RJZChidWxrT3BlcmF0aW9uKSB7XG4gICAgaWYgKHR5cGVvZiBidWxrT3BlcmF0aW9uLnMub3B0aW9ucy5mb3JjZVNlcnZlck9iamVjdElkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgcmV0dXJuIGJ1bGtPcGVyYXRpb24ucy5vcHRpb25zLmZvcmNlU2VydmVyT2JqZWN0SWQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYnVsa09wZXJhdGlvbi5zLmNvbGxlY3Rpb24ucy5kYi5vcHRpb25zPy5mb3JjZVNlcnZlck9iamVjdElkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgcmV0dXJuIGJ1bGtPcGVyYXRpb24ucy5jb2xsZWN0aW9uLnMuZGIub3B0aW9ucz8uZm9yY2VTZXJ2ZXJPYmplY3RJZDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNJbnNlcnRCYXRjaChiYXRjaCkge1xuICAgIHJldHVybiBiYXRjaC5iYXRjaFR5cGUgPT09IGV4cG9ydHMuQmF0Y2hUeXBlLklOU0VSVDtcbn1cbmZ1bmN0aW9uIGlzVXBkYXRlQmF0Y2goYmF0Y2gpIHtcbiAgICByZXR1cm4gYmF0Y2guYmF0Y2hUeXBlID09PSBleHBvcnRzLkJhdGNoVHlwZS5VUERBVEU7XG59XG5mdW5jdGlvbiBpc0RlbGV0ZUJhdGNoKGJhdGNoKSB7XG4gICAgcmV0dXJuIGJhdGNoLmJhdGNoVHlwZSA9PT0gZXhwb3J0cy5CYXRjaFR5cGUuREVMRVRFO1xufVxuZnVuY3Rpb24gYnVpbGRDdXJyZW50T3AoYnVsa09wKSB7XG4gICAgbGV0IHsgY3VycmVudE9wIH0gPSBidWxrT3AucztcbiAgICBidWxrT3Aucy5jdXJyZW50T3AgPSB1bmRlZmluZWQ7XG4gICAgaWYgKCFjdXJyZW50T3ApXG4gICAgICAgIGN1cnJlbnRPcCA9IHt9O1xuICAgIHJldHVybiBjdXJyZW50T3A7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQnVsa09wZXJhdGlvbkJhc2UiLCJGaW5kT3BlcmF0b3JzIiwiTW9uZ29CdWxrV3JpdGVFcnJvciIsIm1lcmdlQmF0Y2hSZXN1bHRzIiwiV3JpdGVFcnJvciIsIldyaXRlQ29uY2VybkVycm9yIiwiQnVsa1dyaXRlUmVzdWx0IiwiQmF0Y2giLCJCYXRjaFR5cGUiLCJic29uXzEiLCJyZXF1aXJlIiwiZXJyb3JfMSIsImRlbGV0ZV8xIiwiZXhlY3V0ZV9vcGVyYXRpb25fMSIsImluc2VydF8xIiwib3BlcmF0aW9uXzEiLCJ1cGRhdGVfMSIsInV0aWxzXzEiLCJ3cml0ZV9jb25jZXJuXzEiLCJrU2VydmVyRXJyb3IiLCJTeW1ib2wiLCJmcmVlemUiLCJJTlNFUlQiLCJVUERBVEUiLCJERUxFVEUiLCJjb25zdHJ1Y3RvciIsImJhdGNoVHlwZSIsIm9yaWdpbmFsWmVyb0luZGV4IiwiY3VycmVudEluZGV4Iiwib3JpZ2luYWxJbmRleGVzIiwib3BlcmF0aW9ucyIsInNpemUiLCJzaXplQnl0ZXMiLCJnZW5lcmF0ZUlkTWFwIiwiaWRzIiwiaWRNYXAiLCJkb2MiLCJpbmRleCIsIl9pZCIsImJ1bGtSZXN1bHQiLCJyZXN1bHQiLCJpbnNlcnRlZENvdW50Iiwibkluc2VydGVkIiwibWF0Y2hlZENvdW50Iiwibk1hdGNoZWQiLCJtb2RpZmllZENvdW50Iiwibk1vZGlmaWVkIiwiZGVsZXRlZENvdW50IiwiblJlbW92ZWQiLCJ1cHNlcnRlZENvdW50IiwidXBzZXJ0ZWQiLCJsZW5ndGgiLCJ1cHNlcnRlZElkcyIsImluc2VydGVkSWRzIiwiZW51bWVyYWJsZSIsIm9rIiwiblVwc2VydGVkIiwiZ2V0SW5zZXJ0ZWRJZHMiLCJnZXRVcHNlcnRlZElkcyIsImdldFVwc2VydGVkSWRBdCIsImdldFJhd1Jlc3BvbnNlIiwiaGFzV3JpdGVFcnJvcnMiLCJ3cml0ZUVycm9ycyIsImdldFdyaXRlRXJyb3JDb3VudCIsImdldFdyaXRlRXJyb3JBdCIsInVuZGVmaW5lZCIsImdldFdyaXRlRXJyb3JzIiwiZ2V0V3JpdGVDb25jZXJuRXJyb3IiLCJ3cml0ZUNvbmNlcm5FcnJvcnMiLCJlcnJtc2ciLCJpIiwiZXJyIiwiY29kZSIsIk1PTkdPREJfRVJST1JfQ09ERVMiLCJXcml0ZUNvbmNlcm5GYWlsZWQiLCJ0b1N0cmluZyIsImlzT2siLCJlcnJvciIsImVyckluZm8iLCJ0b0pTT04iLCJnZXRPcGVyYXRpb24iLCJvcCIsIkpTT04iLCJzdHJpbmdpZnkiLCJiYXRjaCIsIndyaXRlRXJyb3IiLCJtZXNzYWdlIiwicHVzaCIsImlzSW5zZXJ0QmF0Y2giLCJuIiwiaXNEZWxldGVCYXRjaCIsIkFycmF5IiwiaXNBcnJheSIsImlzVXBkYXRlQmF0Y2giLCJ3cml0ZUNvbmNlcm5FcnJvciIsImV4ZWN1dGVDb21tYW5kcyIsImJ1bGtPcGVyYXRpb24iLCJvcHRpb25zIiwiY2FsbGJhY2siLCJzIiwiYmF0Y2hlcyIsInNoaWZ0IiwicmVzdWx0SGFuZGxlciIsIk1vbmdvV3JpdGVDb25jZXJuRXJyb3IiLCJoYW5kbGVNb25nb1dyaXRlQ29uY2VybkVycm9yIiwid3JpdGVSZXN1bHQiLCJoYW5kbGVXcml0ZUVycm9yIiwiZmluYWxPcHRpb25zIiwicmVzb2x2ZU9wdGlvbnMiLCJvcmRlcmVkIiwiaXNPcmRlcmVkIiwiYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uIiwib3BlcmF0aW9uSWQiLCJjaGVja0tleXMiLCJyZXRyeVdyaXRlcyIsInNvbWUiLCJtdWx0aSIsImxpbWl0IiwiZXhlY3V0ZU9wZXJhdGlvbiIsImNvbGxlY3Rpb24iLCJjbGllbnQiLCJJbnNlcnRPcGVyYXRpb24iLCJuYW1lc3BhY2UiLCJVcGRhdGVPcGVyYXRpb24iLCJEZWxldGVPcGVyYXRpb24iLCJNb25nb1NlcnZlckVycm9yIiwiRXJyb3IiLCJhc3NpZ24iLCJuYW1lIiwidXBkYXRlIiwidXBkYXRlRG9jdW1lbnQiLCJjdXJyZW50T3AiLCJidWlsZEN1cnJlbnRPcCIsImFkZFRvT3BlcmF0aW9uc0xpc3QiLCJtYWtlVXBkYXRlU3RhdGVtZW50Iiwic2VsZWN0b3IiLCJ1cGRhdGVPbmUiLCJoYXNBdG9taWNPcGVyYXRvcnMiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwicmVwbGFjZU9uZSIsInJlcGxhY2VtZW50IiwiZGVsZXRlT25lIiwibWFrZURlbGV0ZVN0YXRlbWVudCIsImRlbGV0ZSIsInVwc2VydCIsImNvbGxhdGlvbiIsImFycmF5RmlsdGVycyIsImhpbnQiLCJCdWxrV3JpdGVTaGltT3BlcmF0aW9uIiwiQWJzdHJhY3RDYWxsYmFja09wZXJhdGlvbiIsImV4ZWN1dGVDYWxsYmFjayIsInNlcnZlciIsInNlc3Npb24iLCJ0b3BvbG9neSIsImdldFRvcG9sb2d5IiwiZXhlY3V0ZWQiLCJoZWxsbyIsImxhc3RIZWxsbyIsInVzaW5nQXV0b0VuY3J5cHRpb24iLCJhdXRvRW5jcnlwdGVyIiwibWF4QnNvbk9iamVjdFNpemUiLCJtYXhCYXRjaFNpemVCeXRlcyIsIm1heFdyaXRlQmF0Y2hTaXplIiwibWF4S2V5U2l6ZSIsImFwcGx5UmV0cnlhYmxlV3JpdGVzIiwiZGIiLCJjdXJyZW50QmF0Y2giLCJjdXJyZW50QmF0Y2hTaXplIiwiY3VycmVudEJhdGNoU2l6ZUJ5dGVzIiwiY3VycmVudEluc2VydEJhdGNoIiwiY3VycmVudFVwZGF0ZUJhdGNoIiwiY3VycmVudFJlbW92ZUJhdGNoIiwid3JpdGVDb25jZXJuIiwiV3JpdGVDb25jZXJuIiwiZnJvbU9wdGlvbnMiLCJic29uT3B0aW9ucyIsInJlc29sdmVCU09OT3B0aW9ucyIsImluc2VydCIsImRvY3VtZW50Iiwic2hvdWxkRm9yY2VTZXJ2ZXJPYmplY3RJZCIsIk9iamVjdElkIiwiZmluZCIsInJhdyIsImZvcmNlU2VydmVyT2JqZWN0SWQiLCJpbnNlcnRPbmUiLCJ1cGRhdGVTdGF0ZW1lbnQiLCJmaWx0ZXIiLCJ1IiwidXBkYXRlTWFueSIsImRlbGV0ZU1hbnkiLCJleGVjdXRlIiwiTW9uZ29CYXRjaFJlRXhlY3V0aW9uRXJyb3IiLCJvcGVyYXRpb24iLCJtc2ciLCJwcm90b3R5cGUiLCJnZXQiLCJidWxrT3AiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/bulk/common.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/bulk/ordered.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/bulk/ordered.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.OrderedBulkOperation = void 0;\nconst BSON = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/bulk/common.js\");\n/** @public */ class OrderedBulkOperation extends common_1.BulkOperationBase {\n    /** @internal */ constructor(collection, options){\n        super(collection, options, true);\n    }\n    addToOperationsList(batchType, document) {\n        // Get the bsonSize\n        const bsonSize = BSON.calculateObjectSize(document, {\n            checkKeys: false,\n            // Since we don't know what the user selected for BSON options here,\n            // err on the safe side, and check the size with ignoreUndefined: false.\n            ignoreUndefined: false\n        });\n        // Throw error if the doc is bigger than the max BSON size\n        if (bsonSize >= this.s.maxBsonObjectSize) // TODO(NODE-3483): Change this to MongoBSONError\n        throw new error_1.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);\n        // Create a new batch object if we don't have a current one\n        if (this.s.currentBatch == null) {\n            this.s.currentBatch = new common_1.Batch(batchType, this.s.currentIndex);\n        }\n        const maxKeySize = this.s.maxKeySize;\n        // Check if we need to create a new batch\n        if (// New batch if we exceed the max batch op size\n        this.s.currentBatchSize + 1 >= this.s.maxWriteBatchSize || // New batch if we exceed the maxBatchSizeBytes. Only matters if batch already has a doc,\n        // since we can't sent an empty batch\n        this.s.currentBatchSize > 0 && this.s.currentBatchSizeBytes + maxKeySize + bsonSize >= this.s.maxBatchSizeBytes || // New batch if the new op does not have the same op type as the current batch\n        this.s.currentBatch.batchType !== batchType) {\n            // Save the batch to the execution stack\n            this.s.batches.push(this.s.currentBatch);\n            // Create a new batch\n            this.s.currentBatch = new common_1.Batch(batchType, this.s.currentIndex);\n            // Reset the current size trackers\n            this.s.currentBatchSize = 0;\n            this.s.currentBatchSizeBytes = 0;\n        }\n        if (batchType === common_1.BatchType.INSERT) {\n            this.s.bulkResult.insertedIds.push({\n                index: this.s.currentIndex,\n                _id: document._id\n            });\n        }\n        // We have an array of documents\n        if (Array.isArray(document)) {\n            throw new error_1.MongoInvalidArgumentError(\"Operation passed in cannot be an Array\");\n        }\n        this.s.currentBatch.originalIndexes.push(this.s.currentIndex);\n        this.s.currentBatch.operations.push(document);\n        this.s.currentBatchSize += 1;\n        this.s.currentBatchSizeBytes += maxKeySize + bsonSize;\n        this.s.currentIndex += 1;\n        return this;\n    }\n}\nexports.OrderedBulkOperation = OrderedBulkOperation; //# sourceMappingURL=ordered.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvYnVsay9vcmRlcmVkLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw0QkFBNEIsR0FBRyxLQUFLO0FBQ3BDLE1BQU1HLE9BQU9DLG1CQUFPQSxDQUFDLHlEQUFTO0FBQzlCLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1FLFdBQVdGLG1CQUFPQSxDQUFDLGlFQUFVO0FBQ25DLFlBQVksR0FDWixNQUFNRiw2QkFBNkJJLFNBQVNDLGlCQUFpQjtJQUN6RCxjQUFjLEdBQ2RDLFlBQVlDLFVBQVUsRUFBRUMsT0FBTyxDQUFFO1FBQzdCLEtBQUssQ0FBQ0QsWUFBWUMsU0FBUztJQUMvQjtJQUNBQyxvQkFBb0JDLFNBQVMsRUFBRUMsUUFBUSxFQUFFO1FBQ3JDLG1CQUFtQjtRQUNuQixNQUFNQyxXQUFXWCxLQUFLWSxtQkFBbUIsQ0FBQ0YsVUFBVTtZQUNoREcsV0FBVztZQUNYLG9FQUFvRTtZQUNwRSx3RUFBd0U7WUFDeEVDLGlCQUFpQjtRQUNyQjtRQUNBLDBEQUEwRDtRQUMxRCxJQUFJSCxZQUFZLElBQUksQ0FBQ0ksQ0FBQyxDQUFDQyxpQkFBaUIsRUFDcEMsaURBQWlEO1FBQ2pELE1BQU0sSUFBSWQsUUFBUWUseUJBQXlCLENBQUMsQ0FBQyx5Q0FBeUMsRUFBRSxJQUFJLENBQUNGLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQztRQUN0SCwyREFBMkQ7UUFDM0QsSUFBSSxJQUFJLENBQUNELENBQUMsQ0FBQ0csWUFBWSxJQUFJLE1BQU07WUFDN0IsSUFBSSxDQUFDSCxDQUFDLENBQUNHLFlBQVksR0FBRyxJQUFJZixTQUFTZ0IsS0FBSyxDQUFDVixXQUFXLElBQUksQ0FBQ00sQ0FBQyxDQUFDSyxZQUFZO1FBQzNFO1FBQ0EsTUFBTUMsYUFBYSxJQUFJLENBQUNOLENBQUMsQ0FBQ00sVUFBVTtRQUNwQyx5Q0FBeUM7UUFDekMsSUFDQSwrQ0FBK0M7UUFDL0MsSUFBSSxDQUFDTixDQUFDLENBQUNPLGdCQUFnQixHQUFHLEtBQUssSUFBSSxDQUFDUCxDQUFDLENBQUNRLGlCQUFpQixJQUNuRCx5RkFBeUY7UUFDekYscUNBQXFDO1FBQ3BDLElBQUksQ0FBQ1IsQ0FBQyxDQUFDTyxnQkFBZ0IsR0FBRyxLQUN2QixJQUFJLENBQUNQLENBQUMsQ0FBQ1MscUJBQXFCLEdBQUdILGFBQWFWLFlBQVksSUFBSSxDQUFDSSxDQUFDLENBQUNVLGlCQUFpQixJQUNwRiw4RUFBOEU7UUFDOUUsSUFBSSxDQUFDVixDQUFDLENBQUNHLFlBQVksQ0FBQ1QsU0FBUyxLQUFLQSxXQUFXO1lBQzdDLHdDQUF3QztZQUN4QyxJQUFJLENBQUNNLENBQUMsQ0FBQ1csT0FBTyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDWixDQUFDLENBQUNHLFlBQVk7WUFDdkMscUJBQXFCO1lBQ3JCLElBQUksQ0FBQ0gsQ0FBQyxDQUFDRyxZQUFZLEdBQUcsSUFBSWYsU0FBU2dCLEtBQUssQ0FBQ1YsV0FBVyxJQUFJLENBQUNNLENBQUMsQ0FBQ0ssWUFBWTtZQUN2RSxrQ0FBa0M7WUFDbEMsSUFBSSxDQUFDTCxDQUFDLENBQUNPLGdCQUFnQixHQUFHO1lBQzFCLElBQUksQ0FBQ1AsQ0FBQyxDQUFDUyxxQkFBcUIsR0FBRztRQUNuQztRQUNBLElBQUlmLGNBQWNOLFNBQVN5QixTQUFTLENBQUNDLE1BQU0sRUFBRTtZQUN6QyxJQUFJLENBQUNkLENBQUMsQ0FBQ2UsVUFBVSxDQUFDQyxXQUFXLENBQUNKLElBQUksQ0FBQztnQkFDL0JLLE9BQU8sSUFBSSxDQUFDakIsQ0FBQyxDQUFDSyxZQUFZO2dCQUMxQmEsS0FBS3ZCLFNBQVN1QixHQUFHO1lBQ3JCO1FBQ0o7UUFDQSxnQ0FBZ0M7UUFDaEMsSUFBSUMsTUFBTUMsT0FBTyxDQUFDekIsV0FBVztZQUN6QixNQUFNLElBQUlSLFFBQVFlLHlCQUF5QixDQUFDO1FBQ2hEO1FBQ0EsSUFBSSxDQUFDRixDQUFDLENBQUNHLFlBQVksQ0FBQ2tCLGVBQWUsQ0FBQ1QsSUFBSSxDQUFDLElBQUksQ0FBQ1osQ0FBQyxDQUFDSyxZQUFZO1FBQzVELElBQUksQ0FBQ0wsQ0FBQyxDQUFDRyxZQUFZLENBQUNtQixVQUFVLENBQUNWLElBQUksQ0FBQ2pCO1FBQ3BDLElBQUksQ0FBQ0ssQ0FBQyxDQUFDTyxnQkFBZ0IsSUFBSTtRQUMzQixJQUFJLENBQUNQLENBQUMsQ0FBQ1MscUJBQXFCLElBQUlILGFBQWFWO1FBQzdDLElBQUksQ0FBQ0ksQ0FBQyxDQUFDSyxZQUFZLElBQUk7UUFDdkIsT0FBTyxJQUFJO0lBQ2Y7QUFDSjtBQUNBdkIsNEJBQTRCLEdBQUdFLHNCQUMvQixtQ0FBbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvYnVsay9vcmRlcmVkLmpzP2UyMTYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk9yZGVyZWRCdWxrT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgQlNPTiA9IHJlcXVpcmUoXCIuLi9ic29uXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IGNvbW1vbl8xID0gcmVxdWlyZShcIi4vY29tbW9uXCIpO1xuLyoqIEBwdWJsaWMgKi9cbmNsYXNzIE9yZGVyZWRCdWxrT3BlcmF0aW9uIGV4dGVuZHMgY29tbW9uXzEuQnVsa09wZXJhdGlvbkJhc2Uge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24sIG9wdGlvbnMsIHRydWUpO1xuICAgIH1cbiAgICBhZGRUb09wZXJhdGlvbnNMaXN0KGJhdGNoVHlwZSwgZG9jdW1lbnQpIHtcbiAgICAgICAgLy8gR2V0IHRoZSBic29uU2l6ZVxuICAgICAgICBjb25zdCBic29uU2l6ZSA9IEJTT04uY2FsY3VsYXRlT2JqZWN0U2l6ZShkb2N1bWVudCwge1xuICAgICAgICAgICAgY2hlY2tLZXlzOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIFNpbmNlIHdlIGRvbid0IGtub3cgd2hhdCB0aGUgdXNlciBzZWxlY3RlZCBmb3IgQlNPTiBvcHRpb25zIGhlcmUsXG4gICAgICAgICAgICAvLyBlcnIgb24gdGhlIHNhZmUgc2lkZSwgYW5kIGNoZWNrIHRoZSBzaXplIHdpdGggaWdub3JlVW5kZWZpbmVkOiBmYWxzZS5cbiAgICAgICAgICAgIGlnbm9yZVVuZGVmaW5lZDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFRocm93IGVycm9yIGlmIHRoZSBkb2MgaXMgYmlnZ2VyIHRoYW4gdGhlIG1heCBCU09OIHNpemVcbiAgICAgICAgaWYgKGJzb25TaXplID49IHRoaXMucy5tYXhCc29uT2JqZWN0U2l6ZSlcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKTogQ2hhbmdlIHRoaXMgdG8gTW9uZ29CU09ORXJyb3JcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYERvY3VtZW50IGlzIGxhcmdlciB0aGFuIHRoZSBtYXhpbXVtIHNpemUgJHt0aGlzLnMubWF4QnNvbk9iamVjdFNpemV9YCk7XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBiYXRjaCBvYmplY3QgaWYgd2UgZG9uJ3QgaGF2ZSBhIGN1cnJlbnQgb25lXG4gICAgICAgIGlmICh0aGlzLnMuY3VycmVudEJhdGNoID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2ggPSBuZXcgY29tbW9uXzEuQmF0Y2goYmF0Y2hUeXBlLCB0aGlzLnMuY3VycmVudEluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYXhLZXlTaXplID0gdGhpcy5zLm1heEtleVNpemU7XG4gICAgICAgIC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gY3JlYXRlIGEgbmV3IGJhdGNoXG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gTmV3IGJhdGNoIGlmIHdlIGV4Y2VlZCB0aGUgbWF4IGJhdGNoIG9wIHNpemVcbiAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaFNpemUgKyAxID49IHRoaXMucy5tYXhXcml0ZUJhdGNoU2l6ZSB8fFxuICAgICAgICAgICAgLy8gTmV3IGJhdGNoIGlmIHdlIGV4Y2VlZCB0aGUgbWF4QmF0Y2hTaXplQnl0ZXMuIE9ubHkgbWF0dGVycyBpZiBiYXRjaCBhbHJlYWR5IGhhcyBhIGRvYyxcbiAgICAgICAgICAgIC8vIHNpbmNlIHdlIGNhbid0IHNlbnQgYW4gZW1wdHkgYmF0Y2hcbiAgICAgICAgICAgICh0aGlzLnMuY3VycmVudEJhdGNoU2l6ZSA+IDAgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnMuY3VycmVudEJhdGNoU2l6ZUJ5dGVzICsgbWF4S2V5U2l6ZSArIGJzb25TaXplID49IHRoaXMucy5tYXhCYXRjaFNpemVCeXRlcykgfHxcbiAgICAgICAgICAgIC8vIE5ldyBiYXRjaCBpZiB0aGUgbmV3IG9wIGRvZXMgbm90IGhhdmUgdGhlIHNhbWUgb3AgdHlwZSBhcyB0aGUgY3VycmVudCBiYXRjaFxuICAgICAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaC5iYXRjaFR5cGUgIT09IGJhdGNoVHlwZSkge1xuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgYmF0Y2ggdG8gdGhlIGV4ZWN1dGlvbiBzdGFja1xuICAgICAgICAgICAgdGhpcy5zLmJhdGNoZXMucHVzaCh0aGlzLnMuY3VycmVudEJhdGNoKTtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBiYXRjaFxuICAgICAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaCA9IG5ldyBjb21tb25fMS5CYXRjaChiYXRjaFR5cGUsIHRoaXMucy5jdXJyZW50SW5kZXgpO1xuICAgICAgICAgICAgLy8gUmVzZXQgdGhlIGN1cnJlbnQgc2l6ZSB0cmFja2Vyc1xuICAgICAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaFNpemUgPSAwO1xuICAgICAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaFNpemVCeXRlcyA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJhdGNoVHlwZSA9PT0gY29tbW9uXzEuQmF0Y2hUeXBlLklOU0VSVCkge1xuICAgICAgICAgICAgdGhpcy5zLmJ1bGtSZXN1bHQuaW5zZXJ0ZWRJZHMucHVzaCh7XG4gICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMucy5jdXJyZW50SW5kZXgsXG4gICAgICAgICAgICAgICAgX2lkOiBkb2N1bWVudC5faWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIGhhdmUgYW4gYXJyYXkgb2YgZG9jdW1lbnRzXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRvY3VtZW50KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignT3BlcmF0aW9uIHBhc3NlZCBpbiBjYW5ub3QgYmUgYW4gQXJyYXknKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnMuY3VycmVudEJhdGNoLm9yaWdpbmFsSW5kZXhlcy5wdXNoKHRoaXMucy5jdXJyZW50SW5kZXgpO1xuICAgICAgICB0aGlzLnMuY3VycmVudEJhdGNoLm9wZXJhdGlvbnMucHVzaChkb2N1bWVudCk7XG4gICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2hTaXplICs9IDE7XG4gICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2hTaXplQnl0ZXMgKz0gbWF4S2V5U2l6ZSArIGJzb25TaXplO1xuICAgICAgICB0aGlzLnMuY3VycmVudEluZGV4ICs9IDE7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbmV4cG9ydHMuT3JkZXJlZEJ1bGtPcGVyYXRpb24gPSBPcmRlcmVkQnVsa09wZXJhdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9yZGVyZWQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiT3JkZXJlZEJ1bGtPcGVyYXRpb24iLCJCU09OIiwicmVxdWlyZSIsImVycm9yXzEiLCJjb21tb25fMSIsIkJ1bGtPcGVyYXRpb25CYXNlIiwiY29uc3RydWN0b3IiLCJjb2xsZWN0aW9uIiwib3B0aW9ucyIsImFkZFRvT3BlcmF0aW9uc0xpc3QiLCJiYXRjaFR5cGUiLCJkb2N1bWVudCIsImJzb25TaXplIiwiY2FsY3VsYXRlT2JqZWN0U2l6ZSIsImNoZWNrS2V5cyIsImlnbm9yZVVuZGVmaW5lZCIsInMiLCJtYXhCc29uT2JqZWN0U2l6ZSIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJjdXJyZW50QmF0Y2giLCJCYXRjaCIsImN1cnJlbnRJbmRleCIsIm1heEtleVNpemUiLCJjdXJyZW50QmF0Y2hTaXplIiwibWF4V3JpdGVCYXRjaFNpemUiLCJjdXJyZW50QmF0Y2hTaXplQnl0ZXMiLCJtYXhCYXRjaFNpemVCeXRlcyIsImJhdGNoZXMiLCJwdXNoIiwiQmF0Y2hUeXBlIiwiSU5TRVJUIiwiYnVsa1Jlc3VsdCIsImluc2VydGVkSWRzIiwiaW5kZXgiLCJfaWQiLCJBcnJheSIsImlzQXJyYXkiLCJvcmlnaW5hbEluZGV4ZXMiLCJvcGVyYXRpb25zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/bulk/ordered.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/bulk/unordered.js":
/*!****************************************************!*\
  !*** ./node_modules/mongodb/lib/bulk/unordered.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.UnorderedBulkOperation = void 0;\nconst BSON = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/bulk/common.js\");\n/** @public */ class UnorderedBulkOperation extends common_1.BulkOperationBase {\n    /** @internal */ constructor(collection, options){\n        super(collection, options, false);\n    }\n    handleWriteError(callback, writeResult) {\n        if (this.s.batches.length) {\n            return false;\n        }\n        return super.handleWriteError(callback, writeResult);\n    }\n    addToOperationsList(batchType, document) {\n        // Get the bsonSize\n        const bsonSize = BSON.calculateObjectSize(document, {\n            checkKeys: false,\n            // Since we don't know what the user selected for BSON options here,\n            // err on the safe side, and check the size with ignoreUndefined: false.\n            ignoreUndefined: false\n        });\n        // Throw error if the doc is bigger than the max BSON size\n        if (bsonSize >= this.s.maxBsonObjectSize) {\n            // TODO(NODE-3483): Change this to MongoBSONError\n            throw new error_1.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);\n        }\n        // Holds the current batch\n        this.s.currentBatch = undefined;\n        // Get the right type of batch\n        if (batchType === common_1.BatchType.INSERT) {\n            this.s.currentBatch = this.s.currentInsertBatch;\n        } else if (batchType === common_1.BatchType.UPDATE) {\n            this.s.currentBatch = this.s.currentUpdateBatch;\n        } else if (batchType === common_1.BatchType.DELETE) {\n            this.s.currentBatch = this.s.currentRemoveBatch;\n        }\n        const maxKeySize = this.s.maxKeySize;\n        // Create a new batch object if we don't have a current one\n        if (this.s.currentBatch == null) {\n            this.s.currentBatch = new common_1.Batch(batchType, this.s.currentIndex);\n        }\n        // Check if we need to create a new batch\n        if (// New batch if we exceed the max batch op size\n        this.s.currentBatch.size + 1 >= this.s.maxWriteBatchSize || // New batch if we exceed the maxBatchSizeBytes. Only matters if batch already has a doc,\n        // since we can't sent an empty batch\n        this.s.currentBatch.size > 0 && this.s.currentBatch.sizeBytes + maxKeySize + bsonSize >= this.s.maxBatchSizeBytes || // New batch if the new op does not have the same op type as the current batch\n        this.s.currentBatch.batchType !== batchType) {\n            // Save the batch to the execution stack\n            this.s.batches.push(this.s.currentBatch);\n            // Create a new batch\n            this.s.currentBatch = new common_1.Batch(batchType, this.s.currentIndex);\n        }\n        // We have an array of documents\n        if (Array.isArray(document)) {\n            throw new error_1.MongoInvalidArgumentError(\"Operation passed in cannot be an Array\");\n        }\n        this.s.currentBatch.operations.push(document);\n        this.s.currentBatch.originalIndexes.push(this.s.currentIndex);\n        this.s.currentIndex = this.s.currentIndex + 1;\n        // Save back the current Batch to the right type\n        if (batchType === common_1.BatchType.INSERT) {\n            this.s.currentInsertBatch = this.s.currentBatch;\n            this.s.bulkResult.insertedIds.push({\n                index: this.s.bulkResult.insertedIds.length,\n                _id: document._id\n            });\n        } else if (batchType === common_1.BatchType.UPDATE) {\n            this.s.currentUpdateBatch = this.s.currentBatch;\n        } else if (batchType === common_1.BatchType.DELETE) {\n            this.s.currentRemoveBatch = this.s.currentBatch;\n        }\n        // Update current batch size\n        this.s.currentBatch.size += 1;\n        this.s.currentBatch.sizeBytes += maxKeySize + bsonSize;\n        return this;\n    }\n}\nexports.UnorderedBulkOperation = UnorderedBulkOperation; //# sourceMappingURL=unordered.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvYnVsay91bm9yZGVyZWQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDhCQUE4QixHQUFHLEtBQUs7QUFDdEMsTUFBTUcsT0FBT0MsbUJBQU9BLENBQUMseURBQVM7QUFDOUIsTUFBTUMsVUFBVUQsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUUsV0FBV0YsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsWUFBWSxHQUNaLE1BQU1GLCtCQUErQkksU0FBU0MsaUJBQWlCO0lBQzNELGNBQWMsR0FDZEMsWUFBWUMsVUFBVSxFQUFFQyxPQUFPLENBQUU7UUFDN0IsS0FBSyxDQUFDRCxZQUFZQyxTQUFTO0lBQy9CO0lBQ0FDLGlCQUFpQkMsUUFBUSxFQUFFQyxXQUFXLEVBQUU7UUFDcEMsSUFBSSxJQUFJLENBQUNDLENBQUMsQ0FBQ0MsT0FBTyxDQUFDQyxNQUFNLEVBQUU7WUFDdkIsT0FBTztRQUNYO1FBQ0EsT0FBTyxLQUFLLENBQUNMLGlCQUFpQkMsVUFBVUM7SUFDNUM7SUFDQUksb0JBQW9CQyxTQUFTLEVBQUVDLFFBQVEsRUFBRTtRQUNyQyxtQkFBbUI7UUFDbkIsTUFBTUMsV0FBV2pCLEtBQUtrQixtQkFBbUIsQ0FBQ0YsVUFBVTtZQUNoREcsV0FBVztZQUNYLG9FQUFvRTtZQUNwRSx3RUFBd0U7WUFDeEVDLGlCQUFpQjtRQUNyQjtRQUNBLDBEQUEwRDtRQUMxRCxJQUFJSCxZQUFZLElBQUksQ0FBQ04sQ0FBQyxDQUFDVSxpQkFBaUIsRUFBRTtZQUN0QyxpREFBaUQ7WUFDakQsTUFBTSxJQUFJbkIsUUFBUW9CLHlCQUF5QixDQUFDLENBQUMseUNBQXlDLEVBQUUsSUFBSSxDQUFDWCxDQUFDLENBQUNVLGlCQUFpQixDQUFDLENBQUM7UUFDdEg7UUFDQSwwQkFBMEI7UUFDMUIsSUFBSSxDQUFDVixDQUFDLENBQUNZLFlBQVksR0FB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O1lBQzlDLElBQUksQ0FBQ2pCLENBQUMsQ0FBQ2tCLGtCQUFrQixHQUFHLElBQUksQ0FBQ2xCLENBQUMsQ0FBQ1ksWUFBWTtRQUNuRCxPQUNLLElBQUlSLGNBQWNaLFNBQVNzQixTQUFTLENBQUNLLE1BQU0sRUFBRTtZQUM5QyxJQUFJLENBQUNuQixDQUFDLENBQUNvQixrQkFBa0IsR0FBRyxJQUFJLENBQUNwQixDQUFDLENBQUNZLFlBQVk7UUFDbkQ7UUFDQSw0QkFBNEI7UUFDNUIsSUFBSSxDQUFDWixDQUFDLENBQUNZLFlBQVksQ0FBQ1ksSUFBSSxJQUFJO1FBQzVCLElBQUksQ0FBQ3hCLENBQUMsQ0FBQ1ksWUFBWSxDQUFDYyxTQUFTLElBQUlMLGFBQWFmO1FBQzlDLE9BQU8sSUFBSTtJQUNmO0FBQ0o7QUFDQXBCLDhCQUE4QixHQUFHRSx3QkFDakMscUNBQXFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2J1bGsvdW5vcmRlcmVkLmpzP2JjMzYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlVub3JkZXJlZEJ1bGtPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBCU09OID0gcmVxdWlyZShcIi4uL2Jzb25cIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgY29tbW9uXzEgPSByZXF1aXJlKFwiLi9jb21tb25cIik7XG4vKiogQHB1YmxpYyAqL1xuY2xhc3MgVW5vcmRlcmVkQnVsa09wZXJhdGlvbiBleHRlbmRzIGNvbW1vbl8xLkJ1bGtPcGVyYXRpb25CYXNlIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihjb2xsZWN0aW9uLCBvcHRpb25zLCBmYWxzZSk7XG4gICAgfVxuICAgIGhhbmRsZVdyaXRlRXJyb3IoY2FsbGJhY2ssIHdyaXRlUmVzdWx0KSB7XG4gICAgICAgIGlmICh0aGlzLnMuYmF0Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwZXIuaGFuZGxlV3JpdGVFcnJvcihjYWxsYmFjaywgd3JpdGVSZXN1bHQpO1xuICAgIH1cbiAgICBhZGRUb09wZXJhdGlvbnNMaXN0KGJhdGNoVHlwZSwgZG9jdW1lbnQpIHtcbiAgICAgICAgLy8gR2V0IHRoZSBic29uU2l6ZVxuICAgICAgICBjb25zdCBic29uU2l6ZSA9IEJTT04uY2FsY3VsYXRlT2JqZWN0U2l6ZShkb2N1bWVudCwge1xuICAgICAgICAgICAgY2hlY2tLZXlzOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIFNpbmNlIHdlIGRvbid0IGtub3cgd2hhdCB0aGUgdXNlciBzZWxlY3RlZCBmb3IgQlNPTiBvcHRpb25zIGhlcmUsXG4gICAgICAgICAgICAvLyBlcnIgb24gdGhlIHNhZmUgc2lkZSwgYW5kIGNoZWNrIHRoZSBzaXplIHdpdGggaWdub3JlVW5kZWZpbmVkOiBmYWxzZS5cbiAgICAgICAgICAgIGlnbm9yZVVuZGVmaW5lZDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFRocm93IGVycm9yIGlmIHRoZSBkb2MgaXMgYmlnZ2VyIHRoYW4gdGhlIG1heCBCU09OIHNpemVcbiAgICAgICAgaWYgKGJzb25TaXplID49IHRoaXMucy5tYXhCc29uT2JqZWN0U2l6ZSkge1xuICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODMpOiBDaGFuZ2UgdGhpcyB0byBNb25nb0JTT05FcnJvclxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgRG9jdW1lbnQgaXMgbGFyZ2VyIHRoYW4gdGhlIG1heGltdW0gc2l6ZSAke3RoaXMucy5tYXhCc29uT2JqZWN0U2l6ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBIb2xkcyB0aGUgY3VycmVudCBiYXRjaFxuICAgICAgICB0aGlzLnMuY3VycmVudEJhdGNoID0gdW5kZWZpbmVkO1xuICAgICAgICAvLyBHZXQgdGhlIHJpZ2h0IHR5cGUgb2YgYmF0Y2hcbiAgICAgICAgaWYgKGJhdGNoVHlwZSA9PT0gY29tbW9uXzEuQmF0Y2hUeXBlLklOU0VSVCkge1xuICAgICAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaCA9IHRoaXMucy5jdXJyZW50SW5zZXJ0QmF0Y2g7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYmF0Y2hUeXBlID09PSBjb21tb25fMS5CYXRjaFR5cGUuVVBEQVRFKSB7XG4gICAgICAgICAgICB0aGlzLnMuY3VycmVudEJhdGNoID0gdGhpcy5zLmN1cnJlbnRVcGRhdGVCYXRjaDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChiYXRjaFR5cGUgPT09IGNvbW1vbl8xLkJhdGNoVHlwZS5ERUxFVEUpIHtcbiAgICAgICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2ggPSB0aGlzLnMuY3VycmVudFJlbW92ZUJhdGNoO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1heEtleVNpemUgPSB0aGlzLnMubWF4S2V5U2l6ZTtcbiAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGJhdGNoIG9iamVjdCBpZiB3ZSBkb24ndCBoYXZlIGEgY3VycmVudCBvbmVcbiAgICAgICAgaWYgKHRoaXMucy5jdXJyZW50QmF0Y2ggPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaCA9IG5ldyBjb21tb25fMS5CYXRjaChiYXRjaFR5cGUsIHRoaXMucy5jdXJyZW50SW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gY3JlYXRlIGEgbmV3IGJhdGNoXG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gTmV3IGJhdGNoIGlmIHdlIGV4Y2VlZCB0aGUgbWF4IGJhdGNoIG9wIHNpemVcbiAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaC5zaXplICsgMSA+PSB0aGlzLnMubWF4V3JpdGVCYXRjaFNpemUgfHxcbiAgICAgICAgICAgIC8vIE5ldyBiYXRjaCBpZiB3ZSBleGNlZWQgdGhlIG1heEJhdGNoU2l6ZUJ5dGVzLiBPbmx5IG1hdHRlcnMgaWYgYmF0Y2ggYWxyZWFkeSBoYXMgYSBkb2MsXG4gICAgICAgICAgICAvLyBzaW5jZSB3ZSBjYW4ndCBzZW50IGFuIGVtcHR5IGJhdGNoXG4gICAgICAgICAgICAodGhpcy5zLmN1cnJlbnRCYXRjaC5zaXplID4gMCAmJlxuICAgICAgICAgICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2guc2l6ZUJ5dGVzICsgbWF4S2V5U2l6ZSArIGJzb25TaXplID49IHRoaXMucy5tYXhCYXRjaFNpemVCeXRlcykgfHxcbiAgICAgICAgICAgIC8vIE5ldyBiYXRjaCBpZiB0aGUgbmV3IG9wIGRvZXMgbm90IGhhdmUgdGhlIHNhbWUgb3AgdHlwZSBhcyB0aGUgY3VycmVudCBiYXRjaFxuICAgICAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaC5iYXRjaFR5cGUgIT09IGJhdGNoVHlwZSkge1xuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgYmF0Y2ggdG8gdGhlIGV4ZWN1dGlvbiBzdGFja1xuICAgICAgICAgICAgdGhpcy5zLmJhdGNoZXMucHVzaCh0aGlzLnMuY3VycmVudEJhdGNoKTtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBiYXRjaFxuICAgICAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaCA9IG5ldyBjb21tb25fMS5CYXRjaChiYXRjaFR5cGUsIHRoaXMucy5jdXJyZW50SW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIGhhdmUgYW4gYXJyYXkgb2YgZG9jdW1lbnRzXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRvY3VtZW50KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignT3BlcmF0aW9uIHBhc3NlZCBpbiBjYW5ub3QgYmUgYW4gQXJyYXknKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnMuY3VycmVudEJhdGNoLm9wZXJhdGlvbnMucHVzaChkb2N1bWVudCk7XG4gICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2gub3JpZ2luYWxJbmRleGVzLnB1c2godGhpcy5zLmN1cnJlbnRJbmRleCk7XG4gICAgICAgIHRoaXMucy5jdXJyZW50SW5kZXggPSB0aGlzLnMuY3VycmVudEluZGV4ICsgMTtcbiAgICAgICAgLy8gU2F2ZSBiYWNrIHRoZSBjdXJyZW50IEJhdGNoIHRvIHRoZSByaWdodCB0eXBlXG4gICAgICAgIGlmIChiYXRjaFR5cGUgPT09IGNvbW1vbl8xLkJhdGNoVHlwZS5JTlNFUlQpIHtcbiAgICAgICAgICAgIHRoaXMucy5jdXJyZW50SW5zZXJ0QmF0Y2ggPSB0aGlzLnMuY3VycmVudEJhdGNoO1xuICAgICAgICAgICAgdGhpcy5zLmJ1bGtSZXN1bHQuaW5zZXJ0ZWRJZHMucHVzaCh7XG4gICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMucy5idWxrUmVzdWx0Lmluc2VydGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBfaWQ6IGRvY3VtZW50Ll9pZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYmF0Y2hUeXBlID09PSBjb21tb25fMS5CYXRjaFR5cGUuVVBEQVRFKSB7XG4gICAgICAgICAgICB0aGlzLnMuY3VycmVudFVwZGF0ZUJhdGNoID0gdGhpcy5zLmN1cnJlbnRCYXRjaDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChiYXRjaFR5cGUgPT09IGNvbW1vbl8xLkJhdGNoVHlwZS5ERUxFVEUpIHtcbiAgICAgICAgICAgIHRoaXMucy5jdXJyZW50UmVtb3ZlQmF0Y2ggPSB0aGlzLnMuY3VycmVudEJhdGNoO1xuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IGJhdGNoIHNpemVcbiAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaC5zaXplICs9IDE7XG4gICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2guc2l6ZUJ5dGVzICs9IG1heEtleVNpemUgKyBic29uU2l6ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuZXhwb3J0cy5Vbm9yZGVyZWRCdWxrT3BlcmF0aW9uID0gVW5vcmRlcmVkQnVsa09wZXJhdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVub3JkZXJlZC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJVbm9yZGVyZWRCdWxrT3BlcmF0aW9uIiwiQlNPTiIsInJlcXVpcmUiLCJlcnJvcl8xIiwiY29tbW9uXzEiLCJCdWxrT3BlcmF0aW9uQmFzZSIsImNvbnN0cnVjdG9yIiwiY29sbGVjdGlvbiIsIm9wdGlvbnMiLCJoYW5kbGVXcml0ZUVycm9yIiwiY2FsbGJhY2siLCJ3cml0ZVJlc3VsdCIsInMiLCJiYXRjaGVzIiwibGVuZ3RoIiwiYWRkVG9PcGVyYXRpb25zTGlzdCIsImJhdGNoVHlwZSIsImRvY3VtZW50IiwiYnNvblNpemUiLCJjYWxjdWxhdGVPYmplY3RTaXplIiwiY2hlY2tLZXlzIiwiaWdub3JlVW5kZWZpbmVkIiwibWF4QnNvbk9iamVjdFNpemUiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiY3VycmVudEJhdGNoIiwidW5kZWZpbmVkIiwiQmF0Y2hUeXBlIiwiSU5TRVJUIiwiY3VycmVudEluc2VydEJhdGNoIiwiVVBEQVRFIiwiY3VycmVudFVwZGF0ZUJhdGNoIiwiREVMRVRFIiwiY3VycmVudFJlbW92ZUJhdGNoIiwibWF4S2V5U2l6ZSIsIkJhdGNoIiwiY3VycmVudEluZGV4Iiwic2l6ZSIsIm1heFdyaXRlQmF0Y2hTaXplIiwic2l6ZUJ5dGVzIiwibWF4QmF0Y2hTaXplQnl0ZXMiLCJwdXNoIiwiQXJyYXkiLCJpc0FycmF5Iiwib3BlcmF0aW9ucyIsIm9yaWdpbmFsSW5kZXhlcyIsImJ1bGtSZXN1bHQiLCJpbnNlcnRlZElkcyIsImluZGV4IiwiX2lkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/bulk/unordered.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/change_stream.js":
/*!***************************************************!*\
  !*** ./node_modules/mongodb/lib/change_stream.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ChangeStream = void 0;\nconst collection_1 = __webpack_require__(/*! ./collection */ \"(ssr)/./node_modules/mongodb/lib/collection.js\");\nconst constants_1 = __webpack_require__(/*! ./constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst change_stream_cursor_1 = __webpack_require__(/*! ./cursor/change_stream_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/change_stream_cursor.js\");\nconst db_1 = __webpack_require__(/*! ./db */ \"(ssr)/./node_modules/mongodb/lib/db.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_client_1 = __webpack_require__(/*! ./mongo_client */ \"(ssr)/./node_modules/mongodb/lib/mongo_client.js\");\nconst mongo_types_1 = __webpack_require__(/*! ./mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\n/** @internal */ const kCursorStream = Symbol(\"cursorStream\");\n/** @internal */ const kClosed = Symbol(\"closed\");\n/** @internal */ const kMode = Symbol(\"mode\");\nconst CHANGE_STREAM_OPTIONS = [\n    \"resumeAfter\",\n    \"startAfter\",\n    \"startAtOperationTime\",\n    \"fullDocument\",\n    \"fullDocumentBeforeChange\",\n    \"showExpandedEvents\"\n];\nconst CHANGE_DOMAIN_TYPES = {\n    COLLECTION: Symbol(\"Collection\"),\n    DATABASE: Symbol(\"Database\"),\n    CLUSTER: Symbol(\"Cluster\")\n};\nconst CHANGE_STREAM_EVENTS = [\n    constants_1.RESUME_TOKEN_CHANGED,\n    constants_1.END,\n    constants_1.CLOSE\n];\nconst NO_RESUME_TOKEN_ERROR = \"A change stream document has been received that lacks a resume token (_id).\";\nconst CHANGESTREAM_CLOSED_ERROR = \"ChangeStream is closed\";\n/**\n * Creates a new Change Stream instance. Normally created using {@link Collection#watch|Collection.watch()}.\n * @public\n */ class ChangeStream extends mongo_types_1.TypedEventEmitter {\n    /**\n     * @internal\n     *\n     * @param parent - The parent object that created this change stream\n     * @param pipeline - An array of {@link https://www.mongodb.com/docs/manual/reference/operator/aggregation-pipeline/|aggregation pipeline stages} through which to pass change stream documents\n     */ constructor(parent, pipeline = [], options = {}){\n        super();\n        this.pipeline = pipeline;\n        this.options = {\n            ...options\n        };\n        delete this.options.writeConcern;\n        if (parent instanceof collection_1.Collection) {\n            this.type = CHANGE_DOMAIN_TYPES.COLLECTION;\n        } else if (parent instanceof db_1.Db) {\n            this.type = CHANGE_DOMAIN_TYPES.DATABASE;\n        } else if (parent instanceof mongo_client_1.MongoClient) {\n            this.type = CHANGE_DOMAIN_TYPES.CLUSTER;\n        } else {\n            throw new error_1.MongoChangeStreamError(\"Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient\");\n        }\n        this.parent = parent;\n        this.namespace = parent.s.namespace;\n        if (!this.options.readPreference && parent.readPreference) {\n            this.options.readPreference = parent.readPreference;\n        }\n        // Create contained Change Stream cursor\n        this.cursor = this._createChangeStreamCursor(options);\n        this[kClosed] = false;\n        this[kMode] = false;\n        // Listen for any `change` listeners being added to ChangeStream\n        this.on(\"newListener\", (eventName)=>{\n            if (eventName === \"change\" && this.cursor && this.listenerCount(\"change\") === 0) {\n                this._streamEvents(this.cursor);\n            }\n        });\n        this.on(\"removeListener\", (eventName)=>{\n            if (eventName === \"change\" && this.listenerCount(\"change\") === 0 && this.cursor) {\n                this[kCursorStream]?.removeAllListeners(\"data\");\n            }\n        });\n    }\n    /** @internal */ get cursorStream() {\n        return this[kCursorStream];\n    }\n    /** The cached resume token that is used to resume after the most recently returned change. */ get resumeToken() {\n        return this.cursor?.resumeToken;\n    }\n    /** Check if there is any document still available in the Change Stream */ async hasNext() {\n        this._setIsIterator();\n        // Change streams must resume indefinitely while each resume event succeeds.\n        // This loop continues until either a change event is received or until a resume attempt\n        // fails.\n        // eslint-disable-next-line no-constant-condition\n        while(true){\n            try {\n                const hasNext = await this.cursor.hasNext();\n                return hasNext;\n            } catch (error) {\n                try {\n                    await this._processErrorIteratorMode(error);\n                } catch (error) {\n                    try {\n                        await this.close();\n                    } catch  {\n                    // We are not concerned with errors from close()\n                    }\n                    throw error;\n                }\n            }\n        }\n    }\n    /** Get the next available document from the Change Stream. */ async next() {\n        this._setIsIterator();\n        // Change streams must resume indefinitely while each resume event succeeds.\n        // This loop continues until either a change event is received or until a resume attempt\n        // fails.\n        // eslint-disable-next-line no-constant-condition\n        while(true){\n            try {\n                const change = await this.cursor.next();\n                const processedChange = this._processChange(change ?? null);\n                return processedChange;\n            } catch (error) {\n                try {\n                    await this._processErrorIteratorMode(error);\n                } catch (error) {\n                    try {\n                        await this.close();\n                    } catch  {\n                    // We are not concerned with errors from close()\n                    }\n                    throw error;\n                }\n            }\n        }\n    }\n    /**\n     * Try to get the next available document from the Change Stream's cursor or `null` if an empty batch is returned\n     */ async tryNext() {\n        this._setIsIterator();\n        // Change streams must resume indefinitely while each resume event succeeds.\n        // This loop continues until either a change event is received or until a resume attempt\n        // fails.\n        // eslint-disable-next-line no-constant-condition\n        while(true){\n            try {\n                const change = await this.cursor.tryNext();\n                return change ?? null;\n            } catch (error) {\n                try {\n                    await this._processErrorIteratorMode(error);\n                } catch (error) {\n                    try {\n                        await this.close();\n                    } catch  {\n                    // We are not concerned with errors from close()\n                    }\n                    throw error;\n                }\n            }\n        }\n    }\n    async *[Symbol.asyncIterator]() {\n        if (this.closed) {\n            return;\n        }\n        try {\n            // Change streams run indefinitely as long as errors are resumable\n            // So the only loop breaking condition is if `next()` throws\n            while(true){\n                yield await this.next();\n            }\n        } finally{\n            try {\n                await this.close();\n            } catch  {\n            // we're not concerned with errors from close()\n            }\n        }\n    }\n    /** Is the cursor closed */ get closed() {\n        return this[kClosed] || this.cursor.closed;\n    }\n    /** Close the Change Stream */ async close() {\n        this[kClosed] = true;\n        const cursor = this.cursor;\n        try {\n            await cursor.close();\n        } finally{\n            this._endStream();\n        }\n    }\n    /**\n     * Return a modified Readable stream including a possible transform method.\n     *\n     * NOTE: When using a Stream to process change stream events, the stream will\n     * NOT automatically resume in the case a resumable error is encountered.\n     *\n     * @throws MongoChangeStreamError if the underlying cursor or the change stream is closed\n     */ stream(options) {\n        if (this.closed) {\n            throw new error_1.MongoChangeStreamError(CHANGESTREAM_CLOSED_ERROR);\n        }\n        this.streamOptions = options;\n        return this.cursor.stream(options);\n    }\n    /** @internal */ _setIsEmitter() {\n        if (this[kMode] === \"iterator\") {\n            // TODO(NODE-3485): Replace with MongoChangeStreamModeError\n            throw new error_1.MongoAPIError(\"ChangeStream cannot be used as an EventEmitter after being used as an iterator\");\n        }\n        this[kMode] = \"emitter\";\n    }\n    /** @internal */ _setIsIterator() {\n        if (this[kMode] === \"emitter\") {\n            // TODO(NODE-3485): Replace with MongoChangeStreamModeError\n            throw new error_1.MongoAPIError(\"ChangeStream cannot be used as an iterator after being used as an EventEmitter\");\n        }\n        this[kMode] = \"iterator\";\n    }\n    /**\n     * Create a new change stream cursor based on self's configuration\n     * @internal\n     */ _createChangeStreamCursor(options) {\n        const changeStreamStageOptions = (0, utils_1.filterOptions)(options, CHANGE_STREAM_OPTIONS);\n        if (this.type === CHANGE_DOMAIN_TYPES.CLUSTER) {\n            changeStreamStageOptions.allChangesForCluster = true;\n        }\n        const pipeline = [\n            {\n                $changeStream: changeStreamStageOptions\n            },\n            ...this.pipeline\n        ];\n        const client = this.type === CHANGE_DOMAIN_TYPES.CLUSTER ? this.parent : this.type === CHANGE_DOMAIN_TYPES.DATABASE ? this.parent.client : this.type === CHANGE_DOMAIN_TYPES.COLLECTION ? this.parent.client : null;\n        if (client == null) {\n            // This should never happen because of the assertion in the constructor\n            throw new error_1.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);\n        }\n        const changeStreamCursor = new change_stream_cursor_1.ChangeStreamCursor(client, this.namespace, pipeline, options);\n        for (const event of CHANGE_STREAM_EVENTS){\n            changeStreamCursor.on(event, (e)=>this.emit(event, e));\n        }\n        if (this.listenerCount(ChangeStream.CHANGE) > 0) {\n            this._streamEvents(changeStreamCursor);\n        }\n        return changeStreamCursor;\n    }\n    /** @internal */ _closeEmitterModeWithError(error) {\n        this.emit(ChangeStream.ERROR, error);\n        this.close().catch(()=>null);\n    }\n    /** @internal */ _streamEvents(cursor) {\n        this._setIsEmitter();\n        const stream = this[kCursorStream] ?? cursor.stream();\n        this[kCursorStream] = stream;\n        stream.on(\"data\", (change)=>{\n            try {\n                const processedChange = this._processChange(change);\n                this.emit(ChangeStream.CHANGE, processedChange);\n            } catch (error) {\n                this.emit(ChangeStream.ERROR, error);\n            }\n        });\n        stream.on(\"error\", (error)=>this._processErrorStreamMode(error));\n    }\n    /** @internal */ _endStream() {\n        const cursorStream = this[kCursorStream];\n        if (cursorStream) {\n            [\n                \"data\",\n                \"close\",\n                \"end\",\n                \"error\"\n            ].forEach((event)=>cursorStream.removeAllListeners(event));\n            cursorStream.destroy();\n        }\n        this[kCursorStream] = undefined;\n    }\n    /** @internal */ _processChange(change) {\n        if (this[kClosed]) {\n            // TODO(NODE-3485): Replace with MongoChangeStreamClosedError\n            throw new error_1.MongoAPIError(CHANGESTREAM_CLOSED_ERROR);\n        }\n        // a null change means the cursor has been notified, implicitly closing the change stream\n        if (change == null) {\n            // TODO(NODE-3485): Replace with MongoChangeStreamClosedError\n            throw new error_1.MongoRuntimeError(CHANGESTREAM_CLOSED_ERROR);\n        }\n        if (change && !change._id) {\n            throw new error_1.MongoChangeStreamError(NO_RESUME_TOKEN_ERROR);\n        }\n        // cache the resume token\n        this.cursor.cacheResumeToken(change._id);\n        // wipe the startAtOperationTime if there was one so that there won't be a conflict\n        // between resumeToken and startAtOperationTime if we need to reconnect the cursor\n        this.options.startAtOperationTime = undefined;\n        return change;\n    }\n    /** @internal */ _processErrorStreamMode(changeStreamError) {\n        // If the change stream has been closed explicitly, do not process error.\n        if (this[kClosed]) return;\n        if ((0, error_1.isResumableError)(changeStreamError, this.cursor.maxWireVersion)) {\n            this._endStream();\n            this.cursor.close().catch(()=>null);\n            const topology = (0, utils_1.getTopology)(this.parent);\n            topology.selectServer(this.cursor.readPreference, {}, (serverSelectionError)=>{\n                if (serverSelectionError) return this._closeEmitterModeWithError(changeStreamError);\n                this.cursor = this._createChangeStreamCursor(this.cursor.resumeOptions);\n            });\n        } else {\n            this._closeEmitterModeWithError(changeStreamError);\n        }\n    }\n    /** @internal */ async _processErrorIteratorMode(changeStreamError) {\n        if (this[kClosed]) {\n            // TODO(NODE-3485): Replace with MongoChangeStreamClosedError\n            throw new error_1.MongoAPIError(CHANGESTREAM_CLOSED_ERROR);\n        }\n        if (!(0, error_1.isResumableError)(changeStreamError, this.cursor.maxWireVersion)) {\n            try {\n                await this.close();\n            } catch  {\n            // ignore errors from close\n            }\n            throw changeStreamError;\n        }\n        await this.cursor.close().catch(()=>null);\n        const topology = (0, utils_1.getTopology)(this.parent);\n        try {\n            await topology.selectServerAsync(this.cursor.readPreference, {});\n            this.cursor = this._createChangeStreamCursor(this.cursor.resumeOptions);\n        } catch  {\n            // if the topology can't reconnect, close the stream\n            await this.close();\n            throw changeStreamError;\n        }\n    }\n}\n/** @event */ ChangeStream.RESPONSE = constants_1.RESPONSE;\n/** @event */ ChangeStream.MORE = constants_1.MORE;\n/** @event */ ChangeStream.INIT = constants_1.INIT;\n/** @event */ ChangeStream.CLOSE = constants_1.CLOSE;\n/**\n * Fired for each new matching change in the specified namespace. Attaching a `change`\n * event listener to a Change Stream will switch the stream into flowing mode. Data will\n * then be passed as soon as it is available.\n * @event\n */ ChangeStream.CHANGE = constants_1.CHANGE;\n/** @event */ ChangeStream.END = constants_1.END;\n/** @event */ ChangeStream.ERROR = constants_1.ERROR;\n/**\n * Emitted each time the change stream stores a new resume token.\n * @event\n */ ChangeStream.RESUME_TOKEN_CHANGED = constants_1.RESUME_TOKEN_CHANGED;\nexports.ChangeStream = ChangeStream; //# sourceMappingURL=change_stream.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2hhbmdlX3N0cmVhbS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsb0JBQW9CLEdBQUcsS0FBSztBQUM1QixNQUFNRyxlQUFlQyxtQkFBT0EsQ0FBQyxvRUFBYztBQUMzQyxNQUFNQyxjQUFjRCxtQkFBT0EsQ0FBQyxrRUFBYTtBQUN6QyxNQUFNRSx5QkFBeUJGLG1CQUFPQSxDQUFDLHNHQUErQjtBQUN0RSxNQUFNRyxPQUFPSCxtQkFBT0EsQ0FBQyxvREFBTTtBQUMzQixNQUFNSSxVQUFVSixtQkFBT0EsQ0FBQywwREFBUztBQUNqQyxNQUFNSyxpQkFBaUJMLG1CQUFPQSxDQUFDLHdFQUFnQjtBQUMvQyxNQUFNTSxnQkFBZ0JOLG1CQUFPQSxDQUFDLHNFQUFlO0FBQzdDLE1BQU1PLFVBQVVQLG1CQUFPQSxDQUFDLDBEQUFTO0FBQ2pDLGNBQWMsR0FDZCxNQUFNUSxnQkFBZ0JDLE9BQU87QUFDN0IsY0FBYyxHQUNkLE1BQU1DLFVBQVVELE9BQU87QUFDdkIsY0FBYyxHQUNkLE1BQU1FLFFBQVFGLE9BQU87QUFDckIsTUFBTUcsd0JBQXdCO0lBQzFCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNIO0FBQ0QsTUFBTUMsc0JBQXNCO0lBQ3hCQyxZQUFZTCxPQUFPO0lBQ25CTSxVQUFVTixPQUFPO0lBQ2pCTyxTQUFTUCxPQUFPO0FBQ3BCO0FBQ0EsTUFBTVEsdUJBQXVCO0lBQUNoQixZQUFZaUIsb0JBQW9CO0lBQUVqQixZQUFZa0IsR0FBRztJQUFFbEIsWUFBWW1CLEtBQUs7Q0FBQztBQUNuRyxNQUFNQyx3QkFBd0I7QUFDOUIsTUFBTUMsNEJBQTRCO0FBQ2xDOzs7Q0FHQyxHQUNELE1BQU14QixxQkFBcUJRLGNBQWNpQixpQkFBaUI7SUFDdEQ7Ozs7O0tBS0MsR0FDREMsWUFBWUMsTUFBTSxFQUFFQyxXQUFXLEVBQUUsRUFB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dEM7OztDQUdDLEdBQ0QvRSxhQUFhb0Isb0JBQW9CLEdBQUdqQixZQUFZaUIsb0JBQW9CO0FBQ3BFdEIsb0JBQW9CLEdBQUdFLGNBQ3ZCLHlDQUF5QyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jaGFuZ2Vfc3RyZWFtLmpzPzY2ZTciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNoYW5nZVN0cmVhbSA9IHZvaWQgMDtcbmNvbnN0IGNvbGxlY3Rpb25fMSA9IHJlcXVpcmUoXCIuL2NvbGxlY3Rpb25cIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbmNvbnN0IGNoYW5nZV9zdHJlYW1fY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9jdXJzb3IvY2hhbmdlX3N0cmVhbV9jdXJzb3JcIik7XG5jb25zdCBkYl8xID0gcmVxdWlyZShcIi4vZGJcIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4vZXJyb3JcIik7XG5jb25zdCBtb25nb19jbGllbnRfMSA9IHJlcXVpcmUoXCIuL21vbmdvX2NsaWVudFwiKTtcbmNvbnN0IG1vbmdvX3R5cGVzXzEgPSByZXF1aXJlKFwiLi9tb25nb190eXBlc1wiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi91dGlsc1wiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtDdXJzb3JTdHJlYW0gPSBTeW1ib2woJ2N1cnNvclN0cmVhbScpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0Nsb3NlZCA9IFN5bWJvbCgnY2xvc2VkJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrTW9kZSA9IFN5bWJvbCgnbW9kZScpO1xuY29uc3QgQ0hBTkdFX1NUUkVBTV9PUFRJT05TID0gW1xuICAgICdyZXN1bWVBZnRlcicsXG4gICAgJ3N0YXJ0QWZ0ZXInLFxuICAgICdzdGFydEF0T3BlcmF0aW9uVGltZScsXG4gICAgJ2Z1bGxEb2N1bWVudCcsXG4gICAgJ2Z1bGxEb2N1bWVudEJlZm9yZUNoYW5nZScsXG4gICAgJ3Nob3dFeHBhbmRlZEV2ZW50cydcbl07XG5jb25zdCBDSEFOR0VfRE9NQUlOX1RZUEVTID0ge1xuICAgIENPTExFQ1RJT046IFN5bWJvbCgnQ29sbGVjdGlvbicpLFxuICAgIERBVEFCQVNFOiBTeW1ib2woJ0RhdGFiYXNlJyksXG4gICAgQ0xVU1RFUjogU3ltYm9sKCdDbHVzdGVyJylcbn07XG5jb25zdCBDSEFOR0VfU1RSRUFNX0VWRU5UUyA9IFtjb25zdGFudHNfMS5SRVNVTUVfVE9LRU5fQ0hBTkdFRCwgY29uc3RhbnRzXzEuRU5ELCBjb25zdGFudHNfMS5DTE9TRV07XG5jb25zdCBOT19SRVNVTUVfVE9LRU5fRVJST1IgPSAnQSBjaGFuZ2Ugc3RyZWFtIGRvY3VtZW50IGhhcyBiZWVuIHJlY2VpdmVkIHRoYXQgbGFja3MgYSByZXN1bWUgdG9rZW4gKF9pZCkuJztcbmNvbnN0IENIQU5HRVNUUkVBTV9DTE9TRURfRVJST1IgPSAnQ2hhbmdlU3RyZWFtIGlzIGNsb3NlZCc7XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgQ2hhbmdlIFN0cmVhbSBpbnN0YW5jZS4gTm9ybWFsbHkgY3JlYXRlZCB1c2luZyB7QGxpbmsgQ29sbGVjdGlvbiN3YXRjaHxDb2xsZWN0aW9uLndhdGNoKCl9LlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBDaGFuZ2VTdHJlYW0gZXh0ZW5kcyBtb25nb190eXBlc18xLlR5cGVkRXZlbnRFbWl0dGVyIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IG9iamVjdCB0aGF0IGNyZWF0ZWQgdGhpcyBjaGFuZ2Ugc3RyZWFtXG4gICAgICogQHBhcmFtIHBpcGVsaW5lIC0gQW4gYXJyYXkgb2Yge0BsaW5rIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9vcGVyYXRvci9hZ2dyZWdhdGlvbi1waXBlbGluZS98YWdncmVnYXRpb24gcGlwZWxpbmUgc3RhZ2VzfSB0aHJvdWdoIHdoaWNoIHRvIHBhc3MgY2hhbmdlIHN0cmVhbSBkb2N1bWVudHNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIHBpcGVsaW5lID0gW10sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnBpcGVsaW5lID0gcGlwZWxpbmU7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHsgLi4ub3B0aW9ucyB9O1xuICAgICAgICBkZWxldGUgdGhpcy5vcHRpb25zLndyaXRlQ29uY2VybjtcbiAgICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIGNvbGxlY3Rpb25fMS5Db2xsZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnR5cGUgPSBDSEFOR0VfRE9NQUlOX1RZUEVTLkNPTExFQ1RJT047XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyZW50IGluc3RhbmNlb2YgZGJfMS5EYikge1xuICAgICAgICAgICAgdGhpcy50eXBlID0gQ0hBTkdFX0RPTUFJTl9UWVBFUy5EQVRBQkFTRTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBtb25nb19jbGllbnRfMS5Nb25nb0NsaWVudCkge1xuICAgICAgICAgICAgdGhpcy50eXBlID0gQ0hBTkdFX0RPTUFJTl9UWVBFUy5DTFVTVEVSO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29DaGFuZ2VTdHJlYW1FcnJvcignUGFyZW50IHByb3ZpZGVkIHRvIENoYW5nZVN0cmVhbSBjb25zdHJ1Y3RvciBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIENvbGxlY3Rpb24sIERiLCBvciBNb25nb0NsaWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLm5hbWVzcGFjZSA9IHBhcmVudC5zLm5hbWVzcGFjZTtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMucmVhZFByZWZlcmVuY2UgJiYgcGFyZW50LnJlYWRQcmVmZXJlbmNlKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMucmVhZFByZWZlcmVuY2UgPSBwYXJlbnQucmVhZFByZWZlcmVuY2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ3JlYXRlIGNvbnRhaW5lZCBDaGFuZ2UgU3RyZWFtIGN1cnNvclxuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuX2NyZWF0ZUNoYW5nZVN0cmVhbUN1cnNvcihvcHRpb25zKTtcbiAgICAgICAgdGhpc1trQ2xvc2VkXSA9IGZhbHNlO1xuICAgICAgICB0aGlzW2tNb2RlXSA9IGZhbHNlO1xuICAgICAgICAvLyBMaXN0ZW4gZm9yIGFueSBgY2hhbmdlYCBsaXN0ZW5lcnMgYmVpbmcgYWRkZWQgdG8gQ2hhbmdlU3RyZWFtXG4gICAgICAgIHRoaXMub24oJ25ld0xpc3RlbmVyJywgZXZlbnROYW1lID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudE5hbWUgPT09ICdjaGFuZ2UnICYmIHRoaXMuY3Vyc29yICYmIHRoaXMubGlzdGVuZXJDb3VudCgnY2hhbmdlJykgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdHJlYW1FdmVudHModGhpcy5jdXJzb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vbigncmVtb3ZlTGlzdGVuZXInLCBldmVudE5hbWUgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gJ2NoYW5nZScgJiYgdGhpcy5saXN0ZW5lckNvdW50KCdjaGFuZ2UnKSA9PT0gMCAmJiB0aGlzLmN1cnNvcikge1xuICAgICAgICAgICAgICAgIHRoaXNba0N1cnNvclN0cmVhbV0/LnJlbW92ZUFsbExpc3RlbmVycygnZGF0YScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGdldCBjdXJzb3JTdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tDdXJzb3JTdHJlYW1dO1xuICAgIH1cbiAgICAvKiogVGhlIGNhY2hlZCByZXN1bWUgdG9rZW4gdGhhdCBpcyB1c2VkIHRvIHJlc3VtZSBhZnRlciB0aGUgbW9zdCByZWNlbnRseSByZXR1cm5lZCBjaGFuZ2UuICovXG4gICAgZ2V0IHJlc3VtZVRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJzb3I/LnJlc3VtZVRva2VuO1xuICAgIH1cbiAgICAvKiogQ2hlY2sgaWYgdGhlcmUgaXMgYW55IGRvY3VtZW50IHN0aWxsIGF2YWlsYWJsZSBpbiB0aGUgQ2hhbmdlIFN0cmVhbSAqL1xuICAgIGFzeW5jIGhhc05leHQoKSB7XG4gICAgICAgIHRoaXMuX3NldElzSXRlcmF0b3IoKTtcbiAgICAgICAgLy8gQ2hhbmdlIHN0cmVhbXMgbXVzdCByZXN1bWUgaW5kZWZpbml0ZWx5IHdoaWxlIGVhY2ggcmVzdW1lIGV2ZW50IHN1Y2NlZWRzLlxuICAgICAgICAvLyBUaGlzIGxvb3AgY29udGludWVzIHVudGlsIGVpdGhlciBhIGNoYW5nZSBldmVudCBpcyByZWNlaXZlZCBvciB1bnRpbCBhIHJlc3VtZSBhdHRlbXB0XG4gICAgICAgIC8vIGZhaWxzLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhc05leHQgPSBhd2FpdCB0aGlzLmN1cnNvci5oYXNOZXh0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhc05leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9wcm9jZXNzRXJyb3JJdGVyYXRvck1vZGUoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBhcmUgbm90IGNvbmNlcm5lZCB3aXRoIGVycm9ycyBmcm9tIGNsb3NlKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEdldCB0aGUgbmV4dCBhdmFpbGFibGUgZG9jdW1lbnQgZnJvbSB0aGUgQ2hhbmdlIFN0cmVhbS4gKi9cbiAgICBhc3luYyBuZXh0KCkge1xuICAgICAgICB0aGlzLl9zZXRJc0l0ZXJhdG9yKCk7XG4gICAgICAgIC8vIENoYW5nZSBzdHJlYW1zIG11c3QgcmVzdW1lIGluZGVmaW5pdGVseSB3aGlsZSBlYWNoIHJlc3VtZSBldmVudCBzdWNjZWVkcy5cbiAgICAgICAgLy8gVGhpcyBsb29wIGNvbnRpbnVlcyB1bnRpbCBlaXRoZXIgYSBjaGFuZ2UgZXZlbnQgaXMgcmVjZWl2ZWQgb3IgdW50aWwgYSByZXN1bWUgYXR0ZW1wdFxuICAgICAgICAvLyBmYWlscy5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0YW50LWNvbmRpdGlvblxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFuZ2UgPSBhd2FpdCB0aGlzLmN1cnNvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkQ2hhbmdlID0gdGhpcy5fcHJvY2Vzc0NoYW5nZShjaGFuZ2UgPz8gbnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3NlZENoYW5nZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3Byb2Nlc3NFcnJvckl0ZXJhdG9yTW9kZShlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGFyZSBub3QgY29uY2VybmVkIHdpdGggZXJyb3JzIGZyb20gY2xvc2UoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcnkgdG8gZ2V0IHRoZSBuZXh0IGF2YWlsYWJsZSBkb2N1bWVudCBmcm9tIHRoZSBDaGFuZ2UgU3RyZWFtJ3MgY3Vyc29yIG9yIGBudWxsYCBpZiBhbiBlbXB0eSBiYXRjaCBpcyByZXR1cm5lZFxuICAgICAqL1xuICAgIGFzeW5jIHRyeU5leHQoKSB7XG4gICAgICAgIHRoaXMuX3NldElzSXRlcmF0b3IoKTtcbiAgICAgICAgLy8gQ2hhbmdlIHN0cmVhbXMgbXVzdCByZXN1bWUgaW5kZWZpbml0ZWx5IHdoaWxlIGVhY2ggcmVzdW1lIGV2ZW50IHN1Y2NlZWRzLlxuICAgICAgICAvLyBUaGlzIGxvb3AgY29udGludWVzIHVudGlsIGVpdGhlciBhIGNoYW5nZSBldmVudCBpcyByZWNlaXZlZCBvciB1bnRpbCBhIHJlc3VtZSBhdHRlbXB0XG4gICAgICAgIC8vIGZhaWxzLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5nZSA9IGF3YWl0IHRoaXMuY3Vyc29yLnRyeU5leHQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhbmdlID8/IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9wcm9jZXNzRXJyb3JJdGVyYXRvck1vZGUoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBhcmUgbm90IGNvbmNlcm5lZCB3aXRoIGVycm9ycyBmcm9tIGNsb3NlKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgKltTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBDaGFuZ2Ugc3RyZWFtcyBydW4gaW5kZWZpbml0ZWx5IGFzIGxvbmcgYXMgZXJyb3JzIGFyZSByZXN1bWFibGVcbiAgICAgICAgICAgIC8vIFNvIHRoZSBvbmx5IGxvb3AgYnJlYWtpbmcgY29uZGl0aW9uIGlzIGlmIGBuZXh0KClgIHRocm93c1xuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBhd2FpdCB0aGlzLm5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIG5vdCBjb25jZXJuZWQgd2l0aCBlcnJvcnMgZnJvbSBjbG9zZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIElzIHRoZSBjdXJzb3IgY2xvc2VkICovXG4gICAgZ2V0IGNsb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba0Nsb3NlZF0gfHwgdGhpcy5jdXJzb3IuY2xvc2VkO1xuICAgIH1cbiAgICAvKiogQ2xvc2UgdGhlIENoYW5nZSBTdHJlYW0gKi9cbiAgICBhc3luYyBjbG9zZSgpIHtcbiAgICAgICAgdGhpc1trQ2xvc2VkXSA9IHRydWU7XG4gICAgICAgIGNvbnN0IGN1cnNvciA9IHRoaXMuY3Vyc29yO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgY3Vyc29yLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLl9lbmRTdHJlYW0oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBtb2RpZmllZCBSZWFkYWJsZSBzdHJlYW0gaW5jbHVkaW5nIGEgcG9zc2libGUgdHJhbnNmb3JtIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIE5PVEU6IFdoZW4gdXNpbmcgYSBTdHJlYW0gdG8gcHJvY2VzcyBjaGFuZ2Ugc3RyZWFtIGV2ZW50cywgdGhlIHN0cmVhbSB3aWxsXG4gICAgICogTk9UIGF1dG9tYXRpY2FsbHkgcmVzdW1lIGluIHRoZSBjYXNlIGEgcmVzdW1hYmxlIGVycm9yIGlzIGVuY291bnRlcmVkLlxuICAgICAqXG4gICAgICogQHRocm93cyBNb25nb0NoYW5nZVN0cmVhbUVycm9yIGlmIHRoZSB1bmRlcmx5aW5nIGN1cnNvciBvciB0aGUgY2hhbmdlIHN0cmVhbSBpcyBjbG9zZWRcbiAgICAgKi9cbiAgICBzdHJlYW0ob3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQ2hhbmdlU3RyZWFtRXJyb3IoQ0hBTkdFU1RSRUFNX0NMT1NFRF9FUlJPUik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdHJlYW1PcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgcmV0dXJuIHRoaXMuY3Vyc29yLnN0cmVhbShvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9zZXRJc0VtaXR0ZXIoKSB7XG4gICAgICAgIGlmICh0aGlzW2tNb2RlXSA9PT0gJ2l0ZXJhdG9yJykge1xuICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODUpOiBSZXBsYWNlIHdpdGggTW9uZ29DaGFuZ2VTdHJlYW1Nb2RlRXJyb3JcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoJ0NoYW5nZVN0cmVhbSBjYW5ub3QgYmUgdXNlZCBhcyBhbiBFdmVudEVtaXR0ZXIgYWZ0ZXIgYmVpbmcgdXNlZCBhcyBhbiBpdGVyYXRvcicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNba01vZGVdID0gJ2VtaXR0ZXInO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX3NldElzSXRlcmF0b3IoKSB7XG4gICAgICAgIGlmICh0aGlzW2tNb2RlXSA9PT0gJ2VtaXR0ZXInKSB7XG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4NSk6IFJlcGxhY2Ugd2l0aCBNb25nb0NoYW5nZVN0cmVhbU1vZGVFcnJvclxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignQ2hhbmdlU3RyZWFtIGNhbm5vdCBiZSB1c2VkIGFzIGFuIGl0ZXJhdG9yIGFmdGVyIGJlaW5nIHVzZWQgYXMgYW4gRXZlbnRFbWl0dGVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trTW9kZV0gPSAnaXRlcmF0b3InO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgY2hhbmdlIHN0cmVhbSBjdXJzb3IgYmFzZWQgb24gc2VsZidzIGNvbmZpZ3VyYXRpb25cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfY3JlYXRlQ2hhbmdlU3RyZWFtQ3Vyc29yKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY2hhbmdlU3RyZWFtU3RhZ2VPcHRpb25zID0gKDAsIHV0aWxzXzEuZmlsdGVyT3B0aW9ucykob3B0aW9ucywgQ0hBTkdFX1NUUkVBTV9PUFRJT05TKTtcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gQ0hBTkdFX0RPTUFJTl9UWVBFUy5DTFVTVEVSKSB7XG4gICAgICAgICAgICBjaGFuZ2VTdHJlYW1TdGFnZU9wdGlvbnMuYWxsQ2hhbmdlc0ZvckNsdXN0ZXIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBpcGVsaW5lID0gW3sgJGNoYW5nZVN0cmVhbTogY2hhbmdlU3RyZWFtU3RhZ2VPcHRpb25zIH0sIC4uLnRoaXMucGlwZWxpbmVdO1xuICAgICAgICBjb25zdCBjbGllbnQgPSB0aGlzLnR5cGUgPT09IENIQU5HRV9ET01BSU5fVFlQRVMuQ0xVU1RFUlxuICAgICAgICAgICAgPyB0aGlzLnBhcmVudFxuICAgICAgICAgICAgOiB0aGlzLnR5cGUgPT09IENIQU5HRV9ET01BSU5fVFlQRVMuREFUQUJBU0VcbiAgICAgICAgICAgICAgICA/IHRoaXMucGFyZW50LmNsaWVudFxuICAgICAgICAgICAgICAgIDogdGhpcy50eXBlID09PSBDSEFOR0VfRE9NQUlOX1RZUEVTLkNPTExFQ1RJT05cbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnBhcmVudC5jbGllbnRcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICBpZiAoY2xpZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbiBiZWNhdXNlIG9mIHRoZSBhc3NlcnRpb24gaW4gdGhlIGNvbnN0cnVjdG9yXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcihgQ2hhbmdlc3RyZWFtIHR5cGUgc2hvdWxkIG9ubHkgYmUgb25lIG9mIGNsdXN0ZXIsIGRhdGFiYXNlLCBjb2xsZWN0aW9uLiBGb3VuZCAke3RoaXMudHlwZS50b1N0cmluZygpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoYW5nZVN0cmVhbUN1cnNvciA9IG5ldyBjaGFuZ2Vfc3RyZWFtX2N1cnNvcl8xLkNoYW5nZVN0cmVhbUN1cnNvcihjbGllbnQsIHRoaXMubmFtZXNwYWNlLCBwaXBlbGluZSwgb3B0aW9ucyk7XG4gICAgICAgIGZvciAoY29uc3QgZXZlbnQgb2YgQ0hBTkdFX1NUUkVBTV9FVkVOVFMpIHtcbiAgICAgICAgICAgIGNoYW5nZVN0cmVhbUN1cnNvci5vbihldmVudCwgZSA9PiB0aGlzLmVtaXQoZXZlbnQsIGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5saXN0ZW5lckNvdW50KENoYW5nZVN0cmVhbS5DSEFOR0UpID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fc3RyZWFtRXZlbnRzKGNoYW5nZVN0cmVhbUN1cnNvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYW5nZVN0cmVhbUN1cnNvcjtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9jbG9zZUVtaXR0ZXJNb2RlV2l0aEVycm9yKGVycm9yKSB7XG4gICAgICAgIHRoaXMuZW1pdChDaGFuZ2VTdHJlYW0uRVJST1IsIGVycm9yKTtcbiAgICAgICAgdGhpcy5jbG9zZSgpLmNhdGNoKCgpID0+IG51bGwpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX3N0cmVhbUV2ZW50cyhjdXJzb3IpIHtcbiAgICAgICAgdGhpcy5fc2V0SXNFbWl0dGVyKCk7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXNba0N1cnNvclN0cmVhbV0gPz8gY3Vyc29yLnN0cmVhbSgpO1xuICAgICAgICB0aGlzW2tDdXJzb3JTdHJlYW1dID0gc3RyZWFtO1xuICAgICAgICBzdHJlYW0ub24oJ2RhdGEnLCBjaGFuZ2UgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRDaGFuZ2UgPSB0aGlzLl9wcm9jZXNzQ2hhbmdlKGNoYW5nZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KENoYW5nZVN0cmVhbS5DSEFOR0UsIHByb2Nlc3NlZENoYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoQ2hhbmdlU3RyZWFtLkVSUk9SLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzdHJlYW0ub24oJ2Vycm9yJywgZXJyb3IgPT4gdGhpcy5fcHJvY2Vzc0Vycm9yU3RyZWFtTW9kZShlcnJvcikpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX2VuZFN0cmVhbSgpIHtcbiAgICAgICAgY29uc3QgY3Vyc29yU3RyZWFtID0gdGhpc1trQ3Vyc29yU3RyZWFtXTtcbiAgICAgICAgaWYgKGN1cnNvclN0cmVhbSkge1xuICAgICAgICAgICAgWydkYXRhJywgJ2Nsb3NlJywgJ2VuZCcsICdlcnJvciddLmZvckVhY2goZXZlbnQgPT4gY3Vyc29yU3RyZWFtLnJlbW92ZUFsbExpc3RlbmVycyhldmVudCkpO1xuICAgICAgICAgICAgY3Vyc29yU3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tDdXJzb3JTdHJlYW1dID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX3Byb2Nlc3NDaGFuZ2UoY2hhbmdlKSB7XG4gICAgICAgIGlmICh0aGlzW2tDbG9zZWRdKSB7XG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4NSk6IFJlcGxhY2Ugd2l0aCBNb25nb0NoYW5nZVN0cmVhbUNsb3NlZEVycm9yXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKENIQU5HRVNUUkVBTV9DTE9TRURfRVJST1IpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGEgbnVsbCBjaGFuZ2UgbWVhbnMgdGhlIGN1cnNvciBoYXMgYmVlbiBub3RpZmllZCwgaW1wbGljaXRseSBjbG9zaW5nIHRoZSBjaGFuZ2Ugc3RyZWFtXG4gICAgICAgIGlmIChjaGFuZ2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODUpOiBSZXBsYWNlIHdpdGggTW9uZ29DaGFuZ2VTdHJlYW1DbG9zZWRFcnJvclxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoQ0hBTkdFU1RSRUFNX0NMT1NFRF9FUlJPUik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5nZSAmJiAhY2hhbmdlLl9pZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29DaGFuZ2VTdHJlYW1FcnJvcihOT19SRVNVTUVfVE9LRU5fRVJST1IpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNhY2hlIHRoZSByZXN1bWUgdG9rZW5cbiAgICAgICAgdGhpcy5jdXJzb3IuY2FjaGVSZXN1bWVUb2tlbihjaGFuZ2UuX2lkKTtcbiAgICAgICAgLy8gd2lwZSB0aGUgc3RhcnRBdE9wZXJhdGlvblRpbWUgaWYgdGhlcmUgd2FzIG9uZSBzbyB0aGF0IHRoZXJlIHdvbid0IGJlIGEgY29uZmxpY3RcbiAgICAgICAgLy8gYmV0d2VlbiByZXN1bWVUb2tlbiBhbmQgc3RhcnRBdE9wZXJhdGlvblRpbWUgaWYgd2UgbmVlZCB0byByZWNvbm5lY3QgdGhlIGN1cnNvclxuICAgICAgICB0aGlzLm9wdGlvbnMuc3RhcnRBdE9wZXJhdGlvblRpbWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBjaGFuZ2U7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfcHJvY2Vzc0Vycm9yU3RyZWFtTW9kZShjaGFuZ2VTdHJlYW1FcnJvcikge1xuICAgICAgICAvLyBJZiB0aGUgY2hhbmdlIHN0cmVhbSBoYXMgYmVlbiBjbG9zZWQgZXhwbGljaXRseSwgZG8gbm90IHByb2Nlc3MgZXJyb3IuXG4gICAgICAgIGlmICh0aGlzW2tDbG9zZWRdKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoKDAsIGVycm9yXzEuaXNSZXN1bWFibGVFcnJvcikoY2hhbmdlU3RyZWFtRXJyb3IsIHRoaXMuY3Vyc29yLm1heFdpcmVWZXJzaW9uKSkge1xuICAgICAgICAgICAgdGhpcy5fZW5kU3RyZWFtKCk7XG4gICAgICAgICAgICB0aGlzLmN1cnNvci5jbG9zZSgpLmNhdGNoKCgpID0+IG51bGwpO1xuICAgICAgICAgICAgY29uc3QgdG9wb2xvZ3kgPSAoMCwgdXRpbHNfMS5nZXRUb3BvbG9neSkodGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdG9wb2xvZ3kuc2VsZWN0U2VydmVyKHRoaXMuY3Vyc29yLnJlYWRQcmVmZXJlbmNlLCB7fSwgc2VydmVyU2VsZWN0aW9uRXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXJTZWxlY3Rpb25FcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Nsb3NlRW1pdHRlck1vZGVXaXRoRXJyb3IoY2hhbmdlU3RyZWFtRXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5fY3JlYXRlQ2hhbmdlU3RyZWFtQ3Vyc29yKHRoaXMuY3Vyc29yLnJlc3VtZU9wdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9jbG9zZUVtaXR0ZXJNb2RlV2l0aEVycm9yKGNoYW5nZVN0cmVhbUVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgYXN5bmMgX3Byb2Nlc3NFcnJvckl0ZXJhdG9yTW9kZShjaGFuZ2VTdHJlYW1FcnJvcikge1xuICAgICAgICBpZiAodGhpc1trQ2xvc2VkXSkge1xuICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODUpOiBSZXBsYWNlIHdpdGggTW9uZ29DaGFuZ2VTdHJlYW1DbG9zZWRFcnJvclxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcihDSEFOR0VTVFJFQU1fQ0xPU0VEX0VSUk9SKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISgwLCBlcnJvcl8xLmlzUmVzdW1hYmxlRXJyb3IpKGNoYW5nZVN0cmVhbUVycm9yLCB0aGlzLmN1cnNvci5tYXhXaXJlVmVyc2lvbikpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgZnJvbSBjbG9zZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgY2hhbmdlU3RyZWFtRXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5jdXJzb3IuY2xvc2UoKS5jYXRjaCgoKSA9PiBudWxsKTtcbiAgICAgICAgY29uc3QgdG9wb2xvZ3kgPSAoMCwgdXRpbHNfMS5nZXRUb3BvbG9neSkodGhpcy5wYXJlbnQpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdG9wb2xvZ3kuc2VsZWN0U2VydmVyQXN5bmModGhpcy5jdXJzb3IucmVhZFByZWZlcmVuY2UsIHt9KTtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5fY3JlYXRlQ2hhbmdlU3RyZWFtQ3Vyc29yKHRoaXMuY3Vyc29yLnJlc3VtZU9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIC8vIGlmIHRoZSB0b3BvbG9neSBjYW4ndCByZWNvbm5lY3QsIGNsb3NlIHRoZSBzdHJlYW1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIHRocm93IGNoYW5nZVN0cmVhbUVycm9yO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqIEBldmVudCAqL1xuQ2hhbmdlU3RyZWFtLlJFU1BPTlNFID0gY29uc3RhbnRzXzEuUkVTUE9OU0U7XG4vKiogQGV2ZW50ICovXG5DaGFuZ2VTdHJlYW0uTU9SRSA9IGNvbnN0YW50c18xLk1PUkU7XG4vKiogQGV2ZW50ICovXG5DaGFuZ2VTdHJlYW0uSU5JVCA9IGNvbnN0YW50c18xLklOSVQ7XG4vKiogQGV2ZW50ICovXG5DaGFuZ2VTdHJlYW0uQ0xPU0UgPSBjb25zdGFudHNfMS5DTE9TRTtcbi8qKlxuICogRmlyZWQgZm9yIGVhY2ggbmV3IG1hdGNoaW5nIGNoYW5nZSBpbiB0aGUgc3BlY2lmaWVkIG5hbWVzcGFjZS4gQXR0YWNoaW5nIGEgYGNoYW5nZWBcbiAqIGV2ZW50IGxpc3RlbmVyIHRvIGEgQ2hhbmdlIFN0cmVhbSB3aWxsIHN3aXRjaCB0aGUgc3RyZWFtIGludG8gZmxvd2luZyBtb2RlLiBEYXRhIHdpbGxcbiAqIHRoZW4gYmUgcGFzc2VkIGFzIHNvb24gYXMgaXQgaXMgYXZhaWxhYmxlLlxuICogQGV2ZW50XG4gKi9cbkNoYW5nZVN0cmVhbS5DSEFOR0UgPSBjb25zdGFudHNfMS5DSEFOR0U7XG4vKiogQGV2ZW50ICovXG5DaGFuZ2VTdHJlYW0uRU5EID0gY29uc3RhbnRzXzEuRU5EO1xuLyoqIEBldmVudCAqL1xuQ2hhbmdlU3RyZWFtLkVSUk9SID0gY29uc3RhbnRzXzEuRVJST1I7XG4vKipcbiAqIEVtaXR0ZWQgZWFjaCB0aW1lIHRoZSBjaGFuZ2Ugc3RyZWFtIHN0b3JlcyBhIG5ldyByZXN1bWUgdG9rZW4uXG4gKiBAZXZlbnRcbiAqL1xuQ2hhbmdlU3RyZWFtLlJFU1VNRV9UT0tFTl9DSEFOR0VEID0gY29uc3RhbnRzXzEuUkVTVU1FX1RPS0VOX0NIQU5HRUQ7XG5leHBvcnRzLkNoYW5nZVN0cmVhbSA9IENoYW5nZVN0cmVhbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNoYW5nZV9zdHJlYW0uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ2hhbmdlU3RyZWFtIiwiY29sbGVjdGlvbl8xIiwicmVxdWlyZSIsImNvbnN0YW50c18xIiwiY2hhbmdlX3N0cmVhbV9jdXJzb3JfMSIsImRiXzEiLCJlcnJvcl8xIiwibW9uZ29fY2xpZW50XzEiLCJtb25nb190eXBlc18xIiwidXRpbHNfMSIsImtDdXJzb3JTdHJlYW0iLCJTeW1ib2wiLCJrQ2xvc2VkIiwia01vZGUiLCJDSEFOR0VfU1RSRUFNX09QVElPTlMiLCJDSEFOR0VfRE9NQUlOX1RZUEVTIiwiQ09MTEVDVElPTiIsIkRBVEFCQVNFIiwiQ0xVU1RFUiIsIkNIQU5HRV9TVFJFQU1fRVZFTlRTIiwiUkVTVU1FX1RPS0VOX0NIQU5HRUQiLCJFTkQiLCJDTE9TRSIsIk5PX1JFU1VNRV9UT0tFTl9FUlJPUiIsIkNIQU5HRVNUUkVBTV9DTE9TRURfRVJST1IiLCJUeXBlZEV2ZW50RW1pdHRlciIsImNvbnN0cnVjdG9yIiwicGFyZW50IiwicGlwZWxpbmUiLCJvcHRpb25zIiwid3JpdGVDb25jZXJuIiwiQ29sbGVjdGlvbiIsInR5cGUiLCJEYiIsIk1vbmdvQ2xpZW50IiwiTW9uZ29DaGFuZ2VTdHJlYW1FcnJvciIsIm5hbWVzcGFjZSIsInMiLCJyZWFkUHJlZmVyZW5jZSIsImN1cnNvciIsIl9jcmVhdGVDaGFuZ2VTdHJlYW1DdXJzb3IiLCJvbiIsImV2ZW50TmFtZSIsImxpc3RlbmVyQ291bnQiLCJfc3RyZWFtRXZlbnRzIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiY3Vyc29yU3RyZWFtIiwicmVzdW1lVG9rZW4iLCJoYXNOZXh0IiwiX3NldElzSXRlcmF0b3IiLCJlcnJvciIsIl9wcm9jZXNzRXJyb3JJdGVyYXRvck1vZGUiLCJjbG9zZSIsIm5leHQiLCJjaGFuZ2UiLCJwcm9jZXNzZWRDaGFuZ2UiLCJfcHJvY2Vzc0NoYW5nZSIsInRyeU5leHQiLCJhc3luY0l0ZXJhdG9yIiwiY2xvc2VkIiwiX2VuZFN0cmVhbSIsInN0cmVhbSIsInN0cmVhbU9wdGlvbnMiLCJfc2V0SXNFbWl0dGVyIiwiTW9uZ29BUElFcnJvciIsImNoYW5nZVN0cmVhbVN0YWdlT3B0aW9ucyIsImZpbHRlck9wdGlvbnMiLCJhbGxDaGFuZ2VzRm9yQ2x1c3RlciIsIiRjaGFuZ2VTdHJlYW0iLCJjbGllbnQiLCJNb25nb1J1bnRpbWVFcnJvciIsInRvU3RyaW5nIiwiY2hhbmdlU3RyZWFtQ3Vyc29yIiwiQ2hhbmdlU3RyZWFtQ3Vyc29yIiwiZXZlbnQiLCJlIiwiZW1pdCIsIkNIQU5HRSIsIl9jbG9zZUVtaXR0ZXJNb2RlV2l0aEVycm9yIiwiRVJST1IiLCJjYXRjaCIsIl9wcm9jZXNzRXJyb3JTdHJlYW1Nb2RlIiwiZm9yRWFjaCIsImRlc3Ryb3kiLCJ1bmRlZmluZWQiLCJfaWQiLCJjYWNoZVJlc3VtZVRva2VuIiwic3RhcnRBdE9wZXJhdGlvblRpbWUiLCJjaGFuZ2VTdHJlYW1FcnJvciIsImlzUmVzdW1hYmxlRXJyb3IiLCJtYXhXaXJlVmVyc2lvbiIsInRvcG9sb2d5IiwiZ2V0VG9wb2xvZ3kiLCJzZWxlY3RTZXJ2ZXIiLCJzZXJ2ZXJTZWxlY3Rpb25FcnJvciIsInJlc3VtZU9wdGlvbnMiLCJzZWxlY3RTZXJ2ZXJBc3luYyIsIlJFU1BPTlNFIiwiTU9SRSIsIklOSVQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/change_stream.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js":
/*!*************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/auth_provider.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AuthProvider = exports.AuthContext = void 0;\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/**\n * Context used during authentication\n * @internal\n */ class AuthContext {\n    constructor(connection, credentials, options){\n        /** If the context is for reauthentication. */ this.reauthenticating = false;\n        this.connection = connection;\n        this.credentials = credentials;\n        this.options = options;\n    }\n}\nexports.AuthContext = AuthContext;\nclass AuthProvider {\n    /**\n     * Prepare the handshake document before the initial handshake.\n     *\n     * @param handshakeDoc - The document used for the initial handshake on a connection\n     * @param authContext - Context for authentication flow\n     */ async prepare(handshakeDoc, _authContext) {\n        return handshakeDoc;\n    }\n    /**\n     * Reauthenticate.\n     * @param context - The shared auth context.\n     */ async reauth(context) {\n        if (context.reauthenticating) {\n            throw new error_1.MongoRuntimeError(\"Reauthentication already in progress.\");\n        }\n        try {\n            context.reauthenticating = true;\n            await this.auth(context);\n        } finally{\n            context.reauthenticating = false;\n        }\n    }\n}\nexports.AuthProvider = AuthProvider; //# sourceMappingURL=auth_provider.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL2F1dGhfcHJvdmlkZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG9CQUFvQixHQUFHQSxtQkFBbUIsR0FBRyxLQUFLO0FBQ2xELE1BQU1JLFVBQVVDLG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDOzs7Q0FHQyxHQUNELE1BQU1GO0lBQ0ZHLFlBQVlDLFVBQVUsRUFBRUMsV0FBVyxFQUFFQyxPQUFPLENBQUU7UUFDMUMsNENBQTRDLEdBQzVDLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUc7UUFDeEIsSUFBSSxDQUFDSCxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsV0FBVyxHQUFHQTtRQUNuQixJQUFJLENBQUNDLE9BQU8sR0FBR0E7SUFDbkI7QUFDSjtBQUNBVCxtQkFBbUIsR0FBR0c7QUFDdEIsTUFBTUQ7SUFDRjs7Ozs7S0FLQyxHQUNELE1BQU1TLFFBQVFDLFlBQVksRUFBRUMsWUFBWSxFQUFFO1FBQ3RDLE9BQU9EO0lBQ1g7SUFDQTs7O0tBR0MsR0FDRCxNQUFNRSxPQUFPQyxPQUFPLEVBQUU7UUFDbEIsSUFBSUEsUUFBUUwsZ0JBQWdCLEVBQUU7WUFDMUIsTUFBTSxJQUFJTixRQUFRWSxpQkFBaUIsQ0FBQztRQUN4QztRQUNBLElBQUk7WUFDQUQsUUFBUUwsZ0JBQWdCLEdBQUc7WUFDM0IsTUFBTSxJQUFJLENBQUNPLElBQUksQ0FBQ0Y7UUFDcEIsU0FDUTtZQUNKQSxRQUFRTCxnQkFBZ0IsR0FBRztRQUMvQjtJQUNKO0FBQ0o7QUFDQVYsb0JBQW9CLEdBQUdFLGNBQ3ZCLHlDQUF5QyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2F1dGgvYXV0aF9wcm92aWRlci5qcz8yZTU1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BdXRoUHJvdmlkZXIgPSBleHBvcnRzLkF1dGhDb250ZXh0ID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi8uLi9lcnJvclwiKTtcbi8qKlxuICogQ29udGV4dCB1c2VkIGR1cmluZyBhdXRoZW50aWNhdGlvblxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIEF1dGhDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uLCBjcmVkZW50aWFscywgb3B0aW9ucykge1xuICAgICAgICAvKiogSWYgdGhlIGNvbnRleHQgaXMgZm9yIHJlYXV0aGVudGljYXRpb24uICovXG4gICAgICAgIHRoaXMucmVhdXRoZW50aWNhdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xuICAgICAgICB0aGlzLmNyZWRlbnRpYWxzID0gY3JlZGVudGlhbHM7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfVxufVxuZXhwb3J0cy5BdXRoQ29udGV4dCA9IEF1dGhDb250ZXh0O1xuY2xhc3MgQXV0aFByb3ZpZGVyIHtcbiAgICAvKipcbiAgICAgKiBQcmVwYXJlIHRoZSBoYW5kc2hha2UgZG9jdW1lbnQgYmVmb3JlIHRoZSBpbml0aWFsIGhhbmRzaGFrZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBoYW5kc2hha2VEb2MgLSBUaGUgZG9jdW1lbnQgdXNlZCBmb3IgdGhlIGluaXRpYWwgaGFuZHNoYWtlIG9uIGEgY29ubmVjdGlvblxuICAgICAqIEBwYXJhbSBhdXRoQ29udGV4dCAtIENvbnRleHQgZm9yIGF1dGhlbnRpY2F0aW9uIGZsb3dcbiAgICAgKi9cbiAgICBhc3luYyBwcmVwYXJlKGhhbmRzaGFrZURvYywgX2F1dGhDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBoYW5kc2hha2VEb2M7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYXV0aGVudGljYXRlLlxuICAgICAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIHNoYXJlZCBhdXRoIGNvbnRleHQuXG4gICAgICovXG4gICAgYXN5bmMgcmVhdXRoKGNvbnRleHQpIHtcbiAgICAgICAgaWYgKGNvbnRleHQucmVhdXRoZW50aWNhdGluZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ1JlYXV0aGVudGljYXRpb24gYWxyZWFkeSBpbiBwcm9ncmVzcy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29udGV4dC5yZWF1dGhlbnRpY2F0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXV0aChjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGNvbnRleHQucmVhdXRoZW50aWNhdGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5BdXRoUHJvdmlkZXIgPSBBdXRoUHJvdmlkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdXRoX3Byb3ZpZGVyLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkF1dGhQcm92aWRlciIsIkF1dGhDb250ZXh0IiwiZXJyb3JfMSIsInJlcXVpcmUiLCJjb25zdHJ1Y3RvciIsImNvbm5lY3Rpb24iLCJjcmVkZW50aWFscyIsIm9wdGlvbnMiLCJyZWF1dGhlbnRpY2F0aW5nIiwicHJlcGFyZSIsImhhbmRzaGFrZURvYyIsIl9hdXRoQ29udGV4dCIsInJlYXV0aCIsImNvbnRleHQiLCJNb25nb1J1bnRpbWVFcnJvciIsImF1dGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/gssapi.js":
/*!******************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/gssapi.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.resolveCname = exports.performGSSAPICanonicalizeHostName = exports.GSSAPI = exports.GSSAPICanonicalizationValue = void 0;\nconst dns = __webpack_require__(/*! dns */ \"dns\");\nconst deps_1 = __webpack_require__(/*! ../../deps */ \"(ssr)/./node_modules/mongodb/lib/deps.js\");\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\n/** @public */ exports.GSSAPICanonicalizationValue = Object.freeze({\n    on: true,\n    off: false,\n    none: \"none\",\n    forward: \"forward\",\n    forwardAndReverse: \"forwardAndReverse\"\n});\nasync function externalCommand(connection, command) {\n    return connection.commandAsync((0, utils_1.ns)(\"$external.$cmd\"), command, undefined);\n}\nlet krb;\nclass GSSAPI extends auth_provider_1.AuthProvider {\n    async auth(authContext) {\n        const { connection, credentials } = authContext;\n        if (credentials == null) {\n            throw new error_1.MongoMissingCredentialsError(\"Credentials required for GSSAPI authentication\");\n        }\n        const { username } = credentials;\n        const client = await makeKerberosClient(authContext);\n        const payload = await client.step(\"\");\n        const saslStartResponse = await externalCommand(connection, saslStart(payload));\n        const negotiatedPayload = await negotiate(client, 10, saslStartResponse.payload);\n        const saslContinueResponse = await externalCommand(connection, saslContinue(negotiatedPayload, saslStartResponse.conversationId));\n        const finalizePayload = await finalize(client, username, saslContinueResponse.payload);\n        await externalCommand(connection, {\n            saslContinue: 1,\n            conversationId: saslContinueResponse.conversationId,\n            payload: finalizePayload\n        });\n    }\n}\nexports.GSSAPI = GSSAPI;\nasync function makeKerberosClient(authContext) {\n    const { hostAddress } = authContext.options;\n    const { credentials } = authContext;\n    if (!hostAddress || typeof hostAddress.host !== \"string\" || !credentials) {\n        throw new error_1.MongoInvalidArgumentError(\"Connection must have host and port and credentials defined.\");\n    }\n    loadKrb();\n    if (\"kModuleError\" in krb) {\n        throw krb[\"kModuleError\"];\n    }\n    const { initializeClient } = krb;\n    const { username, password } = credentials;\n    const mechanismProperties = credentials.mechanismProperties;\n    const serviceName = mechanismProperties.SERVICE_NAME ?? \"mongodb\";\n    const host = await performGSSAPICanonicalizeHostName(hostAddress.host, mechanismProperties);\n    const initOptions = {};\n    if (password != null) {\n        // TODO(NODE-5139): These do not match the typescript options in initializeClient\n        Object.assign(initOptions, {\n            user: username,\n            password: password\n        });\n    }\n    const spnHost = mechanismProperties.SERVICE_HOST ?? host;\n    let spn = `${serviceName}${process.platform === \"win32\" ? \"/\" : \"@\"}${spnHost}`;\n    if (\"SERVICE_REALM\" in mechanismProperties) {\n        spn = `${spn}@${mechanismProperties.SERVICE_REALM}`;\n    }\n    return initializeClient(spn, initOptions);\n}\nfunction saslStart(payload) {\n    return {\n        saslStart: 1,\n        mechanism: \"GSSAPI\",\n        payload,\n        autoAuthorize: 1\n    };\n}\nfunction saslContinue(payload, conversationId) {\n    return {\n        saslContinue: 1,\n        conversationId,\n        payload\n    };\n}\nasync function negotiate(client, retries, payload) {\n    try {\n        const response = await client.step(payload);\n        return response || \"\";\n    } catch (error) {\n        if (retries === 0) {\n            // Retries exhausted, raise error\n            throw error;\n        }\n        // Adjust number of retries and call step again\n        return negotiate(client, retries - 1, payload);\n    }\n}\nasync function finalize(client, user, payload) {\n    // GSS Client Unwrap\n    const response = await client.unwrap(payload);\n    return client.wrap(response || \"\", {\n        user\n    });\n}\nasync function performGSSAPICanonicalizeHostName(host, mechanismProperties) {\n    const mode = mechanismProperties.CANONICALIZE_HOST_NAME;\n    if (!mode || mode === exports.GSSAPICanonicalizationValue.none) {\n        return host;\n    }\n    // If forward and reverse or true\n    if (mode === exports.GSSAPICanonicalizationValue.on || mode === exports.GSSAPICanonicalizationValue.forwardAndReverse) {\n        // Perform the lookup of the ip address.\n        const { address } = await dns.promises.lookup(host);\n        try {\n            // Perform a reverse ptr lookup on the ip address.\n            const results = await dns.promises.resolvePtr(address);\n            // If the ptr did not error but had no results, return the host.\n            return results.length > 0 ? results[0] : host;\n        } catch (error) {\n            // This can error as ptr records may not exist for all ips. In this case\n            // fallback to a cname lookup as dns.lookup() does not return the\n            // cname.\n            return resolveCname(host);\n        }\n    } else {\n        // The case for forward is just to resolve the cname as dns.lookup()\n        // will not return it.\n        return resolveCname(host);\n    }\n}\nexports.performGSSAPICanonicalizeHostName = performGSSAPICanonicalizeHostName;\nasync function resolveCname(host) {\n    // Attempt to resolve the host name\n    try {\n        const results = await dns.promises.resolveCname(host);\n        // Get the first resolved host id\n        return results.length > 0 ? results[0] : host;\n    } catch  {\n        return host;\n    }\n}\nexports.resolveCname = resolveCname;\n/**\n * Load the Kerberos library.\n */ function loadKrb() {\n    if (!krb) {\n        krb = (0, deps_1.getKerberos)();\n    }\n} //# sourceMappingURL=gssapi.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL2dzc2FwaS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsb0JBQW9CLEdBQUdBLHlDQUF5QyxHQUFHQSxjQUFjLEdBQUdBLG1DQUFtQyxHQUFHLEtBQUs7QUFDL0gsTUFBTU0sTUFBTUMsbUJBQU9BLENBQUMsZ0JBQUs7QUFDekIsTUFBTUMsU0FBU0QsbUJBQU9BLENBQUMsNERBQVk7QUFDbkMsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMsOERBQWE7QUFDckMsTUFBTUcsVUFBVUgsbUJBQU9BLENBQUMsOERBQWE7QUFDckMsTUFBTUksa0JBQWtCSixtQkFBT0EsQ0FBQyxvRkFBaUI7QUFDakQsWUFBWSxHQUNaUCxtQ0FBbUMsR0FBR0YsT0FBT2MsTUFBTSxDQUFDO0lBQ2hEQyxJQUFJO0lBQ0pDLEtBQUs7SUFDTEMsTUFBTTtJQUNOQyxTQUFTO0lBQ1RDLG1CQUFtQjtBQUN2QjtBQUNBLGVBQWVDLGdCQUFnQkMsVUFBVSxFQUFFQyxPQUFPO0lBQzlDLE9BQU9ELFdBQVdFLFlBQVksQ0FBQyxDQUFDLEdBQUdYLFFBQVFZLEVBQUUsRUFBRSxtQkFBbUJGLFNBQVNHO0FBQy9FO0FBQ0EsSUFBSUM7QUFDSixNQUFNcEIsZUFBZU8sZ0JBQWdCYyxZQUFZO0lBQzdDLE1BQU1DLEtBQUtDLFdBQVcsRUFBRTtRQUNwQixNQUFNLEVBQUVSLFVBQVUsRUFBRVMsV0FBVyxFQUFFLEdBQUdEO1FBQ3BDLElBQUlDLGVBQWUsTUFBTTtZQUNyQixNQUFNLElBQUluQixRQUFRb0IsNEJBQTRCLENBQUM7UUFDbkQ7UUFDQSxNQUFNLEVBQUVDLFFBQVEsRUFBRSxHQUFHRjtRQUNyQixNQUFNRyxTQUFTLE1BQU1DLG1CQUFtQkw7UUFDeEMsTUFBTU0sVUFBVSxNQUFNRixPQUFPRyxJQUFJLENBQUM7UUFDbEMsTUFBTUMsb0JBQW9CLE1BQU1q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VztJQUNoQztBQUNKLEVBQ0Esa0NBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvYXV0aC9nc3NhcGkuanM/NmE3MyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucmVzb2x2ZUNuYW1lID0gZXhwb3J0cy5wZXJmb3JtR1NTQVBJQ2Fub25pY2FsaXplSG9zdE5hbWUgPSBleHBvcnRzLkdTU0FQSSA9IGV4cG9ydHMuR1NTQVBJQ2Fub25pY2FsaXphdGlvblZhbHVlID0gdm9pZCAwO1xuY29uc3QgZG5zID0gcmVxdWlyZShcImRuc1wiKTtcbmNvbnN0IGRlcHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9kZXBzXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi8uLi9lcnJvclwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHNcIik7XG5jb25zdCBhdXRoX3Byb3ZpZGVyXzEgPSByZXF1aXJlKFwiLi9hdXRoX3Byb3ZpZGVyXCIpO1xuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydHMuR1NTQVBJQ2Fub25pY2FsaXphdGlvblZhbHVlID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgb246IHRydWUsXG4gICAgb2ZmOiBmYWxzZSxcbiAgICBub25lOiAnbm9uZScsXG4gICAgZm9yd2FyZDogJ2ZvcndhcmQnLFxuICAgIGZvcndhcmRBbmRSZXZlcnNlOiAnZm9yd2FyZEFuZFJldmVyc2UnXG59KTtcbmFzeW5jIGZ1bmN0aW9uIGV4dGVybmFsQ29tbWFuZChjb25uZWN0aW9uLCBjb21tYW5kKSB7XG4gICAgcmV0dXJuIGNvbm5lY3Rpb24uY29tbWFuZEFzeW5jKCgwLCB1dGlsc18xLm5zKSgnJGV4dGVybmFsLiRjbWQnKSwgY29tbWFuZCwgdW5kZWZpbmVkKTtcbn1cbmxldCBrcmI7XG5jbGFzcyBHU1NBUEkgZXh0ZW5kcyBhdXRoX3Byb3ZpZGVyXzEuQXV0aFByb3ZpZGVyIHtcbiAgICBhc3luYyBhdXRoKGF1dGhDb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IHsgY29ubmVjdGlvbiwgY3JlZGVudGlhbHMgfSA9IGF1dGhDb250ZXh0O1xuICAgICAgICBpZiAoY3JlZGVudGlhbHMgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcignQ3JlZGVudGlhbHMgcmVxdWlyZWQgZm9yIEdTU0FQSSBhdXRoZW50aWNhdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgdXNlcm5hbWUgfSA9IGNyZWRlbnRpYWxzO1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBtYWtlS2VyYmVyb3NDbGllbnQoYXV0aENvbnRleHQpO1xuICAgICAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgY2xpZW50LnN0ZXAoJycpO1xuICAgICAgICBjb25zdCBzYXNsU3RhcnRSZXNwb25zZSA9IGF3YWl0IGV4dGVybmFsQ29tbWFuZChjb25uZWN0aW9uLCBzYXNsU3RhcnQocGF5bG9hZCkpO1xuICAgICAgICBjb25zdCBuZWdvdGlhdGVkUGF5bG9hZCA9IGF3YWl0IG5lZ290aWF0ZShjbGllbnQsIDEwLCBzYXNsU3RhcnRSZXNwb25zZS5wYXlsb2FkKTtcbiAgICAgICAgY29uc3Qgc2FzbENvbnRpbnVlUmVzcG9uc2UgPSBhd2FpdCBleHRlcm5hbENvbW1hbmQoY29ubmVjdGlvbiwgc2FzbENvbnRpbnVlKG5lZ290aWF0ZWRQYXlsb2FkLCBzYXNsU3RhcnRSZXNwb25zZS5jb252ZXJzYXRpb25JZCkpO1xuICAgICAgICBjb25zdCBmaW5hbGl6ZVBheWxvYWQgPSBhd2FpdCBmaW5hbGl6ZShjbGllbnQsIHVzZXJuYW1lLCBzYXNsQ29udGludWVSZXNwb25zZS5wYXlsb2FkKTtcbiAgICAgICAgYXdhaXQgZXh0ZXJuYWxDb21tYW5kKGNvbm5lY3Rpb24sIHtcbiAgICAgICAgICAgIHNhc2xDb250aW51ZTogMSxcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBzYXNsQ29udGludWVSZXNwb25zZS5jb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgIHBheWxvYWQ6IGZpbmFsaXplUGF5bG9hZFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkdTU0FQSSA9IEdTU0FQSTtcbmFzeW5jIGZ1bmN0aW9uIG1ha2VLZXJiZXJvc0NsaWVudChhdXRoQ29udGV4dCkge1xuICAgIGNvbnN0IHsgaG9zdEFkZHJlc3MgfSA9IGF1dGhDb250ZXh0Lm9wdGlvbnM7XG4gICAgY29uc3QgeyBjcmVkZW50aWFscyB9ID0gYXV0aENvbnRleHQ7XG4gICAgaWYgKCFob3N0QWRkcmVzcyB8fCB0eXBlb2YgaG9zdEFkZHJlc3MuaG9zdCAhPT0gJ3N0cmluZycgfHwgIWNyZWRlbnRpYWxzKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0Nvbm5lY3Rpb24gbXVzdCBoYXZlIGhvc3QgYW5kIHBvcnQgYW5kIGNyZWRlbnRpYWxzIGRlZmluZWQuJyk7XG4gICAgfVxuICAgIGxvYWRLcmIoKTtcbiAgICBpZiAoJ2tNb2R1bGVFcnJvcicgaW4ga3JiKSB7XG4gICAgICAgIHRocm93IGtyYlsna01vZHVsZUVycm9yJ107XG4gICAgfVxuICAgIGNvbnN0IHsgaW5pdGlhbGl6ZUNsaWVudCB9ID0ga3JiO1xuICAgIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0gPSBjcmVkZW50aWFscztcbiAgICBjb25zdCBtZWNoYW5pc21Qcm9wZXJ0aWVzID0gY3JlZGVudGlhbHMubWVjaGFuaXNtUHJvcGVydGllcztcbiAgICBjb25zdCBzZXJ2aWNlTmFtZSA9IG1lY2hhbmlzbVByb3BlcnRpZXMuU0VSVklDRV9OQU1FID8/ICdtb25nb2RiJztcbiAgICBjb25zdCBob3N0ID0gYXdhaXQgcGVyZm9ybUdTU0FQSUNhbm9uaWNhbGl6ZUhvc3ROYW1lKGhvc3RBZGRyZXNzLmhvc3QsIG1lY2hhbmlzbVByb3BlcnRpZXMpO1xuICAgIGNvbnN0IGluaXRPcHRpb25zID0ge307XG4gICAgaWYgKHBhc3N3b3JkICE9IG51bGwpIHtcbiAgICAgICAgLy8gVE9ETyhOT0RFLTUxMzkpOiBUaGVzZSBkbyBub3QgbWF0Y2ggdGhlIHR5cGVzY3JpcHQgb3B0aW9ucyBpbiBpbml0aWFsaXplQ2xpZW50XG4gICAgICAgIE9iamVjdC5hc3NpZ24oaW5pdE9wdGlvbnMsIHsgdXNlcjogdXNlcm5hbWUsIHBhc3N3b3JkOiBwYXNzd29yZCB9KTtcbiAgICB9XG4gICAgY29uc3Qgc3BuSG9zdCA9IG1lY2hhbmlzbVByb3BlcnRpZXMuU0VSVklDRV9IT1NUID8/IGhvc3Q7XG4gICAgbGV0IHNwbiA9IGAke3NlcnZpY2VOYW1lfSR7cHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJyA/ICcvJyA6ICdAJ30ke3Nwbkhvc3R9YDtcbiAgICBpZiAoJ1NFUlZJQ0VfUkVBTE0nIGluIG1lY2hhbmlzbVByb3BlcnRpZXMpIHtcbiAgICAgICAgc3BuID0gYCR7c3BufUAke21lY2hhbmlzbVByb3BlcnRpZXMuU0VSVklDRV9SRUFMTX1gO1xuICAgIH1cbiAgICByZXR1cm4gaW5pdGlhbGl6ZUNsaWVudChzcG4sIGluaXRPcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHNhc2xTdGFydChwYXlsb2FkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2FzbFN0YXJ0OiAxLFxuICAgICAgICBtZWNoYW5pc206ICdHU1NBUEknLFxuICAgICAgICBwYXlsb2FkLFxuICAgICAgICBhdXRvQXV0aG9yaXplOiAxXG4gICAgfTtcbn1cbmZ1bmN0aW9uIHNhc2xDb250aW51ZShwYXlsb2FkLCBjb252ZXJzYXRpb25JZCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHNhc2xDb250aW51ZTogMSxcbiAgICAgICAgY29udmVyc2F0aW9uSWQsXG4gICAgICAgIHBheWxvYWRcbiAgICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gbmVnb3RpYXRlKGNsaWVudCwgcmV0cmllcywgcGF5bG9hZCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LnN0ZXAocGF5bG9hZCk7XG4gICAgICAgIHJldHVybiByZXNwb25zZSB8fCAnJztcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChyZXRyaWVzID09PSAwKSB7XG4gICAgICAgICAgICAvLyBSZXRyaWVzIGV4aGF1c3RlZCwgcmFpc2UgZXJyb3JcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFkanVzdCBudW1iZXIgb2YgcmV0cmllcyBhbmQgY2FsbCBzdGVwIGFnYWluXG4gICAgICAgIHJldHVybiBuZWdvdGlhdGUoY2xpZW50LCByZXRyaWVzIC0gMSwgcGF5bG9hZCk7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gZmluYWxpemUoY2xpZW50LCB1c2VyLCBwYXlsb2FkKSB7XG4gICAgLy8gR1NTIENsaWVudCBVbndyYXBcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNsaWVudC51bndyYXAocGF5bG9hZCk7XG4gICAgcmV0dXJuIGNsaWVudC53cmFwKHJlc3BvbnNlIHx8ICcnLCB7IHVzZXIgfSk7XG59XG5hc3luYyBmdW5jdGlvbiBwZXJmb3JtR1NTQVBJQ2Fub25pY2FsaXplSG9zdE5hbWUoaG9zdCwgbWVjaGFuaXNtUHJvcGVydGllcykge1xuICAgIGNvbnN0IG1vZGUgPSBtZWNoYW5pc21Qcm9wZXJ0aWVzLkNBTk9OSUNBTElaRV9IT1NUX05BTUU7XG4gICAgaWYgKCFtb2RlIHx8IG1vZGUgPT09IGV4cG9ydHMuR1NTQVBJQ2Fub25pY2FsaXphdGlvblZhbHVlLm5vbmUpIHtcbiAgICAgICAgcmV0dXJuIGhvc3Q7XG4gICAgfVxuICAgIC8vIElmIGZvcndhcmQgYW5kIHJldmVyc2Ugb3IgdHJ1ZVxuICAgIGlmIChtb2RlID09PSBleHBvcnRzLkdTU0FQSUNhbm9uaWNhbGl6YXRpb25WYWx1ZS5vbiB8fFxuICAgICAgICBtb2RlID09PSBleHBvcnRzLkdTU0FQSUNhbm9uaWNhbGl6YXRpb25WYWx1ZS5mb3J3YXJkQW5kUmV2ZXJzZSkge1xuICAgICAgICAvLyBQZXJmb3JtIHRoZSBsb29rdXAgb2YgdGhlIGlwIGFkZHJlc3MuXG4gICAgICAgIGNvbnN0IHsgYWRkcmVzcyB9ID0gYXdhaXQgZG5zLnByb21pc2VzLmxvb2t1cChob3N0KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFBlcmZvcm0gYSByZXZlcnNlIHB0ciBsb29rdXAgb24gdGhlIGlwIGFkZHJlc3MuXG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgZG5zLnByb21pc2VzLnJlc29sdmVQdHIoYWRkcmVzcyk7XG4gICAgICAgICAgICAvLyBJZiB0aGUgcHRyIGRpZCBub3QgZXJyb3IgYnV0IGhhZCBubyByZXN1bHRzLCByZXR1cm4gdGhlIGhvc3QuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cy5sZW5ndGggPiAwID8gcmVzdWx0c1swXSA6IGhvc3Q7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBUaGlzIGNhbiBlcnJvciBhcyBwdHIgcmVjb3JkcyBtYXkgbm90IGV4aXN0IGZvciBhbGwgaXBzLiBJbiB0aGlzIGNhc2VcbiAgICAgICAgICAgIC8vIGZhbGxiYWNrIHRvIGEgY25hbWUgbG9va3VwIGFzIGRucy5sb29rdXAoKSBkb2VzIG5vdCByZXR1cm4gdGhlXG4gICAgICAgICAgICAvLyBjbmFtZS5cbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlQ25hbWUoaG9zdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFRoZSBjYXNlIGZvciBmb3J3YXJkIGlzIGp1c3QgdG8gcmVzb2x2ZSB0aGUgY25hbWUgYXMgZG5zLmxvb2t1cCgpXG4gICAgICAgIC8vIHdpbGwgbm90IHJldHVybiBpdC5cbiAgICAgICAgcmV0dXJuIHJlc29sdmVDbmFtZShob3N0KTtcbiAgICB9XG59XG5leHBvcnRzLnBlcmZvcm1HU1NBUElDYW5vbmljYWxpemVIb3N0TmFtZSA9IHBlcmZvcm1HU1NBUElDYW5vbmljYWxpemVIb3N0TmFtZTtcbmFzeW5jIGZ1bmN0aW9uIHJlc29sdmVDbmFtZShob3N0KSB7XG4gICAgLy8gQXR0ZW1wdCB0byByZXNvbHZlIHRoZSBob3N0IG5hbWVcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgZG5zLnByb21pc2VzLnJlc29sdmVDbmFtZShob3N0KTtcbiAgICAgICAgLy8gR2V0IHRoZSBmaXJzdCByZXNvbHZlZCBob3N0IGlkXG4gICAgICAgIHJldHVybiByZXN1bHRzLmxlbmd0aCA+IDAgPyByZXN1bHRzWzBdIDogaG9zdDtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gaG9zdDtcbiAgICB9XG59XG5leHBvcnRzLnJlc29sdmVDbmFtZSA9IHJlc29sdmVDbmFtZTtcbi8qKlxuICogTG9hZCB0aGUgS2VyYmVyb3MgbGlicmFyeS5cbiAqL1xuZnVuY3Rpb24gbG9hZEtyYigpIHtcbiAgICBpZiAoIWtyYikge1xuICAgICAgICBrcmIgPSAoMCwgZGVwc18xLmdldEtlcmJlcm9zKSgpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdzc2FwaS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJyZXNvbHZlQ25hbWUiLCJwZXJmb3JtR1NTQVBJQ2Fub25pY2FsaXplSG9zdE5hbWUiLCJHU1NBUEkiLCJHU1NBUElDYW5vbmljYWxpemF0aW9uVmFsdWUiLCJkbnMiLCJyZXF1aXJlIiwiZGVwc18xIiwiZXJyb3JfMSIsInV0aWxzXzEiLCJhdXRoX3Byb3ZpZGVyXzEiLCJmcmVlemUiLCJvbiIsIm9mZiIsIm5vbmUiLCJmb3J3YXJkIiwiZm9yd2FyZEFuZFJldmVyc2UiLCJleHRlcm5hbENvbW1hbmQiLCJjb25uZWN0aW9uIiwiY29tbWFuZCIsImNvbW1hbmRBc3luYyIsIm5zIiwidW5kZWZpbmVkIiwia3JiIiwiQXV0aFByb3ZpZGVyIiwiYXV0aCIsImF1dGhDb250ZXh0IiwiY3JlZGVudGlhbHMiLCJNb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yIiwidXNlcm5hbWUiLCJjbGllbnQiLCJtYWtlS2VyYmVyb3NDbGllbnQiLCJwYXlsb2FkIiwic3RlcCIsInNhc2xTdGFydFJlc3BvbnNlIiwic2FzbFN0YXJ0IiwibmVnb3RpYXRlZFBheWxvYWQiLCJuZWdvdGlhdGUiLCJzYXNsQ29udGludWVSZXNwb25zZSIsInNhc2xDb250aW51ZSIsImNvbnZlcnNhdGlvbklkIiwiZmluYWxpemVQYXlsb2FkIiwiZmluYWxpemUiLCJob3N0QWRkcmVzcyIsIm9wdGlvbnMiLCJob3N0IiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsImxvYWRLcmIiLCJpbml0aWFsaXplQ2xpZW50IiwicGFzc3dvcmQiLCJtZWNoYW5pc21Qcm9wZXJ0aWVzIiwic2VydmljZU5hbWUiLCJTRVJWSUNFX05BTUUiLCJpbml0T3B0aW9ucyIsImFzc2lnbiIsInVzZXIiLCJzcG5Ib3N0IiwiU0VSVklDRV9IT1NUIiwic3BuIiwicHJvY2VzcyIsInBsYXRmb3JtIiwiU0VSVklDRV9SRUFMTSIsIm1lY2hhbmlzbSIsImF1dG9BdXRob3JpemUiLCJyZXRyaWVzIiwicmVzcG9uc2UiLCJlcnJvciIsInVud3JhcCIsIndyYXAiLCJtb2RlIiwiQ0FOT05JQ0FMSVpFX0hPU1RfTkFNRSIsImFkZHJlc3MiLCJwcm9taXNlcyIsImxvb2t1cCIsInJlc3VsdHMiLCJyZXNvbHZlUHRyIiwibGVuZ3RoIiwiZ2V0S2VyYmVyb3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/gssapi.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongo_credentials.js":
/*!*****************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongo_credentials.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongoCredentials = exports.DEFAULT_ALLOWED_HOSTS = void 0;\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst gssapi_1 = __webpack_require__(/*! ./gssapi */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/gssapi.js\");\nconst providers_1 = __webpack_require__(/*! ./providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\n// https://github.com/mongodb/specifications/blob/master/source/auth/auth.rst\nfunction getDefaultAuthMechanism(hello) {\n    if (hello) {\n        // If hello contains saslSupportedMechs, use scram-sha-256\n        // if it is available, else scram-sha-1\n        if (Array.isArray(hello.saslSupportedMechs)) {\n            return hello.saslSupportedMechs.includes(providers_1.AuthMechanism.MONGODB_SCRAM_SHA256) ? providers_1.AuthMechanism.MONGODB_SCRAM_SHA256 : providers_1.AuthMechanism.MONGODB_SCRAM_SHA1;\n        }\n        // Fallback to legacy selection method. If wire version >= 3, use scram-sha-1\n        if (hello.maxWireVersion >= 3) {\n            return providers_1.AuthMechanism.MONGODB_SCRAM_SHA1;\n        }\n    }\n    // Default for wireprotocol < 3\n    return providers_1.AuthMechanism.MONGODB_CR;\n}\nconst ALLOWED_PROVIDER_NAMES = [\n    \"aws\",\n    \"azure\"\n];\nconst ALLOWED_HOSTS_ERROR = \"Auth mechanism property ALLOWED_HOSTS must be an array of strings.\";\n/** @internal */ exports.DEFAULT_ALLOWED_HOSTS = [\n    \"*.mongodb.net\",\n    \"*.mongodb-dev.net\",\n    \"*.mongodbgov.net\",\n    \"localhost\",\n    \"127.0.0.1\",\n    \"::1\"\n];\n/** Error for when the token audience is missing in the environment. */ const TOKEN_AUDIENCE_MISSING_ERROR = \"TOKEN_AUDIENCE must be set in the auth mechanism properties when PROVIDER_NAME is azure.\";\n/**\n * A representation of the credentials used by MongoDB\n * @public\n */ class MongoCredentials {\n    constructor(options){\n        this.username = options.username ?? \"\";\n        this.password = options.password;\n        this.source = options.source;\n        if (!this.source && options.db) {\n            this.source = options.db;\n        }\n        this.mechanism = options.mechanism || providers_1.AuthMechanism.MONGODB_DEFAULT;\n        this.mechanismProperties = options.mechanismProperties || {};\n        if (this.mechanism.match(/MONGODB-AWS/i)) {\n            if (!this.username && process.env.AWS_ACCESS_KEY_ID) {\n                this.username = process.env.AWS_ACCESS_KEY_ID;\n            }\n            if (!this.password && process.env.AWS_SECRET_ACCESS_KEY) {\n                this.password = process.env.AWS_SECRET_ACCESS_KEY;\n            }\n            if (this.mechanismProperties.AWS_SESSION_TOKEN == null && process.env.AWS_SESSION_TOKEN != null) {\n                this.mechanismProperties = {\n                    ...this.mechanismProperties,\n                    AWS_SESSION_TOKEN: process.env.AWS_SESSION_TOKEN\n                };\n            }\n        }\n        if (this.mechanism === providers_1.AuthMechanism.MONGODB_OIDC && !this.mechanismProperties.ALLOWED_HOSTS) {\n            this.mechanismProperties = {\n                ...this.mechanismProperties,\n                ALLOWED_HOSTS: exports.DEFAULT_ALLOWED_HOSTS\n            };\n        }\n        Object.freeze(this.mechanismProperties);\n        Object.freeze(this);\n    }\n    /** Determines if two MongoCredentials objects are equivalent */ equals(other) {\n        return this.mechanism === other.mechanism && this.username === other.username && this.password === other.password && this.source === other.source;\n    }\n    /**\n     * If the authentication mechanism is set to \"default\", resolves the authMechanism\n     * based on the server version and server supported sasl mechanisms.\n     *\n     * @param hello - A hello response from the server\n     */ resolveAuthMechanism(hello) {\n        // If the mechanism is not \"default\", then it does not need to be resolved\n        if (this.mechanism.match(/DEFAULT/i)) {\n            return new MongoCredentials({\n                username: this.username,\n                password: this.password,\n                source: this.source,\n                mechanism: getDefaultAuthMechanism(hello),\n                mechanismProperties: this.mechanismProperties\n            });\n        }\n        return this;\n    }\n    validate() {\n        if ((this.mechanism === providers_1.AuthMechanism.MONGODB_GSSAPI || this.mechanism === providers_1.AuthMechanism.MONGODB_CR || this.mechanism === providers_1.AuthMechanism.MONGODB_PLAIN || this.mechanism === providers_1.AuthMechanism.MONGODB_SCRAM_SHA1 || this.mechanism === providers_1.AuthMechanism.MONGODB_SCRAM_SHA256) && !this.username) {\n            throw new error_1.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);\n        }\n        if (this.mechanism === providers_1.AuthMechanism.MONGODB_OIDC) {\n            if (this.username && this.mechanismProperties.PROVIDER_NAME) {\n                throw new error_1.MongoInvalidArgumentError(`username and PROVIDER_NAME may not be used together for mechanism '${this.mechanism}'.`);\n            }\n            if (this.mechanismProperties.PROVIDER_NAME === \"azure\" && !this.mechanismProperties.TOKEN_AUDIENCE) {\n                throw new error_1.MongoAzureError(TOKEN_AUDIENCE_MISSING_ERROR);\n            }\n            if (this.mechanismProperties.PROVIDER_NAME && !ALLOWED_PROVIDER_NAMES.includes(this.mechanismProperties.PROVIDER_NAME)) {\n                throw new error_1.MongoInvalidArgumentError(`Currently only a PROVIDER_NAME in ${ALLOWED_PROVIDER_NAMES.join(\",\")} is supported for mechanism '${this.mechanism}'.`);\n            }\n            if (this.mechanismProperties.REFRESH_TOKEN_CALLBACK && !this.mechanismProperties.REQUEST_TOKEN_CALLBACK) {\n                throw new error_1.MongoInvalidArgumentError(`A REQUEST_TOKEN_CALLBACK must be provided when using a REFRESH_TOKEN_CALLBACK for mechanism '${this.mechanism}'`);\n            }\n            if (!this.mechanismProperties.PROVIDER_NAME && !this.mechanismProperties.REQUEST_TOKEN_CALLBACK) {\n                throw new error_1.MongoInvalidArgumentError(`Either a PROVIDER_NAME or a REQUEST_TOKEN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);\n            }\n            if (this.mechanismProperties.ALLOWED_HOSTS) {\n                const hosts = this.mechanismProperties.ALLOWED_HOSTS;\n                if (!Array.isArray(hosts)) {\n                    throw new error_1.MongoInvalidArgumentError(ALLOWED_HOSTS_ERROR);\n                }\n                for (const host of hosts){\n                    if (typeof host !== \"string\") {\n                        throw new error_1.MongoInvalidArgumentError(ALLOWED_HOSTS_ERROR);\n                    }\n                }\n            }\n        }\n        if (providers_1.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)) {\n            if (this.source != null && this.source !== \"$external\") {\n                // TODO(NODE-3485): Replace this with a MongoAuthValidationError\n                throw new error_1.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`);\n            }\n        }\n        if (this.mechanism === providers_1.AuthMechanism.MONGODB_PLAIN && this.source == null) {\n            // TODO(NODE-3485): Replace this with a MongoAuthValidationError\n            throw new error_1.MongoAPIError(\"PLAIN Authentication Mechanism needs an auth source\");\n        }\n        if (this.mechanism === providers_1.AuthMechanism.MONGODB_X509 && this.password != null) {\n            if (this.password === \"\") {\n                Reflect.set(this, \"password\", undefined);\n                return;\n            }\n            // TODO(NODE-3485): Replace this with a MongoAuthValidationError\n            throw new error_1.MongoAPIError(`Password not allowed for mechanism MONGODB-X509`);\n        }\n        const canonicalization = this.mechanismProperties.CANONICALIZE_HOST_NAME ?? false;\n        if (!Object.values(gssapi_1.GSSAPICanonicalizationValue).includes(canonicalization)) {\n            throw new error_1.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${canonicalization}`);\n        }\n    }\n    static merge(creds, options) {\n        return new MongoCredentials({\n            username: options.username ?? creds?.username ?? \"\",\n            password: options.password ?? creds?.password ?? \"\",\n            mechanism: options.mechanism ?? creds?.mechanism ?? providers_1.AuthMechanism.MONGODB_DEFAULT,\n            mechanismProperties: options.mechanismProperties ?? creds?.mechanismProperties ?? {},\n            source: options.source ?? options.db ?? creds?.source ?? \"admin\"\n        });\n    }\n}\nexports.MongoCredentials = MongoCredentials; //# sourceMappingURL=mongo_credentials.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvX2NyZWRlbnRpYWxzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx3QkFBd0IsR0FBR0EsNkJBQTZCLEdBQUcsS0FBSztBQUNoRSxNQUFNSSxVQUFVQyxtQkFBT0EsQ0FBQyw4REFBYTtBQUNyQyxNQUFNQyxXQUFXRCxtQkFBT0EsQ0FBQyxzRUFBVTtBQUNuQyxNQUFNRSxjQUFjRixtQkFBT0EsQ0FBQyw0RUFBYTtBQUN6Qyw2RUFBNkU7QUFDN0UsU0FBU0csd0JBQXdCQyxLQUFLO0lBQ2xDLElBQUlBLE9BQU87UUFDUCwwREFBMEQ7UUFDMUQsdUNBQXVDO1FBQ3ZDLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ0YsTUFBTUcsa0JBQWtCLEdBQUc7WUFDekMsT0FBT0gsTUFBTUcsa0JBQWtCLENBQUNDLFFBQVEsQ0FBQ04sWUFBWU8sYUFBYSxDQUFDQyxvQkFBb0IsSUFDakZSLFlBQVlPLGFBQWEsQ0FBQ0Msb0JBQW9CLEdBQzlDUixZQUFZTyxhQUFhLENBQUNFLGtCQUFrQjtRQUN0RDtRQUNBLDZFQUE2RTtRQUM3RSxJQUFJUCxNQUFNUSxjQUFjLElBQUksR0FBRztZQUMzQixPQUFPVixZQUFZTyxhQUFhLENBQUNFLGtCQUFrQjtRQUN2RDtJQUNKO0lBQ0EsK0JBQStCO0lBQy9CLE9BQU9ULFlBQVlPLGFBQWEsQ0FBQ0ksVUFBVTtBQUMvQztBQUNBLE1BQU1DLHlCQUF5QjtJQUFDO0lBQU87Q0FBUTtBQUMvQyxNQUFNQyxzQkFBc0I7QUFDNUIsY0FBYyxHQUNkcEIsNkJBQTZCLEdBQUc7SUFDNUI7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0g7QUFDRCxxRUFBcUUsR0FDckUsTUFBTXFCLCtCQUErQjtBQUNyQzs7O0NBR0MsR0FDRCxNQUFNbkI7SUFDRm9CLFlBQVlDLE9BQU8sQ0FBRTtRQUNqQixJQUFJ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O0lBQ0o7QUFDSjtBQUNBMUIsd0JBQXdCLEdBQUdFLGtCQUMzQiw2Q0FBNkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvX2NyZWRlbnRpYWxzLmpzPzM3OTMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk1vbmdvQ3JlZGVudGlhbHMgPSBleHBvcnRzLkRFRkFVTFRfQUxMT1dFRF9IT1NUUyA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vLi4vZXJyb3JcIik7XG5jb25zdCBnc3NhcGlfMSA9IHJlcXVpcmUoXCIuL2dzc2FwaVwiKTtcbmNvbnN0IHByb3ZpZGVyc18xID0gcmVxdWlyZShcIi4vcHJvdmlkZXJzXCIpO1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL21vbmdvZGIvc3BlY2lmaWNhdGlvbnMvYmxvYi9tYXN0ZXIvc291cmNlL2F1dGgvYXV0aC5yc3RcbmZ1bmN0aW9uIGdldERlZmF1bHRBdXRoTWVjaGFuaXNtKGhlbGxvKSB7XG4gICAgaWYgKGhlbGxvKSB7XG4gICAgICAgIC8vIElmIGhlbGxvIGNvbnRhaW5zIHNhc2xTdXBwb3J0ZWRNZWNocywgdXNlIHNjcmFtLXNoYS0yNTZcbiAgICAgICAgLy8gaWYgaXQgaXMgYXZhaWxhYmxlLCBlbHNlIHNjcmFtLXNoYS0xXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGhlbGxvLnNhc2xTdXBwb3J0ZWRNZWNocykpIHtcbiAgICAgICAgICAgIHJldHVybiBoZWxsby5zYXNsU3VwcG9ydGVkTWVjaHMuaW5jbHVkZXMocHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX1NDUkFNX1NIQTI1NilcbiAgICAgICAgICAgICAgICA/IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9TQ1JBTV9TSEEyNTZcbiAgICAgICAgICAgICAgICA6IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9TQ1JBTV9TSEExO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIGxlZ2FjeSBzZWxlY3Rpb24gbWV0aG9kLiBJZiB3aXJlIHZlcnNpb24gPj0gMywgdXNlIHNjcmFtLXNoYS0xXG4gICAgICAgIGlmIChoZWxsby5tYXhXaXJlVmVyc2lvbiA+PSAzKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX1NDUkFNX1NIQTE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gRGVmYXVsdCBmb3Igd2lyZXByb3RvY29sIDwgM1xuICAgIHJldHVybiBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfQ1I7XG59XG5jb25zdCBBTExPV0VEX1BST1ZJREVSX05BTUVTID0gWydhd3MnLCAnYXp1cmUnXTtcbmNvbnN0IEFMTE9XRURfSE9TVFNfRVJST1IgPSAnQXV0aCBtZWNoYW5pc20gcHJvcGVydHkgQUxMT1dFRF9IT1NUUyBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ3MuJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuREVGQVVMVF9BTExPV0VEX0hPU1RTID0gW1xuICAgICcqLm1vbmdvZGIubmV0JyxcbiAgICAnKi5tb25nb2RiLWRldi5uZXQnLFxuICAgICcqLm1vbmdvZGJnb3YubmV0JyxcbiAgICAnbG9jYWxob3N0JyxcbiAgICAnMTI3LjAuMC4xJyxcbiAgICAnOjoxJ1xuXTtcbi8qKiBFcnJvciBmb3Igd2hlbiB0aGUgdG9rZW4gYXVkaWVuY2UgaXMgbWlzc2luZyBpbiB0aGUgZW52aXJvbm1lbnQuICovXG5jb25zdCBUT0tFTl9BVURJRU5DRV9NSVNTSU5HX0VSUk9SID0gJ1RPS0VOX0FVRElFTkNFIG11c3QgYmUgc2V0IGluIHRoZSBhdXRoIG1lY2hhbmlzbSBwcm9wZXJ0aWVzIHdoZW4gUFJPVklERVJfTkFNRSBpcyBhenVyZS4nO1xuLyoqXG4gKiBBIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjcmVkZW50aWFscyB1c2VkIGJ5IE1vbmdvREJcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgTW9uZ29DcmVkZW50aWFscyB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLnVzZXJuYW1lID0gb3B0aW9ucy51c2VybmFtZSA/PyAnJztcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IG9wdGlvbnMucGFzc3dvcmQ7XG4gICAgICAgIHRoaXMuc291cmNlID0gb3B0aW9ucy5zb3VyY2U7XG4gICAgICAgIGlmICghdGhpcy5zb3VyY2UgJiYgb3B0aW9ucy5kYikge1xuICAgICAgICAgICAgdGhpcy5zb3VyY2UgPSBvcHRpb25zLmRiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWVjaGFuaXNtID0gb3B0aW9ucy5tZWNoYW5pc20gfHwgcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX0RFRkFVTFQ7XG4gICAgICAgIHRoaXMubWVjaGFuaXNtUHJvcGVydGllcyA9IG9wdGlvbnMubWVjaGFuaXNtUHJvcGVydGllcyB8fCB7fTtcbiAgICAgICAgaWYgKHRoaXMubWVjaGFuaXNtLm1hdGNoKC9NT05HT0RCLUFXUy9pKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnVzZXJuYW1lICYmIHByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51c2VybmFtZSA9IHByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhc3N3b3JkICYmIHByb2Nlc3MuZW52LkFXU19TRUNSRVRfQUNDRVNTX0tFWSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmQgPSBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzLkFXU19TRVNTSU9OX1RPS0VOID09IG51bGwgJiZcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5BV1NfU0VTU0lPTl9UT0tFTiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLm1lY2hhbmlzbVByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgICAgIEFXU19TRVNTSU9OX1RPS0VOOiBwcm9jZXNzLmVudi5BV1NfU0VTU0lPTl9UT0tFTlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWVjaGFuaXNtID09PSBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfT0lEQyAmJiAhdGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzLkFMTE9XRURfSE9TVFMpIHtcbiAgICAgICAgICAgIHRoaXMubWVjaGFuaXNtUHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLm1lY2hhbmlzbVByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgQUxMT1dFRF9IT1NUUzogZXhwb3J0cy5ERUZBVUxUX0FMTE9XRURfSE9TVFNcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmZyZWV6ZSh0aGlzLm1lY2hhbmlzbVByb3BlcnRpZXMpO1xuICAgICAgICBPYmplY3QuZnJlZXplKHRoaXMpO1xuICAgIH1cbiAgICAvKiogRGV0ZXJtaW5lcyBpZiB0d28gTW9uZ29DcmVkZW50aWFscyBvYmplY3RzIGFyZSBlcXVpdmFsZW50ICovXG4gICAgZXF1YWxzKG90aGVyKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5tZWNoYW5pc20gPT09IG90aGVyLm1lY2hhbmlzbSAmJlxuICAgICAgICAgICAgdGhpcy51c2VybmFtZSA9PT0gb3RoZXIudXNlcm5hbWUgJiZcbiAgICAgICAgICAgIHRoaXMucGFzc3dvcmQgPT09IG90aGVyLnBhc3N3b3JkICYmXG4gICAgICAgICAgICB0aGlzLnNvdXJjZSA9PT0gb3RoZXIuc291cmNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgdGhlIGF1dGhlbnRpY2F0aW9uIG1lY2hhbmlzbSBpcyBzZXQgdG8gXCJkZWZhdWx0XCIsIHJlc29sdmVzIHRoZSBhdXRoTWVjaGFuaXNtXG4gICAgICogYmFzZWQgb24gdGhlIHNlcnZlciB2ZXJzaW9uIGFuZCBzZXJ2ZXIgc3VwcG9ydGVkIHNhc2wgbWVjaGFuaXNtcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBoZWxsbyAtIEEgaGVsbG8gcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyXG4gICAgICovXG4gICAgcmVzb2x2ZUF1dGhNZWNoYW5pc20oaGVsbG8pIHtcbiAgICAgICAgLy8gSWYgdGhlIG1lY2hhbmlzbSBpcyBub3QgXCJkZWZhdWx0XCIsIHRoZW4gaXQgZG9lcyBub3QgbmVlZCB0byBiZSByZXNvbHZlZFxuICAgICAgICBpZiAodGhpcy5tZWNoYW5pc20ubWF0Y2goL0RFRkFVTFQvaSkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTW9uZ29DcmVkZW50aWFscyh7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgc291cmNlOiB0aGlzLnNvdXJjZSxcbiAgICAgICAgICAgICAgICBtZWNoYW5pc206IGdldERlZmF1bHRBdXRoTWVjaGFuaXNtKGhlbGxvKSxcbiAgICAgICAgICAgICAgICBtZWNoYW5pc21Qcm9wZXJ0aWVzOiB0aGlzLm1lY2hhbmlzbVByb3BlcnRpZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB2YWxpZGF0ZSgpIHtcbiAgICAgICAgaWYgKCh0aGlzLm1lY2hhbmlzbSA9PT0gcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX0dTU0FQSSB8fFxuICAgICAgICAgICAgdGhpcy5tZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9DUiB8fFxuICAgICAgICAgICAgdGhpcy5tZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9QTEFJTiB8fFxuICAgICAgICAgICAgdGhpcy5tZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9TQ1JBTV9TSEExIHx8XG4gICAgICAgICAgICB0aGlzLm1lY2hhbmlzbSA9PT0gcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX1NDUkFNX1NIQTI1NikgJiZcbiAgICAgICAgICAgICF0aGlzLnVzZXJuYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yKGBVc2VybmFtZSByZXF1aXJlZCBmb3IgbWVjaGFuaXNtICcke3RoaXMubWVjaGFuaXNtfSdgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9PSURDKSB7XG4gICAgICAgICAgICBpZiAodGhpcy51c2VybmFtZSAmJiB0aGlzLm1lY2hhbmlzbVByb3BlcnRpZXMuUFJPVklERVJfTkFNRSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYHVzZXJuYW1lIGFuZCBQUk9WSURFUl9OQU1FIG1heSBub3QgYmUgdXNlZCB0b2dldGhlciBmb3IgbWVjaGFuaXNtICcke3RoaXMubWVjaGFuaXNtfScuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzLlBST1ZJREVSX05BTUUgPT09ICdhenVyZScgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzLlRPS0VOX0FVRElFTkNFKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BenVyZUVycm9yKFRPS0VOX0FVRElFTkNFX01JU1NJTkdfRVJST1IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubWVjaGFuaXNtUHJvcGVydGllcy5QUk9WSURFUl9OQU1FICYmXG4gICAgICAgICAgICAgICAgIUFMTE9XRURfUFJPVklERVJfTkFNRVMuaW5jbHVkZXModGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzLlBST1ZJREVSX05BTUUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgQ3VycmVudGx5IG9ubHkgYSBQUk9WSURFUl9OQU1FIGluICR7QUxMT1dFRF9QUk9WSURFUl9OQU1FUy5qb2luKCcsJyl9IGlzIHN1cHBvcnRlZCBmb3IgbWVjaGFuaXNtICcke3RoaXMubWVjaGFuaXNtfScuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzLlJFRlJFU0hfVE9LRU5fQ0FMTEJBQ0sgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzLlJFUVVFU1RfVE9LRU5fQ0FMTEJBQ0spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBBIFJFUVVFU1RfVE9LRU5fQ0FMTEJBQ0sgbXVzdCBiZSBwcm92aWRlZCB3aGVuIHVzaW5nIGEgUkVGUkVTSF9UT0tFTl9DQUxMQkFDSyBmb3IgbWVjaGFuaXNtICcke3RoaXMubWVjaGFuaXNtfSdgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzLlBST1ZJREVSX05BTUUgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzLlJFUVVFU1RfVE9LRU5fQ0FMTEJBQ0spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBFaXRoZXIgYSBQUk9WSURFUl9OQU1FIG9yIGEgUkVRVUVTVF9UT0tFTl9DQUxMQkFDSyBtdXN0IGJlIHNwZWNpZmllZCBmb3IgbWVjaGFuaXNtICcke3RoaXMubWVjaGFuaXNtfScuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzLkFMTE9XRURfSE9TVFMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBob3N0cyA9IHRoaXMubWVjaGFuaXNtUHJvcGVydGllcy5BTExPV0VEX0hPU1RTO1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShob3N0cykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihBTExPV0VEX0hPU1RTX0VSUk9SKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBob3N0IG9mIGhvc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaG9zdCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoQUxMT1dFRF9IT1NUU19FUlJPUik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3ZpZGVyc18xLkFVVEhfTUVDSFNfQVVUSF9TUkNfRVhURVJOQUwuaGFzKHRoaXMubWVjaGFuaXNtKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc291cmNlICE9IG51bGwgJiYgdGhpcy5zb3VyY2UgIT09ICckZXh0ZXJuYWwnKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODUpOiBSZXBsYWNlIHRoaXMgd2l0aCBhIE1vbmdvQXV0aFZhbGlkYXRpb25FcnJvclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoYEludmFsaWQgc291cmNlICcke3RoaXMuc291cmNlfScgZm9yIG1lY2hhbmlzbSAnJHt0aGlzLm1lY2hhbmlzbX0nIHNwZWNpZmllZC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9QTEFJTiAmJiB0aGlzLnNvdXJjZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4NSk6IFJlcGxhY2UgdGhpcyB3aXRoIGEgTW9uZ29BdXRoVmFsaWRhdGlvbkVycm9yXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKCdQTEFJTiBBdXRoZW50aWNhdGlvbiBNZWNoYW5pc20gbmVlZHMgYW4gYXV0aCBzb3VyY2UnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9YNTA5ICYmIHRoaXMucGFzc3dvcmQgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFzc3dvcmQgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgUmVmbGVjdC5zZXQodGhpcywgJ3Bhc3N3b3JkJywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4NSk6IFJlcGxhY2UgdGhpcyB3aXRoIGEgTW9uZ29BdXRoVmFsaWRhdGlvbkVycm9yXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKGBQYXNzd29yZCBub3QgYWxsb3dlZCBmb3IgbWVjaGFuaXNtIE1PTkdPREItWDUwOWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNhbm9uaWNhbGl6YXRpb24gPSB0aGlzLm1lY2hhbmlzbVByb3BlcnRpZXMuQ0FOT05JQ0FMSVpFX0hPU1RfTkFNRSA/PyBmYWxzZTtcbiAgICAgICAgaWYgKCFPYmplY3QudmFsdWVzKGdzc2FwaV8xLkdTU0FQSUNhbm9uaWNhbGl6YXRpb25WYWx1ZSkuaW5jbHVkZXMoY2Fub25pY2FsaXphdGlvbikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoYEludmFsaWQgQ0FOT05JQ0FMSVpFX0hPU1RfTkFNRSB2YWx1ZTogJHtjYW5vbmljYWxpemF0aW9ufWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZShjcmVkcywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IE1vbmdvQ3JlZGVudGlhbHMoe1xuICAgICAgICAgICAgdXNlcm5hbWU6IG9wdGlvbnMudXNlcm5hbWUgPz8gY3JlZHM/LnVzZXJuYW1lID8/ICcnLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IG9wdGlvbnMucGFzc3dvcmQgPz8gY3JlZHM/LnBhc3N3b3JkID8/ICcnLFxuICAgICAgICAgICAgbWVjaGFuaXNtOiBvcHRpb25zLm1lY2hhbmlzbSA/PyBjcmVkcz8ubWVjaGFuaXNtID8/IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9ERUZBVUxULFxuICAgICAgICAgICAgbWVjaGFuaXNtUHJvcGVydGllczogb3B0aW9ucy5tZWNoYW5pc21Qcm9wZXJ0aWVzID8/IGNyZWRzPy5tZWNoYW5pc21Qcm9wZXJ0aWVzID8/IHt9LFxuICAgICAgICAgICAgc291cmNlOiBvcHRpb25zLnNvdXJjZSA/PyBvcHRpb25zLmRiID8/IGNyZWRzPy5zb3VyY2UgPz8gJ2FkbWluJ1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvQ3JlZGVudGlhbHMgPSBNb25nb0NyZWRlbnRpYWxzO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9uZ29fY3JlZGVudGlhbHMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiTW9uZ29DcmVkZW50aWFscyIsIkRFRkFVTFRfQUxMT1dFRF9IT1NUUyIsImVycm9yXzEiLCJyZXF1aXJlIiwiZ3NzYXBpXzEiLCJwcm92aWRlcnNfMSIsImdldERlZmF1bHRBdXRoTWVjaGFuaXNtIiwiaGVsbG8iLCJBcnJheSIsImlzQXJyYXkiLCJzYXNsU3VwcG9ydGVkTWVjaHMiLCJpbmNsdWRlcyIsIkF1dGhNZWNoYW5pc20iLCJNT05HT0RCX1NDUkFNX1NIQTI1NiIsIk1PTkdPREJfU0NSQU1fU0hBMSIsIm1heFdpcmVWZXJzaW9uIiwiTU9OR09EQl9DUiIsIkFMTE9XRURfUFJPVklERVJfTkFNRVMiLCJBTExPV0VEX0hPU1RTX0VSUk9SIiwiVE9LRU5fQVVESUVOQ0VfTUlTU0lOR19FUlJPUiIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJzb3VyY2UiLCJkYiIsIm1lY2hhbmlzbSIsIk1PTkdPREJfREVGQVVMVCIsIm1lY2hhbmlzbVByb3BlcnRpZXMiLCJtYXRjaCIsInByb2Nlc3MiLCJlbnYiLCJBV1NfQUNDRVNTX0tFWV9JRCIsIkFXU19TRUNSRVRfQUNDRVNTX0tFWSIsIkFXU19TRVNTSU9OX1RPS0VOIiwiTU9OR09EQl9PSURDIiwiQUxMT1dFRF9IT1NUUyIsImZyZWV6ZSIsImVxdWFscyIsIm90aGVyIiwicmVzb2x2ZUF1dGhNZWNoYW5pc20iLCJ2YWxpZGF0ZSIsIk1PTkdPREJfR1NTQVBJIiwiTU9OR09EQl9QTEFJTiIsIk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IiLCJQUk9WSURFUl9OQU1FIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsIlRPS0VOX0FVRElFTkNFIiwiTW9uZ29BenVyZUVycm9yIiwiam9pbiIsIlJFRlJFU0hfVE9LRU5fQ0FMTEJBQ0siLCJSRVFVRVNUX1RPS0VOX0NBTExCQUNLIiwiaG9zdHMiLCJob3N0IiwiQVVUSF9NRUNIU19BVVRIX1NSQ19FWFRFUk5BTCIsImhhcyIsIk1vbmdvQVBJRXJyb3IiLCJNT05HT0RCX1g1MDkiLCJSZWZsZWN0Iiwic2V0IiwidW5kZWZpbmVkIiwiY2Fub25pY2FsaXphdGlvbiIsIkNBTk9OSUNBTElaRV9IT1NUX05BTUUiLCJ2YWx1ZXMiLCJHU1NBUElDYW5vbmljYWxpemF0aW9uVmFsdWUiLCJtZXJnZSIsImNyZWRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongo_credentials.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongocr.js":
/*!*******************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongocr.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongoCR = void 0;\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\nclass MongoCR extends auth_provider_1.AuthProvider {\n    async auth(authContext) {\n        const { connection, credentials } = authContext;\n        if (!credentials) {\n            throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n        }\n        const { username, password, source } = credentials;\n        const { nonce } = await connection.commandAsync((0, utils_1.ns)(`${source}.$cmd`), {\n            getnonce: 1\n        }, undefined);\n        const hashPassword = crypto.createHash(\"md5\").update(`${username}:mongo:${password}`, \"utf8\").digest(\"hex\");\n        // Final key\n        const key = crypto.createHash(\"md5\").update(`${nonce}${username}${hashPassword}`, \"utf8\").digest(\"hex\");\n        const authenticateCommand = {\n            authenticate: 1,\n            user: username,\n            nonce,\n            key\n        };\n        await connection.commandAsync((0, utils_1.ns)(`${source}.$cmd`), authenticateCommand, undefined);\n    }\n}\nexports.MongoCR = MongoCR; //# sourceMappingURL=mongocr.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvY3IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGVBQWUsR0FBRyxLQUFLO0FBQ3ZCLE1BQU1HLFNBQVNDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQy9CLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDLE1BQU1FLFVBQVVGLG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDLE1BQU1HLGtCQUFrQkgsbUJBQU9BLENBQUMsb0ZBQWlCO0FBQ2pELE1BQU1GLGdCQUFnQkssZ0JBQWdCQyxZQUFZO0lBQzlDLE1BQU1DLEtBQUtDLFdBQVcsRUFBRTtRQUNwQixNQUFNLEVBQUVDLFVBQVUsRUFBRUMsV0FBVyxFQUFFLEdBQUdGO1FBQ3BDLElBQUksQ0FBQ0UsYUFBYTtZQUNkLE1BQU0sSUFBSVAsUUFBUVEsNEJBQTRCLENBQUM7UUFDbkQ7UUFDQSxNQUFNLEVBQUVDLFFBQVEsRUFBRUMsUUFBUSxFQUFFQyxNQUFNLEVBQUUsR0FBR0o7UUFDdkMsTUFBTSxFQUFFSyxLQUFLLEVBQUUsR0FBRyxNQUFNTixXQUFXTyxZQUFZLENBQUMsQ0FBQyxHQUFHWixRQUFRYSxFQUFFLEVBQUUsQ0FBQyxFQUFFSCxPQUFPLEtBQUssQ0FBQyxHQUFHO1lBQUVJLFVBQVU7UUFBRSxHQUFHQztRQUNwRyxNQUFNQyxlQUFlbkIsT0FDaEJvQixVQUFVLENBQUMsT0FDWEMsTUFBTSxDQUFDLENBQUMsRUFBRVYsU0FBUyxPQUFPLEVBQUVDLFNBQVMsQ0FBQyxFQUFFLFFBQ3hDVSxNQUFNLENBQUM7UUFDWixZQUFZO1FBQ1osTUFBTUMsTUFBTXZCLE9BQ1BvQixVQUFVLENBQUMsT0FDWEMsTUFBTSxDQUFDLENBQUMsRUFBRVAsTUFBTSxFQUFFSCxTQUFTLEVBQUVRLGFBQWEsQ0FBQyxFQUFFLFFBQzdDRyxNQUFNLENBQUM7UUFDWixNQUFNRSxzQkFBc0I7WUFDeEJDLGNBQWM7WUFDZEMsTUFBTWY7WUFDTkc7WUFDQVM7UUFDSjtRQUNBLE1BQU1mLFdBQVdPLFlBQVksQ0FBQyxDQUFDLEdBQUdaLFFBQVFhLEVBQUUsRUFBRSxDQUFDLEVBQUVILE9BQU8sS0FBSyxDQUFDLEdBQUdXLHFCQUFxQk47SUFDMUY7QUFDSjtBQUNBckIsZUFBZSxHQUFHRSxTQUNsQixtQ0FBbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvY3IuanM/MDIzZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTW9uZ29DUiA9IHZvaWQgMDtcbmNvbnN0IGNyeXB0byA9IHJlcXVpcmUoXCJjcnlwdG9cIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uLy4uL2Vycm9yXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlsc1wiKTtcbmNvbnN0IGF1dGhfcHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuL2F1dGhfcHJvdmlkZXJcIik7XG5jbGFzcyBNb25nb0NSIGV4dGVuZHMgYXV0aF9wcm92aWRlcl8xLkF1dGhQcm92aWRlciB7XG4gICAgYXN5bmMgYXV0aChhdXRoQ29udGV4dCkge1xuICAgICAgICBjb25zdCB7IGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzIH0gPSBhdXRoQ29udGV4dDtcbiAgICAgICAgaWYgKCFjcmVkZW50aWFscykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcignQXV0aENvbnRleHQgbXVzdCBwcm92aWRlIGNyZWRlbnRpYWxzLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkLCBzb3VyY2UgfSA9IGNyZWRlbnRpYWxzO1xuICAgICAgICBjb25zdCB7IG5vbmNlIH0gPSBhd2FpdCBjb25uZWN0aW9uLmNvbW1hbmRBc3luYygoMCwgdXRpbHNfMS5ucykoYCR7c291cmNlfS4kY21kYCksIHsgZ2V0bm9uY2U6IDEgfSwgdW5kZWZpbmVkKTtcbiAgICAgICAgY29uc3QgaGFzaFBhc3N3b3JkID0gY3J5cHRvXG4gICAgICAgICAgICAuY3JlYXRlSGFzaCgnbWQ1JylcbiAgICAgICAgICAgIC51cGRhdGUoYCR7dXNlcm5hbWV9Om1vbmdvOiR7cGFzc3dvcmR9YCwgJ3V0ZjgnKVxuICAgICAgICAgICAgLmRpZ2VzdCgnaGV4Jyk7XG4gICAgICAgIC8vIEZpbmFsIGtleVxuICAgICAgICBjb25zdCBrZXkgPSBjcnlwdG9cbiAgICAgICAgICAgIC5jcmVhdGVIYXNoKCdtZDUnKVxuICAgICAgICAgICAgLnVwZGF0ZShgJHtub25jZX0ke3VzZXJuYW1lfSR7aGFzaFBhc3N3b3JkfWAsICd1dGY4JylcbiAgICAgICAgICAgIC5kaWdlc3QoJ2hleCcpO1xuICAgICAgICBjb25zdCBhdXRoZW50aWNhdGVDb21tYW5kID0ge1xuICAgICAgICAgICAgYXV0aGVudGljYXRlOiAxLFxuICAgICAgICAgICAgdXNlcjogdXNlcm5hbWUsXG4gICAgICAgICAgICBub25jZSxcbiAgICAgICAgICAgIGtleVxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbW1hbmRBc3luYygoMCwgdXRpbHNfMS5ucykoYCR7c291cmNlfS4kY21kYCksIGF1dGhlbnRpY2F0ZUNvbW1hbmQsIHVuZGVmaW5lZCk7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0NSID0gTW9uZ29DUjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vbmdvY3IuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiTW9uZ29DUiIsImNyeXB0byIsInJlcXVpcmUiLCJlcnJvcl8xIiwidXRpbHNfMSIsImF1dGhfcHJvdmlkZXJfMSIsIkF1dGhQcm92aWRlciIsImF1dGgiLCJhdXRoQ29udGV4dCIsImNvbm5lY3Rpb24iLCJjcmVkZW50aWFscyIsIk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwic291cmNlIiwibm9uY2UiLCJjb21tYW5kQXN5bmMiLCJucyIsImdldG5vbmNlIiwidW5kZWZpbmVkIiwiaGFzaFBhc3N3b3JkIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsImtleSIsImF1dGhlbnRpY2F0ZUNvbW1hbmQiLCJhdXRoZW50aWNhdGUiLCJ1c2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongocr.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_aws.js":
/*!***********************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_aws.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongoDBAWS = void 0;\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst BSON = __webpack_require__(/*! ../../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst deps_1 = __webpack_require__(/*! ../../deps */ \"(ssr)/./node_modules/mongodb/lib/deps.js\");\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\nconst mongo_credentials_1 = __webpack_require__(/*! ./mongo_credentials */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongo_credentials.js\");\nconst providers_1 = __webpack_require__(/*! ./providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\nconst ASCII_N = 110;\nconst AWS_RELATIVE_URI = \"http://169.254.170.2\";\nconst AWS_EC2_URI = \"http://169.254.169.254\";\nconst AWS_EC2_PATH = \"/latest/meta-data/iam/security-credentials\";\nconst bsonOptions = {\n    useBigInt64: false,\n    promoteLongs: true,\n    promoteValues: true,\n    promoteBuffers: false,\n    bsonRegExp: false\n};\nclass MongoDBAWS extends auth_provider_1.AuthProvider {\n    constructor(){\n        super();\n        this.randomBytesAsync = (0, util_1.promisify)(crypto.randomBytes);\n    }\n    async auth(authContext) {\n        const { connection } = authContext;\n        if (!authContext.credentials) {\n            throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n        }\n        if (\"kModuleError\" in deps_1.aws4) {\n            throw deps_1.aws4[\"kModuleError\"];\n        }\n        const { sign } = deps_1.aws4;\n        if ((0, utils_1.maxWireVersion)(connection) < 9) {\n            throw new error_1.MongoCompatibilityError(\"MONGODB-AWS authentication requires MongoDB version 4.4 or later\");\n        }\n        if (!authContext.credentials.username) {\n            authContext.credentials = await makeTempCredentials(authContext.credentials);\n        }\n        const { credentials } = authContext;\n        const accessKeyId = credentials.username;\n        const secretAccessKey = credentials.password;\n        const sessionToken = credentials.mechanismProperties.AWS_SESSION_TOKEN;\n        // If all three defined, include sessionToken, else include username and pass, else no credentials\n        const awsCredentials = accessKeyId && secretAccessKey && sessionToken ? {\n            accessKeyId,\n            secretAccessKey,\n            sessionToken\n        } : accessKeyId && secretAccessKey ? {\n            accessKeyId,\n            secretAccessKey\n        } : undefined;\n        const db = credentials.source;\n        const nonce = await this.randomBytesAsync(32);\n        const saslStart = {\n            saslStart: 1,\n            mechanism: \"MONGODB-AWS\",\n            payload: BSON.serialize({\n                r: nonce,\n                p: ASCII_N\n            }, bsonOptions)\n        };\n        const saslStartResponse = await connection.commandAsync((0, utils_1.ns)(`${db}.$cmd`), saslStart, undefined);\n        const serverResponse = BSON.deserialize(saslStartResponse.payload.buffer, bsonOptions);\n        const host = serverResponse.h;\n        const serverNonce = serverResponse.s.buffer;\n        if (serverNonce.length !== 64) {\n            // TODO(NODE-3483)\n            throw new error_1.MongoRuntimeError(`Invalid server nonce length ${serverNonce.length}, expected 64`);\n        }\n        if (!utils_1.ByteUtils.equals(serverNonce.subarray(0, nonce.byteLength), nonce)) {\n            // throw because the serverNonce's leading 32 bytes must equal the client nonce's 32 bytes\n            // https://github.com/mongodb/specifications/blob/875446db44aade414011731840831f38a6c668df/source/auth/auth.rst#id11\n            // TODO(NODE-3483)\n            throw new error_1.MongoRuntimeError(\"Server nonce does not begin with client nonce\");\n        }\n        if (host.length < 1 || host.length > 255 || host.indexOf(\"..\") !== -1) {\n            // TODO(NODE-3483)\n            throw new error_1.MongoRuntimeError(`Server returned an invalid host: \"${host}\"`);\n        }\n        const body = \"Action=GetCallerIdentity&Version=2011-06-15\";\n        const options = sign({\n            method: \"POST\",\n            host,\n            region: deriveRegion(serverResponse.h),\n            service: \"sts\",\n            headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded\",\n                \"Content-Length\": body.length,\n                \"X-MongoDB-Server-Nonce\": utils_1.ByteUtils.toBase64(serverNonce),\n                \"X-MongoDB-GS2-CB-Flag\": \"n\"\n            },\n            path: \"/\",\n            body\n        }, awsCredentials);\n        const payload = {\n            a: options.headers.Authorization,\n            d: options.headers[\"X-Amz-Date\"]\n        };\n        if (sessionToken) {\n            payload.t = sessionToken;\n        }\n        const saslContinue = {\n            saslContinue: 1,\n            conversationId: 1,\n            payload: BSON.serialize(payload, bsonOptions)\n        };\n        await connection.commandAsync((0, utils_1.ns)(`${db}.$cmd`), saslContinue, undefined);\n    }\n}\nexports.MongoDBAWS = MongoDBAWS;\nasync function makeTempCredentials(credentials) {\n    function makeMongoCredentialsFromAWSTemp(creds) {\n        if (!creds.AccessKeyId || !creds.SecretAccessKey || !creds.Token) {\n            throw new error_1.MongoMissingCredentialsError(\"Could not obtain temporary MONGODB-AWS credentials\");\n        }\n        return new mongo_credentials_1.MongoCredentials({\n            username: creds.AccessKeyId,\n            password: creds.SecretAccessKey,\n            source: credentials.source,\n            mechanism: providers_1.AuthMechanism.MONGODB_AWS,\n            mechanismProperties: {\n                AWS_SESSION_TOKEN: creds.Token\n            }\n        });\n    }\n    const credentialProvider = (0, deps_1.getAwsCredentialProvider)();\n    // Check if the AWS credential provider from the SDK is present. If not,\n    // use the old method.\n    if (\"kModuleError\" in credentialProvider) {\n        // If the environment variable AWS_CONTAINER_CREDENTIALS_RELATIVE_URI\n        // is set then drivers MUST assume that it was set by an AWS ECS agent\n        if (process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI) {\n            return makeMongoCredentialsFromAWSTemp(await (0, utils_1.request)(`${AWS_RELATIVE_URI}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`));\n        }\n        // Otherwise assume we are on an EC2 instance\n        // get a token\n        const token = await (0, utils_1.request)(`${AWS_EC2_URI}/latest/api/token`, {\n            method: \"PUT\",\n            json: false,\n            headers: {\n                \"X-aws-ec2-metadata-token-ttl-seconds\": 30\n            }\n        });\n        // get role name\n        const roleName = await (0, utils_1.request)(`${AWS_EC2_URI}/${AWS_EC2_PATH}`, {\n            json: false,\n            headers: {\n                \"X-aws-ec2-metadata-token\": token\n            }\n        });\n        // get temp credentials\n        const creds = await (0, utils_1.request)(`${AWS_EC2_URI}/${AWS_EC2_PATH}/${roleName}`, {\n            headers: {\n                \"X-aws-ec2-metadata-token\": token\n            }\n        });\n        return makeMongoCredentialsFromAWSTemp(creds);\n    } else {\n        /*\n         * Creates a credential provider that will attempt to find credentials from the\n         * following sources (listed in order of precedence):\n         *\n         * - Environment variables exposed via process.env\n         * - SSO credentials from token cache\n         * - Web identity token credentials\n         * - Shared credentials and config ini files\n         * - The EC2/ECS Instance Metadata Service\n         */ const { fromNodeProviderChain } = credentialProvider;\n        const provider = fromNodeProviderChain();\n        try {\n            const creds = await provider();\n            return makeMongoCredentialsFromAWSTemp({\n                AccessKeyId: creds.accessKeyId,\n                SecretAccessKey: creds.secretAccessKey,\n                Token: creds.sessionToken,\n                Expiration: creds.expiration\n            });\n        } catch (error) {\n            throw new error_1.MongoAWSError(error.message);\n        }\n    }\n}\nfunction deriveRegion(host) {\n    const parts = host.split(\".\");\n    if (parts.length === 1 || parts[1] === \"amazonaws\") {\n        return \"us-east-1\";\n    }\n    return parts[1];\n} //# sourceMappingURL=mongodb_aws.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfYXdzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBRyxLQUFLO0FBQzFCLE1BQU1HLFNBQVNDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQy9CLE1BQU1DLFNBQVNELG1CQUFPQSxDQUFDLGtCQUFNO0FBQzdCLE1BQU1FLE9BQU9GLG1CQUFPQSxDQUFDLDREQUFZO0FBQ2pDLE1BQU1HLFNBQVNILG1CQUFPQSxDQUFDLDREQUFZO0FBQ25DLE1BQU1JLFVBQVVKLG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDLE1BQU1LLFVBQVVMLG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDLE1BQU1NLGtCQUFrQk4sbUJBQU9BLENBQUMsb0ZBQWlCO0FBQ2pELE1BQU1PLHNCQUFzQlAsbUJBQU9BLENBQUMsNEZBQXFCO0FBQ3pELE1BQU1RLGNBQWNSLG1CQUFPQSxDQUFDLDRFQUFhO0FBQ3pDLE1BQU1TLFVBQVU7QUFDaEIsTUFBTUMsbUJBQW1CO0FBQ3pCLE1BQU1DLGNBQWM7QUFDcEIsTUFBTUMsZUFBZTtBQUNyQixNQUFNQyxjQUFjO0lBQ2hCQyxhQUFhO0lBQ2JDLGNBQWM7SUFDZEMsZUFBZTtJQUNmQyxnQkFBZ0I7SUFDaEJDLFlBQVk7QUFDaEI7QUFDQSxNQUFNcEIsbUJBQW1CUSxnQkFBZ0JhLFlBQVk7SUFDakRDLGFBQWM7UUFDVixLQUFLO1FBQ0wsSUFBSSxDQUFDQyxnQkFBZ0IsR0FBRyxDQUFDLEdBQUdwQixPQUFPcUIsU0FBUyxFQUFFdkIsT0FBT3dCLFdBQVc7SUFDcEU7SUFDQSxNQUFNQyxLQUFLQyxXQUFXLEVBQUU7UUFDcEIsTUFBTSxFQUFFQyxVQUFVLEVBQUUsR0FBR0Q7UUFDdkIsSUFBSSxDQUFDQSxZQUFZRSxXQUFXLEVBQUU7WUFDMUIsTUFBTSxJQUFJdkIsUUFBUXdCLDRCQUE0QixD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Q2pEO0lBQ0o7QUFDSjtBQUNBLFNBQVNsQyxhQUFhZixJQUFJO0lBQ3RCLE1BQU1rRCxRQUFRbEQsS0FBS21ELEtBQUssQ0FBQztJQUN6QixJQUFJRCxNQUFNOUMsTUFBTSxLQUFLLEtBQUs4QyxLQUFLLENBQUMsRUFBRSxLQUFLLGFBQWE7UUFDaEQsT0FBTztJQUNYO0lBQ0EsT0FBT0EsS0FBSyxDQUFDLEVBQUU7QUFDbkIsRUFDQSx1Q0FBdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfYXdzLmpzPzlmMTUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk1vbmdvREJBV1MgPSB2b2lkIDA7XG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKFwiY3J5cHRvXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcInV0aWxcIik7XG5jb25zdCBCU09OID0gcmVxdWlyZShcIi4uLy4uL2Jzb25cIik7XG5jb25zdCBkZXBzXzEgPSByZXF1aXJlKFwiLi4vLi4vZGVwc1wiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vLi4vZXJyb3JcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzXCIpO1xuY29uc3QgYXV0aF9wcm92aWRlcl8xID0gcmVxdWlyZShcIi4vYXV0aF9wcm92aWRlclwiKTtcbmNvbnN0IG1vbmdvX2NyZWRlbnRpYWxzXzEgPSByZXF1aXJlKFwiLi9tb25nb19jcmVkZW50aWFsc1wiKTtcbmNvbnN0IHByb3ZpZGVyc18xID0gcmVxdWlyZShcIi4vcHJvdmlkZXJzXCIpO1xuY29uc3QgQVNDSUlfTiA9IDExMDtcbmNvbnN0IEFXU19SRUxBVElWRV9VUkkgPSAnaHR0cDovLzE2OS4yNTQuMTcwLjInO1xuY29uc3QgQVdTX0VDMl9VUkkgPSAnaHR0cDovLzE2OS4yNTQuMTY5LjI1NCc7XG5jb25zdCBBV1NfRUMyX1BBVEggPSAnL2xhdGVzdC9tZXRhLWRhdGEvaWFtL3NlY3VyaXR5LWNyZWRlbnRpYWxzJztcbmNvbnN0IGJzb25PcHRpb25zID0ge1xuICAgIHVzZUJpZ0ludDY0OiBmYWxzZSxcbiAgICBwcm9tb3RlTG9uZ3M6IHRydWUsXG4gICAgcHJvbW90ZVZhbHVlczogdHJ1ZSxcbiAgICBwcm9tb3RlQnVmZmVyczogZmFsc2UsXG4gICAgYnNvblJlZ0V4cDogZmFsc2Vcbn07XG5jbGFzcyBNb25nb0RCQVdTIGV4dGVuZHMgYXV0aF9wcm92aWRlcl8xLkF1dGhQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmFuZG9tQnl0ZXNBc3luYyA9ICgwLCB1dGlsXzEucHJvbWlzaWZ5KShjcnlwdG8ucmFuZG9tQnl0ZXMpO1xuICAgIH1cbiAgICBhc3luYyBhdXRoKGF1dGhDb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IHsgY29ubmVjdGlvbiB9ID0gYXV0aENvbnRleHQ7XG4gICAgICAgIGlmICghYXV0aENvbnRleHQuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IoJ0F1dGhDb250ZXh0IG11c3QgcHJvdmlkZSBjcmVkZW50aWFscy4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJ2tNb2R1bGVFcnJvcicgaW4gZGVwc18xLmF3czQpIHtcbiAgICAgICAgICAgIHRocm93IGRlcHNfMS5hd3M0WydrTW9kdWxlRXJyb3InXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHNpZ24gfSA9IGRlcHNfMS5hd3M0O1xuICAgICAgICBpZiAoKDAsIHV0aWxzXzEubWF4V2lyZVZlcnNpb24pKGNvbm5lY3Rpb24pIDwgOSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IoJ01PTkdPREItQVdTIGF1dGhlbnRpY2F0aW9uIHJlcXVpcmVzIE1vbmdvREIgdmVyc2lvbiA0LjQgb3IgbGF0ZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWF1dGhDb250ZXh0LmNyZWRlbnRpYWxzLnVzZXJuYW1lKSB7XG4gICAgICAgICAgICBhdXRoQ29udGV4dC5jcmVkZW50aWFscyA9IGF3YWl0IG1ha2VUZW1wQ3JlZGVudGlhbHMoYXV0aENvbnRleHQuY3JlZGVudGlhbHMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgY3JlZGVudGlhbHMgfSA9IGF1dGhDb250ZXh0O1xuICAgICAgICBjb25zdCBhY2Nlc3NLZXlJZCA9IGNyZWRlbnRpYWxzLnVzZXJuYW1lO1xuICAgICAgICBjb25zdCBzZWNyZXRBY2Nlc3NLZXkgPSBjcmVkZW50aWFscy5wYXNzd29yZDtcbiAgICAgICAgY29uc3Qgc2Vzc2lvblRva2VuID0gY3JlZGVudGlhbHMubWVjaGFuaXNtUHJvcGVydGllcy5BV1NfU0VTU0lPTl9UT0tFTjtcbiAgICAgICAgLy8gSWYgYWxsIHRocmVlIGRlZmluZWQsIGluY2x1ZGUgc2Vzc2lvblRva2VuLCBlbHNlIGluY2x1ZGUgdXNlcm5hbWUgYW5kIHBhc3MsIGVsc2Ugbm8gY3JlZGVudGlhbHNcbiAgICAgICAgY29uc3QgYXdzQ3JlZGVudGlhbHMgPSBhY2Nlc3NLZXlJZCAmJiBzZWNyZXRBY2Nlc3NLZXkgJiYgc2Vzc2lvblRva2VuXG4gICAgICAgICAgICA/IHsgYWNjZXNzS2V5SWQsIHNlY3JldEFjY2Vzc0tleSwgc2Vzc2lvblRva2VuIH1cbiAgICAgICAgICAgIDogYWNjZXNzS2V5SWQgJiYgc2VjcmV0QWNjZXNzS2V5XG4gICAgICAgICAgICAgICAgPyB7IGFjY2Vzc0tleUlkLCBzZWNyZXRBY2Nlc3NLZXkgfVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBkYiA9IGNyZWRlbnRpYWxzLnNvdXJjZTtcbiAgICAgICAgY29uc3Qgbm9uY2UgPSBhd2FpdCB0aGlzLnJhbmRvbUJ5dGVzQXN5bmMoMzIpO1xuICAgICAgICBjb25zdCBzYXNsU3RhcnQgPSB7XG4gICAgICAgICAgICBzYXNsU3RhcnQ6IDEsXG4gICAgICAgICAgICBtZWNoYW5pc206ICdNT05HT0RCLUFXUycsXG4gICAgICAgICAgICBwYXlsb2FkOiBCU09OLnNlcmlhbGl6ZSh7IHI6IG5vbmNlLCBwOiBBU0NJSV9OIH0sIGJzb25PcHRpb25zKVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzYXNsU3RhcnRSZXNwb25zZSA9IGF3YWl0IGNvbm5lY3Rpb24uY29tbWFuZEFzeW5jKCgwLCB1dGlsc18xLm5zKShgJHtkYn0uJGNtZGApLCBzYXNsU3RhcnQsIHVuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IHNlcnZlclJlc3BvbnNlID0gQlNPTi5kZXNlcmlhbGl6ZShzYXNsU3RhcnRSZXNwb25zZS5wYXlsb2FkLmJ1ZmZlciwgYnNvbk9wdGlvbnMpO1xuICAgICAgICBjb25zdCBob3N0ID0gc2VydmVyUmVzcG9uc2UuaDtcbiAgICAgICAgY29uc3Qgc2VydmVyTm9uY2UgPSBzZXJ2ZXJSZXNwb25zZS5zLmJ1ZmZlcjtcbiAgICAgICAgaWYgKHNlcnZlck5vbmNlLmxlbmd0aCAhPT0gNjQpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoYEludmFsaWQgc2VydmVyIG5vbmNlIGxlbmd0aCAke3NlcnZlck5vbmNlLmxlbmd0aH0sIGV4cGVjdGVkIDY0YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF1dGlsc18xLkJ5dGVVdGlscy5lcXVhbHMoc2VydmVyTm9uY2Uuc3ViYXJyYXkoMCwgbm9uY2UuYnl0ZUxlbmd0aCksIG5vbmNlKSkge1xuICAgICAgICAgICAgLy8gdGhyb3cgYmVjYXVzZSB0aGUgc2VydmVyTm9uY2UncyBsZWFkaW5nIDMyIGJ5dGVzIG11c3QgZXF1YWwgdGhlIGNsaWVudCBub25jZSdzIDMyIGJ5dGVzXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbW9uZ29kYi9zcGVjaWZpY2F0aW9ucy9ibG9iLzg3NTQ0NmRiNDRhYWRlNDE0MDExNzMxODQwODMxZjM4YTZjNjY4ZGYvc291cmNlL2F1dGgvYXV0aC5yc3QjaWQxMVxuICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODMpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignU2VydmVyIG5vbmNlIGRvZXMgbm90IGJlZ2luIHdpdGggY2xpZW50IG5vbmNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhvc3QubGVuZ3RoIDwgMSB8fCBob3N0Lmxlbmd0aCA+IDI1NSB8fCBob3N0LmluZGV4T2YoJy4uJykgIT09IC0xKSB7XG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4MylcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBTZXJ2ZXIgcmV0dXJuZWQgYW4gaW52YWxpZCBob3N0OiBcIiR7aG9zdH1cImApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJvZHkgPSAnQWN0aW9uPUdldENhbGxlcklkZW50aXR5JlZlcnNpb249MjAxMS0wNi0xNSc7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBzaWduKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaG9zdCxcbiAgICAgICAgICAgIHJlZ2lvbjogZGVyaXZlUmVnaW9uKHNlcnZlclJlc3BvbnNlLmgpLFxuICAgICAgICAgICAgc2VydmljZTogJ3N0cycsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICAgICAgICAgICAgICdDb250ZW50LUxlbmd0aCc6IGJvZHkubGVuZ3RoLFxuICAgICAgICAgICAgICAgICdYLU1vbmdvREItU2VydmVyLU5vbmNlJzogdXRpbHNfMS5CeXRlVXRpbHMudG9CYXNlNjQoc2VydmVyTm9uY2UpLFxuICAgICAgICAgICAgICAgICdYLU1vbmdvREItR1MyLUNCLUZsYWcnOiAnbidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiAnLycsXG4gICAgICAgICAgICBib2R5XG4gICAgICAgIH0sIGF3c0NyZWRlbnRpYWxzKTtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgIGE6IG9wdGlvbnMuaGVhZGVycy5BdXRob3JpemF0aW9uLFxuICAgICAgICAgICAgZDogb3B0aW9ucy5oZWFkZXJzWydYLUFtei1EYXRlJ11cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHNlc3Npb25Ub2tlbikge1xuICAgICAgICAgICAgcGF5bG9hZC50ID0gc2Vzc2lvblRva2VuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNhc2xDb250aW51ZSA9IHtcbiAgICAgICAgICAgIHNhc2xDb250aW51ZTogMSxcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiAxLFxuICAgICAgICAgICAgcGF5bG9hZDogQlNPTi5zZXJpYWxpemUocGF5bG9hZCwgYnNvbk9wdGlvbnMpXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29tbWFuZEFzeW5jKCgwLCB1dGlsc18xLm5zKShgJHtkYn0uJGNtZGApLCBzYXNsQ29udGludWUsIHVuZGVmaW5lZCk7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0RCQVdTID0gTW9uZ29EQkFXUztcbmFzeW5jIGZ1bmN0aW9uIG1ha2VUZW1wQ3JlZGVudGlhbHMoY3JlZGVudGlhbHMpIHtcbiAgICBmdW5jdGlvbiBtYWtlTW9uZ29DcmVkZW50aWFsc0Zyb21BV1NUZW1wKGNyZWRzKSB7XG4gICAgICAgIGlmICghY3JlZHMuQWNjZXNzS2V5SWQgfHwgIWNyZWRzLlNlY3JldEFjY2Vzc0tleSB8fCAhY3JlZHMuVG9rZW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IoJ0NvdWxkIG5vdCBvYnRhaW4gdGVtcG9yYXJ5IE1PTkdPREItQVdTIGNyZWRlbnRpYWxzJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBtb25nb19jcmVkZW50aWFsc18xLk1vbmdvQ3JlZGVudGlhbHMoe1xuICAgICAgICAgICAgdXNlcm5hbWU6IGNyZWRzLkFjY2Vzc0tleUlkLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IGNyZWRzLlNlY3JldEFjY2Vzc0tleSxcbiAgICAgICAgICAgIHNvdXJjZTogY3JlZGVudGlhbHMuc291cmNlLFxuICAgICAgICAgICAgbWVjaGFuaXNtOiBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfQVdTLFxuICAgICAgICAgICAgbWVjaGFuaXNtUHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgIEFXU19TRVNTSU9OX1RPS0VOOiBjcmVkcy5Ub2tlblxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgY3JlZGVudGlhbFByb3ZpZGVyID0gKDAsIGRlcHNfMS5nZXRBd3NDcmVkZW50aWFsUHJvdmlkZXIpKCk7XG4gICAgLy8gQ2hlY2sgaWYgdGhlIEFXUyBjcmVkZW50aWFsIHByb3ZpZGVyIGZyb20gdGhlIFNESyBpcyBwcmVzZW50LiBJZiBub3QsXG4gICAgLy8gdXNlIHRoZSBvbGQgbWV0aG9kLlxuICAgIGlmICgna01vZHVsZUVycm9yJyBpbiBjcmVkZW50aWFsUHJvdmlkZXIpIHtcbiAgICAgICAgLy8gSWYgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlIEFXU19DT05UQUlORVJfQ1JFREVOVElBTFNfUkVMQVRJVkVfVVJJXG4gICAgICAgIC8vIGlzIHNldCB0aGVuIGRyaXZlcnMgTVVTVCBhc3N1bWUgdGhhdCBpdCB3YXMgc2V0IGJ5IGFuIEFXUyBFQ1MgYWdlbnRcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52LkFXU19DT05UQUlORVJfQ1JFREVOVElBTFNfUkVMQVRJVkVfVVJJKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZU1vbmdvQ3JlZGVudGlhbHNGcm9tQVdTVGVtcChhd2FpdCAoMCwgdXRpbHNfMS5yZXF1ZXN0KShgJHtBV1NfUkVMQVRJVkVfVVJJfSR7cHJvY2Vzcy5lbnYuQVdTX0NPTlRBSU5FUl9DUkVERU5USUFMU19SRUxBVElWRV9VUkl9YCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE90aGVyd2lzZSBhc3N1bWUgd2UgYXJlIG9uIGFuIEVDMiBpbnN0YW5jZVxuICAgICAgICAvLyBnZXQgYSB0b2tlblxuICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0ICgwLCB1dGlsc18xLnJlcXVlc3QpKGAke0FXU19FQzJfVVJJfS9sYXRlc3QvYXBpL3Rva2VuYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgIGpzb246IGZhbHNlLFxuICAgICAgICAgICAgaGVhZGVyczogeyAnWC1hd3MtZWMyLW1ldGFkYXRhLXRva2VuLXR0bC1zZWNvbmRzJzogMzAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gZ2V0IHJvbGUgbmFtZVxuICAgICAgICBjb25zdCByb2xlTmFtZSA9IGF3YWl0ICgwLCB1dGlsc18xLnJlcXVlc3QpKGAke0FXU19FQzJfVVJJfS8ke0FXU19FQzJfUEFUSH1gLCB7XG4gICAgICAgICAgICBqc29uOiBmYWxzZSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtYXdzLWVjMi1tZXRhZGF0YS10b2tlbic6IHRva2VuIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGdldCB0ZW1wIGNyZWRlbnRpYWxzXG4gICAgICAgIGNvbnN0IGNyZWRzID0gYXdhaXQgKDAsIHV0aWxzXzEucmVxdWVzdCkoYCR7QVdTX0VDMl9VUkl9LyR7QVdTX0VDMl9QQVRIfS8ke3JvbGVOYW1lfWAsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtYXdzLWVjMi1tZXRhZGF0YS10b2tlbic6IHRva2VuIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtYWtlTW9uZ29DcmVkZW50aWFsc0Zyb21BV1NUZW1wKGNyZWRzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8qXG4gICAgICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIHByb3ZpZGVyIHRoYXQgd2lsbCBhdHRlbXB0IHRvIGZpbmQgY3JlZGVudGlhbHMgZnJvbSB0aGVcbiAgICAgICAgICogZm9sbG93aW5nIHNvdXJjZXMgKGxpc3RlZCBpbiBvcmRlciBvZiBwcmVjZWRlbmNlKTpcbiAgICAgICAgICpcbiAgICAgICAgICogLSBFbnZpcm9ubWVudCB2YXJpYWJsZXMgZXhwb3NlZCB2aWEgcHJvY2Vzcy5lbnZcbiAgICAgICAgICogLSBTU08gY3JlZGVudGlhbHMgZnJvbSB0b2tlbiBjYWNoZVxuICAgICAgICAgKiAtIFdlYiBpZGVudGl0eSB0b2tlbiBjcmVkZW50aWFsc1xuICAgICAgICAgKiAtIFNoYXJlZCBjcmVkZW50aWFscyBhbmQgY29uZmlnIGluaSBmaWxlc1xuICAgICAgICAgKiAtIFRoZSBFQzIvRUNTIEluc3RhbmNlIE1ldGFkYXRhIFNlcnZpY2VcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IHsgZnJvbU5vZGVQcm92aWRlckNoYWluIH0gPSBjcmVkZW50aWFsUHJvdmlkZXI7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gZnJvbU5vZGVQcm92aWRlckNoYWluKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjcmVkcyA9IGF3YWl0IHByb3ZpZGVyKCk7XG4gICAgICAgICAgICByZXR1cm4gbWFrZU1vbmdvQ3JlZGVudGlhbHNGcm9tQVdTVGVtcCh7XG4gICAgICAgICAgICAgICAgQWNjZXNzS2V5SWQ6IGNyZWRzLmFjY2Vzc0tleUlkLFxuICAgICAgICAgICAgICAgIFNlY3JldEFjY2Vzc0tleTogY3JlZHMuc2VjcmV0QWNjZXNzS2V5LFxuICAgICAgICAgICAgICAgIFRva2VuOiBjcmVkcy5zZXNzaW9uVG9rZW4sXG4gICAgICAgICAgICAgICAgRXhwaXJhdGlvbjogY3JlZHMuZXhwaXJhdGlvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FXU0Vycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gZGVyaXZlUmVnaW9uKGhvc3QpIHtcbiAgICBjb25zdCBwYXJ0cyA9IGhvc3Quc3BsaXQoJy4nKTtcbiAgICBpZiAocGFydHMubGVuZ3RoID09PSAxIHx8IHBhcnRzWzFdID09PSAnYW1hem9uYXdzJykge1xuICAgICAgICByZXR1cm4gJ3VzLWVhc3QtMSc7XG4gICAgfVxuICAgIHJldHVybiBwYXJ0c1sxXTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vbmdvZGJfYXdzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk1vbmdvREJBV1MiLCJjcnlwdG8iLCJyZXF1aXJlIiwidXRpbF8xIiwiQlNPTiIsImRlcHNfMSIsImVycm9yXzEiLCJ1dGlsc18xIiwiYXV0aF9wcm92aWRlcl8xIiwibW9uZ29fY3JlZGVudGlhbHNfMSIsInByb3ZpZGVyc18xIiwiQVNDSUlfTiIsIkFXU19SRUxBVElWRV9VUkkiLCJBV1NfRUMyX1VSSSIsIkFXU19FQzJfUEFUSCIsImJzb25PcHRpb25zIiwidXNlQmlnSW50NjQiLCJwcm9tb3RlTG9uZ3MiLCJwcm9tb3RlVmFsdWVzIiwicHJvbW90ZUJ1ZmZlcnMiLCJic29uUmVnRXhwIiwiQXV0aFByb3ZpZGVyIiwiY29uc3RydWN0b3IiLCJyYW5kb21CeXRlc0FzeW5jIiwicHJvbWlzaWZ5IiwicmFuZG9tQnl0ZXMiLCJhdXRoIiwiYXV0aENvbnRleHQiLCJjb25uZWN0aW9uIiwiY3JlZGVudGlhbHMiLCJNb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yIiwiYXdzNCIsInNpZ24iLCJtYXhXaXJlVmVyc2lvbiIsIk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yIiwidXNlcm5hbWUiLCJtYWtlVGVtcENyZWRlbnRpYWxzIiwiYWNjZXNzS2V5SWQiLCJzZWNyZXRBY2Nlc3NLZXkiLCJwYXNzd29yZCIsInNlc3Npb25Ub2tlbiIsIm1lY2hhbmlzbVByb3BlcnRpZXMiLCJBV1NfU0VTU0lPTl9UT0tFTiIsImF3c0NyZWRlbnRpYWxzIiwidW5kZWZpbmVkIiwiZGIiLCJzb3VyY2UiLCJub25jZSIsInNhc2xTdGFydCIsIm1lY2hhbmlzbSIsInBheWxvYWQiLCJzZXJpYWxpemUiLCJyIiwicCIsInNhc2xTdGFydFJlc3BvbnNlIiwiY29tbWFuZEFzeW5jIiwibnMiLCJzZXJ2ZXJSZXNwb25zZSIsImRlc2VyaWFsaXplIiwiYnVmZmVyIiwiaG9zdCIsImgiLCJzZXJ2ZXJOb25jZSIsInMiLCJsZW5ndGgiLCJNb25nb1J1bnRpbWVFcnJvciIsIkJ5dGVVdGlscyIsImVxdWFscyIsInN1YmFycmF5IiwiYnl0ZUxlbmd0aCIsImluZGV4T2YiLCJib2R5Iiwib3B0aW9ucyIsIm1ldGhvZCIsInJlZ2lvbiIsImRlcml2ZVJlZ2lvbiIsInNlcnZpY2UiLCJoZWFkZXJzIiwidG9CYXNlNjQiLCJwYXRoIiwiYSIsIkF1dGhvcml6YXRpb24iLCJkIiwidCIsInNhc2xDb250aW51ZSIsImNvbnZlcnNhdGlvbklkIiwibWFrZU1vbmdvQ3JlZGVudGlhbHNGcm9tQVdTVGVtcCIsImNyZWRzIiwiQWNjZXNzS2V5SWQiLCJTZWNyZXRBY2Nlc3NLZXkiLCJUb2tlbiIsIk1vbmdvQ3JlZGVudGlhbHMiLCJBdXRoTWVjaGFuaXNtIiwiTU9OR09EQl9BV1MiLCJjcmVkZW50aWFsUHJvdmlkZXIiLCJnZXRBd3NDcmVkZW50aWFsUHJvdmlkZXIiLCJwcm9jZXNzIiwiZW52IiwiQVdTX0NPTlRBSU5FUl9DUkVERU5USUFMU19SRUxBVElWRV9VUkkiLCJyZXF1ZXN0IiwidG9rZW4iLCJqc29uIiwicm9sZU5hbWUiLCJmcm9tTm9kZVByb3ZpZGVyQ2hhaW4iLCJwcm92aWRlciIsIkV4cGlyYXRpb24iLCJleHBpcmF0aW9uIiwiZXJyb3IiLCJNb25nb0FXU0Vycm9yIiwibWVzc2FnZSIsInBhcnRzIiwic3BsaXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_aws.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc.js":
/*!************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongoDBOIDC = exports.OIDC_WORKFLOWS = void 0;\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\nconst aws_service_workflow_1 = __webpack_require__(/*! ./mongodb_oidc/aws_service_workflow */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/aws_service_workflow.js\");\nconst azure_service_workflow_1 = __webpack_require__(/*! ./mongodb_oidc/azure_service_workflow */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_service_workflow.js\");\nconst callback_workflow_1 = __webpack_require__(/*! ./mongodb_oidc/callback_workflow */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_workflow.js\");\n/** Error when credentials are missing. */ const MISSING_CREDENTIALS_ERROR = \"AuthContext must provide credentials.\";\n/** @internal */ exports.OIDC_WORKFLOWS = new Map();\nexports.OIDC_WORKFLOWS.set(\"callback\", new callback_workflow_1.CallbackWorkflow());\nexports.OIDC_WORKFLOWS.set(\"aws\", new aws_service_workflow_1.AwsServiceWorkflow());\nexports.OIDC_WORKFLOWS.set(\"azure\", new azure_service_workflow_1.AzureServiceWorkflow());\n/**\n * OIDC auth provider.\n * @experimental\n */ class MongoDBOIDC extends auth_provider_1.AuthProvider {\n    /**\n     * Instantiate the auth provider.\n     */ constructor(){\n        super();\n    }\n    /**\n     * Authenticate using OIDC\n     */ async auth(authContext) {\n        const { connection, reauthenticating, response } = authContext;\n        const credentials = getCredentials(authContext);\n        const workflow = getWorkflow(credentials);\n        await workflow.execute(connection, credentials, reauthenticating, response);\n    }\n    /**\n     * Add the speculative auth for the initial handshake.\n     */ async prepare(handshakeDoc, authContext) {\n        const credentials = getCredentials(authContext);\n        const workflow = getWorkflow(credentials);\n        const result = await workflow.speculativeAuth(credentials);\n        return {\n            ...handshakeDoc,\n            ...result\n        };\n    }\n}\nexports.MongoDBOIDC = MongoDBOIDC;\n/**\n * Get credentials from the auth context, throwing if they do not exist.\n */ function getCredentials(authContext) {\n    const { credentials } = authContext;\n    if (!credentials) {\n        throw new error_1.MongoMissingCredentialsError(MISSING_CREDENTIALS_ERROR);\n    }\n    return credentials;\n}\n/**\n * Gets either a device workflow or callback workflow.\n */ function getWorkflow(credentials) {\n    const providerName = credentials.mechanismProperties.PROVIDER_NAME;\n    const workflow = exports.OIDC_WORKFLOWS.get(providerName || \"callback\");\n    if (!workflow) {\n        throw new error_1.MongoInvalidArgumentError(`Could not load workflow for provider ${credentials.mechanismProperties.PROVIDER_NAME}`);\n    }\n    return workflow;\n} //# sourceMappingURL=mongodb_oidc.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsbUJBQW1CLEdBQUdBLHNCQUFzQixHQUFHLEtBQUs7QUFDcEQsTUFBTUksVUFBVUMsbUJBQU9BLENBQUMsOERBQWE7QUFDckMsTUFBTUMsa0JBQWtCRCxtQkFBT0EsQ0FBQyxvRkFBaUI7QUFDakQsTUFBTUUseUJBQXlCRixtQkFBT0EsQ0FBQyw0SEFBcUM7QUFDNUUsTUFBTUcsMkJBQTJCSCxtQkFBT0EsQ0FBQyxnSUFBdUM7QUFDaEYsTUFBTUksc0JBQXNCSixtQkFBT0EsQ0FBQyxzSEFBa0M7QUFDdEUsd0NBQXdDLEdBQ3hDLE1BQU1LLDRCQUE0QjtBQUNsQyxjQUFjLEdBQ2RWLHNCQUFzQixHQUFHLElBQUlXO0FBQzdCWCxRQUFRRyxjQUFjLENBQUNTLEdBQUcsQ0FBQyxZQUFZLElBQUlILG9CQUFvQkksZ0JBQWdCO0FBQy9FYixRQUFRRyxjQUFjLENBQUNTLEdBQUcsQ0FBQyxPQUFPLElBQUlMLHVCQUF1Qk8sa0JBQWtCO0FBQy9FZCxRQUFRRyxjQUFjLENBQUNTLEdBQUcsQ0FBQyxTQUFTLElBQUlKLHlCQUF5Qk8sb0JBQW9CO0FBQ3JGOzs7Q0FHQyxHQUNELE1BQU1iLG9CQUFvQkksZ0JBQWdCVSxZQUFZO0lBQ2xEOztLQUVDLEdBQ0RDLGFBQWM7UUFDVixLQUFLO0lBQ1Q7SUFDQTs7S0FFQyxHQUNELE1BQU1DLEtBQUtDLFdBQVcsRUFBRTtRQUNwQixNQUFNLEVBQUVDLFVBQVUsRUFBRUMsZ0JBQWdCLEVBQUVDLFFBQVEsRUFBRSxHQUFHSDtRQUNuRCxNQUFNSSxjQUFjQyxlQUFlTDtRQUNuQyxNQUFNTSxXQUFXQyxZQUFZSDtRQUM3QixNQUFNRSxTQUFTRSxPQUFPLENBQUNQLFlBQVlHLGFBQWFGLGtCQUFrQkM7SUFDdEU7SUFDQTs7S0FFQyxHQUNELE1BQU1NLFFBQVFDLFlBQVksRUFBRVYsV0FBVyxFQUFFO1FBQ3JDLE1BQU1JLGNBQWNDLGVBQWVMO1FBQ25DLE1BQU1NLFdBQVdDLFlBQVlIO1FBQzdCLE1BQU1PLFNBQVMsTUFBTUwsU0FBU00sZUFBZSxDQUFDUjtRQUM5QyxPQUFPO1lBQUUsR0FBR00sWUFBWTtZQUFFLEdBQUdDLE1BQU07UUFBQztJQUN4QztBQUNKO0FBQ0E5QixtQkFBbUIsR0FBR0U7QUFDdEI7O0NBRUMsR0FDRCxTQUFTc0IsZUFBZUwsV0FBVztJQUMvQixNQUFNLEVBQUVJLFdBQVcsRUFBRSxHQUFHSjtJQUN4QixJQUFJLENBQUNJLGFBQWE7UUFDZCxNQUFNLElBQUluQixRQUFRNEIsNEJBQTRCLENBQUN0QjtJQUNuRDtJQUNBLE9BQU9hO0FBQ1g7QUFDQTs7Q0FFQyxHQUNELFNBQVNHLFlBQVlILFdBQVc7SUFDNUIsTUFBTVUsZUFBZVYsWUFBWVcsbUJBQW1CLENBQUNDLGFBQWE7SUFDbEUsTUFBTVYsV0FBV3pCLFFBQVFHLGNBQWMsQ0FBQ2lDLEdBQUcsQ0FBQ0gsZ0JBQWdCO0lBQzVELElBQUksQ0FBQ1IsVUFBVTtRQUNYLE1BQU0sSUFBSXJCLFFBQVFpQyx5QkFBeUIsQ0FBQyxDQUFDLHFDQUFxQyxFQUFFZCxZQUFZVyxtQkFBbUIsQ0FBQ0MsYUFBYSxDQUFDLENBQUM7SUFDdkk7SUFDQSxPQUFPVjtBQUNYLEVBQ0Esd0NBQXdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvYXV0aC9tb25nb2RiX29pZGMuanM/N2ZlNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTW9uZ29EQk9JREMgPSBleHBvcnRzLk9JRENfV09SS0ZMT1dTID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi8uLi9lcnJvclwiKTtcbmNvbnN0IGF1dGhfcHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuL2F1dGhfcHJvdmlkZXJcIik7XG5jb25zdCBhd3Nfc2VydmljZV93b3JrZmxvd18xID0gcmVxdWlyZShcIi4vbW9uZ29kYl9vaWRjL2F3c19zZXJ2aWNlX3dvcmtmbG93XCIpO1xuY29uc3QgYXp1cmVfc2VydmljZV93b3JrZmxvd18xID0gcmVxdWlyZShcIi4vbW9uZ29kYl9vaWRjL2F6dXJlX3NlcnZpY2Vfd29ya2Zsb3dcIik7XG5jb25zdCBjYWxsYmFja193b3JrZmxvd18xID0gcmVxdWlyZShcIi4vbW9uZ29kYl9vaWRjL2NhbGxiYWNrX3dvcmtmbG93XCIpO1xuLyoqIEVycm9yIHdoZW4gY3JlZGVudGlhbHMgYXJlIG1pc3NpbmcuICovXG5jb25zdCBNSVNTSU5HX0NSRURFTlRJQUxTX0VSUk9SID0gJ0F1dGhDb250ZXh0IG11c3QgcHJvdmlkZSBjcmVkZW50aWFscy4nO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5PSURDX1dPUktGTE9XUyA9IG5ldyBNYXAoKTtcbmV4cG9ydHMuT0lEQ19XT1JLRkxPV1Muc2V0KCdjYWxsYmFjaycsIG5ldyBjYWxsYmFja193b3JrZmxvd18xLkNhbGxiYWNrV29ya2Zsb3coKSk7XG5leHBvcnRzLk9JRENfV09SS0ZMT1dTLnNldCgnYXdzJywgbmV3IGF3c19zZXJ2aWNlX3dvcmtmbG93XzEuQXdzU2VydmljZVdvcmtmbG93KCkpO1xuZXhwb3J0cy5PSURDX1dPUktGTE9XUy5zZXQoJ2F6dXJlJywgbmV3IGF6dXJlX3NlcnZpY2Vfd29ya2Zsb3dfMS5BenVyZVNlcnZpY2VXb3JrZmxvdygpKTtcbi8qKlxuICogT0lEQyBhdXRoIHByb3ZpZGVyLlxuICogQGV4cGVyaW1lbnRhbFxuICovXG5jbGFzcyBNb25nb0RCT0lEQyBleHRlbmRzIGF1dGhfcHJvdmlkZXJfMS5BdXRoUHJvdmlkZXIge1xuICAgIC8qKlxuICAgICAqIEluc3RhbnRpYXRlIHRoZSBhdXRoIHByb3ZpZGVyLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdXRoZW50aWNhdGUgdXNpbmcgT0lEQ1xuICAgICAqL1xuICAgIGFzeW5jIGF1dGgoYXV0aENvbnRleHQpIHtcbiAgICAgICAgY29uc3QgeyBjb25uZWN0aW9uLCByZWF1dGhlbnRpY2F0aW5nLCByZXNwb25zZSB9ID0gYXV0aENvbnRleHQ7XG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gZ2V0Q3JlZGVudGlhbHMoYXV0aENvbnRleHQpO1xuICAgICAgICBjb25zdCB3b3JrZmxvdyA9IGdldFdvcmtmbG93KGNyZWRlbnRpYWxzKTtcbiAgICAgICAgYXdhaXQgd29ya2Zsb3cuZXhlY3V0ZShjb25uZWN0aW9uLCBjcmVkZW50aWFscywgcmVhdXRoZW50aWNhdGluZywgcmVzcG9uc2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIHNwZWN1bGF0aXZlIGF1dGggZm9yIHRoZSBpbml0aWFsIGhhbmRzaGFrZS5cbiAgICAgKi9cbiAgICBhc3luYyBwcmVwYXJlKGhhbmRzaGFrZURvYywgYXV0aENvbnRleHQpIHtcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbHMgPSBnZXRDcmVkZW50aWFscyhhdXRoQ29udGV4dCk7XG4gICAgICAgIGNvbnN0IHdvcmtmbG93ID0gZ2V0V29ya2Zsb3coY3JlZGVudGlhbHMpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB3b3JrZmxvdy5zcGVjdWxhdGl2ZUF1dGgoY3JlZGVudGlhbHMpO1xuICAgICAgICByZXR1cm4geyAuLi5oYW5kc2hha2VEb2MsIC4uLnJlc3VsdCB9O1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29EQk9JREMgPSBNb25nb0RCT0lEQztcbi8qKlxuICogR2V0IGNyZWRlbnRpYWxzIGZyb20gdGhlIGF1dGggY29udGV4dCwgdGhyb3dpbmcgaWYgdGhleSBkbyBub3QgZXhpc3QuXG4gKi9cbmZ1bmN0aW9uIGdldENyZWRlbnRpYWxzKGF1dGhDb250ZXh0KSB7XG4gICAgY29uc3QgeyBjcmVkZW50aWFscyB9ID0gYXV0aENvbnRleHQ7XG4gICAgaWYgKCFjcmVkZW50aWFscykge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yKE1JU1NJTkdfQ1JFREVOVElBTFNfRVJST1IpO1xuICAgIH1cbiAgICByZXR1cm4gY3JlZGVudGlhbHM7XG59XG4vKipcbiAqIEdldHMgZWl0aGVyIGEgZGV2aWNlIHdvcmtmbG93IG9yIGNhbGxiYWNrIHdvcmtmbG93LlxuICovXG5mdW5jdGlvbiBnZXRXb3JrZmxvdyhjcmVkZW50aWFscykge1xuICAgIGNvbnN0IHByb3ZpZGVyTmFtZSA9IGNyZWRlbnRpYWxzLm1lY2hhbmlzbVByb3BlcnRpZXMuUFJPVklERVJfTkFNRTtcbiAgICBjb25zdCB3b3JrZmxvdyA9IGV4cG9ydHMuT0lEQ19XT1JLRkxPV1MuZ2V0KHByb3ZpZGVyTmFtZSB8fCAnY2FsbGJhY2snKTtcbiAgICBpZiAoIXdvcmtmbG93KSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYENvdWxkIG5vdCBsb2FkIHdvcmtmbG93IGZvciBwcm92aWRlciAke2NyZWRlbnRpYWxzLm1lY2hhbmlzbVByb3BlcnRpZXMuUFJPVklERVJfTkFNRX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHdvcmtmbG93O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9uZ29kYl9vaWRjLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk1vbmdvREJPSURDIiwiT0lEQ19XT1JLRkxPV1MiLCJlcnJvcl8xIiwicmVxdWlyZSIsImF1dGhfcHJvdmlkZXJfMSIsImF3c19zZXJ2aWNlX3dvcmtmbG93XzEiLCJhenVyZV9zZXJ2aWNlX3dvcmtmbG93XzEiLCJjYWxsYmFja193b3JrZmxvd18xIiwiTUlTU0lOR19DUkVERU5USUFMU19FUlJPUiIsIk1hcCIsInNldCIsIkNhbGxiYWNrV29ya2Zsb3ciLCJBd3NTZXJ2aWNlV29ya2Zsb3ciLCJBenVyZVNlcnZpY2VXb3JrZmxvdyIsIkF1dGhQcm92aWRlciIsImNvbnN0cnVjdG9yIiwiYXV0aCIsImF1dGhDb250ZXh0IiwiY29ubmVjdGlvbiIsInJlYXV0aGVudGljYXRpbmciLCJyZXNwb25zZSIsImNyZWRlbnRpYWxzIiwiZ2V0Q3JlZGVudGlhbHMiLCJ3b3JrZmxvdyIsImdldFdvcmtmbG93IiwiZXhlY3V0ZSIsInByZXBhcmUiLCJoYW5kc2hha2VEb2MiLCJyZXN1bHQiLCJzcGVjdWxhdGl2ZUF1dGgiLCJNb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yIiwicHJvdmlkZXJOYW1lIiwibWVjaGFuaXNtUHJvcGVydGllcyIsIlBST1ZJREVSX05BTUUiLCJnZXQiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/aws_service_workflow.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/aws_service_workflow.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AwsServiceWorkflow = void 0;\nconst fs = __webpack_require__(/*! fs */ \"fs\");\nconst error_1 = __webpack_require__(/*! ../../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst service_workflow_1 = __webpack_require__(/*! ./service_workflow */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/service_workflow.js\");\n/** Error for when the token is missing in the environment. */ const TOKEN_MISSING_ERROR = \"AWS_WEB_IDENTITY_TOKEN_FILE must be set in the environment.\";\n/**\n * Device workflow implementation for AWS.\n *\n * @internal\n */ class AwsServiceWorkflow extends service_workflow_1.ServiceWorkflow {\n    constructor(){\n        super();\n    }\n    /**\n     * Get the token from the environment.\n     */ async getToken() {\n        const tokenFile = process.env.AWS_WEB_IDENTITY_TOKEN_FILE;\n        if (!tokenFile) {\n            throw new error_1.MongoAWSError(TOKEN_MISSING_ERROR);\n        }\n        return fs.promises.readFile(tokenFile, \"utf8\");\n    }\n}\nexports.AwsServiceWorkflow = AwsServiceWorkflow; //# sourceMappingURL=aws_service_workflow.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9hd3Nfc2VydmljZV93b3JrZmxvdy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMEJBQTBCLEdBQUcsS0FBSztBQUNsQyxNQUFNRyxLQUFLQyxtQkFBT0EsQ0FBQyxjQUFJO0FBQ3ZCLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLGlFQUFnQjtBQUN4QyxNQUFNRSxxQkFBcUJGLG1CQUFPQSxDQUFDLHVHQUFvQjtBQUN2RCw0REFBNEQsR0FDNUQsTUFBTUcsc0JBQXNCO0FBQzVCOzs7O0NBSUMsR0FDRCxNQUFNTCwyQkFBMkJJLG1CQUFtQkUsZUFBZTtJQUMvREMsYUFBYztRQUNWLEtBQUs7SUFDVDtJQUNBOztLQUVDLEdBQ0QsTUFBTUMsV0FBVztRQUNiLE1BQU1DLFlBQVlDLFFBQVFDLEdBQUcsQ0FBQ0MsMkJBQTJCO1FBQ3pELElBQUksQ0FBQ0gsV0FBVztZQUNaLE1BQU0sSUFBSU4sUUFBUVUsYUFBYSxDQUFDUjtRQUNwQztRQUNBLE9BQU9KLEdBQUdhLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDTixXQUFXO0lBQzNDO0FBQ0o7QUFDQVgsMEJBQTBCLEdBQUdFLG9CQUM3QixnREFBZ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9hd3Nfc2VydmljZV93b3JrZmxvdy5qcz83YWEyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Bd3NTZXJ2aWNlV29ya2Zsb3cgPSB2b2lkIDA7XG5jb25zdCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vZXJyb3JcIik7XG5jb25zdCBzZXJ2aWNlX3dvcmtmbG93XzEgPSByZXF1aXJlKFwiLi9zZXJ2aWNlX3dvcmtmbG93XCIpO1xuLyoqIEVycm9yIGZvciB3aGVuIHRoZSB0b2tlbiBpcyBtaXNzaW5nIGluIHRoZSBlbnZpcm9ubWVudC4gKi9cbmNvbnN0IFRPS0VOX01JU1NJTkdfRVJST1IgPSAnQVdTX1dFQl9JREVOVElUWV9UT0tFTl9GSUxFIG11c3QgYmUgc2V0IGluIHRoZSBlbnZpcm9ubWVudC4nO1xuLyoqXG4gKiBEZXZpY2Ugd29ya2Zsb3cgaW1wbGVtZW50YXRpb24gZm9yIEFXUy5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgQXdzU2VydmljZVdvcmtmbG93IGV4dGVuZHMgc2VydmljZV93b3JrZmxvd18xLlNlcnZpY2VXb3JrZmxvdyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdG9rZW4gZnJvbSB0aGUgZW52aXJvbm1lbnQuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0VG9rZW4oKSB7XG4gICAgICAgIGNvbnN0IHRva2VuRmlsZSA9IHByb2Nlc3MuZW52LkFXU19XRUJfSURFTlRJVFlfVE9LRU5fRklMRTtcbiAgICAgICAgaWYgKCF0b2tlbkZpbGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVdTRXJyb3IoVE9LRU5fTUlTU0lOR19FUlJPUik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZzLnByb21pc2VzLnJlYWRGaWxlKHRva2VuRmlsZSwgJ3V0ZjgnKTtcbiAgICB9XG59XG5leHBvcnRzLkF3c1NlcnZpY2VXb3JrZmxvdyA9IEF3c1NlcnZpY2VXb3JrZmxvdztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF3c19zZXJ2aWNlX3dvcmtmbG93LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkF3c1NlcnZpY2VXb3JrZmxvdyIsImZzIiwicmVxdWlyZSIsImVycm9yXzEiLCJzZXJ2aWNlX3dvcmtmbG93XzEiLCJUT0tFTl9NSVNTSU5HX0VSUk9SIiwiU2VydmljZVdvcmtmbG93IiwiY29uc3RydWN0b3IiLCJnZXRUb2tlbiIsInRva2VuRmlsZSIsInByb2Nlc3MiLCJlbnYiLCJBV1NfV0VCX0lERU5USVRZX1RPS0VOX0ZJTEUiLCJNb25nb0FXU0Vycm9yIiwicHJvbWlzZXMiLCJyZWFkRmlsZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/aws_service_workflow.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_service_workflow.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_service_workflow.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AzureServiceWorkflow = void 0;\nconst error_1 = __webpack_require__(/*! ../../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst azure_token_cache_1 = __webpack_require__(/*! ./azure_token_cache */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_token_cache.js\");\nconst service_workflow_1 = __webpack_require__(/*! ./service_workflow */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/service_workflow.js\");\n/** Base URL for getting Azure tokens. */ const AZURE_BASE_URL = \"http://169.254.169.254/metadata/identity/oauth2/token?api-version=2018-02-01\";\n/** Azure request headers. */ const AZURE_HEADERS = Object.freeze({\n    Metadata: \"true\",\n    Accept: \"application/json\"\n});\n/** Invalid endpoint result error. */ const ENDPOINT_RESULT_ERROR = \"Azure endpoint did not return a value with only access_token and expires_in properties\";\n/** Error for when the token audience is missing in the environment. */ const TOKEN_AUDIENCE_MISSING_ERROR = \"TOKEN_AUDIENCE must be set in the auth mechanism properties when PROVIDER_NAME is azure.\";\n/**\n * Device workflow implementation for Azure.\n *\n * @internal\n */ class AzureServiceWorkflow extends service_workflow_1.ServiceWorkflow {\n    constructor(){\n        super(...arguments);\n        this.cache = new azure_token_cache_1.AzureTokenCache();\n    }\n    /**\n     * Get the token from the environment.\n     */ async getToken(credentials) {\n        const tokenAudience = credentials?.mechanismProperties.TOKEN_AUDIENCE;\n        if (!tokenAudience) {\n            throw new error_1.MongoAzureError(TOKEN_AUDIENCE_MISSING_ERROR);\n        }\n        let token;\n        const entry = this.cache.getEntry(tokenAudience);\n        if (entry?.isValid()) {\n            token = entry.token;\n        } else {\n            this.cache.deleteEntry(tokenAudience);\n            const response = await getAzureTokenData(tokenAudience);\n            if (!isEndpointResultValid(response)) {\n                throw new error_1.MongoAzureError(ENDPOINT_RESULT_ERROR);\n            }\n            this.cache.addEntry(tokenAudience, response);\n            token = response.access_token;\n        }\n        return token;\n    }\n}\nexports.AzureServiceWorkflow = AzureServiceWorkflow;\n/**\n * Hit the Azure endpoint to get the token data.\n */ async function getAzureTokenData(tokenAudience) {\n    const url = `${AZURE_BASE_URL}&resource=${tokenAudience}`;\n    const data = await (0, utils_1.request)(url, {\n        json: true,\n        headers: AZURE_HEADERS\n    });\n    return data;\n}\n/**\n * Determines if a result returned from the endpoint is valid.\n * This means the result is not nullish, contains the access_token required field\n * and the expires_in required field.\n */ function isEndpointResultValid(token) {\n    if (token == null || typeof token !== \"object\") return false;\n    return \"access_token\" in token && \"expires_in\" in token;\n} //# sourceMappingURL=azure_service_workflow.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9henVyZV9zZXJ2aWNlX3dvcmtmbG93LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw0QkFBNEIsR0FBRyxLQUFLO0FBQ3BDLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLGlFQUFnQjtBQUN4QyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQyxpRUFBZ0I7QUFDeEMsTUFBTUUsc0JBQXNCRixtQkFBT0EsQ0FBQyx5R0FBcUI7QUFDekQsTUFBTUcscUJBQXFCSCxtQkFBT0EsQ0FBQyx1R0FBb0I7QUFDdkQsdUNBQXVDLEdBQ3ZDLE1BQU1JLGlCQUFpQjtBQUN2QiwyQkFBMkIsR0FDM0IsTUFBTUMsZ0JBQWdCWCxPQUFPWSxNQUFNLENBQUM7SUFBRUMsVUFBVTtJQUFRQyxRQUFRO0FBQW1CO0FBQ25GLG1DQUFtQyxHQUNuQyxNQUFNQyx3QkFBd0I7QUFDOUIscUVBQXFFLEdBQ3JFLE1BQU1DLCtCQUErQjtBQUNyQzs7OztDQUlDLEdBQ0QsTUFBTVosNkJBQTZCSyxtQkFBbUJRLGVBQWU7SUFDakVDLGFBQWM7UUFDVixLQUFLLElBQUlDO1FBQ1QsSUFBSSxDQUFDQyxLQUFLLEdBQUcsSUFBSVosb0JBQW9CYSxlQUFlO0lBQ3hEO0lBQ0E7O0tBRUMsR0FDRCxNQUFNQyxTQUFTQyxXQUFXLEVBQUU7UUFDeEIsTUFBTUMsZ0JBQWdCRCxhQUFhRSxvQkFBb0JDO1FBQ3ZELElBQUksQ0FBQ0YsZUFBZTtZQUNoQixNQUFNLElBQUluQixRQUFRc0IsZUFBZSxDQUFDWDtRQUN0QztRQUNBLElBQUlZO1FBQ0osTUFBTUMsUUFBUSxJQUFJLENBQUNULEtBQUssQ0FBQ1UsUUFBUSxDQUFDTjtRQUNsQyxJQUFJSyxPQUFPRSxXQUFXO1lBQ2xCSCxRQUFRQyxNQUFNRCxLQUFLO1FBQ3ZCLE9BQ0s7WUFDRCxJQUFJLENBQUNSLEtBQUssQ0FBQ1ksV0FBVyxDQUFDUjtZQUN2QixNQUFNUyxXQUFXLE1BQU1DLGtCQUFrQlY7WUFDekMsSUFBSSxDQUFDVyxzQkFBc0JGLFdBQVc7Z0JBQ2xDLE1BQU0sSUFBSTVCLFFBQVFzQixlQUFlLENBQUNaO1lBQ3RDO1lBQ0EsSUFBSSxDQUFDSyxLQUFLLENBQUNnQixRQUFRLENBQUNaLGVBQWVTO1lBQ25DTCxRQUFRSyxTQUFTSSxZQUFZO1FBQ2pDO1FBQ0EsT0FBT1Q7SUFDWDtBQUNKO0FBQ0ExQiw0QkFBNEIsR0FBR0U7QUFDL0I7O0NBRUMsR0FDRCxlQUFlOEIsa0JBQWtCVixhQUFhO0lBQzFDLE1BQU1jLE1BQU0sQ0FBQyxFQUFFNUIsZUFBZSxVQUFVLEVBQUVjLGNBQWMsQ0FBQztJQUN6RCxNQUFNZSxPQUFPLE1BQU0sQ0FBQyxHQUFHaEMsUUFBUWlDLE9BQU8sRUFBRUYsS0FBSztRQUN6Q0csTUFBTTtRQUNOQyxTQUFTL0I7SUFDYjtJQUNBLE9BQU80QjtBQUNYO0FBQ0E7Ozs7Q0FJQyxHQUNELFNBQVNKLHNCQUFzQlAsS0FBSztJQUNoQyxJQUFJQSxTQUFTLFFBQVEsT0FBT0EsVUFBVSxVQUNsQyxPQUFPO0lBQ1gsT0FBTyxrQkFBa0JBLFNBQVMsZ0JBQWdCQTtBQUN0RCxFQUNBLGtEQUFrRCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2F1dGgvbW9uZ29kYl9vaWRjL2F6dXJlX3NlcnZpY2Vfd29ya2Zsb3cuanM/Y2I2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQXp1cmVTZXJ2aWNlV29ya2Zsb3cgPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uLy4uLy4uL2Vycm9yXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi91dGlsc1wiKTtcbmNvbnN0IGF6dXJlX3Rva2VuX2NhY2hlXzEgPSByZXF1aXJlKFwiLi9henVyZV90b2tlbl9jYWNoZVwiKTtcbmNvbnN0IHNlcnZpY2Vfd29ya2Zsb3dfMSA9IHJlcXVpcmUoXCIuL3NlcnZpY2Vfd29ya2Zsb3dcIik7XG4vKiogQmFzZSBVUkwgZm9yIGdldHRpbmcgQXp1cmUgdG9rZW5zLiAqL1xuY29uc3QgQVpVUkVfQkFTRV9VUkwgPSAnaHR0cDovLzE2OS4yNTQuMTY5LjI1NC9tZXRhZGF0YS9pZGVudGl0eS9vYXV0aDIvdG9rZW4/YXBpLXZlcnNpb249MjAxOC0wMi0wMSc7XG4vKiogQXp1cmUgcmVxdWVzdCBoZWFkZXJzLiAqL1xuY29uc3QgQVpVUkVfSEVBREVSUyA9IE9iamVjdC5mcmVlemUoeyBNZXRhZGF0YTogJ3RydWUnLCBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTtcbi8qKiBJbnZhbGlkIGVuZHBvaW50IHJlc3VsdCBlcnJvci4gKi9cbmNvbnN0IEVORFBPSU5UX1JFU1VMVF9FUlJPUiA9ICdBenVyZSBlbmRwb2ludCBkaWQgbm90IHJldHVybiBhIHZhbHVlIHdpdGggb25seSBhY2Nlc3NfdG9rZW4gYW5kIGV4cGlyZXNfaW4gcHJvcGVydGllcyc7XG4vKiogRXJyb3IgZm9yIHdoZW4gdGhlIHRva2VuIGF1ZGllbmNlIGlzIG1pc3NpbmcgaW4gdGhlIGVudmlyb25tZW50LiAqL1xuY29uc3QgVE9LRU5fQVVESUVOQ0VfTUlTU0lOR19FUlJPUiA9ICdUT0tFTl9BVURJRU5DRSBtdXN0IGJlIHNldCBpbiB0aGUgYXV0aCBtZWNoYW5pc20gcHJvcGVydGllcyB3aGVuIFBST1ZJREVSX05BTUUgaXMgYXp1cmUuJztcbi8qKlxuICogRGV2aWNlIHdvcmtmbG93IGltcGxlbWVudGF0aW9uIGZvciBBenVyZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgQXp1cmVTZXJ2aWNlV29ya2Zsb3cgZXh0ZW5kcyBzZXJ2aWNlX3dvcmtmbG93XzEuU2VydmljZVdvcmtmbG93IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5jYWNoZSA9IG5ldyBhenVyZV90b2tlbl9jYWNoZV8xLkF6dXJlVG9rZW5DYWNoZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRva2VuIGZyb20gdGhlIGVudmlyb25tZW50LlxuICAgICAqL1xuICAgIGFzeW5jIGdldFRva2VuKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGNvbnN0IHRva2VuQXVkaWVuY2UgPSBjcmVkZW50aWFscz8ubWVjaGFuaXNtUHJvcGVydGllcy5UT0tFTl9BVURJRU5DRTtcbiAgICAgICAgaWYgKCF0b2tlbkF1ZGllbmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0F6dXJlRXJyb3IoVE9LRU5fQVVESUVOQ0VfTUlTU0lOR19FUlJPUik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRva2VuO1xuICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMuY2FjaGUuZ2V0RW50cnkodG9rZW5BdWRpZW5jZSk7XG4gICAgICAgIGlmIChlbnRyeT8uaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICB0b2tlbiA9IGVudHJ5LnRva2VuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jYWNoZS5kZWxldGVFbnRyeSh0b2tlbkF1ZGllbmNlKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0QXp1cmVUb2tlbkRhdGEodG9rZW5BdWRpZW5jZSk7XG4gICAgICAgICAgICBpZiAoIWlzRW5kcG9pbnRSZXN1bHRWYWxpZChyZXNwb25zZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0F6dXJlRXJyb3IoRU5EUE9JTlRfUkVTVUxUX0VSUk9SKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2FjaGUuYWRkRW50cnkodG9rZW5BdWRpZW5jZSwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgdG9rZW4gPSByZXNwb25zZS5hY2Nlc3NfdG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH1cbn1cbmV4cG9ydHMuQXp1cmVTZXJ2aWNlV29ya2Zsb3cgPSBBenVyZVNlcnZpY2VXb3JrZmxvdztcbi8qKlxuICogSGl0IHRoZSBBenVyZSBlbmRwb2ludCB0byBnZXQgdGhlIHRva2VuIGRhdGEuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEF6dXJlVG9rZW5EYXRhKHRva2VuQXVkaWVuY2UpIHtcbiAgICBjb25zdCB1cmwgPSBgJHtBWlVSRV9CQVNFX1VSTH0mcmVzb3VyY2U9JHt0b2tlbkF1ZGllbmNlfWA7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0ICgwLCB1dGlsc18xLnJlcXVlc3QpKHVybCwge1xuICAgICAgICBqc29uOiB0cnVlLFxuICAgICAgICBoZWFkZXJzOiBBWlVSRV9IRUFERVJTXG4gICAgfSk7XG4gICAgcmV0dXJuIGRhdGE7XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgYSByZXN1bHQgcmV0dXJuZWQgZnJvbSB0aGUgZW5kcG9pbnQgaXMgdmFsaWQuXG4gKiBUaGlzIG1lYW5zIHRoZSByZXN1bHQgaXMgbm90IG51bGxpc2gsIGNvbnRhaW5zIHRoZSBhY2Nlc3NfdG9rZW4gcmVxdWlyZWQgZmllbGRcbiAqIGFuZCB0aGUgZXhwaXJlc19pbiByZXF1aXJlZCBmaWVsZC5cbiAqL1xuZnVuY3Rpb24gaXNFbmRwb2ludFJlc3VsdFZhbGlkKHRva2VuKSB7XG4gICAgaWYgKHRva2VuID09IG51bGwgfHwgdHlwZW9mIHRva2VuICE9PSAnb2JqZWN0JylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAnYWNjZXNzX3Rva2VuJyBpbiB0b2tlbiAmJiAnZXhwaXJlc19pbicgaW4gdG9rZW47XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1henVyZV9zZXJ2aWNlX3dvcmtmbG93LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkF6dXJlU2VydmljZVdvcmtmbG93IiwiZXJyb3JfMSIsInJlcXVpcmUiLCJ1dGlsc18xIiwiYXp1cmVfdG9rZW5fY2FjaGVfMSIsInNlcnZpY2Vfd29ya2Zsb3dfMSIsIkFaVVJFX0JBU0VfVVJMIiwiQVpVUkVfSEVBREVSUyIsImZyZWV6ZSIsIk1ldGFkYXRhIiwiQWNjZXB0IiwiRU5EUE9JTlRfUkVTVUxUX0VSUk9SIiwiVE9LRU5fQVVESUVOQ0VfTUlTU0lOR19FUlJPUiIsIlNlcnZpY2VXb3JrZmxvdyIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiY2FjaGUiLCJBenVyZVRva2VuQ2FjaGUiLCJnZXRUb2tlbiIsImNyZWRlbnRpYWxzIiwidG9rZW5BdWRpZW5jZSIsIm1lY2hhbmlzbVByb3BlcnRpZXMiLCJUT0tFTl9BVURJRU5DRSIsIk1vbmdvQXp1cmVFcnJvciIsInRva2VuIiwiZW50cnkiLCJnZXRFbnRyeSIsImlzVmFsaWQiLCJkZWxldGVFbnRyeSIsInJlc3BvbnNlIiwiZ2V0QXp1cmVUb2tlbkRhdGEiLCJpc0VuZHBvaW50UmVzdWx0VmFsaWQiLCJhZGRFbnRyeSIsImFjY2Vzc190b2tlbiIsInVybCIsImRhdGEiLCJyZXF1ZXN0IiwianNvbiIsImhlYWRlcnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_service_workflow.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_token_cache.js":
/*!******************************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_token_cache.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AzureTokenCache = exports.AzureTokenEntry = void 0;\nconst cache_1 = __webpack_require__(/*! ./cache */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/cache.js\");\n/** @internal */ class AzureTokenEntry extends cache_1.ExpiringCacheEntry {\n    /**\n     * Instantiate the entry.\n     */ constructor(token, expiration){\n        super(expiration);\n        this.token = token;\n    }\n}\nexports.AzureTokenEntry = AzureTokenEntry;\n/**\n * A cache of access tokens from Azure.\n * @internal\n */ class AzureTokenCache extends cache_1.Cache {\n    /**\n     * Add an entry to the cache.\n     */ addEntry(tokenAudience, token) {\n        const entry = new AzureTokenEntry(token.access_token, token.expires_in);\n        this.entries.set(tokenAudience, entry);\n        return entry;\n    }\n    /**\n     * Create a cache key.\n     */ cacheKey(tokenAudience) {\n        return tokenAudience;\n    }\n    /**\n     * Delete an entry from the cache.\n     */ deleteEntry(tokenAudience) {\n        this.entries.delete(tokenAudience);\n    }\n    /**\n     * Get an Azure token entry from the cache.\n     */ getEntry(tokenAudience) {\n        return this.entries.get(tokenAudience);\n    }\n}\nexports.AzureTokenCache = AzureTokenCache; //# sourceMappingURL=azure_token_cache.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9henVyZV90b2tlbl9jYWNoZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsdUJBQXVCLEdBQUdBLHVCQUF1QixHQUFHLEtBQUs7QUFDekQsTUFBTUksVUFBVUMsbUJBQU9BLENBQUMsaUZBQVM7QUFDakMsY0FBYyxHQUNkLE1BQU1GLHdCQUF3QkMsUUFBUUUsa0JBQWtCO0lBQ3BEOztLQUVDLEdBQ0RDLFlBQVlDLEtBQUssRUFBRUMsVUFBVSxDQUFFO1FBQzNCLEtBQUssQ0FBQ0E7UUFDTixJQUFJLENBQUNELEtBQUssR0FBR0E7SUFDakI7QUFDSjtBQUNBUix1QkFBdUIsR0FBR0c7QUFDMUI7OztDQUdDLEdBQ0QsTUFBTUQsd0JBQXdCRSxRQUFRTSxLQUFLO0lBQ3ZDOztLQUVDLEdBQ0RDLFNBQVNDLGFBQWEsRUFBRUosS0FBSyxFQUFFO1FBQzNCLE1BQU1LLFFBQVEsSUFBSVYsZ0JBQWdCSyxNQUFNTSxZQUFZLEVBQUVOLE1BQU1PLFVBQVU7UUFDdEUsSUFBSSxDQUFDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0wsZUFBZUM7UUFDaEMsT0FBT0E7SUFDWDtJQUNBOztLQUVDLEdBQ0RLLFNBQVNOLGFBQWEsRUFBRTtRQUNwQixPQUFPQTtJQUNYO0lBQ0E7O0tBRUMsR0FDRE8sWUFBWVAsYUFBYSxFQUFFO1FBQ3ZCLElBQUksQ0FBQ0ksT0FBTyxDQUFDSSxNQUFNLENBQUNSO0lBQ3hCO0lBQ0E7O0tBRUMsR0FDRFMsU0FBU1QsYUFBYSxFQUFFO1FBQ3BCLE9BQU8sSUFBSSxDQUFDSSxPQUFPLENBQUNNLEdBQUcsQ0FBQ1Y7SUFDNUI7QUFDSjtBQUNBWix1QkFBdUIsR0FBR0UsaUJBQzFCLDZDQUE2QyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2F1dGgvbW9uZ29kYl9vaWRjL2F6dXJlX3Rva2VuX2NhY2hlLmpzP2IwM2IiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkF6dXJlVG9rZW5DYWNoZSA9IGV4cG9ydHMuQXp1cmVUb2tlbkVudHJ5ID0gdm9pZCAwO1xuY29uc3QgY2FjaGVfMSA9IHJlcXVpcmUoXCIuL2NhY2hlXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgQXp1cmVUb2tlbkVudHJ5IGV4dGVuZHMgY2FjaGVfMS5FeHBpcmluZ0NhY2hlRW50cnkge1xuICAgIC8qKlxuICAgICAqIEluc3RhbnRpYXRlIHRoZSBlbnRyeS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0b2tlbiwgZXhwaXJhdGlvbikge1xuICAgICAgICBzdXBlcihleHBpcmF0aW9uKTtcbiAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgIH1cbn1cbmV4cG9ydHMuQXp1cmVUb2tlbkVudHJ5ID0gQXp1cmVUb2tlbkVudHJ5O1xuLyoqXG4gKiBBIGNhY2hlIG9mIGFjY2VzcyB0b2tlbnMgZnJvbSBBenVyZS5cbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBBenVyZVRva2VuQ2FjaGUgZXh0ZW5kcyBjYWNoZV8xLkNhY2hlIHtcbiAgICAvKipcbiAgICAgKiBBZGQgYW4gZW50cnkgdG8gdGhlIGNhY2hlLlxuICAgICAqL1xuICAgIGFkZEVudHJ5KHRva2VuQXVkaWVuY2UsIHRva2VuKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gbmV3IEF6dXJlVG9rZW5FbnRyeSh0b2tlbi5hY2Nlc3NfdG9rZW4sIHRva2VuLmV4cGlyZXNfaW4pO1xuICAgICAgICB0aGlzLmVudHJpZXMuc2V0KHRva2VuQXVkaWVuY2UsIGVudHJ5KTtcbiAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBjYWNoZSBrZXkuXG4gICAgICovXG4gICAgY2FjaGVLZXkodG9rZW5BdWRpZW5jZSkge1xuICAgICAgICByZXR1cm4gdG9rZW5BdWRpZW5jZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIGFuIGVudHJ5IGZyb20gdGhlIGNhY2hlLlxuICAgICAqL1xuICAgIGRlbGV0ZUVudHJ5KHRva2VuQXVkaWVuY2UpIHtcbiAgICAgICAgdGhpcy5lbnRyaWVzLmRlbGV0ZSh0b2tlbkF1ZGllbmNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGFuIEF6dXJlIHRva2VuIGVudHJ5IGZyb20gdGhlIGNhY2hlLlxuICAgICAqL1xuICAgIGdldEVudHJ5KHRva2VuQXVkaWVuY2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50cmllcy5nZXQodG9rZW5BdWRpZW5jZSk7XG4gICAgfVxufVxuZXhwb3J0cy5BenVyZVRva2VuQ2FjaGUgPSBBenVyZVRva2VuQ2FjaGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1henVyZV90b2tlbl9jYWNoZS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJBenVyZVRva2VuQ2FjaGUiLCJBenVyZVRva2VuRW50cnkiLCJjYWNoZV8xIiwicmVxdWlyZSIsIkV4cGlyaW5nQ2FjaGVFbnRyeSIsImNvbnN0cnVjdG9yIiwidG9rZW4iLCJleHBpcmF0aW9uIiwiQ2FjaGUiLCJhZGRFbnRyeSIsInRva2VuQXVkaWVuY2UiLCJlbnRyeSIsImFjY2Vzc190b2tlbiIsImV4cGlyZXNfaW4iLCJlbnRyaWVzIiwic2V0IiwiY2FjaGVLZXkiLCJkZWxldGVFbnRyeSIsImRlbGV0ZSIsImdldEVudHJ5IiwiZ2V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_token_cache.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/cache.js":
/*!******************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/cache.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Cache = exports.ExpiringCacheEntry = void 0;\n/* 5 minutes in milliseconds */ const EXPIRATION_BUFFER_MS = 300000;\n/**\n * An entry in a cache that can expire in a certain amount of time.\n */ class ExpiringCacheEntry {\n    /**\n     * Create a new expiring token entry.\n     */ constructor(expiration){\n        this.expiration = this.expirationTime(expiration);\n    }\n    /**\n     * The entry is still valid if the expiration is more than\n     * 5 minutes from the expiration time.\n     */ isValid() {\n        return this.expiration - Date.now() > EXPIRATION_BUFFER_MS;\n    }\n    /**\n     * Get an expiration time in milliseconds past epoch.\n     */ expirationTime(expiresInSeconds) {\n        return Date.now() + expiresInSeconds * 1000;\n    }\n}\nexports.ExpiringCacheEntry = ExpiringCacheEntry;\n/**\n * Base class for OIDC caches.\n */ class Cache {\n    /**\n     * Create a new cache.\n     */ constructor(){\n        this.entries = new Map();\n    }\n    /**\n     * Clear the cache.\n     */ clear() {\n        this.entries.clear();\n    }\n    /**\n     * Create a cache key from the address and username.\n     */ hashedCacheKey(address, username, callbackHash) {\n        return JSON.stringify([\n            address,\n            username,\n            callbackHash\n        ]);\n    }\n}\nexports.Cache = Cache; //# sourceMappingURL=cache.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9jYWNoZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsYUFBYSxHQUFHQSwwQkFBMEIsR0FBRyxLQUFLO0FBQ2xELDZCQUE2QixHQUM3QixNQUFNSSx1QkFBdUI7QUFDN0I7O0NBRUMsR0FDRCxNQUFNRDtJQUNGOztLQUVDLEdBQ0RFLFlBQVlDLFVBQVUsQ0FBRTtRQUNwQixJQUFJLENBQUNBLFVBQVUsR0FBRyxJQUFJLENBQUNDLGNBQWMsQ0FBQ0Q7SUFDMUM7SUFDQTs7O0tBR0MsR0FDREUsVUFBVTtRQUNOLE9BQU8sSUFBSSxDQUFDRixVQUFVLEdBQUdHLEtBQUtDLEdBQUcsS0FBS047SUFDMUM7SUFDQTs7S0FFQyxHQUNERyxlQUFlSSxnQkFBZ0IsRUFBRTtRQUM3QixPQUFPRixLQUFLQyxHQUFHLEtBQUtDLG1CQUFtQjtJQUMzQztBQUNKO0FBQ0FYLDBCQUEwQixHQUFHRztBQUM3Qjs7Q0FFQyxHQUNELE1BQU1EO0lBQ0Y7O0tBRUMsR0FDREcsYUFBYztRQUNWLElBQUksQ0FBQ08sT0FBTyxHQUFHLElBQUlDO0lBQ3ZCO0lBQ0E7O0tBRUMsR0FDREMsUUFBUTtRQUNKLElBQUksQ0FBQ0YsT0FBTyxDQUFDRSxLQUFLO0lBQ3RCO0lBQ0E7O0tBRUMsR0FDREMsZUFBZUMsT0FBTyxFQUFFQyxRQUFRLEVBQUVDLFlBQVksRUFBRTtRQUM1QyxPQUFPQyxLQUFLQyxTQUFTLENBQUM7WUFBQ0o7WUFBU0M7WUFBVUM7U0FBYTtJQUMzRDtBQUNKO0FBQ0FsQixhQUFhLEdBQUdFLE9BQ2hCLGlDQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2F1dGgvbW9uZ29kYl9vaWRjL2NhY2hlLmpzPzU4MTIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNhY2hlID0gZXhwb3J0cy5FeHBpcmluZ0NhY2hlRW50cnkgPSB2b2lkIDA7XG4vKiA1IG1pbnV0ZXMgaW4gbWlsbGlzZWNvbmRzICovXG5jb25zdCBFWFBJUkFUSU9OX0JVRkZFUl9NUyA9IDMwMDAwMDtcbi8qKlxuICogQW4gZW50cnkgaW4gYSBjYWNoZSB0aGF0IGNhbiBleHBpcmUgaW4gYSBjZXJ0YWluIGFtb3VudCBvZiB0aW1lLlxuICovXG5jbGFzcyBFeHBpcmluZ0NhY2hlRW50cnkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBleHBpcmluZyB0b2tlbiBlbnRyeS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihleHBpcmF0aW9uKSB7XG4gICAgICAgIHRoaXMuZXhwaXJhdGlvbiA9IHRoaXMuZXhwaXJhdGlvblRpbWUoZXhwaXJhdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBlbnRyeSBpcyBzdGlsbCB2YWxpZCBpZiB0aGUgZXhwaXJhdGlvbiBpcyBtb3JlIHRoYW5cbiAgICAgKiA1IG1pbnV0ZXMgZnJvbSB0aGUgZXhwaXJhdGlvbiB0aW1lLlxuICAgICAqL1xuICAgIGlzVmFsaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4cGlyYXRpb24gLSBEYXRlLm5vdygpID4gRVhQSVJBVElPTl9CVUZGRVJfTVM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhbiBleHBpcmF0aW9uIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHBhc3QgZXBvY2guXG4gICAgICovXG4gICAgZXhwaXJhdGlvblRpbWUoZXhwaXJlc0luU2Vjb25kcykge1xuICAgICAgICByZXR1cm4gRGF0ZS5ub3coKSArIGV4cGlyZXNJblNlY29uZHMgKiAxMDAwO1xuICAgIH1cbn1cbmV4cG9ydHMuRXhwaXJpbmdDYWNoZUVudHJ5ID0gRXhwaXJpbmdDYWNoZUVudHJ5O1xuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBPSURDIGNhY2hlcy5cbiAqL1xuY2xhc3MgQ2FjaGUge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBjYWNoZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5lbnRyaWVzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhciB0aGUgY2FjaGUuXG4gICAgICovXG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuZW50cmllcy5jbGVhcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBjYWNoZSBrZXkgZnJvbSB0aGUgYWRkcmVzcyBhbmQgdXNlcm5hbWUuXG4gICAgICovXG4gICAgaGFzaGVkQ2FjaGVLZXkoYWRkcmVzcywgdXNlcm5hbWUsIGNhbGxiYWNrSGFzaCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoW2FkZHJlc3MsIHVzZXJuYW1lLCBjYWxsYmFja0hhc2hdKTtcbiAgICB9XG59XG5leHBvcnRzLkNhY2hlID0gQ2FjaGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWNoZS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJDYWNoZSIsIkV4cGlyaW5nQ2FjaGVFbnRyeSIsIkVYUElSQVRJT05fQlVGRkVSX01TIiwiY29uc3RydWN0b3IiLCJleHBpcmF0aW9uIiwiZXhwaXJhdGlvblRpbWUiLCJpc1ZhbGlkIiwiRGF0ZSIsIm5vdyIsImV4cGlyZXNJblNlY29uZHMiLCJlbnRyaWVzIiwiTWFwIiwiY2xlYXIiLCJoYXNoZWRDYWNoZUtleSIsImFkZHJlc3MiLCJ1c2VybmFtZSIsImNhbGxiYWNrSGFzaCIsIkpTT04iLCJzdHJpbmdpZnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/cache.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_lock_cache.js":
/*!********************************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_lock_cache.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CallbackLockCache = void 0;\nconst error_1 = __webpack_require__(/*! ../../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst cache_1 = __webpack_require__(/*! ./cache */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/cache.js\");\n/** Error message for when request callback is missing. */ const REQUEST_CALLBACK_REQUIRED_ERROR = \"Auth mechanism property REQUEST_TOKEN_CALLBACK is required.\";\n/* Counter for function \"hashes\".*/ let FN_HASH_COUNTER = 0;\n/* No function present function */ const NO_FUNCTION = async ()=>({\n        accessToken: \"test\"\n    });\n/* The map of function hashes */ const FN_HASHES = new WeakMap();\n/* Put the no function hash in the map. */ FN_HASHES.set(NO_FUNCTION, FN_HASH_COUNTER);\n/**\n * A cache of request and refresh callbacks per server/user.\n */ class CallbackLockCache extends cache_1.Cache {\n    /**\n     * Get the callbacks for the connection and credentials. If an entry does not\n     * exist a new one will get set.\n     */ getEntry(connection, credentials) {\n        const requestCallback = credentials.mechanismProperties.REQUEST_TOKEN_CALLBACK;\n        const refreshCallback = credentials.mechanismProperties.REFRESH_TOKEN_CALLBACK;\n        if (!requestCallback) {\n            throw new error_1.MongoInvalidArgumentError(REQUEST_CALLBACK_REQUIRED_ERROR);\n        }\n        const callbackHash = hashFunctions(requestCallback, refreshCallback);\n        const key = this.cacheKey(connection.address, credentials.username, callbackHash);\n        const entry = this.entries.get(key);\n        if (entry) {\n            return entry;\n        }\n        return this.addEntry(key, callbackHash, requestCallback, refreshCallback);\n    }\n    /**\n     * Set locked callbacks on for connection and credentials.\n     */ addEntry(key, callbackHash, requestCallback, refreshCallback) {\n        const entry = {\n            requestCallback: withLock(requestCallback),\n            refreshCallback: refreshCallback ? withLock(refreshCallback) : undefined,\n            callbackHash: callbackHash\n        };\n        this.entries.set(key, entry);\n        return entry;\n    }\n    /**\n     * Create a cache key from the address and username.\n     */ cacheKey(address, username, callbackHash) {\n        return this.hashedCacheKey(address, username, callbackHash);\n    }\n}\nexports.CallbackLockCache = CallbackLockCache;\n/**\n * Ensure the callback is only executed one at a time.\n */ function withLock(callback) {\n    let lock = Promise.resolve();\n    return async (info, context)=>{\n        await lock;\n        lock = lock.then(()=>callback(info, context));\n        return lock;\n    };\n}\n/**\n * Get the hash string for the request and refresh functions.\n */ function hashFunctions(requestFn, refreshFn) {\n    let requestHash = FN_HASHES.get(requestFn);\n    let refreshHash = FN_HASHES.get(refreshFn ?? NO_FUNCTION);\n    if (requestHash == null) {\n        // Create a new one for the function and put it in the map.\n        FN_HASH_COUNTER++;\n        requestHash = FN_HASH_COUNTER;\n        FN_HASHES.set(requestFn, FN_HASH_COUNTER);\n    }\n    if (refreshHash == null && refreshFn) {\n        // Create a new one for the function and put it in the map.\n        FN_HASH_COUNTER++;\n        refreshHash = FN_HASH_COUNTER;\n        FN_HASHES.set(refreshFn, FN_HASH_COUNTER);\n    }\n    return `${requestHash}-${refreshHash}`;\n} //# sourceMappingURL=callback_lock_cache.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9jYWxsYmFja19sb2NrX2NhY2hlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx5QkFBeUIsR0FBRyxLQUFLO0FBQ2pDLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLGlFQUFnQjtBQUN4QyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQyxpRkFBUztBQUNqQyx3REFBd0QsR0FDeEQsTUFBTUUsa0NBQWtDO0FBQ3hDLGlDQUFpQyxHQUNqQyxJQUFJQyxrQkFBa0I7QUFDdEIsZ0NBQWdDLEdBQ2hDLE1BQU1DLGNBQWMsVUFBYTtRQUFFQyxhQUFhO0lBQU87QUFDdkQsOEJBQThCLEdBQzlCLE1BQU1DLFlBQVksSUFBSUM7QUFDdEIsd0NBQXdDLEdBQ3hDRCxVQUFVRSxHQUFHLENBQUNKLGFBQWFEO0FBQzNCOztDQUVDLEdBQ0QsTUFBTUwsMEJBQTBCRyxRQUFRUSxLQUFLO0lBQ3pDOzs7S0FHQyxHQUNEQyxTQUFTQyxVQUFVLEVBQUVDLFdBQVcsRUFBRTtRQUM5QixNQUFNQyxrQkFBa0JELFlBQVlFLG1CQUFtQixDQUFDQyxzQkFBc0I7UUFDOUUsTUFBTUMsa0JBQWtCSixZQUFZRSxtQkFBbUIsQ0FBQ0csc0JBQXNCO1FBQzlFLElBQUksQ0FBQ0osaUJBQWlCO1lBQ2xCLE1BQU0sSUFBSWQsUUFBUW1CLHlCQUF5QixDQUFDaEI7UUFDaEQ7UUFDQSxNQUFNaUIsZUFBZUMsY0FBY1AsaUJBQWlCRztRQUNwRCxNQUFNSyxNQUFNLElBQUksQ0FBQ0MsUUFBUSxDQUFDWCxXQUFXWSxPQUFPLEVBQUVYLFlBQVlZLFFBQVEsRUFBRUw7UUFDcEUsTUFBTU0sUUFBUSxJQUFJLENBQUNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDTjtRQUMvQixJQUFJSSxPQUFPO1lBQ1AsT0FBT0E7UUFDWDtRQUNBLE9BQU8sSUFBSSxDQUFDRyxRQUFRLENBQUNQLEtBQUtGLGNBQWNOLGlCQUFpQkc7SUFDN0Q7SUFDQTs7S0FFQyxHQUNEWSxTQUFTUCxHQUFHLEVBQUVGLFlBQVksRUFBRU4sZUFBZSxFQUFFRyxlQUFlLEVBQUU7UUFDMUQsTUFBTVMsUUFBUTtZQUNWWixpQkFBaUJnQixTQUFTaEI7WUFDMUJHLGlCQUFpQkEsa0JBQWtCYSxTQUFTYixtQkFBbUJjO1lBQy9EWCxjQUFjQTtRQUNsQjtRQUNBLElBQUksQ0FBQ08sT0FBTyxDQUFDbEIsR0FBRyxDQUFDYSxLQUFLSTtRQUN0QixPQUFPQTtJQUNYO0lBQ0E7O0tBRUMsR0FDREgsU0FBU0MsT0FBTyxFQUFFQyxRQUFRLEVBQUVMLFlBQVksRUFBRTtRQUN0QyxPQUFPLElBQUksQ0FBQ1ksY0FBYyxDQUFDUixTQUFTQyxVQUFVTDtJQUNsRDtBQUNKO0FBQ0F2Qix5QkFBeUIsR0FBR0U7QUFDNUI7O0NBRUMsR0FDRCxTQUFTK0IsU0FBU0csUUFBUTtJQUN0QixJQUFJQyxPQUFPQyxRQUFRQyxPQUFPO0lBQzFCLE9BQU8sT0FBT0MsTUFBTUM7UUFDaEIsTUFBTUo7UUFDTkEsT0FBT0EsS0FBS0ssSUFBSSxDQUFDLElBQU1OLFNBQVNJLE1BQU1DO1FBQ3RDLE9BQU9KO0lBQ1g7QUFDSjtBQUNBOztDQUVDLEdBQ0QsU0FBU2IsY0FBY21CLFNBQVMsRUFBRUMsU0FBUztJQUN2QyxJQUFJQyxjQUFjbkMsVUFBVXFCLEdBQUcsQ0FBQ1k7SUFDaEMsSUFBSUcsY0FBY3BDLFVBQVVxQixHQUFHLENBQUNhLGFBQWFwQztJQUM3QyxJQUFJcUMsZUFBZSxNQUFNO1FBQ3JCLDJEQUEyRDtRQUMzRHRDO1FBQ0FzQyxjQUFjdEM7UUFDZEcsVUFBVUUsR0FBRyxDQUFDK0IsV0FBV3BDO0lBQzdCO0lBQ0EsSUFBSXVDLGVBQWUsUUFBUUYsV0FBVztRQUNsQywyREFBMkQ7UUFDM0RyQztRQUNBdUMsY0FBY3ZDO1FBQ2RHLFVBQVVFLEdBQUcsQ0FBQ2dDLFdBQVdyQztJQUM3QjtJQUNBLE9BQU8sQ0FBQyxFQUFFc0MsWUFBWSxDQUFDLEVBQUVDLFlBQVksQ0FBQztBQUMxQyxFQUNBLCtDQUErQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2F1dGgvbW9uZ29kYl9vaWRjL2NhbGxiYWNrX2xvY2tfY2FjaGUuanM/OWIwZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ2FsbGJhY2tMb2NrQ2FjaGUgPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uLy4uLy4uL2Vycm9yXCIpO1xuY29uc3QgY2FjaGVfMSA9IHJlcXVpcmUoXCIuL2NhY2hlXCIpO1xuLyoqIEVycm9yIG1lc3NhZ2UgZm9yIHdoZW4gcmVxdWVzdCBjYWxsYmFjayBpcyBtaXNzaW5nLiAqL1xuY29uc3QgUkVRVUVTVF9DQUxMQkFDS19SRVFVSVJFRF9FUlJPUiA9ICdBdXRoIG1lY2hhbmlzbSBwcm9wZXJ0eSBSRVFVRVNUX1RPS0VOX0NBTExCQUNLIGlzIHJlcXVpcmVkLic7XG4vKiBDb3VudGVyIGZvciBmdW5jdGlvbiBcImhhc2hlc1wiLiovXG5sZXQgRk5fSEFTSF9DT1VOVEVSID0gMDtcbi8qIE5vIGZ1bmN0aW9uIHByZXNlbnQgZnVuY3Rpb24gKi9cbmNvbnN0IE5PX0ZVTkNUSU9OID0gYXN5bmMgKCkgPT4gKHsgYWNjZXNzVG9rZW46ICd0ZXN0JyB9KTtcbi8qIFRoZSBtYXAgb2YgZnVuY3Rpb24gaGFzaGVzICovXG5jb25zdCBGTl9IQVNIRVMgPSBuZXcgV2Vha01hcCgpO1xuLyogUHV0IHRoZSBubyBmdW5jdGlvbiBoYXNoIGluIHRoZSBtYXAuICovXG5GTl9IQVNIRVMuc2V0KE5PX0ZVTkNUSU9OLCBGTl9IQVNIX0NPVU5URVIpO1xuLyoqXG4gKiBBIGNhY2hlIG9mIHJlcXVlc3QgYW5kIHJlZnJlc2ggY2FsbGJhY2tzIHBlciBzZXJ2ZXIvdXNlci5cbiAqL1xuY2xhc3MgQ2FsbGJhY2tMb2NrQ2FjaGUgZXh0ZW5kcyBjYWNoZV8xLkNhY2hlIHtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNhbGxiYWNrcyBmb3IgdGhlIGNvbm5lY3Rpb24gYW5kIGNyZWRlbnRpYWxzLiBJZiBhbiBlbnRyeSBkb2VzIG5vdFxuICAgICAqIGV4aXN0IGEgbmV3IG9uZSB3aWxsIGdldCBzZXQuXG4gICAgICovXG4gICAgZ2V0RW50cnkoY29ubmVjdGlvbiwgY3JlZGVudGlhbHMpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdENhbGxiYWNrID0gY3JlZGVudGlhbHMubWVjaGFuaXNtUHJvcGVydGllcy5SRVFVRVNUX1RPS0VOX0NBTExCQUNLO1xuICAgICAgICBjb25zdCByZWZyZXNoQ2FsbGJhY2sgPSBjcmVkZW50aWFscy5tZWNoYW5pc21Qcm9wZXJ0aWVzLlJFRlJFU0hfVE9LRU5fQ0FMTEJBQ0s7XG4gICAgICAgIGlmICghcmVxdWVzdENhbGxiYWNrKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKFJFUVVFU1RfQ0FMTEJBQ0tfUkVRVUlSRURfRVJST1IpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrSGFzaCA9IGhhc2hGdW5jdGlvbnMocmVxdWVzdENhbGxiYWNrLCByZWZyZXNoQ2FsbGJhY2spO1xuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmNhY2hlS2V5KGNvbm5lY3Rpb24uYWRkcmVzcywgY3JlZGVudGlhbHMudXNlcm5hbWUsIGNhbGxiYWNrSGFzaCk7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5lbnRyaWVzLmdldChrZXkpO1xuICAgICAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5hZGRFbnRyeShrZXksIGNhbGxiYWNrSGFzaCwgcmVxdWVzdENhbGxiYWNrLCByZWZyZXNoQ2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbG9ja2VkIGNhbGxiYWNrcyBvbiBmb3IgY29ubmVjdGlvbiBhbmQgY3JlZGVudGlhbHMuXG4gICAgICovXG4gICAgYWRkRW50cnkoa2V5LCBjYWxsYmFja0hhc2gsIHJlcXVlc3RDYWxsYmFjaywgcmVmcmVzaENhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0ge1xuICAgICAgICAgICAgcmVxdWVzdENhbGxiYWNrOiB3aXRoTG9jayhyZXF1ZXN0Q2FsbGJhY2spLFxuICAgICAgICAgICAgcmVmcmVzaENhbGxiYWNrOiByZWZyZXNoQ2FsbGJhY2sgPyB3aXRoTG9jayhyZWZyZXNoQ2FsbGJhY2spIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY2FsbGJhY2tIYXNoOiBjYWxsYmFja0hhc2hcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lbnRyaWVzLnNldChrZXksIGVudHJ5KTtcbiAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBjYWNoZSBrZXkgZnJvbSB0aGUgYWRkcmVzcyBhbmQgdXNlcm5hbWUuXG4gICAgICovXG4gICAgY2FjaGVLZXkoYWRkcmVzcywgdXNlcm5hbWUsIGNhbGxiYWNrSGFzaCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNoZWRDYWNoZUtleShhZGRyZXNzLCB1c2VybmFtZSwgY2FsbGJhY2tIYXNoKTtcbiAgICB9XG59XG5leHBvcnRzLkNhbGxiYWNrTG9ja0NhY2hlID0gQ2FsbGJhY2tMb2NrQ2FjaGU7XG4vKipcbiAqIEVuc3VyZSB0aGUgY2FsbGJhY2sgaXMgb25seSBleGVjdXRlZCBvbmUgYXQgYSB0aW1lLlxuICovXG5mdW5jdGlvbiB3aXRoTG9jayhjYWxsYmFjaykge1xuICAgIGxldCBsb2NrID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgcmV0dXJuIGFzeW5jIChpbmZvLCBjb250ZXh0KSA9PiB7XG4gICAgICAgIGF3YWl0IGxvY2s7XG4gICAgICAgIGxvY2sgPSBsb2NrLnRoZW4oKCkgPT4gY2FsbGJhY2soaW5mbywgY29udGV4dCkpO1xuICAgICAgICByZXR1cm4gbG9jaztcbiAgICB9O1xufVxuLyoqXG4gKiBHZXQgdGhlIGhhc2ggc3RyaW5nIGZvciB0aGUgcmVxdWVzdCBhbmQgcmVmcmVzaCBmdW5jdGlvbnMuXG4gKi9cbmZ1bmN0aW9uIGhhc2hGdW5jdGlvbnMocmVxdWVzdEZuLCByZWZyZXNoRm4pIHtcbiAgICBsZXQgcmVxdWVzdEhhc2ggPSBGTl9IQVNIRVMuZ2V0KHJlcXVlc3RGbik7XG4gICAgbGV0IHJlZnJlc2hIYXNoID0gRk5fSEFTSEVTLmdldChyZWZyZXNoRm4gPz8gTk9fRlVOQ1RJT04pO1xuICAgIGlmIChyZXF1ZXN0SGFzaCA9PSBudWxsKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBvbmUgZm9yIHRoZSBmdW5jdGlvbiBhbmQgcHV0IGl0IGluIHRoZSBtYXAuXG4gICAgICAgIEZOX0hBU0hfQ09VTlRFUisrO1xuICAgICAgICByZXF1ZXN0SGFzaCA9IEZOX0hBU0hfQ09VTlRFUjtcbiAgICAgICAgRk5fSEFTSEVTLnNldChyZXF1ZXN0Rm4sIEZOX0hBU0hfQ09VTlRFUik7XG4gICAgfVxuICAgIGlmIChyZWZyZXNoSGFzaCA9PSBudWxsICYmIHJlZnJlc2hGbikge1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgb25lIGZvciB0aGUgZnVuY3Rpb24gYW5kIHB1dCBpdCBpbiB0aGUgbWFwLlxuICAgICAgICBGTl9IQVNIX0NPVU5URVIrKztcbiAgICAgICAgcmVmcmVzaEhhc2ggPSBGTl9IQVNIX0NPVU5URVI7XG4gICAgICAgIEZOX0hBU0hFUy5zZXQocmVmcmVzaEZuLCBGTl9IQVNIX0NPVU5URVIpO1xuICAgIH1cbiAgICByZXR1cm4gYCR7cmVxdWVzdEhhc2h9LSR7cmVmcmVzaEhhc2h9YDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbGxiYWNrX2xvY2tfY2FjaGUuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ2FsbGJhY2tMb2NrQ2FjaGUiLCJlcnJvcl8xIiwicmVxdWlyZSIsImNhY2hlXzEiLCJSRVFVRVNUX0NBTExCQUNLX1JFUVVJUkVEX0VSUk9SIiwiRk5fSEFTSF9DT1VOVEVSIiwiTk9fRlVOQ1RJT04iLCJhY2Nlc3NUb2tlbiIsIkZOX0hBU0hFUyIsIldlYWtNYXAiLCJzZXQiLCJDYWNoZSIsImdldEVudHJ5IiwiY29ubmVjdGlvbiIsImNyZWRlbnRpYWxzIiwicmVxdWVzdENhbGxiYWNrIiwibWVjaGFuaXNtUHJvcGVydGllcyIsIlJFUVVFU1RfVE9LRU5fQ0FMTEJBQ0siLCJyZWZyZXNoQ2FsbGJhY2siLCJSRUZSRVNIX1RPS0VOX0NBTExCQUNLIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsImNhbGxiYWNrSGFzaCIsImhhc2hGdW5jdGlvbnMiLCJrZXkiLCJjYWNoZUtleSIsImFkZHJlc3MiLCJ1c2VybmFtZSIsImVudHJ5IiwiZW50cmllcyIsImdldCIsImFkZEVudHJ5Iiwid2l0aExvY2siLCJ1bmRlZmluZWQiLCJoYXNoZWRDYWNoZUtleSIsImNhbGxiYWNrIiwibG9jayIsIlByb21pc2UiLCJyZXNvbHZlIiwiaW5mbyIsImNvbnRleHQiLCJ0aGVuIiwicmVxdWVzdEZuIiwicmVmcmVzaEZuIiwicmVxdWVzdEhhc2giLCJyZWZyZXNoSGFzaCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_lock_cache.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_workflow.js":
/*!******************************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_workflow.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CallbackWorkflow = void 0;\nconst bson_1 = __webpack_require__(/*! bson */ \"(ssr)/./node_modules/bson/lib/bson.cjs\");\nconst error_1 = __webpack_require__(/*! ../../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst providers_1 = __webpack_require__(/*! ../providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\nconst callback_lock_cache_1 = __webpack_require__(/*! ./callback_lock_cache */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_lock_cache.js\");\nconst token_entry_cache_1 = __webpack_require__(/*! ./token_entry_cache */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/token_entry_cache.js\");\n/** The current version of OIDC implementation. */ const OIDC_VERSION = 0;\n/** 5 minutes in seconds */ const TIMEOUT_S = 300;\n/** Properties allowed on results of callbacks. */ const RESULT_PROPERTIES = [\n    \"accessToken\",\n    \"expiresInSeconds\",\n    \"refreshToken\"\n];\n/** Error message when the callback result is invalid. */ const CALLBACK_RESULT_ERROR = \"User provided OIDC callbacks must return a valid object with an accessToken.\";\n/**\n * OIDC implementation of a callback based workflow.\n * @internal\n */ class CallbackWorkflow {\n    /**\n     * Instantiate the workflow\n     */ constructor(){\n        this.cache = new token_entry_cache_1.TokenEntryCache();\n        this.callbackCache = new callback_lock_cache_1.CallbackLockCache();\n    }\n    /**\n     * Get the document to add for speculative authentication. This also needs\n     * to add a db field from the credentials source.\n     */ async speculativeAuth(credentials) {\n        const document = startCommandDocument(credentials);\n        document.db = credentials.source;\n        return {\n            speculativeAuthenticate: document\n        };\n    }\n    /**\n     * Execute the OIDC callback workflow.\n     */ async execute(connection, credentials, reauthenticating, response) {\n        // Get the callbacks with locks from the callback lock cache.\n        const { requestCallback, refreshCallback, callbackHash } = this.callbackCache.getEntry(connection, credentials);\n        // Look for an existing entry in the cache.\n        const entry = this.cache.getEntry(connection.address, credentials.username, callbackHash);\n        let result;\n        if (entry) {\n            // Reauthentication cannot use a token from the cache since the server has\n            // stated it is invalid by the request for reauthentication.\n            if (entry.isValid() && !reauthenticating) {\n                // Presence of a valid cache entry means we can skip to the finishing step.\n                result = await this.finishAuthentication(connection, credentials, entry.tokenResult, response?.speculativeAuthenticate?.conversationId);\n            } else {\n                // Presence of an expired cache entry means we must fetch a new one and\n                // then execute the final step.\n                const tokenResult = await this.fetchAccessToken(connection, credentials, entry.serverInfo, reauthenticating, callbackHash, requestCallback, refreshCallback);\n                try {\n                    result = await this.finishAuthentication(connection, credentials, tokenResult, reauthenticating ? undefined : response?.speculativeAuthenticate?.conversationId);\n                } catch (error) {\n                    // If we are reauthenticating and this errors with reauthentication\n                    // required, we need to do the entire process over again and clear\n                    // the cache entry.\n                    if (reauthenticating && error instanceof error_1.MongoError && error.code === error_1.MONGODB_ERROR_CODES.Reauthenticate) {\n                        this.cache.deleteEntry(connection.address, credentials.username, callbackHash);\n                        result = await this.execute(connection, credentials, reauthenticating);\n                    } else {\n                        throw error;\n                    }\n                }\n            }\n        } else {\n            // No entry in the cache requires us to do all authentication steps\n            // from start to finish, including getting a fresh token for the cache.\n            const startDocument = await this.startAuthentication(connection, credentials, reauthenticating, response);\n            const conversationId = startDocument.conversationId;\n            const serverResult = bson_1.BSON.deserialize(startDocument.payload.buffer);\n            const tokenResult = await this.fetchAccessToken(connection, credentials, serverResult, reauthenticating, callbackHash, requestCallback, refreshCallback);\n            result = await this.finishAuthentication(connection, credentials, tokenResult, conversationId);\n        }\n        return result;\n    }\n    /**\n     * Starts the callback authentication process. If there is a speculative\n     * authentication document from the initial handshake, then we will use that\n     * value to get the issuer, otherwise we will send the saslStart command.\n     */ async startAuthentication(connection, credentials, reauthenticating, response) {\n        let result;\n        if (!reauthenticating && response?.speculativeAuthenticate) {\n            result = response.speculativeAuthenticate;\n        } else {\n            result = await connection.commandAsync((0, utils_1.ns)(credentials.source), startCommandDocument(credentials), undefined);\n        }\n        return result;\n    }\n    /**\n     * Finishes the callback authentication process.\n     */ async finishAuthentication(connection, credentials, tokenResult, conversationId) {\n        const result = await connection.commandAsync((0, utils_1.ns)(credentials.source), finishCommandDocument(tokenResult.accessToken, conversationId), undefined);\n        return result;\n    }\n    /**\n     * Fetches an access token using either the request or refresh callbacks and\n     * puts it in the cache.\n     */ async fetchAccessToken(connection, credentials, serverInfo, reauthenticating, callbackHash, requestCallback, refreshCallback) {\n        // Get the token from the cache.\n        const entry = this.cache.getEntry(connection.address, credentials.username, callbackHash);\n        let result;\n        const context = {\n            timeoutSeconds: TIMEOUT_S,\n            version: OIDC_VERSION\n        };\n        // Check if there's a token in the cache.\n        if (entry) {\n            // If the cache entry is valid, return the token result.\n            if (entry.isValid() && !reauthenticating) {\n                return entry.tokenResult;\n            }\n            // If the cache entry is not valid, remove it from the cache and first attempt\n            // to use the refresh callback to get a new token. If no refresh callback\n            // exists, then fallback to the request callback.\n            if (refreshCallback) {\n                context.refreshToken = entry.tokenResult.refreshToken;\n                result = await refreshCallback(serverInfo, context);\n            } else {\n                result = await requestCallback(serverInfo, context);\n            }\n        } else {\n            // With no token in the cache we use the request callback.\n            result = await requestCallback(serverInfo, context);\n        }\n        // Validate that the result returned by the callback is acceptable. If it is not\n        // we must clear the token result from the cache.\n        if (isCallbackResultInvalid(result)) {\n            this.cache.deleteEntry(connection.address, credentials.username, callbackHash);\n            throw new error_1.MongoMissingCredentialsError(CALLBACK_RESULT_ERROR);\n        }\n        // Cleanup the cache.\n        this.cache.deleteExpiredEntries();\n        // Put the new entry into the cache.\n        this.cache.addEntry(connection.address, credentials.username || \"\", callbackHash, result, serverInfo);\n        return result;\n    }\n}\nexports.CallbackWorkflow = CallbackWorkflow;\n/**\n * Generate the finishing command document for authentication. Will be a\n * saslStart or saslContinue depending on the presence of a conversation id.\n */ function finishCommandDocument(token, conversationId) {\n    if (conversationId != null && typeof conversationId === \"number\") {\n        return {\n            saslContinue: 1,\n            conversationId: conversationId,\n            payload: new bson_1.Binary(bson_1.BSON.serialize({\n                jwt: token\n            }))\n        };\n    }\n    // saslContinue requires a conversationId in the command to be valid so in this\n    // case the server allows \"step two\" to actually be a saslStart with the token\n    // as the jwt since the use of the cached value has no correlating conversating\n    // on the particular connection.\n    return {\n        saslStart: 1,\n        mechanism: providers_1.AuthMechanism.MONGODB_OIDC,\n        payload: new bson_1.Binary(bson_1.BSON.serialize({\n            jwt: token\n        }))\n    };\n}\n/**\n * Determines if a result returned from a request or refresh callback\n * function is invalid. This means the result is nullish, doesn't contain\n * the accessToken required field, and does not contain extra fields.\n */ function isCallbackResultInvalid(tokenResult) {\n    if (tokenResult == null || typeof tokenResult !== \"object\") return true;\n    if (!(\"accessToken\" in tokenResult)) return true;\n    return !Object.getOwnPropertyNames(tokenResult).every((prop)=>RESULT_PROPERTIES.includes(prop));\n}\n/**\n * Generate the saslStart command document.\n */ function startCommandDocument(credentials) {\n    const payload = {};\n    if (credentials.username) {\n        payload.n = credentials.username;\n    }\n    return {\n        saslStart: 1,\n        autoAuthorize: 1,\n        mechanism: providers_1.AuthMechanism.MONGODB_OIDC,\n        payload: new bson_1.Binary(bson_1.BSON.serialize(payload))\n    };\n} //# sourceMappingURL=callback_workflow.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9jYWxsYmFja193b3JrZmxvdy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsd0JBQXdCLEdBQUcsS0FBSztBQUNoQyxNQUFNRyxTQUFTQyxtQkFBT0EsQ0FBQyxvREFBTTtBQUM3QixNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQyxpRUFBZ0I7QUFDeEMsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMsaUVBQWdCO0FBQ3hDLE1BQU1HLGNBQWNILG1CQUFPQSxDQUFDLDZFQUFjO0FBQzFDLE1BQU1JLHdCQUF3QkosbUJBQU9BLENBQUMsNkdBQXVCO0FBQzdELE1BQU1LLHNCQUFzQkwsbUJBQU9BLENBQUMseUdBQXFCO0FBQ3pELGdEQUFnRCxHQUNoRCxNQUFNTSxlQUFlO0FBQ3JCLHlCQUF5QixHQUN6QixNQUFNQyxZQUFZO0FBQ2xCLGdEQUFnRCxHQUNoRCxNQUFNQyxvQkFBb0I7SUFBQztJQUFlO0lBQW9CO0NBQWU7QUFDN0UsdURBQXVELEdBQ3ZELE1BQU1DLHdCQUF3QjtBQUM5Qjs7O0NBR0MsR0FDRCxNQUFNWDtJQUNGOztLQUVDLEdBQ0RZLGFBQWM7UUFDVixJQUFJLENBQUNDLEtBQUssR0FBRyxJQUFJTixvQkFBb0JPLGVBQWU7UUFDcEQsSUFBSSxDQUFDQyxhQUFhLEdBQUcsSUFBSVQsc0JBQXNCVSxpQkFBaUI7SUFDcEU7SUFDQTs7O0tBR0MsR0FDRCxNQUFNQyxnQkFBZ0JDLFdBQVcsRUFBRTtRQUMvQixNQUFNQyxXQUFXQyxxQkFBcUJGO1FBQ3RDQyxTQUFTRSxFQUFFLEdBQUdILFlBQVlJLE1BQU07UUFDaEMsT0FBTztZQUFFQyx5QkFBeUJKO1FBQVM7SUFDL0M7SUFDQTs7S0FFQyxHQUNELE1BQU1LLFFBQVFDLFVBQVUsRUFBRVAsV0FBVyxFQUFFUSxnQkFBZ0IsRUFBRUMsUUFBUSxF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RTtRQUN0Qm9CLFFBQVEyQixDQUFDLEdBQUcvRCxZQUFZZ0IsUUFBUTtJQUNwQztJQUNBLE9BQU87UUFDSHVDLFdBQVc7UUFDWFMsZUFBZTtRQUNmUixXQUFXckUsWUFBWXNFLGFBQWEsQ0FBQ0MsWUFBWTtRQUNqRHRCLFNBQVMsSUFBSXJELE9BQU9xRSxNQUFNLENBQUNyRSxPQUFPbUQsSUFBSSxDQUFDbUIsU0FBUyxDQUFDakI7SUFDckQ7QUFDSixFQUNBLDZDQUE2QyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2F1dGgvbW9uZ29kYl9vaWRjL2NhbGxiYWNrX3dvcmtmbG93LmpzPzgwYjYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNhbGxiYWNrV29ya2Zsb3cgPSB2b2lkIDA7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiYnNvblwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vZXJyb3JcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uLy4uLy4uL3V0aWxzXCIpO1xuY29uc3QgcHJvdmlkZXJzXzEgPSByZXF1aXJlKFwiLi4vcHJvdmlkZXJzXCIpO1xuY29uc3QgY2FsbGJhY2tfbG9ja19jYWNoZV8xID0gcmVxdWlyZShcIi4vY2FsbGJhY2tfbG9ja19jYWNoZVwiKTtcbmNvbnN0IHRva2VuX2VudHJ5X2NhY2hlXzEgPSByZXF1aXJlKFwiLi90b2tlbl9lbnRyeV9jYWNoZVwiKTtcbi8qKiBUaGUgY3VycmVudCB2ZXJzaW9uIG9mIE9JREMgaW1wbGVtZW50YXRpb24uICovXG5jb25zdCBPSURDX1ZFUlNJT04gPSAwO1xuLyoqIDUgbWludXRlcyBpbiBzZWNvbmRzICovXG5jb25zdCBUSU1FT1VUX1MgPSAzMDA7XG4vKiogUHJvcGVydGllcyBhbGxvd2VkIG9uIHJlc3VsdHMgb2YgY2FsbGJhY2tzLiAqL1xuY29uc3QgUkVTVUxUX1BST1BFUlRJRVMgPSBbJ2FjY2Vzc1Rva2VuJywgJ2V4cGlyZXNJblNlY29uZHMnLCAncmVmcmVzaFRva2VuJ107XG4vKiogRXJyb3IgbWVzc2FnZSB3aGVuIHRoZSBjYWxsYmFjayByZXN1bHQgaXMgaW52YWxpZC4gKi9cbmNvbnN0IENBTExCQUNLX1JFU1VMVF9FUlJPUiA9ICdVc2VyIHByb3ZpZGVkIE9JREMgY2FsbGJhY2tzIG11c3QgcmV0dXJuIGEgdmFsaWQgb2JqZWN0IHdpdGggYW4gYWNjZXNzVG9rZW4uJztcbi8qKlxuICogT0lEQyBpbXBsZW1lbnRhdGlvbiBvZiBhIGNhbGxiYWNrIGJhc2VkIHdvcmtmbG93LlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIENhbGxiYWNrV29ya2Zsb3cge1xuICAgIC8qKlxuICAgICAqIEluc3RhbnRpYXRlIHRoZSB3b3JrZmxvd1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNhY2hlID0gbmV3IHRva2VuX2VudHJ5X2NhY2hlXzEuVG9rZW5FbnRyeUNhY2hlKCk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tDYWNoZSA9IG5ldyBjYWxsYmFja19sb2NrX2NhY2hlXzEuQ2FsbGJhY2tMb2NrQ2FjaGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkb2N1bWVudCB0byBhZGQgZm9yIHNwZWN1bGF0aXZlIGF1dGhlbnRpY2F0aW9uLiBUaGlzIGFsc28gbmVlZHNcbiAgICAgKiB0byBhZGQgYSBkYiBmaWVsZCBmcm9tIHRoZSBjcmVkZW50aWFscyBzb3VyY2UuXG4gICAgICovXG4gICAgYXN5bmMgc3BlY3VsYXRpdmVBdXRoKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGNvbnN0IGRvY3VtZW50ID0gc3RhcnRDb21tYW5kRG9jdW1lbnQoY3JlZGVudGlhbHMpO1xuICAgICAgICBkb2N1bWVudC5kYiA9IGNyZWRlbnRpYWxzLnNvdXJjZTtcbiAgICAgICAgcmV0dXJuIHsgc3BlY3VsYXRpdmVBdXRoZW50aWNhdGU6IGRvY3VtZW50IH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGUgdGhlIE9JREMgY2FsbGJhY2sgd29ya2Zsb3cuXG4gICAgICovXG4gICAgYXN5bmMgZXhlY3V0ZShjb25uZWN0aW9uLCBjcmVkZW50aWFscywgcmVhdXRoZW50aWNhdGluZywgcmVzcG9uc2UpIHtcbiAgICAgICAgLy8gR2V0IHRoZSBjYWxsYmFja3Mgd2l0aCBsb2NrcyBmcm9tIHRoZSBjYWxsYmFjayBsb2NrIGNhY2hlLlxuICAgICAgICBjb25zdCB7IHJlcXVlc3RDYWxsYmFjaywgcmVmcmVzaENhbGxiYWNrLCBjYWxsYmFja0hhc2ggfSA9IHRoaXMuY2FsbGJhY2tDYWNoZS5nZXRFbnRyeShjb25uZWN0aW9uLCBjcmVkZW50aWFscyk7XG4gICAgICAgIC8vIExvb2sgZm9yIGFuIGV4aXN0aW5nIGVudHJ5IGluIHRoZSBjYWNoZS5cbiAgICAgICAgY29uc3QgZW50cnkgPSB0aGlzLmNhY2hlLmdldEVudHJ5KGNvbm5lY3Rpb24uYWRkcmVzcywgY3JlZGVudGlhbHMudXNlcm5hbWUsIGNhbGxiYWNrSGFzaCk7XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgICAgLy8gUmVhdXRoZW50aWNhdGlvbiBjYW5ub3QgdXNlIGEgdG9rZW4gZnJvbSB0aGUgY2FjaGUgc2luY2UgdGhlIHNlcnZlciBoYXNcbiAgICAgICAgICAgIC8vIHN0YXRlZCBpdCBpcyBpbnZhbGlkIGJ5IHRoZSByZXF1ZXN0IGZvciByZWF1dGhlbnRpY2F0aW9uLlxuICAgICAgICAgICAgaWYgKGVudHJ5LmlzVmFsaWQoKSAmJiAhcmVhdXRoZW50aWNhdGluZykge1xuICAgICAgICAgICAgICAgIC8vIFByZXNlbmNlIG9mIGEgdmFsaWQgY2FjaGUgZW50cnkgbWVhbnMgd2UgY2FuIHNraXAgdG8gdGhlIGZpbmlzaGluZyBzdGVwLlxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuZmluaXNoQXV0aGVudGljYXRpb24oY29ubmVjdGlvbiwgY3JlZGVudGlhbHMsIGVudHJ5LnRva2VuUmVzdWx0LCByZXNwb25zZT8uc3BlY3VsYXRpdmVBdXRoZW50aWNhdGU/LmNvbnZlcnNhdGlvbklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFByZXNlbmNlIG9mIGFuIGV4cGlyZWQgY2FjaGUgZW50cnkgbWVhbnMgd2UgbXVzdCBmZXRjaCBhIG5ldyBvbmUgYW5kXG4gICAgICAgICAgICAgICAgLy8gdGhlbiBleGVjdXRlIHRoZSBmaW5hbCBzdGVwLlxuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUmVzdWx0ID0gYXdhaXQgdGhpcy5mZXRjaEFjY2Vzc1Rva2VuKGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzLCBlbnRyeS5zZXJ2ZXJJbmZvLCByZWF1dGhlbnRpY2F0aW5nLCBjYWxsYmFja0hhc2gsIHJlcXVlc3RDYWxsYmFjaywgcmVmcmVzaENhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmZpbmlzaEF1dGhlbnRpY2F0aW9uKGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzLCB0b2tlblJlc3VsdCwgcmVhdXRoZW50aWNhdGluZyA/IHVuZGVmaW5lZCA6IHJlc3BvbnNlPy5zcGVjdWxhdGl2ZUF1dGhlbnRpY2F0ZT8uY29udmVyc2F0aW9uSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgYXJlIHJlYXV0aGVudGljYXRpbmcgYW5kIHRoaXMgZXJyb3JzIHdpdGggcmVhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyByZXF1aXJlZCwgd2UgbmVlZCB0byBkbyB0aGUgZW50aXJlIHByb2Nlc3Mgb3ZlciBhZ2FpbiBhbmQgY2xlYXJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGNhY2hlIGVudHJ5LlxuICAgICAgICAgICAgICAgICAgICBpZiAocmVhdXRoZW50aWNhdGluZyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLmNvZGUgPT09IGVycm9yXzEuTU9OR09EQl9FUlJPUl9DT0RFUy5SZWF1dGhlbnRpY2F0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWNoZS5kZWxldGVFbnRyeShjb25uZWN0aW9uLmFkZHJlc3MsIGNyZWRlbnRpYWxzLnVzZXJuYW1lLCBjYWxsYmFja0hhc2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlKGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzLCByZWF1dGhlbnRpY2F0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gTm8gZW50cnkgaW4gdGhlIGNhY2hlIHJlcXVpcmVzIHVzIHRvIGRvIGFsbCBhdXRoZW50aWNhdGlvbiBzdGVwc1xuICAgICAgICAgICAgLy8gZnJvbSBzdGFydCB0byBmaW5pc2gsIGluY2x1ZGluZyBnZXR0aW5nIGEgZnJlc2ggdG9rZW4gZm9yIHRoZSBjYWNoZS5cbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0RG9jdW1lbnQgPSBhd2FpdCB0aGlzLnN0YXJ0QXV0aGVudGljYXRpb24oY29ubmVjdGlvbiwgY3JlZGVudGlhbHMsIHJlYXV0aGVudGljYXRpbmcsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbklkID0gc3RhcnREb2N1bWVudC5jb252ZXJzYXRpb25JZDtcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlclJlc3VsdCA9IGJzb25fMS5CU09OLmRlc2VyaWFsaXplKHN0YXJ0RG9jdW1lbnQucGF5bG9hZC5idWZmZXIpO1xuICAgICAgICAgICAgY29uc3QgdG9rZW5SZXN1bHQgPSBhd2FpdCB0aGlzLmZldGNoQWNjZXNzVG9rZW4oY29ubmVjdGlvbiwgY3JlZGVudGlhbHMsIHNlcnZlclJlc3VsdCwgcmVhdXRoZW50aWNhdGluZywgY2FsbGJhY2tIYXNoLCByZXF1ZXN0Q2FsbGJhY2ssIHJlZnJlc2hDYWxsYmFjayk7XG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmZpbmlzaEF1dGhlbnRpY2F0aW9uKGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzLCB0b2tlblJlc3VsdCwgY29udmVyc2F0aW9uSWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgY2FsbGJhY2sgYXV0aGVudGljYXRpb24gcHJvY2Vzcy4gSWYgdGhlcmUgaXMgYSBzcGVjdWxhdGl2ZVxuICAgICAqIGF1dGhlbnRpY2F0aW9uIGRvY3VtZW50IGZyb20gdGhlIGluaXRpYWwgaGFuZHNoYWtlLCB0aGVuIHdlIHdpbGwgdXNlIHRoYXRcbiAgICAgKiB2YWx1ZSB0byBnZXQgdGhlIGlzc3Vlciwgb3RoZXJ3aXNlIHdlIHdpbGwgc2VuZCB0aGUgc2FzbFN0YXJ0IGNvbW1hbmQuXG4gICAgICovXG4gICAgYXN5bmMgc3RhcnRBdXRoZW50aWNhdGlvbihjb25uZWN0aW9uLCBjcmVkZW50aWFscywgcmVhdXRoZW50aWNhdGluZywgcmVzcG9uc2UpIHtcbiAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgaWYgKCFyZWF1dGhlbnRpY2F0aW5nICYmIHJlc3BvbnNlPy5zcGVjdWxhdGl2ZUF1dGhlbnRpY2F0ZSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzcG9uc2Uuc3BlY3VsYXRpdmVBdXRoZW50aWNhdGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBjb25uZWN0aW9uLmNvbW1hbmRBc3luYygoMCwgdXRpbHNfMS5ucykoY3JlZGVudGlhbHMuc291cmNlKSwgc3RhcnRDb21tYW5kRG9jdW1lbnQoY3JlZGVudGlhbHMpLCB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmlzaGVzIHRoZSBjYWxsYmFjayBhdXRoZW50aWNhdGlvbiBwcm9jZXNzLlxuICAgICAqL1xuICAgIGFzeW5jIGZpbmlzaEF1dGhlbnRpY2F0aW9uKGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzLCB0b2tlblJlc3VsdCwgY29udmVyc2F0aW9uSWQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29ubmVjdGlvbi5jb21tYW5kQXN5bmMoKDAsIHV0aWxzXzEubnMpKGNyZWRlbnRpYWxzLnNvdXJjZSksIGZpbmlzaENvbW1hbmREb2N1bWVudCh0b2tlblJlc3VsdC5hY2Nlc3NUb2tlbiwgY29udmVyc2F0aW9uSWQpLCB1bmRlZmluZWQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIGFuIGFjY2VzcyB0b2tlbiB1c2luZyBlaXRoZXIgdGhlIHJlcXVlc3Qgb3IgcmVmcmVzaCBjYWxsYmFja3MgYW5kXG4gICAgICogcHV0cyBpdCBpbiB0aGUgY2FjaGUuXG4gICAgICovXG4gICAgYXN5bmMgZmV0Y2hBY2Nlc3NUb2tlbihjb25uZWN0aW9uLCBjcmVkZW50aWFscywgc2VydmVySW5mbywgcmVhdXRoZW50aWNhdGluZywgY2FsbGJhY2tIYXNoLCByZXF1ZXN0Q2FsbGJhY2ssIHJlZnJlc2hDYWxsYmFjaykge1xuICAgICAgICAvLyBHZXQgdGhlIHRva2VuIGZyb20gdGhlIGNhY2hlLlxuICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMuY2FjaGUuZ2V0RW50cnkoY29ubmVjdGlvbi5hZGRyZXNzLCBjcmVkZW50aWFscy51c2VybmFtZSwgY2FsbGJhY2tIYXNoKTtcbiAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHsgdGltZW91dFNlY29uZHM6IFRJTUVPVVRfUywgdmVyc2lvbjogT0lEQ19WRVJTSU9OIH07XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYSB0b2tlbiBpbiB0aGUgY2FjaGUuXG4gICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIGNhY2hlIGVudHJ5IGlzIHZhbGlkLCByZXR1cm4gdGhlIHRva2VuIHJlc3VsdC5cbiAgICAgICAgICAgIGlmIChlbnRyeS5pc1ZhbGlkKCkgJiYgIXJlYXV0aGVudGljYXRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZW50cnkudG9rZW5SZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB0aGUgY2FjaGUgZW50cnkgaXMgbm90IHZhbGlkLCByZW1vdmUgaXQgZnJvbSB0aGUgY2FjaGUgYW5kIGZpcnN0IGF0dGVtcHRcbiAgICAgICAgICAgIC8vIHRvIHVzZSB0aGUgcmVmcmVzaCBjYWxsYmFjayB0byBnZXQgYSBuZXcgdG9rZW4uIElmIG5vIHJlZnJlc2ggY2FsbGJhY2tcbiAgICAgICAgICAgIC8vIGV4aXN0cywgdGhlbiBmYWxsYmFjayB0byB0aGUgcmVxdWVzdCBjYWxsYmFjay5cbiAgICAgICAgICAgIGlmIChyZWZyZXNoQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnJlZnJlc2hUb2tlbiA9IGVudHJ5LnRva2VuUmVzdWx0LnJlZnJlc2hUb2tlbjtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCByZWZyZXNoQ2FsbGJhY2soc2VydmVySW5mbywgY29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCByZXF1ZXN0Q2FsbGJhY2soc2VydmVySW5mbywgY29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXaXRoIG5vIHRva2VuIGluIHRoZSBjYWNoZSB3ZSB1c2UgdGhlIHJlcXVlc3QgY2FsbGJhY2suXG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCByZXF1ZXN0Q2FsbGJhY2soc2VydmVySW5mbywgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVmFsaWRhdGUgdGhhdCB0aGUgcmVzdWx0IHJldHVybmVkIGJ5IHRoZSBjYWxsYmFjayBpcyBhY2NlcHRhYmxlLiBJZiBpdCBpcyBub3RcbiAgICAgICAgLy8gd2UgbXVzdCBjbGVhciB0aGUgdG9rZW4gcmVzdWx0IGZyb20gdGhlIGNhY2hlLlxuICAgICAgICBpZiAoaXNDYWxsYmFja1Jlc3VsdEludmFsaWQocmVzdWx0KSkge1xuICAgICAgICAgICAgdGhpcy5jYWNoZS5kZWxldGVFbnRyeShjb25uZWN0aW9uLmFkZHJlc3MsIGNyZWRlbnRpYWxzLnVzZXJuYW1lLCBjYWxsYmFja0hhc2gpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcihDQUxMQkFDS19SRVNVTFRfRVJST1IpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENsZWFudXAgdGhlIGNhY2hlLlxuICAgICAgICB0aGlzLmNhY2hlLmRlbGV0ZUV4cGlyZWRFbnRyaWVzKCk7XG4gICAgICAgIC8vIFB1dCB0aGUgbmV3IGVudHJ5IGludG8gdGhlIGNhY2hlLlxuICAgICAgICB0aGlzLmNhY2hlLmFkZEVudHJ5KGNvbm5lY3Rpb24uYWRkcmVzcywgY3JlZGVudGlhbHMudXNlcm5hbWUgfHwgJycsIGNhbGxiYWNrSGFzaCwgcmVzdWx0LCBzZXJ2ZXJJbmZvKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5leHBvcnRzLkNhbGxiYWNrV29ya2Zsb3cgPSBDYWxsYmFja1dvcmtmbG93O1xuLyoqXG4gKiBHZW5lcmF0ZSB0aGUgZmluaXNoaW5nIGNvbW1hbmQgZG9jdW1lbnQgZm9yIGF1dGhlbnRpY2F0aW9uLiBXaWxsIGJlIGFcbiAqIHNhc2xTdGFydCBvciBzYXNsQ29udGludWUgZGVwZW5kaW5nIG9uIHRoZSBwcmVzZW5jZSBvZiBhIGNvbnZlcnNhdGlvbiBpZC5cbiAqL1xuZnVuY3Rpb24gZmluaXNoQ29tbWFuZERvY3VtZW50KHRva2VuLCBjb252ZXJzYXRpb25JZCkge1xuICAgIGlmIChjb252ZXJzYXRpb25JZCAhPSBudWxsICYmIHR5cGVvZiBjb252ZXJzYXRpb25JZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNhc2xDb250aW51ZTogMSxcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgIHBheWxvYWQ6IG5ldyBic29uXzEuQmluYXJ5KGJzb25fMS5CU09OLnNlcmlhbGl6ZSh7IGp3dDogdG9rZW4gfSkpXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIHNhc2xDb250aW51ZSByZXF1aXJlcyBhIGNvbnZlcnNhdGlvbklkIGluIHRoZSBjb21tYW5kIHRvIGJlIHZhbGlkIHNvIGluIHRoaXNcbiAgICAvLyBjYXNlIHRoZSBzZXJ2ZXIgYWxsb3dzIFwic3RlcCB0d29cIiB0byBhY3R1YWxseSBiZSBhIHNhc2xTdGFydCB3aXRoIHRoZSB0b2tlblxuICAgIC8vIGFzIHRoZSBqd3Qgc2luY2UgdGhlIHVzZSBvZiB0aGUgY2FjaGVkIHZhbHVlIGhhcyBubyBjb3JyZWxhdGluZyBjb252ZXJzYXRpbmdcbiAgICAvLyBvbiB0aGUgcGFydGljdWxhciBjb25uZWN0aW9uLlxuICAgIHJldHVybiB7XG4gICAgICAgIHNhc2xTdGFydDogMSxcbiAgICAgICAgbWVjaGFuaXNtOiBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfT0lEQyxcbiAgICAgICAgcGF5bG9hZDogbmV3IGJzb25fMS5CaW5hcnkoYnNvbl8xLkJTT04uc2VyaWFsaXplKHsgand0OiB0b2tlbiB9KSlcbiAgICB9O1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVzdWx0IHJldHVybmVkIGZyb20gYSByZXF1ZXN0IG9yIHJlZnJlc2ggY2FsbGJhY2tcbiAqIGZ1bmN0aW9uIGlzIGludmFsaWQuIFRoaXMgbWVhbnMgdGhlIHJlc3VsdCBpcyBudWxsaXNoLCBkb2Vzbid0IGNvbnRhaW5cbiAqIHRoZSBhY2Nlc3NUb2tlbiByZXF1aXJlZCBmaWVsZCwgYW5kIGRvZXMgbm90IGNvbnRhaW4gZXh0cmEgZmllbGRzLlxuICovXG5mdW5jdGlvbiBpc0NhbGxiYWNrUmVzdWx0SW52YWxpZCh0b2tlblJlc3VsdCkge1xuICAgIGlmICh0b2tlblJlc3VsdCA9PSBudWxsIHx8IHR5cGVvZiB0b2tlblJlc3VsdCAhPT0gJ29iamVjdCcpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmICghKCdhY2Nlc3NUb2tlbicgaW4gdG9rZW5SZXN1bHQpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gIU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRva2VuUmVzdWx0KS5ldmVyeShwcm9wID0+IFJFU1VMVF9QUk9QRVJUSUVTLmluY2x1ZGVzKHByb3ApKTtcbn1cbi8qKlxuICogR2VuZXJhdGUgdGhlIHNhc2xTdGFydCBjb21tYW5kIGRvY3VtZW50LlxuICovXG5mdW5jdGlvbiBzdGFydENvbW1hbmREb2N1bWVudChjcmVkZW50aWFscykge1xuICAgIGNvbnN0IHBheWxvYWQgPSB7fTtcbiAgICBpZiAoY3JlZGVudGlhbHMudXNlcm5hbWUpIHtcbiAgICAgICAgcGF5bG9hZC5uID0gY3JlZGVudGlhbHMudXNlcm5hbWU7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNhc2xTdGFydDogMSxcbiAgICAgICAgYXV0b0F1dGhvcml6ZTogMSxcbiAgICAgICAgbWVjaGFuaXNtOiBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfT0lEQyxcbiAgICAgICAgcGF5bG9hZDogbmV3IGJzb25fMS5CaW5hcnkoYnNvbl8xLkJTT04uc2VyaWFsaXplKHBheWxvYWQpKVxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWxsYmFja193b3JrZmxvdy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJDYWxsYmFja1dvcmtmbG93IiwiYnNvbl8xIiwicmVxdWlyZSIsImVycm9yXzEiLCJ1dGlsc18xIiwicHJvdmlkZXJzXzEiLCJjYWxsYmFja19sb2NrX2NhY2hlXzEiLCJ0b2tlbl9lbnRyeV9jYWNoZV8xIiwiT0lEQ19WRVJTSU9OIiwiVElNRU9VVF9TIiwiUkVTVUxUX1BST1BFUlRJRVMiLCJDQUxMQkFDS19SRVNVTFRfRVJST1IiLCJjb25zdHJ1Y3RvciIsImNhY2hlIiwiVG9rZW5FbnRyeUNhY2hlIiwiY2FsbGJhY2tDYWNoZSIsIkNhbGxiYWNrTG9ja0NhY2hlIiwic3BlY3VsYXRpdmVBdXRoIiwiY3JlZGVudGlhbHMiLCJkb2N1bWVudCIsInN0YXJ0Q29tbWFuZERvY3VtZW50IiwiZGIiLCJzb3VyY2UiLCJzcGVjdWxhdGl2ZUF1dGhlbnRpY2F0ZSIsImV4ZWN1dGUiLCJjb25uZWN0aW9uIiwicmVhdXRoZW50aWNhdGluZyIsInJlc3BvbnNlIiwicmVxdWVzdENhbGxiYWNrIiwicmVmcmVzaENhbGxiYWNrIiwiY2FsbGJhY2tIYXNoIiwiZ2V0RW50cnkiLCJlbnRyeSIsImFkZHJlc3MiLCJ1c2VybmFtZSIsInJlc3VsdCIsImlzVmFsaWQiLCJmaW5pc2hBdXRoZW50aWNhdGlvbiIsInRva2VuUmVzdWx0IiwiY29udmVyc2F0aW9uSWQiLCJmZXRjaEFjY2Vzc1Rva2VuIiwic2VydmVySW5mbyIsInVuZGVmaW5lZCIsImVycm9yIiwiTW9uZ29FcnJvciIsImNvZGUiLCJNT05HT0RCX0VSUk9SX0NPREVTIiwiUmVhdXRoZW50aWNhdGUiLCJkZWxldGVFbnRyeSIsInN0YXJ0RG9jdW1lbnQiLCJzdGFydEF1dGhlbnRpY2F0aW9uIiwic2VydmVyUmVzdWx0IiwiQlNPTiIsImRlc2VyaWFsaXplIiwicGF5bG9hZCIsImJ1ZmZlciIsImNvbW1hbmRBc3luYyIsIm5zIiwiZmluaXNoQ29tbWFuZERvY3VtZW50IiwiYWNjZXNzVG9rZW4iLCJjb250ZXh0IiwidGltZW91dFNlY29uZHMiLCJ2ZXJzaW9uIiwicmVmcmVzaFRva2VuIiwiaXNDYWxsYmFja1Jlc3VsdEludmFsaWQiLCJNb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yIiwiZGVsZXRlRXhwaXJlZEVudHJpZXMiLCJhZGRFbnRyeSIsInRva2VuIiwic2FzbENvbnRpbnVlIiwiQmluYXJ5Iiwic2VyaWFsaXplIiwiand0Iiwic2FzbFN0YXJ0IiwibWVjaGFuaXNtIiwiQXV0aE1lY2hhbmlzbSIsIk1PTkdPREJfT0lEQyIsImdldE93blByb3BlcnR5TmFtZXMiLCJldmVyeSIsInByb3AiLCJpbmNsdWRlcyIsIm4iLCJhdXRvQXV0aG9yaXplIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_workflow.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/service_workflow.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/service_workflow.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.commandDocument = exports.ServiceWorkflow = void 0;\nconst bson_1 = __webpack_require__(/*! bson */ \"(ssr)/./node_modules/bson/lib/bson.cjs\");\nconst utils_1 = __webpack_require__(/*! ../../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst providers_1 = __webpack_require__(/*! ../providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\n/**\n * Common behaviour for OIDC device workflows.\n * @internal\n */ class ServiceWorkflow {\n    /**\n     * Execute the workflow. Looks for AWS_WEB_IDENTITY_TOKEN_FILE in the environment\n     * and then attempts to read the token from that path.\n     */ async execute(connection, credentials) {\n        const token = await this.getToken(credentials);\n        const command = commandDocument(token);\n        return connection.commandAsync((0, utils_1.ns)(credentials.source), command, undefined);\n    }\n    /**\n     * Get the document to add for speculative authentication.\n     */ async speculativeAuth(credentials) {\n        const token = await this.getToken(credentials);\n        const document = commandDocument(token);\n        document.db = credentials.source;\n        return {\n            speculativeAuthenticate: document\n        };\n    }\n}\nexports.ServiceWorkflow = ServiceWorkflow;\n/**\n * Create the saslStart command document.\n */ function commandDocument(token) {\n    return {\n        saslStart: 1,\n        mechanism: providers_1.AuthMechanism.MONGODB_OIDC,\n        payload: bson_1.BSON.serialize({\n            jwt: token\n        })\n    };\n}\nexports.commandDocument = commandDocument; //# sourceMappingURL=service_workflow.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9zZXJ2aWNlX3dvcmtmbG93LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx1QkFBdUIsR0FBR0EsdUJBQXVCLEdBQUcsS0FBSztBQUN6RCxNQUFNSSxTQUFTQyxtQkFBT0EsQ0FBQyxvREFBTTtBQUM3QixNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQyxpRUFBZ0I7QUFDeEMsTUFBTUUsY0FBY0YsbUJBQU9BLENBQUMsNkVBQWM7QUFDMUM7OztDQUdDLEdBQ0QsTUFBTUY7SUFDRjs7O0tBR0MsR0FDRCxNQUFNSyxRQUFRQyxVQUFVLEVBQUVDLFdBQVcsRUFBRTtRQUNuQyxNQUFNQyxRQUFRLE1BQU0sSUFBSSxDQUFDQyxRQUFRLENBQUNGO1FBQ2xDLE1BQU1HLFVBQVVYLGdCQUFnQlM7UUFDaEMsT0FBT0YsV0FBV0ssWUFBWSxDQUFDLENBQUMsR0FBR1IsUUFBUVMsRUFBRSxFQUFFTCxZQUFZTSxNQUFNLEdBQUdILFNBQVNJO0lBQ2pGO0lBQ0E7O0tBRUMsR0FDRCxNQUFNQyxnQkFBZ0JSLFdBQVcsRUFBRTtRQUMvQixNQUFNQyxRQUFRLE1BQU0sSUFBSSxDQUFDQyxRQUFRLENBQUNGO1FBQ2xDLE1BQU1TLFdBQVdqQixnQkFBZ0JTO1FBQ2pDUSxTQUFTQyxFQUFFLEdBQUdWLFlBQVlNLE1BQU07UUFDaEMsT0FBTztZQUFFSyx5QkFBeUJGO1FBQVM7SUFDL0M7QUFDSjtBQUNBbkIsdUJBQXVCLEdBQUdHO0FBQzFCOztDQUVDLEdBQ0QsU0FBU0QsZ0JBQWdCUyxLQUFLO0lBQzFCLE9BQU87UUFDSFcsV0FBVztRQUNYQyxXQUFXaEIsWUFBWWlCLGFBQWEsQ0FBQ0MsWUFBWTtRQUNqREMsU0FBU3RCLE9BQU91QixJQUFJLENBQUNDLFNBQVMsQ0FBQztZQUFFQyxLQUFLbEI7UUFBTTtJQUNoRDtBQUNKO0FBQ0FYLHVCQUF1QixHQUFHRSxpQkFDMUIsNENBQTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvYXV0aC9tb25nb2RiX29pZGMvc2VydmljZV93b3JrZmxvdy5qcz9mNDAwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jb21tYW5kRG9jdW1lbnQgPSBleHBvcnRzLlNlcnZpY2VXb3JrZmxvdyA9IHZvaWQgMDtcbmNvbnN0IGJzb25fMSA9IHJlcXVpcmUoXCJic29uXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi91dGlsc1wiKTtcbmNvbnN0IHByb3ZpZGVyc18xID0gcmVxdWlyZShcIi4uL3Byb3ZpZGVyc1wiKTtcbi8qKlxuICogQ29tbW9uIGJlaGF2aW91ciBmb3IgT0lEQyBkZXZpY2Ugd29ya2Zsb3dzLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIFNlcnZpY2VXb3JrZmxvdyB7XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSB0aGUgd29ya2Zsb3cuIExvb2tzIGZvciBBV1NfV0VCX0lERU5USVRZX1RPS0VOX0ZJTEUgaW4gdGhlIGVudmlyb25tZW50XG4gICAgICogYW5kIHRoZW4gYXR0ZW1wdHMgdG8gcmVhZCB0aGUgdG9rZW4gZnJvbSB0aGF0IHBhdGguXG4gICAgICovXG4gICAgYXN5bmMgZXhlY3V0ZShjb25uZWN0aW9uLCBjcmVkZW50aWFscykge1xuICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHRoaXMuZ2V0VG9rZW4oY3JlZGVudGlhbHMpO1xuICAgICAgICBjb25zdCBjb21tYW5kID0gY29tbWFuZERvY3VtZW50KHRva2VuKTtcbiAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uY29tbWFuZEFzeW5jKCgwLCB1dGlsc18xLm5zKShjcmVkZW50aWFscy5zb3VyY2UpLCBjb21tYW5kLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGRvY3VtZW50IHRvIGFkZCBmb3Igc3BlY3VsYXRpdmUgYXV0aGVudGljYXRpb24uXG4gICAgICovXG4gICAgYXN5bmMgc3BlY3VsYXRpdmVBdXRoKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy5nZXRUb2tlbihjcmVkZW50aWFscyk7XG4gICAgICAgIGNvbnN0IGRvY3VtZW50ID0gY29tbWFuZERvY3VtZW50KHRva2VuKTtcbiAgICAgICAgZG9jdW1lbnQuZGIgPSBjcmVkZW50aWFscy5zb3VyY2U7XG4gICAgICAgIHJldHVybiB7IHNwZWN1bGF0aXZlQXV0aGVudGljYXRlOiBkb2N1bWVudCB9O1xuICAgIH1cbn1cbmV4cG9ydHMuU2VydmljZVdvcmtmbG93ID0gU2VydmljZVdvcmtmbG93O1xuLyoqXG4gKiBDcmVhdGUgdGhlIHNhc2xTdGFydCBjb21tYW5kIGRvY3VtZW50LlxuICovXG5mdW5jdGlvbiBjb21tYW5kRG9jdW1lbnQodG9rZW4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzYXNsU3RhcnQ6IDEsXG4gICAgICAgIG1lY2hhbmlzbTogcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX09JREMsXG4gICAgICAgIHBheWxvYWQ6IGJzb25fMS5CU09OLnNlcmlhbGl6ZSh7IGp3dDogdG9rZW4gfSlcbiAgICB9O1xufVxuZXhwb3J0cy5jb21tYW5kRG9jdW1lbnQgPSBjb21tYW5kRG9jdW1lbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXJ2aWNlX3dvcmtmbG93LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNvbW1hbmREb2N1bWVudCIsIlNlcnZpY2VXb3JrZmxvdyIsImJzb25fMSIsInJlcXVpcmUiLCJ1dGlsc18xIiwicHJvdmlkZXJzXzEiLCJleGVjdXRlIiwiY29ubmVjdGlvbiIsImNyZWRlbnRpYWxzIiwidG9rZW4iLCJnZXRUb2tlbiIsImNvbW1hbmQiLCJjb21tYW5kQXN5bmMiLCJucyIsInNvdXJjZSIsInVuZGVmaW5lZCIsInNwZWN1bGF0aXZlQXV0aCIsImRvY3VtZW50IiwiZGIiLCJzcGVjdWxhdGl2ZUF1dGhlbnRpY2F0ZSIsInNhc2xTdGFydCIsIm1lY2hhbmlzbSIsIkF1dGhNZWNoYW5pc20iLCJNT05HT0RCX09JREMiLCJwYXlsb2FkIiwiQlNPTiIsInNlcmlhbGl6ZSIsImp3dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/service_workflow.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/token_entry_cache.js":
/*!******************************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/token_entry_cache.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.TokenEntryCache = exports.TokenEntry = void 0;\nconst cache_1 = __webpack_require__(/*! ./cache */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/cache.js\");\n/* Default expiration is now for when no expiration provided */ const DEFAULT_EXPIRATION_SECS = 0;\n/** @internal */ class TokenEntry extends cache_1.ExpiringCacheEntry {\n    /**\n     * Instantiate the entry.\n     */ constructor(tokenResult, serverInfo, expiration){\n        super(expiration);\n        this.tokenResult = tokenResult;\n        this.serverInfo = serverInfo;\n    }\n}\nexports.TokenEntry = TokenEntry;\n/**\n * Cache of OIDC token entries.\n * @internal\n */ class TokenEntryCache extends cache_1.Cache {\n    /**\n     * Set an entry in the token cache.\n     */ addEntry(address, username, callbackHash, tokenResult, serverInfo) {\n        const entry = new TokenEntry(tokenResult, serverInfo, tokenResult.expiresInSeconds ?? DEFAULT_EXPIRATION_SECS);\n        this.entries.set(this.cacheKey(address, username, callbackHash), entry);\n        return entry;\n    }\n    /**\n     * Delete an entry from the cache.\n     */ deleteEntry(address, username, callbackHash) {\n        this.entries.delete(this.cacheKey(address, username, callbackHash));\n    }\n    /**\n     * Get an entry from the cache.\n     */ getEntry(address, username, callbackHash) {\n        return this.entries.get(this.cacheKey(address, username, callbackHash));\n    }\n    /**\n     * Delete all expired entries from the cache.\n     */ deleteExpiredEntries() {\n        for (const [key, entry] of this.entries){\n            if (!entry.isValid()) {\n                this.entries.delete(key);\n            }\n        }\n    }\n    /**\n     * Create a cache key from the address and username.\n     */ cacheKey(address, username, callbackHash) {\n        return this.hashedCacheKey(address, username, callbackHash);\n    }\n}\nexports.TokenEntryCache = TokenEntryCache; //# sourceMappingURL=token_entry_cache.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy90b2tlbl9lbnRyeV9jYWNoZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsdUJBQXVCLEdBQUdBLGtCQUFrQixHQUFHLEtBQUs7QUFDcEQsTUFBTUksVUFBVUMsbUJBQU9BLENBQUMsaUZBQVM7QUFDakMsNkRBQTZELEdBQzdELE1BQU1DLDBCQUEwQjtBQUNoQyxjQUFjLEdBQ2QsTUFBTUgsbUJBQW1CQyxRQUFRRyxrQkFBa0I7SUFDL0M7O0tBRUMsR0FDREMsWUFBWUMsV0FBVyxFQUFFQyxVQUFVLEVBQUVDLFVBQVUsQ0FBRTtRQUM3QyxLQUFLLENBQUNBO1FBQ04sSUFBSSxDQUFDRixXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0MsVUFBVSxHQUFHQTtJQUN0QjtBQUNKO0FBQ0FWLGtCQUFrQixHQUFHRztBQUNyQjs7O0NBR0MsR0FDRCxNQUFNRCx3QkFBd0JFLFFBQVFRLEtBQUs7SUFDdkM7O0tBRUMsR0FDREMsU0FBU0MsT0FBTyxFQUFFQyxRQUFRLEVBQUVDLFlBQVksRUFBRVAsV0FBVyxFQUFFQyxVQUFVLEVBQUU7UUFDL0QsTUFBTU8sUUFBUSxJQUFJZCxXQUFXTSxhQUFhQyxZQUFZRCxZQUFZUyxnQkFBZ0IsSUFBSVo7UUFDdEYsSUFBSSxDQUFDYSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxJQUFJLENBQUNDLFFBQVEsQ0FBQ1AsU0FBU0MsVUFBVUMsZUFBZUM7UUFDakUsT0FBT0E7SUFDWDtJQUNBOztLQUVDLEdBQ0RLLFlBQVlSLE9BQU8sRUFBRUMsUUFBUSxFQUFFQyxZQUFZLEVBQUU7UUFDekMsSUFBSSxDQUFDRyxPQUFPLENBQUNJLE1BQU0sQ0FBQyxJQUFJLENBQUNGLFFBQVEsQ0FBQ1AsU0FBU0MsVUFBVUM7SUFDekQ7SUFDQTs7S0FFQyxHQUNEUSxTQUFTVixPQUFPLEVBQUVDLFFBQVEsRUFBRUMsWUFBWSxFQUFFO1FBQ3RDLE9BQU8sSUFBSSxDQUFDRyxPQUFPLENBQUNNLEdBQUcsQ0FBQyxJQUFJLENBQUNKLFFBQVEsQ0FBQ1AsU0FBU0MsVUFBVUM7SUFDN0Q7SUFDQTs7S0FFQyxHQUNEVSx1QkFBdUI7UUFDbkIsS0FBSyxNQUFNLENBQUNDLEtBQUtWLE1BQU0sSUFBSSxJQUFJLENBQUNFLE9BQU8sQ0FBRTtZQUNyQyxJQUFJLENBQUNGLE1BQU1XLE9BQU8sSUFBSTtnQkFDbEIsSUFBSSxDQUFDVCxPQUFPLENBQUNJLE1BQU0sQ0FBQ0k7WUFDeEI7UUFDSjtJQUNKO0lBQ0E7O0tBRUMsR0FDRE4sU0FBU1AsT0FBTyxFQUFFQyxRQUFRLEVBQUVDLFlBQVksRUFBRTtRQUN0QyxPQUFPLElBQUksQ0FBQ2EsY0FBYyxDQUFDZixTQUFTQyxVQUFVQztJQUNsRDtBQUNKO0FBQ0FoQix1QkFBdUIsR0FBR0UsaUJBQzFCLDZDQUE2QyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2F1dGgvbW9uZ29kYl9vaWRjL3Rva2VuX2VudHJ5X2NhY2hlLmpzPzAxZDkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlRva2VuRW50cnlDYWNoZSA9IGV4cG9ydHMuVG9rZW5FbnRyeSA9IHZvaWQgMDtcbmNvbnN0IGNhY2hlXzEgPSByZXF1aXJlKFwiLi9jYWNoZVwiKTtcbi8qIERlZmF1bHQgZXhwaXJhdGlvbiBpcyBub3cgZm9yIHdoZW4gbm8gZXhwaXJhdGlvbiBwcm92aWRlZCAqL1xuY29uc3QgREVGQVVMVF9FWFBJUkFUSU9OX1NFQ1MgPSAwO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgVG9rZW5FbnRyeSBleHRlbmRzIGNhY2hlXzEuRXhwaXJpbmdDYWNoZUVudHJ5IHtcbiAgICAvKipcbiAgICAgKiBJbnN0YW50aWF0ZSB0aGUgZW50cnkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodG9rZW5SZXN1bHQsIHNlcnZlckluZm8sIGV4cGlyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoZXhwaXJhdGlvbik7XG4gICAgICAgIHRoaXMudG9rZW5SZXN1bHQgPSB0b2tlblJlc3VsdDtcbiAgICAgICAgdGhpcy5zZXJ2ZXJJbmZvID0gc2VydmVySW5mbztcbiAgICB9XG59XG5leHBvcnRzLlRva2VuRW50cnkgPSBUb2tlbkVudHJ5O1xuLyoqXG4gKiBDYWNoZSBvZiBPSURDIHRva2VuIGVudHJpZXMuXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgVG9rZW5FbnRyeUNhY2hlIGV4dGVuZHMgY2FjaGVfMS5DYWNoZSB7XG4gICAgLyoqXG4gICAgICogU2V0IGFuIGVudHJ5IGluIHRoZSB0b2tlbiBjYWNoZS5cbiAgICAgKi9cbiAgICBhZGRFbnRyeShhZGRyZXNzLCB1c2VybmFtZSwgY2FsbGJhY2tIYXNoLCB0b2tlblJlc3VsdCwgc2VydmVySW5mbykge1xuICAgICAgICBjb25zdCBlbnRyeSA9IG5ldyBUb2tlbkVudHJ5KHRva2VuUmVzdWx0LCBzZXJ2ZXJJbmZvLCB0b2tlblJlc3VsdC5leHBpcmVzSW5TZWNvbmRzID8/IERFRkFVTFRfRVhQSVJBVElPTl9TRUNTKTtcbiAgICAgICAgdGhpcy5lbnRyaWVzLnNldCh0aGlzLmNhY2hlS2V5KGFkZHJlc3MsIHVzZXJuYW1lLCBjYWxsYmFja0hhc2gpLCBlbnRyeSk7XG4gICAgICAgIHJldHVybiBlbnRyeTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIGFuIGVudHJ5IGZyb20gdGhlIGNhY2hlLlxuICAgICAqL1xuICAgIGRlbGV0ZUVudHJ5KGFkZHJlc3MsIHVzZXJuYW1lLCBjYWxsYmFja0hhc2gpIHtcbiAgICAgICAgdGhpcy5lbnRyaWVzLmRlbGV0ZSh0aGlzLmNhY2hlS2V5KGFkZHJlc3MsIHVzZXJuYW1lLCBjYWxsYmFja0hhc2gpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGFuIGVudHJ5IGZyb20gdGhlIGNhY2hlLlxuICAgICAqL1xuICAgIGdldEVudHJ5KGFkZHJlc3MsIHVzZXJuYW1lLCBjYWxsYmFja0hhc2gpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50cmllcy5nZXQodGhpcy5jYWNoZUtleShhZGRyZXNzLCB1c2VybmFtZSwgY2FsbGJhY2tIYXNoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhbGwgZXhwaXJlZCBlbnRyaWVzIGZyb20gdGhlIGNhY2hlLlxuICAgICAqL1xuICAgIGRlbGV0ZUV4cGlyZWRFbnRyaWVzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGVudHJ5XSBvZiB0aGlzLmVudHJpZXMpIHtcbiAgICAgICAgICAgIGlmICghZW50cnkuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbnRyaWVzLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGNhY2hlIGtleSBmcm9tIHRoZSBhZGRyZXNzIGFuZCB1c2VybmFtZS5cbiAgICAgKi9cbiAgICBjYWNoZUtleShhZGRyZXNzLCB1c2VybmFtZSwgY2FsbGJhY2tIYXNoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc2hlZENhY2hlS2V5KGFkZHJlc3MsIHVzZXJuYW1lLCBjYWxsYmFja0hhc2gpO1xuICAgIH1cbn1cbmV4cG9ydHMuVG9rZW5FbnRyeUNhY2hlID0gVG9rZW5FbnRyeUNhY2hlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9rZW5fZW50cnlfY2FjaGUuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiVG9rZW5FbnRyeUNhY2hlIiwiVG9rZW5FbnRyeSIsImNhY2hlXzEiLCJyZXF1aXJlIiwiREVGQVVMVF9FWFBJUkFUSU9OX1NFQ1MiLCJFeHBpcmluZ0NhY2hlRW50cnkiLCJjb25zdHJ1Y3RvciIsInRva2VuUmVzdWx0Iiwic2VydmVySW5mbyIsImV4cGlyYXRpb24iLCJDYWNoZSIsImFkZEVudHJ5IiwiYWRkcmVzcyIsInVzZXJuYW1lIiwiY2FsbGJhY2tIYXNoIiwiZW50cnkiLCJleHBpcmVzSW5TZWNvbmRzIiwiZW50cmllcyIsInNldCIsImNhY2hlS2V5IiwiZGVsZXRlRW50cnkiLCJkZWxldGUiLCJnZXRFbnRyeSIsImdldCIsImRlbGV0ZUV4cGlyZWRFbnRyaWVzIiwia2V5IiwiaXNWYWxpZCIsImhhc2hlZENhY2hlS2V5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/token_entry_cache.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/plain.js":
/*!*****************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/plain.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Plain = void 0;\nconst bson_1 = __webpack_require__(/*! ../../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\nclass Plain extends auth_provider_1.AuthProvider {\n    async auth(authContext) {\n        const { connection, credentials } = authContext;\n        if (!credentials) {\n            throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n        }\n        const { username, password } = credentials;\n        const payload = new bson_1.Binary(Buffer.from(`\\x00${username}\\x00${password}`));\n        const command = {\n            saslStart: 1,\n            mechanism: \"PLAIN\",\n            payload: payload,\n            autoAuthorize: 1\n        };\n        await connection.commandAsync((0, utils_1.ns)(\"$external.$cmd\"), command, undefined);\n    }\n}\nexports.Plain = Plain; //# sourceMappingURL=plain.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL3BsYWluLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxhQUFhLEdBQUcsS0FBSztBQUNyQixNQUFNRyxTQUFTQyxtQkFBT0EsQ0FBQyw0REFBWTtBQUNuQyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQyw4REFBYTtBQUNyQyxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQyw4REFBYTtBQUNyQyxNQUFNRyxrQkFBa0JILG1CQUFPQSxDQUFDLG9GQUFpQjtBQUNqRCxNQUFNRixjQUFjSyxnQkFBZ0JDLFlBQVk7SUFDNUMsTUFBTUMsS0FBS0MsV0FBVyxFQUFFO1FBQ3BCLE1BQU0sRUFBRUMsVUFBVSxFQUFFQyxXQUFXLEVBQUUsR0FBR0Y7UUFDcEMsSUFBSSxDQUFDRSxhQUFhO1lBQ2QsTUFBTSxJQUFJUCxRQUFRUSw0QkFBNEIsQ0FBQztRQUNuRDtRQUNBLE1BQU0sRUFBRUMsUUFBUSxFQUFFQyxRQUFRLEVBQUUsR0FBR0g7UUFDL0IsTUFBTUksVUFBVSxJQUFJYixPQUFPYyxNQUFNLENBQUNDLE9BQU9DLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRUwsU0FBUyxJQUFJLEVBQUVDLFNBQVMsQ0FBQztRQUM5RSxNQUFNSyxVQUFVO1lBQ1pDLFdBQVc7WUFDWEMsV0FBVztZQUNYTixTQUFTQTtZQUNUTyxlQUFlO1FBQ25CO1FBQ0EsTUFBTVosV0FBV2EsWUFBWSxDQUFDLENBQUMsR0FBR2xCLFFBQVFtQixFQUFFLEVBQUUsbUJBQW1CTCxTQUFTTTtJQUM5RTtBQUNKO0FBQ0ExQixhQUFhLEdBQUdFLE9BQ2hCLGlDQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2F1dGgvcGxhaW4uanM/MDA2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUGxhaW4gPSB2b2lkIDA7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi4vLi4vYnNvblwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vLi4vZXJyb3JcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzXCIpO1xuY29uc3QgYXV0aF9wcm92aWRlcl8xID0gcmVxdWlyZShcIi4vYXV0aF9wcm92aWRlclwiKTtcbmNsYXNzIFBsYWluIGV4dGVuZHMgYXV0aF9wcm92aWRlcl8xLkF1dGhQcm92aWRlciB7XG4gICAgYXN5bmMgYXV0aChhdXRoQ29udGV4dCkge1xuICAgICAgICBjb25zdCB7IGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzIH0gPSBhdXRoQ29udGV4dDtcbiAgICAgICAgaWYgKCFjcmVkZW50aWFscykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcignQXV0aENvbnRleHQgbXVzdCBwcm92aWRlIGNyZWRlbnRpYWxzLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0gPSBjcmVkZW50aWFscztcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IG5ldyBic29uXzEuQmluYXJ5KEJ1ZmZlci5mcm9tKGBcXHgwMCR7dXNlcm5hbWV9XFx4MDAke3Bhc3N3b3JkfWApKTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHtcbiAgICAgICAgICAgIHNhc2xTdGFydDogMSxcbiAgICAgICAgICAgIG1lY2hhbmlzbTogJ1BMQUlOJyxcbiAgICAgICAgICAgIHBheWxvYWQ6IHBheWxvYWQsXG4gICAgICAgICAgICBhdXRvQXV0aG9yaXplOiAxXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29tbWFuZEFzeW5jKCgwLCB1dGlsc18xLm5zKSgnJGV4dGVybmFsLiRjbWQnKSwgY29tbWFuZCwgdW5kZWZpbmVkKTtcbiAgICB9XG59XG5leHBvcnRzLlBsYWluID0gUGxhaW47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wbGFpbi5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJQbGFpbiIsImJzb25fMSIsInJlcXVpcmUiLCJlcnJvcl8xIiwidXRpbHNfMSIsImF1dGhfcHJvdmlkZXJfMSIsIkF1dGhQcm92aWRlciIsImF1dGgiLCJhdXRoQ29udGV4dCIsImNvbm5lY3Rpb24iLCJjcmVkZW50aWFscyIsIk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwicGF5bG9hZCIsIkJpbmFyeSIsIkJ1ZmZlciIsImZyb20iLCJjb21tYW5kIiwic2FzbFN0YXJ0IiwibWVjaGFuaXNtIiwiYXV0b0F1dGhvcml6ZSIsImNvbW1hbmRBc3luYyIsIm5zIiwidW5kZWZpbmVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/plain.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js":
/*!*********************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/providers.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AUTH_MECHS_AUTH_SRC_EXTERNAL = exports.AuthMechanism = void 0;\n/** @public */ exports.AuthMechanism = Object.freeze({\n    MONGODB_AWS: \"MONGODB-AWS\",\n    MONGODB_CR: \"MONGODB-CR\",\n    MONGODB_DEFAULT: \"DEFAULT\",\n    MONGODB_GSSAPI: \"GSSAPI\",\n    MONGODB_PLAIN: \"PLAIN\",\n    MONGODB_SCRAM_SHA1: \"SCRAM-SHA-1\",\n    MONGODB_SCRAM_SHA256: \"SCRAM-SHA-256\",\n    MONGODB_X509: \"MONGODB-X509\",\n    /** @experimental */ MONGODB_OIDC: \"MONGODB-OIDC\"\n});\n/** @internal */ exports.AUTH_MECHS_AUTH_SRC_EXTERNAL = new Set([\n    exports.AuthMechanism.MONGODB_GSSAPI,\n    exports.AuthMechanism.MONGODB_AWS,\n    exports.AuthMechanism.MONGODB_OIDC,\n    exports.AuthMechanism.MONGODB_X509\n]); //# sourceMappingURL=providers.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL3Byb3ZpZGVycy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsb0NBQW9DLEdBQUdBLHFCQUFxQixHQUFHLEtBQUs7QUFDcEUsWUFBWSxHQUNaQSxxQkFBcUIsR0FBR0YsT0FBT00sTUFBTSxDQUFDO0lBQ2xDQyxhQUFhO0lBQ2JDLFlBQVk7SUFDWkMsaUJBQWlCO0lBQ2pCQyxnQkFBZ0I7SUFDaEJDLGVBQWU7SUFDZkMsb0JBQW9CO0lBQ3BCQyxzQkFBc0I7SUFDdEJDLGNBQWM7SUFDZCxrQkFBa0IsR0FDbEJDLGNBQWM7QUFDbEI7QUFDQSxjQUFjLEdBQ2RiLG9DQUFvQyxHQUFHLElBQUljLElBQUk7SUFDM0NkLFFBQVFHLGFBQWEsQ0FBQ0ssY0FBYztJQUNwQ1IsUUFBUUcsYUFBYSxDQUFDRSxXQUFXO0lBQ2pDTCxRQUFRRyxhQUFhLENBQUNVLFlBQVk7SUFDbENiLFFBQVFHLGFBQWEsQ0FBQ1MsWUFBWTtDQUNyQyxHQUNELHFDQUFxQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2F1dGgvcHJvdmlkZXJzLmpzPzdlM2EiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkFVVEhfTUVDSFNfQVVUSF9TUkNfRVhURVJOQUwgPSBleHBvcnRzLkF1dGhNZWNoYW5pc20gPSB2b2lkIDA7XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0cy5BdXRoTWVjaGFuaXNtID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgTU9OR09EQl9BV1M6ICdNT05HT0RCLUFXUycsXG4gICAgTU9OR09EQl9DUjogJ01PTkdPREItQ1InLFxuICAgIE1PTkdPREJfREVGQVVMVDogJ0RFRkFVTFQnLFxuICAgIE1PTkdPREJfR1NTQVBJOiAnR1NTQVBJJyxcbiAgICBNT05HT0RCX1BMQUlOOiAnUExBSU4nLFxuICAgIE1PTkdPREJfU0NSQU1fU0hBMTogJ1NDUkFNLVNIQS0xJyxcbiAgICBNT05HT0RCX1NDUkFNX1NIQTI1NjogJ1NDUkFNLVNIQS0yNTYnLFxuICAgIE1PTkdPREJfWDUwOTogJ01PTkdPREItWDUwOScsXG4gICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICBNT05HT0RCX09JREM6ICdNT05HT0RCLU9JREMnXG59KTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuQVVUSF9NRUNIU19BVVRIX1NSQ19FWFRFUk5BTCA9IG5ldyBTZXQoW1xuICAgIGV4cG9ydHMuQXV0aE1lY2hhbmlzbS5NT05HT0RCX0dTU0FQSSxcbiAgICBleHBvcnRzLkF1dGhNZWNoYW5pc20uTU9OR09EQl9BV1MsXG4gICAgZXhwb3J0cy5BdXRoTWVjaGFuaXNtLk1PTkdPREJfT0lEQyxcbiAgICBleHBvcnRzLkF1dGhNZWNoYW5pc20uTU9OR09EQl9YNTA5XG5dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb3ZpZGVycy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJBVVRIX01FQ0hTX0FVVEhfU1JDX0VYVEVSTkFMIiwiQXV0aE1lY2hhbmlzbSIsImZyZWV6ZSIsIk1PTkdPREJfQVdTIiwiTU9OR09EQl9DUiIsIk1PTkdPREJfREVGQVVMVCIsIk1PTkdPREJfR1NTQVBJIiwiTU9OR09EQl9QTEFJTiIsIk1PTkdPREJfU0NSQU1fU0hBMSIsIk1PTkdPREJfU0NSQU1fU0hBMjU2IiwiTU9OR09EQl9YNTA5IiwiTU9OR09EQl9PSURDIiwiU2V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/scram.js":
/*!*****************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/scram.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ScramSHA256 = exports.ScramSHA1 = void 0;\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst bson_1 = __webpack_require__(/*! ../../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst deps_1 = __webpack_require__(/*! ../../deps */ \"(ssr)/./node_modules/mongodb/lib/deps.js\");\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\nconst providers_1 = __webpack_require__(/*! ./providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\nclass ScramSHA extends auth_provider_1.AuthProvider {\n    constructor(cryptoMethod){\n        super();\n        this.cryptoMethod = cryptoMethod || \"sha1\";\n        this.randomBytesAsync = (0, util_1.promisify)(crypto.randomBytes);\n    }\n    async prepare(handshakeDoc, authContext) {\n        const cryptoMethod = this.cryptoMethod;\n        const credentials = authContext.credentials;\n        if (!credentials) {\n            throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n        }\n        if (cryptoMethod === \"sha256\" && (\"kModuleError\" in deps_1.saslprep || typeof deps_1.saslprep !== \"function\")) {\n            (0, utils_1.emitWarning)(\"Warning: no saslprep library specified. Passwords will not be sanitized\");\n        }\n        const nonce = await this.randomBytesAsync(24);\n        // store the nonce for later use\n        authContext.nonce = nonce;\n        const request = {\n            ...handshakeDoc,\n            speculativeAuthenticate: {\n                ...makeFirstMessage(cryptoMethod, credentials, nonce),\n                db: credentials.source\n            }\n        };\n        return request;\n    }\n    async auth(authContext) {\n        const { reauthenticating, response } = authContext;\n        if (response?.speculativeAuthenticate && !reauthenticating) {\n            return continueScramConversation(this.cryptoMethod, response.speculativeAuthenticate, authContext);\n        }\n        return executeScram(this.cryptoMethod, authContext);\n    }\n}\nfunction cleanUsername(username) {\n    return username.replace(\"=\", \"=3D\").replace(\",\", \"=2C\");\n}\nfunction clientFirstMessageBare(username, nonce) {\n    // NOTE: This is done b/c Javascript uses UTF-16, but the server is hashing in UTF-8.\n    // Since the username is not sasl-prep-d, we need to do this here.\n    return Buffer.concat([\n        Buffer.from(\"n=\", \"utf8\"),\n        Buffer.from(username, \"utf8\"),\n        Buffer.from(\",r=\", \"utf8\"),\n        Buffer.from(nonce.toString(\"base64\"), \"utf8\")\n    ]);\n}\nfunction makeFirstMessage(cryptoMethod, credentials, nonce) {\n    const username = cleanUsername(credentials.username);\n    const mechanism = cryptoMethod === \"sha1\" ? providers_1.AuthMechanism.MONGODB_SCRAM_SHA1 : providers_1.AuthMechanism.MONGODB_SCRAM_SHA256;\n    // NOTE: This is done b/c Javascript uses UTF-16, but the server is hashing in UTF-8.\n    // Since the username is not sasl-prep-d, we need to do this here.\n    return {\n        saslStart: 1,\n        mechanism,\n        payload: new bson_1.Binary(Buffer.concat([\n            Buffer.from(\"n,,\", \"utf8\"),\n            clientFirstMessageBare(username, nonce)\n        ])),\n        autoAuthorize: 1,\n        options: {\n            skipEmptyExchange: true\n        }\n    };\n}\nasync function executeScram(cryptoMethod, authContext) {\n    const { connection, credentials } = authContext;\n    if (!credentials) {\n        throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n    }\n    if (!authContext.nonce) {\n        throw new error_1.MongoInvalidArgumentError(\"AuthContext must contain a valid nonce property\");\n    }\n    const nonce = authContext.nonce;\n    const db = credentials.source;\n    const saslStartCmd = makeFirstMessage(cryptoMethod, credentials, nonce);\n    const response = await connection.commandAsync((0, utils_1.ns)(`${db}.$cmd`), saslStartCmd, undefined);\n    await continueScramConversation(cryptoMethod, response, authContext);\n}\nasync function continueScramConversation(cryptoMethod, response, authContext) {\n    const connection = authContext.connection;\n    const credentials = authContext.credentials;\n    if (!credentials) {\n        throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n    }\n    if (!authContext.nonce) {\n        throw new error_1.MongoInvalidArgumentError(\"Unable to continue SCRAM without valid nonce\");\n    }\n    const nonce = authContext.nonce;\n    const db = credentials.source;\n    const username = cleanUsername(credentials.username);\n    const password = credentials.password;\n    let processedPassword;\n    if (cryptoMethod === \"sha256\") {\n        processedPassword = \"kModuleError\" in deps_1.saslprep || typeof deps_1.saslprep !== \"function\" ? password : (0, deps_1.saslprep)(password);\n    } else {\n        processedPassword = passwordDigest(username, password);\n    }\n    const payload = Buffer.isBuffer(response.payload) ? new bson_1.Binary(response.payload) : response.payload;\n    const dict = parsePayload(payload.value());\n    const iterations = parseInt(dict.i, 10);\n    if (iterations && iterations < 4096) {\n        // TODO(NODE-3483)\n        throw new error_1.MongoRuntimeError(`Server returned an invalid iteration count ${iterations}`);\n    }\n    const salt = dict.s;\n    const rnonce = dict.r;\n    if (rnonce.startsWith(\"nonce\")) {\n        // TODO(NODE-3483)\n        throw new error_1.MongoRuntimeError(`Server returned an invalid nonce: ${rnonce}`);\n    }\n    // Set up start of proof\n    const withoutProof = `c=biws,r=${rnonce}`;\n    const saltedPassword = HI(processedPassword, Buffer.from(salt, \"base64\"), iterations, cryptoMethod);\n    const clientKey = HMAC(cryptoMethod, saltedPassword, \"Client Key\");\n    const serverKey = HMAC(cryptoMethod, saltedPassword, \"Server Key\");\n    const storedKey = H(cryptoMethod, clientKey);\n    const authMessage = [\n        clientFirstMessageBare(username, nonce),\n        payload.value(),\n        withoutProof\n    ].join(\",\");\n    const clientSignature = HMAC(cryptoMethod, storedKey, authMessage);\n    const clientProof = `p=${xor(clientKey, clientSignature)}`;\n    const clientFinal = [\n        withoutProof,\n        clientProof\n    ].join(\",\");\n    const serverSignature = HMAC(cryptoMethod, serverKey, authMessage);\n    const saslContinueCmd = {\n        saslContinue: 1,\n        conversationId: response.conversationId,\n        payload: new bson_1.Binary(Buffer.from(clientFinal))\n    };\n    const r = await connection.commandAsync((0, utils_1.ns)(`${db}.$cmd`), saslContinueCmd, undefined);\n    const parsedResponse = parsePayload(r.payload.value());\n    if (!compareDigest(Buffer.from(parsedResponse.v, \"base64\"), serverSignature)) {\n        throw new error_1.MongoRuntimeError(\"Server returned an invalid signature\");\n    }\n    if (r.done !== false) {\n        // If the server sends r.done === true we can save one RTT\n        return;\n    }\n    const retrySaslContinueCmd = {\n        saslContinue: 1,\n        conversationId: r.conversationId,\n        payload: Buffer.alloc(0)\n    };\n    await connection.commandAsync((0, utils_1.ns)(`${db}.$cmd`), retrySaslContinueCmd, undefined);\n}\nfunction parsePayload(payload) {\n    const dict = {};\n    const parts = payload.split(\",\");\n    for(let i = 0; i < parts.length; i++){\n        const valueParts = parts[i].split(\"=\");\n        dict[valueParts[0]] = valueParts[1];\n    }\n    return dict;\n}\nfunction passwordDigest(username, password) {\n    if (typeof username !== \"string\") {\n        throw new error_1.MongoInvalidArgumentError(\"Username must be a string\");\n    }\n    if (typeof password !== \"string\") {\n        throw new error_1.MongoInvalidArgumentError(\"Password must be a string\");\n    }\n    if (password.length === 0) {\n        throw new error_1.MongoInvalidArgumentError(\"Password cannot be empty\");\n    }\n    let md5;\n    try {\n        md5 = crypto.createHash(\"md5\");\n    } catch (err) {\n        if (crypto.getFips()) {\n            // This error is (slightly) more helpful than what comes from OpenSSL directly, e.g.\n            // 'Error: error:060800C8:digital envelope routines:EVP_DigestInit_ex:disabled for FIPS'\n            throw new Error(\"Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode\");\n        }\n        throw err;\n    }\n    md5.update(`${username}:mongo:${password}`, \"utf8\");\n    return md5.digest(\"hex\");\n}\n// XOR two buffers\nfunction xor(a, b) {\n    if (!Buffer.isBuffer(a)) {\n        a = Buffer.from(a);\n    }\n    if (!Buffer.isBuffer(b)) {\n        b = Buffer.from(b);\n    }\n    const length = Math.max(a.length, b.length);\n    const res = [];\n    for(let i = 0; i < length; i += 1){\n        res.push(a[i] ^ b[i]);\n    }\n    return Buffer.from(res).toString(\"base64\");\n}\nfunction H(method, text) {\n    return crypto.createHash(method).update(text).digest();\n}\nfunction HMAC(method, key, text) {\n    return crypto.createHmac(method, key).update(text).digest();\n}\nlet _hiCache = {};\nlet _hiCacheCount = 0;\nfunction _hiCachePurge() {\n    _hiCache = {};\n    _hiCacheCount = 0;\n}\nconst hiLengthMap = {\n    sha256: 32,\n    sha1: 20\n};\nfunction HI(data, salt, iterations, cryptoMethod) {\n    // omit the work if already generated\n    const key = [\n        data,\n        salt.toString(\"base64\"),\n        iterations\n    ].join(\"_\");\n    if (_hiCache[key] != null) {\n        return _hiCache[key];\n    }\n    // generate the salt\n    const saltedData = crypto.pbkdf2Sync(data, salt, iterations, hiLengthMap[cryptoMethod], cryptoMethod);\n    // cache a copy to speed up the next lookup, but prevent unbounded cache growth\n    if (_hiCacheCount >= 200) {\n        _hiCachePurge();\n    }\n    _hiCache[key] = saltedData;\n    _hiCacheCount += 1;\n    return saltedData;\n}\nfunction compareDigest(lhs, rhs) {\n    if (lhs.length !== rhs.length) {\n        return false;\n    }\n    if (typeof crypto.timingSafeEqual === \"function\") {\n        return crypto.timingSafeEqual(lhs, rhs);\n    }\n    let result = 0;\n    for(let i = 0; i < lhs.length; i++){\n        result |= lhs[i] ^ rhs[i];\n    }\n    return result === 0;\n}\nclass ScramSHA1 extends ScramSHA {\n    constructor(){\n        super(\"sha1\");\n    }\n}\nexports.ScramSHA1 = ScramSHA1;\nclass ScramSHA256 extends ScramSHA {\n    constructor(){\n        super(\"sha256\");\n    }\n}\nexports.ScramSHA256 = ScramSHA256; //# sourceMappingURL=scram.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL3NjcmFtLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxtQkFBbUIsR0FBR0EsaUJBQWlCLEdBQUcsS0FBSztBQUMvQyxNQUFNSSxTQUFTQyxtQkFBT0EsQ0FBQyxzQkFBUTtBQUMvQixNQUFNQyxTQUFTRCxtQkFBT0EsQ0FBQyxrQkFBTTtBQUM3QixNQUFNRSxTQUFTRixtQkFBT0EsQ0FBQyw0REFBWTtBQUNuQyxNQUFNRyxTQUFTSCxtQkFBT0EsQ0FBQyw0REFBWTtBQUNuQyxNQUFNSSxVQUFVSixtQkFBT0EsQ0FBQyw4REFBYTtBQUNyQyxNQUFNSyxVQUFVTCxtQkFBT0EsQ0FBQyw4REFBYTtBQUNyQyxNQUFNTSxrQkFBa0JOLG1CQUFPQSxDQUFDLG9GQUFpQjtBQUNqRCxNQUFNTyxjQUFjUCxtQkFBT0EsQ0FBQyw0RUFBYTtBQUN6QyxNQUFNUSxpQkFBaUJGLGdCQUFnQkcsWUFBWTtJQUMvQ0MsWUFBWUMsWUFBWSxDQUFFO1FBQ3RCLEtBQUs7UUFDTCxJQUFJLENBQUNBLFlBQVksR0FBR0EsZ0JBQWdCO1FBQ3BDLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUcsQ0FBQyxHQUFHWCxPQUFPWSxTQUFTLEVBQUVkLE9BQU9lLFdBQVc7SUFDcEU7SUFDQSxNQUFNQyxRQUFRQyxZQUFZLEVBQUVDLFdBQVcsRUFBRTtRQUNyQyxNQUFNTixlQUFlLElBQUksQ0FBQ0EsWUFBWTtRQUN0QyxNQUFNTyxjQUFjRCxZQUFZQyxXQUFXO1FBQzNDLElBQUksQ0FBQ0EsYUFBYTtZQUNkLE1BQU0sSUFBSWQsUUFBUWUsNEJBQTRCLENBQUM7UUFDbkQ7UUFDQSxJQUFJUixpQkFBaUIsWUFDaEIsbUJBQWtCUixPQUFPaUIsUUFBUSxJQUFJLE9BQU9qQixPQUFPaUIsUUFBUSxLQUFLLFVBQVMsR0FBSTtZQUM3RSxJQUFHZixRQUFRZ0IsV0FB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SUFDdEJFLGFBQWM7UUFDVixLQUFLLENBQUM7SUFDVjtBQUNKO0FBQ0FmLG1CQUFtQixHQUFHRSxhQUN0QixpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL3NjcmFtLmpzP2EyOTkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNjcmFtU0hBMjU2ID0gZXhwb3J0cy5TY3JhbVNIQTEgPSB2b2lkIDA7XG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKFwiY3J5cHRvXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcInV0aWxcIik7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi4vLi4vYnNvblwiKTtcbmNvbnN0IGRlcHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9kZXBzXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi8uLi9lcnJvclwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHNcIik7XG5jb25zdCBhdXRoX3Byb3ZpZGVyXzEgPSByZXF1aXJlKFwiLi9hdXRoX3Byb3ZpZGVyXCIpO1xuY29uc3QgcHJvdmlkZXJzXzEgPSByZXF1aXJlKFwiLi9wcm92aWRlcnNcIik7XG5jbGFzcyBTY3JhbVNIQSBleHRlbmRzIGF1dGhfcHJvdmlkZXJfMS5BdXRoUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGNyeXB0b01ldGhvZCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNyeXB0b01ldGhvZCA9IGNyeXB0b01ldGhvZCB8fCAnc2hhMSc7XG4gICAgICAgIHRoaXMucmFuZG9tQnl0ZXNBc3luYyA9ICgwLCB1dGlsXzEucHJvbWlzaWZ5KShjcnlwdG8ucmFuZG9tQnl0ZXMpO1xuICAgIH1cbiAgICBhc3luYyBwcmVwYXJlKGhhbmRzaGFrZURvYywgYXV0aENvbnRleHQpIHtcbiAgICAgICAgY29uc3QgY3J5cHRvTWV0aG9kID0gdGhpcy5jcnlwdG9NZXRob2Q7XG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gYXV0aENvbnRleHQuY3JlZGVudGlhbHM7XG4gICAgICAgIGlmICghY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IoJ0F1dGhDb250ZXh0IG11c3QgcHJvdmlkZSBjcmVkZW50aWFscy4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3J5cHRvTWV0aG9kID09PSAnc2hhMjU2JyAmJlxuICAgICAgICAgICAgKCdrTW9kdWxlRXJyb3InIGluIGRlcHNfMS5zYXNscHJlcCB8fCB0eXBlb2YgZGVwc18xLnNhc2xwcmVwICE9PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgICAgKDAsIHV0aWxzXzEuZW1pdFdhcm5pbmcpKCdXYXJuaW5nOiBubyBzYXNscHJlcCBsaWJyYXJ5IHNwZWNpZmllZC4gUGFzc3dvcmRzIHdpbGwgbm90IGJlIHNhbml0aXplZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5vbmNlID0gYXdhaXQgdGhpcy5yYW5kb21CeXRlc0FzeW5jKDI0KTtcbiAgICAgICAgLy8gc3RvcmUgdGhlIG5vbmNlIGZvciBsYXRlciB1c2VcbiAgICAgICAgYXV0aENvbnRleHQubm9uY2UgPSBub25jZTtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAgICAgIC4uLmhhbmRzaGFrZURvYyxcbiAgICAgICAgICAgIHNwZWN1bGF0aXZlQXV0aGVudGljYXRlOiB7XG4gICAgICAgICAgICAgICAgLi4ubWFrZUZpcnN0TWVzc2FnZShjcnlwdG9NZXRob2QsIGNyZWRlbnRpYWxzLCBub25jZSksXG4gICAgICAgICAgICAgICAgZGI6IGNyZWRlbnRpYWxzLnNvdXJjZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcmVxdWVzdDtcbiAgICB9XG4gICAgYXN5bmMgYXV0aChhdXRoQ29udGV4dCkge1xuICAgICAgICBjb25zdCB7IHJlYXV0aGVudGljYXRpbmcsIHJlc3BvbnNlIH0gPSBhdXRoQ29udGV4dDtcbiAgICAgICAgaWYgKHJlc3BvbnNlPy5zcGVjdWxhdGl2ZUF1dGhlbnRpY2F0ZSAmJiAhcmVhdXRoZW50aWNhdGluZykge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRpbnVlU2NyYW1Db252ZXJzYXRpb24odGhpcy5jcnlwdG9NZXRob2QsIHJlc3BvbnNlLnNwZWN1bGF0aXZlQXV0aGVudGljYXRlLCBhdXRoQ29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4ZWN1dGVTY3JhbSh0aGlzLmNyeXB0b01ldGhvZCwgYXV0aENvbnRleHQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNsZWFuVXNlcm5hbWUodXNlcm5hbWUpIHtcbiAgICByZXR1cm4gdXNlcm5hbWUucmVwbGFjZSgnPScsICc9M0QnKS5yZXBsYWNlKCcsJywgJz0yQycpO1xufVxuZnVuY3Rpb24gY2xpZW50Rmlyc3RNZXNzYWdlQmFyZSh1c2VybmFtZSwgbm9uY2UpIHtcbiAgICAvLyBOT1RFOiBUaGlzIGlzIGRvbmUgYi9jIEphdmFzY3JpcHQgdXNlcyBVVEYtMTYsIGJ1dCB0aGUgc2VydmVyIGlzIGhhc2hpbmcgaW4gVVRGLTguXG4gICAgLy8gU2luY2UgdGhlIHVzZXJuYW1lIGlzIG5vdCBzYXNsLXByZXAtZCwgd2UgbmVlZCB0byBkbyB0aGlzIGhlcmUuXG4gICAgcmV0dXJuIEJ1ZmZlci5jb25jYXQoW1xuICAgICAgICBCdWZmZXIuZnJvbSgnbj0nLCAndXRmOCcpLFxuICAgICAgICBCdWZmZXIuZnJvbSh1c2VybmFtZSwgJ3V0ZjgnKSxcbiAgICAgICAgQnVmZmVyLmZyb20oJyxyPScsICd1dGY4JyksXG4gICAgICAgIEJ1ZmZlci5mcm9tKG5vbmNlLnRvU3RyaW5nKCdiYXNlNjQnKSwgJ3V0ZjgnKVxuICAgIF0pO1xufVxuZnVuY3Rpb24gbWFrZUZpcnN0TWVzc2FnZShjcnlwdG9NZXRob2QsIGNyZWRlbnRpYWxzLCBub25jZSkge1xuICAgIGNvbnN0IHVzZXJuYW1lID0gY2xlYW5Vc2VybmFtZShjcmVkZW50aWFscy51c2VybmFtZSk7XG4gICAgY29uc3QgbWVjaGFuaXNtID0gY3J5cHRvTWV0aG9kID09PSAnc2hhMScgPyBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfU0NSQU1fU0hBMSA6IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9TQ1JBTV9TSEEyNTY7XG4gICAgLy8gTk9URTogVGhpcyBpcyBkb25lIGIvYyBKYXZhc2NyaXB0IHVzZXMgVVRGLTE2LCBidXQgdGhlIHNlcnZlciBpcyBoYXNoaW5nIGluIFVURi04LlxuICAgIC8vIFNpbmNlIHRoZSB1c2VybmFtZSBpcyBub3Qgc2FzbC1wcmVwLWQsIHdlIG5lZWQgdG8gZG8gdGhpcyBoZXJlLlxuICAgIHJldHVybiB7XG4gICAgICAgIHNhc2xTdGFydDogMSxcbiAgICAgICAgbWVjaGFuaXNtLFxuICAgICAgICBwYXlsb2FkOiBuZXcgYnNvbl8xLkJpbmFyeShCdWZmZXIuY29uY2F0KFtCdWZmZXIuZnJvbSgnbiwsJywgJ3V0ZjgnKSwgY2xpZW50Rmlyc3RNZXNzYWdlQmFyZSh1c2VybmFtZSwgbm9uY2UpXSkpLFxuICAgICAgICBhdXRvQXV0aG9yaXplOiAxLFxuICAgICAgICBvcHRpb25zOiB7IHNraXBFbXB0eUV4Y2hhbmdlOiB0cnVlIH1cbiAgICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVNjcmFtKGNyeXB0b01ldGhvZCwgYXV0aENvbnRleHQpIHtcbiAgICBjb25zdCB7IGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzIH0gPSBhdXRoQ29udGV4dDtcbiAgICBpZiAoIWNyZWRlbnRpYWxzKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IoJ0F1dGhDb250ZXh0IG11c3QgcHJvdmlkZSBjcmVkZW50aWFscy4nKTtcbiAgICB9XG4gICAgaWYgKCFhdXRoQ29udGV4dC5ub25jZSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdBdXRoQ29udGV4dCBtdXN0IGNvbnRhaW4gYSB2YWxpZCBub25jZSBwcm9wZXJ0eScpO1xuICAgIH1cbiAgICBjb25zdCBub25jZSA9IGF1dGhDb250ZXh0Lm5vbmNlO1xuICAgIGNvbnN0IGRiID0gY3JlZGVudGlhbHMuc291cmNlO1xuICAgIGNvbnN0IHNhc2xTdGFydENtZCA9IG1ha2VGaXJzdE1lc3NhZ2UoY3J5cHRvTWV0aG9kLCBjcmVkZW50aWFscywgbm9uY2UpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY29ubmVjdGlvbi5jb21tYW5kQXN5bmMoKDAsIHV0aWxzXzEubnMpKGAke2RifS4kY21kYCksIHNhc2xTdGFydENtZCwgdW5kZWZpbmVkKTtcbiAgICBhd2FpdCBjb250aW51ZVNjcmFtQ29udmVyc2F0aW9uKGNyeXB0b01ldGhvZCwgcmVzcG9uc2UsIGF1dGhDb250ZXh0KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNvbnRpbnVlU2NyYW1Db252ZXJzYXRpb24oY3J5cHRvTWV0aG9kLCByZXNwb25zZSwgYXV0aENvbnRleHQpIHtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXV0aENvbnRleHQuY29ubmVjdGlvbjtcbiAgICBjb25zdCBjcmVkZW50aWFscyA9IGF1dGhDb250ZXh0LmNyZWRlbnRpYWxzO1xuICAgIGlmICghY3JlZGVudGlhbHMpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcignQXV0aENvbnRleHQgbXVzdCBwcm92aWRlIGNyZWRlbnRpYWxzLicpO1xuICAgIH1cbiAgICBpZiAoIWF1dGhDb250ZXh0Lm5vbmNlKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1VuYWJsZSB0byBjb250aW51ZSBTQ1JBTSB3aXRob3V0IHZhbGlkIG5vbmNlJyk7XG4gICAgfVxuICAgIGNvbnN0IG5vbmNlID0gYXV0aENvbnRleHQubm9uY2U7XG4gICAgY29uc3QgZGIgPSBjcmVkZW50aWFscy5zb3VyY2U7XG4gICAgY29uc3QgdXNlcm5hbWUgPSBjbGVhblVzZXJuYW1lKGNyZWRlbnRpYWxzLnVzZXJuYW1lKTtcbiAgICBjb25zdCBwYXNzd29yZCA9IGNyZWRlbnRpYWxzLnBhc3N3b3JkO1xuICAgIGxldCBwcm9jZXNzZWRQYXNzd29yZDtcbiAgICBpZiAoY3J5cHRvTWV0aG9kID09PSAnc2hhMjU2Jykge1xuICAgICAgICBwcm9jZXNzZWRQYXNzd29yZCA9XG4gICAgICAgICAgICAna01vZHVsZUVycm9yJyBpbiBkZXBzXzEuc2FzbHByZXAgfHwgdHlwZW9mIGRlcHNfMS5zYXNscHJlcCAhPT0gJ2Z1bmN0aW9uJyA/IHBhc3N3b3JkIDogKDAsIGRlcHNfMS5zYXNscHJlcCkocGFzc3dvcmQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcHJvY2Vzc2VkUGFzc3dvcmQgPSBwYXNzd29yZERpZ2VzdCh1c2VybmFtZSwgcGFzc3dvcmQpO1xuICAgIH1cbiAgICBjb25zdCBwYXlsb2FkID0gQnVmZmVyLmlzQnVmZmVyKHJlc3BvbnNlLnBheWxvYWQpXG4gICAgICAgID8gbmV3IGJzb25fMS5CaW5hcnkocmVzcG9uc2UucGF5bG9hZClcbiAgICAgICAgOiByZXNwb25zZS5wYXlsb2FkO1xuICAgIGNvbnN0IGRpY3QgPSBwYXJzZVBheWxvYWQocGF5bG9hZC52YWx1ZSgpKTtcbiAgICBjb25zdCBpdGVyYXRpb25zID0gcGFyc2VJbnQoZGljdC5pLCAxMCk7XG4gICAgaWYgKGl0ZXJhdGlvbnMgJiYgaXRlcmF0aW9ucyA8IDQwOTYpIHtcbiAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODMpXG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBTZXJ2ZXIgcmV0dXJuZWQgYW4gaW52YWxpZCBpdGVyYXRpb24gY291bnQgJHtpdGVyYXRpb25zfWApO1xuICAgIH1cbiAgICBjb25zdCBzYWx0ID0gZGljdC5zO1xuICAgIGNvbnN0IHJub25jZSA9IGRpY3QucjtcbiAgICBpZiAocm5vbmNlLnN0YXJ0c1dpdGgoJ25vbmNlJykpIHtcbiAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODMpXG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBTZXJ2ZXIgcmV0dXJuZWQgYW4gaW52YWxpZCBub25jZTogJHtybm9uY2V9YCk7XG4gICAgfVxuICAgIC8vIFNldCB1cCBzdGFydCBvZiBwcm9vZlxuICAgIGNvbnN0IHdpdGhvdXRQcm9vZiA9IGBjPWJpd3Mscj0ke3Jub25jZX1gO1xuICAgIGNvbnN0IHNhbHRlZFBhc3N3b3JkID0gSEkocHJvY2Vzc2VkUGFzc3dvcmQsIEJ1ZmZlci5mcm9tKHNhbHQsICdiYXNlNjQnKSwgaXRlcmF0aW9ucywgY3J5cHRvTWV0aG9kKTtcbiAgICBjb25zdCBjbGllbnRLZXkgPSBITUFDKGNyeXB0b01ldGhvZCwgc2FsdGVkUGFzc3dvcmQsICdDbGllbnQgS2V5Jyk7XG4gICAgY29uc3Qgc2VydmVyS2V5ID0gSE1BQyhjcnlwdG9NZXRob2QsIHNhbHRlZFBhc3N3b3JkLCAnU2VydmVyIEtleScpO1xuICAgIGNvbnN0IHN0b3JlZEtleSA9IEgoY3J5cHRvTWV0aG9kLCBjbGllbnRLZXkpO1xuICAgIGNvbnN0IGF1dGhNZXNzYWdlID0gW2NsaWVudEZpcnN0TWVzc2FnZUJhcmUodXNlcm5hbWUsIG5vbmNlKSwgcGF5bG9hZC52YWx1ZSgpLCB3aXRob3V0UHJvb2ZdLmpvaW4oJywnKTtcbiAgICBjb25zdCBjbGllbnRTaWduYXR1cmUgPSBITUFDKGNyeXB0b01ldGhvZCwgc3RvcmVkS2V5LCBhdXRoTWVzc2FnZSk7XG4gICAgY29uc3QgY2xpZW50UHJvb2YgPSBgcD0ke3hvcihjbGllbnRLZXksIGNsaWVudFNpZ25hdHVyZSl9YDtcbiAgICBjb25zdCBjbGllbnRGaW5hbCA9IFt3aXRob3V0UHJvb2YsIGNsaWVudFByb29mXS5qb2luKCcsJyk7XG4gICAgY29uc3Qgc2VydmVyU2lnbmF0dXJlID0gSE1BQyhjcnlwdG9NZXRob2QsIHNlcnZlcktleSwgYXV0aE1lc3NhZ2UpO1xuICAgIGNvbnN0IHNhc2xDb250aW51ZUNtZCA9IHtcbiAgICAgICAgc2FzbENvbnRpbnVlOiAxLFxuICAgICAgICBjb252ZXJzYXRpb25JZDogcmVzcG9uc2UuY29udmVyc2F0aW9uSWQsXG4gICAgICAgIHBheWxvYWQ6IG5ldyBic29uXzEuQmluYXJ5KEJ1ZmZlci5mcm9tKGNsaWVudEZpbmFsKSlcbiAgICB9O1xuICAgIGNvbnN0IHIgPSBhd2FpdCBjb25uZWN0aW9uLmNvbW1hbmRBc3luYygoMCwgdXRpbHNfMS5ucykoYCR7ZGJ9LiRjbWRgKSwgc2FzbENvbnRpbnVlQ21kLCB1bmRlZmluZWQpO1xuICAgIGNvbnN0IHBhcnNlZFJlc3BvbnNlID0gcGFyc2VQYXlsb2FkKHIucGF5bG9hZC52YWx1ZSgpKTtcbiAgICBpZiAoIWNvbXBhcmVEaWdlc3QoQnVmZmVyLmZyb20ocGFyc2VkUmVzcG9uc2UudiwgJ2Jhc2U2NCcpLCBzZXJ2ZXJTaWduYXR1cmUpKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdTZXJ2ZXIgcmV0dXJuZWQgYW4gaW52YWxpZCBzaWduYXR1cmUnKTtcbiAgICB9XG4gICAgaWYgKHIuZG9uZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgLy8gSWYgdGhlIHNlcnZlciBzZW5kcyByLmRvbmUgPT09IHRydWUgd2UgY2FuIHNhdmUgb25lIFJUVFxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHJldHJ5U2FzbENvbnRpbnVlQ21kID0ge1xuICAgICAgICBzYXNsQ29udGludWU6IDEsXG4gICAgICAgIGNvbnZlcnNhdGlvbklkOiByLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICBwYXlsb2FkOiBCdWZmZXIuYWxsb2MoMClcbiAgICB9O1xuICAgIGF3YWl0IGNvbm5lY3Rpb24uY29tbWFuZEFzeW5jKCgwLCB1dGlsc18xLm5zKShgJHtkYn0uJGNtZGApLCByZXRyeVNhc2xDb250aW51ZUNtZCwgdW5kZWZpbmVkKTtcbn1cbmZ1bmN0aW9uIHBhcnNlUGF5bG9hZChwYXlsb2FkKSB7XG4gICAgY29uc3QgZGljdCA9IHt9O1xuICAgIGNvbnN0IHBhcnRzID0gcGF5bG9hZC5zcGxpdCgnLCcpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgdmFsdWVQYXJ0cyA9IHBhcnRzW2ldLnNwbGl0KCc9Jyk7XG4gICAgICAgIGRpY3RbdmFsdWVQYXJ0c1swXV0gPSB2YWx1ZVBhcnRzWzFdO1xuICAgIH1cbiAgICByZXR1cm4gZGljdDtcbn1cbmZ1bmN0aW9uIHBhc3N3b3JkRGlnZXN0KHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgIGlmICh0eXBlb2YgdXNlcm5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1VzZXJuYW1lIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYXNzd29yZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignUGFzc3dvcmQgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgIH1cbiAgICBpZiAocGFzc3dvcmQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1Bhc3N3b3JkIGNhbm5vdCBiZSBlbXB0eScpO1xuICAgIH1cbiAgICBsZXQgbWQ1O1xuICAgIHRyeSB7XG4gICAgICAgIG1kNSA9IGNyeXB0by5jcmVhdGVIYXNoKCdtZDUnKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoY3J5cHRvLmdldEZpcHMoKSkge1xuICAgICAgICAgICAgLy8gVGhpcyBlcnJvciBpcyAoc2xpZ2h0bHkpIG1vcmUgaGVscGZ1bCB0aGFuIHdoYXQgY29tZXMgZnJvbSBPcGVuU1NMIGRpcmVjdGx5LCBlLmcuXG4gICAgICAgICAgICAvLyAnRXJyb3I6IGVycm9yOjA2MDgwMEM4OmRpZ2l0YWwgZW52ZWxvcGUgcm91dGluZXM6RVZQX0RpZ2VzdEluaXRfZXg6ZGlzYWJsZWQgZm9yIEZJUFMnXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1dGggbWVjaGFuaXNtIFNDUkFNLVNIQS0xIGlzIG5vdCBzdXBwb3J0ZWQgaW4gRklQUyBtb2RlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgICBtZDUudXBkYXRlKGAke3VzZXJuYW1lfTptb25nbzoke3Bhc3N3b3JkfWAsICd1dGY4Jyk7XG4gICAgcmV0dXJuIG1kNS5kaWdlc3QoJ2hleCcpO1xufVxuLy8gWE9SIHR3byBidWZmZXJzXG5mdW5jdGlvbiB4b3IoYSwgYikge1xuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpKSB7XG4gICAgICAgIGEgPSBCdWZmZXIuZnJvbShhKTtcbiAgICB9XG4gICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHtcbiAgICAgICAgYiA9IEJ1ZmZlci5mcm9tKGIpO1xuICAgIH1cbiAgICBjb25zdCBsZW5ndGggPSBNYXRoLm1heChhLmxlbmd0aCwgYi5sZW5ndGgpO1xuICAgIGNvbnN0IHJlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgcmVzLnB1c2goYVtpXSBeIGJbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gQnVmZmVyLmZyb20ocmVzKS50b1N0cmluZygnYmFzZTY0Jyk7XG59XG5mdW5jdGlvbiBIKG1ldGhvZCwgdGV4dCkge1xuICAgIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaChtZXRob2QpLnVwZGF0ZSh0ZXh0KS5kaWdlc3QoKTtcbn1cbmZ1bmN0aW9uIEhNQUMobWV0aG9kLCBrZXksIHRleHQpIHtcbiAgICByZXR1cm4gY3J5cHRvLmNyZWF0ZUhtYWMobWV0aG9kLCBrZXkpLnVwZGF0ZSh0ZXh0KS5kaWdlc3QoKTtcbn1cbmxldCBfaGlDYWNoZSA9IHt9O1xubGV0IF9oaUNhY2hlQ291bnQgPSAwO1xuZnVuY3Rpb24gX2hpQ2FjaGVQdXJnZSgpIHtcbiAgICBfaGlDYWNoZSA9IHt9O1xuICAgIF9oaUNhY2hlQ291bnQgPSAwO1xufVxuY29uc3QgaGlMZW5ndGhNYXAgPSB7XG4gICAgc2hhMjU2OiAzMixcbiAgICBzaGExOiAyMFxufTtcbmZ1bmN0aW9uIEhJKGRhdGEsIHNhbHQsIGl0ZXJhdGlvbnMsIGNyeXB0b01ldGhvZCkge1xuICAgIC8vIG9taXQgdGhlIHdvcmsgaWYgYWxyZWFkeSBnZW5lcmF0ZWRcbiAgICBjb25zdCBrZXkgPSBbZGF0YSwgc2FsdC50b1N0cmluZygnYmFzZTY0JyksIGl0ZXJhdGlvbnNdLmpvaW4oJ18nKTtcbiAgICBpZiAoX2hpQ2FjaGVba2V5XSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBfaGlDYWNoZVtrZXldO1xuICAgIH1cbiAgICAvLyBnZW5lcmF0ZSB0aGUgc2FsdFxuICAgIGNvbnN0IHNhbHRlZERhdGEgPSBjcnlwdG8ucGJrZGYyU3luYyhkYXRhLCBzYWx0LCBpdGVyYXRpb25zLCBoaUxlbmd0aE1hcFtjcnlwdG9NZXRob2RdLCBjcnlwdG9NZXRob2QpO1xuICAgIC8vIGNhY2hlIGEgY29weSB0byBzcGVlZCB1cCB0aGUgbmV4dCBsb29rdXAsIGJ1dCBwcmV2ZW50IHVuYm91bmRlZCBjYWNoZSBncm93dGhcbiAgICBpZiAoX2hpQ2FjaGVDb3VudCA+PSAyMDApIHtcbiAgICAgICAgX2hpQ2FjaGVQdXJnZSgpO1xuICAgIH1cbiAgICBfaGlDYWNoZVtrZXldID0gc2FsdGVkRGF0YTtcbiAgICBfaGlDYWNoZUNvdW50ICs9IDE7XG4gICAgcmV0dXJuIHNhbHRlZERhdGE7XG59XG5mdW5jdGlvbiBjb21wYXJlRGlnZXN0KGxocywgcmhzKSB7XG4gICAgaWYgKGxocy5sZW5ndGggIT09IHJocy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNyeXB0by50aW1pbmdTYWZlRXF1YWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGNyeXB0by50aW1pbmdTYWZlRXF1YWwobGhzLCByaHMpO1xuICAgIH1cbiAgICBsZXQgcmVzdWx0ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxocy5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXN1bHQgfD0gbGhzW2ldIF4gcmhzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0ID09PSAwO1xufVxuY2xhc3MgU2NyYW1TSEExIGV4dGVuZHMgU2NyYW1TSEEge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignc2hhMScpO1xuICAgIH1cbn1cbmV4cG9ydHMuU2NyYW1TSEExID0gU2NyYW1TSEExO1xuY2xhc3MgU2NyYW1TSEEyNTYgZXh0ZW5kcyBTY3JhbVNIQSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdzaGEyNTYnKTtcbiAgICB9XG59XG5leHBvcnRzLlNjcmFtU0hBMjU2ID0gU2NyYW1TSEEyNTY7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY3JhbS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJTY3JhbVNIQTI1NiIsIlNjcmFtU0hBMSIsImNyeXB0byIsInJlcXVpcmUiLCJ1dGlsXzEiLCJic29uXzEiLCJkZXBzXzEiLCJlcnJvcl8xIiwidXRpbHNfMSIsImF1dGhfcHJvdmlkZXJfMSIsInByb3ZpZGVyc18xIiwiU2NyYW1TSEEiLCJBdXRoUHJvdmlkZXIiLCJjb25zdHJ1Y3RvciIsImNyeXB0b01ldGhvZCIsInJhbmRvbUJ5dGVzQXN5bmMiLCJwcm9taXNpZnkiLCJyYW5kb21CeXRlcyIsInByZXBhcmUiLCJoYW5kc2hha2VEb2MiLCJhdXRoQ29udGV4dCIsImNyZWRlbnRpYWxzIiwiTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvciIsInNhc2xwcmVwIiwiZW1pdFdhcm5pbmciLCJub25jZSIsInJlcXVlc3QiLCJzcGVjdWxhdGl2ZUF1dGhlbnRpY2F0ZSIsIm1ha2VGaXJzdE1lc3NhZ2UiLCJkYiIsInNvdXJjZSIsImF1dGgiLCJyZWF1dGhlbnRpY2F0aW5nIiwicmVzcG9uc2UiLCJjb250aW51ZVNjcmFtQ29udmVyc2F0aW9uIiwiZXhlY3V0ZVNjcmFtIiwiY2xlYW5Vc2VybmFtZSIsInVzZXJuYW1lIiwicmVwbGFjZSIsImNsaWVudEZpcnN0TWVzc2FnZUJhcmUiLCJCdWZmZXIiLCJjb25jYXQiLCJmcm9tIiwidG9TdHJpbmciLCJtZWNoYW5pc20iLCJBdXRoTWVjaGFuaXNtIiwiTU9OR09EQl9TQ1JBTV9TSEExIiwiTU9OR09EQl9TQ1JBTV9TSEEyNTYiLCJzYXNsU3RhcnQiLCJwYXlsb2FkIiwiQmluYXJ5IiwiYXV0b0F1dGhvcml6ZSIsIm9wdGlvbnMiLCJza2lwRW1wdHlFeGNoYW5nZSIsImNvbm5lY3Rpb24iLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwic2FzbFN0YXJ0Q21kIiwiY29tbWFuZEFzeW5jIiwibnMiLCJ1bmRlZmluZWQiLCJwYXNzd29yZCIsInByb2Nlc3NlZFBhc3N3b3JkIiwicGFzc3dvcmREaWdlc3QiLCJpc0J1ZmZlciIsImRpY3QiLCJwYXJzZVBheWxvYWQiLCJpdGVyYXRpb25zIiwicGFyc2VJbnQiLCJpIiwiTW9uZ29SdW50aW1lRXJyb3IiLCJzYWx0IiwicyIsInJub25jZSIsInIiLCJzdGFydHNXaXRoIiwid2l0aG91dFByb29mIiwic2FsdGVkUGFzc3dvcmQiLCJISSIsImNsaWVudEtleSIsIkhNQUMiLCJzZXJ2ZXJLZXkiLCJzdG9yZWRLZXkiLCJIIiwiYXV0aE1lc3NhZ2UiLCJqb2luIiwiY2xpZW50U2lnbmF0dXJlIiwiY2xpZW50UHJvb2YiLCJ4b3IiLCJjbGllbnRGaW5hbCIsInNlcnZlclNpZ25hdHVyZSIsInNhc2xDb250aW51ZUNtZCIsInNhc2xDb250aW51ZSIsImNvbnZlcnNhdGlvbklkIiwicGFyc2VkUmVzcG9uc2UiLCJjb21wYXJlRGlnZXN0IiwidiIsImRvbmUiLCJyZXRyeVNhc2xDb250aW51ZUNtZCIsImFsbG9jIiwicGFydHMiLCJzcGxpdCIsImxlbmd0aCIsInZhbHVlUGFydHMiLCJtZDUiLCJjcmVhdGVIYXNoIiwiZXJyIiwiZ2V0RmlwcyIsIkVycm9yIiwidXBkYXRlIiwiZGlnZXN0IiwiYSIsImIiLCJNYXRoIiwibWF4IiwicmVzIiwicHVzaCIsIm1ldGhvZCIsInRleHQiLCJrZXkiLCJjcmVhdGVIbWFjIiwiX2hpQ2FjaGUiLCJfaGlDYWNoZUNvdW50IiwiX2hpQ2FjaGVQdXJnZSIsImhpTGVuZ3RoTWFwIiwic2hhMjU2Iiwic2hhMSIsImRhdGEiLCJzYWx0ZWREYXRhIiwicGJrZGYyU3luYyIsImxocyIsInJocyIsInRpbWluZ1NhZmVFcXVhbCIsInJlc3VsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/scram.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/x509.js":
/*!****************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/x509.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.X509 = void 0;\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\nclass X509 extends auth_provider_1.AuthProvider {\n    async prepare(handshakeDoc, authContext) {\n        const { credentials } = authContext;\n        if (!credentials) {\n            throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n        }\n        return {\n            ...handshakeDoc,\n            speculativeAuthenticate: x509AuthenticateCommand(credentials)\n        };\n    }\n    async auth(authContext) {\n        const connection = authContext.connection;\n        const credentials = authContext.credentials;\n        if (!credentials) {\n            throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n        }\n        const response = authContext.response;\n        if (response?.speculativeAuthenticate) {\n            return;\n        }\n        await connection.commandAsync((0, utils_1.ns)(\"$external.$cmd\"), x509AuthenticateCommand(credentials), undefined);\n    }\n}\nexports.X509 = X509;\nfunction x509AuthenticateCommand(credentials) {\n    const command = {\n        authenticate: 1,\n        mechanism: \"MONGODB-X509\"\n    };\n    if (credentials.username) {\n        command.user = credentials.username;\n    }\n    return command;\n} //# sourceMappingURL=x509.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL3g1MDkuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELFlBQVksR0FBRyxLQUFLO0FBQ3BCLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDLE1BQU1FLGtCQUFrQkYsbUJBQU9BLENBQUMsb0ZBQWlCO0FBQ2pELE1BQU1GLGFBQWFJLGdCQUFnQkMsWUFBWTtJQUMzQyxNQUFNQyxRQUFRQyxZQUFZLEVBQUVDLFdBQVcsRUFBRTtRQUNyQyxNQUFNLEVBQUVDLFdBQVcsRUFBRSxHQUFHRDtRQUN4QixJQUFJLENBQUNDLGFBQWE7WUFDZCxNQUFNLElBQUlSLFFBQVFTLDRCQUE0QixDQUFDO1FBQ25EO1FBQ0EsT0FBTztZQUFFLEdBQUdILFlBQVk7WUFBRUkseUJBQXlCQyx3QkFBd0JIO1FBQWE7SUFDNUY7SUFDQSxNQUFNSSxLQUFLTCxXQUFXLEVBQUU7UUFDcEIsTUFBTU0sYUFBYU4sWUFBWU0sVUFBVTtRQUN6QyxNQUFNTCxjQUFjRCxZQUFZQyxXQUFXO1FBQzNDLElBQUksQ0FBQ0EsYUFBYTtZQUNkLE1BQU0sSUFBSVIsUUFBUVMsNEJBQTRCLENBQUM7UUFDbkQ7UUFDQSxNQUFNSyxXQUFXUCxZQUFZTyxRQUFRO1FBQ3JDLElBQUlBLFVBQVVKLHlCQUF5QjtZQUNuQztRQUNKO1FBQ0EsTUFBTUcsV0FBV0UsWUFBWSxDQUFDLENBQUMsR0FBR2IsUUFBUWMsRUFBRSxFQUFFLG1CQUFtQkwsd0JBQXdCSCxjQUFjUztJQUMzRztBQUNKO0FBQ0FwQixZQUFZLEdBQUdFO0FBQ2YsU0FBU1ksd0JBQXdCSCxXQUFXO0lBQ3hDLE1BQU1VLFVBQVU7UUFBRUMsY0FBYztRQUFHQyxXQUFXO0lBQWU7SUFDN0QsSUFBSVosWUFBWWEsUUFBUSxFQUFFO1FBQ3RCSCxRQUFRSSxJQUFJLEdBQUdkLFlBQVlhLFFBQVE7SUFDdkM7SUFDQSxPQUFPSDtBQUNYLEVBQ0EsZ0NBQWdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvYXV0aC94NTA5LmpzPzM3YmQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlg1MDkgPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uLy4uL2Vycm9yXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlsc1wiKTtcbmNvbnN0IGF1dGhfcHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuL2F1dGhfcHJvdmlkZXJcIik7XG5jbGFzcyBYNTA5IGV4dGVuZHMgYXV0aF9wcm92aWRlcl8xLkF1dGhQcm92aWRlciB7XG4gICAgYXN5bmMgcHJlcGFyZShoYW5kc2hha2VEb2MsIGF1dGhDb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IHsgY3JlZGVudGlhbHMgfSA9IGF1dGhDb250ZXh0O1xuICAgICAgICBpZiAoIWNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yKCdBdXRoQ29udGV4dCBtdXN0IHByb3ZpZGUgY3JlZGVudGlhbHMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgLi4uaGFuZHNoYWtlRG9jLCBzcGVjdWxhdGl2ZUF1dGhlbnRpY2F0ZTogeDUwOUF1dGhlbnRpY2F0ZUNvbW1hbmQoY3JlZGVudGlhbHMpIH07XG4gICAgfVxuICAgIGFzeW5jIGF1dGgoYXV0aENvbnRleHQpIHtcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF1dGhDb250ZXh0LmNvbm5lY3Rpb247XG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gYXV0aENvbnRleHQuY3JlZGVudGlhbHM7XG4gICAgICAgIGlmICghY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IoJ0F1dGhDb250ZXh0IG11c3QgcHJvdmlkZSBjcmVkZW50aWFscy4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF1dGhDb250ZXh0LnJlc3BvbnNlO1xuICAgICAgICBpZiAocmVzcG9uc2U/LnNwZWN1bGF0aXZlQXV0aGVudGljYXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb21tYW5kQXN5bmMoKDAsIHV0aWxzXzEubnMpKCckZXh0ZXJuYWwuJGNtZCcpLCB4NTA5QXV0aGVudGljYXRlQ29tbWFuZChjcmVkZW50aWFscyksIHVuZGVmaW5lZCk7XG4gICAgfVxufVxuZXhwb3J0cy5YNTA5ID0gWDUwOTtcbmZ1bmN0aW9uIHg1MDlBdXRoZW50aWNhdGVDb21tYW5kKGNyZWRlbnRpYWxzKSB7XG4gICAgY29uc3QgY29tbWFuZCA9IHsgYXV0aGVudGljYXRlOiAxLCBtZWNoYW5pc206ICdNT05HT0RCLVg1MDknIH07XG4gICAgaWYgKGNyZWRlbnRpYWxzLnVzZXJuYW1lKSB7XG4gICAgICAgIGNvbW1hbmQudXNlciA9IGNyZWRlbnRpYWxzLnVzZXJuYW1lO1xuICAgIH1cbiAgICByZXR1cm4gY29tbWFuZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXg1MDkuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiWDUwOSIsImVycm9yXzEiLCJyZXF1aXJlIiwidXRpbHNfMSIsImF1dGhfcHJvdmlkZXJfMSIsIkF1dGhQcm92aWRlciIsInByZXBhcmUiLCJoYW5kc2hha2VEb2MiLCJhdXRoQ29udGV4dCIsImNyZWRlbnRpYWxzIiwiTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvciIsInNwZWN1bGF0aXZlQXV0aGVudGljYXRlIiwieDUwOUF1dGhlbnRpY2F0ZUNvbW1hbmQiLCJhdXRoIiwiY29ubmVjdGlvbiIsInJlc3BvbnNlIiwiY29tbWFuZEFzeW5jIiwibnMiLCJ1bmRlZmluZWQiLCJjb21tYW5kIiwiYXV0aGVudGljYXRlIiwibWVjaGFuaXNtIiwidXNlcm5hbWUiLCJ1c2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/x509.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/command_monitoring_events.js":
/*!********************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/command_monitoring_events.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.SENSITIVE_COMMANDS = exports.CommandFailedEvent = exports.CommandSucceededEvent = exports.CommandStartedEvent = void 0;\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst commands_1 = __webpack_require__(/*! ./commands */ \"(ssr)/./node_modules/mongodb/lib/cmap/commands.js\");\n/**\n * An event indicating the start of a given command\n * @public\n * @category Event\n */ class CommandStartedEvent {\n    /**\n     * Create a started event\n     *\n     * @internal\n     * @param pool - the pool that originated the command\n     * @param command - the command\n     */ constructor(connection, command){\n        /** @internal */ this.name = constants_1.COMMAND_STARTED;\n        const cmd = extractCommand(command);\n        const commandName = extractCommandName(cmd);\n        const { address, connectionId, serviceId } = extractConnectionDetails(connection);\n        // TODO: remove in major revision, this is not spec behavior\n        if (exports.SENSITIVE_COMMANDS.has(commandName)) {\n            this.commandObj = {};\n            this.commandObj[commandName] = true;\n        }\n        this.address = address;\n        this.connectionId = connectionId;\n        this.serviceId = serviceId;\n        this.requestId = command.requestId;\n        this.databaseName = databaseName(command);\n        this.commandName = commandName;\n        this.command = maybeRedact(commandName, cmd, cmd);\n    }\n    /* @internal */ get hasServiceId() {\n        return !!this.serviceId;\n    }\n}\nexports.CommandStartedEvent = CommandStartedEvent;\n/**\n * An event indicating the success of a given command\n * @public\n * @category Event\n */ class CommandSucceededEvent {\n    /**\n     * Create a succeeded event\n     *\n     * @internal\n     * @param pool - the pool that originated the command\n     * @param command - the command\n     * @param reply - the reply for this command from the server\n     * @param started - a high resolution tuple timestamp of when the command was first sent, to calculate duration\n     */ constructor(connection, command, reply, started){\n        /** @internal */ this.name = constants_1.COMMAND_SUCCEEDED;\n        const cmd = extractCommand(command);\n        const commandName = extractCommandName(cmd);\n        const { address, connectionId, serviceId } = extractConnectionDetails(connection);\n        this.address = address;\n        this.connectionId = connectionId;\n        this.serviceId = serviceId;\n        this.requestId = command.requestId;\n        this.commandName = commandName;\n        this.duration = (0, utils_1.calculateDurationInMs)(started);\n        this.reply = maybeRedact(commandName, cmd, extractReply(command, reply));\n    }\n    /* @internal */ get hasServiceId() {\n        return !!this.serviceId;\n    }\n}\nexports.CommandSucceededEvent = CommandSucceededEvent;\n/**\n * An event indicating the failure of a given command\n * @public\n * @category Event\n */ class CommandFailedEvent {\n    /**\n     * Create a failure event\n     *\n     * @internal\n     * @param pool - the pool that originated the command\n     * @param command - the command\n     * @param error - the generated error or a server error response\n     * @param started - a high resolution tuple timestamp of when the command was first sent, to calculate duration\n     */ constructor(connection, command, error, started){\n        /** @internal */ this.name = constants_1.COMMAND_FAILED;\n        const cmd = extractCommand(command);\n        const commandName = extractCommandName(cmd);\n        const { address, connectionId, serviceId } = extractConnectionDetails(connection);\n        this.address = address;\n        this.connectionId = connectionId;\n        this.serviceId = serviceId;\n        this.requestId = command.requestId;\n        this.commandName = commandName;\n        this.duration = (0, utils_1.calculateDurationInMs)(started);\n        this.failure = maybeRedact(commandName, cmd, error);\n    }\n    /* @internal */ get hasServiceId() {\n        return !!this.serviceId;\n    }\n}\nexports.CommandFailedEvent = CommandFailedEvent;\n/**\n * Commands that we want to redact because of the sensitive nature of their contents\n * @internal\n */ exports.SENSITIVE_COMMANDS = new Set([\n    \"authenticate\",\n    \"saslStart\",\n    \"saslContinue\",\n    \"getnonce\",\n    \"createUser\",\n    \"updateUser\",\n    \"copydbgetnonce\",\n    \"copydbsaslstart\",\n    \"copydb\"\n]);\nconst HELLO_COMMANDS = new Set([\n    \"hello\",\n    constants_1.LEGACY_HELLO_COMMAND,\n    constants_1.LEGACY_HELLO_COMMAND_CAMEL_CASE\n]);\n// helper methods\nconst extractCommandName = (commandDoc)=>Object.keys(commandDoc)[0];\nconst namespace = (command)=>command.ns;\nconst databaseName = (command)=>command.ns.split(\".\")[0];\nconst collectionName = (command)=>command.ns.split(\".\")[1];\nconst maybeRedact = (commandName, commandDoc, result)=>exports.SENSITIVE_COMMANDS.has(commandName) || HELLO_COMMANDS.has(commandName) && commandDoc.speculativeAuthenticate ? {} : result;\nconst LEGACY_FIND_QUERY_MAP = {\n    $query: \"filter\",\n    $orderby: \"sort\",\n    $hint: \"hint\",\n    $comment: \"comment\",\n    $maxScan: \"maxScan\",\n    $max: \"max\",\n    $min: \"min\",\n    $returnKey: \"returnKey\",\n    $showDiskLoc: \"showRecordId\",\n    $maxTimeMS: \"maxTimeMS\",\n    $snapshot: \"snapshot\"\n};\nconst LEGACY_FIND_OPTIONS_MAP = {\n    numberToSkip: \"skip\",\n    numberToReturn: \"batchSize\",\n    returnFieldSelector: \"projection\"\n};\nconst OP_QUERY_KEYS = [\n    \"tailable\",\n    \"oplogReplay\",\n    \"noCursorTimeout\",\n    \"awaitData\",\n    \"partial\",\n    \"exhaust\"\n];\n/** Extract the actual command from the query, possibly up-converting if it's a legacy format */ function extractCommand(command) {\n    if (command instanceof commands_1.Msg) {\n        return (0, utils_1.deepCopy)(command.command);\n    }\n    if (command.query?.$query) {\n        let result;\n        if (command.ns === \"admin.$cmd\") {\n            // up-convert legacy command\n            result = Object.assign({}, command.query.$query);\n        } else {\n            // up-convert legacy find command\n            result = {\n                find: collectionName(command)\n            };\n            Object.keys(LEGACY_FIND_QUERY_MAP).forEach((key)=>{\n                if (command.query[key] != null) {\n                    result[LEGACY_FIND_QUERY_MAP[key]] = (0, utils_1.deepCopy)(command.query[key]);\n                }\n            });\n        }\n        Object.keys(LEGACY_FIND_OPTIONS_MAP).forEach((key)=>{\n            const legacyKey = key;\n            if (command[legacyKey] != null) {\n                result[LEGACY_FIND_OPTIONS_MAP[legacyKey]] = (0, utils_1.deepCopy)(command[legacyKey]);\n            }\n        });\n        OP_QUERY_KEYS.forEach((key)=>{\n            if (command[key]) {\n                result[key] = command[key];\n            }\n        });\n        if (command.pre32Limit != null) {\n            result.limit = command.pre32Limit;\n        }\n        if (command.query.$explain) {\n            return {\n                explain: result\n            };\n        }\n        return result;\n    }\n    const clonedQuery = {};\n    const clonedCommand = {};\n    if (command.query) {\n        for(const k in command.query){\n            clonedQuery[k] = (0, utils_1.deepCopy)(command.query[k]);\n        }\n        clonedCommand.query = clonedQuery;\n    }\n    for(const k in command){\n        if (k === \"query\") continue;\n        clonedCommand[k] = (0, utils_1.deepCopy)(command[k]);\n    }\n    return command.query ? clonedQuery : clonedCommand;\n}\nfunction extractReply(command, reply) {\n    if (!reply) {\n        return reply;\n    }\n    if (command instanceof commands_1.Msg) {\n        return (0, utils_1.deepCopy)(reply.result ? reply.result : reply);\n    }\n    // is this a legacy find command?\n    if (command.query && command.query.$query != null) {\n        return {\n            ok: 1,\n            cursor: {\n                id: (0, utils_1.deepCopy)(reply.cursorId),\n                ns: namespace(command),\n                firstBatch: (0, utils_1.deepCopy)(reply.documents)\n            }\n        };\n    }\n    return (0, utils_1.deepCopy)(reply.result ? reply.result : reply);\n}\nfunction extractConnectionDetails(connection) {\n    let connectionId;\n    if (\"id\" in connection) {\n        connectionId = connection.id;\n    }\n    return {\n        address: connection.address,\n        serviceId: connection.serviceId,\n        connectionId\n    };\n} //# sourceMappingURL=command_monitoring_events.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb21tYW5kX21vbml0b3JpbmdfZXZlbnRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwwQkFBMEIsR0FBR0EsMEJBQTBCLEdBQUdBLDZCQUE2QixHQUFHQSwyQkFBMkIsR0FBRyxLQUFLO0FBQzdILE1BQU1NLGNBQWNDLG1CQUFPQSxDQUFDLG1FQUFjO0FBQzFDLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1FLGFBQWFGLG1CQUFPQSxDQUFDLHFFQUFZO0FBQ3ZDOzs7O0NBSUMsR0FDRCxNQUFNRjtJQUNGOzs7Ozs7S0FNQyxHQUNESyxZQUFZQyxVQUFVLEVBQUVDLE9BQU8sQ0FBRTtRQUM3QixjQUFjLEdBQ2QsSUFBSSxDQUFDQyxJQUFJLEdBQUdQLFlBQVlRLGVBQWU7UUFDdkMsTUFBTUMsTUFBTUMsZUFBZUo7UUFDM0IsTUFBTUssY0FBY0MsbUJBQW1CSDtRQUN2QyxNQUFNLEVBQUVJLE9BQU8sRUFBRUMsWUFBWSxFQUFFQyxTQUFTLEVBQUUsR0FBR0MseUJBQXlCWDtRQUN0RSw0REFBNEQ7UUFDNUQsSUFBSVgsUUFBUUUsa0JBQWtCLENBQUNxQixHQUFHLENBQUNOLGNBQWM7WUFDN0MsSUFBSSxDQUFDTyxVQUFVLEdBQUcsQ0FBQztZQUNuQixJQUFJLENBQUNBLFVBQVUsQ0FBQ1AsWUFBWSxHQUFHO1FBQ25DO1FBQ0EsSUFBSSxDQUFDRSxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDQyxZQUFZLEdBQUdBO1FBQ3BCLElBQUksQ0FBQ0MsU0FBUyxHQUFHQTtRQUNqQixJQUFJLENBQUNJLFNBQVMsR0FBR2IsUUFBUWEsU0FBUztRQUNsQyxJQUFJLENBQUNDLFlBQVksR0FBR0EsYUFBYWQ7UUFDakMsSUFBSSxDQUFDSyxXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0wsT0FBTyxHQUFHZSxZ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LEVBQUUsR0FBRyxDQUFDLEdBQUd6RSxRQUFRNEQsUUFBUSxFQUFFeEQsT0FBTyxDQUFDcUUsRUFBRTtJQUN2RDtJQUNBLE9BQU9yRSxRQUFReUQsS0FBSyxHQUFHVSxjQUFjQztBQUN6QztBQUNBLFNBQVM5QyxhQUFhdEIsT0FBTyxFQUFFaUIsS0FBSztJQUNoQyxJQUFJLENBQUNBLE9BQU87UUFDUixPQUFPQTtJQUNYO0lBQ0EsSUFBSWpCLG1CQUFtQkgsV0FBVzBELEdBQUcsRUFBRTtRQUNuQyxPQUFPLENBQUMsR0FBRzNELFFBQVE0RCxRQUFRLEVBQUV2QyxNQUFNbUIsTUFBTSxHQUFHbkIsTUFBTW1CLE1BQU0sR0FBR25CO0lBQy9EO0lBQ0EsaUNBQWlDO0lBQ2pDLElBQUlqQixRQUFReUQsS0FBSyxJQUFJekQsUUFBUXlELEtBQUssQ0FBQ2xCLE1BQU0sSUFBSSxNQUFNO1FBQy9DLE9BQU87WUFDSCtCLElBQUk7WUFDSkMsUUFBUTtnQkFDSkMsSUFBSSxDQUFDLEdBQUc1RSxRQUFRNEQsUUFBUSxFQUFFdkMsTUFBTXdELFFBQVE7Z0JBQ3hDeEMsSUFBSUQsVUFBVWhDO2dCQUNkMEUsWUFBWSxDQUFDLEdBQUc5RSxRQUFRNEQsUUFBUSxFQUFFdkMsTUFBTTBELFNBQVM7WUFDckQ7UUFDSjtJQUNKO0lBQ0EsT0FBTyxDQUFDLEdBQUcvRSxRQUFRNEQsUUFBUSxFQUFFdkMsTUFBTW1CLE1BQU0sR0FBR25CLE1BQU1tQixNQUFNLEdBQUduQjtBQUMvRDtBQUNBLFNBQVNQLHlCQUF5QlgsVUFBVTtJQUN4QyxJQUFJUztJQUNKLElBQUksUUFBUVQsWUFBWTtRQUNwQlMsZUFBZVQsV0FBV3lFLEVBQUU7SUFDaEM7SUFDQSxPQUFPO1FBQ0hqRSxTQUFTUixXQUFXUSxPQUFPO1FBQzNCRSxXQUFXVixXQUFXVSxTQUFTO1FBQy9CRDtJQUNKO0FBQ0osRUFDQSxxREFBcUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb21tYW5kX21vbml0b3JpbmdfZXZlbnRzLmpzPzBkOWQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNFTlNJVElWRV9DT01NQU5EUyA9IGV4cG9ydHMuQ29tbWFuZEZhaWxlZEV2ZW50ID0gZXhwb3J0cy5Db21tYW5kU3VjY2VlZGVkRXZlbnQgPSBleHBvcnRzLkNvbW1hbmRTdGFydGVkRXZlbnQgPSB2b2lkIDA7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgY29tbWFuZHNfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRzXCIpO1xuLyoqXG4gKiBBbiBldmVudCBpbmRpY2F0aW5nIHRoZSBzdGFydCBvZiBhIGdpdmVuIGNvbW1hbmRcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBDb21tYW5kU3RhcnRlZEV2ZW50IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBzdGFydGVkIGV2ZW50XG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcG9vbCAtIHRoZSBwb29sIHRoYXQgb3JpZ2luYXRlZCB0aGUgY29tbWFuZFxuICAgICAqIEBwYXJhbSBjb21tYW5kIC0gdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uLCBjb21tYW5kKSB7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gY29uc3RhbnRzXzEuQ09NTUFORF9TVEFSVEVEO1xuICAgICAgICBjb25zdCBjbWQgPSBleHRyYWN0Q29tbWFuZChjb21tYW5kKTtcbiAgICAgICAgY29uc3QgY29tbWFuZE5hbWUgPSBleHRyYWN0Q29tbWFuZE5hbWUoY21kKTtcbiAgICAgICAgY29uc3QgeyBhZGRyZXNzLCBjb25uZWN0aW9uSWQsIHNlcnZpY2VJZCB9ID0gZXh0cmFjdENvbm5lY3Rpb25EZXRhaWxzKGNvbm5lY3Rpb24pO1xuICAgICAgICAvLyBUT0RPOiByZW1vdmUgaW4gbWFqb3IgcmV2aXNpb24sIHRoaXMgaXMgbm90IHNwZWMgYmVoYXZpb3JcbiAgICAgICAgaWYgKGV4cG9ydHMuU0VOU0lUSVZFX0NPTU1BTkRTLmhhcyhjb21tYW5kTmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZE9iaiA9IHt9O1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kT2JqW2NvbW1hbmROYW1lXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcztcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uSWQgPSBjb25uZWN0aW9uSWQ7XG4gICAgICAgIHRoaXMuc2VydmljZUlkID0gc2VydmljZUlkO1xuICAgICAgICB0aGlzLnJlcXVlc3RJZCA9IGNvbW1hbmQucmVxdWVzdElkO1xuICAgICAgICB0aGlzLmRhdGFiYXNlTmFtZSA9IGRhdGFiYXNlTmFtZShjb21tYW5kKTtcbiAgICAgICAgdGhpcy5jb21tYW5kTmFtZSA9IGNvbW1hbmROYW1lO1xuICAgICAgICB0aGlzLmNvbW1hbmQgPSBtYXliZVJlZGFjdChjb21tYW5kTmFtZSwgY21kLCBjbWQpO1xuICAgIH1cbiAgICAvKiBAaW50ZXJuYWwgKi9cbiAgICBnZXQgaGFzU2VydmljZUlkKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLnNlcnZpY2VJZDtcbiAgICB9XG59XG5leHBvcnRzLkNvbW1hbmRTdGFydGVkRXZlbnQgPSBDb21tYW5kU3RhcnRlZEV2ZW50O1xuLyoqXG4gKiBBbiBldmVudCBpbmRpY2F0aW5nIHRoZSBzdWNjZXNzIG9mIGEgZ2l2ZW4gY29tbWFuZFxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIENvbW1hbmRTdWNjZWVkZWRFdmVudCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgc3VjY2VlZGVkIGV2ZW50XG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcG9vbCAtIHRoZSBwb29sIHRoYXQgb3JpZ2luYXRlZCB0aGUgY29tbWFuZFxuICAgICAqIEBwYXJhbSBjb21tYW5kIC0gdGhlIGNvbW1hbmRcbiAgICAgKiBAcGFyYW0gcmVwbHkgLSB0aGUgcmVwbHkgZm9yIHRoaXMgY29tbWFuZCBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgKiBAcGFyYW0gc3RhcnRlZCAtIGEgaGlnaCByZXNvbHV0aW9uIHR1cGxlIHRpbWVzdGFtcCBvZiB3aGVuIHRoZSBjb21tYW5kIHdhcyBmaXJzdCBzZW50LCB0byBjYWxjdWxhdGUgZHVyYXRpb25cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uLCBjb21tYW5kLCByZXBseSwgc3RhcnRlZCkge1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubmFtZSA9IGNvbnN0YW50c18xLkNPTU1BTkRfU1VDQ0VFREVEO1xuICAgICAgICBjb25zdCBjbWQgPSBleHRyYWN0Q29tbWFuZChjb21tYW5kKTtcbiAgICAgICAgY29uc3QgY29tbWFuZE5hbWUgPSBleHRyYWN0Q29tbWFuZE5hbWUoY21kKTtcbiAgICAgICAgY29uc3QgeyBhZGRyZXNzLCBjb25uZWN0aW9uSWQsIHNlcnZpY2VJZCB9ID0gZXh0cmFjdENvbm5lY3Rpb25EZXRhaWxzKGNvbm5lY3Rpb24pO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25JZCA9IGNvbm5lY3Rpb25JZDtcbiAgICAgICAgdGhpcy5zZXJ2aWNlSWQgPSBzZXJ2aWNlSWQ7XG4gICAgICAgIHRoaXMucmVxdWVzdElkID0gY29tbWFuZC5yZXF1ZXN0SWQ7XG4gICAgICAgIHRoaXMuY29tbWFuZE5hbWUgPSBjb21tYW5kTmFtZTtcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9ICgwLCB1dGlsc18xLmNhbGN1bGF0ZUR1cmF0aW9uSW5Ncykoc3RhcnRlZCk7XG4gICAgICAgIHRoaXMucmVwbHkgPSBtYXliZVJlZGFjdChjb21tYW5kTmFtZSwgY21kLCBleHRyYWN0UmVwbHkoY29tbWFuZCwgcmVwbHkpKTtcbiAgICB9XG4gICAgLyogQGludGVybmFsICovXG4gICAgZ2V0IGhhc1NlcnZpY2VJZCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5zZXJ2aWNlSWQ7XG4gICAgfVxufVxuZXhwb3J0cy5Db21tYW5kU3VjY2VlZGVkRXZlbnQgPSBDb21tYW5kU3VjY2VlZGVkRXZlbnQ7XG4vKipcbiAqIEFuIGV2ZW50IGluZGljYXRpbmcgdGhlIGZhaWx1cmUgb2YgYSBnaXZlbiBjb21tYW5kXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXZlbnRcbiAqL1xuY2xhc3MgQ29tbWFuZEZhaWxlZEV2ZW50IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBmYWlsdXJlIGV2ZW50XG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcG9vbCAtIHRoZSBwb29sIHRoYXQgb3JpZ2luYXRlZCB0aGUgY29tbWFuZFxuICAgICAqIEBwYXJhbSBjb21tYW5kIC0gdGhlIGNvbW1hbmRcbiAgICAgKiBAcGFyYW0gZXJyb3IgLSB0aGUgZ2VuZXJhdGVkIGVycm9yIG9yIGEgc2VydmVyIGVycm9yIHJlc3BvbnNlXG4gICAgICogQHBhcmFtIHN0YXJ0ZWQgLSBhIGhpZ2ggcmVzb2x1dGlvbiB0dXBsZSB0aW1lc3RhbXAgb2Ygd2hlbiB0aGUgY29tbWFuZCB3YXMgZmlyc3Qgc2VudCwgdG8gY2FsY3VsYXRlIGR1cmF0aW9uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbiwgY29tbWFuZCwgZXJyb3IsIHN0YXJ0ZWQpIHtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdGFudHNfMS5DT01NQU5EX0ZBSUxFRDtcbiAgICAgICAgY29uc3QgY21kID0gZXh0cmFjdENvbW1hbmQoY29tbWFuZCk7XG4gICAgICAgIGNvbnN0IGNvbW1hbmROYW1lID0gZXh0cmFjdENvbW1hbmROYW1lKGNtZCk7XG4gICAgICAgIGNvbnN0IHsgYWRkcmVzcywgY29ubmVjdGlvbklkLCBzZXJ2aWNlSWQgfSA9IGV4dHJhY3RDb25uZWN0aW9uRGV0YWlscyhjb25uZWN0aW9uKTtcbiAgICAgICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcztcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uSWQgPSBjb25uZWN0aW9uSWQ7XG4gICAgICAgIHRoaXMuc2VydmljZUlkID0gc2VydmljZUlkO1xuICAgICAgICB0aGlzLnJlcXVlc3RJZCA9IGNvbW1hbmQucmVxdWVzdElkO1xuICAgICAgICB0aGlzLmNvbW1hbmROYW1lID0gY29tbWFuZE5hbWU7XG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSAoMCwgdXRpbHNfMS5jYWxjdWxhdGVEdXJhdGlvbkluTXMpKHN0YXJ0ZWQpO1xuICAgICAgICB0aGlzLmZhaWx1cmUgPSBtYXliZVJlZGFjdChjb21tYW5kTmFtZSwgY21kLCBlcnJvcik7XG4gICAgfVxuICAgIC8qIEBpbnRlcm5hbCAqL1xuICAgIGdldCBoYXNTZXJ2aWNlSWQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuc2VydmljZUlkO1xuICAgIH1cbn1cbmV4cG9ydHMuQ29tbWFuZEZhaWxlZEV2ZW50ID0gQ29tbWFuZEZhaWxlZEV2ZW50O1xuLyoqXG4gKiBDb21tYW5kcyB0aGF0IHdlIHdhbnQgdG8gcmVkYWN0IGJlY2F1c2Ugb2YgdGhlIHNlbnNpdGl2ZSBuYXR1cmUgb2YgdGhlaXIgY29udGVudHNcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnRzLlNFTlNJVElWRV9DT01NQU5EUyA9IG5ldyBTZXQoW1xuICAgICdhdXRoZW50aWNhdGUnLFxuICAgICdzYXNsU3RhcnQnLFxuICAgICdzYXNsQ29udGludWUnLFxuICAgICdnZXRub25jZScsXG4gICAgJ2NyZWF0ZVVzZXInLFxuICAgICd1cGRhdGVVc2VyJyxcbiAgICAnY29weWRiZ2V0bm9uY2UnLFxuICAgICdjb3B5ZGJzYXNsc3RhcnQnLFxuICAgICdjb3B5ZGInXG5dKTtcbmNvbnN0IEhFTExPX0NPTU1BTkRTID0gbmV3IFNldChbJ2hlbGxvJywgY29uc3RhbnRzXzEuTEVHQUNZX0hFTExPX0NPTU1BTkQsIGNvbnN0YW50c18xLkxFR0FDWV9IRUxMT19DT01NQU5EX0NBTUVMX0NBU0VdKTtcbi8vIGhlbHBlciBtZXRob2RzXG5jb25zdCBleHRyYWN0Q29tbWFuZE5hbWUgPSAoY29tbWFuZERvYykgPT4gT2JqZWN0LmtleXMoY29tbWFuZERvYylbMF07XG5jb25zdCBuYW1lc3BhY2UgPSAoY29tbWFuZCkgPT4gY29tbWFuZC5ucztcbmNvbnN0IGRhdGFiYXNlTmFtZSA9IChjb21tYW5kKSA9PiBjb21tYW5kLm5zLnNwbGl0KCcuJylbMF07XG5jb25zdCBjb2xsZWN0aW9uTmFtZSA9IChjb21tYW5kKSA9PiBjb21tYW5kLm5zLnNwbGl0KCcuJylbMV07XG5jb25zdCBtYXliZVJlZGFjdCA9IChjb21tYW5kTmFtZSwgY29tbWFuZERvYywgcmVzdWx0KSA9PiBleHBvcnRzLlNFTlNJVElWRV9DT01NQU5EUy5oYXMoY29tbWFuZE5hbWUpIHx8XG4gICAgKEhFTExPX0NPTU1BTkRTLmhhcyhjb21tYW5kTmFtZSkgJiYgY29tbWFuZERvYy5zcGVjdWxhdGl2ZUF1dGhlbnRpY2F0ZSlcbiAgICA/IHt9XG4gICAgOiByZXN1bHQ7XG5jb25zdCBMRUdBQ1lfRklORF9RVUVSWV9NQVAgPSB7XG4gICAgJHF1ZXJ5OiAnZmlsdGVyJyxcbiAgICAkb3JkZXJieTogJ3NvcnQnLFxuICAgICRoaW50OiAnaGludCcsXG4gICAgJGNvbW1lbnQ6ICdjb21tZW50JyxcbiAgICAkbWF4U2NhbjogJ21heFNjYW4nLFxuICAgICRtYXg6ICdtYXgnLFxuICAgICRtaW46ICdtaW4nLFxuICAgICRyZXR1cm5LZXk6ICdyZXR1cm5LZXknLFxuICAgICRzaG93RGlza0xvYzogJ3Nob3dSZWNvcmRJZCcsXG4gICAgJG1heFRpbWVNUzogJ21heFRpbWVNUycsXG4gICAgJHNuYXBzaG90OiAnc25hcHNob3QnXG59O1xuY29uc3QgTEVHQUNZX0ZJTkRfT1BUSU9OU19NQVAgPSB7XG4gICAgbnVtYmVyVG9Ta2lwOiAnc2tpcCcsXG4gICAgbnVtYmVyVG9SZXR1cm46ICdiYXRjaFNpemUnLFxuICAgIHJldHVybkZpZWxkU2VsZWN0b3I6ICdwcm9qZWN0aW9uJ1xufTtcbmNvbnN0IE9QX1FVRVJZX0tFWVMgPSBbXG4gICAgJ3RhaWxhYmxlJyxcbiAgICAnb3Bsb2dSZXBsYXknLFxuICAgICdub0N1cnNvclRpbWVvdXQnLFxuICAgICdhd2FpdERhdGEnLFxuICAgICdwYXJ0aWFsJyxcbiAgICAnZXhoYXVzdCdcbl07XG4vKiogRXh0cmFjdCB0aGUgYWN0dWFsIGNvbW1hbmQgZnJvbSB0aGUgcXVlcnksIHBvc3NpYmx5IHVwLWNvbnZlcnRpbmcgaWYgaXQncyBhIGxlZ2FjeSBmb3JtYXQgKi9cbmZ1bmN0aW9uIGV4dHJhY3RDb21tYW5kKGNvbW1hbmQpIHtcbiAgICBpZiAoY29tbWFuZCBpbnN0YW5jZW9mIGNvbW1hbmRzXzEuTXNnKSB7XG4gICAgICAgIHJldHVybiAoMCwgdXRpbHNfMS5kZWVwQ29weSkoY29tbWFuZC5jb21tYW5kKTtcbiAgICB9XG4gICAgaWYgKGNvbW1hbmQucXVlcnk/LiRxdWVyeSkge1xuICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICBpZiAoY29tbWFuZC5ucyA9PT0gJ2FkbWluLiRjbWQnKSB7XG4gICAgICAgICAgICAvLyB1cC1jb252ZXJ0IGxlZ2FjeSBjb21tYW5kXG4gICAgICAgICAgICByZXN1bHQgPSBPYmplY3QuYXNzaWduKHt9LCBjb21tYW5kLnF1ZXJ5LiRxdWVyeSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyB1cC1jb252ZXJ0IGxlZ2FjeSBmaW5kIGNvbW1hbmRcbiAgICAgICAgICAgIHJlc3VsdCA9IHsgZmluZDogY29sbGVjdGlvbk5hbWUoY29tbWFuZCkgfTtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKExFR0FDWV9GSU5EX1FVRVJZX01BUCkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjb21tYW5kLnF1ZXJ5W2tleV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbTEVHQUNZX0ZJTkRfUVVFUllfTUFQW2tleV1dID0gKDAsIHV0aWxzXzEuZGVlcENvcHkpKGNvbW1hbmQucXVlcnlba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmtleXMoTEVHQUNZX0ZJTkRfT1BUSU9OU19NQVApLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxlZ2FjeUtleSA9IGtleTtcbiAgICAgICAgICAgIGlmIChjb21tYW5kW2xlZ2FjeUtleV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtMRUdBQ1lfRklORF9PUFRJT05TX01BUFtsZWdhY3lLZXldXSA9ICgwLCB1dGlsc18xLmRlZXBDb3B5KShjb21tYW5kW2xlZ2FjeUtleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgT1BfUVVFUllfS0VZUy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICBpZiAoY29tbWFuZFtrZXldKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBjb21tYW5kW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY29tbWFuZC5wcmUzMkxpbWl0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJlc3VsdC5saW1pdCA9IGNvbW1hbmQucHJlMzJMaW1pdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tbWFuZC5xdWVyeS4kZXhwbGFpbikge1xuICAgICAgICAgICAgcmV0dXJuIHsgZXhwbGFpbjogcmVzdWx0IH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgY29uc3QgY2xvbmVkUXVlcnkgPSB7fTtcbiAgICBjb25zdCBjbG9uZWRDb21tYW5kID0ge307XG4gICAgaWYgKGNvbW1hbmQucXVlcnkpIHtcbiAgICAgICAgZm9yIChjb25zdCBrIGluIGNvbW1hbmQucXVlcnkpIHtcbiAgICAgICAgICAgIGNsb25lZFF1ZXJ5W2tdID0gKDAsIHV0aWxzXzEuZGVlcENvcHkpKGNvbW1hbmQucXVlcnlba10pO1xuICAgICAgICB9XG4gICAgICAgIGNsb25lZENvbW1hbmQucXVlcnkgPSBjbG9uZWRRdWVyeTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrIGluIGNvbW1hbmQpIHtcbiAgICAgICAgaWYgKGsgPT09ICdxdWVyeScpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY2xvbmVkQ29tbWFuZFtrXSA9ICgwLCB1dGlsc18xLmRlZXBDb3B5KShjb21tYW5kW2tdKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbW1hbmQucXVlcnkgPyBjbG9uZWRRdWVyeSA6IGNsb25lZENvbW1hbmQ7XG59XG5mdW5jdGlvbiBleHRyYWN0UmVwbHkoY29tbWFuZCwgcmVwbHkpIHtcbiAgICBpZiAoIXJlcGx5KSB7XG4gICAgICAgIHJldHVybiByZXBseTtcbiAgICB9XG4gICAgaWYgKGNvbW1hbmQgaW5zdGFuY2VvZiBjb21tYW5kc18xLk1zZykge1xuICAgICAgICByZXR1cm4gKDAsIHV0aWxzXzEuZGVlcENvcHkpKHJlcGx5LnJlc3VsdCA/IHJlcGx5LnJlc3VsdCA6IHJlcGx5KTtcbiAgICB9XG4gICAgLy8gaXMgdGhpcyBhIGxlZ2FjeSBmaW5kIGNvbW1hbmQ/XG4gICAgaWYgKGNvbW1hbmQucXVlcnkgJiYgY29tbWFuZC5xdWVyeS4kcXVlcnkgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2s6IDEsXG4gICAgICAgICAgICBjdXJzb3I6IHtcbiAgICAgICAgICAgICAgICBpZDogKDAsIHV0aWxzXzEuZGVlcENvcHkpKHJlcGx5LmN1cnNvcklkKSxcbiAgICAgICAgICAgICAgICBuczogbmFtZXNwYWNlKGNvbW1hbmQpLFxuICAgICAgICAgICAgICAgIGZpcnN0QmF0Y2g6ICgwLCB1dGlsc18xLmRlZXBDb3B5KShyZXBseS5kb2N1bWVudHMpXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiAoMCwgdXRpbHNfMS5kZWVwQ29weSkocmVwbHkucmVzdWx0ID8gcmVwbHkucmVzdWx0IDogcmVwbHkpO1xufVxuZnVuY3Rpb24gZXh0cmFjdENvbm5lY3Rpb25EZXRhaWxzKGNvbm5lY3Rpb24pIHtcbiAgICBsZXQgY29ubmVjdGlvbklkO1xuICAgIGlmICgnaWQnIGluIGNvbm5lY3Rpb24pIHtcbiAgICAgICAgY29ubmVjdGlvbklkID0gY29ubmVjdGlvbi5pZDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkcmVzczogY29ubmVjdGlvbi5hZGRyZXNzLFxuICAgICAgICBzZXJ2aWNlSWQ6IGNvbm5lY3Rpb24uc2VydmljZUlkLFxuICAgICAgICBjb25uZWN0aW9uSWRcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbWFuZF9tb25pdG9yaW5nX2V2ZW50cy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJTRU5TSVRJVkVfQ09NTUFORFMiLCJDb21tYW5kRmFpbGVkRXZlbnQiLCJDb21tYW5kU3VjY2VlZGVkRXZlbnQiLCJDb21tYW5kU3RhcnRlZEV2ZW50IiwiY29uc3RhbnRzXzEiLCJyZXF1aXJlIiwidXRpbHNfMSIsImNvbW1hbmRzXzEiLCJjb25zdHJ1Y3RvciIsImNvbm5lY3Rpb24iLCJjb21tYW5kIiwibmFtZSIsIkNPTU1BTkRfU1RBUlRFRCIsImNtZCIsImV4dHJhY3RDb21tYW5kIiwiY29tbWFuZE5hbWUiLCJleHRyYWN0Q29tbWFuZE5hbWUiLCJhZGRyZXNzIiwiY29ubmVjdGlvbklkIiwic2VydmljZUlkIiwiZXh0cmFjdENvbm5lY3Rpb25EZXRhaWxzIiwiaGFzIiwiY29tbWFuZE9iaiIsInJlcXVlc3RJZCIsImRhdGFiYXNlTmFtZSIsIm1heWJlUmVkYWN0IiwiaGFzU2VydmljZUlkIiwicmVwbHkiLCJzdGFydGVkIiwiQ09NTUFORF9TVUNDRUVERUQiLCJkdXJhdGlvbiIsImNhbGN1bGF0ZUR1cmF0aW9uSW5NcyIsImV4dHJhY3RSZXBseSIsImVycm9yIiwiQ09NTUFORF9GQUlMRUQiLCJmYWlsdXJlIiwiU2V0IiwiSEVMTE9fQ09NTUFORFMiLCJMRUdBQ1lfSEVMTE9fQ09NTUFORCIsIkxFR0FDWV9IRUxMT19DT01NQU5EX0NBTUVMX0NBU0UiLCJjb21tYW5kRG9jIiwia2V5cyIsIm5hbWVzcGFjZSIsIm5zIiwic3BsaXQiLCJjb2xsZWN0aW9uTmFtZSIsInJlc3VsdCIsInNwZWN1bGF0aXZlQXV0aGVudGljYXRlIiwiTEVHQUNZX0ZJTkRfUVVFUllfTUFQIiwiJHF1ZXJ5IiwiJG9yZGVyYnkiLCIkaGludCIsIiRjb21tZW50IiwiJG1heFNjYW4iLCIkbWF4IiwiJG1pbiIsIiRyZXR1cm5LZXkiLCIkc2hvd0Rpc2tMb2MiLCIkbWF4VGltZU1TIiwiJHNuYXBzaG90IiwiTEVHQUNZX0ZJTkRfT1BUSU9OU19NQVAiLCJudW1iZXJUb1NraXAiLCJudW1iZXJUb1JldHVybiIsInJldHVybkZpZWxkU2VsZWN0b3IiLCJPUF9RVUVSWV9LRVlTIiwiTXNnIiwiZGVlcENvcHkiLCJxdWVyeSIsImFzc2lnbiIsImZpbmQiLCJmb3JFYWNoIiwia2V5IiwibGVnYWN5S2V5IiwicHJlMzJMaW1pdCIsImxpbWl0IiwiJGV4cGxhaW4iLCJleHBsYWluIiwiY2xvbmVkUXVlcnkiLCJjbG9uZWRDb21tYW5kIiwiayIsIm9rIiwiY3Vyc29yIiwiaWQiLCJjdXJzb3JJZCIsImZpcnN0QmF0Y2giLCJkb2N1bWVudHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/command_monitoring_events.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/commands.js":
/*!***************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/commands.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.BinMsg = exports.Msg = exports.Response = exports.Query = void 0;\nconst BSON = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst constants_1 = __webpack_require__(/*! ./wire_protocol/constants */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js\");\n// Incrementing request id\nlet _requestId = 0;\n// Query flags\nconst OPTS_TAILABLE_CURSOR = 2;\nconst OPTS_SECONDARY = 4;\nconst OPTS_OPLOG_REPLAY = 8;\nconst OPTS_NO_CURSOR_TIMEOUT = 16;\nconst OPTS_AWAIT_DATA = 32;\nconst OPTS_EXHAUST = 64;\nconst OPTS_PARTIAL = 128;\n// Response flags\nconst CURSOR_NOT_FOUND = 1;\nconst QUERY_FAILURE = 2;\nconst SHARD_CONFIG_STALE = 4;\nconst AWAIT_CAPABLE = 8;\n/**************************************************************\n * QUERY\n **************************************************************/ /** @internal */ class Query {\n    constructor(ns, query, options){\n        // Basic options needed to be passed in\n        // TODO(NODE-3483): Replace with MongoCommandError\n        if (ns == null) throw new error_1.MongoRuntimeError(\"Namespace must be specified for query\");\n        // TODO(NODE-3483): Replace with MongoCommandError\n        if (query == null) throw new error_1.MongoRuntimeError(\"A query document must be specified for query\");\n        // Validate that we are not passing 0x00 in the collection name\n        if (ns.indexOf(\"\\x00\") !== -1) {\n            // TODO(NODE-3483): Use MongoNamespace static method\n            throw new error_1.MongoRuntimeError(\"Namespace cannot contain a null character\");\n        }\n        // Basic options\n        this.ns = ns;\n        this.query = query;\n        // Additional options\n        this.numberToSkip = options.numberToSkip || 0;\n        this.numberToReturn = options.numberToReturn || 0;\n        this.returnFieldSelector = options.returnFieldSelector || undefined;\n        this.requestId = Query.getRequestId();\n        // special case for pre-3.2 find commands, delete ASAP\n        this.pre32Limit = options.pre32Limit;\n        // Serialization option\n        this.serializeFunctions = typeof options.serializeFunctions === \"boolean\" ? options.serializeFunctions : false;\n        this.ignoreUndefined = typeof options.ignoreUndefined === \"boolean\" ? options.ignoreUndefined : false;\n        this.maxBsonSize = options.maxBsonSize || 1024 * 1024 * 16;\n        this.checkKeys = typeof options.checkKeys === \"boolean\" ? options.checkKeys : false;\n        this.batchSize = this.numberToReturn;\n        // Flags\n        this.tailable = false;\n        this.secondaryOk = typeof options.secondaryOk === \"boolean\" ? options.secondaryOk : false;\n        this.oplogReplay = false;\n        this.noCursorTimeout = false;\n        this.awaitData = false;\n        this.exhaust = false;\n        this.partial = false;\n    }\n    /** Assign next request Id. */ incRequestId() {\n        this.requestId = _requestId++;\n    }\n    /** Peek next request Id. */ nextRequestId() {\n        return _requestId + 1;\n    }\n    /** Increment then return next request Id. */ static getRequestId() {\n        return ++_requestId;\n    }\n    // Uses a single allocated buffer for the process, avoiding multiple memory allocations\n    toBin() {\n        const buffers = [];\n        let projection = null;\n        // Set up the flags\n        let flags = 0;\n        if (this.tailable) {\n            flags |= OPTS_TAILABLE_CURSOR;\n        }\n        if (this.secondaryOk) {\n            flags |= OPTS_SECONDARY;\n        }\n        if (this.oplogReplay) {\n            flags |= OPTS_OPLOG_REPLAY;\n        }\n        if (this.noCursorTimeout) {\n            flags |= OPTS_NO_CURSOR_TIMEOUT;\n        }\n        if (this.awaitData) {\n            flags |= OPTS_AWAIT_DATA;\n        }\n        if (this.exhaust) {\n            flags |= OPTS_EXHAUST;\n        }\n        if (this.partial) {\n            flags |= OPTS_PARTIAL;\n        }\n        // If batchSize is different to this.numberToReturn\n        if (this.batchSize !== this.numberToReturn) this.numberToReturn = this.batchSize;\n        // Allocate write protocol header buffer\n        const header = Buffer.alloc(4 * 4 + // Header\n        4 + // Flags\n        Buffer.byteLength(this.ns) + 1 + // namespace\n        4 + // numberToSkip\n        4 // numberToReturn\n        );\n        // Add header to buffers\n        buffers.push(header);\n        // Serialize the query\n        const query = BSON.serialize(this.query, {\n            checkKeys: this.checkKeys,\n            serializeFunctions: this.serializeFunctions,\n            ignoreUndefined: this.ignoreUndefined\n        });\n        // Add query document\n        buffers.push(query);\n        if (this.returnFieldSelector && Object.keys(this.returnFieldSelector).length > 0) {\n            // Serialize the projection document\n            projection = BSON.serialize(this.returnFieldSelector, {\n                checkKeys: this.checkKeys,\n                serializeFunctions: this.serializeFunctions,\n                ignoreUndefined: this.ignoreUndefined\n            });\n            // Add projection document\n            buffers.push(projection);\n        }\n        // Total message size\n        const totalLength = header.length + query.length + (projection ? projection.length : 0);\n        // Set up the index\n        let index = 4;\n        // Write total document length\n        header[3] = totalLength >> 24 & 0xff;\n        header[2] = totalLength >> 16 & 0xff;\n        header[1] = totalLength >> 8 & 0xff;\n        header[0] = totalLength & 0xff;\n        // Write header information requestId\n        header[index + 3] = this.requestId >> 24 & 0xff;\n        header[index + 2] = this.requestId >> 16 & 0xff;\n        header[index + 1] = this.requestId >> 8 & 0xff;\n        header[index] = this.requestId & 0xff;\n        index = index + 4;\n        // Write header information responseTo\n        header[index + 3] = 0 >> 24 & 0xff;\n        header[index + 2] = 0 >> 16 & 0xff;\n        header[index + 1] = 0 >> 8 & 0xff;\n        header[index] = 0 & 0xff;\n        index = index + 4;\n        // Write header information OP_QUERY\n        header[index + 3] = constants_1.OP_QUERY >> 24 & 0xff;\n        header[index + 2] = constants_1.OP_QUERY >> 16 & 0xff;\n        header[index + 1] = constants_1.OP_QUERY >> 8 & 0xff;\n        header[index] = constants_1.OP_QUERY & 0xff;\n        index = index + 4;\n        // Write header information flags\n        header[index + 3] = flags >> 24 & 0xff;\n        header[index + 2] = flags >> 16 & 0xff;\n        header[index + 1] = flags >> 8 & 0xff;\n        header[index] = flags & 0xff;\n        index = index + 4;\n        // Write collection name\n        index = index + header.write(this.ns, index, \"utf8\") + 1;\n        header[index - 1] = 0;\n        // Write header information flags numberToSkip\n        header[index + 3] = this.numberToSkip >> 24 & 0xff;\n        header[index + 2] = this.numberToSkip >> 16 & 0xff;\n        header[index + 1] = this.numberToSkip >> 8 & 0xff;\n        header[index] = this.numberToSkip & 0xff;\n        index = index + 4;\n        // Write header information flags numberToReturn\n        header[index + 3] = this.numberToReturn >> 24 & 0xff;\n        header[index + 2] = this.numberToReturn >> 16 & 0xff;\n        header[index + 1] = this.numberToReturn >> 8 & 0xff;\n        header[index] = this.numberToReturn & 0xff;\n        index = index + 4;\n        // Return the buffers\n        return buffers;\n    }\n}\nexports.Query = Query;\n/** @internal */ class Response {\n    constructor(message, msgHeader, msgBody, opts){\n        this.documents = new Array(0);\n        this.parsed = false;\n        this.raw = message;\n        this.data = msgBody;\n        this.opts = opts ?? {\n            useBigInt64: false,\n            promoteLongs: true,\n            promoteValues: true,\n            promoteBuffers: false,\n            bsonRegExp: false\n        };\n        // Read the message header\n        this.length = msgHeader.length;\n        this.requestId = msgHeader.requestId;\n        this.responseTo = msgHeader.responseTo;\n        this.opCode = msgHeader.opCode;\n        this.fromCompressed = msgHeader.fromCompressed;\n        // Flag values\n        this.useBigInt64 = typeof this.opts.useBigInt64 === \"boolean\" ? this.opts.useBigInt64 : false;\n        this.promoteLongs = typeof this.opts.promoteLongs === \"boolean\" ? this.opts.promoteLongs : true;\n        this.promoteValues = typeof this.opts.promoteValues === \"boolean\" ? this.opts.promoteValues : true;\n        this.promoteBuffers = typeof this.opts.promoteBuffers === \"boolean\" ? this.opts.promoteBuffers : false;\n        this.bsonRegExp = typeof this.opts.bsonRegExp === \"boolean\" ? this.opts.bsonRegExp : false;\n    }\n    isParsed() {\n        return this.parsed;\n    }\n    parse(options) {\n        // Don't parse again if not needed\n        if (this.parsed) return;\n        options = options ?? {};\n        // Allow the return of raw documents instead of parsing\n        const raw = options.raw || false;\n        const documentsReturnedIn = options.documentsReturnedIn || null;\n        const useBigInt64 = options.useBigInt64 ?? this.opts.useBigInt64;\n        const promoteLongs = options.promoteLongs ?? this.opts.promoteLongs;\n        const promoteValues = options.promoteValues ?? this.opts.promoteValues;\n        const promoteBuffers = options.promoteBuffers ?? this.opts.promoteBuffers;\n        const bsonRegExp = options.bsonRegExp ?? this.opts.bsonRegExp;\n        let bsonSize;\n        // Set up the options\n        const _options = {\n            useBigInt64,\n            promoteLongs,\n            promoteValues,\n            promoteBuffers,\n            bsonRegExp\n        };\n        // Position within OP_REPLY at which documents start\n        // (See https://www.mongodb.com/docs/manual/reference/mongodb-wire-protocol/#wire-op-reply)\n        this.index = 20;\n        // Read the message body\n        this.responseFlags = this.data.readInt32LE(0);\n        this.cursorId = new BSON.Long(this.data.readInt32LE(4), this.data.readInt32LE(8));\n        this.startingFrom = this.data.readInt32LE(12);\n        this.numberReturned = this.data.readInt32LE(16);\n        // Preallocate document array\n        this.documents = new Array(this.numberReturned);\n        this.cursorNotFound = (this.responseFlags & CURSOR_NOT_FOUND) !== 0;\n        this.queryFailure = (this.responseFlags & QUERY_FAILURE) !== 0;\n        this.shardConfigStale = (this.responseFlags & SHARD_CONFIG_STALE) !== 0;\n        this.awaitCapable = (this.responseFlags & AWAIT_CAPABLE) !== 0;\n        // Parse Body\n        for(let i = 0; i < this.numberReturned; i++){\n            bsonSize = this.data[this.index] | this.data[this.index + 1] << 8 | this.data[this.index + 2] << 16 | this.data[this.index + 3] << 24;\n            // If we have raw results specified slice the return document\n            if (raw) {\n                this.documents[i] = this.data.slice(this.index, this.index + bsonSize);\n            } else {\n                this.documents[i] = BSON.deserialize(this.data.slice(this.index, this.index + bsonSize), _options);\n            }\n            // Adjust the index\n            this.index = this.index + bsonSize;\n        }\n        if (this.documents.length === 1 && documentsReturnedIn != null && raw) {\n            const fieldsAsRaw = {};\n            fieldsAsRaw[documentsReturnedIn] = true;\n            _options.fieldsAsRaw = fieldsAsRaw;\n            const doc = BSON.deserialize(this.documents[0], _options);\n            this.documents = [\n                doc\n            ];\n        }\n        // Set parsed\n        this.parsed = true;\n    }\n}\nexports.Response = Response;\n// Implementation of OP_MSG spec:\n// https://github.com/mongodb/specifications/blob/master/source/message/OP_MSG.rst\n//\n// struct Section {\n//   uint8 payloadType;\n//   union payload {\n//       document  document; // payloadType == 0\n//       struct sequence { // payloadType == 1\n//           int32      size;\n//           cstring    identifier;\n//           document*  documents;\n//       };\n//   };\n// };\n// struct OP_MSG {\n//   struct MsgHeader {\n//       int32  messageLength;\n//       int32  requestID;\n//       int32  responseTo;\n//       int32  opCode = 2013;\n//   };\n//   uint32      flagBits;\n//   Section+    sections;\n//   [uint32     checksum;]\n// };\n// Msg Flags\nconst OPTS_CHECKSUM_PRESENT = 1;\nconst OPTS_MORE_TO_COME = 2;\nconst OPTS_EXHAUST_ALLOWED = 1 << 16;\n/** @internal */ class Msg {\n    constructor(ns, command, options){\n        // Basic options needed to be passed in\n        if (command == null) throw new error_1.MongoInvalidArgumentError(\"Query document must be specified for query\");\n        // Basic options\n        this.ns = ns;\n        this.command = command;\n        this.command.$db = (0, utils_1.databaseNamespace)(ns);\n        if (options.readPreference && options.readPreference.mode !== read_preference_1.ReadPreference.PRIMARY) {\n            this.command.$readPreference = options.readPreference.toJSON();\n        }\n        // Ensure empty options\n        this.options = options ?? {};\n        // Additional options\n        this.requestId = options.requestId ? options.requestId : Msg.getRequestId();\n        // Serialization option\n        this.serializeFunctions = typeof options.serializeFunctions === \"boolean\" ? options.serializeFunctions : false;\n        this.ignoreUndefined = typeof options.ignoreUndefined === \"boolean\" ? options.ignoreUndefined : false;\n        this.checkKeys = typeof options.checkKeys === \"boolean\" ? options.checkKeys : false;\n        this.maxBsonSize = options.maxBsonSize || 1024 * 1024 * 16;\n        // flags\n        this.checksumPresent = false;\n        this.moreToCome = options.moreToCome || false;\n        this.exhaustAllowed = typeof options.exhaustAllowed === \"boolean\" ? options.exhaustAllowed : false;\n    }\n    toBin() {\n        const buffers = [];\n        let flags = 0;\n        if (this.checksumPresent) {\n            flags |= OPTS_CHECKSUM_PRESENT;\n        }\n        if (this.moreToCome) {\n            flags |= OPTS_MORE_TO_COME;\n        }\n        if (this.exhaustAllowed) {\n            flags |= OPTS_EXHAUST_ALLOWED;\n        }\n        const header = Buffer.alloc(4 * 4 + // Header\n        4 // Flags\n        );\n        buffers.push(header);\n        let totalLength = header.length;\n        const command = this.command;\n        totalLength += this.makeDocumentSegment(buffers, command);\n        header.writeInt32LE(totalLength, 0); // messageLength\n        header.writeInt32LE(this.requestId, 4); // requestID\n        header.writeInt32LE(0, 8); // responseTo\n        header.writeInt32LE(constants_1.OP_MSG, 12); // opCode\n        header.writeUInt32LE(flags, 16); // flags\n        return buffers;\n    }\n    makeDocumentSegment(buffers, document) {\n        const payloadTypeBuffer = Buffer.alloc(1);\n        payloadTypeBuffer[0] = 0;\n        const documentBuffer = this.serializeBson(document);\n        buffers.push(payloadTypeBuffer);\n        buffers.push(documentBuffer);\n        return payloadTypeBuffer.length + documentBuffer.length;\n    }\n    serializeBson(document) {\n        return BSON.serialize(document, {\n            checkKeys: this.checkKeys,\n            serializeFunctions: this.serializeFunctions,\n            ignoreUndefined: this.ignoreUndefined\n        });\n    }\n    static getRequestId() {\n        _requestId = _requestId + 1 & 0x7fffffff;\n        return _requestId;\n    }\n}\nexports.Msg = Msg;\n/** @internal */ class BinMsg {\n    constructor(message, msgHeader, msgBody, opts){\n        this.parsed = false;\n        this.raw = message;\n        this.data = msgBody;\n        this.opts = opts ?? {\n            useBigInt64: false,\n            promoteLongs: true,\n            promoteValues: true,\n            promoteBuffers: false,\n            bsonRegExp: false\n        };\n        // Read the message header\n        this.length = msgHeader.length;\n        this.requestId = msgHeader.requestId;\n        this.responseTo = msgHeader.responseTo;\n        this.opCode = msgHeader.opCode;\n        this.fromCompressed = msgHeader.fromCompressed;\n        // Read response flags\n        this.responseFlags = msgBody.readInt32LE(0);\n        this.checksumPresent = (this.responseFlags & OPTS_CHECKSUM_PRESENT) !== 0;\n        this.moreToCome = (this.responseFlags & OPTS_MORE_TO_COME) !== 0;\n        this.exhaustAllowed = (this.responseFlags & OPTS_EXHAUST_ALLOWED) !== 0;\n        this.useBigInt64 = typeof this.opts.useBigInt64 === \"boolean\" ? this.opts.useBigInt64 : false;\n        this.promoteLongs = typeof this.opts.promoteLongs === \"boolean\" ? this.opts.promoteLongs : true;\n        this.promoteValues = typeof this.opts.promoteValues === \"boolean\" ? this.opts.promoteValues : true;\n        this.promoteBuffers = typeof this.opts.promoteBuffers === \"boolean\" ? this.opts.promoteBuffers : false;\n        this.bsonRegExp = typeof this.opts.bsonRegExp === \"boolean\" ? this.opts.bsonRegExp : false;\n        this.documents = [];\n    }\n    isParsed() {\n        return this.parsed;\n    }\n    parse(options) {\n        // Don't parse again if not needed\n        if (this.parsed) return;\n        options = options ?? {};\n        this.index = 4;\n        // Allow the return of raw documents instead of parsing\n        const raw = options.raw || false;\n        const documentsReturnedIn = options.documentsReturnedIn || null;\n        const useBigInt64 = options.useBigInt64 ?? this.opts.useBigInt64;\n        const promoteLongs = options.promoteLongs ?? this.opts.promoteLongs;\n        const promoteValues = options.promoteValues ?? this.opts.promoteValues;\n        const promoteBuffers = options.promoteBuffers ?? this.opts.promoteBuffers;\n        const bsonRegExp = options.bsonRegExp ?? this.opts.bsonRegExp;\n        const validation = this.parseBsonSerializationOptions(options);\n        // Set up the options\n        const bsonOptions = {\n            useBigInt64,\n            promoteLongs,\n            promoteValues,\n            promoteBuffers,\n            bsonRegExp,\n            validation\n        };\n        while(this.index < this.data.length){\n            const payloadType = this.data.readUInt8(this.index++);\n            if (payloadType === 0) {\n                const bsonSize = this.data.readUInt32LE(this.index);\n                const bin = this.data.slice(this.index, this.index + bsonSize);\n                this.documents.push(raw ? bin : BSON.deserialize(bin, bsonOptions));\n                this.index += bsonSize;\n            } else if (payloadType === 1) {\n                // It was decided that no driver makes use of payload type 1\n                // TODO(NODE-3483): Replace with MongoDeprecationError\n                throw new error_1.MongoRuntimeError(\"OP_MSG Payload Type 1 detected unsupported protocol\");\n            }\n        }\n        if (this.documents.length === 1 && documentsReturnedIn != null && raw) {\n            const fieldsAsRaw = {};\n            fieldsAsRaw[documentsReturnedIn] = true;\n            bsonOptions.fieldsAsRaw = fieldsAsRaw;\n            const doc = BSON.deserialize(this.documents[0], bsonOptions);\n            this.documents = [\n                doc\n            ];\n        }\n        this.parsed = true;\n    }\n    parseBsonSerializationOptions({ enableUtf8Validation }) {\n        if (enableUtf8Validation === false) {\n            return {\n                utf8: false\n            };\n        }\n        return {\n            utf8: {\n                writeErrors: false\n            }\n        };\n    }\n}\nexports.BinMsg = BinMsg; //# sourceMappingURL=commands.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb21tYW5kcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsY0FBYyxHQUFHQSxXQUFXLEdBQUdBLGdCQUFnQixHQUFHQSxhQUFhLEdBQUcsS0FBSztBQUN2RSxNQUFNTSxPQUFPQyxtQkFBT0EsQ0FBQyx5REFBUztBQUM5QixNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRSxvQkFBb0JGLG1CQUFPQSxDQUFDLCtFQUFvQjtBQUN0RCxNQUFNRyxVQUFVSCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNSSxjQUFjSixtQkFBT0EsQ0FBQyxtR0FBMkI7QUFDdkQsMEJBQTBCO0FBQzFCLElBQUlLLGFBQWE7QUFDakIsY0FBYztBQUNkLE1BQU1DLHVCQUF1QjtBQUM3QixNQUFNQyxpQkFBaUI7QUFDdkIsTUFBTUMsb0JBQW9CO0FBQzFCLE1BQU1DLHlCQUF5QjtBQUMvQixNQUFNQyxrQkFBa0I7QUFDeEIsTUFBTUMsZUFBZTtBQUNyQixNQUFNQyxlQUFlO0FBQ3JCLGlCQUFpQjtBQUNqQixNQUFNQyxtQkFBbUI7QUFDekIsTUFBTUMsZ0JBQWdCO0FBQ3RCLE1BQU1DLHFCQUFxQjtBQUMzQixNQUFNQyxnQkFBZ0I7QUFDdEI7OzhEQUU4RCxHQUM5RCxjQUFjLEdBQ2QsTUFBTWxCO0lBQ0ZtQixZQUFZQyxFQUFFLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxDQUFFO1FBQzVCLHVDQUF1QztRQUN2QyxrREFBa0Q7UUFDbEQsSUFBSUYsTUFBTSxNQUNOLE1BQU0sSUFBSWpCLFFBQVFvQixpQkFBaUIsQ0FBQztRQUN4QyxrREFBa0Q7UUFDbEQsSUFBSUYsU0FBUyxNQUNULE1BQU0sSUFBSWxCLFFBQVFvQixpQkFBaUIsQ0FBQztRQUN4QywrREFBK0Q7UUFDL0QsSUFBSUgsR0FBR0ksT0FBTyxDQUFDLFlBQVks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QTREO2dCQUM1RCxzREFBc0Q7Z0JBQ3RELE1BQU0sSUFBSTNILFFBQVFvQixpQkFBaUIsQ0FBQztZQUN4QztRQUNKO1FBQ0EsSUFBSSxJQUFJLENBQUMyQyxTQUFTLENBQUNULE1BQU0sS0FBSyxLQUFLd0IsdUJBQXVCLFFBQVFaLEtBQUs7WUFDbkUsTUFBTTRCLGNBQWMsQ0FBQztZQUNyQkEsV0FBVyxDQUFDaEIsb0JBQW9CLEdBQUc7WUFDbkM0QyxZQUFZNUIsV0FBVyxHQUFHQTtZQUMxQixNQUFNQyxNQUFNakcsS0FBSytGLFdBQVcsQ0FBQyxJQUFJLENBQUM5QixTQUFTLENBQUMsRUFBRSxFQUFFMkQ7WUFDaEQsSUFBSSxDQUFDM0QsU0FBUyxHQUFHO2dCQUFDZ0M7YUFBSTtRQUMxQjtRQUNBLElBQUksQ0FBQzlCLE1BQU0sR0FBRztJQUNsQjtJQUNBd0QsOEJBQThCLEVBQUVNLG9CQUFvQixFQUFFLEVBQUU7UUFDcEQsSUFBSUEseUJBQXlCLE9BQU87WUFDaEMsT0FBTztnQkFBRUMsTUFBTTtZQUFNO1FBQ3pCO1FBQ0EsT0FBTztZQUFFQSxNQUFNO2dCQUFFQyxhQUFhO1lBQU07UUFBRTtJQUMxQztBQUNKO0FBQ0F6SSxjQUFjLEdBQUdFLFFBQ2pCLG9DQUFvQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2NvbW1hbmRzLmpzPzVmMTgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkJpbk1zZyA9IGV4cG9ydHMuTXNnID0gZXhwb3J0cy5SZXNwb25zZSA9IGV4cG9ydHMuUXVlcnkgPSB2b2lkIDA7XG5jb25zdCBCU09OID0gcmVxdWlyZShcIi4uL2Jzb25cIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgcmVhZF9wcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4vd2lyZV9wcm90b2NvbC9jb25zdGFudHNcIik7XG4vLyBJbmNyZW1lbnRpbmcgcmVxdWVzdCBpZFxubGV0IF9yZXF1ZXN0SWQgPSAwO1xuLy8gUXVlcnkgZmxhZ3NcbmNvbnN0IE9QVFNfVEFJTEFCTEVfQ1VSU09SID0gMjtcbmNvbnN0IE9QVFNfU0VDT05EQVJZID0gNDtcbmNvbnN0IE9QVFNfT1BMT0dfUkVQTEFZID0gODtcbmNvbnN0IE9QVFNfTk9fQ1VSU09SX1RJTUVPVVQgPSAxNjtcbmNvbnN0IE9QVFNfQVdBSVRfREFUQSA9IDMyO1xuY29uc3QgT1BUU19FWEhBVVNUID0gNjQ7XG5jb25zdCBPUFRTX1BBUlRJQUwgPSAxMjg7XG4vLyBSZXNwb25zZSBmbGFnc1xuY29uc3QgQ1VSU09SX05PVF9GT1VORCA9IDE7XG5jb25zdCBRVUVSWV9GQUlMVVJFID0gMjtcbmNvbnN0IFNIQVJEX0NPTkZJR19TVEFMRSA9IDQ7XG5jb25zdCBBV0FJVF9DQVBBQkxFID0gODtcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogUVVFUllcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIFF1ZXJ5IHtcbiAgICBjb25zdHJ1Y3RvcihucywgcXVlcnksIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gQmFzaWMgb3B0aW9ucyBuZWVkZWQgdG8gYmUgcGFzc2VkIGluXG4gICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKTogUmVwbGFjZSB3aXRoIE1vbmdvQ29tbWFuZEVycm9yXG4gICAgICAgIGlmIChucyA9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ05hbWVzcGFjZSBtdXN0IGJlIHNwZWNpZmllZCBmb3IgcXVlcnknKTtcbiAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODMpOiBSZXBsYWNlIHdpdGggTW9uZ29Db21tYW5kRXJyb3JcbiAgICAgICAgaWYgKHF1ZXJ5ID09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignQSBxdWVyeSBkb2N1bWVudCBtdXN0IGJlIHNwZWNpZmllZCBmb3IgcXVlcnknKTtcbiAgICAgICAgLy8gVmFsaWRhdGUgdGhhdCB3ZSBhcmUgbm90IHBhc3NpbmcgMHgwMCBpbiB0aGUgY29sbGVjdGlvbiBuYW1lXG4gICAgICAgIGlmIChucy5pbmRleE9mKCdcXHgwMCcpICE9PSAtMSkge1xuICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODMpOiBVc2UgTW9uZ29OYW1lc3BhY2Ugc3RhdGljIG1ldGhvZFxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ05hbWVzcGFjZSBjYW5ub3QgY29udGFpbiBhIG51bGwgY2hhcmFjdGVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQmFzaWMgb3B0aW9uc1xuICAgICAgICB0aGlzLm5zID0gbnM7XG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICAgICAgLy8gQWRkaXRpb25hbCBvcHRpb25zXG4gICAgICAgIHRoaXMubnVtYmVyVG9Ta2lwID0gb3B0aW9ucy5udW1iZXJUb1NraXAgfHwgMDtcbiAgICAgICAgdGhpcy5udW1iZXJUb1JldHVybiA9IG9wdGlvbnMubnVtYmVyVG9SZXR1cm4gfHwgMDtcbiAgICAgICAgdGhpcy5yZXR1cm5GaWVsZFNlbGVjdG9yID0gb3B0aW9ucy5yZXR1cm5GaWVsZFNlbGVjdG9yIHx8IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5yZXF1ZXN0SWQgPSBRdWVyeS5nZXRSZXF1ZXN0SWQoKTtcbiAgICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciBwcmUtMy4yIGZpbmQgY29tbWFuZHMsIGRlbGV0ZSBBU0FQXG4gICAgICAgIHRoaXMucHJlMzJMaW1pdCA9IG9wdGlvbnMucHJlMzJMaW1pdDtcbiAgICAgICAgLy8gU2VyaWFsaXphdGlvbiBvcHRpb25cbiAgICAgICAgdGhpcy5zZXJpYWxpemVGdW5jdGlvbnMgPVxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMuc2VyaWFsaXplRnVuY3Rpb25zID09PSAnYm9vbGVhbicgPyBvcHRpb25zLnNlcmlhbGl6ZUZ1bmN0aW9ucyA6IGZhbHNlO1xuICAgICAgICB0aGlzLmlnbm9yZVVuZGVmaW5lZCA9XG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5pZ25vcmVVbmRlZmluZWQgPT09ICdib29sZWFuJyA/IG9wdGlvbnMuaWdub3JlVW5kZWZpbmVkIDogZmFsc2U7XG4gICAgICAgIHRoaXMubWF4QnNvblNpemUgPSBvcHRpb25zLm1heEJzb25TaXplIHx8IDEwMjQgKiAxMDI0ICogMTY7XG4gICAgICAgIHRoaXMuY2hlY2tLZXlzID0gdHlwZW9mIG9wdGlvbnMuY2hlY2tLZXlzID09PSAnYm9vbGVhbicgPyBvcHRpb25zLmNoZWNrS2V5cyA6IGZhbHNlO1xuICAgICAgICB0aGlzLmJhdGNoU2l6ZSA9IHRoaXMubnVtYmVyVG9SZXR1cm47XG4gICAgICAgIC8vIEZsYWdzXG4gICAgICAgIHRoaXMudGFpbGFibGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZWNvbmRhcnlPayA9IHR5cGVvZiBvcHRpb25zLnNlY29uZGFyeU9rID09PSAnYm9vbGVhbicgPyBvcHRpb25zLnNlY29uZGFyeU9rIDogZmFsc2U7XG4gICAgICAgIHRoaXMub3Bsb2dSZXBsYXkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ub0N1cnNvclRpbWVvdXQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hd2FpdERhdGEgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5leGhhdXN0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGFydGlhbCA9IGZhbHNlO1xuICAgIH1cbiAgICAvKiogQXNzaWduIG5leHQgcmVxdWVzdCBJZC4gKi9cbiAgICBpbmNSZXF1ZXN0SWQoKSB7XG4gICAgICAgIHRoaXMucmVxdWVzdElkID0gX3JlcXVlc3RJZCsrO1xuICAgIH1cbiAgICAvKiogUGVlayBuZXh0IHJlcXVlc3QgSWQuICovXG4gICAgbmV4dFJlcXVlc3RJZCgpIHtcbiAgICAgICAgcmV0dXJuIF9yZXF1ZXN0SWQgKyAxO1xuICAgIH1cbiAgICAvKiogSW5jcmVtZW50IHRoZW4gcmV0dXJuIG5leHQgcmVxdWVzdCBJZC4gKi9cbiAgICBzdGF0aWMgZ2V0UmVxdWVzdElkKCkge1xuICAgICAgICByZXR1cm4gKytfcmVxdWVzdElkO1xuICAgIH1cbiAgICAvLyBVc2VzIGEgc2luZ2xlIGFsbG9jYXRlZCBidWZmZXIgZm9yIHRoZSBwcm9jZXNzLCBhdm9pZGluZyBtdWx0aXBsZSBtZW1vcnkgYWxsb2NhdGlvbnNcbiAgICB0b0JpbigpIHtcbiAgICAgICAgY29uc3QgYnVmZmVycyA9IFtdO1xuICAgICAgICBsZXQgcHJvamVjdGlvbiA9IG51bGw7XG4gICAgICAgIC8vIFNldCB1cCB0aGUgZmxhZ3NcbiAgICAgICAgbGV0IGZsYWdzID0gMDtcbiAgICAgICAgaWYgKHRoaXMudGFpbGFibGUpIHtcbiAgICAgICAgICAgIGZsYWdzIHw9IE9QVFNfVEFJTEFCTEVfQ1VSU09SO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNlY29uZGFyeU9rKSB7XG4gICAgICAgICAgICBmbGFncyB8PSBPUFRTX1NFQ09OREFSWTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcGxvZ1JlcGxheSkge1xuICAgICAgICAgICAgZmxhZ3MgfD0gT1BUU19PUExPR19SRVBMQVk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubm9DdXJzb3JUaW1lb3V0KSB7XG4gICAgICAgICAgICBmbGFncyB8PSBPUFRTX05PX0NVUlNPUl9USU1FT1VUO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmF3YWl0RGF0YSkge1xuICAgICAgICAgICAgZmxhZ3MgfD0gT1BUU19BV0FJVF9EQVRBO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4aGF1c3QpIHtcbiAgICAgICAgICAgIGZsYWdzIHw9IE9QVFNfRVhIQVVTVDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wYXJ0aWFsKSB7XG4gICAgICAgICAgICBmbGFncyB8PSBPUFRTX1BBUlRJQUw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgYmF0Y2hTaXplIGlzIGRpZmZlcmVudCB0byB0aGlzLm51bWJlclRvUmV0dXJuXG4gICAgICAgIGlmICh0aGlzLmJhdGNoU2l6ZSAhPT0gdGhpcy5udW1iZXJUb1JldHVybilcbiAgICAgICAgICAgIHRoaXMubnVtYmVyVG9SZXR1cm4gPSB0aGlzLmJhdGNoU2l6ZTtcbiAgICAgICAgLy8gQWxsb2NhdGUgd3JpdGUgcHJvdG9jb2wgaGVhZGVyIGJ1ZmZlclxuICAgICAgICBjb25zdCBoZWFkZXIgPSBCdWZmZXIuYWxsb2MoNCAqIDQgKyAvLyBIZWFkZXJcbiAgICAgICAgICAgIDQgKyAvLyBGbGFnc1xuICAgICAgICAgICAgQnVmZmVyLmJ5dGVMZW5ndGgodGhpcy5ucykgK1xuICAgICAgICAgICAgMSArIC8vIG5hbWVzcGFjZVxuICAgICAgICAgICAgNCArIC8vIG51bWJlclRvU2tpcFxuICAgICAgICAgICAgNCAvLyBudW1iZXJUb1JldHVyblxuICAgICAgICApO1xuICAgICAgICAvLyBBZGQgaGVhZGVyIHRvIGJ1ZmZlcnNcbiAgICAgICAgYnVmZmVycy5wdXNoKGhlYWRlcik7XG4gICAgICAgIC8vIFNlcmlhbGl6ZSB0aGUgcXVlcnlcbiAgICAgICAgY29uc3QgcXVlcnkgPSBCU09OLnNlcmlhbGl6ZSh0aGlzLnF1ZXJ5LCB7XG4gICAgICAgICAgICBjaGVja0tleXM6IHRoaXMuY2hlY2tLZXlzLFxuICAgICAgICAgICAgc2VyaWFsaXplRnVuY3Rpb25zOiB0aGlzLnNlcmlhbGl6ZUZ1bmN0aW9ucyxcbiAgICAgICAgICAgIGlnbm9yZVVuZGVmaW5lZDogdGhpcy5pZ25vcmVVbmRlZmluZWRcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEFkZCBxdWVyeSBkb2N1bWVudFxuICAgICAgICBidWZmZXJzLnB1c2gocXVlcnkpO1xuICAgICAgICBpZiAodGhpcy5yZXR1cm5GaWVsZFNlbGVjdG9yICYmIE9iamVjdC5rZXlzKHRoaXMucmV0dXJuRmllbGRTZWxlY3RvcikubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gU2VyaWFsaXplIHRoZSBwcm9qZWN0aW9uIGRvY3VtZW50XG4gICAgICAgICAgICBwcm9qZWN0aW9uID0gQlNPTi5zZXJpYWxpemUodGhpcy5yZXR1cm5GaWVsZFNlbGVjdG9yLCB7XG4gICAgICAgICAgICAgICAgY2hlY2tLZXlzOiB0aGlzLmNoZWNrS2V5cyxcbiAgICAgICAgICAgICAgICBzZXJpYWxpemVGdW5jdGlvbnM6IHRoaXMuc2VyaWFsaXplRnVuY3Rpb25zLFxuICAgICAgICAgICAgICAgIGlnbm9yZVVuZGVmaW5lZDogdGhpcy5pZ25vcmVVbmRlZmluZWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gQWRkIHByb2plY3Rpb24gZG9jdW1lbnRcbiAgICAgICAgICAgIGJ1ZmZlcnMucHVzaChwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUb3RhbCBtZXNzYWdlIHNpemVcbiAgICAgICAgY29uc3QgdG90YWxMZW5ndGggPSBoZWFkZXIubGVuZ3RoICsgcXVlcnkubGVuZ3RoICsgKHByb2plY3Rpb24gPyBwcm9qZWN0aW9uLmxlbmd0aCA6IDApO1xuICAgICAgICAvLyBTZXQgdXAgdGhlIGluZGV4XG4gICAgICAgIGxldCBpbmRleCA9IDQ7XG4gICAgICAgIC8vIFdyaXRlIHRvdGFsIGRvY3VtZW50IGxlbmd0aFxuICAgICAgICBoZWFkZXJbM10gPSAodG90YWxMZW5ndGggPj4gMjQpICYgMHhmZjtcbiAgICAgICAgaGVhZGVyWzJdID0gKHRvdGFsTGVuZ3RoID4+IDE2KSAmIDB4ZmY7XG4gICAgICAgIGhlYWRlclsxXSA9ICh0b3RhbExlbmd0aCA+PiA4KSAmIDB4ZmY7XG4gICAgICAgIGhlYWRlclswXSA9IHRvdGFsTGVuZ3RoICYgMHhmZjtcbiAgICAgICAgLy8gV3JpdGUgaGVhZGVyIGluZm9ybWF0aW9uIHJlcXVlc3RJZFxuICAgICAgICBoZWFkZXJbaW5kZXggKyAzXSA9ICh0aGlzLnJlcXVlc3RJZCA+PiAyNCkgJiAweGZmO1xuICAgICAgICBoZWFkZXJbaW5kZXggKyAyXSA9ICh0aGlzLnJlcXVlc3RJZCA+PiAxNikgJiAweGZmO1xuICAgICAgICBoZWFkZXJbaW5kZXggKyAxXSA9ICh0aGlzLnJlcXVlc3RJZCA+PiA4KSAmIDB4ZmY7XG4gICAgICAgIGhlYWRlcltpbmRleF0gPSB0aGlzLnJlcXVlc3RJZCAmIDB4ZmY7XG4gICAgICAgIGluZGV4ID0gaW5kZXggKyA0O1xuICAgICAgICAvLyBXcml0ZSBoZWFkZXIgaW5mb3JtYXRpb24gcmVzcG9uc2VUb1xuICAgICAgICBoZWFkZXJbaW5kZXggKyAzXSA9ICgwID4+IDI0KSAmIDB4ZmY7XG4gICAgICAgIGhlYWRlcltpbmRleCArIDJdID0gKDAgPj4gMTYpICYgMHhmZjtcbiAgICAgICAgaGVhZGVyW2luZGV4ICsgMV0gPSAoMCA+PiA4KSAmIDB4ZmY7XG4gICAgICAgIGhlYWRlcltpbmRleF0gPSAwICYgMHhmZjtcbiAgICAgICAgaW5kZXggPSBpbmRleCArIDQ7XG4gICAgICAgIC8vIFdyaXRlIGhlYWRlciBpbmZvcm1hdGlvbiBPUF9RVUVSWVxuICAgICAgICBoZWFkZXJbaW5kZXggKyAzXSA9IChjb25zdGFudHNfMS5PUF9RVUVSWSA+PiAyNCkgJiAweGZmO1xuICAgICAgICBoZWFkZXJbaW5kZXggKyAyXSA9IChjb25zdGFudHNfMS5PUF9RVUVSWSA+PiAxNikgJiAweGZmO1xuICAgICAgICBoZWFkZXJbaW5kZXggKyAxXSA9IChjb25zdGFudHNfMS5PUF9RVUVSWSA+PiA4KSAmIDB4ZmY7XG4gICAgICAgIGhlYWRlcltpbmRleF0gPSBjb25zdGFudHNfMS5PUF9RVUVSWSAmIDB4ZmY7XG4gICAgICAgIGluZGV4ID0gaW5kZXggKyA0O1xuICAgICAgICAvLyBXcml0ZSBoZWFkZXIgaW5mb3JtYXRpb24gZmxhZ3NcbiAgICAgICAgaGVhZGVyW2luZGV4ICsgM10gPSAoZmxhZ3MgPj4gMjQpICYgMHhmZjtcbiAgICAgICAgaGVhZGVyW2luZGV4ICsgMl0gPSAoZmxhZ3MgPj4gMTYpICYgMHhmZjtcbiAgICAgICAgaGVhZGVyW2luZGV4ICsgMV0gPSAoZmxhZ3MgPj4gOCkgJiAweGZmO1xuICAgICAgICBoZWFkZXJbaW5kZXhdID0gZmxhZ3MgJiAweGZmO1xuICAgICAgICBpbmRleCA9IGluZGV4ICsgNDtcbiAgICAgICAgLy8gV3JpdGUgY29sbGVjdGlvbiBuYW1lXG4gICAgICAgIGluZGV4ID0gaW5kZXggKyBoZWFkZXIud3JpdGUodGhpcy5ucywgaW5kZXgsICd1dGY4JykgKyAxO1xuICAgICAgICBoZWFkZXJbaW5kZXggLSAxXSA9IDA7XG4gICAgICAgIC8vIFdyaXRlIGhlYWRlciBpbmZvcm1hdGlvbiBmbGFncyBudW1iZXJUb1NraXBcbiAgICAgICAgaGVhZGVyW2luZGV4ICsgM10gPSAodGhpcy5udW1iZXJUb1NraXAgPj4gMjQpICYgMHhmZjtcbiAgICAgICAgaGVhZGVyW2luZGV4ICsgMl0gPSAodGhpcy5udW1iZXJUb1NraXAgPj4gMTYpICYgMHhmZjtcbiAgICAgICAgaGVhZGVyW2luZGV4ICsgMV0gPSAodGhpcy5udW1iZXJUb1NraXAgPj4gOCkgJiAweGZmO1xuICAgICAgICBoZWFkZXJbaW5kZXhdID0gdGhpcy5udW1iZXJUb1NraXAgJiAweGZmO1xuICAgICAgICBpbmRleCA9IGluZGV4ICsgNDtcbiAgICAgICAgLy8gV3JpdGUgaGVhZGVyIGluZm9ybWF0aW9uIGZsYWdzIG51bWJlclRvUmV0dXJuXG4gICAgICAgIGhlYWRlcltpbmRleCArIDNdID0gKHRoaXMubnVtYmVyVG9SZXR1cm4gPj4gMjQpICYgMHhmZjtcbiAgICAgICAgaGVhZGVyW2luZGV4ICsgMl0gPSAodGhpcy5udW1iZXJUb1JldHVybiA+PiAxNikgJiAweGZmO1xuICAgICAgICBoZWFkZXJbaW5kZXggKyAxXSA9ICh0aGlzLm51bWJlclRvUmV0dXJuID4+IDgpICYgMHhmZjtcbiAgICAgICAgaGVhZGVyW2luZGV4XSA9IHRoaXMubnVtYmVyVG9SZXR1cm4gJiAweGZmO1xuICAgICAgICBpbmRleCA9IGluZGV4ICsgNDtcbiAgICAgICAgLy8gUmV0dXJuIHRoZSBidWZmZXJzXG4gICAgICAgIHJldHVybiBidWZmZXJzO1xuICAgIH1cbn1cbmV4cG9ydHMuUXVlcnkgPSBRdWVyeTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIFJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBtc2dIZWFkZXIsIG1zZ0JvZHksIG9wdHMpIHtcbiAgICAgICAgdGhpcy5kb2N1bWVudHMgPSBuZXcgQXJyYXkoMCk7XG4gICAgICAgIHRoaXMucGFyc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmF3ID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5kYXRhID0gbXNnQm9keTtcbiAgICAgICAgdGhpcy5vcHRzID0gb3B0cyA/PyB7XG4gICAgICAgICAgICB1c2VCaWdJbnQ2NDogZmFsc2UsXG4gICAgICAgICAgICBwcm9tb3RlTG9uZ3M6IHRydWUsXG4gICAgICAgICAgICBwcm9tb3RlVmFsdWVzOiB0cnVlLFxuICAgICAgICAgICAgcHJvbW90ZUJ1ZmZlcnM6IGZhbHNlLFxuICAgICAgICAgICAgYnNvblJlZ0V4cDogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUmVhZCB0aGUgbWVzc2FnZSBoZWFkZXJcbiAgICAgICAgdGhpcy5sZW5ndGggPSBtc2dIZWFkZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLnJlcXVlc3RJZCA9IG1zZ0hlYWRlci5yZXF1ZXN0SWQ7XG4gICAgICAgIHRoaXMucmVzcG9uc2VUbyA9IG1zZ0hlYWRlci5yZXNwb25zZVRvO1xuICAgICAgICB0aGlzLm9wQ29kZSA9IG1zZ0hlYWRlci5vcENvZGU7XG4gICAgICAgIHRoaXMuZnJvbUNvbXByZXNzZWQgPSBtc2dIZWFkZXIuZnJvbUNvbXByZXNzZWQ7XG4gICAgICAgIC8vIEZsYWcgdmFsdWVzXG4gICAgICAgIHRoaXMudXNlQmlnSW50NjQgPSB0eXBlb2YgdGhpcy5vcHRzLnVzZUJpZ0ludDY0ID09PSAnYm9vbGVhbicgPyB0aGlzLm9wdHMudXNlQmlnSW50NjQgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5wcm9tb3RlTG9uZ3MgPSB0eXBlb2YgdGhpcy5vcHRzLnByb21vdGVMb25ncyA9PT0gJ2Jvb2xlYW4nID8gdGhpcy5vcHRzLnByb21vdGVMb25ncyA6IHRydWU7XG4gICAgICAgIHRoaXMucHJvbW90ZVZhbHVlcyA9XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5vcHRzLnByb21vdGVWYWx1ZXMgPT09ICdib29sZWFuJyA/IHRoaXMub3B0cy5wcm9tb3RlVmFsdWVzIDogdHJ1ZTtcbiAgICAgICAgdGhpcy5wcm9tb3RlQnVmZmVycyA9XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5vcHRzLnByb21vdGVCdWZmZXJzID09PSAnYm9vbGVhbicgPyB0aGlzLm9wdHMucHJvbW90ZUJ1ZmZlcnMgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5ic29uUmVnRXhwID0gdHlwZW9mIHRoaXMub3B0cy5ic29uUmVnRXhwID09PSAnYm9vbGVhbicgPyB0aGlzLm9wdHMuYnNvblJlZ0V4cCA6IGZhbHNlO1xuICAgIH1cbiAgICBpc1BhcnNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkO1xuICAgIH1cbiAgICBwYXJzZShvcHRpb25zKSB7XG4gICAgICAgIC8vIERvbid0IHBhcnNlIGFnYWluIGlmIG5vdCBuZWVkZWRcbiAgICAgICAgaWYgKHRoaXMucGFyc2VkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgLy8gQWxsb3cgdGhlIHJldHVybiBvZiByYXcgZG9jdW1lbnRzIGluc3RlYWQgb2YgcGFyc2luZ1xuICAgICAgICBjb25zdCByYXcgPSBvcHRpb25zLnJhdyB8fCBmYWxzZTtcbiAgICAgICAgY29uc3QgZG9jdW1lbnRzUmV0dXJuZWRJbiA9IG9wdGlvbnMuZG9jdW1lbnRzUmV0dXJuZWRJbiB8fCBudWxsO1xuICAgICAgICBjb25zdCB1c2VCaWdJbnQ2NCA9IG9wdGlvbnMudXNlQmlnSW50NjQgPz8gdGhpcy5vcHRzLnVzZUJpZ0ludDY0O1xuICAgICAgICBjb25zdCBwcm9tb3RlTG9uZ3MgPSBvcHRpb25zLnByb21vdGVMb25ncyA/PyB0aGlzLm9wdHMucHJvbW90ZUxvbmdzO1xuICAgICAgICBjb25zdCBwcm9tb3RlVmFsdWVzID0gb3B0aW9ucy5wcm9tb3RlVmFsdWVzID8/IHRoaXMub3B0cy5wcm9tb3RlVmFsdWVzO1xuICAgICAgICBjb25zdCBwcm9tb3RlQnVmZmVycyA9IG9wdGlvbnMucHJvbW90ZUJ1ZmZlcnMgPz8gdGhpcy5vcHRzLnByb21vdGVCdWZmZXJzO1xuICAgICAgICBjb25zdCBic29uUmVnRXhwID0gb3B0aW9ucy5ic29uUmVnRXhwID8/IHRoaXMub3B0cy5ic29uUmVnRXhwO1xuICAgICAgICBsZXQgYnNvblNpemU7XG4gICAgICAgIC8vIFNldCB1cCB0aGUgb3B0aW9uc1xuICAgICAgICBjb25zdCBfb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHVzZUJpZ0ludDY0LFxuICAgICAgICAgICAgcHJvbW90ZUxvbmdzLFxuICAgICAgICAgICAgcHJvbW90ZVZhbHVlcyxcbiAgICAgICAgICAgIHByb21vdGVCdWZmZXJzLFxuICAgICAgICAgICAgYnNvblJlZ0V4cFxuICAgICAgICB9O1xuICAgICAgICAvLyBQb3NpdGlvbiB3aXRoaW4gT1BfUkVQTFkgYXQgd2hpY2ggZG9jdW1lbnRzIHN0YXJ0XG4gICAgICAgIC8vIChTZWUgaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL21vbmdvZGItd2lyZS1wcm90b2NvbC8jd2lyZS1vcC1yZXBseSlcbiAgICAgICAgdGhpcy5pbmRleCA9IDIwO1xuICAgICAgICAvLyBSZWFkIHRoZSBtZXNzYWdlIGJvZHlcbiAgICAgICAgdGhpcy5yZXNwb25zZUZsYWdzID0gdGhpcy5kYXRhLnJlYWRJbnQzMkxFKDApO1xuICAgICAgICB0aGlzLmN1cnNvcklkID0gbmV3IEJTT04uTG9uZyh0aGlzLmRhdGEucmVhZEludDMyTEUoNCksIHRoaXMuZGF0YS5yZWFkSW50MzJMRSg4KSk7XG4gICAgICAgIHRoaXMuc3RhcnRpbmdGcm9tID0gdGhpcy5kYXRhLnJlYWRJbnQzMkxFKDEyKTtcbiAgICAgICAgdGhpcy5udW1iZXJSZXR1cm5lZCA9IHRoaXMuZGF0YS5yZWFkSW50MzJMRSgxNik7XG4gICAgICAgIC8vIFByZWFsbG9jYXRlIGRvY3VtZW50IGFycmF5XG4gICAgICAgIHRoaXMuZG9jdW1lbnRzID0gbmV3IEFycmF5KHRoaXMubnVtYmVyUmV0dXJuZWQpO1xuICAgICAgICB0aGlzLmN1cnNvck5vdEZvdW5kID0gKHRoaXMucmVzcG9uc2VGbGFncyAmIENVUlNPUl9OT1RfRk9VTkQpICE9PSAwO1xuICAgICAgICB0aGlzLnF1ZXJ5RmFpbHVyZSA9ICh0aGlzLnJlc3BvbnNlRmxhZ3MgJiBRVUVSWV9GQUlMVVJFKSAhPT0gMDtcbiAgICAgICAgdGhpcy5zaGFyZENvbmZpZ1N0YWxlID0gKHRoaXMucmVzcG9uc2VGbGFncyAmIFNIQVJEX0NPTkZJR19TVEFMRSkgIT09IDA7XG4gICAgICAgIHRoaXMuYXdhaXRDYXBhYmxlID0gKHRoaXMucmVzcG9uc2VGbGFncyAmIEFXQUlUX0NBUEFCTEUpICE9PSAwO1xuICAgICAgICAvLyBQYXJzZSBCb2R5XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1iZXJSZXR1cm5lZDsgaSsrKSB7XG4gICAgICAgICAgICBic29uU2l6ZSA9XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW3RoaXMuaW5kZXhdIHxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZGF0YVt0aGlzLmluZGV4ICsgMV0gPDwgOCkgfFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5kYXRhW3RoaXMuaW5kZXggKyAyXSA8PCAxNikgfFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5kYXRhW3RoaXMuaW5kZXggKyAzXSA8PCAyNCk7XG4gICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIHJhdyByZXN1bHRzIHNwZWNpZmllZCBzbGljZSB0aGUgcmV0dXJuIGRvY3VtZW50XG4gICAgICAgICAgICBpZiAocmF3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb2N1bWVudHNbaV0gPSB0aGlzLmRhdGEuc2xpY2UodGhpcy5pbmRleCwgdGhpcy5pbmRleCArIGJzb25TaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRzW2ldID0gQlNPTi5kZXNlcmlhbGl6ZSh0aGlzLmRhdGEuc2xpY2UodGhpcy5pbmRleCwgdGhpcy5pbmRleCArIGJzb25TaXplKSwgX29wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWRqdXN0IHRoZSBpbmRleFxuICAgICAgICAgICAgdGhpcy5pbmRleCA9IHRoaXMuaW5kZXggKyBic29uU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudHMubGVuZ3RoID09PSAxICYmIGRvY3VtZW50c1JldHVybmVkSW4gIT0gbnVsbCAmJiByYXcpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkc0FzUmF3ID0ge307XG4gICAgICAgICAgICBmaWVsZHNBc1Jhd1tkb2N1bWVudHNSZXR1cm5lZEluXSA9IHRydWU7XG4gICAgICAgICAgICBfb3B0aW9ucy5maWVsZHNBc1JhdyA9IGZpZWxkc0FzUmF3O1xuICAgICAgICAgICAgY29uc3QgZG9jID0gQlNPTi5kZXNlcmlhbGl6ZSh0aGlzLmRvY3VtZW50c1swXSwgX29wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5kb2N1bWVudHMgPSBbZG9jXTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgcGFyc2VkXG4gICAgICAgIHRoaXMucGFyc2VkID0gdHJ1ZTtcbiAgICB9XG59XG5leHBvcnRzLlJlc3BvbnNlID0gUmVzcG9uc2U7XG4vLyBJbXBsZW1lbnRhdGlvbiBvZiBPUF9NU0cgc3BlYzpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tb25nb2RiL3NwZWNpZmljYXRpb25zL2Jsb2IvbWFzdGVyL3NvdXJjZS9tZXNzYWdlL09QX01TRy5yc3Rcbi8vXG4vLyBzdHJ1Y3QgU2VjdGlvbiB7XG4vLyAgIHVpbnQ4IHBheWxvYWRUeXBlO1xuLy8gICB1bmlvbiBwYXlsb2FkIHtcbi8vICAgICAgIGRvY3VtZW50ICBkb2N1bWVudDsgLy8gcGF5bG9hZFR5cGUgPT0gMFxuLy8gICAgICAgc3RydWN0IHNlcXVlbmNlIHsgLy8gcGF5bG9hZFR5cGUgPT0gMVxuLy8gICAgICAgICAgIGludDMyICAgICAgc2l6ZTtcbi8vICAgICAgICAgICBjc3RyaW5nICAgIGlkZW50aWZpZXI7XG4vLyAgICAgICAgICAgZG9jdW1lbnQqICBkb2N1bWVudHM7XG4vLyAgICAgICB9O1xuLy8gICB9O1xuLy8gfTtcbi8vIHN0cnVjdCBPUF9NU0cge1xuLy8gICBzdHJ1Y3QgTXNnSGVhZGVyIHtcbi8vICAgICAgIGludDMyICBtZXNzYWdlTGVuZ3RoO1xuLy8gICAgICAgaW50MzIgIHJlcXVlc3RJRDtcbi8vICAgICAgIGludDMyICByZXNwb25zZVRvO1xuLy8gICAgICAgaW50MzIgIG9wQ29kZSA9IDIwMTM7XG4vLyAgIH07XG4vLyAgIHVpbnQzMiAgICAgIGZsYWdCaXRzO1xuLy8gICBTZWN0aW9uKyAgICBzZWN0aW9ucztcbi8vICAgW3VpbnQzMiAgICAgY2hlY2tzdW07XVxuLy8gfTtcbi8vIE1zZyBGbGFnc1xuY29uc3QgT1BUU19DSEVDS1NVTV9QUkVTRU5UID0gMTtcbmNvbnN0IE9QVFNfTU9SRV9UT19DT01FID0gMjtcbmNvbnN0IE9QVFNfRVhIQVVTVF9BTExPV0VEID0gMSA8PCAxNjtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIE1zZyB7XG4gICAgY29uc3RydWN0b3IobnMsIGNvbW1hbmQsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gQmFzaWMgb3B0aW9ucyBuZWVkZWQgdG8gYmUgcGFzc2VkIGluXG4gICAgICAgIGlmIChjb21tYW5kID09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdRdWVyeSBkb2N1bWVudCBtdXN0IGJlIHNwZWNpZmllZCBmb3IgcXVlcnknKTtcbiAgICAgICAgLy8gQmFzaWMgb3B0aW9uc1xuICAgICAgICB0aGlzLm5zID0gbnM7XG4gICAgICAgIHRoaXMuY29tbWFuZCA9IGNvbW1hbmQ7XG4gICAgICAgIHRoaXMuY29tbWFuZC4kZGIgPSAoMCwgdXRpbHNfMS5kYXRhYmFzZU5hbWVzcGFjZSkobnMpO1xuICAgICAgICBpZiAob3B0aW9ucy5yZWFkUHJlZmVyZW5jZSAmJiBvcHRpb25zLnJlYWRQcmVmZXJlbmNlLm1vZGUgIT09IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLlBSSU1BUlkpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZC4kcmVhZFByZWZlcmVuY2UgPSBvcHRpb25zLnJlYWRQcmVmZXJlbmNlLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVuc3VyZSBlbXB0eSBvcHRpb25zXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIC8vIEFkZGl0aW9uYWwgb3B0aW9uc1xuICAgICAgICB0aGlzLnJlcXVlc3RJZCA9IG9wdGlvbnMucmVxdWVzdElkID8gb3B0aW9ucy5yZXF1ZXN0SWQgOiBNc2cuZ2V0UmVxdWVzdElkKCk7XG4gICAgICAgIC8vIFNlcmlhbGl6YXRpb24gb3B0aW9uXG4gICAgICAgIHRoaXMuc2VyaWFsaXplRnVuY3Rpb25zID1cbiAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLnNlcmlhbGl6ZUZ1bmN0aW9ucyA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5zZXJpYWxpemVGdW5jdGlvbnMgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5pZ25vcmVVbmRlZmluZWQgPVxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMuaWdub3JlVW5kZWZpbmVkID09PSAnYm9vbGVhbicgPyBvcHRpb25zLmlnbm9yZVVuZGVmaW5lZCA6IGZhbHNlO1xuICAgICAgICB0aGlzLmNoZWNrS2V5cyA9IHR5cGVvZiBvcHRpb25zLmNoZWNrS2V5cyA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5jaGVja0tleXMgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5tYXhCc29uU2l6ZSA9IG9wdGlvbnMubWF4QnNvblNpemUgfHwgMTAyNCAqIDEwMjQgKiAxNjtcbiAgICAgICAgLy8gZmxhZ3NcbiAgICAgICAgdGhpcy5jaGVja3N1bVByZXNlbnQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tb3JlVG9Db21lID0gb3B0aW9ucy5tb3JlVG9Db21lIHx8IGZhbHNlO1xuICAgICAgICB0aGlzLmV4aGF1c3RBbGxvd2VkID1cbiAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLmV4aGF1c3RBbGxvd2VkID09PSAnYm9vbGVhbicgPyBvcHRpb25zLmV4aGF1c3RBbGxvd2VkIDogZmFsc2U7XG4gICAgfVxuICAgIHRvQmluKCkge1xuICAgICAgICBjb25zdCBidWZmZXJzID0gW107XG4gICAgICAgIGxldCBmbGFncyA9IDA7XG4gICAgICAgIGlmICh0aGlzLmNoZWNrc3VtUHJlc2VudCkge1xuICAgICAgICAgICAgZmxhZ3MgfD0gT1BUU19DSEVDS1NVTV9QUkVTRU5UO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1vcmVUb0NvbWUpIHtcbiAgICAgICAgICAgIGZsYWdzIHw9IE9QVFNfTU9SRV9UT19DT01FO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4aGF1c3RBbGxvd2VkKSB7XG4gICAgICAgICAgICBmbGFncyB8PSBPUFRTX0VYSEFVU1RfQUxMT1dFRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoZWFkZXIgPSBCdWZmZXIuYWxsb2MoNCAqIDQgKyAvLyBIZWFkZXJcbiAgICAgICAgICAgIDQgLy8gRmxhZ3NcbiAgICAgICAgKTtcbiAgICAgICAgYnVmZmVycy5wdXNoKGhlYWRlcik7XG4gICAgICAgIGxldCB0b3RhbExlbmd0aCA9IGhlYWRlci5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSB0aGlzLmNvbW1hbmQ7XG4gICAgICAgIHRvdGFsTGVuZ3RoICs9IHRoaXMubWFrZURvY3VtZW50U2VnbWVudChidWZmZXJzLCBjb21tYW5kKTtcbiAgICAgICAgaGVhZGVyLndyaXRlSW50MzJMRSh0b3RhbExlbmd0aCwgMCk7IC8vIG1lc3NhZ2VMZW5ndGhcbiAgICAgICAgaGVhZGVyLndyaXRlSW50MzJMRSh0aGlzLnJlcXVlc3RJZCwgNCk7IC8vIHJlcXVlc3RJRFxuICAgICAgICBoZWFkZXIud3JpdGVJbnQzMkxFKDAsIDgpOyAvLyByZXNwb25zZVRvXG4gICAgICAgIGhlYWRlci53cml0ZUludDMyTEUoY29uc3RhbnRzXzEuT1BfTVNHLCAxMik7IC8vIG9wQ29kZVxuICAgICAgICBoZWFkZXIud3JpdGVVSW50MzJMRShmbGFncywgMTYpOyAvLyBmbGFnc1xuICAgICAgICByZXR1cm4gYnVmZmVycztcbiAgICB9XG4gICAgbWFrZURvY3VtZW50U2VnbWVudChidWZmZXJzLCBkb2N1bWVudCkge1xuICAgICAgICBjb25zdCBwYXlsb2FkVHlwZUJ1ZmZlciA9IEJ1ZmZlci5hbGxvYygxKTtcbiAgICAgICAgcGF5bG9hZFR5cGVCdWZmZXJbMF0gPSAwO1xuICAgICAgICBjb25zdCBkb2N1bWVudEJ1ZmZlciA9IHRoaXMuc2VyaWFsaXplQnNvbihkb2N1bWVudCk7XG4gICAgICAgIGJ1ZmZlcnMucHVzaChwYXlsb2FkVHlwZUJ1ZmZlcik7XG4gICAgICAgIGJ1ZmZlcnMucHVzaChkb2N1bWVudEJ1ZmZlcik7XG4gICAgICAgIHJldHVybiBwYXlsb2FkVHlwZUJ1ZmZlci5sZW5ndGggKyBkb2N1bWVudEJ1ZmZlci5sZW5ndGg7XG4gICAgfVxuICAgIHNlcmlhbGl6ZUJzb24oZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIEJTT04uc2VyaWFsaXplKGRvY3VtZW50LCB7XG4gICAgICAgICAgICBjaGVja0tleXM6IHRoaXMuY2hlY2tLZXlzLFxuICAgICAgICAgICAgc2VyaWFsaXplRnVuY3Rpb25zOiB0aGlzLnNlcmlhbGl6ZUZ1bmN0aW9ucyxcbiAgICAgICAgICAgIGlnbm9yZVVuZGVmaW5lZDogdGhpcy5pZ25vcmVVbmRlZmluZWRcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRSZXF1ZXN0SWQoKSB7XG4gICAgICAgIF9yZXF1ZXN0SWQgPSAoX3JlcXVlc3RJZCArIDEpICYgMHg3ZmZmZmZmZjtcbiAgICAgICAgcmV0dXJuIF9yZXF1ZXN0SWQ7XG4gICAgfVxufVxuZXhwb3J0cy5Nc2cgPSBNc2c7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBCaW5Nc2cge1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG1zZ0hlYWRlciwgbXNnQm9keSwgb3B0cykge1xuICAgICAgICB0aGlzLnBhcnNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJhdyA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMuZGF0YSA9IG1zZ0JvZHk7XG4gICAgICAgIHRoaXMub3B0cyA9IG9wdHMgPz8ge1xuICAgICAgICAgICAgdXNlQmlnSW50NjQ6IGZhbHNlLFxuICAgICAgICAgICAgcHJvbW90ZUxvbmdzOiB0cnVlLFxuICAgICAgICAgICAgcHJvbW90ZVZhbHVlczogdHJ1ZSxcbiAgICAgICAgICAgIHByb21vdGVCdWZmZXJzOiBmYWxzZSxcbiAgICAgICAgICAgIGJzb25SZWdFeHA6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIC8vIFJlYWQgdGhlIG1lc3NhZ2UgaGVhZGVyXG4gICAgICAgIHRoaXMubGVuZ3RoID0gbXNnSGVhZGVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5yZXF1ZXN0SWQgPSBtc2dIZWFkZXIucmVxdWVzdElkO1xuICAgICAgICB0aGlzLnJlc3BvbnNlVG8gPSBtc2dIZWFkZXIucmVzcG9uc2VUbztcbiAgICAgICAgdGhpcy5vcENvZGUgPSBtc2dIZWFkZXIub3BDb2RlO1xuICAgICAgICB0aGlzLmZyb21Db21wcmVzc2VkID0gbXNnSGVhZGVyLmZyb21Db21wcmVzc2VkO1xuICAgICAgICAvLyBSZWFkIHJlc3BvbnNlIGZsYWdzXG4gICAgICAgIHRoaXMucmVzcG9uc2VGbGFncyA9IG1zZ0JvZHkucmVhZEludDMyTEUoMCk7XG4gICAgICAgIHRoaXMuY2hlY2tzdW1QcmVzZW50ID0gKHRoaXMucmVzcG9uc2VGbGFncyAmIE9QVFNfQ0hFQ0tTVU1fUFJFU0VOVCkgIT09IDA7XG4gICAgICAgIHRoaXMubW9yZVRvQ29tZSA9ICh0aGlzLnJlc3BvbnNlRmxhZ3MgJiBPUFRTX01PUkVfVE9fQ09NRSkgIT09IDA7XG4gICAgICAgIHRoaXMuZXhoYXVzdEFsbG93ZWQgPSAodGhpcy5yZXNwb25zZUZsYWdzICYgT1BUU19FWEhBVVNUX0FMTE9XRUQpICE9PSAwO1xuICAgICAgICB0aGlzLnVzZUJpZ0ludDY0ID0gdHlwZW9mIHRoaXMub3B0cy51c2VCaWdJbnQ2NCA9PT0gJ2Jvb2xlYW4nID8gdGhpcy5vcHRzLnVzZUJpZ0ludDY0IDogZmFsc2U7XG4gICAgICAgIHRoaXMucHJvbW90ZUxvbmdzID0gdHlwZW9mIHRoaXMub3B0cy5wcm9tb3RlTG9uZ3MgPT09ICdib29sZWFuJyA/IHRoaXMub3B0cy5wcm9tb3RlTG9uZ3MgOiB0cnVlO1xuICAgICAgICB0aGlzLnByb21vdGVWYWx1ZXMgPVxuICAgICAgICAgICAgdHlwZW9mIHRoaXMub3B0cy5wcm9tb3RlVmFsdWVzID09PSAnYm9vbGVhbicgPyB0aGlzLm9wdHMucHJvbW90ZVZhbHVlcyA6IHRydWU7XG4gICAgICAgIHRoaXMucHJvbW90ZUJ1ZmZlcnMgPVxuICAgICAgICAgICAgdHlwZW9mIHRoaXMub3B0cy5wcm9tb3RlQnVmZmVycyA9PT0gJ2Jvb2xlYW4nID8gdGhpcy5vcHRzLnByb21vdGVCdWZmZXJzIDogZmFsc2U7XG4gICAgICAgIHRoaXMuYnNvblJlZ0V4cCA9IHR5cGVvZiB0aGlzLm9wdHMuYnNvblJlZ0V4cCA9PT0gJ2Jvb2xlYW4nID8gdGhpcy5vcHRzLmJzb25SZWdFeHAgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5kb2N1bWVudHMgPSBbXTtcbiAgICB9XG4gICAgaXNQYXJzZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlZDtcbiAgICB9XG4gICAgcGFyc2Uob3B0aW9ucykge1xuICAgICAgICAvLyBEb24ndCBwYXJzZSBhZ2FpbiBpZiBub3QgbmVlZGVkXG4gICAgICAgIGlmICh0aGlzLnBhcnNlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHRoaXMuaW5kZXggPSA0O1xuICAgICAgICAvLyBBbGxvdyB0aGUgcmV0dXJuIG9mIHJhdyBkb2N1bWVudHMgaW5zdGVhZCBvZiBwYXJzaW5nXG4gICAgICAgIGNvbnN0IHJhdyA9IG9wdGlvbnMucmF3IHx8IGZhbHNlO1xuICAgICAgICBjb25zdCBkb2N1bWVudHNSZXR1cm5lZEluID0gb3B0aW9ucy5kb2N1bWVudHNSZXR1cm5lZEluIHx8IG51bGw7XG4gICAgICAgIGNvbnN0IHVzZUJpZ0ludDY0ID0gb3B0aW9ucy51c2VCaWdJbnQ2NCA/PyB0aGlzLm9wdHMudXNlQmlnSW50NjQ7XG4gICAgICAgIGNvbnN0IHByb21vdGVMb25ncyA9IG9wdGlvbnMucHJvbW90ZUxvbmdzID8/IHRoaXMub3B0cy5wcm9tb3RlTG9uZ3M7XG4gICAgICAgIGNvbnN0IHByb21vdGVWYWx1ZXMgPSBvcHRpb25zLnByb21vdGVWYWx1ZXMgPz8gdGhpcy5vcHRzLnByb21vdGVWYWx1ZXM7XG4gICAgICAgIGNvbnN0IHByb21vdGVCdWZmZXJzID0gb3B0aW9ucy5wcm9tb3RlQnVmZmVycyA/PyB0aGlzLm9wdHMucHJvbW90ZUJ1ZmZlcnM7XG4gICAgICAgIGNvbnN0IGJzb25SZWdFeHAgPSBvcHRpb25zLmJzb25SZWdFeHAgPz8gdGhpcy5vcHRzLmJzb25SZWdFeHA7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLnBhcnNlQnNvblNlcmlhbGl6YXRpb25PcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICAvLyBTZXQgdXAgdGhlIG9wdGlvbnNcbiAgICAgICAgY29uc3QgYnNvbk9wdGlvbnMgPSB7XG4gICAgICAgICAgICB1c2VCaWdJbnQ2NCxcbiAgICAgICAgICAgIHByb21vdGVMb25ncyxcbiAgICAgICAgICAgIHByb21vdGVWYWx1ZXMsXG4gICAgICAgICAgICBwcm9tb3RlQnVmZmVycyxcbiAgICAgICAgICAgIGJzb25SZWdFeHAsXG4gICAgICAgICAgICB2YWxpZGF0aW9uXG4gICAgICAgICAgICAvLyBEdWUgdG8gdGhlIHN0cmljdG5lc3Mgb2YgdGhlIEJTT04gbGlicmFyaWVzIHZhbGlkYXRpb24gb3B0aW9uIHdlIG5lZWQgdGhpcyBjYXN0XG4gICAgICAgIH07XG4gICAgICAgIHdoaWxlICh0aGlzLmluZGV4IDwgdGhpcy5kYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZFR5cGUgPSB0aGlzLmRhdGEucmVhZFVJbnQ4KHRoaXMuaW5kZXgrKyk7XG4gICAgICAgICAgICBpZiAocGF5bG9hZFR5cGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBic29uU2l6ZSA9IHRoaXMuZGF0YS5yZWFkVUludDMyTEUodGhpcy5pbmRleCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYmluID0gdGhpcy5kYXRhLnNsaWNlKHRoaXMuaW5kZXgsIHRoaXMuaW5kZXggKyBic29uU2l6ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kb2N1bWVudHMucHVzaChyYXcgPyBiaW4gOiBCU09OLmRlc2VyaWFsaXplKGJpbiwgYnNvbk9wdGlvbnMpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4ICs9IGJzb25TaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGF5bG9hZFR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAvLyBJdCB3YXMgZGVjaWRlZCB0aGF0IG5vIGRyaXZlciBtYWtlcyB1c2Ugb2YgcGF5bG9hZCB0eXBlIDFcbiAgICAgICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4Myk6IFJlcGxhY2Ugd2l0aCBNb25nb0RlcHJlY2F0aW9uRXJyb3JcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignT1BfTVNHIFBheWxvYWQgVHlwZSAxIGRldGVjdGVkIHVuc3VwcG9ydGVkIHByb3RvY29sJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRzLmxlbmd0aCA9PT0gMSAmJiBkb2N1bWVudHNSZXR1cm5lZEluICE9IG51bGwgJiYgcmF3KSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZHNBc1JhdyA9IHt9O1xuICAgICAgICAgICAgZmllbGRzQXNSYXdbZG9jdW1lbnRzUmV0dXJuZWRJbl0gPSB0cnVlO1xuICAgICAgICAgICAgYnNvbk9wdGlvbnMuZmllbGRzQXNSYXcgPSBmaWVsZHNBc1JhdztcbiAgICAgICAgICAgIGNvbnN0IGRvYyA9IEJTT04uZGVzZXJpYWxpemUodGhpcy5kb2N1bWVudHNbMF0sIGJzb25PcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRzID0gW2RvY107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWQgPSB0cnVlO1xuICAgIH1cbiAgICBwYXJzZUJzb25TZXJpYWxpemF0aW9uT3B0aW9ucyh7IGVuYWJsZVV0ZjhWYWxpZGF0aW9uIH0pIHtcbiAgICAgICAgaWYgKGVuYWJsZVV0ZjhWYWxpZGF0aW9uID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdXRmODogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB1dGY4OiB7IHdyaXRlRXJyb3JzOiBmYWxzZSB9IH07XG4gICAgfVxufVxuZXhwb3J0cy5CaW5Nc2cgPSBCaW5Nc2c7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tYW5kcy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJCaW5Nc2ciLCJNc2ciLCJSZXNwb25zZSIsIlF1ZXJ5IiwiQlNPTiIsInJlcXVpcmUiLCJlcnJvcl8xIiwicmVhZF9wcmVmZXJlbmNlXzEiLCJ1dGlsc18xIiwiY29uc3RhbnRzXzEiLCJfcmVxdWVzdElkIiwiT1BUU19UQUlMQUJMRV9DVVJTT1IiLCJPUFRTX1NFQ09OREFSWSIsIk9QVFNfT1BMT0dfUkVQTEFZIiwiT1BUU19OT19DVVJTT1JfVElNRU9VVCIsIk9QVFNfQVdBSVRfREFUQSIsIk9QVFNfRVhIQVVTVCIsIk9QVFNfUEFSVElBTCIsIkNVUlNPUl9OT1RfRk9VTkQiLCJRVUVSWV9GQUlMVVJFIiwiU0hBUkRfQ09ORklHX1NUQUxFIiwiQVdBSVRfQ0FQQUJMRSIsImNvbnN0cnVjdG9yIiwibnMiLCJxdWVyeSIsIm9wdGlvbnMiLCJNb25nb1J1bnRpbWVFcnJvciIsImluZGV4T2YiLCJudW1iZXJUb1NraXAiLCJudW1iZXJUb1JldHVybiIsInJldHVybkZpZWxkU2VsZWN0b3IiLCJ1bmRlZmluZWQiLCJyZXF1ZXN0SWQiLCJnZXRSZXF1ZXN0SWQiLCJwcmUzMkxpbWl0Iiwic2VyaWFsaXplRnVuY3Rpb25zIiwiaWdub3JlVW5kZWZpbmVkIiwibWF4QnNvblNpemUiLCJjaGVja0tleXMiLCJiYXRjaFNpemUiLCJ0YWlsYWJsZSIsInNlY29uZGFyeU9rIiwib3Bsb2dSZXBsYXkiLCJub0N1cnNvclRpbWVvdXQiLCJhd2FpdERhdGEiLCJleGhhdXN0IiwicGFydGlhbCIsImluY1JlcXVlc3RJZCIsIm5leHRSZXF1ZXN0SWQiLCJ0b0JpbiIsImJ1ZmZlcnMiLCJwcm9qZWN0aW9uIiwiZmxhZ3MiLCJoZWFkZXIiLCJCdWZmZXIiLCJhbGxvYyIsImJ5dGVMZW5ndGgiLCJwdXNoIiwic2VyaWFsaXplIiwia2V5cyIsImxlbmd0aCIsInRvdGFsTGVuZ3RoIiwiaW5kZXgiLCJPUF9RVUVSWSIsIndyaXRlIiwibWVzc2FnZSIsIm1zZ0hlYWRlciIsIm1zZ0JvZHkiLCJvcHRzIiwiZG9jdW1lbnRzIiwiQXJyYXkiLCJwYXJzZWQiLCJyYXciLCJkYXRhIiwidXNlQmlnSW50NjQiLCJwcm9tb3RlTG9uZ3MiLCJwcm9tb3RlVmFsdWVzIiwicHJvbW90ZUJ1ZmZlcnMiLCJic29uUmVnRXhwIiwicmVzcG9uc2VUbyIsIm9wQ29kZSIsImZyb21Db21wcmVzc2VkIiwiaXNQYXJzZWQiLCJwYXJzZSIsImRvY3VtZW50c1JldHVybmVkSW4iLCJic29uU2l6ZSIsIl9vcHRpb25zIiwicmVzcG9uc2VGbGFncyIsInJlYWRJbnQzMkxFIiwiY3Vyc29ySWQiLCJMb25nIiwic3RhcnRpbmdGcm9tIiwibnVtYmVyUmV0dXJuZWQiLCJjdXJzb3JOb3RGb3VuZCIsInF1ZXJ5RmFpbHVyZSIsInNoYXJkQ29uZmlnU3RhbGUiLCJhd2FpdENhcGFibGUiLCJpIiwic2xpY2UiLCJkZXNlcmlhbGl6ZSIsImZpZWxkc0FzUmF3IiwiZG9jIiwiT1BUU19DSEVDS1NVTV9QUkVTRU5UIiwiT1BUU19NT1JFX1RPX0NPTUUiLCJPUFRTX0VYSEFVU1RfQUxMT1dFRCIsImNvbW1hbmQiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiJGRiIiwiZGF0YWJhc2VOYW1lc3BhY2UiLCJyZWFkUHJlZmVyZW5jZSIsIm1vZGUiLCJSZWFkUHJlZmVyZW5jZSIsIlBSSU1BUlkiLCIkcmVhZFByZWZlcmVuY2UiLCJ0b0pTT04iLCJjaGVja3N1bVByZXNlbnQiLCJtb3JlVG9Db21lIiwiZXhoYXVzdEFsbG93ZWQiLCJtYWtlRG9jdW1lbnRTZWdtZW50Iiwid3JpdGVJbnQzMkxFIiwiT1BfTVNHIiwid3JpdGVVSW50MzJMRSIsImRvY3VtZW50IiwicGF5bG9hZFR5cGVCdWZmZXIiLCJkb2N1bWVudEJ1ZmZlciIsInNlcmlhbGl6ZUJzb24iLCJ2YWxpZGF0aW9uIiwicGFyc2VCc29uU2VyaWFsaXphdGlvbk9wdGlvbnMiLCJic29uT3B0aW9ucyIsInBheWxvYWRUeXBlIiwicmVhZFVJbnQ4IiwicmVhZFVJbnQzMkxFIiwiYmluIiwiZW5hYmxlVXRmOFZhbGlkYXRpb24iLCJ1dGY4Iiwid3JpdGVFcnJvcnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/commands.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/connect.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/connect.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.LEGAL_TCP_SOCKET_OPTIONS = exports.LEGAL_TLS_SOCKET_OPTIONS = exports.prepareHandshakeDocument = exports.connect = exports.AUTH_PROVIDERS = void 0;\nconst net = __webpack_require__(/*! net */ \"net\");\nconst socks_1 = __webpack_require__(/*! socks */ \"(ssr)/./node_modules/socks/build/index.js\");\nconst tls = __webpack_require__(/*! tls */ \"tls\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth/auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\nconst gssapi_1 = __webpack_require__(/*! ./auth/gssapi */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/gssapi.js\");\nconst mongocr_1 = __webpack_require__(/*! ./auth/mongocr */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongocr.js\");\nconst mongodb_aws_1 = __webpack_require__(/*! ./auth/mongodb_aws */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_aws.js\");\nconst mongodb_oidc_1 = __webpack_require__(/*! ./auth/mongodb_oidc */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc.js\");\nconst plain_1 = __webpack_require__(/*! ./auth/plain */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/plain.js\");\nconst providers_1 = __webpack_require__(/*! ./auth/providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\nconst scram_1 = __webpack_require__(/*! ./auth/scram */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/scram.js\");\nconst x509_1 = __webpack_require__(/*! ./auth/x509 */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/x509.js\");\nconst connection_1 = __webpack_require__(/*! ./connection */ \"(ssr)/./node_modules/mongodb/lib/cmap/connection.js\");\nconst constants_2 = __webpack_require__(/*! ./wire_protocol/constants */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js\");\n/** @internal */ exports.AUTH_PROVIDERS = new Map([\n    [\n        providers_1.AuthMechanism.MONGODB_AWS,\n        new mongodb_aws_1.MongoDBAWS()\n    ],\n    [\n        providers_1.AuthMechanism.MONGODB_CR,\n        new mongocr_1.MongoCR()\n    ],\n    [\n        providers_1.AuthMechanism.MONGODB_GSSAPI,\n        new gssapi_1.GSSAPI()\n    ],\n    [\n        providers_1.AuthMechanism.MONGODB_OIDC,\n        new mongodb_oidc_1.MongoDBOIDC()\n    ],\n    [\n        providers_1.AuthMechanism.MONGODB_PLAIN,\n        new plain_1.Plain()\n    ],\n    [\n        providers_1.AuthMechanism.MONGODB_SCRAM_SHA1,\n        new scram_1.ScramSHA1()\n    ],\n    [\n        providers_1.AuthMechanism.MONGODB_SCRAM_SHA256,\n        new scram_1.ScramSHA256()\n    ],\n    [\n        providers_1.AuthMechanism.MONGODB_X509,\n        new x509_1.X509()\n    ]\n]);\nfunction connect(options, callback) {\n    makeConnection({\n        ...options,\n        existingSocket: undefined\n    }, (err, socket)=>{\n        if (err || !socket) {\n            return callback(err);\n        }\n        let ConnectionType = options.connectionType ?? connection_1.Connection;\n        if (options.autoEncrypter) {\n            ConnectionType = connection_1.CryptoConnection;\n        }\n        const connection = new ConnectionType(socket, options);\n        performInitialHandshake(connection, options).then(()=>callback(undefined, connection), (error)=>{\n            connection.destroy({\n                force: false\n            });\n            callback(error);\n        });\n    });\n}\nexports.connect = connect;\nfunction checkSupportedServer(hello, options) {\n    const maxWireVersion = Number(hello.maxWireVersion);\n    const minWireVersion = Number(hello.minWireVersion);\n    const serverVersionHighEnough = !Number.isNaN(maxWireVersion) && maxWireVersion >= constants_2.MIN_SUPPORTED_WIRE_VERSION;\n    const serverVersionLowEnough = !Number.isNaN(minWireVersion) && minWireVersion <= constants_2.MAX_SUPPORTED_WIRE_VERSION;\n    if (serverVersionHighEnough) {\n        if (serverVersionLowEnough) {\n            return null;\n        }\n        const message = `Server at ${options.hostAddress} reports minimum wire version ${JSON.stringify(hello.minWireVersion)}, but this version of the Node.js Driver requires at most ${constants_2.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${constants_2.MAX_SUPPORTED_SERVER_VERSION})`;\n        return new error_1.MongoCompatibilityError(message);\n    }\n    const message = `Server at ${options.hostAddress} reports maximum wire version ${JSON.stringify(hello.maxWireVersion) ?? 0}, but this version of the Node.js Driver requires at least ${constants_2.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${constants_2.MIN_SUPPORTED_SERVER_VERSION})`;\n    return new error_1.MongoCompatibilityError(message);\n}\nasync function performInitialHandshake(conn, options) {\n    const credentials = options.credentials;\n    if (credentials) {\n        if (!(credentials.mechanism === providers_1.AuthMechanism.MONGODB_DEFAULT) && !exports.AUTH_PROVIDERS.get(credentials.mechanism)) {\n            throw new error_1.MongoInvalidArgumentError(`AuthMechanism '${credentials.mechanism}' not supported`);\n        }\n    }\n    const authContext = new auth_provider_1.AuthContext(conn, credentials, options);\n    conn.authContext = authContext;\n    const handshakeDoc = await prepareHandshakeDocument(authContext);\n    // @ts-expect-error: TODO(NODE-5141): The options need to be filtered properly, Connection options differ from Command options\n    const handshakeOptions = {\n        ...options\n    };\n    if (typeof options.connectTimeoutMS === \"number\") {\n        // The handshake technically is a monitoring check, so its socket timeout should be connectTimeoutMS\n        handshakeOptions.socketTimeoutMS = options.connectTimeoutMS;\n    }\n    const start = new Date().getTime();\n    const response = await conn.commandAsync((0, utils_1.ns)(\"admin.$cmd\"), handshakeDoc, handshakeOptions);\n    if (!(\"isWritablePrimary\" in response)) {\n        // Provide hello-style response document.\n        response.isWritablePrimary = response[constants_1.LEGACY_HELLO_COMMAND];\n    }\n    if (response.helloOk) {\n        conn.helloOk = true;\n    }\n    const supportedServerErr = checkSupportedServer(response, options);\n    if (supportedServerErr) {\n        throw supportedServerErr;\n    }\n    if (options.loadBalanced) {\n        if (!response.serviceId) {\n            throw new error_1.MongoCompatibilityError(\"Driver attempted to initialize in load balancing mode, \" + \"but the server does not support this mode.\");\n        }\n    }\n    // NOTE: This is metadata attached to the connection while porting away from\n    //       handshake being done in the `Server` class. Likely, it should be\n    //       relocated, or at very least restructured.\n    conn.hello = response;\n    conn.lastHelloMS = new Date().getTime() - start;\n    if (!response.arbiterOnly && credentials) {\n        // store the response on auth context\n        authContext.response = response;\n        const resolvedCredentials = credentials.resolveAuthMechanism(response);\n        const provider = exports.AUTH_PROVIDERS.get(resolvedCredentials.mechanism);\n        if (!provider) {\n            throw new error_1.MongoInvalidArgumentError(`No AuthProvider for ${resolvedCredentials.mechanism} defined.`);\n        }\n        try {\n            await provider.auth(authContext);\n        } catch (error) {\n            if (error instanceof error_1.MongoError) {\n                error.addErrorLabel(error_1.MongoErrorLabel.HandshakeError);\n                if ((0, error_1.needsRetryableWriteLabel)(error, response.maxWireVersion)) {\n                    error.addErrorLabel(error_1.MongoErrorLabel.RetryableWriteError);\n                }\n            }\n            throw error;\n        }\n    }\n}\n/**\n * @internal\n *\n * This function is only exposed for testing purposes.\n */ async function prepareHandshakeDocument(authContext) {\n    const options = authContext.options;\n    const compressors = options.compressors ? options.compressors : [];\n    const { serverApi } = authContext.connection;\n    const handshakeDoc = {\n        [serverApi?.version ? \"hello\" : constants_1.LEGACY_HELLO_COMMAND]: 1,\n        helloOk: true,\n        client: options.metadata,\n        compression: compressors\n    };\n    if (options.loadBalanced === true) {\n        handshakeDoc.loadBalanced = true;\n    }\n    const credentials = authContext.credentials;\n    if (credentials) {\n        if (credentials.mechanism === providers_1.AuthMechanism.MONGODB_DEFAULT && credentials.username) {\n            handshakeDoc.saslSupportedMechs = `${credentials.source}.${credentials.username}`;\n            const provider = exports.AUTH_PROVIDERS.get(providers_1.AuthMechanism.MONGODB_SCRAM_SHA256);\n            if (!provider) {\n                // This auth mechanism is always present.\n                throw new error_1.MongoInvalidArgumentError(`No AuthProvider for ${providers_1.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);\n            }\n            return provider.prepare(handshakeDoc, authContext);\n        }\n        const provider = exports.AUTH_PROVIDERS.get(credentials.mechanism);\n        if (!provider) {\n            throw new error_1.MongoInvalidArgumentError(`No AuthProvider for ${credentials.mechanism} defined.`);\n        }\n        return provider.prepare(handshakeDoc, authContext);\n    }\n    return handshakeDoc;\n}\nexports.prepareHandshakeDocument = prepareHandshakeDocument;\n/** @public */ exports.LEGAL_TLS_SOCKET_OPTIONS = [\n    \"ALPNProtocols\",\n    \"ca\",\n    \"cert\",\n    \"checkServerIdentity\",\n    \"ciphers\",\n    \"crl\",\n    \"ecdhCurve\",\n    \"key\",\n    \"minDHSize\",\n    \"passphrase\",\n    \"pfx\",\n    \"rejectUnauthorized\",\n    \"secureContext\",\n    \"secureProtocol\",\n    \"servername\",\n    \"session\"\n];\n/** @public */ exports.LEGAL_TCP_SOCKET_OPTIONS = [\n    \"family\",\n    \"hints\",\n    \"localAddress\",\n    \"localPort\",\n    \"lookup\"\n];\nfunction parseConnectOptions(options) {\n    const hostAddress = options.hostAddress;\n    if (!hostAddress) throw new error_1.MongoInvalidArgumentError('Option \"hostAddress\" is required');\n    const result = {};\n    for (const name of exports.LEGAL_TCP_SOCKET_OPTIONS){\n        if (options[name] != null) {\n            result[name] = options[name];\n        }\n    }\n    if (typeof hostAddress.socketPath === \"string\") {\n        result.path = hostAddress.socketPath;\n        return result;\n    } else if (typeof hostAddress.host === \"string\") {\n        result.host = hostAddress.host;\n        result.port = hostAddress.port;\n        return result;\n    } else {\n        // This should never happen since we set up HostAddresses\n        // But if we don't throw here the socket could hang until timeout\n        // TODO(NODE-3483)\n        throw new error_1.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(hostAddress)}`);\n    }\n}\nfunction parseSslOptions(options) {\n    const result = parseConnectOptions(options);\n    // Merge in valid SSL options\n    for (const name of exports.LEGAL_TLS_SOCKET_OPTIONS){\n        if (options[name] != null) {\n            result[name] = options[name];\n        }\n    }\n    if (options.existingSocket) {\n        result.socket = options.existingSocket;\n    }\n    // Set default sni servername to be the same as host\n    if (result.servername == null && result.host && !net.isIP(result.host)) {\n        result.servername = result.host;\n    }\n    return result;\n}\nconst SOCKET_ERROR_EVENT_LIST = [\n    \"error\",\n    \"close\",\n    \"timeout\",\n    \"parseError\"\n];\nconst SOCKET_ERROR_EVENTS = new Set(SOCKET_ERROR_EVENT_LIST);\nfunction makeConnection(options, _callback) {\n    const useTLS = options.tls ?? false;\n    const keepAlive = options.keepAlive ?? true;\n    const socketTimeoutMS = options.socketTimeoutMS ?? Reflect.get(options, \"socketTimeout\") ?? 0;\n    const noDelay = options.noDelay ?? true;\n    const connectTimeoutMS = options.connectTimeoutMS ?? 30000;\n    const rejectUnauthorized = options.rejectUnauthorized ?? true;\n    const keepAliveInitialDelay = ((options.keepAliveInitialDelay ?? 120000) > socketTimeoutMS ? Math.round(socketTimeoutMS / 2) : options.keepAliveInitialDelay) ?? 120000;\n    const existingSocket = options.existingSocket;\n    let socket;\n    const callback = function(err, ret) {\n        if (err && socket) {\n            socket.destroy();\n        }\n        _callback(err, ret);\n    };\n    if (options.proxyHost != null) {\n        // Currently, only Socks5 is supported.\n        return makeSocks5Connection({\n            ...options,\n            connectTimeoutMS\n        }, callback);\n    }\n    if (useTLS) {\n        const tlsSocket = tls.connect(parseSslOptions(options));\n        if (typeof tlsSocket.disableRenegotiation === \"function\") {\n            tlsSocket.disableRenegotiation();\n        }\n        socket = tlsSocket;\n    } else if (existingSocket) {\n        // In the TLS case, parseSslOptions() sets options.socket to existingSocket,\n        // so we only need to handle the non-TLS case here (where existingSocket\n        // gives us all we need out of the box).\n        socket = existingSocket;\n    } else {\n        socket = net.createConnection(parseConnectOptions(options));\n    }\n    socket.setKeepAlive(keepAlive, keepAliveInitialDelay);\n    socket.setTimeout(connectTimeoutMS);\n    socket.setNoDelay(noDelay);\n    const connectEvent = useTLS ? \"secureConnect\" : \"connect\";\n    let cancellationHandler;\n    function errorHandler(eventName) {\n        return (err)=>{\n            SOCKET_ERROR_EVENTS.forEach((event)=>socket.removeAllListeners(event));\n            if (cancellationHandler && options.cancellationToken) {\n                options.cancellationToken.removeListener(\"cancel\", cancellationHandler);\n            }\n            socket.removeListener(connectEvent, connectHandler);\n            callback(connectionFailureError(eventName, err));\n        };\n    }\n    function connectHandler() {\n        SOCKET_ERROR_EVENTS.forEach((event)=>socket.removeAllListeners(event));\n        if (cancellationHandler && options.cancellationToken) {\n            options.cancellationToken.removeListener(\"cancel\", cancellationHandler);\n        }\n        if (\"authorizationError\" in socket) {\n            if (socket.authorizationError && rejectUnauthorized) {\n                // TODO(NODE-5192): wrap this with a MongoError subclass\n                return callback(socket.authorizationError);\n            }\n        }\n        socket.setTimeout(0);\n        callback(undefined, socket);\n    }\n    SOCKET_ERROR_EVENTS.forEach((event)=>socket.once(event, errorHandler(event)));\n    if (options.cancellationToken) {\n        cancellationHandler = errorHandler(\"cancel\");\n        options.cancellationToken.once(\"cancel\", cancellationHandler);\n    }\n    if (existingSocket) {\n        process.nextTick(connectHandler);\n    } else {\n        socket.once(connectEvent, connectHandler);\n    }\n}\nfunction makeSocks5Connection(options, callback) {\n    const hostAddress = utils_1.HostAddress.fromHostPort(options.proxyHost ?? \"\", options.proxyPort ?? 1080);\n    // First, connect to the proxy server itself:\n    makeConnection({\n        ...options,\n        hostAddress,\n        tls: false,\n        proxyHost: undefined\n    }, (err, rawSocket)=>{\n        if (err) {\n            return callback(err);\n        }\n        const destination = parseConnectOptions(options);\n        if (typeof destination.host !== \"string\" || typeof destination.port !== \"number\") {\n            return callback(new error_1.MongoInvalidArgumentError(\"Can only make Socks5 connections to TCP hosts\"));\n        }\n        // Then, establish the Socks5 proxy connection:\n        socks_1.SocksClient.createConnection({\n            existing_socket: rawSocket,\n            timeout: options.connectTimeoutMS,\n            command: \"connect\",\n            destination: {\n                host: destination.host,\n                port: destination.port\n            },\n            proxy: {\n                // host and port are ignored because we pass existing_socket\n                host: \"iLoveJavaScript\",\n                port: 0,\n                type: 5,\n                userId: options.proxyUsername || undefined,\n                password: options.proxyPassword || undefined\n            }\n        }).then(({ socket })=>{\n            // Finally, now treat the resulting duplex stream as the\n            // socket over which we send and receive wire protocol messages:\n            makeConnection({\n                ...options,\n                existingSocket: socket,\n                proxyHost: undefined\n            }, callback);\n        }, (error)=>callback(connectionFailureError(\"error\", error)));\n    });\n}\nfunction connectionFailureError(type, err) {\n    switch(type){\n        case \"error\":\n            return new error_1.MongoNetworkError(err);\n        case \"timeout\":\n            return new error_1.MongoNetworkTimeoutError(\"connection timed out\");\n        case \"close\":\n            return new error_1.MongoNetworkError(\"connection closed\");\n        case \"cancel\":\n            return new error_1.MongoNetworkError(\"connection establishment was cancelled\");\n        default:\n            return new error_1.MongoNetworkError(\"unknown network error\");\n    }\n} //# sourceMappingURL=connect.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb25uZWN0LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxnQ0FBZ0MsR0FBR0EsZ0NBQWdDLEdBQUdBLGdDQUFnQyxHQUFHQSxlQUFlLEdBQUdBLHNCQUFzQixHQUFHLEtBQUs7QUFDekosTUFBTU8sTUFBTUMsbUJBQU9BLENBQUMsZ0JBQUs7QUFDekIsTUFBTUMsVUFBVUQsbUJBQU9BLENBQUMsd0RBQU87QUFDL0IsTUFBTUUsTUFBTUYsbUJBQU9BLENBQUMsZ0JBQUs7QUFDekIsTUFBTUcsY0FBY0gsbUJBQU9BLENBQUMsbUVBQWM7QUFDMUMsTUFBTUksVUFBVUosbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUssVUFBVUwsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTU0sa0JBQWtCTixtQkFBT0EsQ0FBQyx5RkFBc0I7QUFDdEQsTUFBTU8sV0FBV1AsbUJBQU9BLENBQUMsMkVBQWU7QUFDeEMsTUFBTVEsWUFBWVIsbUJBQU9BLENBQUMsNkVBQWdCO0FBQzFDLE1BQU1TLGdCQUFnQlQsbUJBQU9BLENBQUMscUZBQW9CO0FBQ2xELE1BQU1VLGlCQUFpQlYsbUJBQU9BLENBQUMsdUZBQXFCO0FBQ3BELE1BQU1XLFVBQVVYLG1CQUFPQSxDQUFDLHlFQUFjO0FBQ3RDLE1BQU1ZLGNBQWNaLG1CQUFPQSxDQUFDLGlGQUFrQjtBQUM5QyxNQUFNYSxVQUFVYixtQkFBT0EsQ0FBQyx5RUFBYztBQUN0QyxNQUFNYyxTQUFTZCxtQkFBT0EsQ0FBQyx1RUFBYTtBQUNwQyxNQUFNZSxlQUFlZixtQkFBT0EsQ0FBQyx5RUFBYztBQUMzQyxNQUFNZ0IsY0FBY2hCLG1CQUFPQSxDQUFDLG1HQUEyQjtBQUN2RCxjQUFjLEdBQ2RSLHNCQUFzQixHQUFHLElBQUl5QixJQUFJO0lBQzdCO1FBQUNMLFlBQVlNLGFBQWEsQ0FBQ0MsV0FB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SUFDN0M7QUFDSixFQUNBLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2Nvbm5lY3QuanM/NzM0MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTEVHQUxfVENQX1NPQ0tFVF9PUFRJT05TID0gZXhwb3J0cy5MRUdBTF9UTFNfU09DS0VUX09QVElPTlMgPSBleHBvcnRzLnByZXBhcmVIYW5kc2hha2VEb2N1bWVudCA9IGV4cG9ydHMuY29ubmVjdCA9IGV4cG9ydHMuQVVUSF9QUk9WSURFUlMgPSB2b2lkIDA7XG5jb25zdCBuZXQgPSByZXF1aXJlKFwibmV0XCIpO1xuY29uc3Qgc29ja3NfMSA9IHJlcXVpcmUoXCJzb2Nrc1wiKTtcbmNvbnN0IHRscyA9IHJlcXVpcmUoXCJ0bHNcIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IGF1dGhfcHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuL2F1dGgvYXV0aF9wcm92aWRlclwiKTtcbmNvbnN0IGdzc2FwaV8xID0gcmVxdWlyZShcIi4vYXV0aC9nc3NhcGlcIik7XG5jb25zdCBtb25nb2NyXzEgPSByZXF1aXJlKFwiLi9hdXRoL21vbmdvY3JcIik7XG5jb25zdCBtb25nb2RiX2F3c18xID0gcmVxdWlyZShcIi4vYXV0aC9tb25nb2RiX2F3c1wiKTtcbmNvbnN0IG1vbmdvZGJfb2lkY18xID0gcmVxdWlyZShcIi4vYXV0aC9tb25nb2RiX29pZGNcIik7XG5jb25zdCBwbGFpbl8xID0gcmVxdWlyZShcIi4vYXV0aC9wbGFpblwiKTtcbmNvbnN0IHByb3ZpZGVyc18xID0gcmVxdWlyZShcIi4vYXV0aC9wcm92aWRlcnNcIik7XG5jb25zdCBzY3JhbV8xID0gcmVxdWlyZShcIi4vYXV0aC9zY3JhbVwiKTtcbmNvbnN0IHg1MDlfMSA9IHJlcXVpcmUoXCIuL2F1dGgveDUwOVwiKTtcbmNvbnN0IGNvbm5lY3Rpb25fMSA9IHJlcXVpcmUoXCIuL2Nvbm5lY3Rpb25cIik7XG5jb25zdCBjb25zdGFudHNfMiA9IHJlcXVpcmUoXCIuL3dpcmVfcHJvdG9jb2wvY29uc3RhbnRzXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5BVVRIX1BST1ZJREVSUyA9IG5ldyBNYXAoW1xuICAgIFtwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfQVdTLCBuZXcgbW9uZ29kYl9hd3NfMS5Nb25nb0RCQVdTKCldLFxuICAgIFtwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfQ1IsIG5ldyBtb25nb2NyXzEuTW9uZ29DUigpXSxcbiAgICBbcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX0dTU0FQSSwgbmV3IGdzc2FwaV8xLkdTU0FQSSgpXSxcbiAgICBbcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX09JREMsIG5ldyBtb25nb2RiX29pZGNfMS5Nb25nb0RCT0lEQygpXSxcbiAgICBbcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX1BMQUlOLCBuZXcgcGxhaW5fMS5QbGFpbigpXSxcbiAgICBbcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX1NDUkFNX1NIQTEsIG5ldyBzY3JhbV8xLlNjcmFtU0hBMSgpXSxcbiAgICBbcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX1NDUkFNX1NIQTI1NiwgbmV3IHNjcmFtXzEuU2NyYW1TSEEyNTYoKV0sXG4gICAgW3Byb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9YNTA5LCBuZXcgeDUwOV8xLlg1MDkoKV1cbl0pO1xuZnVuY3Rpb24gY29ubmVjdChvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIG1ha2VDb25uZWN0aW9uKHsgLi4ub3B0aW9ucywgZXhpc3RpbmdTb2NrZXQ6IHVuZGVmaW5lZCB9LCAoZXJyLCBzb2NrZXQpID0+IHtcbiAgICAgICAgaWYgKGVyciB8fCAhc29ja2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgQ29ubmVjdGlvblR5cGUgPSBvcHRpb25zLmNvbm5lY3Rpb25UeXBlID8/IGNvbm5lY3Rpb25fMS5Db25uZWN0aW9uO1xuICAgICAgICBpZiAob3B0aW9ucy5hdXRvRW5jcnlwdGVyKSB7XG4gICAgICAgICAgICBDb25uZWN0aW9uVHlwZSA9IGNvbm5lY3Rpb25fMS5DcnlwdG9Db25uZWN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBuZXcgQ29ubmVjdGlvblR5cGUoc29ja2V0LCBvcHRpb25zKTtcbiAgICAgICAgcGVyZm9ybUluaXRpYWxIYW5kc2hha2UoY29ubmVjdGlvbiwgb3B0aW9ucykudGhlbigoKSA9PiBjYWxsYmFjayh1bmRlZmluZWQsIGNvbm5lY3Rpb24pLCBlcnJvciA9PiB7XG4gICAgICAgICAgICBjb25uZWN0aW9uLmRlc3Ryb3koeyBmb3JjZTogZmFsc2UgfSk7XG4gICAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0cy5jb25uZWN0ID0gY29ubmVjdDtcbmZ1bmN0aW9uIGNoZWNrU3VwcG9ydGVkU2VydmVyKGhlbGxvLCBvcHRpb25zKSB7XG4gICAgY29uc3QgbWF4V2lyZVZlcnNpb24gPSBOdW1iZXIoaGVsbG8ubWF4V2lyZVZlcnNpb24pO1xuICAgIGNvbnN0IG1pbldpcmVWZXJzaW9uID0gTnVtYmVyKGhlbGxvLm1pbldpcmVWZXJzaW9uKTtcbiAgICBjb25zdCBzZXJ2ZXJWZXJzaW9uSGlnaEVub3VnaCA9ICFOdW1iZXIuaXNOYU4obWF4V2lyZVZlcnNpb24pICYmIG1heFdpcmVWZXJzaW9uID49IGNvbnN0YW50c18yLk1JTl9TVVBQT1JURURfV0lSRV9WRVJTSU9OO1xuICAgIGNvbnN0IHNlcnZlclZlcnNpb25Mb3dFbm91Z2ggPSAhTnVtYmVyLmlzTmFOKG1pbldpcmVWZXJzaW9uKSAmJiBtaW5XaXJlVmVyc2lvbiA8PSBjb25zdGFudHNfMi5NQVhfU1VQUE9SVEVEX1dJUkVfVkVSU0lPTjtcbiAgICBpZiAoc2VydmVyVmVyc2lvbkhpZ2hFbm91Z2gpIHtcbiAgICAgICAgaWYgKHNlcnZlclZlcnNpb25Mb3dFbm91Z2gpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgU2VydmVyIGF0ICR7b3B0aW9ucy5ob3N0QWRkcmVzc30gcmVwb3J0cyBtaW5pbXVtIHdpcmUgdmVyc2lvbiAke0pTT04uc3RyaW5naWZ5KGhlbGxvLm1pbldpcmVWZXJzaW9uKX0sIGJ1dCB0aGlzIHZlcnNpb24gb2YgdGhlIE5vZGUuanMgRHJpdmVyIHJlcXVpcmVzIGF0IG1vc3QgJHtjb25zdGFudHNfMi5NQVhfU1VQUE9SVEVEX1dJUkVfVkVSU0lPTn0gKE1vbmdvREIgJHtjb25zdGFudHNfMi5NQVhfU1VQUE9SVEVEX1NFUlZFUl9WRVJTSU9OfSlgO1xuICAgICAgICByZXR1cm4gbmV3IGVycm9yXzEuTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBgU2VydmVyIGF0ICR7b3B0aW9ucy5ob3N0QWRkcmVzc30gcmVwb3J0cyBtYXhpbXVtIHdpcmUgdmVyc2lvbiAke0pTT04uc3RyaW5naWZ5KGhlbGxvLm1heFdpcmVWZXJzaW9uKSA/PyAwfSwgYnV0IHRoaXMgdmVyc2lvbiBvZiB0aGUgTm9kZS5qcyBEcml2ZXIgcmVxdWlyZXMgYXQgbGVhc3QgJHtjb25zdGFudHNfMi5NSU5fU1VQUE9SVEVEX1dJUkVfVkVSU0lPTn0gKE1vbmdvREIgJHtjb25zdGFudHNfMi5NSU5fU1VQUE9SVEVEX1NFUlZFUl9WRVJTSU9OfSlgO1xuICAgIHJldHVybiBuZXcgZXJyb3JfMS5Nb25nb0NvbXBhdGliaWxpdHlFcnJvcihtZXNzYWdlKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHBlcmZvcm1Jbml0aWFsSGFuZHNoYWtlKGNvbm4sIG9wdGlvbnMpIHtcbiAgICBjb25zdCBjcmVkZW50aWFscyA9IG9wdGlvbnMuY3JlZGVudGlhbHM7XG4gICAgaWYgKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGlmICghKGNyZWRlbnRpYWxzLm1lY2hhbmlzbSA9PT0gcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX0RFRkFVTFQpICYmXG4gICAgICAgICAgICAhZXhwb3J0cy5BVVRIX1BST1ZJREVSUy5nZXQoY3JlZGVudGlhbHMubWVjaGFuaXNtKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgQXV0aE1lY2hhbmlzbSAnJHtjcmVkZW50aWFscy5tZWNoYW5pc219JyBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYXV0aENvbnRleHQgPSBuZXcgYXV0aF9wcm92aWRlcl8xLkF1dGhDb250ZXh0KGNvbm4sIGNyZWRlbnRpYWxzLCBvcHRpb25zKTtcbiAgICBjb25uLmF1dGhDb250ZXh0ID0gYXV0aENvbnRleHQ7XG4gICAgY29uc3QgaGFuZHNoYWtlRG9jID0gYXdhaXQgcHJlcGFyZUhhbmRzaGFrZURvY3VtZW50KGF1dGhDb250ZXh0KTtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBUT0RPKE5PREUtNTE0MSk6IFRoZSBvcHRpb25zIG5lZWQgdG8gYmUgZmlsdGVyZWQgcHJvcGVybHksIENvbm5lY3Rpb24gb3B0aW9ucyBkaWZmZXIgZnJvbSBDb21tYW5kIG9wdGlvbnNcbiAgICBjb25zdCBoYW5kc2hha2VPcHRpb25zID0geyAuLi5vcHRpb25zIH07XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmNvbm5lY3RUaW1lb3V0TVMgPT09ICdudW1iZXInKSB7XG4gICAgICAgIC8vIFRoZSBoYW5kc2hha2UgdGVjaG5pY2FsbHkgaXMgYSBtb25pdG9yaW5nIGNoZWNrLCBzbyBpdHMgc29ja2V0IHRpbWVvdXQgc2hvdWxkIGJlIGNvbm5lY3RUaW1lb3V0TVNcbiAgICAgICAgaGFuZHNoYWtlT3B0aW9ucy5zb2NrZXRUaW1lb3V0TVMgPSBvcHRpb25zLmNvbm5lY3RUaW1lb3V0TVM7XG4gICAgfVxuICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjb25uLmNvbW1hbmRBc3luYygoMCwgdXRpbHNfMS5ucykoJ2FkbWluLiRjbWQnKSwgaGFuZHNoYWtlRG9jLCBoYW5kc2hha2VPcHRpb25zKTtcbiAgICBpZiAoISgnaXNXcml0YWJsZVByaW1hcnknIGluIHJlc3BvbnNlKSkge1xuICAgICAgICAvLyBQcm92aWRlIGhlbGxvLXN0eWxlIHJlc3BvbnNlIGRvY3VtZW50LlxuICAgICAgICByZXNwb25zZS5pc1dyaXRhYmxlUHJpbWFyeSA9IHJlc3BvbnNlW2NvbnN0YW50c18xLkxFR0FDWV9IRUxMT19DT01NQU5EXTtcbiAgICB9XG4gICAgaWYgKHJlc3BvbnNlLmhlbGxvT2spIHtcbiAgICAgICAgY29ubi5oZWxsb09rID0gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydGVkU2VydmVyRXJyID0gY2hlY2tTdXBwb3J0ZWRTZXJ2ZXIocmVzcG9uc2UsIG9wdGlvbnMpO1xuICAgIGlmIChzdXBwb3J0ZWRTZXJ2ZXJFcnIpIHtcbiAgICAgICAgdGhyb3cgc3VwcG9ydGVkU2VydmVyRXJyO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5zZXJ2aWNlSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yKCdEcml2ZXIgYXR0ZW1wdGVkIHRvIGluaXRpYWxpemUgaW4gbG9hZCBiYWxhbmNpbmcgbW9kZSwgJyArXG4gICAgICAgICAgICAgICAgJ2J1dCB0aGUgc2VydmVyIGRvZXMgbm90IHN1cHBvcnQgdGhpcyBtb2RlLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIE5PVEU6IFRoaXMgaXMgbWV0YWRhdGEgYXR0YWNoZWQgdG8gdGhlIGNvbm5lY3Rpb24gd2hpbGUgcG9ydGluZyBhd2F5IGZyb21cbiAgICAvLyAgICAgICBoYW5kc2hha2UgYmVpbmcgZG9uZSBpbiB0aGUgYFNlcnZlcmAgY2xhc3MuIExpa2VseSwgaXQgc2hvdWxkIGJlXG4gICAgLy8gICAgICAgcmVsb2NhdGVkLCBvciBhdCB2ZXJ5IGxlYXN0IHJlc3RydWN0dXJlZC5cbiAgICBjb25uLmhlbGxvID0gcmVzcG9uc2U7XG4gICAgY29ubi5sYXN0SGVsbG9NUyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnQ7XG4gICAgaWYgKCFyZXNwb25zZS5hcmJpdGVyT25seSAmJiBjcmVkZW50aWFscykge1xuICAgICAgICAvLyBzdG9yZSB0aGUgcmVzcG9uc2Ugb24gYXV0aCBjb250ZXh0XG4gICAgICAgIGF1dGhDb250ZXh0LnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkQ3JlZGVudGlhbHMgPSBjcmVkZW50aWFscy5yZXNvbHZlQXV0aE1lY2hhbmlzbShyZXNwb25zZSk7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gZXhwb3J0cy5BVVRIX1BST1ZJREVSUy5nZXQocmVzb2x2ZWRDcmVkZW50aWFscy5tZWNoYW5pc20pO1xuICAgICAgICBpZiAoIXByb3ZpZGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBObyBBdXRoUHJvdmlkZXIgZm9yICR7cmVzb2x2ZWRDcmVkZW50aWFscy5tZWNoYW5pc219IGRlZmluZWQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHByb3ZpZGVyLmF1dGgoYXV0aENvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgZXJyb3IuYWRkRXJyb3JMYWJlbChlcnJvcl8xLk1vbmdvRXJyb3JMYWJlbC5IYW5kc2hha2VFcnJvcik7XG4gICAgICAgICAgICAgICAgaWYgKCgwLCBlcnJvcl8xLm5lZWRzUmV0cnlhYmxlV3JpdGVMYWJlbCkoZXJyb3IsIHJlc3BvbnNlLm1heFdpcmVWZXJzaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlJldHJ5YWJsZVdyaXRlRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIG9ubHkgZXhwb3NlZCBmb3IgdGVzdGluZyBwdXJwb3Nlcy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gcHJlcGFyZUhhbmRzaGFrZURvY3VtZW50KGF1dGhDb250ZXh0KSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGF1dGhDb250ZXh0Lm9wdGlvbnM7XG4gICAgY29uc3QgY29tcHJlc3NvcnMgPSBvcHRpb25zLmNvbXByZXNzb3JzID8gb3B0aW9ucy5jb21wcmVzc29ycyA6IFtdO1xuICAgIGNvbnN0IHsgc2VydmVyQXBpIH0gPSBhdXRoQ29udGV4dC5jb25uZWN0aW9uO1xuICAgIGNvbnN0IGhhbmRzaGFrZURvYyA9IHtcbiAgICAgICAgW3NlcnZlckFwaT8udmVyc2lvbiA/ICdoZWxsbycgOiBjb25zdGFudHNfMS5MRUdBQ1lfSEVMTE9fQ09NTUFORF06IDEsXG4gICAgICAgIGhlbGxvT2s6IHRydWUsXG4gICAgICAgIGNsaWVudDogb3B0aW9ucy5tZXRhZGF0YSxcbiAgICAgICAgY29tcHJlc3Npb246IGNvbXByZXNzb3JzXG4gICAgfTtcbiAgICBpZiAob3B0aW9ucy5sb2FkQmFsYW5jZWQgPT09IHRydWUpIHtcbiAgICAgICAgaGFuZHNoYWtlRG9jLmxvYWRCYWxhbmNlZCA9IHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gYXV0aENvbnRleHQuY3JlZGVudGlhbHM7XG4gICAgaWYgKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGlmIChjcmVkZW50aWFscy5tZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9ERUZBVUxUICYmIGNyZWRlbnRpYWxzLnVzZXJuYW1lKSB7XG4gICAgICAgICAgICBoYW5kc2hha2VEb2Muc2FzbFN1cHBvcnRlZE1lY2hzID0gYCR7Y3JlZGVudGlhbHMuc291cmNlfS4ke2NyZWRlbnRpYWxzLnVzZXJuYW1lfWA7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IGV4cG9ydHMuQVVUSF9QUk9WSURFUlMuZ2V0KHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9TQ1JBTV9TSEEyNTYpO1xuICAgICAgICAgICAgaWYgKCFwcm92aWRlcikge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgYXV0aCBtZWNoYW5pc20gaXMgYWx3YXlzIHByZXNlbnQuXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgTm8gQXV0aFByb3ZpZGVyIGZvciAke3Byb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9TQ1JBTV9TSEEyNTZ9IGRlZmluZWQuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJvdmlkZXIucHJlcGFyZShoYW5kc2hha2VEb2MsIGF1dGhDb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm92aWRlciA9IGV4cG9ydHMuQVVUSF9QUk9WSURFUlMuZ2V0KGNyZWRlbnRpYWxzLm1lY2hhbmlzbSk7XG4gICAgICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYE5vIEF1dGhQcm92aWRlciBmb3IgJHtjcmVkZW50aWFscy5tZWNoYW5pc219IGRlZmluZWQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyLnByZXBhcmUoaGFuZHNoYWtlRG9jLCBhdXRoQ29udGV4dCk7XG4gICAgfVxuICAgIHJldHVybiBoYW5kc2hha2VEb2M7XG59XG5leHBvcnRzLnByZXBhcmVIYW5kc2hha2VEb2N1bWVudCA9IHByZXBhcmVIYW5kc2hha2VEb2N1bWVudDtcbi8qKiBAcHVibGljICovXG5leHBvcnRzLkxFR0FMX1RMU19TT0NLRVRfT1BUSU9OUyA9IFtcbiAgICAnQUxQTlByb3RvY29scycsXG4gICAgJ2NhJyxcbiAgICAnY2VydCcsXG4gICAgJ2NoZWNrU2VydmVySWRlbnRpdHknLFxuICAgICdjaXBoZXJzJyxcbiAgICAnY3JsJyxcbiAgICAnZWNkaEN1cnZlJyxcbiAgICAna2V5JyxcbiAgICAnbWluREhTaXplJyxcbiAgICAncGFzc3BocmFzZScsXG4gICAgJ3BmeCcsXG4gICAgJ3JlamVjdFVuYXV0aG9yaXplZCcsXG4gICAgJ3NlY3VyZUNvbnRleHQnLFxuICAgICdzZWN1cmVQcm90b2NvbCcsXG4gICAgJ3NlcnZlcm5hbWUnLFxuICAgICdzZXNzaW9uJ1xuXTtcbi8qKiBAcHVibGljICovXG5leHBvcnRzLkxFR0FMX1RDUF9TT0NLRVRfT1BUSU9OUyA9IFtcbiAgICAnZmFtaWx5JyxcbiAgICAnaGludHMnLFxuICAgICdsb2NhbEFkZHJlc3MnLFxuICAgICdsb2NhbFBvcnQnLFxuICAgICdsb29rdXAnXG5dO1xuZnVuY3Rpb24gcGFyc2VDb25uZWN0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgY29uc3QgaG9zdEFkZHJlc3MgPSBvcHRpb25zLmhvc3RBZGRyZXNzO1xuICAgIGlmICghaG9zdEFkZHJlc3MpXG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ09wdGlvbiBcImhvc3RBZGRyZXNzXCIgaXMgcmVxdWlyZWQnKTtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgZXhwb3J0cy5MRUdBTF9UQ1BfU09DS0VUX09QVElPTlMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnNbbmFtZV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgcmVzdWx0W25hbWVdID0gb3B0aW9uc1tuYW1lXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGhvc3RBZGRyZXNzLnNvY2tldFBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJlc3VsdC5wYXRoID0gaG9zdEFkZHJlc3Muc29ja2V0UGF0aDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGhvc3RBZGRyZXNzLmhvc3QgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJlc3VsdC5ob3N0ID0gaG9zdEFkZHJlc3MuaG9zdDtcbiAgICAgICAgcmVzdWx0LnBvcnQgPSBob3N0QWRkcmVzcy5wb3J0O1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gVGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuIHNpbmNlIHdlIHNldCB1cCBIb3N0QWRkcmVzc2VzXG4gICAgICAgIC8vIEJ1dCBpZiB3ZSBkb24ndCB0aHJvdyBoZXJlIHRoZSBzb2NrZXQgY291bGQgaGFuZyB1bnRpbCB0aW1lb3V0XG4gICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKVxuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcihgVW5leHBlY3RlZCBIb3N0QWRkcmVzcyAke0pTT04uc3RyaW5naWZ5KGhvc3RBZGRyZXNzKX1gKTtcbiAgICB9XG59XG5mdW5jdGlvbiBwYXJzZVNzbE9wdGlvbnMob3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29ubmVjdE9wdGlvbnMob3B0aW9ucyk7XG4gICAgLy8gTWVyZ2UgaW4gdmFsaWQgU1NMIG9wdGlvbnNcbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgZXhwb3J0cy5MRUdBTF9UTFNfU09DS0VUX09QVElPTlMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnNbbmFtZV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgcmVzdWx0W25hbWVdID0gb3B0aW9uc1tuYW1lXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob3B0aW9ucy5leGlzdGluZ1NvY2tldCkge1xuICAgICAgICByZXN1bHQuc29ja2V0ID0gb3B0aW9ucy5leGlzdGluZ1NvY2tldDtcbiAgICB9XG4gICAgLy8gU2V0IGRlZmF1bHQgc25pIHNlcnZlcm5hbWUgdG8gYmUgdGhlIHNhbWUgYXMgaG9zdFxuICAgIGlmIChyZXN1bHQuc2VydmVybmFtZSA9PSBudWxsICYmIHJlc3VsdC5ob3N0ICYmICFuZXQuaXNJUChyZXN1bHQuaG9zdCkpIHtcbiAgICAgICAgcmVzdWx0LnNlcnZlcm5hbWUgPSByZXN1bHQuaG9zdDtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmNvbnN0IFNPQ0tFVF9FUlJPUl9FVkVOVF9MSVNUID0gWydlcnJvcicsICdjbG9zZScsICd0aW1lb3V0JywgJ3BhcnNlRXJyb3InXTtcbmNvbnN0IFNPQ0tFVF9FUlJPUl9FVkVOVFMgPSBuZXcgU2V0KFNPQ0tFVF9FUlJPUl9FVkVOVF9MSVNUKTtcbmZ1bmN0aW9uIG1ha2VDb25uZWN0aW9uKG9wdGlvbnMsIF9jYWxsYmFjaykge1xuICAgIGNvbnN0IHVzZVRMUyA9IG9wdGlvbnMudGxzID8/IGZhbHNlO1xuICAgIGNvbnN0IGtlZXBBbGl2ZSA9IG9wdGlvbnMua2VlcEFsaXZlID8/IHRydWU7XG4gICAgY29uc3Qgc29ja2V0VGltZW91dE1TID0gb3B0aW9ucy5zb2NrZXRUaW1lb3V0TVMgPz8gUmVmbGVjdC5nZXQob3B0aW9ucywgJ3NvY2tldFRpbWVvdXQnKSA/PyAwO1xuICAgIGNvbnN0IG5vRGVsYXkgPSBvcHRpb25zLm5vRGVsYXkgPz8gdHJ1ZTtcbiAgICBjb25zdCBjb25uZWN0VGltZW91dE1TID0gb3B0aW9ucy5jb25uZWN0VGltZW91dE1TID8/IDMwMDAwO1xuICAgIGNvbnN0IHJlamVjdFVuYXV0aG9yaXplZCA9IG9wdGlvbnMucmVqZWN0VW5hdXRob3JpemVkID8/IHRydWU7XG4gICAgY29uc3Qga2VlcEFsaXZlSW5pdGlhbERlbGF5ID0gKChvcHRpb25zLmtlZXBBbGl2ZUluaXRpYWxEZWxheSA/PyAxMjAwMDApID4gc29ja2V0VGltZW91dE1TXG4gICAgICAgID8gTWF0aC5yb3VuZChzb2NrZXRUaW1lb3V0TVMgLyAyKVxuICAgICAgICA6IG9wdGlvbnMua2VlcEFsaXZlSW5pdGlhbERlbGF5KSA/PyAxMjAwMDA7XG4gICAgY29uc3QgZXhpc3RpbmdTb2NrZXQgPSBvcHRpb25zLmV4aXN0aW5nU29ja2V0O1xuICAgIGxldCBzb2NrZXQ7XG4gICAgY29uc3QgY2FsbGJhY2sgPSBmdW5jdGlvbiAoZXJyLCByZXQpIHtcbiAgICAgICAgaWYgKGVyciAmJiBzb2NrZXQpIHtcbiAgICAgICAgICAgIHNvY2tldC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgX2NhbGxiYWNrKGVyciwgcmV0KTtcbiAgICB9O1xuICAgIGlmIChvcHRpb25zLnByb3h5SG9zdCAhPSBudWxsKSB7XG4gICAgICAgIC8vIEN1cnJlbnRseSwgb25seSBTb2NrczUgaXMgc3VwcG9ydGVkLlxuICAgICAgICByZXR1cm4gbWFrZVNvY2tzNUNvbm5lY3Rpb24oe1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIGNvbm5lY3RUaW1lb3V0TVMgLy8gU2hvdWxkIGFsd2F5cyBiZSBwcmVzZW50IGZvciBTb2NrczVcbiAgICAgICAgfSwgY2FsbGJhY2spO1xuICAgIH1cbiAgICBpZiAodXNlVExTKSB7XG4gICAgICAgIGNvbnN0IHRsc1NvY2tldCA9IHRscy5jb25uZWN0KHBhcnNlU3NsT3B0aW9ucyhvcHRpb25zKSk7XG4gICAgICAgIGlmICh0eXBlb2YgdGxzU29ja2V0LmRpc2FibGVSZW5lZ290aWF0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0bHNTb2NrZXQuZGlzYWJsZVJlbmVnb3RpYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBzb2NrZXQgPSB0bHNTb2NrZXQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV4aXN0aW5nU29ja2V0KSB7XG4gICAgICAgIC8vIEluIHRoZSBUTFMgY2FzZSwgcGFyc2VTc2xPcHRpb25zKCkgc2V0cyBvcHRpb25zLnNvY2tldCB0byBleGlzdGluZ1NvY2tldCxcbiAgICAgICAgLy8gc28gd2Ugb25seSBuZWVkIHRvIGhhbmRsZSB0aGUgbm9uLVRMUyBjYXNlIGhlcmUgKHdoZXJlIGV4aXN0aW5nU29ja2V0XG4gICAgICAgIC8vIGdpdmVzIHVzIGFsbCB3ZSBuZWVkIG91dCBvZiB0aGUgYm94KS5cbiAgICAgICAgc29ja2V0ID0gZXhpc3RpbmdTb2NrZXQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzb2NrZXQgPSBuZXQuY3JlYXRlQ29ubmVjdGlvbihwYXJzZUNvbm5lY3RPcHRpb25zKG9wdGlvbnMpKTtcbiAgICB9XG4gICAgc29ja2V0LnNldEtlZXBBbGl2ZShrZWVwQWxpdmUsIGtlZXBBbGl2ZUluaXRpYWxEZWxheSk7XG4gICAgc29ja2V0LnNldFRpbWVvdXQoY29ubmVjdFRpbWVvdXRNUyk7XG4gICAgc29ja2V0LnNldE5vRGVsYXkobm9EZWxheSk7XG4gICAgY29uc3QgY29ubmVjdEV2ZW50ID0gdXNlVExTID8gJ3NlY3VyZUNvbm5lY3QnIDogJ2Nvbm5lY3QnO1xuICAgIGxldCBjYW5jZWxsYXRpb25IYW5kbGVyO1xuICAgIGZ1bmN0aW9uIGVycm9ySGFuZGxlcihldmVudE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIChlcnIpID0+IHtcbiAgICAgICAgICAgIFNPQ0tFVF9FUlJPUl9FVkVOVFMuZm9yRWFjaChldmVudCA9PiBzb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50KSk7XG4gICAgICAgICAgICBpZiAoY2FuY2VsbGF0aW9uSGFuZGxlciAmJiBvcHRpb25zLmNhbmNlbGxhdGlvblRva2VuKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jYW5jZWxsYXRpb25Ub2tlbi5yZW1vdmVMaXN0ZW5lcignY2FuY2VsJywgY2FuY2VsbGF0aW9uSGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoY29ubmVjdEV2ZW50LCBjb25uZWN0SGFuZGxlcik7XG4gICAgICAgICAgICBjYWxsYmFjayhjb25uZWN0aW9uRmFpbHVyZUVycm9yKGV2ZW50TmFtZSwgZXJyKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbm5lY3RIYW5kbGVyKCkge1xuICAgICAgICBTT0NLRVRfRVJST1JfRVZFTlRTLmZvckVhY2goZXZlbnQgPT4gc29ja2V0LnJlbW92ZUFsbExpc3RlbmVycyhldmVudCkpO1xuICAgICAgICBpZiAoY2FuY2VsbGF0aW9uSGFuZGxlciAmJiBvcHRpb25zLmNhbmNlbGxhdGlvblRva2VuKSB7XG4gICAgICAgICAgICBvcHRpb25zLmNhbmNlbGxhdGlvblRva2VuLnJlbW92ZUxpc3RlbmVyKCdjYW5jZWwnLCBjYW5jZWxsYXRpb25IYW5kbGVyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJ2F1dGhvcml6YXRpb25FcnJvcicgaW4gc29ja2V0KSB7XG4gICAgICAgICAgICBpZiAoc29ja2V0LmF1dGhvcml6YXRpb25FcnJvciAmJiByZWplY3RVbmF1dGhvcml6ZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKE5PREUtNTE5Mik6IHdyYXAgdGhpcyB3aXRoIGEgTW9uZ29FcnJvciBzdWJjbGFzc1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhzb2NrZXQuYXV0aG9yaXphdGlvbkVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzb2NrZXQuc2V0VGltZW91dCgwKTtcbiAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCBzb2NrZXQpO1xuICAgIH1cbiAgICBTT0NLRVRfRVJST1JfRVZFTlRTLmZvckVhY2goZXZlbnQgPT4gc29ja2V0Lm9uY2UoZXZlbnQsIGVycm9ySGFuZGxlcihldmVudCkpKTtcbiAgICBpZiAob3B0aW9ucy5jYW5jZWxsYXRpb25Ub2tlbikge1xuICAgICAgICBjYW5jZWxsYXRpb25IYW5kbGVyID0gZXJyb3JIYW5kbGVyKCdjYW5jZWwnKTtcbiAgICAgICAgb3B0aW9ucy5jYW5jZWxsYXRpb25Ub2tlbi5vbmNlKCdjYW5jZWwnLCBjYW5jZWxsYXRpb25IYW5kbGVyKTtcbiAgICB9XG4gICAgaWYgKGV4aXN0aW5nU29ja2V0KSB7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soY29ubmVjdEhhbmRsZXIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc29ja2V0Lm9uY2UoY29ubmVjdEV2ZW50LCBjb25uZWN0SGFuZGxlcik7XG4gICAgfVxufVxuZnVuY3Rpb24gbWFrZVNvY2tzNUNvbm5lY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBjb25zdCBob3N0QWRkcmVzcyA9IHV0aWxzXzEuSG9zdEFkZHJlc3MuZnJvbUhvc3RQb3J0KG9wdGlvbnMucHJveHlIb3N0ID8/ICcnLCAvLyBwcm94eUhvc3QgaXMgZ3VhcmFudGVlZCB0byBzZXQgaGVyZVxuICAgIG9wdGlvbnMucHJveHlQb3J0ID8/IDEwODApO1xuICAgIC8vIEZpcnN0LCBjb25uZWN0IHRvIHRoZSBwcm94eSBzZXJ2ZXIgaXRzZWxmOlxuICAgIG1ha2VDb25uZWN0aW9uKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgaG9zdEFkZHJlc3MsXG4gICAgICAgIHRsczogZmFsc2UsXG4gICAgICAgIHByb3h5SG9zdDogdW5kZWZpbmVkXG4gICAgfSwgKGVyciwgcmF3U29ja2V0KSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gcGFyc2VDb25uZWN0T3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkZXN0aW5hdGlvbi5ob3N0ICE9PSAnc3RyaW5nJyB8fCB0eXBlb2YgZGVzdGluYXRpb24ucG9ydCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdDYW4gb25seSBtYWtlIFNvY2tzNSBjb25uZWN0aW9ucyB0byBUQ1AgaG9zdHMnKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlbiwgZXN0YWJsaXNoIHRoZSBTb2NrczUgcHJveHkgY29ubmVjdGlvbjpcbiAgICAgICAgc29ja3NfMS5Tb2Nrc0NsaWVudC5jcmVhdGVDb25uZWN0aW9uKHtcbiAgICAgICAgICAgIGV4aXN0aW5nX3NvY2tldDogcmF3U29ja2V0LFxuICAgICAgICAgICAgdGltZW91dDogb3B0aW9ucy5jb25uZWN0VGltZW91dE1TLFxuICAgICAgICAgICAgY29tbWFuZDogJ2Nvbm5lY3QnLFxuICAgICAgICAgICAgZGVzdGluYXRpb246IHtcbiAgICAgICAgICAgICAgICBob3N0OiBkZXN0aW5hdGlvbi5ob3N0LFxuICAgICAgICAgICAgICAgIHBvcnQ6IGRlc3RpbmF0aW9uLnBvcnRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm94eToge1xuICAgICAgICAgICAgICAgIC8vIGhvc3QgYW5kIHBvcnQgYXJlIGlnbm9yZWQgYmVjYXVzZSB3ZSBwYXNzIGV4aXN0aW5nX3NvY2tldFxuICAgICAgICAgICAgICAgIGhvc3Q6ICdpTG92ZUphdmFTY3JpcHQnLFxuICAgICAgICAgICAgICAgIHBvcnQ6IDAsXG4gICAgICAgICAgICAgICAgdHlwZTogNSxcbiAgICAgICAgICAgICAgICB1c2VySWQ6IG9wdGlvbnMucHJveHlVc2VybmFtZSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IG9wdGlvbnMucHJveHlQYXNzd29yZCB8fCB1bmRlZmluZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkudGhlbigoeyBzb2NrZXQgfSkgPT4ge1xuICAgICAgICAgICAgLy8gRmluYWxseSwgbm93IHRyZWF0IHRoZSByZXN1bHRpbmcgZHVwbGV4IHN0cmVhbSBhcyB0aGVcbiAgICAgICAgICAgIC8vIHNvY2tldCBvdmVyIHdoaWNoIHdlIHNlbmQgYW5kIHJlY2VpdmUgd2lyZSBwcm90b2NvbCBtZXNzYWdlczpcbiAgICAgICAgICAgIG1ha2VDb25uZWN0aW9uKHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGV4aXN0aW5nU29ja2V0OiBzb2NrZXQsXG4gICAgICAgICAgICAgICAgcHJveHlIb3N0OiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0sIGNhbGxiYWNrKTtcbiAgICAgICAgfSwgZXJyb3IgPT4gY2FsbGJhY2soY29ubmVjdGlvbkZhaWx1cmVFcnJvcignZXJyb3InLCBlcnJvcikpKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGNvbm5lY3Rpb25GYWlsdXJlRXJyb3IodHlwZSwgZXJyKSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgZXJyb3JfMS5Nb25nb05ldHdvcmtFcnJvcihlcnIpO1xuICAgICAgICBjYXNlICd0aW1lb3V0JzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgZXJyb3JfMS5Nb25nb05ldHdvcmtUaW1lb3V0RXJyb3IoJ2Nvbm5lY3Rpb24gdGltZWQgb3V0Jyk7XG4gICAgICAgIGNhc2UgJ2Nsb3NlJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgZXJyb3JfMS5Nb25nb05ldHdvcmtFcnJvcignY29ubmVjdGlvbiBjbG9zZWQnKTtcbiAgICAgICAgY2FzZSAnY2FuY2VsJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgZXJyb3JfMS5Nb25nb05ldHdvcmtFcnJvcignY29ubmVjdGlvbiBlc3RhYmxpc2htZW50IHdhcyBjYW5jZWxsZWQnKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBuZXcgZXJyb3JfMS5Nb25nb05ldHdvcmtFcnJvcigndW5rbm93biBuZXR3b3JrIGVycm9yJyk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29ubmVjdC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJMRUdBTF9UQ1BfU09DS0VUX09QVElPTlMiLCJMRUdBTF9UTFNfU09DS0VUX09QVElPTlMiLCJwcmVwYXJlSGFuZHNoYWtlRG9jdW1lbnQiLCJjb25uZWN0IiwiQVVUSF9QUk9WSURFUlMiLCJuZXQiLCJyZXF1aXJlIiwic29ja3NfMSIsInRscyIsImNvbnN0YW50c18xIiwiZXJyb3JfMSIsInV0aWxzXzEiLCJhdXRoX3Byb3ZpZGVyXzEiLCJnc3NhcGlfMSIsIm1vbmdvY3JfMSIsIm1vbmdvZGJfYXdzXzEiLCJtb25nb2RiX29pZGNfMSIsInBsYWluXzEiLCJwcm92aWRlcnNfMSIsInNjcmFtXzEiLCJ4NTA5XzEiLCJjb25uZWN0aW9uXzEiLCJjb25zdGFudHNfMiIsIk1hcCIsIkF1dGhNZWNoYW5pc20iLCJNT05HT0RCX0FXUyIsIk1vbmdvREJBV1MiLCJNT05HT0RCX0NSIiwiTW9uZ29DUiIsIk1PTkdPREJfR1NTQVBJIiwiR1NTQVBJIiwiTU9OR09EQl9PSURDIiwiTW9uZ29EQk9JREMiLCJNT05HT0RCX1BMQUlOIiwiUGxhaW4iLCJNT05HT0RCX1NDUkFNX1NIQTEiLCJTY3JhbVNIQTEiLCJNT05HT0RCX1NDUkFNX1NIQTI1NiIsIlNjcmFtU0hBMjU2IiwiTU9OR09EQl9YNTA5IiwiWDUwOSIsIm9wdGlvbnMiLCJjYWxsYmFjayIsIm1ha2VDb25uZWN0aW9uIiwiZXhpc3RpbmdTb2NrZXQiLCJ1bmRlZmluZWQiLCJlcnIiLCJzb2NrZXQiLCJDb25uZWN0aW9uVHlwZSIsImNvbm5lY3Rpb25UeXBlIiwiQ29ubmVjdGlvbiIsImF1dG9FbmNyeXB0ZXIiLCJDcnlwdG9Db25uZWN0aW9uIiwiY29ubmVjdGlvbiIsInBlcmZvcm1Jbml0aWFsSGFuZHNoYWtlIiwidGhlbiIsImVycm9yIiwiZGVzdHJveSIsImZvcmNlIiwiY2hlY2tTdXBwb3J0ZWRTZXJ2ZXIiLCJoZWxsbyIsIm1heFdpcmVWZXJzaW9uIiwiTnVtYmVyIiwibWluV2lyZVZlcnNpb24iLCJzZXJ2ZXJWZXJzaW9uSGlnaEVub3VnaCIsImlzTmFOIiwiTUlOX1NVUFBPUlRFRF9XSVJFX1ZFUlNJT04iLCJzZXJ2ZXJWZXJzaW9uTG93RW5vdWdoIiwiTUFYX1NVUFBPUlRFRF9XSVJFX1ZFUlNJT04iLCJtZXNzYWdlIiwiaG9zdEFkZHJlc3MiLCJKU09OIiwic3RyaW5naWZ5IiwiTUFYX1NVUFBPUlRFRF9TRVJWRVJfVkVSU0lPTiIsIk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yIiwiTUlOX1NVUFBPUlRFRF9TRVJWRVJfVkVSU0lPTiIsImNvbm4iLCJjcmVkZW50aWFscyIsIm1lY2hhbmlzbSIsIk1PTkdPREJfREVGQVVMVCIsImdldCIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJhdXRoQ29udGV4dCIsIkF1dGhDb250ZXh0IiwiaGFuZHNoYWtlRG9jIiwiaGFuZHNoYWtlT3B0aW9ucyIsImNvbm5lY3RUaW1lb3V0TVMiLCJzb2NrZXRUaW1lb3V0TVMiLCJzdGFydCIsIkRhdGUiLCJnZXRUaW1lIiwicmVzcG9uc2UiLCJjb21tYW5kQXN5bmMiLCJucyIsImlzV3JpdGFibGVQcmltYXJ5IiwiTEVHQUNZX0hFTExPX0NPTU1BTkQiLCJoZWxsb09rIiwic3VwcG9ydGVkU2VydmVyRXJyIiwibG9hZEJhbGFuY2VkIiwic2VydmljZUlkIiwibGFzdEhlbGxvTVMiLCJhcmJpdGVyT25seSIsInJlc29sdmVkQ3JlZGVudGlhbHMiLCJyZXNvbHZlQXV0aE1lY2hhbmlzbSIsInByb3ZpZGVyIiwiYXV0aCIsIk1vbmdvRXJyb3IiLCJhZGRFcnJvckxhYmVsIiwiTW9uZ29FcnJvckxhYmVsIiwiSGFuZHNoYWtlRXJyb3IiLCJuZWVkc1JldHJ5YWJsZVdyaXRlTGFiZWwiLCJSZXRyeWFibGVXcml0ZUVycm9yIiwiY29tcHJlc3NvcnMiLCJzZXJ2ZXJBcGkiLCJ2ZXJzaW9uIiwiY2xpZW50IiwibWV0YWRhdGEiLCJjb21wcmVzc2lvbiIsInVzZXJuYW1lIiwic2FzbFN1cHBvcnRlZE1lY2hzIiwic291cmNlIiwicHJlcGFyZSIsInBhcnNlQ29ubmVjdE9wdGlvbnMiLCJyZXN1bHQiLCJuYW1lIiwic29ja2V0UGF0aCIsInBhdGgiLCJob3N0IiwicG9ydCIsIk1vbmdvUnVudGltZUVycm9yIiwicGFyc2VTc2xPcHRpb25zIiwic2VydmVybmFtZSIsImlzSVAiLCJTT0NLRVRfRVJST1JfRVZFTlRfTElTVCIsIlNPQ0tFVF9FUlJPUl9FVkVOVFMiLCJTZXQiLCJfY2FsbGJhY2siLCJ1c2VUTFMiLCJrZWVwQWxpdmUiLCJSZWZsZWN0Iiwibm9EZWxheSIsInJlamVjdFVuYXV0aG9yaXplZCIsImtlZXBBbGl2ZUluaXRpYWxEZWxheSIsIk1hdGgiLCJyb3VuZCIsInJldCIsInByb3h5SG9zdCIsIm1ha2VTb2NrczVDb25uZWN0aW9uIiwidGxzU29ja2V0IiwiZGlzYWJsZVJlbmVnb3RpYXRpb24iLCJjcmVhdGVDb25uZWN0aW9uIiwic2V0S2VlcEFsaXZlIiwic2V0VGltZW91dCIsInNldE5vRGVsYXkiLCJjb25uZWN0RXZlbnQiLCJjYW5jZWxsYXRpb25IYW5kbGVyIiwiZXJyb3JIYW5kbGVyIiwiZXZlbnROYW1lIiwiZm9yRWFjaCIsImV2ZW50IiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiY2FuY2VsbGF0aW9uVG9rZW4iLCJyZW1vdmVMaXN0ZW5lciIsImNvbm5lY3RIYW5kbGVyIiwiY29ubmVjdGlvbkZhaWx1cmVFcnJvciIsImF1dGhvcml6YXRpb25FcnJvciIsIm9uY2UiLCJwcm9jZXNzIiwibmV4dFRpY2siLCJIb3N0QWRkcmVzcyIsImZyb21Ib3N0UG9ydCIsInByb3h5UG9ydCIsInJhd1NvY2tldCIsImRlc3RpbmF0aW9uIiwiU29ja3NDbGllbnQiLCJleGlzdGluZ19zb2NrZXQiLCJ0aW1lb3V0IiwiY29tbWFuZCIsInByb3h5IiwidHlwZSIsInVzZXJJZCIsInByb3h5VXNlcm5hbWUiLCJwYXNzd29yZCIsInByb3h5UGFzc3dvcmQiLCJNb25nb05ldHdvcmtFcnJvciIsIk1vbmdvTmV0d29ya1RpbWVvdXRFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/connect.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/connection.js":
/*!*****************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/connection.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.hasSessionSupport = exports.CryptoConnection = exports.Connection = void 0;\nconst timers_1 = __webpack_require__(/*! timers */ \"timers\");\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst sessions_1 = __webpack_require__(/*! ../sessions */ \"(ssr)/./node_modules/mongodb/lib/sessions.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_monitoring_events_1 = __webpack_require__(/*! ./command_monitoring_events */ \"(ssr)/./node_modules/mongodb/lib/cmap/command_monitoring_events.js\");\nconst commands_1 = __webpack_require__(/*! ./commands */ \"(ssr)/./node_modules/mongodb/lib/cmap/commands.js\");\nconst message_stream_1 = __webpack_require__(/*! ./message_stream */ \"(ssr)/./node_modules/mongodb/lib/cmap/message_stream.js\");\nconst stream_description_1 = __webpack_require__(/*! ./stream_description */ \"(ssr)/./node_modules/mongodb/lib/cmap/stream_description.js\");\nconst shared_1 = __webpack_require__(/*! ./wire_protocol/shared */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/shared.js\");\n/** @internal */ const kStream = Symbol(\"stream\");\n/** @internal */ const kQueue = Symbol(\"queue\");\n/** @internal */ const kMessageStream = Symbol(\"messageStream\");\n/** @internal */ const kGeneration = Symbol(\"generation\");\n/** @internal */ const kLastUseTime = Symbol(\"lastUseTime\");\n/** @internal */ const kClusterTime = Symbol(\"clusterTime\");\n/** @internal */ const kDescription = Symbol(\"description\");\n/** @internal */ const kHello = Symbol(\"hello\");\n/** @internal */ const kAutoEncrypter = Symbol(\"autoEncrypter\");\n/** @internal */ const kDelayedTimeoutId = Symbol(\"delayedTimeoutId\");\nconst INVALID_QUEUE_SIZE = \"Connection internal queue contains more than 1 operation description\";\n/** @internal */ class Connection extends mongo_types_1.TypedEventEmitter {\n    constructor(stream, options){\n        super();\n        this.commandAsync = (0, util_1.promisify)((ns, cmd, options, callback)=>this.command(ns, cmd, options, callback));\n        this.id = options.id;\n        this.address = streamIdentifier(stream, options);\n        this.socketTimeoutMS = options.socketTimeoutMS ?? 0;\n        this.monitorCommands = options.monitorCommands;\n        this.serverApi = options.serverApi;\n        this.closed = false;\n        this[kHello] = null;\n        this[kClusterTime] = null;\n        this[kDescription] = new stream_description_1.StreamDescription(this.address, options);\n        this[kGeneration] = options.generation;\n        this[kLastUseTime] = (0, utils_1.now)();\n        // setup parser stream and message handling\n        this[kQueue] = new Map();\n        this[kMessageStream] = new message_stream_1.MessageStream({\n            ...options,\n            maxBsonMessageSize: this.hello?.maxBsonMessageSize\n        });\n        this[kStream] = stream;\n        this[kDelayedTimeoutId] = null;\n        this[kMessageStream].on(\"message\", (message)=>this.onMessage(message));\n        this[kMessageStream].on(\"error\", (error)=>this.onError(error));\n        this[kStream].on(\"close\", ()=>this.onClose());\n        this[kStream].on(\"timeout\", ()=>this.onTimeout());\n        this[kStream].on(\"error\", ()=>{\n        /* ignore errors, listen to `close` instead */ });\n        // hook the message stream up to the passed in stream\n        this[kStream].pipe(this[kMessageStream]);\n        this[kMessageStream].pipe(this[kStream]);\n    }\n    get description() {\n        return this[kDescription];\n    }\n    get hello() {\n        return this[kHello];\n    }\n    // the `connect` method stores the result of the handshake hello on the connection\n    set hello(response) {\n        this[kDescription].receiveResponse(response);\n        this[kDescription] = Object.freeze(this[kDescription]);\n        // TODO: remove this, and only use the `StreamDescription` in the future\n        this[kHello] = response;\n    }\n    // Set the whether the message stream is for a monitoring connection.\n    set isMonitoringConnection(value) {\n        this[kMessageStream].isMonitoringConnection = value;\n    }\n    get isMonitoringConnection() {\n        return this[kMessageStream].isMonitoringConnection;\n    }\n    get serviceId() {\n        return this.hello?.serviceId;\n    }\n    get loadBalanced() {\n        return this.description.loadBalanced;\n    }\n    get generation() {\n        return this[kGeneration] || 0;\n    }\n    set generation(generation) {\n        this[kGeneration] = generation;\n    }\n    get idleTime() {\n        return (0, utils_1.calculateDurationInMs)(this[kLastUseTime]);\n    }\n    get clusterTime() {\n        return this[kClusterTime];\n    }\n    get stream() {\n        return this[kStream];\n    }\n    markAvailable() {\n        this[kLastUseTime] = (0, utils_1.now)();\n    }\n    onError(error) {\n        this.cleanup(true, error);\n    }\n    onClose() {\n        const message = `connection ${this.id} to ${this.address} closed`;\n        this.cleanup(true, new error_1.MongoNetworkError(message));\n    }\n    onTimeout() {\n        this[kDelayedTimeoutId] = (0, timers_1.setTimeout)(()=>{\n            const message = `connection ${this.id} to ${this.address} timed out`;\n            const beforeHandshake = this.hello == null;\n            this.cleanup(true, new error_1.MongoNetworkTimeoutError(message, {\n                beforeHandshake\n            }));\n        }, 1).unref(); // No need for this timer to hold the event loop open\n    }\n    onMessage(message) {\n        const delayedTimeoutId = this[kDelayedTimeoutId];\n        if (delayedTimeoutId != null) {\n            (0, timers_1.clearTimeout)(delayedTimeoutId);\n            this[kDelayedTimeoutId] = null;\n        }\n        const socketTimeoutMS = this[kStream].timeout ?? 0;\n        this[kStream].setTimeout(0);\n        // always emit the message, in case we are streaming\n        this.emit(\"message\", message);\n        let operationDescription = this[kQueue].get(message.responseTo);\n        if (!operationDescription && this.isMonitoringConnection) {\n            // This is how we recover when the initial hello's requestId is not\n            // the responseTo when hello responses have been skipped:\n            // First check if the map is of invalid size\n            if (this[kQueue].size > 1) {\n                this.cleanup(true, new error_1.MongoRuntimeError(INVALID_QUEUE_SIZE));\n            } else {\n                // Get the first orphaned operation description.\n                const entry = this[kQueue].entries().next();\n                if (entry.value != null) {\n                    const [requestId, orphaned] = entry.value;\n                    // If the orphaned operation description exists then set it.\n                    operationDescription = orphaned;\n                    // Remove the entry with the bad request id from the queue.\n                    this[kQueue].delete(requestId);\n                }\n            }\n        }\n        if (!operationDescription) {\n            return;\n        }\n        const callback = operationDescription.cb;\n        // SERVER-45775: For exhaust responses we should be able to use the same requestId to\n        // track response, however the server currently synthetically produces remote requests\n        // making the `responseTo` change on each response\n        this[kQueue].delete(message.responseTo);\n        if (\"moreToCome\" in message && message.moreToCome) {\n            // If the operation description check above does find an orphaned\n            // description and sets the operationDescription then this line will put one\n            // back in the queue with the correct requestId and will resolve not being able\n            // to find the next one via the responseTo of the next streaming hello.\n            this[kQueue].set(message.requestId, operationDescription);\n            this[kStream].setTimeout(socketTimeoutMS);\n        }\n        try {\n            // Pass in the entire description because it has BSON parsing options\n            message.parse(operationDescription);\n        } catch (err) {\n            // If this error is generated by our own code, it will already have the correct class applied\n            // if it is not, then it is coming from a catastrophic data parse failure or the BSON library\n            // in either case, it should not be wrapped\n            callback(err);\n            return;\n        }\n        if (message.documents[0]) {\n            const document = message.documents[0];\n            const session = operationDescription.session;\n            if (session) {\n                (0, sessions_1.updateSessionFromResponse)(session, document);\n            }\n            if (document.$clusterTime) {\n                this[kClusterTime] = document.$clusterTime;\n                this.emit(Connection.CLUSTER_TIME_RECEIVED, document.$clusterTime);\n            }\n            if (document.writeConcernError) {\n                callback(new error_1.MongoWriteConcernError(document.writeConcernError, document), document);\n                return;\n            }\n            if (document.ok === 0 || document.$err || document.errmsg || document.code) {\n                callback(new error_1.MongoServerError(document));\n                return;\n            }\n        }\n        callback(undefined, message.documents[0]);\n    }\n    destroy(options, callback) {\n        if (this.closed) {\n            process.nextTick(()=>callback?.());\n            return;\n        }\n        if (typeof callback === \"function\") {\n            this.once(\"close\", ()=>process.nextTick(()=>callback()));\n        }\n        // load balanced mode requires that these listeners remain on the connection\n        // after cleanup on timeouts, errors or close so we remove them before calling\n        // cleanup.\n        this.removeAllListeners(Connection.PINNED);\n        this.removeAllListeners(Connection.UNPINNED);\n        const message = `connection ${this.id} to ${this.address} closed`;\n        this.cleanup(options.force, new error_1.MongoNetworkError(message));\n    }\n    /**\n     * A method that cleans up the connection.  When `force` is true, this method\n     * forcibly destroys the socket.\n     *\n     * If an error is provided, any in-flight operations will be closed with the error.\n     *\n     * This method does nothing if the connection is already closed.\n     */ cleanup(force, error) {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        const completeCleanup = ()=>{\n            for (const op of this[kQueue].values()){\n                op.cb(error);\n            }\n            this[kQueue].clear();\n            this.emit(Connection.CLOSE);\n        };\n        this[kStream].removeAllListeners();\n        this[kMessageStream].removeAllListeners();\n        this[kMessageStream].destroy();\n        if (force) {\n            this[kStream].destroy();\n            completeCleanup();\n            return;\n        }\n        if (!this[kStream].writableEnded) {\n            this[kStream].end(()=>{\n                this[kStream].destroy();\n                completeCleanup();\n            });\n        } else {\n            completeCleanup();\n        }\n    }\n    command(ns, command, options, callback) {\n        let cmd = {\n            ...command\n        };\n        const readPreference = (0, shared_1.getReadPreference)(options);\n        const shouldUseOpMsg = supportsOpMsg(this);\n        const session = options?.session;\n        let clusterTime = this.clusterTime;\n        if (this.serverApi) {\n            const { version, strict, deprecationErrors } = this.serverApi;\n            cmd.apiVersion = version;\n            if (strict != null) cmd.apiStrict = strict;\n            if (deprecationErrors != null) cmd.apiDeprecationErrors = deprecationErrors;\n        }\n        if (hasSessionSupport(this) && session) {\n            if (session.clusterTime && clusterTime && session.clusterTime.clusterTime.greaterThan(clusterTime.clusterTime)) {\n                clusterTime = session.clusterTime;\n            }\n            const err = (0, sessions_1.applySession)(session, cmd, options);\n            if (err) {\n                return callback(err);\n            }\n        } else if (session?.explicit) {\n            return callback(new error_1.MongoCompatibilityError(\"Current topology does not support sessions\"));\n        }\n        // if we have a known cluster time, gossip it\n        if (clusterTime) {\n            cmd.$clusterTime = clusterTime;\n        }\n        if ((0, shared_1.isSharded)(this) && !shouldUseOpMsg && readPreference && readPreference.mode !== \"primary\") {\n            cmd = {\n                $query: cmd,\n                $readPreference: readPreference.toJSON()\n            };\n        }\n        const commandOptions = Object.assign({\n            numberToSkip: 0,\n            numberToReturn: -1,\n            checkKeys: false,\n            // This value is not overridable\n            secondaryOk: readPreference.secondaryOk()\n        }, options);\n        const cmdNs = `${ns.db}.$cmd`;\n        const message = shouldUseOpMsg ? new commands_1.Msg(cmdNs, cmd, commandOptions) : new commands_1.Query(cmdNs, cmd, commandOptions);\n        try {\n            write(this, message, commandOptions, callback);\n        } catch (err) {\n            callback(err);\n        }\n    }\n}\n/** @event */ Connection.COMMAND_STARTED = constants_1.COMMAND_STARTED;\n/** @event */ Connection.COMMAND_SUCCEEDED = constants_1.COMMAND_SUCCEEDED;\n/** @event */ Connection.COMMAND_FAILED = constants_1.COMMAND_FAILED;\n/** @event */ Connection.CLUSTER_TIME_RECEIVED = constants_1.CLUSTER_TIME_RECEIVED;\n/** @event */ Connection.CLOSE = constants_1.CLOSE;\n/** @event */ Connection.MESSAGE = constants_1.MESSAGE;\n/** @event */ Connection.PINNED = constants_1.PINNED;\n/** @event */ Connection.UNPINNED = constants_1.UNPINNED;\nexports.Connection = Connection;\n/** @internal */ class CryptoConnection extends Connection {\n    constructor(stream, options){\n        super(stream, options);\n        this[kAutoEncrypter] = options.autoEncrypter;\n    }\n    /** @internal @override */ command(ns, cmd, options, callback) {\n        const autoEncrypter = this[kAutoEncrypter];\n        if (!autoEncrypter) {\n            return callback(new error_1.MongoMissingDependencyError(\"No AutoEncrypter available for encryption\"));\n        }\n        const serverWireVersion = (0, utils_1.maxWireVersion)(this);\n        if (serverWireVersion === 0) {\n            // This means the initial handshake hasn't happened yet\n            return super.command(ns, cmd, options, callback);\n        }\n        if (serverWireVersion < 8) {\n            callback(new error_1.MongoCompatibilityError(\"Auto-encryption requires a minimum MongoDB version of 4.2\"));\n            return;\n        }\n        // Save sort or indexKeys based on the command being run\n        // the encrypt API serializes our JS objects to BSON to pass to the native code layer\n        // and then deserializes the encrypted result, the protocol level components\n        // of the command (ex. sort) are then converted to JS objects potentially losing\n        // import key order information. These fields are never encrypted so we can save the values\n        // from before the encryption and replace them after encryption has been performed\n        const sort = cmd.find || cmd.findAndModify ? cmd.sort : null;\n        const indexKeys = cmd.createIndexes ? cmd.indexes.map((index)=>index.key) : null;\n        autoEncrypter.encrypt(ns.toString(), cmd, options, (err, encrypted)=>{\n            if (err || encrypted == null) {\n                callback(err, null);\n                return;\n            }\n            // Replace the saved values\n            if (sort != null && (cmd.find || cmd.findAndModify)) {\n                encrypted.sort = sort;\n            }\n            if (indexKeys != null && cmd.createIndexes) {\n                for (const [offset, index] of indexKeys.entries()){\n                    encrypted.indexes[offset].key = index;\n                }\n            }\n            super.command(ns, encrypted, options, (err, response)=>{\n                if (err || response == null) {\n                    callback(err, response);\n                    return;\n                }\n                autoEncrypter.decrypt(response, options, callback);\n            });\n        });\n    }\n}\nexports.CryptoConnection = CryptoConnection;\n/** @internal */ function hasSessionSupport(conn) {\n    const description = conn.description;\n    return description.logicalSessionTimeoutMinutes != null;\n}\nexports.hasSessionSupport = hasSessionSupport;\nfunction supportsOpMsg(conn) {\n    const description = conn.description;\n    if (description == null) {\n        return false;\n    }\n    return (0, utils_1.maxWireVersion)(conn) >= 6 && !description.__nodejs_mock_server__;\n}\nfunction streamIdentifier(stream, options) {\n    if (options.proxyHost) {\n        // If proxy options are specified, the properties of `stream` itself\n        // will not accurately reflect what endpoint this is connected to.\n        return options.hostAddress.toString();\n    }\n    const { remoteAddress, remotePort } = stream;\n    if (typeof remoteAddress === \"string\" && typeof remotePort === \"number\") {\n        return utils_1.HostAddress.fromHostPort(remoteAddress, remotePort).toString();\n    }\n    return (0, utils_1.uuidV4)().toString(\"hex\");\n}\nfunction write(conn, command, options, callback) {\n    options = options ?? {};\n    const operationDescription = {\n        requestId: command.requestId,\n        cb: callback,\n        session: options.session,\n        noResponse: typeof options.noResponse === \"boolean\" ? options.noResponse : false,\n        documentsReturnedIn: options.documentsReturnedIn,\n        // for BSON parsing\n        useBigInt64: typeof options.useBigInt64 === \"boolean\" ? options.useBigInt64 : false,\n        promoteLongs: typeof options.promoteLongs === \"boolean\" ? options.promoteLongs : true,\n        promoteValues: typeof options.promoteValues === \"boolean\" ? options.promoteValues : true,\n        promoteBuffers: typeof options.promoteBuffers === \"boolean\" ? options.promoteBuffers : false,\n        bsonRegExp: typeof options.bsonRegExp === \"boolean\" ? options.bsonRegExp : false,\n        enableUtf8Validation: typeof options.enableUtf8Validation === \"boolean\" ? options.enableUtf8Validation : true,\n        raw: typeof options.raw === \"boolean\" ? options.raw : false,\n        started: 0\n    };\n    if (conn[kDescription] && conn[kDescription].compressor) {\n        operationDescription.agreedCompressor = conn[kDescription].compressor;\n        if (conn[kDescription].zlibCompressionLevel) {\n            operationDescription.zlibCompressionLevel = conn[kDescription].zlibCompressionLevel;\n        }\n    }\n    if (typeof options.socketTimeoutMS === \"number\") {\n        conn[kStream].setTimeout(options.socketTimeoutMS);\n    } else if (conn.socketTimeoutMS !== 0) {\n        conn[kStream].setTimeout(conn.socketTimeoutMS);\n    }\n    // if command monitoring is enabled we need to modify the callback here\n    if (conn.monitorCommands) {\n        conn.emit(Connection.COMMAND_STARTED, new command_monitoring_events_1.CommandStartedEvent(conn, command));\n        operationDescription.started = (0, utils_1.now)();\n        operationDescription.cb = (err, reply)=>{\n            // Command monitoring spec states that if ok is 1, then we must always emit\n            // a command succeeded event, even if there's an error. Write concern errors\n            // will have an ok: 1 in their reply.\n            if (err && reply?.ok !== 1) {\n                conn.emit(Connection.COMMAND_FAILED, new command_monitoring_events_1.CommandFailedEvent(conn, command, err, operationDescription.started));\n            } else {\n                if (reply && (reply.ok === 0 || reply.$err)) {\n                    conn.emit(Connection.COMMAND_FAILED, new command_monitoring_events_1.CommandFailedEvent(conn, command, reply, operationDescription.started));\n                } else {\n                    conn.emit(Connection.COMMAND_SUCCEEDED, new command_monitoring_events_1.CommandSucceededEvent(conn, command, reply, operationDescription.started));\n                }\n            }\n            if (typeof callback === \"function\") {\n                // Since we're passing through the reply with the write concern error now, we\n                // need it not to be provided to the original callback in this case so\n                // retryability does not get tricked into thinking the command actually\n                // succeeded.\n                callback(err, err instanceof error_1.MongoWriteConcernError ? undefined : reply);\n            }\n        };\n    }\n    if (!operationDescription.noResponse) {\n        conn[kQueue].set(operationDescription.requestId, operationDescription);\n    }\n    try {\n        conn[kMessageStream].writeCommand(command, operationDescription);\n    } catch (e) {\n        if (!operationDescription.noResponse) {\n            conn[kQueue].delete(operationDescription.requestId);\n            operationDescription.cb(e);\n            return;\n        }\n    }\n    if (operationDescription.noResponse) {\n        operationDescription.cb();\n    }\n} //# sourceMappingURL=connection.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb25uZWN0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx5QkFBeUIsR0FBR0Esd0JBQXdCLEdBQUdBLGtCQUFrQixHQUFHLEtBQUs7QUFDakYsTUFBTUssV0FBV0MsbUJBQU9BLENBQUMsc0JBQVE7QUFDakMsTUFBTUMsU0FBU0QsbUJBQU9BLENBQUMsa0JBQU07QUFDN0IsTUFBTUUsY0FBY0YsbUJBQU9BLENBQUMsbUVBQWM7QUFDMUMsTUFBTUcsVUFBVUgsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUksZ0JBQWdCSixtQkFBT0EsQ0FBQyx1RUFBZ0I7QUFDOUMsTUFBTUssYUFBYUwsbUJBQU9BLENBQUMsaUVBQWE7QUFDeEMsTUFBTU0sVUFBVU4sbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTU8sOEJBQThCUCxtQkFBT0EsQ0FBQyx1R0FBNkI7QUFDekUsTUFBTVEsYUFBYVIsbUJBQU9BLENBQUMscUVBQVk7QUFDdkMsTUFBTVMsbUJBQW1CVCxtQkFBT0EsQ0FBQyxpRkFBa0I7QUFDbkQsTUFBTVUsdUJBQXVCVixtQkFBT0EsQ0FBQyx5RkFBc0I7QUFDM0QsTUFBTVcsV0FBV1gsbUJBQU9BLENBQUMsNkZBQXdCO0FBQ2pELGNBQWMsR0FDZCxNQUFNWSxVQUFVQyxPQUFPO0FBQ3ZCLGNBQWMsR0FDZCxNQUFNQyxTQUFTRCxPQUFPO0FBQ3RCLGNBQWMsR0FDZCxNQUFNRSxpQkFBaUJGLE9BQU87QUFDOUIsY0FBYyxHQUNkLE1BQU1HLGNBQWNILE9BQU87QUFDM0IsY0FBYyxHQUNkLE1BQU1JLGVBQWVKLE9BQU87QUFDNUIsY0FBYyxHQUNkLE1BQU1LLGVBQWVMLE9BQU87QUFDNUIsY0FBYyxHQUNkLE1BQU1NLGVBQWVOLE9BQU87QUFDNUIsY0FBYyxHQUNkLE1BQU1PLFNBQVNQLE9BQU87QUFDdEIsY0FB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LDRCQUE0QmlNLHFCQUFxQixDQUFDMUIsTUFBTTdJLFNBQVNxSyxPQUFPekgscUJBQXFCb0gsT0FBTztnQkFDcEo7WUFDSjtZQUNBLElBQUksT0FBT2pLLGFBQWEsWUFBWTtnQkFDaEMsNkVBQTZFO2dCQUM3RSxzRUFBc0U7Z0JBQ3RFLHVFQUF1RTtnQkFDdkUsYUFBYTtnQkFDYkEsU0FBUzRELEtBQUtBLGVBQWV6RixRQUFRaUcsc0JBQXNCLEdBQUdNLFlBQVk0RjtZQUM5RTtRQUNKO0lBQ0o7SUFDQSxJQUFJLENBQUN6SCxxQkFBcUIyRyxVQUFVLEVBQUU7UUFDbENWLElBQUksQ0FBQ2hLLE9BQU8sQ0FBQzRFLEdBQUcsQ0FBQ2IscUJBQXFCUSxTQUFTLEVBQUVSO0lBQ3JEO0lBQ0EsSUFBSTtRQUNBaUcsSUFBSSxDQUFDL0osZUFBZSxDQUFDMEwsWUFBWSxDQUFDeEssU0FBUzRDO0lBQy9DLEVBQ0EsT0FBTzZILEdBQUc7UUFDTixJQUFJLENBQUM3SCxxQkFBcUIyRyxVQUFVLEVBQUU7WUFDbENWLElBQUksQ0FBQ2hLLE9BQU8sQ0FBQ3lFLE1BQU0sQ0FBQ1YscUJBQXFCUSxTQUFTO1lBQ2xEUixxQkFBcUJXLEVBQUUsQ0FBQ2tIO1lBQ3hCO1FBQ0o7SUFDSjtJQUNBLElBQUk3SCxxQkFBcUIyRyxVQUFVLEVBQUU7UUFDakMzRyxxQkFBcUJXLEVBQUU7SUFDM0I7QUFDSixFQUNBLHNDQUFzQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2Nvbm5lY3Rpb24uanM/ZmU4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuaGFzU2Vzc2lvblN1cHBvcnQgPSBleHBvcnRzLkNyeXB0b0Nvbm5lY3Rpb24gPSBleHBvcnRzLkNvbm5lY3Rpb24gPSB2b2lkIDA7XG5jb25zdCB0aW1lcnNfMSA9IHJlcXVpcmUoXCJ0aW1lcnNcIik7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwidXRpbFwiKTtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBtb25nb190eXBlc18xID0gcmVxdWlyZShcIi4uL21vbmdvX3R5cGVzXCIpO1xuY29uc3Qgc2Vzc2lvbnNfMSA9IHJlcXVpcmUoXCIuLi9zZXNzaW9uc1wiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBjb21tYW5kX21vbml0b3JpbmdfZXZlbnRzXzEgPSByZXF1aXJlKFwiLi9jb21tYW5kX21vbml0b3JpbmdfZXZlbnRzXCIpO1xuY29uc3QgY29tbWFuZHNfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRzXCIpO1xuY29uc3QgbWVzc2FnZV9zdHJlYW1fMSA9IHJlcXVpcmUoXCIuL21lc3NhZ2Vfc3RyZWFtXCIpO1xuY29uc3Qgc3RyZWFtX2Rlc2NyaXB0aW9uXzEgPSByZXF1aXJlKFwiLi9zdHJlYW1fZGVzY3JpcHRpb25cIik7XG5jb25zdCBzaGFyZWRfMSA9IHJlcXVpcmUoXCIuL3dpcmVfcHJvdG9jb2wvc2hhcmVkXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga1N0cmVhbSA9IFN5bWJvbCgnc3RyZWFtJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrUXVldWUgPSBTeW1ib2woJ3F1ZXVlJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrTWVzc2FnZVN0cmVhbSA9IFN5bWJvbCgnbWVzc2FnZVN0cmVhbScpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0dlbmVyYXRpb24gPSBTeW1ib2woJ2dlbmVyYXRpb24nKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtMYXN0VXNlVGltZSA9IFN5bWJvbCgnbGFzdFVzZVRpbWUnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtDbHVzdGVyVGltZSA9IFN5bWJvbCgnY2x1c3RlclRpbWUnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtEZXNjcmlwdGlvbiA9IFN5bWJvbCgnZGVzY3JpcHRpb24nKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtIZWxsbyA9IFN5bWJvbCgnaGVsbG8nKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtBdXRvRW5jcnlwdGVyID0gU3ltYm9sKCdhdXRvRW5jcnlwdGVyJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrRGVsYXllZFRpbWVvdXRJZCA9IFN5bWJvbCgnZGVsYXllZFRpbWVvdXRJZCcpO1xuY29uc3QgSU5WQUxJRF9RVUVVRV9TSVpFID0gJ0Nvbm5lY3Rpb24gaW50ZXJuYWwgcXVldWUgY29udGFpbnMgbW9yZSB0aGFuIDEgb3BlcmF0aW9uIGRlc2NyaXB0aW9uJztcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIENvbm5lY3Rpb24gZXh0ZW5kcyBtb25nb190eXBlc18xLlR5cGVkRXZlbnRFbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcihzdHJlYW0sIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQXN5bmMgPSAoMCwgdXRpbF8xLnByb21pc2lmeSkoKG5zLCBjbWQsIG9wdGlvbnMsIGNhbGxiYWNrKSA9PiB0aGlzLmNvbW1hbmQobnMsIGNtZCwgb3B0aW9ucywgY2FsbGJhY2spKTtcbiAgICAgICAgdGhpcy5pZCA9IG9wdGlvbnMuaWQ7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IHN0cmVhbUlkZW50aWZpZXIoc3RyZWFtLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5zb2NrZXRUaW1lb3V0TVMgPSBvcHRpb25zLnNvY2tldFRpbWVvdXRNUyA/PyAwO1xuICAgICAgICB0aGlzLm1vbml0b3JDb21tYW5kcyA9IG9wdGlvbnMubW9uaXRvckNvbW1hbmRzO1xuICAgICAgICB0aGlzLnNlcnZlckFwaSA9IG9wdGlvbnMuc2VydmVyQXBpO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzW2tIZWxsb10gPSBudWxsO1xuICAgICAgICB0aGlzW2tDbHVzdGVyVGltZV0gPSBudWxsO1xuICAgICAgICB0aGlzW2tEZXNjcmlwdGlvbl0gPSBuZXcgc3RyZWFtX2Rlc2NyaXB0aW9uXzEuU3RyZWFtRGVzY3JpcHRpb24odGhpcy5hZGRyZXNzLCBvcHRpb25zKTtcbiAgICAgICAgdGhpc1trR2VuZXJhdGlvbl0gPSBvcHRpb25zLmdlbmVyYXRpb247XG4gICAgICAgIHRoaXNba0xhc3RVc2VUaW1lXSA9ICgwLCB1dGlsc18xLm5vdykoKTtcbiAgICAgICAgLy8gc2V0dXAgcGFyc2VyIHN0cmVhbSBhbmQgbWVzc2FnZSBoYW5kbGluZ1xuICAgICAgICB0aGlzW2tRdWV1ZV0gPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXNba01lc3NhZ2VTdHJlYW1dID0gbmV3IG1lc3NhZ2Vfc3RyZWFtXzEuTWVzc2FnZVN0cmVhbSh7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgbWF4QnNvbk1lc3NhZ2VTaXplOiB0aGlzLmhlbGxvPy5tYXhCc29uTWVzc2FnZVNpemVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXNba1N0cmVhbV0gPSBzdHJlYW07XG4gICAgICAgIHRoaXNba0RlbGF5ZWRUaW1lb3V0SWRdID0gbnVsbDtcbiAgICAgICAgdGhpc1trTWVzc2FnZVN0cmVhbV0ub24oJ21lc3NhZ2UnLCBtZXNzYWdlID0+IHRoaXMub25NZXNzYWdlKG1lc3NhZ2UpKTtcbiAgICAgICAgdGhpc1trTWVzc2FnZVN0cmVhbV0ub24oJ2Vycm9yJywgZXJyb3IgPT4gdGhpcy5vbkVycm9yKGVycm9yKSk7XG4gICAgICAgIHRoaXNba1N0cmVhbV0ub24oJ2Nsb3NlJywgKCkgPT4gdGhpcy5vbkNsb3NlKCkpO1xuICAgICAgICB0aGlzW2tTdHJlYW1dLm9uKCd0aW1lb3V0JywgKCkgPT4gdGhpcy5vblRpbWVvdXQoKSk7XG4gICAgICAgIHRoaXNba1N0cmVhbV0ub24oJ2Vycm9yJywgKCkgPT4ge1xuICAgICAgICAgICAgLyogaWdub3JlIGVycm9ycywgbGlzdGVuIHRvIGBjbG9zZWAgaW5zdGVhZCAqL1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gaG9vayB0aGUgbWVzc2FnZSBzdHJlYW0gdXAgdG8gdGhlIHBhc3NlZCBpbiBzdHJlYW1cbiAgICAgICAgdGhpc1trU3RyZWFtXS5waXBlKHRoaXNba01lc3NhZ2VTdHJlYW1dKTtcbiAgICAgICAgdGhpc1trTWVzc2FnZVN0cmVhbV0ucGlwZSh0aGlzW2tTdHJlYW1dKTtcbiAgICB9XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trRGVzY3JpcHRpb25dO1xuICAgIH1cbiAgICBnZXQgaGVsbG8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tIZWxsb107XG4gICAgfVxuICAgIC8vIHRoZSBgY29ubmVjdGAgbWV0aG9kIHN0b3JlcyB0aGUgcmVzdWx0IG9mIHRoZSBoYW5kc2hha2UgaGVsbG8gb24gdGhlIGNvbm5lY3Rpb25cbiAgICBzZXQgaGVsbG8ocmVzcG9uc2UpIHtcbiAgICAgICAgdGhpc1trRGVzY3JpcHRpb25dLnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgIHRoaXNba0Rlc2NyaXB0aW9uXSA9IE9iamVjdC5mcmVlemUodGhpc1trRGVzY3JpcHRpb25dKTtcbiAgICAgICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMsIGFuZCBvbmx5IHVzZSB0aGUgYFN0cmVhbURlc2NyaXB0aW9uYCBpbiB0aGUgZnV0dXJlXG4gICAgICAgIHRoaXNba0hlbGxvXSA9IHJlc3BvbnNlO1xuICAgIH1cbiAgICAvLyBTZXQgdGhlIHdoZXRoZXIgdGhlIG1lc3NhZ2Ugc3RyZWFtIGlzIGZvciBhIG1vbml0b3JpbmcgY29ubmVjdGlvbi5cbiAgICBzZXQgaXNNb25pdG9yaW5nQ29ubmVjdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzW2tNZXNzYWdlU3RyZWFtXS5pc01vbml0b3JpbmdDb25uZWN0aW9uID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBpc01vbml0b3JpbmdDb25uZWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trTWVzc2FnZVN0cmVhbV0uaXNNb25pdG9yaW5nQ29ubmVjdGlvbjtcbiAgICB9XG4gICAgZ2V0IHNlcnZpY2VJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVsbG8/LnNlcnZpY2VJZDtcbiAgICB9XG4gICAgZ2V0IGxvYWRCYWxhbmNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzY3JpcHRpb24ubG9hZEJhbGFuY2VkO1xuICAgIH1cbiAgICBnZXQgZ2VuZXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba0dlbmVyYXRpb25dIHx8IDA7XG4gICAgfVxuICAgIHNldCBnZW5lcmF0aW9uKGdlbmVyYXRpb24pIHtcbiAgICAgICAgdGhpc1trR2VuZXJhdGlvbl0gPSBnZW5lcmF0aW9uO1xuICAgIH1cbiAgICBnZXQgaWRsZVRpbWUoKSB7XG4gICAgICAgIHJldHVybiAoMCwgdXRpbHNfMS5jYWxjdWxhdGVEdXJhdGlvbkluTXMpKHRoaXNba0xhc3RVc2VUaW1lXSk7XG4gICAgfVxuICAgIGdldCBjbHVzdGVyVGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba0NsdXN0ZXJUaW1lXTtcbiAgICB9XG4gICAgZ2V0IHN0cmVhbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba1N0cmVhbV07XG4gICAgfVxuICAgIG1hcmtBdmFpbGFibGUoKSB7XG4gICAgICAgIHRoaXNba0xhc3RVc2VUaW1lXSA9ICgwLCB1dGlsc18xLm5vdykoKTtcbiAgICB9XG4gICAgb25FcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLmNsZWFudXAodHJ1ZSwgZXJyb3IpO1xuICAgIH1cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYGNvbm5lY3Rpb24gJHt0aGlzLmlkfSB0byAke3RoaXMuYWRkcmVzc30gY2xvc2VkYDtcbiAgICAgICAgdGhpcy5jbGVhbnVwKHRydWUsIG5ldyBlcnJvcl8xLk1vbmdvTmV0d29ya0Vycm9yKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgb25UaW1lb3V0KCkge1xuICAgICAgICB0aGlzW2tEZWxheWVkVGltZW91dElkXSA9ICgwLCB0aW1lcnNfMS5zZXRUaW1lb3V0KSgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYGNvbm5lY3Rpb24gJHt0aGlzLmlkfSB0byAke3RoaXMuYWRkcmVzc30gdGltZWQgb3V0YDtcbiAgICAgICAgICAgIGNvbnN0IGJlZm9yZUhhbmRzaGFrZSA9IHRoaXMuaGVsbG8gPT0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY2xlYW51cCh0cnVlLCBuZXcgZXJyb3JfMS5Nb25nb05ldHdvcmtUaW1lb3V0RXJyb3IobWVzc2FnZSwgeyBiZWZvcmVIYW5kc2hha2UgfSkpO1xuICAgICAgICB9LCAxKS51bnJlZigpOyAvLyBObyBuZWVkIGZvciB0aGlzIHRpbWVyIHRvIGhvbGQgdGhlIGV2ZW50IGxvb3Agb3BlblxuICAgIH1cbiAgICBvbk1lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICBjb25zdCBkZWxheWVkVGltZW91dElkID0gdGhpc1trRGVsYXllZFRpbWVvdXRJZF07XG4gICAgICAgIGlmIChkZWxheWVkVGltZW91dElkICE9IG51bGwpIHtcbiAgICAgICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKGRlbGF5ZWRUaW1lb3V0SWQpO1xuICAgICAgICAgICAgdGhpc1trRGVsYXllZFRpbWVvdXRJZF0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNvY2tldFRpbWVvdXRNUyA9IHRoaXNba1N0cmVhbV0udGltZW91dCA/PyAwO1xuICAgICAgICB0aGlzW2tTdHJlYW1dLnNldFRpbWVvdXQoMCk7XG4gICAgICAgIC8vIGFsd2F5cyBlbWl0IHRoZSBtZXNzYWdlLCBpbiBjYXNlIHdlIGFyZSBzdHJlYW1pbmdcbiAgICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgbWVzc2FnZSk7XG4gICAgICAgIGxldCBvcGVyYXRpb25EZXNjcmlwdGlvbiA9IHRoaXNba1F1ZXVlXS5nZXQobWVzc2FnZS5yZXNwb25zZVRvKTtcbiAgICAgICAgaWYgKCFvcGVyYXRpb25EZXNjcmlwdGlvbiAmJiB0aGlzLmlzTW9uaXRvcmluZ0Nvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgaG93IHdlIHJlY292ZXIgd2hlbiB0aGUgaW5pdGlhbCBoZWxsbydzIHJlcXVlc3RJZCBpcyBub3RcbiAgICAgICAgICAgIC8vIHRoZSByZXNwb25zZVRvIHdoZW4gaGVsbG8gcmVzcG9uc2VzIGhhdmUgYmVlbiBza2lwcGVkOlxuICAgICAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhlIG1hcCBpcyBvZiBpbnZhbGlkIHNpemVcbiAgICAgICAgICAgIGlmICh0aGlzW2tRdWV1ZV0uc2l6ZSA+IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFudXAodHJ1ZSwgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoSU5WQUxJRF9RVUVVRV9TSVpFKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGZpcnN0IG9ycGhhbmVkIG9wZXJhdGlvbiBkZXNjcmlwdGlvbi5cbiAgICAgICAgICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXNba1F1ZXVlXS5lbnRyaWVzKCkubmV4dCgpO1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS52YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFtyZXF1ZXN0SWQsIG9ycGhhbmVkXSA9IGVudHJ5LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgb3JwaGFuZWQgb3BlcmF0aW9uIGRlc2NyaXB0aW9uIGV4aXN0cyB0aGVuIHNldCBpdC5cbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uRGVzY3JpcHRpb24gPSBvcnBoYW5lZDtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBlbnRyeSB3aXRoIHRoZSBiYWQgcmVxdWVzdCBpZCBmcm9tIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgICAgICAgICAgdGhpc1trUXVldWVdLmRlbGV0ZShyZXF1ZXN0SWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9wZXJhdGlvbkRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBvcGVyYXRpb25EZXNjcmlwdGlvbi5jYjtcbiAgICAgICAgLy8gU0VSVkVSLTQ1Nzc1OiBGb3IgZXhoYXVzdCByZXNwb25zZXMgd2Ugc2hvdWxkIGJlIGFibGUgdG8gdXNlIHRoZSBzYW1lIHJlcXVlc3RJZCB0b1xuICAgICAgICAvLyB0cmFjayByZXNwb25zZSwgaG93ZXZlciB0aGUgc2VydmVyIGN1cnJlbnRseSBzeW50aGV0aWNhbGx5IHByb2R1Y2VzIHJlbW90ZSByZXF1ZXN0c1xuICAgICAgICAvLyBtYWtpbmcgdGhlIGByZXNwb25zZVRvYCBjaGFuZ2Ugb24gZWFjaCByZXNwb25zZVxuICAgICAgICB0aGlzW2tRdWV1ZV0uZGVsZXRlKG1lc3NhZ2UucmVzcG9uc2VUbyk7XG4gICAgICAgIGlmICgnbW9yZVRvQ29tZScgaW4gbWVzc2FnZSAmJiBtZXNzYWdlLm1vcmVUb0NvbWUpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBvcGVyYXRpb24gZGVzY3JpcHRpb24gY2hlY2sgYWJvdmUgZG9lcyBmaW5kIGFuIG9ycGhhbmVkXG4gICAgICAgICAgICAvLyBkZXNjcmlwdGlvbiBhbmQgc2V0cyB0aGUgb3BlcmF0aW9uRGVzY3JpcHRpb24gdGhlbiB0aGlzIGxpbmUgd2lsbCBwdXQgb25lXG4gICAgICAgICAgICAvLyBiYWNrIGluIHRoZSBxdWV1ZSB3aXRoIHRoZSBjb3JyZWN0IHJlcXVlc3RJZCBhbmQgd2lsbCByZXNvbHZlIG5vdCBiZWluZyBhYmxlXG4gICAgICAgICAgICAvLyB0byBmaW5kIHRoZSBuZXh0IG9uZSB2aWEgdGhlIHJlc3BvbnNlVG8gb2YgdGhlIG5leHQgc3RyZWFtaW5nIGhlbGxvLlxuICAgICAgICAgICAgdGhpc1trUXVldWVdLnNldChtZXNzYWdlLnJlcXVlc3RJZCwgb3BlcmF0aW9uRGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgdGhpc1trU3RyZWFtXS5zZXRUaW1lb3V0KHNvY2tldFRpbWVvdXRNUyk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFBhc3MgaW4gdGhlIGVudGlyZSBkZXNjcmlwdGlvbiBiZWNhdXNlIGl0IGhhcyBCU09OIHBhcnNpbmcgb3B0aW9uc1xuICAgICAgICAgICAgbWVzc2FnZS5wYXJzZShvcGVyYXRpb25EZXNjcmlwdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgLy8gSWYgdGhpcyBlcnJvciBpcyBnZW5lcmF0ZWQgYnkgb3VyIG93biBjb2RlLCBpdCB3aWxsIGFscmVhZHkgaGF2ZSB0aGUgY29ycmVjdCBjbGFzcyBhcHBsaWVkXG4gICAgICAgICAgICAvLyBpZiBpdCBpcyBub3QsIHRoZW4gaXQgaXMgY29taW5nIGZyb20gYSBjYXRhc3Ryb3BoaWMgZGF0YSBwYXJzZSBmYWlsdXJlIG9yIHRoZSBCU09OIGxpYnJhcnlcbiAgICAgICAgICAgIC8vIGluIGVpdGhlciBjYXNlLCBpdCBzaG91bGQgbm90IGJlIHdyYXBwZWRcbiAgICAgICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZG9jdW1lbnRzWzBdKSB7XG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IG1lc3NhZ2UuZG9jdW1lbnRzWzBdO1xuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IG9wZXJhdGlvbkRlc2NyaXB0aW9uLnNlc3Npb247XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICAgICAgICAgICgwLCBzZXNzaW9uc18xLnVwZGF0ZVNlc3Npb25Gcm9tUmVzcG9uc2UpKHNlc3Npb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkb2N1bWVudC4kY2x1c3RlclRpbWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzW2tDbHVzdGVyVGltZV0gPSBkb2N1bWVudC4kY2x1c3RlclRpbWU7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KENvbm5lY3Rpb24uQ0xVU1RFUl9USU1FX1JFQ0VJVkVELCBkb2N1bWVudC4kY2x1c3RlclRpbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LndyaXRlQ29uY2VybkVycm9yKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29Xcml0ZUNvbmNlcm5FcnJvcihkb2N1bWVudC53cml0ZUNvbmNlcm5FcnJvciwgZG9jdW1lbnQpLCBkb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRvY3VtZW50Lm9rID09PSAwIHx8IGRvY3VtZW50LiRlcnIgfHwgZG9jdW1lbnQuZXJybXNnIHx8IGRvY3VtZW50LmNvZGUpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yKGRvY3VtZW50KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwgbWVzc2FnZS5kb2N1bWVudHNbMF0pO1xuICAgIH1cbiAgICBkZXN0cm95KG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljaygoKSA9PiBjYWxsYmFjaz8uKCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMub25jZSgnY2xvc2UnLCAoKSA9PiBwcm9jZXNzLm5leHRUaWNrKCgpID0+IGNhbGxiYWNrKCkpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBsb2FkIGJhbGFuY2VkIG1vZGUgcmVxdWlyZXMgdGhhdCB0aGVzZSBsaXN0ZW5lcnMgcmVtYWluIG9uIHRoZSBjb25uZWN0aW9uXG4gICAgICAgIC8vIGFmdGVyIGNsZWFudXAgb24gdGltZW91dHMsIGVycm9ycyBvciBjbG9zZSBzbyB3ZSByZW1vdmUgdGhlbSBiZWZvcmUgY2FsbGluZ1xuICAgICAgICAvLyBjbGVhbnVwLlxuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhDb25uZWN0aW9uLlBJTk5FRCk7XG4gICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKENvbm5lY3Rpb24uVU5QSU5ORUQpO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYGNvbm5lY3Rpb24gJHt0aGlzLmlkfSB0byAke3RoaXMuYWRkcmVzc30gY2xvc2VkYDtcbiAgICAgICAgdGhpcy5jbGVhbnVwKG9wdGlvbnMuZm9yY2UsIG5ldyBlcnJvcl8xLk1vbmdvTmV0d29ya0Vycm9yKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBtZXRob2QgdGhhdCBjbGVhbnMgdXAgdGhlIGNvbm5lY3Rpb24uICBXaGVuIGBmb3JjZWAgaXMgdHJ1ZSwgdGhpcyBtZXRob2RcbiAgICAgKiBmb3JjaWJseSBkZXN0cm95cyB0aGUgc29ja2V0LlxuICAgICAqXG4gICAgICogSWYgYW4gZXJyb3IgaXMgcHJvdmlkZWQsIGFueSBpbi1mbGlnaHQgb3BlcmF0aW9ucyB3aWxsIGJlIGNsb3NlZCB3aXRoIHRoZSBlcnJvci5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGRvZXMgbm90aGluZyBpZiB0aGUgY29ubmVjdGlvbiBpcyBhbHJlYWR5IGNsb3NlZC5cbiAgICAgKi9cbiAgICBjbGVhbnVwKGZvcmNlLCBlcnJvcikge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlQ2xlYW51cCA9ICgpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3Agb2YgdGhpc1trUXVldWVdLnZhbHVlcygpKSB7XG4gICAgICAgICAgICAgICAgb3AuY2IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpc1trUXVldWVdLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoQ29ubmVjdGlvbi5DTE9TRSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXNba1N0cmVhbV0ucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXNba01lc3NhZ2VTdHJlYW1dLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgICB0aGlzW2tNZXNzYWdlU3RyZWFtXS5kZXN0cm95KCk7XG4gICAgICAgIGlmIChmb3JjZSkge1xuICAgICAgICAgICAgdGhpc1trU3RyZWFtXS5kZXN0cm95KCk7XG4gICAgICAgICAgICBjb21wbGV0ZUNsZWFudXAoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXNba1N0cmVhbV0ud3JpdGFibGVFbmRlZCkge1xuICAgICAgICAgICAgdGhpc1trU3RyZWFtXS5lbmQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXNba1N0cmVhbV0uZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlQ2xlYW51cCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb21wbGV0ZUNsZWFudXAoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21tYW5kKG5zLCBjb21tYW5kLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgICAgICBsZXQgY21kID0geyAuLi5jb21tYW5kIH07XG4gICAgICAgIGNvbnN0IHJlYWRQcmVmZXJlbmNlID0gKDAsIHNoYXJlZF8xLmdldFJlYWRQcmVmZXJlbmNlKShvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgc2hvdWxkVXNlT3BNc2cgPSBzdXBwb3J0c09wTXNnKHRoaXMpO1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gb3B0aW9ucz8uc2Vzc2lvbjtcbiAgICAgICAgbGV0IGNsdXN0ZXJUaW1lID0gdGhpcy5jbHVzdGVyVGltZTtcbiAgICAgICAgaWYgKHRoaXMuc2VydmVyQXBpKSB7XG4gICAgICAgICAgICBjb25zdCB7IHZlcnNpb24sIHN0cmljdCwgZGVwcmVjYXRpb25FcnJvcnMgfSA9IHRoaXMuc2VydmVyQXBpO1xuICAgICAgICAgICAgY21kLmFwaVZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgICAgICAgaWYgKHN0cmljdCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIGNtZC5hcGlTdHJpY3QgPSBzdHJpY3Q7XG4gICAgICAgICAgICBpZiAoZGVwcmVjYXRpb25FcnJvcnMgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBjbWQuYXBpRGVwcmVjYXRpb25FcnJvcnMgPSBkZXByZWNhdGlvbkVycm9ycztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzU2Vzc2lvblN1cHBvcnQodGhpcykgJiYgc2Vzc2lvbikge1xuICAgICAgICAgICAgaWYgKHNlc3Npb24uY2x1c3RlclRpbWUgJiZcbiAgICAgICAgICAgICAgICBjbHVzdGVyVGltZSAmJlxuICAgICAgICAgICAgICAgIHNlc3Npb24uY2x1c3RlclRpbWUuY2x1c3RlclRpbWUuZ3JlYXRlclRoYW4oY2x1c3RlclRpbWUuY2x1c3RlclRpbWUpKSB7XG4gICAgICAgICAgICAgICAgY2x1c3RlclRpbWUgPSBzZXNzaW9uLmNsdXN0ZXJUaW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZXJyID0gKDAsIHNlc3Npb25zXzEuYXBwbHlTZXNzaW9uKShzZXNzaW9uLCBjbWQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlc3Npb24/LmV4cGxpY2l0KSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IoJ0N1cnJlbnQgdG9wb2xvZ3kgZG9lcyBub3Qgc3VwcG9ydCBzZXNzaW9ucycpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiB3ZSBoYXZlIGEga25vd24gY2x1c3RlciB0aW1lLCBnb3NzaXAgaXRcbiAgICAgICAgaWYgKGNsdXN0ZXJUaW1lKSB7XG4gICAgICAgICAgICBjbWQuJGNsdXN0ZXJUaW1lID0gY2x1c3RlclRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCgwLCBzaGFyZWRfMS5pc1NoYXJkZWQpKHRoaXMpICYmICFzaG91bGRVc2VPcE1zZyAmJiByZWFkUHJlZmVyZW5jZSAmJiByZWFkUHJlZmVyZW5jZS5tb2RlICE9PSAncHJpbWFyeScpIHtcbiAgICAgICAgICAgIGNtZCA9IHtcbiAgICAgICAgICAgICAgICAkcXVlcnk6IGNtZCxcbiAgICAgICAgICAgICAgICAkcmVhZFByZWZlcmVuY2U6IHJlYWRQcmVmZXJlbmNlLnRvSlNPTigpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbW1hbmRPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBudW1iZXJUb1NraXA6IDAsXG4gICAgICAgICAgICBudW1iZXJUb1JldHVybjogLTEsXG4gICAgICAgICAgICBjaGVja0tleXM6IGZhbHNlLFxuICAgICAgICAgICAgLy8gVGhpcyB2YWx1ZSBpcyBub3Qgb3ZlcnJpZGFibGVcbiAgICAgICAgICAgIHNlY29uZGFyeU9rOiByZWFkUHJlZmVyZW5jZS5zZWNvbmRhcnlPaygpXG4gICAgICAgIH0sIG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjbWROcyA9IGAke25zLmRifS4kY21kYDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHNob3VsZFVzZU9wTXNnXG4gICAgICAgICAgICA/IG5ldyBjb21tYW5kc18xLk1zZyhjbWROcywgY21kLCBjb21tYW5kT3B0aW9ucylcbiAgICAgICAgICAgIDogbmV3IGNvbW1hbmRzXzEuUXVlcnkoY21kTnMsIGNtZCwgY29tbWFuZE9wdGlvbnMpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd3JpdGUodGhpcywgbWVzc2FnZSwgY29tbWFuZE9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqIEBldmVudCAqL1xuQ29ubmVjdGlvbi5DT01NQU5EX1NUQVJURUQgPSBjb25zdGFudHNfMS5DT01NQU5EX1NUQVJURUQ7XG4vKiogQGV2ZW50ICovXG5Db25uZWN0aW9uLkNPTU1BTkRfU1VDQ0VFREVEID0gY29uc3RhbnRzXzEuQ09NTUFORF9TVUNDRUVERUQ7XG4vKiogQGV2ZW50ICovXG5Db25uZWN0aW9uLkNPTU1BTkRfRkFJTEVEID0gY29uc3RhbnRzXzEuQ09NTUFORF9GQUlMRUQ7XG4vKiogQGV2ZW50ICovXG5Db25uZWN0aW9uLkNMVVNURVJfVElNRV9SRUNFSVZFRCA9IGNvbnN0YW50c18xLkNMVVNURVJfVElNRV9SRUNFSVZFRDtcbi8qKiBAZXZlbnQgKi9cbkNvbm5lY3Rpb24uQ0xPU0UgPSBjb25zdGFudHNfMS5DTE9TRTtcbi8qKiBAZXZlbnQgKi9cbkNvbm5lY3Rpb24uTUVTU0FHRSA9IGNvbnN0YW50c18xLk1FU1NBR0U7XG4vKiogQGV2ZW50ICovXG5Db25uZWN0aW9uLlBJTk5FRCA9IGNvbnN0YW50c18xLlBJTk5FRDtcbi8qKiBAZXZlbnQgKi9cbkNvbm5lY3Rpb24uVU5QSU5ORUQgPSBjb25zdGFudHNfMS5VTlBJTk5FRDtcbmV4cG9ydHMuQ29ubmVjdGlvbiA9IENvbm5lY3Rpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBDcnlwdG9Db25uZWN0aW9uIGV4dGVuZHMgQ29ubmVjdGlvbiB7XG4gICAgY29uc3RydWN0b3Ioc3RyZWFtLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKHN0cmVhbSwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXNba0F1dG9FbmNyeXB0ZXJdID0gb3B0aW9ucy5hdXRvRW5jcnlwdGVyO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsIEBvdmVycmlkZSAqL1xuICAgIGNvbW1hbmQobnMsIGNtZCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgYXV0b0VuY3J5cHRlciA9IHRoaXNba0F1dG9FbmNyeXB0ZXJdO1xuICAgICAgICBpZiAoIWF1dG9FbmNyeXB0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb01pc3NpbmdEZXBlbmRlbmN5RXJyb3IoJ05vIEF1dG9FbmNyeXB0ZXIgYXZhaWxhYmxlIGZvciBlbmNyeXB0aW9uJykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlcnZlcldpcmVWZXJzaW9uID0gKDAsIHV0aWxzXzEubWF4V2lyZVZlcnNpb24pKHRoaXMpO1xuICAgICAgICBpZiAoc2VydmVyV2lyZVZlcnNpb24gPT09IDApIHtcbiAgICAgICAgICAgIC8vIFRoaXMgbWVhbnMgdGhlIGluaXRpYWwgaGFuZHNoYWtlIGhhc24ndCBoYXBwZW5lZCB5ZXRcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5jb21tYW5kKG5zLCBjbWQsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VydmVyV2lyZVZlcnNpb24gPCA4KSB7XG4gICAgICAgICAgICBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb0NvbXBhdGliaWxpdHlFcnJvcignQXV0by1lbmNyeXB0aW9uIHJlcXVpcmVzIGEgbWluaW11bSBNb25nb0RCIHZlcnNpb24gb2YgNC4yJykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNhdmUgc29ydCBvciBpbmRleEtleXMgYmFzZWQgb24gdGhlIGNvbW1hbmQgYmVpbmcgcnVuXG4gICAgICAgIC8vIHRoZSBlbmNyeXB0IEFQSSBzZXJpYWxpemVzIG91ciBKUyBvYmplY3RzIHRvIEJTT04gdG8gcGFzcyB0byB0aGUgbmF0aXZlIGNvZGUgbGF5ZXJcbiAgICAgICAgLy8gYW5kIHRoZW4gZGVzZXJpYWxpemVzIHRoZSBlbmNyeXB0ZWQgcmVzdWx0LCB0aGUgcHJvdG9jb2wgbGV2ZWwgY29tcG9uZW50c1xuICAgICAgICAvLyBvZiB0aGUgY29tbWFuZCAoZXguIHNvcnQpIGFyZSB0aGVuIGNvbnZlcnRlZCB0byBKUyBvYmplY3RzIHBvdGVudGlhbGx5IGxvc2luZ1xuICAgICAgICAvLyBpbXBvcnQga2V5IG9yZGVyIGluZm9ybWF0aW9uLiBUaGVzZSBmaWVsZHMgYXJlIG5ldmVyIGVuY3J5cHRlZCBzbyB3ZSBjYW4gc2F2ZSB0aGUgdmFsdWVzXG4gICAgICAgIC8vIGZyb20gYmVmb3JlIHRoZSBlbmNyeXB0aW9uIGFuZCByZXBsYWNlIHRoZW0gYWZ0ZXIgZW5jcnlwdGlvbiBoYXMgYmVlbiBwZXJmb3JtZWRcbiAgICAgICAgY29uc3Qgc29ydCA9IGNtZC5maW5kIHx8IGNtZC5maW5kQW5kTW9kaWZ5ID8gY21kLnNvcnQgOiBudWxsO1xuICAgICAgICBjb25zdCBpbmRleEtleXMgPSBjbWQuY3JlYXRlSW5kZXhlc1xuICAgICAgICAgICAgPyBjbWQuaW5kZXhlcy5tYXAoKGluZGV4KSA9PiBpbmRleC5rZXkpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIGF1dG9FbmNyeXB0ZXIuZW5jcnlwdChucy50b1N0cmluZygpLCBjbWQsIG9wdGlvbnMsIChlcnIsIGVuY3J5cHRlZCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVyciB8fCBlbmNyeXB0ZWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgc2F2ZWQgdmFsdWVzXG4gICAgICAgICAgICBpZiAoc29ydCAhPSBudWxsICYmIChjbWQuZmluZCB8fCBjbWQuZmluZEFuZE1vZGlmeSkpIHtcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWQuc29ydCA9IHNvcnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5kZXhLZXlzICE9IG51bGwgJiYgY21kLmNyZWF0ZUluZGV4ZXMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtvZmZzZXQsIGluZGV4XSBvZiBpbmRleEtleXMuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZC5pbmRleGVzW29mZnNldF0ua2V5ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3VwZXIuY29tbWFuZChucywgZW5jcnlwdGVkLCBvcHRpb25zLCAoZXJyLCByZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIgfHwgcmVzcG9uc2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhdXRvRW5jcnlwdGVyLmRlY3J5cHQocmVzcG9uc2UsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkNyeXB0b0Nvbm5lY3Rpb24gPSBDcnlwdG9Db25uZWN0aW9uO1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gaGFzU2Vzc2lvblN1cHBvcnQoY29ubikge1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gY29ubi5kZXNjcmlwdGlvbjtcbiAgICByZXR1cm4gZGVzY3JpcHRpb24ubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyAhPSBudWxsO1xufVxuZXhwb3J0cy5oYXNTZXNzaW9uU3VwcG9ydCA9IGhhc1Nlc3Npb25TdXBwb3J0O1xuZnVuY3Rpb24gc3VwcG9ydHNPcE1zZyhjb25uKSB7XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBjb25uLmRlc2NyaXB0aW9uO1xuICAgIGlmIChkZXNjcmlwdGlvbiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuICgwLCB1dGlsc18xLm1heFdpcmVWZXJzaW9uKShjb25uKSA+PSA2ICYmICFkZXNjcmlwdGlvbi5fX25vZGVqc19tb2NrX3NlcnZlcl9fO1xufVxuZnVuY3Rpb24gc3RyZWFtSWRlbnRpZmllcihzdHJlYW0sIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5wcm94eUhvc3QpIHtcbiAgICAgICAgLy8gSWYgcHJveHkgb3B0aW9ucyBhcmUgc3BlY2lmaWVkLCB0aGUgcHJvcGVydGllcyBvZiBgc3RyZWFtYCBpdHNlbGZcbiAgICAgICAgLy8gd2lsbCBub3QgYWNjdXJhdGVseSByZWZsZWN0IHdoYXQgZW5kcG9pbnQgdGhpcyBpcyBjb25uZWN0ZWQgdG8uXG4gICAgICAgIHJldHVybiBvcHRpb25zLmhvc3RBZGRyZXNzLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGNvbnN0IHsgcmVtb3RlQWRkcmVzcywgcmVtb3RlUG9ydCB9ID0gc3RyZWFtO1xuICAgIGlmICh0eXBlb2YgcmVtb3RlQWRkcmVzcyA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIHJlbW90ZVBvcnQgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiB1dGlsc18xLkhvc3RBZGRyZXNzLmZyb21Ib3N0UG9ydChyZW1vdGVBZGRyZXNzLCByZW1vdGVQb3J0KS50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gKDAsIHV0aWxzXzEudXVpZFY0KSgpLnRvU3RyaW5nKCdoZXgnKTtcbn1cbmZ1bmN0aW9uIHdyaXRlKGNvbm4sIGNvbW1hbmQsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgY29uc3Qgb3BlcmF0aW9uRGVzY3JpcHRpb24gPSB7XG4gICAgICAgIHJlcXVlc3RJZDogY29tbWFuZC5yZXF1ZXN0SWQsXG4gICAgICAgIGNiOiBjYWxsYmFjayxcbiAgICAgICAgc2Vzc2lvbjogb3B0aW9ucy5zZXNzaW9uLFxuICAgICAgICBub1Jlc3BvbnNlOiB0eXBlb2Ygb3B0aW9ucy5ub1Jlc3BvbnNlID09PSAnYm9vbGVhbicgPyBvcHRpb25zLm5vUmVzcG9uc2UgOiBmYWxzZSxcbiAgICAgICAgZG9jdW1lbnRzUmV0dXJuZWRJbjogb3B0aW9ucy5kb2N1bWVudHNSZXR1cm5lZEluLFxuICAgICAgICAvLyBmb3IgQlNPTiBwYXJzaW5nXG4gICAgICAgIHVzZUJpZ0ludDY0OiB0eXBlb2Ygb3B0aW9ucy51c2VCaWdJbnQ2NCA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy51c2VCaWdJbnQ2NCA6IGZhbHNlLFxuICAgICAgICBwcm9tb3RlTG9uZ3M6IHR5cGVvZiBvcHRpb25zLnByb21vdGVMb25ncyA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5wcm9tb3RlTG9uZ3MgOiB0cnVlLFxuICAgICAgICBwcm9tb3RlVmFsdWVzOiB0eXBlb2Ygb3B0aW9ucy5wcm9tb3RlVmFsdWVzID09PSAnYm9vbGVhbicgPyBvcHRpb25zLnByb21vdGVWYWx1ZXMgOiB0cnVlLFxuICAgICAgICBwcm9tb3RlQnVmZmVyczogdHlwZW9mIG9wdGlvbnMucHJvbW90ZUJ1ZmZlcnMgPT09ICdib29sZWFuJyA/IG9wdGlvbnMucHJvbW90ZUJ1ZmZlcnMgOiBmYWxzZSxcbiAgICAgICAgYnNvblJlZ0V4cDogdHlwZW9mIG9wdGlvbnMuYnNvblJlZ0V4cCA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5ic29uUmVnRXhwIDogZmFsc2UsXG4gICAgICAgIGVuYWJsZVV0ZjhWYWxpZGF0aW9uOiB0eXBlb2Ygb3B0aW9ucy5lbmFibGVVdGY4VmFsaWRhdGlvbiA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5lbmFibGVVdGY4VmFsaWRhdGlvbiA6IHRydWUsXG4gICAgICAgIHJhdzogdHlwZW9mIG9wdGlvbnMucmF3ID09PSAnYm9vbGVhbicgPyBvcHRpb25zLnJhdyA6IGZhbHNlLFxuICAgICAgICBzdGFydGVkOiAwXG4gICAgfTtcbiAgICBpZiAoY29ubltrRGVzY3JpcHRpb25dICYmIGNvbm5ba0Rlc2NyaXB0aW9uXS5jb21wcmVzc29yKSB7XG4gICAgICAgIG9wZXJhdGlvbkRlc2NyaXB0aW9uLmFncmVlZENvbXByZXNzb3IgPSBjb25uW2tEZXNjcmlwdGlvbl0uY29tcHJlc3NvcjtcbiAgICAgICAgaWYgKGNvbm5ba0Rlc2NyaXB0aW9uXS56bGliQ29tcHJlc3Npb25MZXZlbCkge1xuICAgICAgICAgICAgb3BlcmF0aW9uRGVzY3JpcHRpb24uemxpYkNvbXByZXNzaW9uTGV2ZWwgPSBjb25uW2tEZXNjcmlwdGlvbl0uemxpYkNvbXByZXNzaW9uTGV2ZWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnNvY2tldFRpbWVvdXRNUyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgY29ubltrU3RyZWFtXS5zZXRUaW1lb3V0KG9wdGlvbnMuc29ja2V0VGltZW91dE1TKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29ubi5zb2NrZXRUaW1lb3V0TVMgIT09IDApIHtcbiAgICAgICAgY29ubltrU3RyZWFtXS5zZXRUaW1lb3V0KGNvbm4uc29ja2V0VGltZW91dE1TKTtcbiAgICB9XG4gICAgLy8gaWYgY29tbWFuZCBtb25pdG9yaW5nIGlzIGVuYWJsZWQgd2UgbmVlZCB0byBtb2RpZnkgdGhlIGNhbGxiYWNrIGhlcmVcbiAgICBpZiAoY29ubi5tb25pdG9yQ29tbWFuZHMpIHtcbiAgICAgICAgY29ubi5lbWl0KENvbm5lY3Rpb24uQ09NTUFORF9TVEFSVEVELCBuZXcgY29tbWFuZF9tb25pdG9yaW5nX2V2ZW50c18xLkNvbW1hbmRTdGFydGVkRXZlbnQoY29ubiwgY29tbWFuZCkpO1xuICAgICAgICBvcGVyYXRpb25EZXNjcmlwdGlvbi5zdGFydGVkID0gKDAsIHV0aWxzXzEubm93KSgpO1xuICAgICAgICBvcGVyYXRpb25EZXNjcmlwdGlvbi5jYiA9IChlcnIsIHJlcGx5KSA9PiB7XG4gICAgICAgICAgICAvLyBDb21tYW5kIG1vbml0b3Jpbmcgc3BlYyBzdGF0ZXMgdGhhdCBpZiBvayBpcyAxLCB0aGVuIHdlIG11c3QgYWx3YXlzIGVtaXRcbiAgICAgICAgICAgIC8vIGEgY29tbWFuZCBzdWNjZWVkZWQgZXZlbnQsIGV2ZW4gaWYgdGhlcmUncyBhbiBlcnJvci4gV3JpdGUgY29uY2VybiBlcnJvcnNcbiAgICAgICAgICAgIC8vIHdpbGwgaGF2ZSBhbiBvazogMSBpbiB0aGVpciByZXBseS5cbiAgICAgICAgICAgIGlmIChlcnIgJiYgcmVwbHk/Lm9rICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgY29ubi5lbWl0KENvbm5lY3Rpb24uQ09NTUFORF9GQUlMRUQsIG5ldyBjb21tYW5kX21vbml0b3JpbmdfZXZlbnRzXzEuQ29tbWFuZEZhaWxlZEV2ZW50KGNvbm4sIGNvbW1hbmQsIGVyciwgb3BlcmF0aW9uRGVzY3JpcHRpb24uc3RhcnRlZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcGx5ICYmIChyZXBseS5vayA9PT0gMCB8fCByZXBseS4kZXJyKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25uLmVtaXQoQ29ubmVjdGlvbi5DT01NQU5EX0ZBSUxFRCwgbmV3IGNvbW1hbmRfbW9uaXRvcmluZ19ldmVudHNfMS5Db21tYW5kRmFpbGVkRXZlbnQoY29ubiwgY29tbWFuZCwgcmVwbHksIG9wZXJhdGlvbkRlc2NyaXB0aW9uLnN0YXJ0ZWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbm4uZW1pdChDb25uZWN0aW9uLkNPTU1BTkRfU1VDQ0VFREVELCBuZXcgY29tbWFuZF9tb25pdG9yaW5nX2V2ZW50c18xLkNvbW1hbmRTdWNjZWVkZWRFdmVudChjb25uLCBjb21tYW5kLCByZXBseSwgb3BlcmF0aW9uRGVzY3JpcHRpb24uc3RhcnRlZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAvLyBTaW5jZSB3ZSdyZSBwYXNzaW5nIHRocm91Z2ggdGhlIHJlcGx5IHdpdGggdGhlIHdyaXRlIGNvbmNlcm4gZXJyb3Igbm93LCB3ZVxuICAgICAgICAgICAgICAgIC8vIG5lZWQgaXQgbm90IHRvIGJlIHByb3ZpZGVkIHRvIHRoZSBvcmlnaW5hbCBjYWxsYmFjayBpbiB0aGlzIGNhc2Ugc29cbiAgICAgICAgICAgICAgICAvLyByZXRyeWFiaWxpdHkgZG9lcyBub3QgZ2V0IHRyaWNrZWQgaW50byB0aGlua2luZyB0aGUgY29tbWFuZCBhY3R1YWxseVxuICAgICAgICAgICAgICAgIC8vIHN1Y2NlZWRlZC5cbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIsIGVyciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29Xcml0ZUNvbmNlcm5FcnJvciA/IHVuZGVmaW5lZCA6IHJlcGx5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCFvcGVyYXRpb25EZXNjcmlwdGlvbi5ub1Jlc3BvbnNlKSB7XG4gICAgICAgIGNvbm5ba1F1ZXVlXS5zZXQob3BlcmF0aW9uRGVzY3JpcHRpb24ucmVxdWVzdElkLCBvcGVyYXRpb25EZXNjcmlwdGlvbik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbm5ba01lc3NhZ2VTdHJlYW1dLndyaXRlQ29tbWFuZChjb21tYW5kLCBvcGVyYXRpb25EZXNjcmlwdGlvbik7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGlmICghb3BlcmF0aW9uRGVzY3JpcHRpb24ubm9SZXNwb25zZSkge1xuICAgICAgICAgICAgY29ubltrUXVldWVdLmRlbGV0ZShvcGVyYXRpb25EZXNjcmlwdGlvbi5yZXF1ZXN0SWQpO1xuICAgICAgICAgICAgb3BlcmF0aW9uRGVzY3JpcHRpb24uY2IoZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wZXJhdGlvbkRlc2NyaXB0aW9uLm5vUmVzcG9uc2UpIHtcbiAgICAgICAgb3BlcmF0aW9uRGVzY3JpcHRpb24uY2IoKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25uZWN0aW9uLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImhhc1Nlc3Npb25TdXBwb3J0IiwiQ3J5cHRvQ29ubmVjdGlvbiIsIkNvbm5lY3Rpb24iLCJ0aW1lcnNfMSIsInJlcXVpcmUiLCJ1dGlsXzEiLCJjb25zdGFudHNfMSIsImVycm9yXzEiLCJtb25nb190eXBlc18xIiwic2Vzc2lvbnNfMSIsInV0aWxzXzEiLCJjb21tYW5kX21vbml0b3JpbmdfZXZlbnRzXzEiLCJjb21tYW5kc18xIiwibWVzc2FnZV9zdHJlYW1fMSIsInN0cmVhbV9kZXNjcmlwdGlvbl8xIiwic2hhcmVkXzEiLCJrU3RyZWFtIiwiU3ltYm9sIiwia1F1ZXVlIiwia01lc3NhZ2VTdHJlYW0iLCJrR2VuZXJhdGlvbiIsImtMYXN0VXNlVGltZSIsImtDbHVzdGVyVGltZSIsImtEZXNjcmlwdGlvbiIsImtIZWxsbyIsImtBdXRvRW5jcnlwdGVyIiwia0RlbGF5ZWRUaW1lb3V0SWQiLCJJTlZBTElEX1FVRVVFX1NJWkUiLCJUeXBlZEV2ZW50RW1pdHRlciIsImNvbnN0cnVjdG9yIiwic3RyZWFtIiwib3B0aW9ucyIsImNvbW1hbmRBc3luYyIsInByb21pc2lmeSIsIm5zIiwiY21kIiwiY2FsbGJhY2siLCJjb21tYW5kIiwiaWQiLCJhZGRyZXNzIiwic3RyZWFtSWRlbnRpZmllciIsInNvY2tldFRpbWVvdXRNUyIsIm1vbml0b3JDb21tYW5kcyIsInNlcnZlckFwaSIsImNsb3NlZCIsIlN0cmVhbURlc2NyaXB0aW9uIiwiZ2VuZXJhdGlvbiIsIm5vdyIsIk1hcCIsIk1lc3NhZ2VTdHJlYW0iLCJtYXhCc29uTWVzc2FnZVNpemUiLCJoZWxsbyIsIm9uIiwibWVzc2FnZSIsIm9uTWVzc2FnZSIsImVycm9yIiwib25FcnJvciIsIm9uQ2xvc2UiLCJvblRpbWVvdXQiLCJwaXBlIiwiZGVzY3JpcHRpb24iLCJyZXNwb25zZSIsInJlY2VpdmVSZXNwb25zZSIsImZyZWV6ZSIsImlzTW9uaXRvcmluZ0Nvbm5lY3Rpb24iLCJzZXJ2aWNlSWQiLCJsb2FkQmFsYW5jZWQiLCJpZGxlVGltZSIsImNhbGN1bGF0ZUR1cmF0aW9uSW5NcyIsImNsdXN0ZXJUaW1lIiwibWFya0F2YWlsYWJsZSIsImNsZWFudXAiLCJNb25nb05ldHdvcmtFcnJvciIsInNldFRpbWVvdXQiLCJiZWZvcmVIYW5kc2hha2UiLCJNb25nb05ldHdvcmtUaW1lb3V0RXJyb3IiLCJ1bnJlZiIsImRlbGF5ZWRUaW1lb3V0SWQiLCJjbGVhclRpbWVvdXQiLCJ0aW1lb3V0IiwiZW1pdCIsIm9wZXJhdGlvbkRlc2NyaXB0aW9uIiwiZ2V0IiwicmVzcG9uc2VUbyIsInNpemUiLCJNb25nb1J1bnRpbWVFcnJvciIsImVudHJ5IiwiZW50cmllcyIsIm5leHQiLCJyZXF1ZXN0SWQiLCJvcnBoYW5lZCIsImRlbGV0ZSIsImNiIiwibW9yZVRvQ29tZSIsInNldCIsInBhcnNlIiwiZXJyIiwiZG9jdW1lbnRzIiwiZG9jdW1lbnQiLCJzZXNzaW9uIiwidXBkYXRlU2Vzc2lvbkZyb21SZXNwb25zZSIsIiRjbHVzdGVyVGltZSIsIkNMVVNURVJfVElNRV9SRUNFSVZFRCIsIndyaXRlQ29uY2VybkVycm9yIiwiTW9uZ29Xcml0ZUNvbmNlcm5FcnJvciIsIm9rIiwiJGVyciIsImVycm1zZyIsImNvZGUiLCJNb25nb1NlcnZlckVycm9yIiwidW5kZWZpbmVkIiwiZGVzdHJveSIsInByb2Nlc3MiLCJuZXh0VGljayIsIm9uY2UiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJQSU5ORUQiLCJVTlBJTk5FRCIsImZvcmNlIiwiY29tcGxldGVDbGVhbnVwIiwib3AiLCJ2YWx1ZXMiLCJjbGVhciIsIkNMT1NFIiwid3JpdGFibGVFbmRlZCIsImVuZCIsInJlYWRQcmVmZXJlbmNlIiwiZ2V0UmVhZFByZWZlcmVuY2UiLCJzaG91bGRVc2VPcE1zZyIsInN1cHBvcnRzT3BNc2ciLCJ2ZXJzaW9uIiwic3RyaWN0IiwiZGVwcmVjYXRpb25FcnJvcnMiLCJhcGlWZXJzaW9uIiwiYXBpU3RyaWN0IiwiYXBpRGVwcmVjYXRpb25FcnJvcnMiLCJncmVhdGVyVGhhbiIsImFwcGx5U2Vzc2lvbiIsImV4cGxpY2l0IiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCJpc1NoYXJkZWQiLCJtb2RlIiwiJHF1ZXJ5IiwiJHJlYWRQcmVmZXJlbmNlIiwidG9KU09OIiwiY29tbWFuZE9wdGlvbnMiLCJhc3NpZ24iLCJudW1iZXJUb1NraXAiLCJudW1iZXJUb1JldHVybiIsImNoZWNrS2V5cyIsInNlY29uZGFyeU9rIiwiY21kTnMiLCJkYiIsIk1zZyIsIlF1ZXJ5Iiwid3JpdGUiLCJDT01NQU5EX1NUQVJURUQiLCJDT01NQU5EX1NVQ0NFRURFRCIsIkNPTU1BTkRfRkFJTEVEIiwiTUVTU0FHRSIsImF1dG9FbmNyeXB0ZXIiLCJNb25nb01pc3NpbmdEZXBlbmRlbmN5RXJyb3IiLCJzZXJ2ZXJXaXJlVmVyc2lvbiIsIm1heFdpcmVWZXJzaW9uIiwic29ydCIsImZpbmQiLCJmaW5kQW5kTW9kaWZ5IiwiaW5kZXhLZXlzIiwiY3JlYXRlSW5kZXhlcyIsImluZGV4ZXMiLCJtYXAiLCJpbmRleCIsImtleSIsImVuY3J5cHQiLCJ0b1N0cmluZyIsImVuY3J5cHRlZCIsIm9mZnNldCIsImRlY3J5cHQiLCJjb25uIiwibG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyIsIl9fbm9kZWpzX21vY2tfc2VydmVyX18iLCJwcm94eUhvc3QiLCJob3N0QWRkcmVzcyIsInJlbW90ZUFkZHJlc3MiLCJyZW1vdGVQb3J0IiwiSG9zdEFkZHJlc3MiLCJmcm9tSG9zdFBvcnQiLCJ1dWlkVjQiLCJub1Jlc3BvbnNlIiwiZG9jdW1lbnRzUmV0dXJuZWRJbiIsInVzZUJpZ0ludDY0IiwicHJvbW90ZUxvbmdzIiwicHJvbW90ZVZhbHVlcyIsInByb21vdGVCdWZmZXJzIiwiYnNvblJlZ0V4cCIsImVuYWJsZVV0ZjhWYWxpZGF0aW9uIiwicmF3Iiwic3RhcnRlZCIsImNvbXByZXNzb3IiLCJhZ3JlZWRDb21wcmVzc29yIiwiemxpYkNvbXByZXNzaW9uTGV2ZWwiLCJDb21tYW5kU3RhcnRlZEV2ZW50IiwicmVwbHkiLCJDb21tYW5kRmFpbGVkRXZlbnQiLCJDb21tYW5kU3VjY2VlZGVkRXZlbnQiLCJ3cml0ZUNvbW1hbmQiLCJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/connection.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/connection_pool.js":
/*!**********************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/connection_pool.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ConnectionPool = exports.PoolState = void 0;\nconst timers_1 = __webpack_require__(/*! timers */ \"timers\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst connect_1 = __webpack_require__(/*! ./connect */ \"(ssr)/./node_modules/mongodb/lib/cmap/connect.js\");\nconst connection_1 = __webpack_require__(/*! ./connection */ \"(ssr)/./node_modules/mongodb/lib/cmap/connection.js\");\nconst connection_pool_events_1 = __webpack_require__(/*! ./connection_pool_events */ \"(ssr)/./node_modules/mongodb/lib/cmap/connection_pool_events.js\");\nconst errors_1 = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/mongodb/lib/cmap/errors.js\");\nconst metrics_1 = __webpack_require__(/*! ./metrics */ \"(ssr)/./node_modules/mongodb/lib/cmap/metrics.js\");\n/** @internal */ const kServer = Symbol(\"server\");\n/** @internal */ const kConnections = Symbol(\"connections\");\n/** @internal */ const kPending = Symbol(\"pending\");\n/** @internal */ const kCheckedOut = Symbol(\"checkedOut\");\n/** @internal */ const kMinPoolSizeTimer = Symbol(\"minPoolSizeTimer\");\n/** @internal */ const kGeneration = Symbol(\"generation\");\n/** @internal */ const kServiceGenerations = Symbol(\"serviceGenerations\");\n/** @internal */ const kConnectionCounter = Symbol(\"connectionCounter\");\n/** @internal */ const kCancellationToken = Symbol(\"cancellationToken\");\n/** @internal */ const kWaitQueue = Symbol(\"waitQueue\");\n/** @internal */ const kCancelled = Symbol(\"cancelled\");\n/** @internal */ const kMetrics = Symbol(\"metrics\");\n/** @internal */ const kProcessingWaitQueue = Symbol(\"processingWaitQueue\");\n/** @internal */ const kPoolState = Symbol(\"poolState\");\n/** @internal */ exports.PoolState = Object.freeze({\n    paused: \"paused\",\n    ready: \"ready\",\n    closed: \"closed\"\n});\n/**\n * A pool of connections which dynamically resizes, and emit events related to pool activity\n * @internal\n */ class ConnectionPool extends mongo_types_1.TypedEventEmitter {\n    constructor(server, options){\n        super();\n        this.options = Object.freeze({\n            ...options,\n            connectionType: connection_1.Connection,\n            maxPoolSize: options.maxPoolSize ?? 100,\n            minPoolSize: options.minPoolSize ?? 0,\n            maxConnecting: options.maxConnecting ?? 2,\n            maxIdleTimeMS: options.maxIdleTimeMS ?? 0,\n            waitQueueTimeoutMS: options.waitQueueTimeoutMS ?? 0,\n            minPoolSizeCheckFrequencyMS: options.minPoolSizeCheckFrequencyMS ?? 100,\n            autoEncrypter: options.autoEncrypter,\n            metadata: options.metadata\n        });\n        if (this.options.minPoolSize > this.options.maxPoolSize) {\n            throw new error_1.MongoInvalidArgumentError(\"Connection pool minimum size must not be greater than maximum pool size\");\n        }\n        this[kPoolState] = exports.PoolState.paused;\n        this[kServer] = server;\n        this[kConnections] = new utils_1.List();\n        this[kPending] = 0;\n        this[kCheckedOut] = new Set();\n        this[kMinPoolSizeTimer] = undefined;\n        this[kGeneration] = 0;\n        this[kServiceGenerations] = new Map();\n        this[kConnectionCounter] = (0, utils_1.makeCounter)(1);\n        this[kCancellationToken] = new mongo_types_1.CancellationToken();\n        this[kCancellationToken].setMaxListeners(Infinity);\n        this[kWaitQueue] = new utils_1.List();\n        this[kMetrics] = new metrics_1.ConnectionPoolMetrics();\n        this[kProcessingWaitQueue] = false;\n        this.mongoLogger = this[kServer].topology.client.mongoLogger;\n        this.component = \"connection\";\n        process.nextTick(()=>{\n            this.emitAndLog(ConnectionPool.CONNECTION_POOL_CREATED, new connection_pool_events_1.ConnectionPoolCreatedEvent(this));\n        });\n    }\n    /** The address of the endpoint the pool is connected to */ get address() {\n        return this.options.hostAddress.toString();\n    }\n    /**\n     * Check if the pool has been closed\n     *\n     * TODO(NODE-3263): We can remove this property once shell no longer needs it\n     */ get closed() {\n        return this[kPoolState] === exports.PoolState.closed;\n    }\n    /** An integer representing the SDAM generation of the pool */ get generation() {\n        return this[kGeneration];\n    }\n    /** An integer expressing how many total connections (available + pending + in use) the pool currently has */ get totalConnectionCount() {\n        return this.availableConnectionCount + this.pendingConnectionCount + this.currentCheckedOutCount;\n    }\n    /** An integer expressing how many connections are currently available in the pool. */ get availableConnectionCount() {\n        return this[kConnections].length;\n    }\n    get pendingConnectionCount() {\n        return this[kPending];\n    }\n    get currentCheckedOutCount() {\n        return this[kCheckedOut].size;\n    }\n    get waitQueueSize() {\n        return this[kWaitQueue].length;\n    }\n    get loadBalanced() {\n        return this.options.loadBalanced;\n    }\n    get serviceGenerations() {\n        return this[kServiceGenerations];\n    }\n    get serverError() {\n        return this[kServer].description.error;\n    }\n    /**\n     * This is exposed ONLY for use in mongosh, to enable\n     * killing all connections if a user quits the shell with\n     * operations in progress.\n     *\n     * This property may be removed as a part of NODE-3263.\n     */ get checkedOutConnections() {\n        return this[kCheckedOut];\n    }\n    /**\n     * Get the metrics information for the pool when a wait queue timeout occurs.\n     */ waitQueueErrorMetrics() {\n        return this[kMetrics].info(this.options.maxPoolSize);\n    }\n    /**\n     * Set the pool state to \"ready\"\n     */ ready() {\n        if (this[kPoolState] !== exports.PoolState.paused) {\n            return;\n        }\n        this[kPoolState] = exports.PoolState.ready;\n        this.emitAndLog(ConnectionPool.CONNECTION_POOL_READY, new connection_pool_events_1.ConnectionPoolReadyEvent(this));\n        (0, timers_1.clearTimeout)(this[kMinPoolSizeTimer]);\n        this.ensureMinPoolSize();\n    }\n    /**\n     * Check a connection out of this pool. The connection will continue to be tracked, but no reference to it\n     * will be held by the pool. This means that if a connection is checked out it MUST be checked back in or\n     * explicitly destroyed by the new owner.\n     */ checkOut(callback) {\n        this.emitAndLog(ConnectionPool.CONNECTION_CHECK_OUT_STARTED, new connection_pool_events_1.ConnectionCheckOutStartedEvent(this));\n        const waitQueueMember = {\n            callback\n        };\n        const waitQueueTimeoutMS = this.options.waitQueueTimeoutMS;\n        if (waitQueueTimeoutMS) {\n            waitQueueMember.timer = (0, timers_1.setTimeout)(()=>{\n                waitQueueMember[kCancelled] = true;\n                waitQueueMember.timer = undefined;\n                this.emitAndLog(ConnectionPool.CONNECTION_CHECK_OUT_FAILED, new connection_pool_events_1.ConnectionCheckOutFailedEvent(this, \"timeout\"));\n                waitQueueMember.callback(new errors_1.WaitQueueTimeoutError(this.loadBalanced ? this.waitQueueErrorMetrics() : \"Timed out while checking out a connection from connection pool\", this.address));\n            }, waitQueueTimeoutMS);\n        }\n        this[kWaitQueue].push(waitQueueMember);\n        process.nextTick(()=>this.processWaitQueue());\n    }\n    /**\n     * Check a connection into the pool.\n     *\n     * @param connection - The connection to check in\n     */ checkIn(connection) {\n        if (!this[kCheckedOut].has(connection)) {\n            return;\n        }\n        const poolClosed = this.closed;\n        const stale = this.connectionIsStale(connection);\n        const willDestroy = !!(poolClosed || stale || connection.closed);\n        if (!willDestroy) {\n            connection.markAvailable();\n            this[kConnections].unshift(connection);\n        }\n        this[kCheckedOut].delete(connection);\n        this.emitAndLog(ConnectionPool.CONNECTION_CHECKED_IN, new connection_pool_events_1.ConnectionCheckedInEvent(this, connection));\n        if (willDestroy) {\n            const reason = connection.closed ? \"error\" : poolClosed ? \"poolClosed\" : \"stale\";\n            this.destroyConnection(connection, reason);\n        }\n        process.nextTick(()=>this.processWaitQueue());\n    }\n    /**\n     * Clear the pool\n     *\n     * Pool reset is handled by incrementing the pool's generation count. Any existing connection of a\n     * previous generation will eventually be pruned during subsequent checkouts.\n     */ clear(options = {}) {\n        if (this.closed) {\n            return;\n        }\n        // handle load balanced case\n        if (this.loadBalanced) {\n            const { serviceId } = options;\n            if (!serviceId) {\n                throw new error_1.MongoRuntimeError(\"ConnectionPool.clear() called in load balanced mode with no serviceId.\");\n            }\n            const sid = serviceId.toHexString();\n            const generation = this.serviceGenerations.get(sid);\n            // Only need to worry if the generation exists, since it should\n            // always be there but typescript needs the check.\n            if (generation == null) {\n                throw new error_1.MongoRuntimeError(\"Service generations are required in load balancer mode.\");\n            } else {\n                // Increment the generation for the service id.\n                this.serviceGenerations.set(sid, generation + 1);\n            }\n            this.emitAndLog(ConnectionPool.CONNECTION_POOL_CLEARED, new connection_pool_events_1.ConnectionPoolClearedEvent(this, {\n                serviceId\n            }));\n            return;\n        }\n        // handle non load-balanced case\n        const interruptInUseConnections = options.interruptInUseConnections ?? false;\n        const oldGeneration = this[kGeneration];\n        this[kGeneration] += 1;\n        const alreadyPaused = this[kPoolState] === exports.PoolState.paused;\n        this[kPoolState] = exports.PoolState.paused;\n        this.clearMinPoolSizeTimer();\n        if (!alreadyPaused) {\n            this.emitAndLog(ConnectionPool.CONNECTION_POOL_CLEARED, new connection_pool_events_1.ConnectionPoolClearedEvent(this, {\n                interruptInUseConnections\n            }));\n        }\n        if (interruptInUseConnections) {\n            process.nextTick(()=>this.interruptInUseConnections(oldGeneration));\n        }\n        this.processWaitQueue();\n    }\n    /**\n     * Closes all stale in-use connections in the pool with a resumable PoolClearedOnNetworkError.\n     *\n     * Only connections where `connection.generation <= minGeneration` are killed.\n     */ interruptInUseConnections(minGeneration) {\n        for (const connection of this[kCheckedOut]){\n            if (connection.generation <= minGeneration) {\n                this.checkIn(connection);\n                connection.onError(new errors_1.PoolClearedOnNetworkError(this));\n            }\n        }\n    }\n    close(_options, _cb) {\n        let options = _options;\n        const callback = _cb ?? _options;\n        if (typeof options === \"function\") {\n            options = {};\n        }\n        options = Object.assign({\n            force: false\n        }, options);\n        if (this.closed) {\n            return callback();\n        }\n        // immediately cancel any in-flight connections\n        this[kCancellationToken].emit(\"cancel\");\n        // end the connection counter\n        if (typeof this[kConnectionCounter].return === \"function\") {\n            this[kConnectionCounter].return(undefined);\n        }\n        this[kPoolState] = exports.PoolState.closed;\n        this.clearMinPoolSizeTimer();\n        this.processWaitQueue();\n        (0, utils_1.eachAsync)(this[kConnections].toArray(), (conn, cb)=>{\n            this.emitAndLog(ConnectionPool.CONNECTION_CLOSED, new connection_pool_events_1.ConnectionClosedEvent(this, conn, \"poolClosed\"));\n            conn.destroy({\n                force: !!options.force\n            }, cb);\n        }, (err)=>{\n            this[kConnections].clear();\n            this.emitAndLog(ConnectionPool.CONNECTION_POOL_CLOSED, new connection_pool_events_1.ConnectionPoolClosedEvent(this));\n            callback(err);\n        });\n    }\n    /**\n     * Runs a lambda with an implicitly checked out connection, checking that connection back in when the lambda\n     * has completed by calling back.\n     *\n     * NOTE: please note the required signature of `fn`\n     *\n     * @remarks When in load balancer mode, connections can be pinned to cursors or transactions.\n     *   In these cases we pass the connection in to this method to ensure it is used and a new\n     *   connection is not checked out.\n     *\n     * @param conn - A pinned connection for use in load balancing mode.\n     * @param fn - A function which operates on a managed connection\n     * @param callback - The original callback\n     */ withConnection(conn, fn, callback) {\n        if (conn) {\n            // use the provided connection, and do _not_ check it in after execution\n            fn(undefined, conn, (fnErr, result)=>{\n                if (fnErr) {\n                    return this.withReauthentication(fnErr, conn, fn, callback);\n                }\n                callback(undefined, result);\n            });\n            return;\n        }\n        this.checkOut((err, conn)=>{\n            // don't callback with `err` here, we might want to act upon it inside `fn`\n            fn(err, conn, (fnErr, result)=>{\n                if (fnErr) {\n                    if (conn) {\n                        this.withReauthentication(fnErr, conn, fn, callback);\n                    } else {\n                        callback(fnErr);\n                    }\n                } else {\n                    callback(undefined, result);\n                }\n                if (conn) {\n                    this.checkIn(conn);\n                }\n            });\n        });\n    }\n    withReauthentication(fnErr, conn, fn, callback) {\n        if (fnErr instanceof error_1.MongoError && fnErr.code === error_1.MONGODB_ERROR_CODES.Reauthenticate) {\n            this.reauthenticate(conn, fn, (error, res)=>{\n                if (error) {\n                    return callback(error);\n                }\n                callback(undefined, res);\n            });\n        } else {\n            callback(fnErr);\n        }\n    }\n    /**\n     * Reauthenticate on the same connection and then retry the operation.\n     */ reauthenticate(connection, fn, callback) {\n        const authContext = connection.authContext;\n        if (!authContext) {\n            return callback(new error_1.MongoRuntimeError(\"No auth context found on connection.\"));\n        }\n        const credentials = authContext.credentials;\n        if (!credentials) {\n            return callback(new error_1.MongoMissingCredentialsError(\"Connection is missing credentials when asked to reauthenticate\"));\n        }\n        const resolvedCredentials = credentials.resolveAuthMechanism(connection.hello || undefined);\n        const provider = connect_1.AUTH_PROVIDERS.get(resolvedCredentials.mechanism);\n        if (!provider) {\n            return callback(new error_1.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${credentials.mechanism}`));\n        }\n        provider.reauth(authContext).then(()=>{\n            fn(undefined, connection, (fnErr, fnResult)=>{\n                if (fnErr) {\n                    return callback(fnErr);\n                }\n                callback(undefined, fnResult);\n            });\n        }, (error)=>callback(error));\n    }\n    /** Clear the min pool size timer */ clearMinPoolSizeTimer() {\n        const minPoolSizeTimer = this[kMinPoolSizeTimer];\n        if (minPoolSizeTimer) {\n            (0, timers_1.clearTimeout)(minPoolSizeTimer);\n        }\n    }\n    destroyConnection(connection, reason) {\n        this.emitAndLog(ConnectionPool.CONNECTION_CLOSED, new connection_pool_events_1.ConnectionClosedEvent(this, connection, reason));\n        // destroy the connection\n        process.nextTick(()=>connection.destroy({\n                force: false\n            }));\n    }\n    connectionIsStale(connection) {\n        const serviceId = connection.serviceId;\n        if (this.loadBalanced && serviceId) {\n            const sid = serviceId.toHexString();\n            const generation = this.serviceGenerations.get(sid);\n            return connection.generation !== generation;\n        }\n        return connection.generation !== this[kGeneration];\n    }\n    connectionIsIdle(connection) {\n        return !!(this.options.maxIdleTimeMS && connection.idleTime > this.options.maxIdleTimeMS);\n    }\n    /**\n     * Destroys a connection if the connection is perished.\n     *\n     * @returns `true` if the connection was destroyed, `false` otherwise.\n     */ destroyConnectionIfPerished(connection) {\n        const isStale = this.connectionIsStale(connection);\n        const isIdle = this.connectionIsIdle(connection);\n        if (!isStale && !isIdle && !connection.closed) {\n            return false;\n        }\n        const reason = connection.closed ? \"error\" : isStale ? \"stale\" : \"idle\";\n        this.destroyConnection(connection, reason);\n        return true;\n    }\n    createConnection(callback) {\n        const connectOptions = {\n            ...this.options,\n            id: this[kConnectionCounter].next().value,\n            generation: this[kGeneration],\n            cancellationToken: this[kCancellationToken]\n        };\n        this[kPending]++;\n        // This is our version of a \"virtual\" no-I/O connection as the spec requires\n        this.emitAndLog(ConnectionPool.CONNECTION_CREATED, new connection_pool_events_1.ConnectionCreatedEvent(this, {\n            id: connectOptions.id\n        }));\n        (0, connect_1.connect)(connectOptions, (err, connection)=>{\n            if (err || !connection) {\n                this[kPending]--;\n                this.emitAndLog(ConnectionPool.CONNECTION_CLOSED, new connection_pool_events_1.ConnectionClosedEvent(this, {\n                    id: connectOptions.id,\n                    serviceId: undefined\n                }, \"error\", // TODO(NODE-5192): Remove this cast\n                err));\n                if (err instanceof error_1.MongoNetworkError || err instanceof error_1.MongoServerError) {\n                    err.connectionGeneration = connectOptions.generation;\n                }\n                callback(err ?? new error_1.MongoRuntimeError(\"Connection creation failed without error\"));\n                return;\n            }\n            // The pool might have closed since we started trying to create a connection\n            if (this[kPoolState] !== exports.PoolState.ready) {\n                this[kPending]--;\n                connection.destroy({\n                    force: true\n                });\n                callback(this.closed ? new errors_1.PoolClosedError(this) : new errors_1.PoolClearedError(this));\n                return;\n            }\n            // forward all events from the connection to the pool\n            for (const event of [\n                ...constants_1.APM_EVENTS,\n                connection_1.Connection.CLUSTER_TIME_RECEIVED\n            ]){\n                connection.on(event, (e)=>this.emit(event, e));\n            }\n            if (this.loadBalanced) {\n                connection.on(connection_1.Connection.PINNED, (pinType)=>this[kMetrics].markPinned(pinType));\n                connection.on(connection_1.Connection.UNPINNED, (pinType)=>this[kMetrics].markUnpinned(pinType));\n                const serviceId = connection.serviceId;\n                if (serviceId) {\n                    let generation;\n                    const sid = serviceId.toHexString();\n                    if (generation = this.serviceGenerations.get(sid)) {\n                        connection.generation = generation;\n                    } else {\n                        this.serviceGenerations.set(sid, 0);\n                        connection.generation = 0;\n                    }\n                }\n            }\n            connection.markAvailable();\n            this.emitAndLog(ConnectionPool.CONNECTION_READY, new connection_pool_events_1.ConnectionReadyEvent(this, connection));\n            this[kPending]--;\n            callback(undefined, connection);\n            return;\n        });\n    }\n    ensureMinPoolSize() {\n        const minPoolSize = this.options.minPoolSize;\n        if (this[kPoolState] !== exports.PoolState.ready || minPoolSize === 0) {\n            return;\n        }\n        this[kConnections].prune((connection)=>this.destroyConnectionIfPerished(connection));\n        if (this.totalConnectionCount < minPoolSize && this.pendingConnectionCount < this.options.maxConnecting) {\n            // NOTE: ensureMinPoolSize should not try to get all the pending\n            // connection permits because that potentially delays the availability of\n            // the connection to a checkout request\n            this.createConnection((err, connection)=>{\n                if (err) {\n                    this[kServer].handleError(err);\n                }\n                if (!err && connection) {\n                    this[kConnections].push(connection);\n                    process.nextTick(()=>this.processWaitQueue());\n                }\n                if (this[kPoolState] === exports.PoolState.ready) {\n                    (0, timers_1.clearTimeout)(this[kMinPoolSizeTimer]);\n                    this[kMinPoolSizeTimer] = (0, timers_1.setTimeout)(()=>this.ensureMinPoolSize(), this.options.minPoolSizeCheckFrequencyMS);\n                }\n            });\n        } else {\n            (0, timers_1.clearTimeout)(this[kMinPoolSizeTimer]);\n            this[kMinPoolSizeTimer] = (0, timers_1.setTimeout)(()=>this.ensureMinPoolSize(), this.options.minPoolSizeCheckFrequencyMS);\n        }\n    }\n    processWaitQueue() {\n        if (this[kProcessingWaitQueue]) {\n            return;\n        }\n        this[kProcessingWaitQueue] = true;\n        while(this.waitQueueSize){\n            const waitQueueMember = this[kWaitQueue].first();\n            if (!waitQueueMember) {\n                this[kWaitQueue].shift();\n                continue;\n            }\n            if (waitQueueMember[kCancelled]) {\n                this[kWaitQueue].shift();\n                continue;\n            }\n            if (this[kPoolState] !== exports.PoolState.ready) {\n                const reason = this.closed ? \"poolClosed\" : \"connectionError\";\n                const error = this.closed ? new errors_1.PoolClosedError(this) : new errors_1.PoolClearedError(this);\n                this.emitAndLog(ConnectionPool.CONNECTION_CHECK_OUT_FAILED, new connection_pool_events_1.ConnectionCheckOutFailedEvent(this, reason, error));\n                if (waitQueueMember.timer) {\n                    (0, timers_1.clearTimeout)(waitQueueMember.timer);\n                }\n                this[kWaitQueue].shift();\n                waitQueueMember.callback(error);\n                continue;\n            }\n            if (!this.availableConnectionCount) {\n                break;\n            }\n            const connection = this[kConnections].shift();\n            if (!connection) {\n                break;\n            }\n            if (!this.destroyConnectionIfPerished(connection)) {\n                this[kCheckedOut].add(connection);\n                this.emitAndLog(ConnectionPool.CONNECTION_CHECKED_OUT, new connection_pool_events_1.ConnectionCheckedOutEvent(this, connection));\n                if (waitQueueMember.timer) {\n                    (0, timers_1.clearTimeout)(waitQueueMember.timer);\n                }\n                this[kWaitQueue].shift();\n                waitQueueMember.callback(undefined, connection);\n            }\n        }\n        const { maxPoolSize, maxConnecting } = this.options;\n        while(this.waitQueueSize > 0 && this.pendingConnectionCount < maxConnecting && (maxPoolSize === 0 || this.totalConnectionCount < maxPoolSize)){\n            const waitQueueMember = this[kWaitQueue].shift();\n            if (!waitQueueMember || waitQueueMember[kCancelled]) {\n                continue;\n            }\n            this.createConnection((err, connection)=>{\n                if (waitQueueMember[kCancelled]) {\n                    if (!err && connection) {\n                        this[kConnections].push(connection);\n                    }\n                } else {\n                    if (err) {\n                        this.emitAndLog(ConnectionPool.CONNECTION_CHECK_OUT_FAILED, // TODO(NODE-5192): Remove this cast\n                        new connection_pool_events_1.ConnectionCheckOutFailedEvent(this, \"connectionError\", err));\n                    } else if (connection) {\n                        this[kCheckedOut].add(connection);\n                        this.emitAndLog(ConnectionPool.CONNECTION_CHECKED_OUT, new connection_pool_events_1.ConnectionCheckedOutEvent(this, connection));\n                    }\n                    if (waitQueueMember.timer) {\n                        (0, timers_1.clearTimeout)(waitQueueMember.timer);\n                    }\n                    waitQueueMember.callback(err, connection);\n                }\n                process.nextTick(()=>this.processWaitQueue());\n            });\n        }\n        this[kProcessingWaitQueue] = false;\n    }\n}\n/**\n * Emitted when the connection pool is created.\n * @event\n */ ConnectionPool.CONNECTION_POOL_CREATED = constants_1.CONNECTION_POOL_CREATED;\n/**\n * Emitted once when the connection pool is closed\n * @event\n */ ConnectionPool.CONNECTION_POOL_CLOSED = constants_1.CONNECTION_POOL_CLOSED;\n/**\n * Emitted each time the connection pool is cleared and it's generation incremented\n * @event\n */ ConnectionPool.CONNECTION_POOL_CLEARED = constants_1.CONNECTION_POOL_CLEARED;\n/**\n * Emitted each time the connection pool is marked ready\n * @event\n */ ConnectionPool.CONNECTION_POOL_READY = constants_1.CONNECTION_POOL_READY;\n/**\n * Emitted when a connection is created.\n * @event\n */ ConnectionPool.CONNECTION_CREATED = constants_1.CONNECTION_CREATED;\n/**\n * Emitted when a connection becomes established, and is ready to use\n * @event\n */ ConnectionPool.CONNECTION_READY = constants_1.CONNECTION_READY;\n/**\n * Emitted when a connection is closed\n * @event\n */ ConnectionPool.CONNECTION_CLOSED = constants_1.CONNECTION_CLOSED;\n/**\n * Emitted when an attempt to check out a connection begins\n * @event\n */ ConnectionPool.CONNECTION_CHECK_OUT_STARTED = constants_1.CONNECTION_CHECK_OUT_STARTED;\n/**\n * Emitted when an attempt to check out a connection fails\n * @event\n */ ConnectionPool.CONNECTION_CHECK_OUT_FAILED = constants_1.CONNECTION_CHECK_OUT_FAILED;\n/**\n * Emitted each time a connection is successfully checked out of the connection pool\n * @event\n */ ConnectionPool.CONNECTION_CHECKED_OUT = constants_1.CONNECTION_CHECKED_OUT;\n/**\n * Emitted each time a connection is successfully checked into the connection pool\n * @event\n */ ConnectionPool.CONNECTION_CHECKED_IN = constants_1.CONNECTION_CHECKED_IN;\nexports.ConnectionPool = ConnectionPool; //# sourceMappingURL=connection_pool.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb25uZWN0aW9uX3Bvb2wuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHNCQUFzQixHQUFHQSxpQkFBaUIsR0FBRyxLQUFLO0FBQ2xELE1BQU1JLFdBQVdDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1DLGNBQWNELG1CQUFPQSxDQUFDLG1FQUFjO0FBQzFDLE1BQU1FLFVBQVVGLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1HLGdCQUFnQkgsbUJBQU9BLENBQUMsdUVBQWdCO0FBQzlDLE1BQU1JLFVBQVVKLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1LLFlBQVlMLG1CQUFPQSxDQUFDLG1FQUFXO0FBQ3JDLE1BQU1NLGVBQWVOLG1CQUFPQSxDQUFDLHlFQUFjO0FBQzNDLE1BQU1PLDJCQUEyQlAsbUJBQU9BLENBQUMsaUdBQTBCO0FBQ25FLE1BQU1RLFdBQVdSLG1CQUFPQSxDQUFDLGlFQUFVO0FBQ25DLE1BQU1TLFlBQVlULG1CQUFPQSxDQUFDLG1FQUFXO0FBQ3JDLGNBQWMsR0FDZCxNQUFNVSxVQUFVQyxPQUFPO0FBQ3ZCLGNBQWMsR0FDZCxNQUFNQyxlQUFlRCxPQUFPO0FBQzVCLGNBQWMsR0FDZCxNQUFNRSxXQUFXRixPQUFPO0FBQ3hCLGNBQWMsR0FDZCxNQUFNRyxjQUFjSCxPQUFPO0FBQzNCLGNBQWMsR0FDZCxNQUFNSSxvQkFBb0JKLE9BQU87QUFDakMsY0FBYyxHQUNkLE1BQU1LLGNBQWNMLE9BQU87QUFDM0IsY0FBYyxHQUNkLE1BQU1NLHNCQUFzQk4sT0FBTztBQUNuQyxjQUFjLEdBQ2QsTUFBTU8scUJBQXFCUCxPQUFPO0FBQ2xDLGNBQWMsR0FDZCxNQUFNUSxxQkFBcUJSLE9BQU87QUFDbEMsY0FBYyxHQUNkLE1BQU1TLGFBQWFULE9BQU87QUFDMUIsY0FBYyxHQUNkLE1BQU1VLGFB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SSxpQkFBaUIsR0FBR3pJLFlBQVl5SSxpQkFBaUI7QUFDaEU7OztDQUdDLEdBQ0Q3SSxlQUFlMEYsNEJBQTRCLEdBQUd0RixZQUFZc0YsNEJBQTRCO0FBQ3RGOzs7Q0FHQyxHQUNEMUYsZUFBZStGLDJCQUEyQixHQUFHM0YsWUFBWTJGLDJCQUEyQjtBQUNwRjs7O0NBR0MsR0FDRC9GLGVBQWU4TSxzQkFBc0IsR0FBRzFNLFlBQVkwTSxzQkFBc0I7QUFDMUU7OztDQUdDLEdBQ0Q5TSxlQUFlOEcscUJBQXFCLEdBQUcxRyxZQUFZMEcscUJBQXFCO0FBQ3hFaEgsc0JBQXNCLEdBQUdFLGdCQUN6QiwyQ0FBMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb25uZWN0aW9uX3Bvb2wuanM/ZmE5MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ29ubmVjdGlvblBvb2wgPSBleHBvcnRzLlBvb2xTdGF0ZSA9IHZvaWQgMDtcbmNvbnN0IHRpbWVyc18xID0gcmVxdWlyZShcInRpbWVyc1wiKTtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBtb25nb190eXBlc18xID0gcmVxdWlyZShcIi4uL21vbmdvX3R5cGVzXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IGNvbm5lY3RfMSA9IHJlcXVpcmUoXCIuL2Nvbm5lY3RcIik7XG5jb25zdCBjb25uZWN0aW9uXzEgPSByZXF1aXJlKFwiLi9jb25uZWN0aW9uXCIpO1xuY29uc3QgY29ubmVjdGlvbl9wb29sX2V2ZW50c18xID0gcmVxdWlyZShcIi4vY29ubmVjdGlvbl9wb29sX2V2ZW50c1wiKTtcbmNvbnN0IGVycm9yc18xID0gcmVxdWlyZShcIi4vZXJyb3JzXCIpO1xuY29uc3QgbWV0cmljc18xID0gcmVxdWlyZShcIi4vbWV0cmljc1wiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtTZXJ2ZXIgPSBTeW1ib2woJ3NlcnZlcicpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0Nvbm5lY3Rpb25zID0gU3ltYm9sKCdjb25uZWN0aW9ucycpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga1BlbmRpbmcgPSBTeW1ib2woJ3BlbmRpbmcnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtDaGVja2VkT3V0ID0gU3ltYm9sKCdjaGVja2VkT3V0Jyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrTWluUG9vbFNpemVUaW1lciA9IFN5bWJvbCgnbWluUG9vbFNpemVUaW1lcicpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0dlbmVyYXRpb24gPSBTeW1ib2woJ2dlbmVyYXRpb24nKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtTZXJ2aWNlR2VuZXJhdGlvbnMgPSBTeW1ib2woJ3NlcnZpY2VHZW5lcmF0aW9ucycpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0Nvbm5lY3Rpb25Db3VudGVyID0gU3ltYm9sKCdjb25uZWN0aW9uQ291bnRlcicpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0NhbmNlbGxhdGlvblRva2VuID0gU3ltYm9sKCdjYW5jZWxsYXRpb25Ub2tlbicpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga1dhaXRRdWV1ZSA9IFN5bWJvbCgnd2FpdFF1ZXVlJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrQ2FuY2VsbGVkID0gU3ltYm9sKCdjYW5jZWxsZWQnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtNZXRyaWNzID0gU3ltYm9sKCdtZXRyaWNzJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrUHJvY2Vzc2luZ1dhaXRRdWV1ZSA9IFN5bWJvbCgncHJvY2Vzc2luZ1dhaXRRdWV1ZScpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga1Bvb2xTdGF0ZSA9IFN5bWJvbCgncG9vbFN0YXRlJyk7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLlBvb2xTdGF0ZSA9IE9iamVjdC5mcmVlemUoe1xuICAgIHBhdXNlZDogJ3BhdXNlZCcsXG4gICAgcmVhZHk6ICdyZWFkeScsXG4gICAgY2xvc2VkOiAnY2xvc2VkJ1xufSk7XG4vKipcbiAqIEEgcG9vbCBvZiBjb25uZWN0aW9ucyB3aGljaCBkeW5hbWljYWxseSByZXNpemVzLCBhbmQgZW1pdCBldmVudHMgcmVsYXRlZCB0byBwb29sIGFjdGl2aXR5XG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgQ29ubmVjdGlvblBvb2wgZXh0ZW5kcyBtb25nb190eXBlc18xLlR5cGVkRXZlbnRFbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcihzZXJ2ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgY29ubmVjdGlvblR5cGU6IGNvbm5lY3Rpb25fMS5Db25uZWN0aW9uLFxuICAgICAgICAgICAgbWF4UG9vbFNpemU6IG9wdGlvbnMubWF4UG9vbFNpemUgPz8gMTAwLFxuICAgICAgICAgICAgbWluUG9vbFNpemU6IG9wdGlvbnMubWluUG9vbFNpemUgPz8gMCxcbiAgICAgICAgICAgIG1heENvbm5lY3Rpbmc6IG9wdGlvbnMubWF4Q29ubmVjdGluZyA/PyAyLFxuICAgICAgICAgICAgbWF4SWRsZVRpbWVNUzogb3B0aW9ucy5tYXhJZGxlVGltZU1TID8/IDAsXG4gICAgICAgICAgICB3YWl0UXVldWVUaW1lb3V0TVM6IG9wdGlvbnMud2FpdFF1ZXVlVGltZW91dE1TID8/IDAsXG4gICAgICAgICAgICBtaW5Qb29sU2l6ZUNoZWNrRnJlcXVlbmN5TVM6IG9wdGlvbnMubWluUG9vbFNpemVDaGVja0ZyZXF1ZW5jeU1TID8/IDEwMCxcbiAgICAgICAgICAgIGF1dG9FbmNyeXB0ZXI6IG9wdGlvbnMuYXV0b0VuY3J5cHRlcixcbiAgICAgICAgICAgIG1ldGFkYXRhOiBvcHRpb25zLm1ldGFkYXRhXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1pblBvb2xTaXplID4gdGhpcy5vcHRpb25zLm1heFBvb2xTaXplKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdDb25uZWN0aW9uIHBvb2wgbWluaW11bSBzaXplIG11c3Qgbm90IGJlIGdyZWF0ZXIgdGhhbiBtYXhpbXVtIHBvb2wgc2l6ZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNba1Bvb2xTdGF0ZV0gPSBleHBvcnRzLlBvb2xTdGF0ZS5wYXVzZWQ7XG4gICAgICAgIHRoaXNba1NlcnZlcl0gPSBzZXJ2ZXI7XG4gICAgICAgIHRoaXNba0Nvbm5lY3Rpb25zXSA9IG5ldyB1dGlsc18xLkxpc3QoKTtcbiAgICAgICAgdGhpc1trUGVuZGluZ10gPSAwO1xuICAgICAgICB0aGlzW2tDaGVja2VkT3V0XSA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpc1trTWluUG9vbFNpemVUaW1lcl0gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXNba0dlbmVyYXRpb25dID0gMDtcbiAgICAgICAgdGhpc1trU2VydmljZUdlbmVyYXRpb25zXSA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpc1trQ29ubmVjdGlvbkNvdW50ZXJdID0gKDAsIHV0aWxzXzEubWFrZUNvdW50ZXIpKDEpO1xuICAgICAgICB0aGlzW2tDYW5jZWxsYXRpb25Ub2tlbl0gPSBuZXcgbW9uZ29fdHlwZXNfMS5DYW5jZWxsYXRpb25Ub2tlbigpO1xuICAgICAgICB0aGlzW2tDYW5jZWxsYXRpb25Ub2tlbl0uc2V0TWF4TGlzdGVuZXJzKEluZmluaXR5KTtcbiAgICAgICAgdGhpc1trV2FpdFF1ZXVlXSA9IG5ldyB1dGlsc18xLkxpc3QoKTtcbiAgICAgICAgdGhpc1trTWV0cmljc10gPSBuZXcgbWV0cmljc18xLkNvbm5lY3Rpb25Qb29sTWV0cmljcygpO1xuICAgICAgICB0aGlzW2tQcm9jZXNzaW5nV2FpdFF1ZXVlXSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1vbmdvTG9nZ2VyID0gdGhpc1trU2VydmVyXS50b3BvbG9neS5jbGllbnQubW9uZ29Mb2dnZXI7XG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gJ2Nvbm5lY3Rpb24nO1xuICAgICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdEFuZExvZyhDb25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX1BPT0xfQ1JFQVRFRCwgbmV3IGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uUG9vbENyZWF0ZWRFdmVudCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiogVGhlIGFkZHJlc3Mgb2YgdGhlIGVuZHBvaW50IHRoZSBwb29sIGlzIGNvbm5lY3RlZCB0byAqL1xuICAgIGdldCBhZGRyZXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmhvc3RBZGRyZXNzLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSBwb29sIGhhcyBiZWVuIGNsb3NlZFxuICAgICAqXG4gICAgICogVE9ETyhOT0RFLTMyNjMpOiBXZSBjYW4gcmVtb3ZlIHRoaXMgcHJvcGVydHkgb25jZSBzaGVsbCBubyBsb25nZXIgbmVlZHMgaXRcbiAgICAgKi9cbiAgICBnZXQgY2xvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trUG9vbFN0YXRlXSA9PT0gZXhwb3J0cy5Qb29sU3RhdGUuY2xvc2VkO1xuICAgIH1cbiAgICAvKiogQW4gaW50ZWdlciByZXByZXNlbnRpbmcgdGhlIFNEQU0gZ2VuZXJhdGlvbiBvZiB0aGUgcG9vbCAqL1xuICAgIGdldCBnZW5lcmF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trR2VuZXJhdGlvbl07XG4gICAgfVxuICAgIC8qKiBBbiBpbnRlZ2VyIGV4cHJlc3NpbmcgaG93IG1hbnkgdG90YWwgY29ubmVjdGlvbnMgKGF2YWlsYWJsZSArIHBlbmRpbmcgKyBpbiB1c2UpIHRoZSBwb29sIGN1cnJlbnRseSBoYXMgKi9cbiAgICBnZXQgdG90YWxDb25uZWN0aW9uQ291bnQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5hdmFpbGFibGVDb25uZWN0aW9uQ291bnQgKyB0aGlzLnBlbmRpbmdDb25uZWN0aW9uQ291bnQgKyB0aGlzLmN1cnJlbnRDaGVja2VkT3V0Q291bnQpO1xuICAgIH1cbiAgICAvKiogQW4gaW50ZWdlciBleHByZXNzaW5nIGhvdyBtYW55IGNvbm5lY3Rpb25zIGFyZSBjdXJyZW50bHkgYXZhaWxhYmxlIGluIHRoZSBwb29sLiAqL1xuICAgIGdldCBhdmFpbGFibGVDb25uZWN0aW9uQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tDb25uZWN0aW9uc10ubGVuZ3RoO1xuICAgIH1cbiAgICBnZXQgcGVuZGluZ0Nvbm5lY3Rpb25Db3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba1BlbmRpbmddO1xuICAgIH1cbiAgICBnZXQgY3VycmVudENoZWNrZWRPdXRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba0NoZWNrZWRPdXRdLnNpemU7XG4gICAgfVxuICAgIGdldCB3YWl0UXVldWVTaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trV2FpdFF1ZXVlXS5sZW5ndGg7XG4gICAgfVxuICAgIGdldCBsb2FkQmFsYW5jZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubG9hZEJhbGFuY2VkO1xuICAgIH1cbiAgICBnZXQgc2VydmljZUdlbmVyYXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trU2VydmljZUdlbmVyYXRpb25zXTtcbiAgICB9XG4gICAgZ2V0IHNlcnZlckVycm9yKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trU2VydmVyXS5kZXNjcmlwdGlvbi5lcnJvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBleHBvc2VkIE9OTFkgZm9yIHVzZSBpbiBtb25nb3NoLCB0byBlbmFibGVcbiAgICAgKiBraWxsaW5nIGFsbCBjb25uZWN0aW9ucyBpZiBhIHVzZXIgcXVpdHMgdGhlIHNoZWxsIHdpdGhcbiAgICAgKiBvcGVyYXRpb25zIGluIHByb2dyZXNzLlxuICAgICAqXG4gICAgICogVGhpcyBwcm9wZXJ0eSBtYXkgYmUgcmVtb3ZlZCBhcyBhIHBhcnQgb2YgTk9ERS0zMjYzLlxuICAgICAqL1xuICAgIGdldCBjaGVja2VkT3V0Q29ubmVjdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tDaGVja2VkT3V0XTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtZXRyaWNzIGluZm9ybWF0aW9uIGZvciB0aGUgcG9vbCB3aGVuIGEgd2FpdCBxdWV1ZSB0aW1lb3V0IG9jY3Vycy5cbiAgICAgKi9cbiAgICB3YWl0UXVldWVFcnJvck1ldHJpY3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tNZXRyaWNzXS5pbmZvKHRoaXMub3B0aW9ucy5tYXhQb29sU2l6ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcG9vbCBzdGF0ZSB0byBcInJlYWR5XCJcbiAgICAgKi9cbiAgICByZWFkeSgpIHtcbiAgICAgICAgaWYgKHRoaXNba1Bvb2xTdGF0ZV0gIT09IGV4cG9ydHMuUG9vbFN0YXRlLnBhdXNlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNba1Bvb2xTdGF0ZV0gPSBleHBvcnRzLlBvb2xTdGF0ZS5yZWFkeTtcbiAgICAgICAgdGhpcy5lbWl0QW5kTG9nKENvbm5lY3Rpb25Qb29sLkNPTk5FQ1RJT05fUE9PTF9SRUFEWSwgbmV3IGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uUG9vbFJlYWR5RXZlbnQodGhpcykpO1xuICAgICAgICAoMCwgdGltZXJzXzEuY2xlYXJUaW1lb3V0KSh0aGlzW2tNaW5Qb29sU2l6ZVRpbWVyXSk7XG4gICAgICAgIHRoaXMuZW5zdXJlTWluUG9vbFNpemUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgYSBjb25uZWN0aW9uIG91dCBvZiB0aGlzIHBvb2wuIFRoZSBjb25uZWN0aW9uIHdpbGwgY29udGludWUgdG8gYmUgdHJhY2tlZCwgYnV0IG5vIHJlZmVyZW5jZSB0byBpdFxuICAgICAqIHdpbGwgYmUgaGVsZCBieSB0aGUgcG9vbC4gVGhpcyBtZWFucyB0aGF0IGlmIGEgY29ubmVjdGlvbiBpcyBjaGVja2VkIG91dCBpdCBNVVNUIGJlIGNoZWNrZWQgYmFjayBpbiBvclxuICAgICAqIGV4cGxpY2l0bHkgZGVzdHJveWVkIGJ5IHRoZSBuZXcgb3duZXIuXG4gICAgICovXG4gICAgY2hlY2tPdXQoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5lbWl0QW5kTG9nKENvbm5lY3Rpb25Qb29sLkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX1NUQVJURUQsIG5ldyBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvbkNoZWNrT3V0U3RhcnRlZEV2ZW50KHRoaXMpKTtcbiAgICAgICAgY29uc3Qgd2FpdFF1ZXVlTWVtYmVyID0geyBjYWxsYmFjayB9O1xuICAgICAgICBjb25zdCB3YWl0UXVldWVUaW1lb3V0TVMgPSB0aGlzLm9wdGlvbnMud2FpdFF1ZXVlVGltZW91dE1TO1xuICAgICAgICBpZiAod2FpdFF1ZXVlVGltZW91dE1TKSB7XG4gICAgICAgICAgICB3YWl0UXVldWVNZW1iZXIudGltZXIgPSAoMCwgdGltZXJzXzEuc2V0VGltZW91dCkoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHdhaXRRdWV1ZU1lbWJlcltrQ2FuY2VsbGVkXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgd2FpdFF1ZXVlTWVtYmVyLnRpbWVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdEFuZExvZyhDb25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX0NIRUNLX09VVF9GQUlMRUQsIG5ldyBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvbkNoZWNrT3V0RmFpbGVkRXZlbnQodGhpcywgJ3RpbWVvdXQnKSk7XG4gICAgICAgICAgICAgICAgd2FpdFF1ZXVlTWVtYmVyLmNhbGxiYWNrKG5ldyBlcnJvcnNfMS5XYWl0UXVldWVUaW1lb3V0RXJyb3IodGhpcy5sb2FkQmFsYW5jZWRcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLndhaXRRdWV1ZUVycm9yTWV0cmljcygpXG4gICAgICAgICAgICAgICAgICAgIDogJ1RpbWVkIG91dCB3aGlsZSBjaGVja2luZyBvdXQgYSBjb25uZWN0aW9uIGZyb20gY29ubmVjdGlvbiBwb29sJywgdGhpcy5hZGRyZXNzKSk7XG4gICAgICAgICAgICB9LCB3YWl0UXVldWVUaW1lb3V0TVMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNba1dhaXRRdWV1ZV0ucHVzaCh3YWl0UXVldWVNZW1iZXIpO1xuICAgICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHRoaXMucHJvY2Vzc1dhaXRRdWV1ZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgYSBjb25uZWN0aW9uIGludG8gdGhlIHBvb2wuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29ubmVjdGlvbiAtIFRoZSBjb25uZWN0aW9uIHRvIGNoZWNrIGluXG4gICAgICovXG4gICAgY2hlY2tJbihjb25uZWN0aW9uKSB7XG4gICAgICAgIGlmICghdGhpc1trQ2hlY2tlZE91dF0uaGFzKGNvbm5lY3Rpb24pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcG9vbENsb3NlZCA9IHRoaXMuY2xvc2VkO1xuICAgICAgICBjb25zdCBzdGFsZSA9IHRoaXMuY29ubmVjdGlvbklzU3RhbGUoY29ubmVjdGlvbik7XG4gICAgICAgIGNvbnN0IHdpbGxEZXN0cm95ID0gISEocG9vbENsb3NlZCB8fCBzdGFsZSB8fCBjb25uZWN0aW9uLmNsb3NlZCk7XG4gICAgICAgIGlmICghd2lsbERlc3Ryb3kpIHtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24ubWFya0F2YWlsYWJsZSgpO1xuICAgICAgICAgICAgdGhpc1trQ29ubmVjdGlvbnNdLnVuc2hpZnQoY29ubmVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trQ2hlY2tlZE91dF0uZGVsZXRlKGNvbm5lY3Rpb24pO1xuICAgICAgICB0aGlzLmVtaXRBbmRMb2coQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9DSEVDS0VEX0lOLCBuZXcgY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25DaGVja2VkSW5FdmVudCh0aGlzLCBjb25uZWN0aW9uKSk7XG4gICAgICAgIGlmICh3aWxsRGVzdHJveSkge1xuICAgICAgICAgICAgY29uc3QgcmVhc29uID0gY29ubmVjdGlvbi5jbG9zZWQgPyAnZXJyb3InIDogcG9vbENsb3NlZCA/ICdwb29sQ2xvc2VkJyA6ICdzdGFsZSc7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lDb25uZWN0aW9uKGNvbm5lY3Rpb24sIHJlYXNvbik7XG4gICAgICAgIH1cbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljaygoKSA9PiB0aGlzLnByb2Nlc3NXYWl0UXVldWUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFyIHRoZSBwb29sXG4gICAgICpcbiAgICAgKiBQb29sIHJlc2V0IGlzIGhhbmRsZWQgYnkgaW5jcmVtZW50aW5nIHRoZSBwb29sJ3MgZ2VuZXJhdGlvbiBjb3VudC4gQW55IGV4aXN0aW5nIGNvbm5lY3Rpb24gb2YgYVxuICAgICAqIHByZXZpb3VzIGdlbmVyYXRpb24gd2lsbCBldmVudHVhbGx5IGJlIHBydW5lZCBkdXJpbmcgc3Vic2VxdWVudCBjaGVja291dHMuXG4gICAgICovXG4gICAgY2xlYXIob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGhhbmRsZSBsb2FkIGJhbGFuY2VkIGNhc2VcbiAgICAgICAgaWYgKHRoaXMubG9hZEJhbGFuY2VkKSB7XG4gICAgICAgICAgICBjb25zdCB7IHNlcnZpY2VJZCB9ID0gb3B0aW9ucztcbiAgICAgICAgICAgIGlmICghc2VydmljZUlkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ0Nvbm5lY3Rpb25Qb29sLmNsZWFyKCkgY2FsbGVkIGluIGxvYWQgYmFsYW5jZWQgbW9kZSB3aXRoIG5vIHNlcnZpY2VJZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNpZCA9IHNlcnZpY2VJZC50b0hleFN0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGlvbiA9IHRoaXMuc2VydmljZUdlbmVyYXRpb25zLmdldChzaWQpO1xuICAgICAgICAgICAgLy8gT25seSBuZWVkIHRvIHdvcnJ5IGlmIHRoZSBnZW5lcmF0aW9uIGV4aXN0cywgc2luY2UgaXQgc2hvdWxkXG4gICAgICAgICAgICAvLyBhbHdheXMgYmUgdGhlcmUgYnV0IHR5cGVzY3JpcHQgbmVlZHMgdGhlIGNoZWNrLlxuICAgICAgICAgICAgaWYgKGdlbmVyYXRpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdTZXJ2aWNlIGdlbmVyYXRpb25zIGFyZSByZXF1aXJlZCBpbiBsb2FkIGJhbGFuY2VyIG1vZGUuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJbmNyZW1lbnQgdGhlIGdlbmVyYXRpb24gZm9yIHRoZSBzZXJ2aWNlIGlkLlxuICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZUdlbmVyYXRpb25zLnNldChzaWQsIGdlbmVyYXRpb24gKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdEFuZExvZyhDb25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX1BPT0xfQ0xFQVJFRCwgbmV3IGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uUG9vbENsZWFyZWRFdmVudCh0aGlzLCB7IHNlcnZpY2VJZCB9KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gaGFuZGxlIG5vbiBsb2FkLWJhbGFuY2VkIGNhc2VcbiAgICAgICAgY29uc3QgaW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucyA9IG9wdGlvbnMuaW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucyA/PyBmYWxzZTtcbiAgICAgICAgY29uc3Qgb2xkR2VuZXJhdGlvbiA9IHRoaXNba0dlbmVyYXRpb25dO1xuICAgICAgICB0aGlzW2tHZW5lcmF0aW9uXSArPSAxO1xuICAgICAgICBjb25zdCBhbHJlYWR5UGF1c2VkID0gdGhpc1trUG9vbFN0YXRlXSA9PT0gZXhwb3J0cy5Qb29sU3RhdGUucGF1c2VkO1xuICAgICAgICB0aGlzW2tQb29sU3RhdGVdID0gZXhwb3J0cy5Qb29sU3RhdGUucGF1c2VkO1xuICAgICAgICB0aGlzLmNsZWFyTWluUG9vbFNpemVUaW1lcigpO1xuICAgICAgICBpZiAoIWFscmVhZHlQYXVzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdEFuZExvZyhDb25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX1BPT0xfQ0xFQVJFRCwgbmV3IGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uUG9vbENsZWFyZWRFdmVudCh0aGlzLCB7XG4gICAgICAgICAgICAgICAgaW50ZXJydXB0SW5Vc2VDb25uZWN0aW9uc1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnRlcnJ1cHRJblVzZUNvbm5lY3Rpb25zKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHRoaXMuaW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucyhvbGRHZW5lcmF0aW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm9jZXNzV2FpdFF1ZXVlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyBhbGwgc3RhbGUgaW4tdXNlIGNvbm5lY3Rpb25zIGluIHRoZSBwb29sIHdpdGggYSByZXN1bWFibGUgUG9vbENsZWFyZWRPbk5ldHdvcmtFcnJvci5cbiAgICAgKlxuICAgICAqIE9ubHkgY29ubmVjdGlvbnMgd2hlcmUgYGNvbm5lY3Rpb24uZ2VuZXJhdGlvbiA8PSBtaW5HZW5lcmF0aW9uYCBhcmUga2lsbGVkLlxuICAgICAqL1xuICAgIGludGVycnVwdEluVXNlQ29ubmVjdGlvbnMobWluR2VuZXJhdGlvbikge1xuICAgICAgICBmb3IgKGNvbnN0IGNvbm5lY3Rpb24gb2YgdGhpc1trQ2hlY2tlZE91dF0pIHtcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLmdlbmVyYXRpb24gPD0gbWluR2VuZXJhdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tJbihjb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm9uRXJyb3IobmV3IGVycm9yc18xLlBvb2xDbGVhcmVkT25OZXR3b3JrRXJyb3IodGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNsb3NlKF9vcHRpb25zLCBfY2IpIHtcbiAgICAgICAgbGV0IG9wdGlvbnMgPSBfb3B0aW9ucztcbiAgICAgICAgY29uc3QgY2FsbGJhY2sgPSAoX2NiID8/IF9vcHRpb25zKTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBmb3JjZTogZmFsc2UgfSwgb3B0aW9ucyk7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW1tZWRpYXRlbHkgY2FuY2VsIGFueSBpbi1mbGlnaHQgY29ubmVjdGlvbnNcbiAgICAgICAgdGhpc1trQ2FuY2VsbGF0aW9uVG9rZW5dLmVtaXQoJ2NhbmNlbCcpO1xuICAgICAgICAvLyBlbmQgdGhlIGNvbm5lY3Rpb24gY291bnRlclxuICAgICAgICBpZiAodHlwZW9mIHRoaXNba0Nvbm5lY3Rpb25Db3VudGVyXS5yZXR1cm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXNba0Nvbm5lY3Rpb25Db3VudGVyXS5yZXR1cm4odW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tQb29sU3RhdGVdID0gZXhwb3J0cy5Qb29sU3RhdGUuY2xvc2VkO1xuICAgICAgICB0aGlzLmNsZWFyTWluUG9vbFNpemVUaW1lcigpO1xuICAgICAgICB0aGlzLnByb2Nlc3NXYWl0UXVldWUoKTtcbiAgICAgICAgKDAsIHV0aWxzXzEuZWFjaEFzeW5jKSh0aGlzW2tDb25uZWN0aW9uc10udG9BcnJheSgpLCAoY29ubiwgY2IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdEFuZExvZyhDb25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX0NMT1NFRCwgbmV3IGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uQ2xvc2VkRXZlbnQodGhpcywgY29ubiwgJ3Bvb2xDbG9zZWQnKSk7XG4gICAgICAgICAgICBjb25uLmRlc3Ryb3koeyBmb3JjZTogISFvcHRpb25zLmZvcmNlIH0sIGNiKTtcbiAgICAgICAgfSwgZXJyID0+IHtcbiAgICAgICAgICAgIHRoaXNba0Nvbm5lY3Rpb25zXS5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5lbWl0QW5kTG9nKENvbm5lY3Rpb25Qb29sLkNPTk5FQ1RJT05fUE9PTF9DTE9TRUQsIG5ldyBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvblBvb2xDbG9zZWRFdmVudCh0aGlzKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUnVucyBhIGxhbWJkYSB3aXRoIGFuIGltcGxpY2l0bHkgY2hlY2tlZCBvdXQgY29ubmVjdGlvbiwgY2hlY2tpbmcgdGhhdCBjb25uZWN0aW9uIGJhY2sgaW4gd2hlbiB0aGUgbGFtYmRhXG4gICAgICogaGFzIGNvbXBsZXRlZCBieSBjYWxsaW5nIGJhY2suXG4gICAgICpcbiAgICAgKiBOT1RFOiBwbGVhc2Ugbm90ZSB0aGUgcmVxdWlyZWQgc2lnbmF0dXJlIG9mIGBmbmBcbiAgICAgKlxuICAgICAqIEByZW1hcmtzIFdoZW4gaW4gbG9hZCBiYWxhbmNlciBtb2RlLCBjb25uZWN0aW9ucyBjYW4gYmUgcGlubmVkIHRvIGN1cnNvcnMgb3IgdHJhbnNhY3Rpb25zLlxuICAgICAqICAgSW4gdGhlc2UgY2FzZXMgd2UgcGFzcyB0aGUgY29ubmVjdGlvbiBpbiB0byB0aGlzIG1ldGhvZCB0byBlbnN1cmUgaXQgaXMgdXNlZCBhbmQgYSBuZXdcbiAgICAgKiAgIGNvbm5lY3Rpb24gaXMgbm90IGNoZWNrZWQgb3V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbm4gLSBBIHBpbm5lZCBjb25uZWN0aW9uIGZvciB1c2UgaW4gbG9hZCBiYWxhbmNpbmcgbW9kZS5cbiAgICAgKiBAcGFyYW0gZm4gLSBBIGZ1bmN0aW9uIHdoaWNoIG9wZXJhdGVzIG9uIGEgbWFuYWdlZCBjb25uZWN0aW9uXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gVGhlIG9yaWdpbmFsIGNhbGxiYWNrXG4gICAgICovXG4gICAgd2l0aENvbm5lY3Rpb24oY29ubiwgZm4sIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChjb25uKSB7XG4gICAgICAgICAgICAvLyB1c2UgdGhlIHByb3ZpZGVkIGNvbm5lY3Rpb24sIGFuZCBkbyBfbm90XyBjaGVjayBpdCBpbiBhZnRlciBleGVjdXRpb25cbiAgICAgICAgICAgIGZuKHVuZGVmaW5lZCwgY29ubiwgKGZuRXJyLCByZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZm5FcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2l0aFJlYXV0aGVudGljYXRpb24oZm5FcnIsIGNvbm4sIGZuLCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwgcmVzdWx0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hlY2tPdXQoKGVyciwgY29ubikgPT4ge1xuICAgICAgICAgICAgLy8gZG9uJ3QgY2FsbGJhY2sgd2l0aCBgZXJyYCBoZXJlLCB3ZSBtaWdodCB3YW50IHRvIGFjdCB1cG9uIGl0IGluc2lkZSBgZm5gXG4gICAgICAgICAgICBmbihlcnIsIGNvbm4sIChmbkVyciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZuRXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpdGhSZWF1dGhlbnRpY2F0aW9uKGZuRXJyLCBjb25uLCBmbiwgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZm5FcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb25uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tJbihjb25uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHdpdGhSZWF1dGhlbnRpY2F0aW9uKGZuRXJyLCBjb25uLCBmbiwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGZuRXJyIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb0Vycm9yICYmIGZuRXJyLmNvZGUgPT09IGVycm9yXzEuTU9OR09EQl9FUlJPUl9DT0RFUy5SZWF1dGhlbnRpY2F0ZSkge1xuICAgICAgICAgICAgdGhpcy5yZWF1dGhlbnRpY2F0ZShjb25uLCBmbiwgKGVycm9yLCByZXMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCByZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjYWxsYmFjayhmbkVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhdXRoZW50aWNhdGUgb24gdGhlIHNhbWUgY29ubmVjdGlvbiBhbmQgdGhlbiByZXRyeSB0aGUgb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIHJlYXV0aGVudGljYXRlKGNvbm5lY3Rpb24sIGZuLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBhdXRoQ29udGV4dCA9IGNvbm5lY3Rpb24uYXV0aENvbnRleHQ7XG4gICAgICAgIGlmICghYXV0aENvbnRleHQpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignTm8gYXV0aCBjb250ZXh0IGZvdW5kIG9uIGNvbm5lY3Rpb24uJykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gYXV0aENvbnRleHQuY3JlZGVudGlhbHM7XG4gICAgICAgIGlmICghY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yKCdDb25uZWN0aW9uIGlzIG1pc3NpbmcgY3JlZGVudGlhbHMgd2hlbiBhc2tlZCB0byByZWF1dGhlbnRpY2F0ZScpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNvbHZlZENyZWRlbnRpYWxzID0gY3JlZGVudGlhbHMucmVzb2x2ZUF1dGhNZWNoYW5pc20oY29ubmVjdGlvbi5oZWxsbyB8fCB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBwcm92aWRlciA9IGNvbm5lY3RfMS5BVVRIX1BST1ZJREVSUy5nZXQocmVzb2x2ZWRDcmVkZW50aWFscy5tZWNoYW5pc20pO1xuICAgICAgICBpZiAoIXByb3ZpZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcihgUmVhdXRoZW50aWNhdGUgZmFpbGVkIGR1ZSB0byBubyBhdXRoIHByb3ZpZGVyIGZvciAke2NyZWRlbnRpYWxzLm1lY2hhbmlzbX1gKSk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvdmlkZXIucmVhdXRoKGF1dGhDb250ZXh0KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGZuKHVuZGVmaW5lZCwgY29ubmVjdGlvbiwgKGZuRXJyLCBmblJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChmbkVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZm5FcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIGZuUmVzdWx0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCBlcnJvciA9PiBjYWxsYmFjayhlcnJvcikpO1xuICAgIH1cbiAgICAvKiogQ2xlYXIgdGhlIG1pbiBwb29sIHNpemUgdGltZXIgKi9cbiAgICBjbGVhck1pblBvb2xTaXplVGltZXIoKSB7XG4gICAgICAgIGNvbnN0IG1pblBvb2xTaXplVGltZXIgPSB0aGlzW2tNaW5Qb29sU2l6ZVRpbWVyXTtcbiAgICAgICAgaWYgKG1pblBvb2xTaXplVGltZXIpIHtcbiAgICAgICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKG1pblBvb2xTaXplVGltZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3lDb25uZWN0aW9uKGNvbm5lY3Rpb24sIHJlYXNvbikge1xuICAgICAgICB0aGlzLmVtaXRBbmRMb2coQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9DTE9TRUQsIG5ldyBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvbkNsb3NlZEV2ZW50KHRoaXMsIGNvbm5lY3Rpb24sIHJlYXNvbikpO1xuICAgICAgICAvLyBkZXN0cm95IHRoZSBjb25uZWN0aW9uXG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soKCkgPT4gY29ubmVjdGlvbi5kZXN0cm95KHsgZm9yY2U6IGZhbHNlIH0pKTtcbiAgICB9XG4gICAgY29ubmVjdGlvbklzU3RhbGUoY29ubmVjdGlvbikge1xuICAgICAgICBjb25zdCBzZXJ2aWNlSWQgPSBjb25uZWN0aW9uLnNlcnZpY2VJZDtcbiAgICAgICAgaWYgKHRoaXMubG9hZEJhbGFuY2VkICYmIHNlcnZpY2VJZCkge1xuICAgICAgICAgICAgY29uc3Qgc2lkID0gc2VydmljZUlkLnRvSGV4U3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBnZW5lcmF0aW9uID0gdGhpcy5zZXJ2aWNlR2VuZXJhdGlvbnMuZ2V0KHNpZCk7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5nZW5lcmF0aW9uICE9PSBnZW5lcmF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb25uZWN0aW9uLmdlbmVyYXRpb24gIT09IHRoaXNba0dlbmVyYXRpb25dO1xuICAgIH1cbiAgICBjb25uZWN0aW9uSXNJZGxlKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuICEhKHRoaXMub3B0aW9ucy5tYXhJZGxlVGltZU1TICYmIGNvbm5lY3Rpb24uaWRsZVRpbWUgPiB0aGlzLm9wdGlvbnMubWF4SWRsZVRpbWVNUyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc3Ryb3lzIGEgY29ubmVjdGlvbiBpZiB0aGUgY29ubmVjdGlvbiBpcyBwZXJpc2hlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgY29ubmVjdGlvbiB3YXMgZGVzdHJveWVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBkZXN0cm95Q29ubmVjdGlvbklmUGVyaXNoZWQoY29ubmVjdGlvbikge1xuICAgICAgICBjb25zdCBpc1N0YWxlID0gdGhpcy5jb25uZWN0aW9uSXNTdGFsZShjb25uZWN0aW9uKTtcbiAgICAgICAgY29uc3QgaXNJZGxlID0gdGhpcy5jb25uZWN0aW9uSXNJZGxlKGNvbm5lY3Rpb24pO1xuICAgICAgICBpZiAoIWlzU3RhbGUgJiYgIWlzSWRsZSAmJiAhY29ubmVjdGlvbi5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWFzb24gPSBjb25uZWN0aW9uLmNsb3NlZCA/ICdlcnJvcicgOiBpc1N0YWxlID8gJ3N0YWxlJyA6ICdpZGxlJztcbiAgICAgICAgdGhpcy5kZXN0cm95Q29ubmVjdGlvbihjb25uZWN0aW9uLCByZWFzb24pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY3JlYXRlQ29ubmVjdGlvbihjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBjb25uZWN0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgIGlkOiB0aGlzW2tDb25uZWN0aW9uQ291bnRlcl0ubmV4dCgpLnZhbHVlLFxuICAgICAgICAgICAgZ2VuZXJhdGlvbjogdGhpc1trR2VuZXJhdGlvbl0sXG4gICAgICAgICAgICBjYW5jZWxsYXRpb25Ub2tlbjogdGhpc1trQ2FuY2VsbGF0aW9uVG9rZW5dXG4gICAgICAgIH07XG4gICAgICAgIHRoaXNba1BlbmRpbmddKys7XG4gICAgICAgIC8vIFRoaXMgaXMgb3VyIHZlcnNpb24gb2YgYSBcInZpcnR1YWxcIiBuby1JL08gY29ubmVjdGlvbiBhcyB0aGUgc3BlYyByZXF1aXJlc1xuICAgICAgICB0aGlzLmVtaXRBbmRMb2coQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9DUkVBVEVELCBuZXcgY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25DcmVhdGVkRXZlbnQodGhpcywgeyBpZDogY29ubmVjdE9wdGlvbnMuaWQgfSkpO1xuICAgICAgICAoMCwgY29ubmVjdF8xLmNvbm5lY3QpKGNvbm5lY3RPcHRpb25zLCAoZXJyLCBjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyIHx8ICFjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpc1trUGVuZGluZ10tLTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXRBbmRMb2coQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9DTE9TRUQsIG5ldyBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvbkNsb3NlZEV2ZW50KHRoaXMsIHsgaWQ6IGNvbm5lY3RPcHRpb25zLmlkLCBzZXJ2aWNlSWQ6IHVuZGVmaW5lZCB9LCAnZXJyb3InLCBcbiAgICAgICAgICAgICAgICAvLyBUT0RPKE5PREUtNTE5Mik6IFJlbW92ZSB0aGlzIGNhc3RcbiAgICAgICAgICAgICAgICBlcnIpKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb05ldHdvcmtFcnJvciB8fCBlcnIgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvU2VydmVyRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyLmNvbm5lY3Rpb25HZW5lcmF0aW9uID0gY29ubmVjdE9wdGlvbnMuZ2VuZXJhdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyID8/IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdDb25uZWN0aW9uIGNyZWF0aW9uIGZhaWxlZCB3aXRob3V0IGVycm9yJykpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoZSBwb29sIG1pZ2h0IGhhdmUgY2xvc2VkIHNpbmNlIHdlIHN0YXJ0ZWQgdHJ5aW5nIHRvIGNyZWF0ZSBhIGNvbm5lY3Rpb25cbiAgICAgICAgICAgIGlmICh0aGlzW2tQb29sU3RhdGVdICE9PSBleHBvcnRzLlBvb2xTdGF0ZS5yZWFkeSkge1xuICAgICAgICAgICAgICAgIHRoaXNba1BlbmRpbmddLS07XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5kZXN0cm95KHsgZm9yY2U6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5jbG9zZWQgPyBuZXcgZXJyb3JzXzEuUG9vbENsb3NlZEVycm9yKHRoaXMpIDogbmV3IGVycm9yc18xLlBvb2xDbGVhcmVkRXJyb3IodGhpcykpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGZvcndhcmQgYWxsIGV2ZW50cyBmcm9tIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBwb29sXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIFsuLi5jb25zdGFudHNfMS5BUE1fRVZFTlRTLCBjb25uZWN0aW9uXzEuQ29ubmVjdGlvbi5DTFVTVEVSX1RJTUVfUkVDRUlWRURdKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vbihldmVudCwgKGUpID0+IHRoaXMuZW1pdChldmVudCwgZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubG9hZEJhbGFuY2VkKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vbihjb25uZWN0aW9uXzEuQ29ubmVjdGlvbi5QSU5ORUQsIHBpblR5cGUgPT4gdGhpc1trTWV0cmljc10ubWFya1Bpbm5lZChwaW5UeXBlKSk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vbihjb25uZWN0aW9uXzEuQ29ubmVjdGlvbi5VTlBJTk5FRCwgcGluVHlwZSA9PiB0aGlzW2tNZXRyaWNzXS5tYXJrVW5waW5uZWQocGluVHlwZSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2VJZCA9IGNvbm5lY3Rpb24uc2VydmljZUlkO1xuICAgICAgICAgICAgICAgIGlmIChzZXJ2aWNlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpZCA9IHNlcnZpY2VJZC50b0hleFN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGdlbmVyYXRpb24gPSB0aGlzLnNlcnZpY2VHZW5lcmF0aW9ucy5nZXQoc2lkKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uZ2VuZXJhdGlvbiA9IGdlbmVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcnZpY2VHZW5lcmF0aW9ucy5zZXQoc2lkLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uZ2VuZXJhdGlvbiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25uZWN0aW9uLm1hcmtBdmFpbGFibGUoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdEFuZExvZyhDb25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX1JFQURZLCBuZXcgY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25SZWFkeUV2ZW50KHRoaXMsIGNvbm5lY3Rpb24pKTtcbiAgICAgICAgICAgIHRoaXNba1BlbmRpbmddLS07XG4gICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW5zdXJlTWluUG9vbFNpemUoKSB7XG4gICAgICAgIGNvbnN0IG1pblBvb2xTaXplID0gdGhpcy5vcHRpb25zLm1pblBvb2xTaXplO1xuICAgICAgICBpZiAodGhpc1trUG9vbFN0YXRlXSAhPT0gZXhwb3J0cy5Qb29sU3RhdGUucmVhZHkgfHwgbWluUG9vbFNpemUgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tDb25uZWN0aW9uc10ucHJ1bmUoY29ubmVjdGlvbiA9PiB0aGlzLmRlc3Ryb3lDb25uZWN0aW9uSWZQZXJpc2hlZChjb25uZWN0aW9uKSk7XG4gICAgICAgIGlmICh0aGlzLnRvdGFsQ29ubmVjdGlvbkNvdW50IDwgbWluUG9vbFNpemUgJiZcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0Nvbm5lY3Rpb25Db3VudCA8IHRoaXMub3B0aW9ucy5tYXhDb25uZWN0aW5nKSB7XG4gICAgICAgICAgICAvLyBOT1RFOiBlbnN1cmVNaW5Qb29sU2l6ZSBzaG91bGQgbm90IHRyeSB0byBnZXQgYWxsIHRoZSBwZW5kaW5nXG4gICAgICAgICAgICAvLyBjb25uZWN0aW9uIHBlcm1pdHMgYmVjYXVzZSB0aGF0IHBvdGVudGlhbGx5IGRlbGF5cyB0aGUgYXZhaWxhYmlsaXR5IG9mXG4gICAgICAgICAgICAvLyB0aGUgY29ubmVjdGlvbiB0byBhIGNoZWNrb3V0IHJlcXVlc3RcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQ29ubmVjdGlvbigoZXJyLCBjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzW2tTZXJ2ZXJdLmhhbmRsZUVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZXJyICYmIGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trQ29ubmVjdGlvbnNdLnB1c2goY29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soKCkgPT4gdGhpcy5wcm9jZXNzV2FpdFF1ZXVlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpc1trUG9vbFN0YXRlXSA9PT0gZXhwb3J0cy5Qb29sU3RhdGUucmVhZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgKDAsIHRpbWVyc18xLmNsZWFyVGltZW91dCkodGhpc1trTWluUG9vbFNpemVUaW1lcl0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzW2tNaW5Qb29sU2l6ZVRpbWVyXSA9ICgwLCB0aW1lcnNfMS5zZXRUaW1lb3V0KSgoKSA9PiB0aGlzLmVuc3VyZU1pblBvb2xTaXplKCksIHRoaXMub3B0aW9ucy5taW5Qb29sU2l6ZUNoZWNrRnJlcXVlbmN5TVMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgKDAsIHRpbWVyc18xLmNsZWFyVGltZW91dCkodGhpc1trTWluUG9vbFNpemVUaW1lcl0pO1xuICAgICAgICAgICAgdGhpc1trTWluUG9vbFNpemVUaW1lcl0gPSAoMCwgdGltZXJzXzEuc2V0VGltZW91dCkoKCkgPT4gdGhpcy5lbnN1cmVNaW5Qb29sU2l6ZSgpLCB0aGlzLm9wdGlvbnMubWluUG9vbFNpemVDaGVja0ZyZXF1ZW5jeU1TKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzV2FpdFF1ZXVlKCkge1xuICAgICAgICBpZiAodGhpc1trUHJvY2Vzc2luZ1dhaXRRdWV1ZV0pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tQcm9jZXNzaW5nV2FpdFF1ZXVlXSA9IHRydWU7XG4gICAgICAgIHdoaWxlICh0aGlzLndhaXRRdWV1ZVNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IHdhaXRRdWV1ZU1lbWJlciA9IHRoaXNba1dhaXRRdWV1ZV0uZmlyc3QoKTtcbiAgICAgICAgICAgIGlmICghd2FpdFF1ZXVlTWVtYmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpc1trV2FpdFF1ZXVlXS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdhaXRRdWV1ZU1lbWJlcltrQ2FuY2VsbGVkXSkge1xuICAgICAgICAgICAgICAgIHRoaXNba1dhaXRRdWV1ZV0uc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzW2tQb29sU3RhdGVdICE9PSBleHBvcnRzLlBvb2xTdGF0ZS5yZWFkeSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYXNvbiA9IHRoaXMuY2xvc2VkID8gJ3Bvb2xDbG9zZWQnIDogJ2Nvbm5lY3Rpb25FcnJvcic7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSB0aGlzLmNsb3NlZCA/IG5ldyBlcnJvcnNfMS5Qb29sQ2xvc2VkRXJyb3IodGhpcykgOiBuZXcgZXJyb3JzXzEuUG9vbENsZWFyZWRFcnJvcih0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXRBbmRMb2coQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9DSEVDS19PVVRfRkFJTEVELCBuZXcgY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25DaGVja091dEZhaWxlZEV2ZW50KHRoaXMsIHJlYXNvbiwgZXJyb3IpKTtcbiAgICAgICAgICAgICAgICBpZiAod2FpdFF1ZXVlTWVtYmVyLnRpbWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKHdhaXRRdWV1ZU1lbWJlci50aW1lcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXNba1dhaXRRdWV1ZV0uc2hpZnQoKTtcbiAgICAgICAgICAgICAgICB3YWl0UXVldWVNZW1iZXIuY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmF2YWlsYWJsZUNvbm5lY3Rpb25Db3VudCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHRoaXNba0Nvbm5lY3Rpb25zXS5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuZGVzdHJveUNvbm5lY3Rpb25JZlBlcmlzaGVkKGNvbm5lY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgdGhpc1trQ2hlY2tlZE91dF0uYWRkKGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdEFuZExvZyhDb25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX0NIRUNLRURfT1VULCBuZXcgY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25DaGVja2VkT3V0RXZlbnQodGhpcywgY29ubmVjdGlvbikpO1xuICAgICAgICAgICAgICAgIGlmICh3YWl0UXVldWVNZW1iZXIudGltZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgKDAsIHRpbWVyc18xLmNsZWFyVGltZW91dCkod2FpdFF1ZXVlTWVtYmVyLnRpbWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpc1trV2FpdFF1ZXVlXS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIHdhaXRRdWV1ZU1lbWJlci5jYWxsYmFjayh1bmRlZmluZWQsIGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgbWF4UG9vbFNpemUsIG1heENvbm5lY3RpbmcgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgd2hpbGUgKHRoaXMud2FpdFF1ZXVlU2l6ZSA+IDAgJiZcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0Nvbm5lY3Rpb25Db3VudCA8IG1heENvbm5lY3RpbmcgJiZcbiAgICAgICAgICAgIChtYXhQb29sU2l6ZSA9PT0gMCB8fCB0aGlzLnRvdGFsQ29ubmVjdGlvbkNvdW50IDwgbWF4UG9vbFNpemUpKSB7XG4gICAgICAgICAgICBjb25zdCB3YWl0UXVldWVNZW1iZXIgPSB0aGlzW2tXYWl0UXVldWVdLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAoIXdhaXRRdWV1ZU1lbWJlciB8fCB3YWl0UXVldWVNZW1iZXJba0NhbmNlbGxlZF0pIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQ29ubmVjdGlvbigoZXJyLCBjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHdhaXRRdWV1ZU1lbWJlcltrQ2FuY2VsbGVkXSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVyciAmJiBjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tDb25uZWN0aW9uc10ucHVzaChjb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0QW5kTG9nKENvbm5lY3Rpb25Qb29sLkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX0ZBSUxFRCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKE5PREUtNTE5Mik6IFJlbW92ZSB0aGlzIGNhc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvbkNoZWNrT3V0RmFpbGVkRXZlbnQodGhpcywgJ2Nvbm5lY3Rpb25FcnJvcicsIGVycikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba0NoZWNrZWRPdXRdLmFkZChjb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdEFuZExvZyhDb25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX0NIRUNLRURfT1VULCBuZXcgY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25DaGVja2VkT3V0RXZlbnQodGhpcywgY29ubmVjdGlvbikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh3YWl0UXVldWVNZW1iZXIudGltZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKHdhaXRRdWV1ZU1lbWJlci50aW1lcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgd2FpdFF1ZXVlTWVtYmVyLmNhbGxiYWNrKGVyciwgY29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soKCkgPT4gdGhpcy5wcm9jZXNzV2FpdFF1ZXVlKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trUHJvY2Vzc2luZ1dhaXRRdWV1ZV0gPSBmYWxzZTtcbiAgICB9XG59XG4vKipcbiAqIEVtaXR0ZWQgd2hlbiB0aGUgY29ubmVjdGlvbiBwb29sIGlzIGNyZWF0ZWQuXG4gKiBAZXZlbnRcbiAqL1xuQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9QT09MX0NSRUFURUQgPSBjb25zdGFudHNfMS5DT05ORUNUSU9OX1BPT0xfQ1JFQVRFRDtcbi8qKlxuICogRW1pdHRlZCBvbmNlIHdoZW4gdGhlIGNvbm5lY3Rpb24gcG9vbCBpcyBjbG9zZWRcbiAqIEBldmVudFxuICovXG5Db25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX1BPT0xfQ0xPU0VEID0gY29uc3RhbnRzXzEuQ09OTkVDVElPTl9QT09MX0NMT1NFRDtcbi8qKlxuICogRW1pdHRlZCBlYWNoIHRpbWUgdGhlIGNvbm5lY3Rpb24gcG9vbCBpcyBjbGVhcmVkIGFuZCBpdCdzIGdlbmVyYXRpb24gaW5jcmVtZW50ZWRcbiAqIEBldmVudFxuICovXG5Db25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX1BPT0xfQ0xFQVJFRCA9IGNvbnN0YW50c18xLkNPTk5FQ1RJT05fUE9PTF9DTEVBUkVEO1xuLyoqXG4gKiBFbWl0dGVkIGVhY2ggdGltZSB0aGUgY29ubmVjdGlvbiBwb29sIGlzIG1hcmtlZCByZWFkeVxuICogQGV2ZW50XG4gKi9cbkNvbm5lY3Rpb25Qb29sLkNPTk5FQ1RJT05fUE9PTF9SRUFEWSA9IGNvbnN0YW50c18xLkNPTk5FQ1RJT05fUE9PTF9SRUFEWTtcbi8qKlxuICogRW1pdHRlZCB3aGVuIGEgY29ubmVjdGlvbiBpcyBjcmVhdGVkLlxuICogQGV2ZW50XG4gKi9cbkNvbm5lY3Rpb25Qb29sLkNPTk5FQ1RJT05fQ1JFQVRFRCA9IGNvbnN0YW50c18xLkNPTk5FQ1RJT05fQ1JFQVRFRDtcbi8qKlxuICogRW1pdHRlZCB3aGVuIGEgY29ubmVjdGlvbiBiZWNvbWVzIGVzdGFibGlzaGVkLCBhbmQgaXMgcmVhZHkgdG8gdXNlXG4gKiBAZXZlbnRcbiAqL1xuQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9SRUFEWSA9IGNvbnN0YW50c18xLkNPTk5FQ1RJT05fUkVBRFk7XG4vKipcbiAqIEVtaXR0ZWQgd2hlbiBhIGNvbm5lY3Rpb24gaXMgY2xvc2VkXG4gKiBAZXZlbnRcbiAqL1xuQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9DTE9TRUQgPSBjb25zdGFudHNfMS5DT05ORUNUSU9OX0NMT1NFRDtcbi8qKlxuICogRW1pdHRlZCB3aGVuIGFuIGF0dGVtcHQgdG8gY2hlY2sgb3V0IGEgY29ubmVjdGlvbiBiZWdpbnNcbiAqIEBldmVudFxuICovXG5Db25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX0NIRUNLX09VVF9TVEFSVEVEID0gY29uc3RhbnRzXzEuQ09OTkVDVElPTl9DSEVDS19PVVRfU1RBUlRFRDtcbi8qKlxuICogRW1pdHRlZCB3aGVuIGFuIGF0dGVtcHQgdG8gY2hlY2sgb3V0IGEgY29ubmVjdGlvbiBmYWlsc1xuICogQGV2ZW50XG4gKi9cbkNvbm5lY3Rpb25Qb29sLkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX0ZBSUxFRCA9IGNvbnN0YW50c18xLkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX0ZBSUxFRDtcbi8qKlxuICogRW1pdHRlZCBlYWNoIHRpbWUgYSBjb25uZWN0aW9uIGlzIHN1Y2Nlc3NmdWxseSBjaGVja2VkIG91dCBvZiB0aGUgY29ubmVjdGlvbiBwb29sXG4gKiBAZXZlbnRcbiAqL1xuQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9DSEVDS0VEX09VVCA9IGNvbnN0YW50c18xLkNPTk5FQ1RJT05fQ0hFQ0tFRF9PVVQ7XG4vKipcbiAqIEVtaXR0ZWQgZWFjaCB0aW1lIGEgY29ubmVjdGlvbiBpcyBzdWNjZXNzZnVsbHkgY2hlY2tlZCBpbnRvIHRoZSBjb25uZWN0aW9uIHBvb2xcbiAqIEBldmVudFxuICovXG5Db25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX0NIRUNLRURfSU4gPSBjb25zdGFudHNfMS5DT05ORUNUSU9OX0NIRUNLRURfSU47XG5leHBvcnRzLkNvbm5lY3Rpb25Qb29sID0gQ29ubmVjdGlvblBvb2w7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25uZWN0aW9uX3Bvb2wuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ29ubmVjdGlvblBvb2wiLCJQb29sU3RhdGUiLCJ0aW1lcnNfMSIsInJlcXVpcmUiLCJjb25zdGFudHNfMSIsImVycm9yXzEiLCJtb25nb190eXBlc18xIiwidXRpbHNfMSIsImNvbm5lY3RfMSIsImNvbm5lY3Rpb25fMSIsImNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMSIsImVycm9yc18xIiwibWV0cmljc18xIiwia1NlcnZlciIsIlN5bWJvbCIsImtDb25uZWN0aW9ucyIsImtQZW5kaW5nIiwia0NoZWNrZWRPdXQiLCJrTWluUG9vbFNpemVUaW1lciIsImtHZW5lcmF0aW9uIiwia1NlcnZpY2VHZW5lcmF0aW9ucyIsImtDb25uZWN0aW9uQ291bnRlciIsImtDYW5jZWxsYXRpb25Ub2tlbiIsImtXYWl0UXVldWUiLCJrQ2FuY2VsbGVkIiwia01ldHJpY3MiLCJrUHJvY2Vzc2luZ1dhaXRRdWV1ZSIsImtQb29sU3RhdGUiLCJmcmVlemUiLCJwYXVzZWQiLCJyZWFkeSIsImNsb3NlZCIsIlR5cGVkRXZlbnRFbWl0dGVyIiwiY29uc3RydWN0b3IiLCJzZXJ2ZXIiLCJvcHRpb25zIiwiY29ubmVjdGlvblR5cGUiLCJDb25uZWN0aW9uIiwibWF4UG9vbFNpemUiLCJtaW5Qb29sU2l6ZSIsIm1heENvbm5lY3RpbmciLCJtYXhJZGxlVGltZU1TIiwid2FpdFF1ZXVlVGltZW91dE1TIiwibWluUG9vbFNpemVDaGVja0ZyZXF1ZW5jeU1TIiwiYXV0b0VuY3J5cHRlciIsIm1ldGFkYXRhIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsIkxpc3QiLCJTZXQiLCJ1bmRlZmluZWQiLCJNYXAiLCJtYWtlQ291bnRlciIsIkNhbmNlbGxhdGlvblRva2VuIiwic2V0TWF4TGlzdGVuZXJzIiwiSW5maW5pdHkiLCJDb25uZWN0aW9uUG9vbE1ldHJpY3MiLCJtb25nb0xvZ2dlciIsInRvcG9sb2d5IiwiY2xpZW50IiwiY29tcG9uZW50IiwicHJvY2VzcyIsIm5leHRUaWNrIiwiZW1pdEFuZExvZyIsIkNPTk5FQ1RJT05fUE9PTF9DUkVBVEVEIiwiQ29ubmVjdGlvblBvb2xDcmVhdGVkRXZlbnQiLCJhZGRyZXNzIiwiaG9zdEFkZHJlc3MiLCJ0b1N0cmluZyIsImdlbmVyYXRpb24iLCJ0b3RhbENvbm5lY3Rpb25Db3VudCIsImF2YWlsYWJsZUNvbm5lY3Rpb25Db3VudCIsInBlbmRpbmdDb25uZWN0aW9uQ291bnQiLCJjdXJyZW50Q2hlY2tlZE91dENvdW50IiwibGVuZ3RoIiwic2l6ZSIsIndhaXRRdWV1ZVNpemUiLCJsb2FkQmFsYW5jZWQiLCJzZXJ2aWNlR2VuZXJhdGlvbnMiLCJzZXJ2ZXJFcnJvciIsImRlc2NyaXB0aW9uIiwiZXJyb3IiLCJjaGVja2VkT3V0Q29ubmVjdGlvbnMiLCJ3YWl0UXVldWVFcnJvck1ldHJpY3MiLCJpbmZvIiwiQ09OTkVDVElPTl9QT09MX1JFQURZIiwiQ29ubmVjdGlvblBvb2xSZWFkeUV2ZW50IiwiY2xlYXJUaW1lb3V0IiwiZW5zdXJlTWluUG9vbFNpemUiLCJjaGVja091dCIsImNhbGxiYWNrIiwiQ09OTkVDVElPTl9DSEVDS19PVVRfU1RBUlRFRCIsIkNvbm5lY3Rpb25DaGVja091dFN0YXJ0ZWRFdmVudCIsIndhaXRRdWV1ZU1lbWJlciIsInRpbWVyIiwic2V0VGltZW91dCIsIkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX0ZBSUxFRCIsIkNvbm5lY3Rpb25DaGVja091dEZhaWxlZEV2ZW50IiwiV2FpdFF1ZXVlVGltZW91dEVycm9yIiwicHVzaCIsInByb2Nlc3NXYWl0UXVldWUiLCJjaGVja0luIiwiY29ubmVjdGlvbiIsImhhcyIsInBvb2xDbG9zZWQiLCJzdGFsZSIsImNvbm5lY3Rpb25Jc1N0YWxlIiwid2lsbERlc3Ryb3kiLCJtYXJrQXZhaWxhYmxlIiwidW5zaGlmdCIsImRlbGV0ZSIsIkNPTk5FQ1RJT05fQ0hFQ0tFRF9JTiIsIkNvbm5lY3Rpb25DaGVja2VkSW5FdmVudCIsInJlYXNvbiIsImRlc3Ryb3lDb25uZWN0aW9uIiwiY2xlYXIiLCJzZXJ2aWNlSWQiLCJNb25nb1J1bnRpbWVFcnJvciIsInNpZCIsInRvSGV4U3RyaW5nIiwiZ2V0Iiwic2V0IiwiQ09OTkVDVElPTl9QT09MX0NMRUFSRUQiLCJDb25uZWN0aW9uUG9vbENsZWFyZWRFdmVudCIsImludGVycnVwdEluVXNlQ29ubmVjdGlvbnMiLCJvbGRHZW5lcmF0aW9uIiwiYWxyZWFkeVBhdXNlZCIsImNsZWFyTWluUG9vbFNpemVUaW1lciIsIm1pbkdlbmVyYXRpb24iLCJvbkVycm9yIiwiUG9vbENsZWFyZWRPbk5ldHdvcmtFcnJvciIsImNsb3NlIiwiX29wdGlvbnMiLCJfY2IiLCJhc3NpZ24iLCJmb3JjZSIsImVtaXQiLCJyZXR1cm4iLCJlYWNoQXN5bmMiLCJ0b0FycmF5IiwiY29ubiIsImNiIiwiQ09OTkVDVElPTl9DTE9TRUQiLCJDb25uZWN0aW9uQ2xvc2VkRXZlbnQiLCJkZXN0cm95IiwiZXJyIiwiQ09OTkVDVElPTl9QT09MX0NMT1NFRCIsIkNvbm5lY3Rpb25Qb29sQ2xvc2VkRXZlbnQiLCJ3aXRoQ29ubmVjdGlvbiIsImZuIiwiZm5FcnIiLCJyZXN1bHQiLCJ3aXRoUmVhdXRoZW50aWNhdGlvbiIsIk1vbmdvRXJyb3IiLCJjb2RlIiwiTU9OR09EQl9FUlJPUl9DT0RFUyIsIlJlYXV0aGVudGljYXRlIiwicmVhdXRoZW50aWNhdGUiLCJyZXMiLCJhdXRoQ29udGV4dCIsImNyZWRlbnRpYWxzIiwiTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvciIsInJlc29sdmVkQ3JlZGVudGlhbHMiLCJyZXNvbHZlQXV0aE1lY2hhbmlzbSIsImhlbGxvIiwicHJvdmlkZXIiLCJBVVRIX1BST1ZJREVSUyIsIm1lY2hhbmlzbSIsInJlYXV0aCIsInRoZW4iLCJmblJlc3VsdCIsIm1pblBvb2xTaXplVGltZXIiLCJjb25uZWN0aW9uSXNJZGxlIiwiaWRsZVRpbWUiLCJkZXN0cm95Q29ubmVjdGlvbklmUGVyaXNoZWQiLCJpc1N0YWxlIiwiaXNJZGxlIiwiY3JlYXRlQ29ubmVjdGlvbiIsImNvbm5lY3RPcHRpb25zIiwiaWQiLCJuZXh0IiwiY2FuY2VsbGF0aW9uVG9rZW4iLCJDT05ORUNUSU9OX0NSRUFURUQiLCJDb25uZWN0aW9uQ3JlYXRlZEV2ZW50IiwiY29ubmVjdCIsIk1vbmdvTmV0d29ya0Vycm9yIiwiTW9uZ29TZXJ2ZXJFcnJvciIsImNvbm5lY3Rpb25HZW5lcmF0aW9uIiwiUG9vbENsb3NlZEVycm9yIiwiUG9vbENsZWFyZWRFcnJvciIsImV2ZW50IiwiQVBNX0VWRU5UUyIsIkNMVVNURVJfVElNRV9SRUNFSVZFRCIsIm9uIiwiZSIsIlBJTk5FRCIsInBpblR5cGUiLCJtYXJrUGlubmVkIiwiVU5QSU5ORUQiLCJtYXJrVW5waW5uZWQiLCJDT05ORUNUSU9OX1JFQURZIiwiQ29ubmVjdGlvblJlYWR5RXZlbnQiLCJwcnVuZSIsImhhbmRsZUVycm9yIiwiZmlyc3QiLCJzaGlmdCIsImFkZCIsIkNPTk5FQ1RJT05fQ0hFQ0tFRF9PVVQiLCJDb25uZWN0aW9uQ2hlY2tlZE91dEV2ZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/connection_pool.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/connection_pool_events.js":
/*!*****************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/connection_pool_events.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ConnectionPoolClearedEvent = exports.ConnectionCheckedInEvent = exports.ConnectionCheckedOutEvent = exports.ConnectionCheckOutFailedEvent = exports.ConnectionCheckOutStartedEvent = exports.ConnectionClosedEvent = exports.ConnectionReadyEvent = exports.ConnectionCreatedEvent = exports.ConnectionPoolClosedEvent = exports.ConnectionPoolReadyEvent = exports.ConnectionPoolCreatedEvent = exports.ConnectionPoolMonitoringEvent = void 0;\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\n/**\n * The base export class for all monitoring events published from the connection pool\n * @public\n * @category Event\n */ class ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool){\n        this.time = new Date();\n        this.address = pool.address;\n    }\n}\nexports.ConnectionPoolMonitoringEvent = ConnectionPoolMonitoringEvent;\n/**\n * An event published when a connection pool is created\n * @public\n * @category Event\n */ class ConnectionPoolCreatedEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_POOL_CREATED;\n        if (pool.options.credentials != null) {\n            // Intentionally remove credentials: NODE-5460\n            this.options = {\n                ...pool.options,\n                credentials: {}\n            };\n        } else {\n            this.options = pool.options;\n        }\n    }\n}\nexports.ConnectionPoolCreatedEvent = ConnectionPoolCreatedEvent;\n/**\n * An event published when a connection pool is ready\n * @public\n * @category Event\n */ class ConnectionPoolReadyEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_POOL_READY;\n    }\n}\nexports.ConnectionPoolReadyEvent = ConnectionPoolReadyEvent;\n/**\n * An event published when a connection pool is closed\n * @public\n * @category Event\n */ class ConnectionPoolClosedEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_POOL_CLOSED;\n    }\n}\nexports.ConnectionPoolClosedEvent = ConnectionPoolClosedEvent;\n/**\n * An event published when a connection pool creates a new connection\n * @public\n * @category Event\n */ class ConnectionCreatedEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool, connection){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_CREATED;\n        this.connectionId = connection.id;\n    }\n}\nexports.ConnectionCreatedEvent = ConnectionCreatedEvent;\n/**\n * An event published when a connection is ready for use\n * @public\n * @category Event\n */ class ConnectionReadyEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool, connection){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_READY;\n        this.connectionId = connection.id;\n    }\n}\nexports.ConnectionReadyEvent = ConnectionReadyEvent;\n/**\n * An event published when a connection is closed\n * @public\n * @category Event\n */ class ConnectionClosedEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool, connection, reason, error){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_CLOSED;\n        this.connectionId = connection.id;\n        this.reason = reason;\n        this.serviceId = connection.serviceId;\n        this.error = error ?? null;\n    }\n}\nexports.ConnectionClosedEvent = ConnectionClosedEvent;\n/**\n * An event published when a request to check a connection out begins\n * @public\n * @category Event\n */ class ConnectionCheckOutStartedEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_CHECK_OUT_STARTED;\n    }\n}\nexports.ConnectionCheckOutStartedEvent = ConnectionCheckOutStartedEvent;\n/**\n * An event published when a request to check a connection out fails\n * @public\n * @category Event\n */ class ConnectionCheckOutFailedEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool, reason, error){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_CHECK_OUT_FAILED;\n        this.reason = reason;\n        this.error = error;\n    }\n}\nexports.ConnectionCheckOutFailedEvent = ConnectionCheckOutFailedEvent;\n/**\n * An event published when a connection is checked out of the connection pool\n * @public\n * @category Event\n */ class ConnectionCheckedOutEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool, connection){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_CHECKED_OUT;\n        this.connectionId = connection.id;\n    }\n}\nexports.ConnectionCheckedOutEvent = ConnectionCheckedOutEvent;\n/**\n * An event published when a connection is checked into the connection pool\n * @public\n * @category Event\n */ class ConnectionCheckedInEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool, connection){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_CHECKED_IN;\n        this.connectionId = connection.id;\n    }\n}\nexports.ConnectionCheckedInEvent = ConnectionCheckedInEvent;\n/**\n * An event published when a connection pool is cleared\n * @public\n * @category Event\n */ class ConnectionPoolClearedEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool, options = {}){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_POOL_CLEARED;\n        this.serviceId = options.serviceId;\n        this.interruptInUseConnections = options.interruptInUseConnections;\n    }\n}\nexports.ConnectionPoolClearedEvent = ConnectionPoolClearedEvent; //# sourceMappingURL=connection_pool_events.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb25uZWN0aW9uX3Bvb2xfZXZlbnRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQ0FBa0MsR0FBR0EsZ0NBQWdDLEdBQUdBLGlDQUFpQyxHQUFHQSxxQ0FBcUMsR0FBR0Esc0NBQXNDLEdBQUdBLDZCQUE2QixHQUFHQSw0QkFBNEIsR0FBR0EsOEJBQThCLEdBQUdBLGlDQUFpQyxHQUFHQSxnQ0FBZ0MsR0FBR0Esa0NBQWtDLEdBQUdBLHFDQUFxQyxHQUFHLEtBQUs7QUFDdGIsTUFBTWMsY0FBY0MsbUJBQU9BLENBQUMsbUVBQWM7QUFDMUM7Ozs7Q0FJQyxHQUNELE1BQU1GO0lBQ0YsY0FBYyxHQUNkRyxZQUFZQyxJQUFJLENBQUU7UUFDZCxJQUFJLENBQUNDLElBQUksR0FBRyxJQUFJQztRQUNoQixJQUFJLENBQUNDLE9BQU8sR0FBR0gsS0FBS0csT0FBTztJQUMvQjtBQUNKO0FBQ0FwQixxQ0FBcUMsR0FBR2E7QUFDeEM7Ozs7Q0FJQyxHQUNELE1BQU1ELG1DQUFtQ0M7SUFDckMsY0FBYyxHQUNkRyxZQUFZQyxJQUFJLENBQUU7UUFDZCxLQUFLLENBQUNBO1FBQ04sY0FBYyxHQUNkLElBQUksQ0FBQ0ksSUFBSSxHQUFHUCxZQUFZUSx1QkFBdUI7UUFDL0MsSUFBSUwsS0FBS00sT0FBTyxDQUFDQyxXQUFXLElBQUksTUFBTTtZQUNsQyw4Q0FBOEM7WUFDOUMsSUFBSSxDQUFDRCxPQUFPLEdBQUc7Z0JBQUUsR0FBR04sS0FBS00sT0FBTztnQkFBRUMsYUFBYSxDQUFDO1lBQUU7UUFDdEQsT0FDSztZQUNELElBQUksQ0FBQ0QsT0FBTyxHQUFHTixLQUFLTSxPQUFPO1FBQy9CO0lBQ0o7QUFDSjtBQUNBdkIsa0NBQWtDLEdBQUdZO0FBQ3JDOzs7O0NBSUMsR0FDRCxNQUFNRCxpQ0FBaUNFO0lBQ25DLGNBQWMsR0FDZEcs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QixxQkFBcUI7UUFDN0MsSUFBSSxDQUFDVixZQUFZLEdBQUdGLFdBQVdHLEVBQUU7SUFDckM7QUFDSjtBQUNBOUIsZ0NBQWdDLEdBQUdHO0FBQ25DOzs7O0NBSUMsR0FDRCxNQUFNRCxtQ0FBbUNXO0lBQ3JDLGNBQWMsR0FDZEcsWUFBWUMsSUFBSSxFQUFFTSxVQUFVLENBQUMsQ0FBQyxDQUFFO1FBQzVCLEtBQUssQ0FBQ047UUFDTixjQUFjLEdBQ2QsSUFBSSxDQUFDSSxJQUFJLEdBQUdQLFlBQVkwQix1QkFBdUI7UUFDL0MsSUFBSSxDQUFDTCxTQUFTLEdBQUdaLFFBQVFZLFNBQVM7UUFDbEMsSUFBSSxDQUFDTSx5QkFBeUIsR0FBR2xCLFFBQVFrQix5QkFBeUI7SUFDdEU7QUFDSjtBQUNBekMsa0NBQWtDLEdBQUdFLDRCQUNyQyxrREFBa0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb25uZWN0aW9uX3Bvb2xfZXZlbnRzLmpzPzE5YzEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNvbm5lY3Rpb25Qb29sQ2xlYXJlZEV2ZW50ID0gZXhwb3J0cy5Db25uZWN0aW9uQ2hlY2tlZEluRXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25DaGVja2VkT3V0RXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25DaGVja091dEZhaWxlZEV2ZW50ID0gZXhwb3J0cy5Db25uZWN0aW9uQ2hlY2tPdXRTdGFydGVkRXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25DbG9zZWRFdmVudCA9IGV4cG9ydHMuQ29ubmVjdGlvblJlYWR5RXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25DcmVhdGVkRXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25Qb29sQ2xvc2VkRXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25Qb29sUmVhZHlFdmVudCA9IGV4cG9ydHMuQ29ubmVjdGlvblBvb2xDcmVhdGVkRXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25Qb29sTW9uaXRvcmluZ0V2ZW50ID0gdm9pZCAwO1xuY29uc3QgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xuLyoqXG4gKiBUaGUgYmFzZSBleHBvcnQgY2xhc3MgZm9yIGFsbCBtb25pdG9yaW5nIGV2ZW50cyBwdWJsaXNoZWQgZnJvbSB0aGUgY29ubmVjdGlvbiBwb29sXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXZlbnRcbiAqL1xuY2xhc3MgQ29ubmVjdGlvblBvb2xNb25pdG9yaW5nRXZlbnQge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcihwb29sKSB7XG4gICAgICAgIHRoaXMudGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IHBvb2wuYWRkcmVzcztcbiAgICB9XG59XG5leHBvcnRzLkNvbm5lY3Rpb25Qb29sTW9uaXRvcmluZ0V2ZW50ID0gQ29ubmVjdGlvblBvb2xNb25pdG9yaW5nRXZlbnQ7XG4vKipcbiAqIEFuIGV2ZW50IHB1Ymxpc2hlZCB3aGVuIGEgY29ubmVjdGlvbiBwb29sIGlzIGNyZWF0ZWRcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBDb25uZWN0aW9uUG9vbENyZWF0ZWRFdmVudCBleHRlbmRzIENvbm5lY3Rpb25Qb29sTW9uaXRvcmluZ0V2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IocG9vbCkge1xuICAgICAgICBzdXBlcihwb29sKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdGFudHNfMS5DT05ORUNUSU9OX1BPT0xfQ1JFQVRFRDtcbiAgICAgICAgaWYgKHBvb2wub3B0aW9ucy5jcmVkZW50aWFscyAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyBJbnRlbnRpb25hbGx5IHJlbW92ZSBjcmVkZW50aWFsczogTk9ERS01NDYwXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSB7IC4uLnBvb2wub3B0aW9ucywgY3JlZGVudGlhbHM6IHt9IH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBwb29sLm9wdGlvbnM7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLkNvbm5lY3Rpb25Qb29sQ3JlYXRlZEV2ZW50ID0gQ29ubmVjdGlvblBvb2xDcmVhdGVkRXZlbnQ7XG4vKipcbiAqIEFuIGV2ZW50IHB1Ymxpc2hlZCB3aGVuIGEgY29ubmVjdGlvbiBwb29sIGlzIHJlYWR5XG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXZlbnRcbiAqL1xuY2xhc3MgQ29ubmVjdGlvblBvb2xSZWFkeUV2ZW50IGV4dGVuZHMgQ29ubmVjdGlvblBvb2xNb25pdG9yaW5nRXZlbnQge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcihwb29sKSB7XG4gICAgICAgIHN1cGVyKHBvb2wpO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubmFtZSA9IGNvbnN0YW50c18xLkNPTk5FQ1RJT05fUE9PTF9SRUFEWTtcbiAgICB9XG59XG5leHBvcnRzLkNvbm5lY3Rpb25Qb29sUmVhZHlFdmVudCA9IENvbm5lY3Rpb25Qb29sUmVhZHlFdmVudDtcbi8qKlxuICogQW4gZXZlbnQgcHVibGlzaGVkIHdoZW4gYSBjb25uZWN0aW9uIHBvb2wgaXMgY2xvc2VkXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXZlbnRcbiAqL1xuY2xhc3MgQ29ubmVjdGlvblBvb2xDbG9zZWRFdmVudCBleHRlbmRzIENvbm5lY3Rpb25Qb29sTW9uaXRvcmluZ0V2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IocG9vbCkge1xuICAgICAgICBzdXBlcihwb29sKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdGFudHNfMS5DT05ORUNUSU9OX1BPT0xfQ0xPU0VEO1xuICAgIH1cbn1cbmV4cG9ydHMuQ29ubmVjdGlvblBvb2xDbG9zZWRFdmVudCA9IENvbm5lY3Rpb25Qb29sQ2xvc2VkRXZlbnQ7XG4vKipcbiAqIEFuIGV2ZW50IHB1Ymxpc2hlZCB3aGVuIGEgY29ubmVjdGlvbiBwb29sIGNyZWF0ZXMgYSBuZXcgY29ubmVjdGlvblxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIENvbm5lY3Rpb25DcmVhdGVkRXZlbnQgZXh0ZW5kcyBDb25uZWN0aW9uUG9vbE1vbml0b3JpbmdFdmVudCB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKHBvb2wsIGNvbm5lY3Rpb24pIHtcbiAgICAgICAgc3VwZXIocG9vbCk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gY29uc3RhbnRzXzEuQ09OTkVDVElPTl9DUkVBVEVEO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25JZCA9IGNvbm5lY3Rpb24uaWQ7XG4gICAgfVxufVxuZXhwb3J0cy5Db25uZWN0aW9uQ3JlYXRlZEV2ZW50ID0gQ29ubmVjdGlvbkNyZWF0ZWRFdmVudDtcbi8qKlxuICogQW4gZXZlbnQgcHVibGlzaGVkIHdoZW4gYSBjb25uZWN0aW9uIGlzIHJlYWR5IGZvciB1c2VcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBDb25uZWN0aW9uUmVhZHlFdmVudCBleHRlbmRzIENvbm5lY3Rpb25Qb29sTW9uaXRvcmluZ0V2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IocG9vbCwgY29ubmVjdGlvbikge1xuICAgICAgICBzdXBlcihwb29sKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdGFudHNfMS5DT05ORUNUSU9OX1JFQURZO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25JZCA9IGNvbm5lY3Rpb24uaWQ7XG4gICAgfVxufVxuZXhwb3J0cy5Db25uZWN0aW9uUmVhZHlFdmVudCA9IENvbm5lY3Rpb25SZWFkeUV2ZW50O1xuLyoqXG4gKiBBbiBldmVudCBwdWJsaXNoZWQgd2hlbiBhIGNvbm5lY3Rpb24gaXMgY2xvc2VkXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXZlbnRcbiAqL1xuY2xhc3MgQ29ubmVjdGlvbkNsb3NlZEV2ZW50IGV4dGVuZHMgQ29ubmVjdGlvblBvb2xNb25pdG9yaW5nRXZlbnQge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcihwb29sLCBjb25uZWN0aW9uLCByZWFzb24sIGVycm9yKSB7XG4gICAgICAgIHN1cGVyKHBvb2wpO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubmFtZSA9IGNvbnN0YW50c18xLkNPTk5FQ1RJT05fQ0xPU0VEO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25JZCA9IGNvbm5lY3Rpb24uaWQ7XG4gICAgICAgIHRoaXMucmVhc29uID0gcmVhc29uO1xuICAgICAgICB0aGlzLnNlcnZpY2VJZCA9IGNvbm5lY3Rpb24uc2VydmljZUlkO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3IgPz8gbnVsbDtcbiAgICB9XG59XG5leHBvcnRzLkNvbm5lY3Rpb25DbG9zZWRFdmVudCA9IENvbm5lY3Rpb25DbG9zZWRFdmVudDtcbi8qKlxuICogQW4gZXZlbnQgcHVibGlzaGVkIHdoZW4gYSByZXF1ZXN0IHRvIGNoZWNrIGEgY29ubmVjdGlvbiBvdXQgYmVnaW5zXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXZlbnRcbiAqL1xuY2xhc3MgQ29ubmVjdGlvbkNoZWNrT3V0U3RhcnRlZEV2ZW50IGV4dGVuZHMgQ29ubmVjdGlvblBvb2xNb25pdG9yaW5nRXZlbnQge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcihwb29sKSB7XG4gICAgICAgIHN1cGVyKHBvb2wpO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubmFtZSA9IGNvbnN0YW50c18xLkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX1NUQVJURUQ7XG4gICAgfVxufVxuZXhwb3J0cy5Db25uZWN0aW9uQ2hlY2tPdXRTdGFydGVkRXZlbnQgPSBDb25uZWN0aW9uQ2hlY2tPdXRTdGFydGVkRXZlbnQ7XG4vKipcbiAqIEFuIGV2ZW50IHB1Ymxpc2hlZCB3aGVuIGEgcmVxdWVzdCB0byBjaGVjayBhIGNvbm5lY3Rpb24gb3V0IGZhaWxzXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXZlbnRcbiAqL1xuY2xhc3MgQ29ubmVjdGlvbkNoZWNrT3V0RmFpbGVkRXZlbnQgZXh0ZW5kcyBDb25uZWN0aW9uUG9vbE1vbml0b3JpbmdFdmVudCB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKHBvb2wsIHJlYXNvbiwgZXJyb3IpIHtcbiAgICAgICAgc3VwZXIocG9vbCk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gY29uc3RhbnRzXzEuQ09OTkVDVElPTl9DSEVDS19PVVRfRkFJTEVEO1xuICAgICAgICB0aGlzLnJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgIH1cbn1cbmV4cG9ydHMuQ29ubmVjdGlvbkNoZWNrT3V0RmFpbGVkRXZlbnQgPSBDb25uZWN0aW9uQ2hlY2tPdXRGYWlsZWRFdmVudDtcbi8qKlxuICogQW4gZXZlbnQgcHVibGlzaGVkIHdoZW4gYSBjb25uZWN0aW9uIGlzIGNoZWNrZWQgb3V0IG9mIHRoZSBjb25uZWN0aW9uIHBvb2xcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBDb25uZWN0aW9uQ2hlY2tlZE91dEV2ZW50IGV4dGVuZHMgQ29ubmVjdGlvblBvb2xNb25pdG9yaW5nRXZlbnQge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcihwb29sLCBjb25uZWN0aW9uKSB7XG4gICAgICAgIHN1cGVyKHBvb2wpO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubmFtZSA9IGNvbnN0YW50c18xLkNPTk5FQ1RJT05fQ0hFQ0tFRF9PVVQ7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbklkID0gY29ubmVjdGlvbi5pZDtcbiAgICB9XG59XG5leHBvcnRzLkNvbm5lY3Rpb25DaGVja2VkT3V0RXZlbnQgPSBDb25uZWN0aW9uQ2hlY2tlZE91dEV2ZW50O1xuLyoqXG4gKiBBbiBldmVudCBwdWJsaXNoZWQgd2hlbiBhIGNvbm5lY3Rpb24gaXMgY2hlY2tlZCBpbnRvIHRoZSBjb25uZWN0aW9uIHBvb2xcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBDb25uZWN0aW9uQ2hlY2tlZEluRXZlbnQgZXh0ZW5kcyBDb25uZWN0aW9uUG9vbE1vbml0b3JpbmdFdmVudCB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKHBvb2wsIGNvbm5lY3Rpb24pIHtcbiAgICAgICAgc3VwZXIocG9vbCk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gY29uc3RhbnRzXzEuQ09OTkVDVElPTl9DSEVDS0VEX0lOO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25JZCA9IGNvbm5lY3Rpb24uaWQ7XG4gICAgfVxufVxuZXhwb3J0cy5Db25uZWN0aW9uQ2hlY2tlZEluRXZlbnQgPSBDb25uZWN0aW9uQ2hlY2tlZEluRXZlbnQ7XG4vKipcbiAqIEFuIGV2ZW50IHB1Ymxpc2hlZCB3aGVuIGEgY29ubmVjdGlvbiBwb29sIGlzIGNsZWFyZWRcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBDb25uZWN0aW9uUG9vbENsZWFyZWRFdmVudCBleHRlbmRzIENvbm5lY3Rpb25Qb29sTW9uaXRvcmluZ0V2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IocG9vbCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHBvb2wpO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubmFtZSA9IGNvbnN0YW50c18xLkNPTk5FQ1RJT05fUE9PTF9DTEVBUkVEO1xuICAgICAgICB0aGlzLnNlcnZpY2VJZCA9IG9wdGlvbnMuc2VydmljZUlkO1xuICAgICAgICB0aGlzLmludGVycnVwdEluVXNlQ29ubmVjdGlvbnMgPSBvcHRpb25zLmludGVycnVwdEluVXNlQ29ubmVjdGlvbnM7XG4gICAgfVxufVxuZXhwb3J0cy5Db25uZWN0aW9uUG9vbENsZWFyZWRFdmVudCA9IENvbm5lY3Rpb25Qb29sQ2xlYXJlZEV2ZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29ubmVjdGlvbl9wb29sX2V2ZW50cy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJDb25uZWN0aW9uUG9vbENsZWFyZWRFdmVudCIsIkNvbm5lY3Rpb25DaGVja2VkSW5FdmVudCIsIkNvbm5lY3Rpb25DaGVja2VkT3V0RXZlbnQiLCJDb25uZWN0aW9uQ2hlY2tPdXRGYWlsZWRFdmVudCIsIkNvbm5lY3Rpb25DaGVja091dFN0YXJ0ZWRFdmVudCIsIkNvbm5lY3Rpb25DbG9zZWRFdmVudCIsIkNvbm5lY3Rpb25SZWFkeUV2ZW50IiwiQ29ubmVjdGlvbkNyZWF0ZWRFdmVudCIsIkNvbm5lY3Rpb25Qb29sQ2xvc2VkRXZlbnQiLCJDb25uZWN0aW9uUG9vbFJlYWR5RXZlbnQiLCJDb25uZWN0aW9uUG9vbENyZWF0ZWRFdmVudCIsIkNvbm5lY3Rpb25Qb29sTW9uaXRvcmluZ0V2ZW50IiwiY29uc3RhbnRzXzEiLCJyZXF1aXJlIiwiY29uc3RydWN0b3IiLCJwb29sIiwidGltZSIsIkRhdGUiLCJhZGRyZXNzIiwibmFtZSIsIkNPTk5FQ1RJT05fUE9PTF9DUkVBVEVEIiwib3B0aW9ucyIsImNyZWRlbnRpYWxzIiwiQ09OTkVDVElPTl9QT09MX1JFQURZIiwiQ09OTkVDVElPTl9QT09MX0NMT1NFRCIsImNvbm5lY3Rpb24iLCJDT05ORUNUSU9OX0NSRUFURUQiLCJjb25uZWN0aW9uSWQiLCJpZCIsIkNPTk5FQ1RJT05fUkVBRFkiLCJyZWFzb24iLCJlcnJvciIsIkNPTk5FQ1RJT05fQ0xPU0VEIiwic2VydmljZUlkIiwiQ09OTkVDVElPTl9DSEVDS19PVVRfU1RBUlRFRCIsIkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX0ZBSUxFRCIsIkNPTk5FQ1RJT05fQ0hFQ0tFRF9PVVQiLCJDT05ORUNUSU9OX0NIRUNLRURfSU4iLCJDT05ORUNUSU9OX1BPT0xfQ0xFQVJFRCIsImludGVycnVwdEluVXNlQ29ubmVjdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/connection_pool_events.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/errors.js":
/*!*************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/errors.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.WaitQueueTimeoutError = exports.PoolClearedOnNetworkError = exports.PoolClearedError = exports.PoolClosedError = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/**\n * An error indicating a connection pool is closed\n * @category Error\n */ class PoolClosedError extends error_1.MongoDriverError {\n    constructor(pool){\n        super(\"Attempted to check out a connection from closed connection pool\");\n        this.address = pool.address;\n    }\n    get name() {\n        return \"MongoPoolClosedError\";\n    }\n}\nexports.PoolClosedError = PoolClosedError;\n/**\n * An error indicating a connection pool is currently paused\n * @category Error\n */ class PoolClearedError extends error_1.MongoNetworkError {\n    constructor(pool, message){\n        const errorMessage = message ? message : `Connection pool for ${pool.address} was cleared because another operation failed with: \"${pool.serverError?.message}\"`;\n        super(errorMessage);\n        this.address = pool.address;\n        this.addErrorLabel(error_1.MongoErrorLabel.RetryableWriteError);\n    }\n    get name() {\n        return \"MongoPoolClearedError\";\n    }\n}\nexports.PoolClearedError = PoolClearedError;\n/**\n * An error indicating that a connection pool has been cleared after the monitor for that server timed out.\n * @category Error\n */ class PoolClearedOnNetworkError extends PoolClearedError {\n    constructor(pool){\n        super(pool, `Connection to ${pool.address} interrupted due to server monitor timeout`);\n    }\n    get name() {\n        return \"PoolClearedOnNetworkError\";\n    }\n}\nexports.PoolClearedOnNetworkError = PoolClearedOnNetworkError;\n/**\n * An error thrown when a request to check out a connection times out\n * @category Error\n */ class WaitQueueTimeoutError extends error_1.MongoDriverError {\n    constructor(message, address){\n        super(message);\n        this.address = address;\n    }\n    get name() {\n        return \"MongoWaitQueueTimeoutError\";\n    }\n}\nexports.WaitQueueTimeoutError = WaitQueueTimeoutError; //# sourceMappingURL=errors.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9lcnJvcnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDZCQUE2QixHQUFHQSxpQ0FBaUMsR0FBR0Esd0JBQXdCLEdBQUdBLHVCQUF1QixHQUFHLEtBQUs7QUFDOUgsTUFBTU0sVUFBVUMsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEM7OztDQUdDLEdBQ0QsTUFBTUYsd0JBQXdCQyxRQUFRRSxnQkFBZ0I7SUFDbERDLFlBQVlDLElBQUksQ0FBRTtRQUNkLEtBQUssQ0FBQztRQUNOLElBQUksQ0FBQ0MsT0FBTyxHQUFHRCxLQUFLQyxPQUFPO0lBQy9CO0lBQ0EsSUFBSUMsT0FBTztRQUNQLE9BQU87SUFDWDtBQUNKO0FBQ0FaLHVCQUF1QixHQUFHSztBQUMxQjs7O0NBR0MsR0FDRCxNQUFNRCx5QkFBeUJFLFFBQVFPLGlCQUFpQjtJQUNwREosWUFBWUMsSUFBSSxFQUFFSSxPQUFPLENBQUU7UUFDdkIsTUFBTUMsZUFBZUQsVUFDZkEsVUFDQSxDQUFDLG9CQUFvQixFQUFFSixLQUFLQyxPQUFPLENBQUMscURBQXFELEVBQUVELEtBQUtNLFdBQVcsRUFBRUYsUUFBUSxDQUFDLENBQUM7UUFDN0gsS0FBSyxDQUFDQztRQUNOLElBQUksQ0FBQ0osT0FBTyxHQUFHRCxLQUFLQyxPQUFPO1FBQzNCLElBQUksQ0FBQ00sYUFBYSxDQUFDWCxRQUFRWSxlQUFlLENBQUNDLG1CQUFtQjtJQUNsRTtJQUNBLElBQUlQLE9BQU87UUFDUCxPQUFPO0lBQ1g7QUFDSjtBQUNBWix3QkFBd0IsR0FBR0k7QUFDM0I7OztDQUdDLEdBQ0QsTUFBTUQsa0NBQWtDQztJQUNwQ0ssWUFBWUMsSUFBSSxDQUFFO1FBQ2QsS0FBSyxDQUFDQSxNQUFNLENBQUMsY0FBYyxFQUFFQSxLQUFLQyxPQUFPLENBQUMsMENBQTBDLENBQUM7SUFDekY7SUFDQSxJQUFJQyxPQUFPO1FBQ1AsT0FBTztJQUNYO0FBQ0o7QUFDQVosaUNBQWlDLEdBQUdHO0FBQ3BDOzs7Q0FHQyxHQUNELE1BQU1ELDhCQUE4QkksUUFBUUUsZ0JBQWdCO0lBQ3hEQyxZQUFZSyxPQUFPLEVBQUVILE9BQU8sQ0FBRTtRQUMxQixLQUFLLENBQUNHO1FBQ04sSUFBSSxDQUFDSCxPQUFPLEdBQUdBO0lBQ25CO0lBQ0EsSUFBSUMsT0FBTztRQUNQLE9BQU87SUFDWDtBQUNKO0FBQ0FaLDZCQUE2QixHQUFHRSx1QkFDaEMsa0NBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvZXJyb3JzLmpzPzVkYzkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLldhaXRRdWV1ZVRpbWVvdXRFcnJvciA9IGV4cG9ydHMuUG9vbENsZWFyZWRPbk5ldHdvcmtFcnJvciA9IGV4cG9ydHMuUG9vbENsZWFyZWRFcnJvciA9IGV4cG9ydHMuUG9vbENsb3NlZEVycm9yID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbi8qKlxuICogQW4gZXJyb3IgaW5kaWNhdGluZyBhIGNvbm5lY3Rpb24gcG9vbCBpcyBjbG9zZWRcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBQb29sQ2xvc2VkRXJyb3IgZXh0ZW5kcyBlcnJvcl8xLk1vbmdvRHJpdmVyRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHBvb2wpIHtcbiAgICAgICAgc3VwZXIoJ0F0dGVtcHRlZCB0byBjaGVjayBvdXQgYSBjb25uZWN0aW9uIGZyb20gY2xvc2VkIGNvbm5lY3Rpb24gcG9vbCcpO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBwb29sLmFkZHJlc3M7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvUG9vbENsb3NlZEVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLlBvb2xDbG9zZWRFcnJvciA9IFBvb2xDbG9zZWRFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgaW5kaWNhdGluZyBhIGNvbm5lY3Rpb24gcG9vbCBpcyBjdXJyZW50bHkgcGF1c2VkXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgUG9vbENsZWFyZWRFcnJvciBleHRlbmRzIGVycm9yXzEuTW9uZ29OZXR3b3JrRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHBvb2wsIG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gbWVzc2FnZVxuICAgICAgICAgICAgPyBtZXNzYWdlXG4gICAgICAgICAgICA6IGBDb25uZWN0aW9uIHBvb2wgZm9yICR7cG9vbC5hZGRyZXNzfSB3YXMgY2xlYXJlZCBiZWNhdXNlIGFub3RoZXIgb3BlcmF0aW9uIGZhaWxlZCB3aXRoOiBcIiR7cG9vbC5zZXJ2ZXJFcnJvcj8ubWVzc2FnZX1cImA7XG4gICAgICAgIHN1cGVyKGVycm9yTWVzc2FnZSk7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IHBvb2wuYWRkcmVzcztcbiAgICAgICAgdGhpcy5hZGRFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlJldHJ5YWJsZVdyaXRlRXJyb3IpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb1Bvb2xDbGVhcmVkRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuUG9vbENsZWFyZWRFcnJvciA9IFBvb2xDbGVhcmVkRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIGluZGljYXRpbmcgdGhhdCBhIGNvbm5lY3Rpb24gcG9vbCBoYXMgYmVlbiBjbGVhcmVkIGFmdGVyIHRoZSBtb25pdG9yIGZvciB0aGF0IHNlcnZlciB0aW1lZCBvdXQuXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgUG9vbENsZWFyZWRPbk5ldHdvcmtFcnJvciBleHRlbmRzIFBvb2xDbGVhcmVkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHBvb2wpIHtcbiAgICAgICAgc3VwZXIocG9vbCwgYENvbm5lY3Rpb24gdG8gJHtwb29sLmFkZHJlc3N9IGludGVycnVwdGVkIGR1ZSB0byBzZXJ2ZXIgbW9uaXRvciB0aW1lb3V0YCk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ1Bvb2xDbGVhcmVkT25OZXR3b3JrRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuUG9vbENsZWFyZWRPbk5ldHdvcmtFcnJvciA9IFBvb2xDbGVhcmVkT25OZXR3b3JrRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIHRocm93biB3aGVuIGEgcmVxdWVzdCB0byBjaGVjayBvdXQgYSBjb25uZWN0aW9uIHRpbWVzIG91dFxuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIFdhaXRRdWV1ZVRpbWVvdXRFcnJvciBleHRlbmRzIGVycm9yXzEuTW9uZ29Ecml2ZXJFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgYWRkcmVzcykge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcztcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29XYWl0UXVldWVUaW1lb3V0RXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuV2FpdFF1ZXVlVGltZW91dEVycm9yID0gV2FpdFF1ZXVlVGltZW91dEVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIldhaXRRdWV1ZVRpbWVvdXRFcnJvciIsIlBvb2xDbGVhcmVkT25OZXR3b3JrRXJyb3IiLCJQb29sQ2xlYXJlZEVycm9yIiwiUG9vbENsb3NlZEVycm9yIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJNb25nb0RyaXZlckVycm9yIiwiY29uc3RydWN0b3IiLCJwb29sIiwiYWRkcmVzcyIsIm5hbWUiLCJNb25nb05ldHdvcmtFcnJvciIsIm1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJzZXJ2ZXJFcnJvciIsImFkZEVycm9yTGFiZWwiLCJNb25nb0Vycm9yTGFiZWwiLCJSZXRyeWFibGVXcml0ZUVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/handshake/client_metadata.js":
/*!********************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/handshake/client_metadata.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getFAASEnv = exports.makeClientMetadata = exports.LimitedSizeDocument = void 0;\nconst os = __webpack_require__(/*! os */ \"os\");\nconst process = __webpack_require__(/*! process */ \"process\");\nconst bson_1 = __webpack_require__(/*! ../../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst NODE_DRIVER_VERSION = (__webpack_require__(/*! ../../../package.json */ \"(ssr)/./node_modules/mongodb/package.json\").version);\n/** @internal */ class LimitedSizeDocument {\n    constructor(maxSize){\n        this.maxSize = maxSize;\n        this.document = new Map();\n        /** BSON overhead: Int32 + Null byte */ this.documentSize = 5;\n    }\n    /** Only adds key/value if the bsonByteLength is less than MAX_SIZE */ ifItFitsItSits(key, value) {\n        // The BSON byteLength of the new element is the same as serializing it to its own document\n        // subtracting the document size int32 and the null terminator.\n        const newElementSize = bson_1.BSON.serialize(new Map().set(key, value)).byteLength - 5;\n        if (newElementSize + this.documentSize > this.maxSize) {\n            return false;\n        }\n        this.documentSize += newElementSize;\n        this.document.set(key, value);\n        return true;\n    }\n    toObject() {\n        return bson_1.BSON.deserialize(bson_1.BSON.serialize(this.document), {\n            promoteLongs: false,\n            promoteBuffers: false,\n            promoteValues: false,\n            useBigInt64: false\n        });\n    }\n}\nexports.LimitedSizeDocument = LimitedSizeDocument;\n/**\n * From the specs:\n * Implementors SHOULD cumulatively update fields in the following order until the document is under the size limit:\n * 1. Omit fields from `env` except `env.name`.\n * 2. Omit fields from `os` except `os.type`.\n * 3. Omit the `env` document entirely.\n * 4. Truncate `platform`. -- special we do not truncate this field\n */ function makeClientMetadata(options) {\n    const metadataDocument = new LimitedSizeDocument(512);\n    const { appName = \"\" } = options;\n    // Add app name first, it must be sent\n    if (appName.length > 0) {\n        const name = Buffer.byteLength(appName, \"utf8\") <= 128 ? options.appName : Buffer.from(appName, \"utf8\").subarray(0, 128).toString(\"utf8\");\n        metadataDocument.ifItFitsItSits(\"application\", {\n            name\n        });\n    }\n    const { name = \"\", version = \"\", platform = \"\" } = options.driverInfo;\n    const driverInfo = {\n        name: name.length > 0 ? `nodejs|${name}` : \"nodejs\",\n        version: version.length > 0 ? `${NODE_DRIVER_VERSION}|${version}` : NODE_DRIVER_VERSION\n    };\n    if (!metadataDocument.ifItFitsItSits(\"driver\", driverInfo)) {\n        throw new error_1.MongoInvalidArgumentError(\"Unable to include driverInfo name and version, metadata cannot exceed 512 bytes\");\n    }\n    let runtimeInfo = getRuntimeInfo();\n    if (platform.length > 0) {\n        runtimeInfo = `${runtimeInfo}|${platform}`;\n    }\n    if (!metadataDocument.ifItFitsItSits(\"platform\", runtimeInfo)) {\n        throw new error_1.MongoInvalidArgumentError(\"Unable to include driverInfo platform, metadata cannot exceed 512 bytes\");\n    }\n    // Note: order matters, os.type is last so it will be removed last if we're at maxSize\n    const osInfo = new Map().set(\"name\", process.platform).set(\"architecture\", process.arch).set(\"version\", os.release()).set(\"type\", os.type());\n    if (!metadataDocument.ifItFitsItSits(\"os\", osInfo)) {\n        for (const key of osInfo.keys()){\n            osInfo.delete(key);\n            if (osInfo.size === 0) break;\n            if (metadataDocument.ifItFitsItSits(\"os\", osInfo)) break;\n        }\n    }\n    const faasEnv = getFAASEnv();\n    if (faasEnv != null) {\n        if (!metadataDocument.ifItFitsItSits(\"env\", faasEnv)) {\n            for (const key of faasEnv.keys()){\n                faasEnv.delete(key);\n                if (faasEnv.size === 0) break;\n                if (metadataDocument.ifItFitsItSits(\"env\", faasEnv)) break;\n            }\n        }\n    }\n    return metadataDocument.toObject();\n}\nexports.makeClientMetadata = makeClientMetadata;\n/**\n * Collects FaaS metadata.\n * - `name` MUST be the last key in the Map returned.\n */ function getFAASEnv() {\n    const { AWS_EXECUTION_ENV = \"\", AWS_LAMBDA_RUNTIME_API = \"\", FUNCTIONS_WORKER_RUNTIME = \"\", K_SERVICE = \"\", FUNCTION_NAME = \"\", VERCEL = \"\", AWS_LAMBDA_FUNCTION_MEMORY_SIZE = \"\", AWS_REGION = \"\", FUNCTION_MEMORY_MB = \"\", FUNCTION_REGION = \"\", FUNCTION_TIMEOUT_SEC = \"\", VERCEL_REGION = \"\" } = process.env;\n    const isAWSFaaS = AWS_EXECUTION_ENV.startsWith(\"AWS_Lambda_\") || AWS_LAMBDA_RUNTIME_API.length > 0;\n    const isAzureFaaS = FUNCTIONS_WORKER_RUNTIME.length > 0;\n    const isGCPFaaS = K_SERVICE.length > 0 || FUNCTION_NAME.length > 0;\n    const isVercelFaaS = VERCEL.length > 0;\n    // Note: order matters, name must always be the last key\n    const faasEnv = new Map();\n    // When isVercelFaaS is true so is isAWSFaaS; Vercel inherits the AWS env\n    if (isVercelFaaS && !(isAzureFaaS || isGCPFaaS)) {\n        if (VERCEL_REGION.length > 0) {\n            faasEnv.set(\"region\", VERCEL_REGION);\n        }\n        faasEnv.set(\"name\", \"vercel\");\n        return faasEnv;\n    }\n    if (isAWSFaaS && !(isAzureFaaS || isGCPFaaS || isVercelFaaS)) {\n        if (AWS_REGION.length > 0) {\n            faasEnv.set(\"region\", AWS_REGION);\n        }\n        if (AWS_LAMBDA_FUNCTION_MEMORY_SIZE.length > 0 && Number.isInteger(+AWS_LAMBDA_FUNCTION_MEMORY_SIZE)) {\n            faasEnv.set(\"memory_mb\", new bson_1.Int32(AWS_LAMBDA_FUNCTION_MEMORY_SIZE));\n        }\n        faasEnv.set(\"name\", \"aws.lambda\");\n        return faasEnv;\n    }\n    if (isAzureFaaS && !(isGCPFaaS || isAWSFaaS || isVercelFaaS)) {\n        faasEnv.set(\"name\", \"azure.func\");\n        return faasEnv;\n    }\n    if (isGCPFaaS && !(isAzureFaaS || isAWSFaaS || isVercelFaaS)) {\n        if (FUNCTION_REGION.length > 0) {\n            faasEnv.set(\"region\", FUNCTION_REGION);\n        }\n        if (FUNCTION_MEMORY_MB.length > 0 && Number.isInteger(+FUNCTION_MEMORY_MB)) {\n            faasEnv.set(\"memory_mb\", new bson_1.Int32(FUNCTION_MEMORY_MB));\n        }\n        if (FUNCTION_TIMEOUT_SEC.length > 0 && Number.isInteger(+FUNCTION_TIMEOUT_SEC)) {\n            faasEnv.set(\"timeout_sec\", new bson_1.Int32(FUNCTION_TIMEOUT_SEC));\n        }\n        faasEnv.set(\"name\", \"gcp.func\");\n        return faasEnv;\n    }\n    return null;\n}\nexports.getFAASEnv = getFAASEnv;\n/**\n * @internal\n * Get current JavaScript runtime platform\n *\n * NOTE: The version information fetching is intentionally written defensively\n * to avoid having a released driver version that becomes incompatible\n * with a future change to these global objects.\n */ function getRuntimeInfo() {\n    if (\"Deno\" in globalThis) {\n        const version = typeof Deno?.version?.deno === \"string\" ? Deno?.version?.deno : \"0.0.0-unknown\";\n        return `Deno v${version}, ${os.endianness()}`;\n    }\n    if (\"Bun\" in globalThis) {\n        const version = typeof Bun?.version === \"string\" ? Bun?.version : \"0.0.0-unknown\";\n        return `Bun v${version}, ${os.endianness()}`;\n    }\n    return `Node.js ${process.version}, ${os.endianness()}`;\n} //# sourceMappingURL=client_metadata.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9oYW5kc2hha2UvY2xpZW50X21ldGFkYXRhLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBR0EsMEJBQTBCLEdBQUdBLDJCQUEyQixHQUFHLEtBQUs7QUFDckYsTUFBTUssS0FBS0MsbUJBQU9BLENBQUMsY0FBSTtBQUN2QixNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQyx3QkFBUztBQUNqQyxNQUFNRSxTQUFTRixtQkFBT0EsQ0FBQyw0REFBWTtBQUNuQyxNQUFNRyxVQUFVSCxtQkFBT0EsQ0FBQyw4REFBYTtBQUNyQyw4REFBOEQ7QUFDOUQsTUFBTUksc0JBQXNCSix1R0FBd0M7QUFDcEUsY0FBYyxHQUNkLE1BQU1GO0lBQ0ZRLFlBQVlDLE9BQU8sQ0FBRTtRQUNqQixJQUFJLENBQUNBLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLFFBQVEsR0FBRyxJQUFJQztRQUNwQixxQ0FBcUMsR0FDckMsSUFBSSxDQUFDQyxZQUFZLEdBQUc7SUFDeEI7SUFDQSxvRUFBb0UsR0FDcEVDLGVBQWVDLEdBQUcsRUFBRWpCLEtBQUssRUFBRTtRQUN2QiwyRkFBMkY7UUFDM0YsK0RBQStEO1FBQy9ELE1BQU1rQixpQkFBaUJYLE9BQU9ZLElBQUksQ0FBQ0MsU0FBUyxDQUFDLElBQUlOLE1BQU1PLEdBQUcsQ0FBQ0osS0FBS2pCLFFBQVFzQixVQUFVLEdBQUc7UUFDckYsSUFBSUosaUJBQWlCLElBQUksQ0FBQ0gsWUFBWSxHQUFHLElBQUksQ0FBQ0gsT0FBTyxFQUFFO1lBQ25ELE9BQU87UUFDWDtRQUNBLElBQUksQ0FBQ0csWUFBWSxJQUFJRztRQUNyQixJQUFJLENBQUNMLFFBQVEsQ0FBQ1EsR0FBRyxDQUFDSixLQUFLakI7UUFDdkIsT0FBTztJQUNYO0lBQ0F1QixXQUFXO1FBQ1AsT0FBT2hCLE9BQU9ZLElBQUksQ0FB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LFFBQVFJLE9BQU8sQ0FBQyxFQUFFLEVBQUVOLEdBQUd1RSxVQUFVLEdBQUcsQ0FBQztBQUMzRCxFQUNBLDJDQUEyQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2hhbmRzaGFrZS9jbGllbnRfbWV0YWRhdGEuanM/OTNmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0RkFBU0VudiA9IGV4cG9ydHMubWFrZUNsaWVudE1ldGFkYXRhID0gZXhwb3J0cy5MaW1pdGVkU2l6ZURvY3VtZW50ID0gdm9pZCAwO1xuY29uc3Qgb3MgPSByZXF1aXJlKFwib3NcIik7XG5jb25zdCBwcm9jZXNzID0gcmVxdWlyZShcInByb2Nlc3NcIik7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi4vLi4vYnNvblwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vLi4vZXJyb3JcIik7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlc1xuY29uc3QgTk9ERV9EUklWRVJfVkVSU0lPTiA9IHJlcXVpcmUoJy4uLy4uLy4uL3BhY2thZ2UuanNvbicpLnZlcnNpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBMaW1pdGVkU2l6ZURvY3VtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihtYXhTaXplKSB7XG4gICAgICAgIHRoaXMubWF4U2l6ZSA9IG1heFNpemU7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8qKiBCU09OIG92ZXJoZWFkOiBJbnQzMiArIE51bGwgYnl0ZSAqL1xuICAgICAgICB0aGlzLmRvY3VtZW50U2l6ZSA9IDU7XG4gICAgfVxuICAgIC8qKiBPbmx5IGFkZHMga2V5L3ZhbHVlIGlmIHRoZSBic29uQnl0ZUxlbmd0aCBpcyBsZXNzIHRoYW4gTUFYX1NJWkUgKi9cbiAgICBpZkl0Rml0c0l0U2l0cyhrZXksIHZhbHVlKSB7XG4gICAgICAgIC8vIFRoZSBCU09OIGJ5dGVMZW5ndGggb2YgdGhlIG5ldyBlbGVtZW50IGlzIHRoZSBzYW1lIGFzIHNlcmlhbGl6aW5nIGl0IHRvIGl0cyBvd24gZG9jdW1lbnRcbiAgICAgICAgLy8gc3VidHJhY3RpbmcgdGhlIGRvY3VtZW50IHNpemUgaW50MzIgYW5kIHRoZSBudWxsIHRlcm1pbmF0b3IuXG4gICAgICAgIGNvbnN0IG5ld0VsZW1lbnRTaXplID0gYnNvbl8xLkJTT04uc2VyaWFsaXplKG5ldyBNYXAoKS5zZXQoa2V5LCB2YWx1ZSkpLmJ5dGVMZW5ndGggLSA1O1xuICAgICAgICBpZiAobmV3RWxlbWVudFNpemUgKyB0aGlzLmRvY3VtZW50U2l6ZSA+IHRoaXMubWF4U2l6ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZG9jdW1lbnRTaXplICs9IG5ld0VsZW1lbnRTaXplO1xuICAgICAgICB0aGlzLmRvY3VtZW50LnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHRvT2JqZWN0KCkge1xuICAgICAgICByZXR1cm4gYnNvbl8xLkJTT04uZGVzZXJpYWxpemUoYnNvbl8xLkJTT04uc2VyaWFsaXplKHRoaXMuZG9jdW1lbnQpLCB7XG4gICAgICAgICAgICBwcm9tb3RlTG9uZ3M6IGZhbHNlLFxuICAgICAgICAgICAgcHJvbW90ZUJ1ZmZlcnM6IGZhbHNlLFxuICAgICAgICAgICAgcHJvbW90ZVZhbHVlczogZmFsc2UsXG4gICAgICAgICAgICB1c2VCaWdJbnQ2NDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5MaW1pdGVkU2l6ZURvY3VtZW50ID0gTGltaXRlZFNpemVEb2N1bWVudDtcbi8qKlxuICogRnJvbSB0aGUgc3BlY3M6XG4gKiBJbXBsZW1lbnRvcnMgU0hPVUxEIGN1bXVsYXRpdmVseSB1cGRhdGUgZmllbGRzIGluIHRoZSBmb2xsb3dpbmcgb3JkZXIgdW50aWwgdGhlIGRvY3VtZW50IGlzIHVuZGVyIHRoZSBzaXplIGxpbWl0OlxuICogMS4gT21pdCBmaWVsZHMgZnJvbSBgZW52YCBleGNlcHQgYGVudi5uYW1lYC5cbiAqIDIuIE9taXQgZmllbGRzIGZyb20gYG9zYCBleGNlcHQgYG9zLnR5cGVgLlxuICogMy4gT21pdCB0aGUgYGVudmAgZG9jdW1lbnQgZW50aXJlbHkuXG4gKiA0LiBUcnVuY2F0ZSBgcGxhdGZvcm1gLiAtLSBzcGVjaWFsIHdlIGRvIG5vdCB0cnVuY2F0ZSB0aGlzIGZpZWxkXG4gKi9cbmZ1bmN0aW9uIG1ha2VDbGllbnRNZXRhZGF0YShvcHRpb25zKSB7XG4gICAgY29uc3QgbWV0YWRhdGFEb2N1bWVudCA9IG5ldyBMaW1pdGVkU2l6ZURvY3VtZW50KDUxMik7XG4gICAgY29uc3QgeyBhcHBOYW1lID0gJycgfSA9IG9wdGlvbnM7XG4gICAgLy8gQWRkIGFwcCBuYW1lIGZpcnN0LCBpdCBtdXN0IGJlIHNlbnRcbiAgICBpZiAoYXBwTmFtZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBCdWZmZXIuYnl0ZUxlbmd0aChhcHBOYW1lLCAndXRmOCcpIDw9IDEyOFxuICAgICAgICAgICAgPyBvcHRpb25zLmFwcE5hbWVcbiAgICAgICAgICAgIDogQnVmZmVyLmZyb20oYXBwTmFtZSwgJ3V0ZjgnKS5zdWJhcnJheSgwLCAxMjgpLnRvU3RyaW5nKCd1dGY4Jyk7XG4gICAgICAgIG1ldGFkYXRhRG9jdW1lbnQuaWZJdEZpdHNJdFNpdHMoJ2FwcGxpY2F0aW9uJywgeyBuYW1lIH0pO1xuICAgIH1cbiAgICBjb25zdCB7IG5hbWUgPSAnJywgdmVyc2lvbiA9ICcnLCBwbGF0Zm9ybSA9ICcnIH0gPSBvcHRpb25zLmRyaXZlckluZm87XG4gICAgY29uc3QgZHJpdmVySW5mbyA9IHtcbiAgICAgICAgbmFtZTogbmFtZS5sZW5ndGggPiAwID8gYG5vZGVqc3wke25hbWV9YCA6ICdub2RlanMnLFxuICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uLmxlbmd0aCA+IDAgPyBgJHtOT0RFX0RSSVZFUl9WRVJTSU9OfXwke3ZlcnNpb259YCA6IE5PREVfRFJJVkVSX1ZFUlNJT05cbiAgICB9O1xuICAgIGlmICghbWV0YWRhdGFEb2N1bWVudC5pZkl0Rml0c0l0U2l0cygnZHJpdmVyJywgZHJpdmVySW5mbykpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignVW5hYmxlIHRvIGluY2x1ZGUgZHJpdmVySW5mbyBuYW1lIGFuZCB2ZXJzaW9uLCBtZXRhZGF0YSBjYW5ub3QgZXhjZWVkIDUxMiBieXRlcycpO1xuICAgIH1cbiAgICBsZXQgcnVudGltZUluZm8gPSBnZXRSdW50aW1lSW5mbygpO1xuICAgIGlmIChwbGF0Zm9ybS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJ1bnRpbWVJbmZvID0gYCR7cnVudGltZUluZm99fCR7cGxhdGZvcm19YDtcbiAgICB9XG4gICAgaWYgKCFtZXRhZGF0YURvY3VtZW50LmlmSXRGaXRzSXRTaXRzKCdwbGF0Zm9ybScsIHJ1bnRpbWVJbmZvKSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdVbmFibGUgdG8gaW5jbHVkZSBkcml2ZXJJbmZvIHBsYXRmb3JtLCBtZXRhZGF0YSBjYW5ub3QgZXhjZWVkIDUxMiBieXRlcycpO1xuICAgIH1cbiAgICAvLyBOb3RlOiBvcmRlciBtYXR0ZXJzLCBvcy50eXBlIGlzIGxhc3Qgc28gaXQgd2lsbCBiZSByZW1vdmVkIGxhc3QgaWYgd2UncmUgYXQgbWF4U2l6ZVxuICAgIGNvbnN0IG9zSW5mbyA9IG5ldyBNYXAoKVxuICAgICAgICAuc2V0KCduYW1lJywgcHJvY2Vzcy5wbGF0Zm9ybSlcbiAgICAgICAgLnNldCgnYXJjaGl0ZWN0dXJlJywgcHJvY2Vzcy5hcmNoKVxuICAgICAgICAuc2V0KCd2ZXJzaW9uJywgb3MucmVsZWFzZSgpKVxuICAgICAgICAuc2V0KCd0eXBlJywgb3MudHlwZSgpKTtcbiAgICBpZiAoIW1ldGFkYXRhRG9jdW1lbnQuaWZJdEZpdHNJdFNpdHMoJ29zJywgb3NJbmZvKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBvc0luZm8ua2V5cygpKSB7XG4gICAgICAgICAgICBvc0luZm8uZGVsZXRlKGtleSk7XG4gICAgICAgICAgICBpZiAob3NJbmZvLnNpemUgPT09IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBpZiAobWV0YWRhdGFEb2N1bWVudC5pZkl0Rml0c0l0U2l0cygnb3MnLCBvc0luZm8pKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGZhYXNFbnYgPSBnZXRGQUFTRW52KCk7XG4gICAgaWYgKGZhYXNFbnYgIT0gbnVsbCkge1xuICAgICAgICBpZiAoIW1ldGFkYXRhRG9jdW1lbnQuaWZJdEZpdHNJdFNpdHMoJ2VudicsIGZhYXNFbnYpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBmYWFzRW52LmtleXMoKSkge1xuICAgICAgICAgICAgICAgIGZhYXNFbnYuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKGZhYXNFbnYuc2l6ZSA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhRG9jdW1lbnQuaWZJdEZpdHNJdFNpdHMoJ2VudicsIGZhYXNFbnYpKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWV0YWRhdGFEb2N1bWVudC50b09iamVjdCgpO1xufVxuZXhwb3J0cy5tYWtlQ2xpZW50TWV0YWRhdGEgPSBtYWtlQ2xpZW50TWV0YWRhdGE7XG4vKipcbiAqIENvbGxlY3RzIEZhYVMgbWV0YWRhdGEuXG4gKiAtIGBuYW1lYCBNVVNUIGJlIHRoZSBsYXN0IGtleSBpbiB0aGUgTWFwIHJldHVybmVkLlxuICovXG5mdW5jdGlvbiBnZXRGQUFTRW52KCkge1xuICAgIGNvbnN0IHsgQVdTX0VYRUNVVElPTl9FTlYgPSAnJywgQVdTX0xBTUJEQV9SVU5USU1FX0FQSSA9ICcnLCBGVU5DVElPTlNfV09SS0VSX1JVTlRJTUUgPSAnJywgS19TRVJWSUNFID0gJycsIEZVTkNUSU9OX05BTUUgPSAnJywgVkVSQ0VMID0gJycsIEFXU19MQU1CREFfRlVOQ1RJT05fTUVNT1JZX1NJWkUgPSAnJywgQVdTX1JFR0lPTiA9ICcnLCBGVU5DVElPTl9NRU1PUllfTUIgPSAnJywgRlVOQ1RJT05fUkVHSU9OID0gJycsIEZVTkNUSU9OX1RJTUVPVVRfU0VDID0gJycsIFZFUkNFTF9SRUdJT04gPSAnJyB9ID0gcHJvY2Vzcy5lbnY7XG4gICAgY29uc3QgaXNBV1NGYWFTID0gQVdTX0VYRUNVVElPTl9FTlYuc3RhcnRzV2l0aCgnQVdTX0xhbWJkYV8nKSB8fCBBV1NfTEFNQkRBX1JVTlRJTUVfQVBJLmxlbmd0aCA+IDA7XG4gICAgY29uc3QgaXNBenVyZUZhYVMgPSBGVU5DVElPTlNfV09SS0VSX1JVTlRJTUUubGVuZ3RoID4gMDtcbiAgICBjb25zdCBpc0dDUEZhYVMgPSBLX1NFUlZJQ0UubGVuZ3RoID4gMCB8fCBGVU5DVElPTl9OQU1FLmxlbmd0aCA+IDA7XG4gICAgY29uc3QgaXNWZXJjZWxGYWFTID0gVkVSQ0VMLmxlbmd0aCA+IDA7XG4gICAgLy8gTm90ZTogb3JkZXIgbWF0dGVycywgbmFtZSBtdXN0IGFsd2F5cyBiZSB0aGUgbGFzdCBrZXlcbiAgICBjb25zdCBmYWFzRW52ID0gbmV3IE1hcCgpO1xuICAgIC8vIFdoZW4gaXNWZXJjZWxGYWFTIGlzIHRydWUgc28gaXMgaXNBV1NGYWFTOyBWZXJjZWwgaW5oZXJpdHMgdGhlIEFXUyBlbnZcbiAgICBpZiAoaXNWZXJjZWxGYWFTICYmICEoaXNBenVyZUZhYVMgfHwgaXNHQ1BGYWFTKSkge1xuICAgICAgICBpZiAoVkVSQ0VMX1JFR0lPTi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmYWFzRW52LnNldCgncmVnaW9uJywgVkVSQ0VMX1JFR0lPTik7XG4gICAgICAgIH1cbiAgICAgICAgZmFhc0Vudi5zZXQoJ25hbWUnLCAndmVyY2VsJyk7XG4gICAgICAgIHJldHVybiBmYWFzRW52O1xuICAgIH1cbiAgICBpZiAoaXNBV1NGYWFTICYmICEoaXNBenVyZUZhYVMgfHwgaXNHQ1BGYWFTIHx8IGlzVmVyY2VsRmFhUykpIHtcbiAgICAgICAgaWYgKEFXU19SRUdJT04ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZmFhc0Vudi5zZXQoJ3JlZ2lvbicsIEFXU19SRUdJT04pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBV1NfTEFNQkRBX0ZVTkNUSU9OX01FTU9SWV9TSVpFLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgIE51bWJlci5pc0ludGVnZXIoK0FXU19MQU1CREFfRlVOQ1RJT05fTUVNT1JZX1NJWkUpKSB7XG4gICAgICAgICAgICBmYWFzRW52LnNldCgnbWVtb3J5X21iJywgbmV3IGJzb25fMS5JbnQzMihBV1NfTEFNQkRBX0ZVTkNUSU9OX01FTU9SWV9TSVpFKSk7XG4gICAgICAgIH1cbiAgICAgICAgZmFhc0Vudi5zZXQoJ25hbWUnLCAnYXdzLmxhbWJkYScpO1xuICAgICAgICByZXR1cm4gZmFhc0VudjtcbiAgICB9XG4gICAgaWYgKGlzQXp1cmVGYWFTICYmICEoaXNHQ1BGYWFTIHx8IGlzQVdTRmFhUyB8fCBpc1ZlcmNlbEZhYVMpKSB7XG4gICAgICAgIGZhYXNFbnYuc2V0KCduYW1lJywgJ2F6dXJlLmZ1bmMnKTtcbiAgICAgICAgcmV0dXJuIGZhYXNFbnY7XG4gICAgfVxuICAgIGlmIChpc0dDUEZhYVMgJiYgIShpc0F6dXJlRmFhUyB8fCBpc0FXU0ZhYVMgfHwgaXNWZXJjZWxGYWFTKSkge1xuICAgICAgICBpZiAoRlVOQ1RJT05fUkVHSU9OLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZhYXNFbnYuc2V0KCdyZWdpb24nLCBGVU5DVElPTl9SRUdJT04pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChGVU5DVElPTl9NRU1PUllfTUIubGVuZ3RoID4gMCAmJiBOdW1iZXIuaXNJbnRlZ2VyKCtGVU5DVElPTl9NRU1PUllfTUIpKSB7XG4gICAgICAgICAgICBmYWFzRW52LnNldCgnbWVtb3J5X21iJywgbmV3IGJzb25fMS5JbnQzMihGVU5DVElPTl9NRU1PUllfTUIpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoRlVOQ1RJT05fVElNRU9VVF9TRUMubGVuZ3RoID4gMCAmJiBOdW1iZXIuaXNJbnRlZ2VyKCtGVU5DVElPTl9USU1FT1VUX1NFQykpIHtcbiAgICAgICAgICAgIGZhYXNFbnYuc2V0KCd0aW1lb3V0X3NlYycsIG5ldyBic29uXzEuSW50MzIoRlVOQ1RJT05fVElNRU9VVF9TRUMpKTtcbiAgICAgICAgfVxuICAgICAgICBmYWFzRW52LnNldCgnbmFtZScsICdnY3AuZnVuYycpO1xuICAgICAgICByZXR1cm4gZmFhc0VudjtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5leHBvcnRzLmdldEZBQVNFbnYgPSBnZXRGQUFTRW52O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIEdldCBjdXJyZW50IEphdmFTY3JpcHQgcnVudGltZSBwbGF0Zm9ybVxuICpcbiAqIE5PVEU6IFRoZSB2ZXJzaW9uIGluZm9ybWF0aW9uIGZldGNoaW5nIGlzIGludGVudGlvbmFsbHkgd3JpdHRlbiBkZWZlbnNpdmVseVxuICogdG8gYXZvaWQgaGF2aW5nIGEgcmVsZWFzZWQgZHJpdmVyIHZlcnNpb24gdGhhdCBiZWNvbWVzIGluY29tcGF0aWJsZVxuICogd2l0aCBhIGZ1dHVyZSBjaGFuZ2UgdG8gdGhlc2UgZ2xvYmFsIG9iamVjdHMuXG4gKi9cbmZ1bmN0aW9uIGdldFJ1bnRpbWVJbmZvKCkge1xuICAgIGlmICgnRGVubycgaW4gZ2xvYmFsVGhpcykge1xuICAgICAgICBjb25zdCB2ZXJzaW9uID0gdHlwZW9mIERlbm8/LnZlcnNpb24/LmRlbm8gPT09ICdzdHJpbmcnID8gRGVubz8udmVyc2lvbj8uZGVubyA6ICcwLjAuMC11bmtub3duJztcbiAgICAgICAgcmV0dXJuIGBEZW5vIHYke3ZlcnNpb259LCAke29zLmVuZGlhbm5lc3MoKX1gO1xuICAgIH1cbiAgICBpZiAoJ0J1bicgaW4gZ2xvYmFsVGhpcykge1xuICAgICAgICBjb25zdCB2ZXJzaW9uID0gdHlwZW9mIEJ1bj8udmVyc2lvbiA9PT0gJ3N0cmluZycgPyBCdW4/LnZlcnNpb24gOiAnMC4wLjAtdW5rbm93bic7XG4gICAgICAgIHJldHVybiBgQnVuIHYke3ZlcnNpb259LCAke29zLmVuZGlhbm5lc3MoKX1gO1xuICAgIH1cbiAgICByZXR1cm4gYE5vZGUuanMgJHtwcm9jZXNzLnZlcnNpb259LCAke29zLmVuZGlhbm5lc3MoKX1gO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50X21ldGFkYXRhLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImdldEZBQVNFbnYiLCJtYWtlQ2xpZW50TWV0YWRhdGEiLCJMaW1pdGVkU2l6ZURvY3VtZW50Iiwib3MiLCJyZXF1aXJlIiwicHJvY2VzcyIsImJzb25fMSIsImVycm9yXzEiLCJOT0RFX0RSSVZFUl9WRVJTSU9OIiwidmVyc2lvbiIsImNvbnN0cnVjdG9yIiwibWF4U2l6ZSIsImRvY3VtZW50IiwiTWFwIiwiZG9jdW1lbnRTaXplIiwiaWZJdEZpdHNJdFNpdHMiLCJrZXkiLCJuZXdFbGVtZW50U2l6ZSIsIkJTT04iLCJzZXJpYWxpemUiLCJzZXQiLCJieXRlTGVuZ3RoIiwidG9PYmplY3QiLCJkZXNlcmlhbGl6ZSIsInByb21vdGVMb25ncyIsInByb21vdGVCdWZmZXJzIiwicHJvbW90ZVZhbHVlcyIsInVzZUJpZ0ludDY0Iiwib3B0aW9ucyIsIm1ldGFkYXRhRG9jdW1lbnQiLCJhcHBOYW1lIiwibGVuZ3RoIiwibmFtZSIsIkJ1ZmZlciIsImZyb20iLCJzdWJhcnJheSIsInRvU3RyaW5nIiwicGxhdGZvcm0iLCJkcml2ZXJJbmZvIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsInJ1bnRpbWVJbmZvIiwiZ2V0UnVudGltZUluZm8iLCJvc0luZm8iLCJhcmNoIiwicmVsZWFzZSIsInR5cGUiLCJrZXlzIiwiZGVsZXRlIiwic2l6ZSIsImZhYXNFbnYiLCJBV1NfRVhFQ1VUSU9OX0VOViIsIkFXU19MQU1CREFfUlVOVElNRV9BUEkiLCJGVU5DVElPTlNfV09SS0VSX1JVTlRJTUUiLCJLX1NFUlZJQ0UiLCJGVU5DVElPTl9OQU1FIiwiVkVSQ0VMIiwiQVdTX0xBTUJEQV9GVU5DVElPTl9NRU1PUllfU0laRSIsIkFXU19SRUdJT04iLCJGVU5DVElPTl9NRU1PUllfTUIiLCJGVU5DVElPTl9SRUdJT04iLCJGVU5DVElPTl9USU1FT1VUX1NFQyIsIlZFUkNFTF9SRUdJT04iLCJlbnYiLCJpc0FXU0ZhYVMiLCJzdGFydHNXaXRoIiwiaXNBenVyZUZhYVMiLCJpc0dDUEZhYVMiLCJpc1ZlcmNlbEZhYVMiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJJbnQzMiIsImdsb2JhbFRoaXMiLCJEZW5vIiwiZGVubyIsImVuZGlhbm5lc3MiLCJCdW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/handshake/client_metadata.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/message_stream.js":
/*!*********************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/message_stream.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MessageStream = void 0;\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst commands_1 = __webpack_require__(/*! ./commands */ \"(ssr)/./node_modules/mongodb/lib/cmap/commands.js\");\nconst compression_1 = __webpack_require__(/*! ./wire_protocol/compression */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/compression.js\");\nconst constants_1 = __webpack_require__(/*! ./wire_protocol/constants */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js\");\nconst MESSAGE_HEADER_SIZE = 16;\nconst COMPRESSION_DETAILS_SIZE = 9; // originalOpcode + uncompressedSize, compressorID\nconst kDefaultMaxBsonMessageSize = 1024 * 1024 * 16 * 4;\n/** @internal */ const kBuffer = Symbol(\"buffer\");\n/**\n * A duplex stream that is capable of reading and writing raw wire protocol messages, with\n * support for optional compression\n * @internal\n */ class MessageStream extends stream_1.Duplex {\n    constructor(options = {}){\n        super(options);\n        /** @internal */ this.isMonitoringConnection = false;\n        this.maxBsonMessageSize = options.maxBsonMessageSize || kDefaultMaxBsonMessageSize;\n        this[kBuffer] = new utils_1.BufferPool();\n    }\n    get buffer() {\n        return this[kBuffer];\n    }\n    _write(chunk, _, callback) {\n        this[kBuffer].append(chunk);\n        processIncomingData(this, callback);\n    }\n    _read() {\n        // NOTE: This implementation is empty because we explicitly push data to be read\n        //       when `writeMessage` is called.\n        return;\n    }\n    writeCommand(command, operationDescription) {\n        const agreedCompressor = operationDescription.agreedCompressor ?? \"none\";\n        if (agreedCompressor === \"none\" || !canCompress(command)) {\n            const data = command.toBin();\n            this.push(Array.isArray(data) ? Buffer.concat(data) : data);\n            return;\n        }\n        // otherwise, compress the message\n        const concatenatedOriginalCommandBuffer = Buffer.concat(command.toBin());\n        const messageToBeCompressed = concatenatedOriginalCommandBuffer.slice(MESSAGE_HEADER_SIZE);\n        // Extract information needed for OP_COMPRESSED from the uncompressed message\n        const originalCommandOpCode = concatenatedOriginalCommandBuffer.readInt32LE(12);\n        const options = {\n            agreedCompressor,\n            zlibCompressionLevel: operationDescription.zlibCompressionLevel ?? 0\n        };\n        // Compress the message body\n        (0, compression_1.compress)(options, messageToBeCompressed).then((compressedMessage)=>{\n            // Create the msgHeader of OP_COMPRESSED\n            const msgHeader = Buffer.alloc(MESSAGE_HEADER_SIZE);\n            msgHeader.writeInt32LE(MESSAGE_HEADER_SIZE + COMPRESSION_DETAILS_SIZE + compressedMessage.length, 0); // messageLength\n            msgHeader.writeInt32LE(command.requestId, 4); // requestID\n            msgHeader.writeInt32LE(0, 8); // responseTo (zero)\n            msgHeader.writeInt32LE(constants_1.OP_COMPRESSED, 12); // opCode\n            // Create the compression details of OP_COMPRESSED\n            const compressionDetails = Buffer.alloc(COMPRESSION_DETAILS_SIZE);\n            compressionDetails.writeInt32LE(originalCommandOpCode, 0); // originalOpcode\n            compressionDetails.writeInt32LE(messageToBeCompressed.length, 4); // Size of the uncompressed compressedMessage, excluding the MsgHeader\n            compressionDetails.writeUInt8(compression_1.Compressor[agreedCompressor], 8); // compressorID\n            this.push(Buffer.concat([\n                msgHeader,\n                compressionDetails,\n                compressedMessage\n            ]));\n        }, (error)=>{\n            operationDescription.cb(error);\n        });\n    }\n}\nexports.MessageStream = MessageStream;\n// Return whether a command contains an uncompressible command term\n// Will return true if command contains no uncompressible command terms\nfunction canCompress(command) {\n    const commandDoc = command instanceof commands_1.Msg ? command.command : command.query;\n    const commandName = Object.keys(commandDoc)[0];\n    return !compression_1.uncompressibleCommands.has(commandName);\n}\nfunction processIncomingData(stream, callback) {\n    const buffer = stream[kBuffer];\n    const sizeOfMessage = buffer.getInt32();\n    if (sizeOfMessage == null) {\n        return callback();\n    }\n    if (sizeOfMessage < 0) {\n        return callback(new error_1.MongoParseError(`Invalid message size: ${sizeOfMessage}`));\n    }\n    if (sizeOfMessage > stream.maxBsonMessageSize) {\n        return callback(new error_1.MongoParseError(`Invalid message size: ${sizeOfMessage}, max allowed: ${stream.maxBsonMessageSize}`));\n    }\n    if (sizeOfMessage > buffer.length) {\n        return callback();\n    }\n    const message = buffer.read(sizeOfMessage);\n    const messageHeader = {\n        length: message.readInt32LE(0),\n        requestId: message.readInt32LE(4),\n        responseTo: message.readInt32LE(8),\n        opCode: message.readInt32LE(12)\n    };\n    const monitorHasAnotherHello = ()=>{\n        if (stream.isMonitoringConnection) {\n            // Can we read the next message size?\n            const sizeOfMessage = buffer.getInt32();\n            if (sizeOfMessage != null && sizeOfMessage <= buffer.length) {\n                return true;\n            }\n        }\n        return false;\n    };\n    let ResponseType = messageHeader.opCode === constants_1.OP_MSG ? commands_1.BinMsg : commands_1.Response;\n    if (messageHeader.opCode !== constants_1.OP_COMPRESSED) {\n        const messageBody = message.subarray(MESSAGE_HEADER_SIZE);\n        // If we are a monitoring connection message stream and\n        // there is more in the buffer that can be read, skip processing since we\n        // want the last hello command response that is in the buffer.\n        if (monitorHasAnotherHello()) {\n            return processIncomingData(stream, callback);\n        }\n        stream.emit(\"message\", new ResponseType(message, messageHeader, messageBody));\n        if (buffer.length >= 4) {\n            return processIncomingData(stream, callback);\n        }\n        return callback();\n    }\n    messageHeader.fromCompressed = true;\n    messageHeader.opCode = message.readInt32LE(MESSAGE_HEADER_SIZE);\n    messageHeader.length = message.readInt32LE(MESSAGE_HEADER_SIZE + 4);\n    const compressorID = message[MESSAGE_HEADER_SIZE + 8];\n    const compressedBuffer = message.slice(MESSAGE_HEADER_SIZE + 9);\n    // recalculate based on wrapped opcode\n    ResponseType = messageHeader.opCode === constants_1.OP_MSG ? commands_1.BinMsg : commands_1.Response;\n    (0, compression_1.decompress)(compressorID, compressedBuffer).then((messageBody)=>{\n        if (messageBody.length !== messageHeader.length) {\n            return callback(new error_1.MongoDecompressionError(\"Message body and message header must be the same length\"));\n        }\n        // If we are a monitoring connection message stream and\n        // there is more in the buffer that can be read, skip processing since we\n        // want the last hello command response that is in the buffer.\n        if (monitorHasAnotherHello()) {\n            return processIncomingData(stream, callback);\n        }\n        stream.emit(\"message\", new ResponseType(message, messageHeader, messageBody));\n        if (buffer.length >= 4) {\n            return processIncomingData(stream, callback);\n        }\n        return callback();\n    }, (error)=>{\n        return callback(error);\n    });\n} //# sourceMappingURL=message_stream.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9tZXNzYWdlX3N0cmVhbS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQscUJBQXFCLEdBQUcsS0FBSztBQUM3QixNQUFNRyxXQUFXQyxtQkFBT0EsQ0FBQyxzQkFBUTtBQUNqQyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRyxhQUFhSCxtQkFBT0EsQ0FBQyxxRUFBWTtBQUN2QyxNQUFNSSxnQkFBZ0JKLG1CQUFPQSxDQUFDLHVHQUE2QjtBQUMzRCxNQUFNSyxjQUFjTCxtQkFBT0EsQ0FBQyxtR0FBMkI7QUFDdkQsTUFBTU0sc0JBQXNCO0FBQzVCLE1BQU1DLDJCQUEyQixHQUFHLGtEQUFrRDtBQUN0RixNQUFNQyw2QkFBNkIsT0FBTyxPQUFPLEtBQUs7QUFDdEQsY0FBYyxHQUNkLE1BQU1DLFVBQVVDLE9BQU87QUFDdkI7Ozs7Q0FJQyxHQUNELE1BQU1aLHNCQUFzQkMsU0FBU1ksTUFBTTtJQUN2Q0MsWUFBWUMsVUFBVSxDQUFDLENBQUMsQ0FBRTtRQUN0QixLQUFLLENBQUNBO1FBQ04sY0FBYyxHQUNkLElBQUksQ0FBQ0Msc0JBQXNCLEdBQUc7UUFDOUIsSUFBSSxDQUFDQyxrQkFBa0IsR0FBR0YsUUFBUUUsa0JBQWtCLElBQUlQO1FBQ3hELElBQUksQ0FBQ0MsUUFBUSxHQUFHLElBQUlQLFFBQVFjLFVBQVU7SUFDMUM7SUFDQSxJQUFJQyxTQUFTO1FBQ1QsT0FBTyxJQUFJLENBQUNSLFFBQVE7SUFDeEI7SUFDQVMsT0FBT0MsS0FBSyxFQUFFQyxDQUFDLEVBQUVDLFFBQVEsRUFBRTtRQUN2QixJQUFJLENBQUNaLFFBQVEsQ0FBQ2EsTUFBTSxDQUFDSDtRQUNyQkksb0JBQW9CLElBQUksRUFBRUY7SUFDOUI7SUFDQUcsUUFBbUI7UUFDZixnRkFBZ0Y7UUFDaEYsdUNBQXVDO1FBQ3ZDO0lBQ0o7SUFDQUMsYUFBYUMsT0FBTyxFQUFFQyxvQkFBb0IsRUFBRTtRQUN4QyxNQUFNQyxtQkFBbUJELHFCQUFxQkMsZ0JBQWdCLElBQUk7UUFDbEUsSUFBSUEscUJBQXFCLFVBQVUsQ0FBQ0MsWUFBWUgsVUFBVTtZQUN0RCxNQUFNSSxPQUFPSixRQUFRSyxLQUFLO1lBQzFCLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxNQUFNQyxPQUFPLENBQUNKLFFBQVFLLE9BQU9DLE1BQU0sQ0FBQ04sUUFBUUE7WUFDdEQ7UUFDSjtRQUNBLGtDQUFrQztRQUNsQyxNQUFNTyxvQ0FBb0NGLE9BQU9DLE1BQU0sQ0FBQ1YsUUFBUUssS0FBSztRQUNyRSxNQUFNTyx3QkFBd0JELGtDQUFrQ0UsS0FBSyxDQUFDakM7UUFDdEUsNkVBQTZFO1FBQzdFLE1BQU1rQyx3QkFBd0JILGtDQUFrQ0ksV0FBVyxDQUFDO1FBQzVFLE1BQU01QixVQUFVO1lBQ1plO1lBQ0FjLHNCQUFzQmYscUJBQXFCZSxvQkFBb0IsSUFBSTtRQUN2RTtRQUNBLDRCQUE0QjtRQUMzQixJQUFHdEMsY0FBY3VDLFFBQVEsRUFBRTlCLFNBQVN5Qix1QkFBdUJNLElBQUksQ0FBQ0MsQ0FBQUE7WUFDN0Qsd0NBQXdDO1lBQ3hDLE1BQU1DLFlBQVlYLE9BQU9ZLEtBQUssQ0FBQ3pDO1lBQy9Cd0MsVUFBVUUsWUFBWSxDQUFDMUMsc0JBQXNCQywyQkFBMkJzQyxrQkFBa0JJLE1BQU0sRUFBRSxJQUFJLGdCQUFnQjtZQUN0SEgsVUFBVUUsWUFBWSxDQUFDdEIsUUFBUXdCLFNBQVMsRUFBRSxJQUFJLFlBQVk7WUFDMURKLFVBQVVFLFlBQVksQ0FBQyxHQUFHLElBQUksb0JBQW9CO1lBQ2xERixVQUFVRSxZQUFZLENBQUMzQyxZQUFZOEMsYUFBYSxFQUFFLEtBQUssU0FBUztZQUNoRSxrREFBa0Q7WUFDbEQsTUFBTUMscUJBQXFCakIsT0FBT1ksS0FBSyxDQUFDeEM7WUFDeEM2QyxtQkFBbUJKLFlBQVksQ0FBQ1IsdUJBQXVCLElBQUksaUJBQWlCO1lBQzVFWSxtQkFBbUJKLFlBQVksQ0FBQ1Ysc0JBQXNCVyxNQUFNLEVBQUUsSUFBSSxzRUFBc0U7WUFDeElHLG1CQUFtQkMsVUFBVSxDQUFDakQsY0FBY2tELFVBQVUsQ0FBQzFCLGlCQUFpQixFQUFFLElBQUksZUFBZTtZQUM3RixJQUFJLENBQUNJLElBQUksQ0FBQ0csT0FBT0MsTUFBTSxDQUFDO2dCQUFDVTtnQkFBV007Z0JBQW9CUDthQUFrQjtRQUM5RSxHQUFHVSxDQUFBQTtZQUNDNUIscUJBQXFCNkIsRUFBRSxDQUFDRDtRQUM1QjtJQUNKO0FBQ0o7QUFDQTNELHFCQUFxQixHQUFHRTtBQUN4QixtRUFBbUU7QUFDbkUsdUVBQXVFO0FBQ3ZFLFNBQVMrQixZQUFZSCxPQUFPO0lBQ3hCLE1BQU0rQixhQUFhL0IsbUJBQW1CdkIsV0FBV3VELEdBQUcsR0FBR2hDLFFBQVFBLE9BQU8sR0FBR0EsUUFBUWlDLEtBQUs7SUFDdEYsTUFBTUMsY0FBY2xFLE9BQU9tRSxJQUFJLENBQUNKLFdBQVcsQ0FBQyxFQUFFO0lBQzlDLE9BQU8sQ0FBQ3JELGNBQWMwRCxzQkFBc0IsQ0FBQ0MsR0FBRyxDQUFDSDtBQUNyRDtBQUNBLFNBQVNyQyxvQkFBb0J5QyxNQUFNLEVBQUUzQyxRQUFRO0lBQ3pDLE1BQU1KLFNBQVMrQyxNQUFNLENBQUN2RCxRQUFRO0lBQzlCLE1BQU13RCxnQkFBZ0JoRCxPQUFPaUQsUUFBUTtJQUNyQyxJQUFJRCxpQkFBaUIsTUFBTTtRQUN2QixPQUFPNUM7SUFDWDtJQUNBLElBQUk0QyxnQkFBZ0IsR0FBRztRQUNuQixPQUFPNUMsU0FBUyxJQUFJcEIsUUFBUWtFLGVBQWUsQ0FBQyxDQUFDLHNCQUFzQixFQUFFRixjQUFjLENBQUM7SUFDeEY7SUFDQSxJQUFJQSxnQkFBZ0JELE9BQU9qRCxrQkFBa0IsRUFBRTtRQUMzQyxPQUFPTSxTQUFTLElBQUlwQixRQUFRa0UsZUFBZSxDQUFDLENBQUMsc0JBQXNCLEVBQUVGLGNBQWMsZUFBZSxFQUFFRCxPQUFPakQsa0JBQWtCLENBQUMsQ0FBQztJQUNuSTtJQUNBLElBQUlrRCxnQkFBZ0JoRCxPQUFPZ0MsTUFBTSxFQUFFO1FBQy9CLE9BQU81QjtJQUNYO0lBQ0EsTUFBTStDLFVBQVVuRCxPQUFPb0QsSUFBSSxDQUFDSjtJQUM1QixNQUFNSyxnQkFBZ0I7UUFDbEJyQixRQUFRbUIsUUFBUTNCLFdBQVcsQ0FBQztRQUM1QlMsV0FBV2tCLFFBQVEzQixXQUFXLENBQUM7UUFDL0I4QixZQUFZSCxRQUFRM0IsV0FBVyxDQUFDO1FBQ2hDK0IsUUFBUUosUUFBUTNCLFdBQVcsQ0FBQztJQUNoQztJQUNBLE1BQU1nQyx5QkFBeUI7UUFDM0IsSUFBSVQsT0FBT2xELHNCQUFzQixFQUFFO1lBQy9CLHFDQUFxQztZQUNyQyxNQUFNbUQsZ0JBQWdCaEQsT0FBT2lELFFBQVE7WUFDckMsSUFBSUQsaUJBQWlCLFFBQVFBLGlCQUFpQmhELE9BQU9nQyxNQUFNLEVBQUU7Z0JBQ3pELE9BQU87WUFDWDtRQUNKO1FBQ0EsT0FBTztJQUNYO0lBQ0EsSUFBSXlCLGVBQWVKLGNBQWNFLE1BQU0sS0FBS25FLFlBQVlzRSxNQUFNLEdBQUd4RSxXQUFXeUUsTUFBTSxHQUFHekUsV0FBVzBFLFFBQVE7SUFDeEcsSUFBSVAsY0FBY0UsTUFBTSxLQUFLbkUsWUFBWThDLGFBQWEsRUFBRTtRQUNwRCxNQUFNMkIsY0FBY1YsUUFBUVcsUUFBUSxDQUFDekU7UUFDckMsdURBQXVEO1FBQ3ZELHlFQUF5RTtRQUN6RSw4REFBOEQ7UUFDOUQsSUFBSW1FLDBCQUEwQjtZQUMxQixPQUFPbEQsb0JBQW9CeUMsUUFBUTNDO1FBQ3ZDO1FBQ0EyQyxPQUFPZ0IsSUFBSSxDQUFDLFdBQVcsSUFBSU4sYUFBYU4sU0FBU0UsZUFBZVE7UUFDaEUsSUFBSTdELE9BQU9nQyxNQUFNLElBQUksR0FBRztZQUNwQixPQUFPMUIsb0JBQW9CeUMsUUFBUTNDO1FBQ3ZDO1FBQ0EsT0FBT0E7SUFDWDtJQUNBaUQsY0FBY1csY0FBYyxHQUFHO0lBQy9CWCxjQUFjRSxNQUFNLEdBQUdKLFFBQVEzQixXQUFXLENBQUNuQztJQUMzQ2dFLGNBQWNyQixNQUFNLEdBQUdtQixRQUFRM0IsV0FBVyxDQUFDbkMsc0JBQXNCO0lBQ2pFLE1BQU00RSxlQUFlZCxPQUFPLENBQUM5RCxzQkFBc0IsRUFBRTtJQUNyRCxNQUFNNkUsbUJBQW1CZixRQUFRN0IsS0FBSyxDQUFDakMsc0JBQXNCO0lBQzdELHNDQUFzQztJQUN0Q29FLGVBQWVKLGNBQWNFLE1BQU0sS0FBS25FLFlBQVlzRSxNQUFNLEdBQUd4RSxXQUFXeUUsTUFBTSxHQUFHekUsV0FBVzBFLFFBQVE7SUFDbkcsSUFBR3pFLGNBQWNnRixVQUFVLEVBQUVGLGNBQWNDLGtCQUFrQnZDLElBQUksQ0FBQ2tDLENBQUFBO1FBQy9ELElBQUlBLFlBQVk3QixNQUFNLEtBQUtxQixjQUFjckIsTUFBTSxFQUFFO1lBQzdDLE9BQU81QixTQUFTLElBQUlwQixRQUFRb0YsdUJBQXVCLENBQUM7UUFDeEQ7UUFDQSx1REFBdUQ7UUFDdkQseUVBQXlFO1FBQ3pFLDhEQUE4RDtRQUM5RCxJQUFJWiwwQkFBMEI7WUFDMUIsT0FBT2xELG9CQUFvQnlDLFFBQVEzQztRQUN2QztRQUNBMkMsT0FBT2dCLElBQUksQ0FBQyxXQUFXLElBQUlOLGFBQWFOLFNBQVNFLGVBQWVRO1FBQ2hFLElBQUk3RCxPQUFPZ0MsTUFBTSxJQUFJLEdBQUc7WUFDcEIsT0FBTzFCLG9CQUFvQnlDLFFBQVEzQztRQUN2QztRQUNBLE9BQU9BO0lBQ1gsR0FBR2tDLENBQUFBO1FBQ0MsT0FBT2xDLFNBQVNrQztJQUNwQjtBQUNKLEVBQ0EsMENBQTBDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvbWVzc2FnZV9zdHJlYW0uanM/OGE0MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTWVzc2FnZVN0cmVhbSA9IHZvaWQgMDtcbmNvbnN0IHN0cmVhbV8xID0gcmVxdWlyZShcInN0cmVhbVwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgY29tbWFuZHNfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRzXCIpO1xuY29uc3QgY29tcHJlc3Npb25fMSA9IHJlcXVpcmUoXCIuL3dpcmVfcHJvdG9jb2wvY29tcHJlc3Npb25cIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL3dpcmVfcHJvdG9jb2wvY29uc3RhbnRzXCIpO1xuY29uc3QgTUVTU0FHRV9IRUFERVJfU0laRSA9IDE2O1xuY29uc3QgQ09NUFJFU1NJT05fREVUQUlMU19TSVpFID0gOTsgLy8gb3JpZ2luYWxPcGNvZGUgKyB1bmNvbXByZXNzZWRTaXplLCBjb21wcmVzc29ySURcbmNvbnN0IGtEZWZhdWx0TWF4QnNvbk1lc3NhZ2VTaXplID0gMTAyNCAqIDEwMjQgKiAxNiAqIDQ7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrQnVmZmVyID0gU3ltYm9sKCdidWZmZXInKTtcbi8qKlxuICogQSBkdXBsZXggc3RyZWFtIHRoYXQgaXMgY2FwYWJsZSBvZiByZWFkaW5nIGFuZCB3cml0aW5nIHJhdyB3aXJlIHByb3RvY29sIG1lc3NhZ2VzLCB3aXRoXG4gKiBzdXBwb3J0IGZvciBvcHRpb25hbCBjb21wcmVzc2lvblxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIE1lc3NhZ2VTdHJlYW0gZXh0ZW5kcyBzdHJlYW1fMS5EdXBsZXgge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLmlzTW9uaXRvcmluZ0Nvbm5lY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tYXhCc29uTWVzc2FnZVNpemUgPSBvcHRpb25zLm1heEJzb25NZXNzYWdlU2l6ZSB8fCBrRGVmYXVsdE1heEJzb25NZXNzYWdlU2l6ZTtcbiAgICAgICAgdGhpc1trQnVmZmVyXSA9IG5ldyB1dGlsc18xLkJ1ZmZlclBvb2woKTtcbiAgICB9XG4gICAgZ2V0IGJ1ZmZlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba0J1ZmZlcl07XG4gICAgfVxuICAgIF93cml0ZShjaHVuaywgXywgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpc1trQnVmZmVyXS5hcHBlbmQoY2h1bmspO1xuICAgICAgICBwcm9jZXNzSW5jb21pbmdEYXRhKHRoaXMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgX3JlYWQoIC8qIHNpemUgKi8pIHtcbiAgICAgICAgLy8gTk9URTogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBlbXB0eSBiZWNhdXNlIHdlIGV4cGxpY2l0bHkgcHVzaCBkYXRhIHRvIGJlIHJlYWRcbiAgICAgICAgLy8gICAgICAgd2hlbiBgd3JpdGVNZXNzYWdlYCBpcyBjYWxsZWQuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgd3JpdGVDb21tYW5kKGNvbW1hbmQsIG9wZXJhdGlvbkRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IGFncmVlZENvbXByZXNzb3IgPSBvcGVyYXRpb25EZXNjcmlwdGlvbi5hZ3JlZWRDb21wcmVzc29yID8/ICdub25lJztcbiAgICAgICAgaWYgKGFncmVlZENvbXByZXNzb3IgPT09ICdub25lJyB8fCAhY2FuQ29tcHJlc3MoY29tbWFuZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjb21tYW5kLnRvQmluKCk7XG4gICAgICAgICAgICB0aGlzLnB1c2goQXJyYXkuaXNBcnJheShkYXRhKSA/IEJ1ZmZlci5jb25jYXQoZGF0YSkgOiBkYXRhKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBvdGhlcndpc2UsIGNvbXByZXNzIHRoZSBtZXNzYWdlXG4gICAgICAgIGNvbnN0IGNvbmNhdGVuYXRlZE9yaWdpbmFsQ29tbWFuZEJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoY29tbWFuZC50b0JpbigpKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZVRvQmVDb21wcmVzc2VkID0gY29uY2F0ZW5hdGVkT3JpZ2luYWxDb21tYW5kQnVmZmVyLnNsaWNlKE1FU1NBR0VfSEVBREVSX1NJWkUpO1xuICAgICAgICAvLyBFeHRyYWN0IGluZm9ybWF0aW9uIG5lZWRlZCBmb3IgT1BfQ09NUFJFU1NFRCBmcm9tIHRoZSB1bmNvbXByZXNzZWQgbWVzc2FnZVxuICAgICAgICBjb25zdCBvcmlnaW5hbENvbW1hbmRPcENvZGUgPSBjb25jYXRlbmF0ZWRPcmlnaW5hbENvbW1hbmRCdWZmZXIucmVhZEludDMyTEUoMTIpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgYWdyZWVkQ29tcHJlc3NvcixcbiAgICAgICAgICAgIHpsaWJDb21wcmVzc2lvbkxldmVsOiBvcGVyYXRpb25EZXNjcmlwdGlvbi56bGliQ29tcHJlc3Npb25MZXZlbCA/PyAwXG4gICAgICAgIH07XG4gICAgICAgIC8vIENvbXByZXNzIHRoZSBtZXNzYWdlIGJvZHlcbiAgICAgICAgKDAsIGNvbXByZXNzaW9uXzEuY29tcHJlc3MpKG9wdGlvbnMsIG1lc3NhZ2VUb0JlQ29tcHJlc3NlZCkudGhlbihjb21wcmVzc2VkTWVzc2FnZSA9PiB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIG1zZ0hlYWRlciBvZiBPUF9DT01QUkVTU0VEXG4gICAgICAgICAgICBjb25zdCBtc2dIZWFkZXIgPSBCdWZmZXIuYWxsb2MoTUVTU0FHRV9IRUFERVJfU0laRSk7XG4gICAgICAgICAgICBtc2dIZWFkZXIud3JpdGVJbnQzMkxFKE1FU1NBR0VfSEVBREVSX1NJWkUgKyBDT01QUkVTU0lPTl9ERVRBSUxTX1NJWkUgKyBjb21wcmVzc2VkTWVzc2FnZS5sZW5ndGgsIDApOyAvLyBtZXNzYWdlTGVuZ3RoXG4gICAgICAgICAgICBtc2dIZWFkZXIud3JpdGVJbnQzMkxFKGNvbW1hbmQucmVxdWVzdElkLCA0KTsgLy8gcmVxdWVzdElEXG4gICAgICAgICAgICBtc2dIZWFkZXIud3JpdGVJbnQzMkxFKDAsIDgpOyAvLyByZXNwb25zZVRvICh6ZXJvKVxuICAgICAgICAgICAgbXNnSGVhZGVyLndyaXRlSW50MzJMRShjb25zdGFudHNfMS5PUF9DT01QUkVTU0VELCAxMik7IC8vIG9wQ29kZVxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjb21wcmVzc2lvbiBkZXRhaWxzIG9mIE9QX0NPTVBSRVNTRURcbiAgICAgICAgICAgIGNvbnN0IGNvbXByZXNzaW9uRGV0YWlscyA9IEJ1ZmZlci5hbGxvYyhDT01QUkVTU0lPTl9ERVRBSUxTX1NJWkUpO1xuICAgICAgICAgICAgY29tcHJlc3Npb25EZXRhaWxzLndyaXRlSW50MzJMRShvcmlnaW5hbENvbW1hbmRPcENvZGUsIDApOyAvLyBvcmlnaW5hbE9wY29kZVxuICAgICAgICAgICAgY29tcHJlc3Npb25EZXRhaWxzLndyaXRlSW50MzJMRShtZXNzYWdlVG9CZUNvbXByZXNzZWQubGVuZ3RoLCA0KTsgLy8gU2l6ZSBvZiB0aGUgdW5jb21wcmVzc2VkIGNvbXByZXNzZWRNZXNzYWdlLCBleGNsdWRpbmcgdGhlIE1zZ0hlYWRlclxuICAgICAgICAgICAgY29tcHJlc3Npb25EZXRhaWxzLndyaXRlVUludDgoY29tcHJlc3Npb25fMS5Db21wcmVzc29yW2FncmVlZENvbXByZXNzb3JdLCA4KTsgLy8gY29tcHJlc3NvcklEXG4gICAgICAgICAgICB0aGlzLnB1c2goQnVmZmVyLmNvbmNhdChbbXNnSGVhZGVyLCBjb21wcmVzc2lvbkRldGFpbHMsIGNvbXByZXNzZWRNZXNzYWdlXSkpO1xuICAgICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgICAgICBvcGVyYXRpb25EZXNjcmlwdGlvbi5jYihlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuTWVzc2FnZVN0cmVhbSA9IE1lc3NhZ2VTdHJlYW07XG4vLyBSZXR1cm4gd2hldGhlciBhIGNvbW1hbmQgY29udGFpbnMgYW4gdW5jb21wcmVzc2libGUgY29tbWFuZCB0ZXJtXG4vLyBXaWxsIHJldHVybiB0cnVlIGlmIGNvbW1hbmQgY29udGFpbnMgbm8gdW5jb21wcmVzc2libGUgY29tbWFuZCB0ZXJtc1xuZnVuY3Rpb24gY2FuQ29tcHJlc3MoY29tbWFuZCkge1xuICAgIGNvbnN0IGNvbW1hbmREb2MgPSBjb21tYW5kIGluc3RhbmNlb2YgY29tbWFuZHNfMS5Nc2cgPyBjb21tYW5kLmNvbW1hbmQgOiBjb21tYW5kLnF1ZXJ5O1xuICAgIGNvbnN0IGNvbW1hbmROYW1lID0gT2JqZWN0LmtleXMoY29tbWFuZERvYylbMF07XG4gICAgcmV0dXJuICFjb21wcmVzc2lvbl8xLnVuY29tcHJlc3NpYmxlQ29tbWFuZHMuaGFzKGNvbW1hbmROYW1lKTtcbn1cbmZ1bmN0aW9uIHByb2Nlc3NJbmNvbWluZ0RhdGEoc3RyZWFtLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGJ1ZmZlciA9IHN0cmVhbVtrQnVmZmVyXTtcbiAgICBjb25zdCBzaXplT2ZNZXNzYWdlID0gYnVmZmVyLmdldEludDMyKCk7XG4gICAgaWYgKHNpemVPZk1lc3NhZ2UgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgICB9XG4gICAgaWYgKHNpemVPZk1lc3NhZ2UgPCAwKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoYEludmFsaWQgbWVzc2FnZSBzaXplOiAke3NpemVPZk1lc3NhZ2V9YCkpO1xuICAgIH1cbiAgICBpZiAoc2l6ZU9mTWVzc2FnZSA+IHN0cmVhbS5tYXhCc29uTWVzc2FnZVNpemUpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgSW52YWxpZCBtZXNzYWdlIHNpemU6ICR7c2l6ZU9mTWVzc2FnZX0sIG1heCBhbGxvd2VkOiAke3N0cmVhbS5tYXhCc29uTWVzc2FnZVNpemV9YCkpO1xuICAgIH1cbiAgICBpZiAoc2l6ZU9mTWVzc2FnZSA+IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBidWZmZXIucmVhZChzaXplT2ZNZXNzYWdlKTtcbiAgICBjb25zdCBtZXNzYWdlSGVhZGVyID0ge1xuICAgICAgICBsZW5ndGg6IG1lc3NhZ2UucmVhZEludDMyTEUoMCksXG4gICAgICAgIHJlcXVlc3RJZDogbWVzc2FnZS5yZWFkSW50MzJMRSg0KSxcbiAgICAgICAgcmVzcG9uc2VUbzogbWVzc2FnZS5yZWFkSW50MzJMRSg4KSxcbiAgICAgICAgb3BDb2RlOiBtZXNzYWdlLnJlYWRJbnQzMkxFKDEyKVxuICAgIH07XG4gICAgY29uc3QgbW9uaXRvckhhc0Fub3RoZXJIZWxsbyA9ICgpID0+IHtcbiAgICAgICAgaWYgKHN0cmVhbS5pc01vbml0b3JpbmdDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBDYW4gd2UgcmVhZCB0aGUgbmV4dCBtZXNzYWdlIHNpemU/XG4gICAgICAgICAgICBjb25zdCBzaXplT2ZNZXNzYWdlID0gYnVmZmVyLmdldEludDMyKCk7XG4gICAgICAgICAgICBpZiAoc2l6ZU9mTWVzc2FnZSAhPSBudWxsICYmIHNpemVPZk1lc3NhZ2UgPD0gYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIGxldCBSZXNwb25zZVR5cGUgPSBtZXNzYWdlSGVhZGVyLm9wQ29kZSA9PT0gY29uc3RhbnRzXzEuT1BfTVNHID8gY29tbWFuZHNfMS5CaW5Nc2cgOiBjb21tYW5kc18xLlJlc3BvbnNlO1xuICAgIGlmIChtZXNzYWdlSGVhZGVyLm9wQ29kZSAhPT0gY29uc3RhbnRzXzEuT1BfQ09NUFJFU1NFRCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlQm9keSA9IG1lc3NhZ2Uuc3ViYXJyYXkoTUVTU0FHRV9IRUFERVJfU0laRSk7XG4gICAgICAgIC8vIElmIHdlIGFyZSBhIG1vbml0b3JpbmcgY29ubmVjdGlvbiBtZXNzYWdlIHN0cmVhbSBhbmRcbiAgICAgICAgLy8gdGhlcmUgaXMgbW9yZSBpbiB0aGUgYnVmZmVyIHRoYXQgY2FuIGJlIHJlYWQsIHNraXAgcHJvY2Vzc2luZyBzaW5jZSB3ZVxuICAgICAgICAvLyB3YW50IHRoZSBsYXN0IGhlbGxvIGNvbW1hbmQgcmVzcG9uc2UgdGhhdCBpcyBpbiB0aGUgYnVmZmVyLlxuICAgICAgICBpZiAobW9uaXRvckhhc0Fub3RoZXJIZWxsbygpKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvY2Vzc0luY29taW5nRGF0YShzdHJlYW0sIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBzdHJlYW0uZW1pdCgnbWVzc2FnZScsIG5ldyBSZXNwb25zZVR5cGUobWVzc2FnZSwgbWVzc2FnZUhlYWRlciwgbWVzc2FnZUJvZHkpKTtcbiAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPj0gNCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3NJbmNvbWluZ0RhdGEoc3RyZWFtLCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIG1lc3NhZ2VIZWFkZXIuZnJvbUNvbXByZXNzZWQgPSB0cnVlO1xuICAgIG1lc3NhZ2VIZWFkZXIub3BDb2RlID0gbWVzc2FnZS5yZWFkSW50MzJMRShNRVNTQUdFX0hFQURFUl9TSVpFKTtcbiAgICBtZXNzYWdlSGVhZGVyLmxlbmd0aCA9IG1lc3NhZ2UucmVhZEludDMyTEUoTUVTU0FHRV9IRUFERVJfU0laRSArIDQpO1xuICAgIGNvbnN0IGNvbXByZXNzb3JJRCA9IG1lc3NhZ2VbTUVTU0FHRV9IRUFERVJfU0laRSArIDhdO1xuICAgIGNvbnN0IGNvbXByZXNzZWRCdWZmZXIgPSBtZXNzYWdlLnNsaWNlKE1FU1NBR0VfSEVBREVSX1NJWkUgKyA5KTtcbiAgICAvLyByZWNhbGN1bGF0ZSBiYXNlZCBvbiB3cmFwcGVkIG9wY29kZVxuICAgIFJlc3BvbnNlVHlwZSA9IG1lc3NhZ2VIZWFkZXIub3BDb2RlID09PSBjb25zdGFudHNfMS5PUF9NU0cgPyBjb21tYW5kc18xLkJpbk1zZyA6IGNvbW1hbmRzXzEuUmVzcG9uc2U7XG4gICAgKDAsIGNvbXByZXNzaW9uXzEuZGVjb21wcmVzcykoY29tcHJlc3NvcklELCBjb21wcmVzc2VkQnVmZmVyKS50aGVuKG1lc3NhZ2VCb2R5ID0+IHtcbiAgICAgICAgaWYgKG1lc3NhZ2VCb2R5Lmxlbmd0aCAhPT0gbWVzc2FnZUhlYWRlci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb0RlY29tcHJlc3Npb25FcnJvcignTWVzc2FnZSBib2R5IGFuZCBtZXNzYWdlIGhlYWRlciBtdXN0IGJlIHRoZSBzYW1lIGxlbmd0aCcpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB3ZSBhcmUgYSBtb25pdG9yaW5nIGNvbm5lY3Rpb24gbWVzc2FnZSBzdHJlYW0gYW5kXG4gICAgICAgIC8vIHRoZXJlIGlzIG1vcmUgaW4gdGhlIGJ1ZmZlciB0aGF0IGNhbiBiZSByZWFkLCBza2lwIHByb2Nlc3Npbmcgc2luY2Ugd2VcbiAgICAgICAgLy8gd2FudCB0aGUgbGFzdCBoZWxsbyBjb21tYW5kIHJlc3BvbnNlIHRoYXQgaXMgaW4gdGhlIGJ1ZmZlci5cbiAgICAgICAgaWYgKG1vbml0b3JIYXNBbm90aGVySGVsbG8oKSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3NJbmNvbWluZ0RhdGEoc3RyZWFtLCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgc3RyZWFtLmVtaXQoJ21lc3NhZ2UnLCBuZXcgUmVzcG9uc2VUeXBlKG1lc3NhZ2UsIG1lc3NhZ2VIZWFkZXIsIG1lc3NhZ2VCb2R5KSk7XG4gICAgICAgIGlmIChidWZmZXIubGVuZ3RoID49IDQpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9jZXNzSW5jb21pbmdEYXRhKHN0cmVhbSwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgIH0sIGVycm9yID0+IHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yKTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lc3NhZ2Vfc3RyZWFtLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk1lc3NhZ2VTdHJlYW0iLCJzdHJlYW1fMSIsInJlcXVpcmUiLCJlcnJvcl8xIiwidXRpbHNfMSIsImNvbW1hbmRzXzEiLCJjb21wcmVzc2lvbl8xIiwiY29uc3RhbnRzXzEiLCJNRVNTQUdFX0hFQURFUl9TSVpFIiwiQ09NUFJFU1NJT05fREVUQUlMU19TSVpFIiwia0RlZmF1bHRNYXhCc29uTWVzc2FnZVNpemUiLCJrQnVmZmVyIiwiU3ltYm9sIiwiRHVwbGV4IiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwiaXNNb25pdG9yaW5nQ29ubmVjdGlvbiIsIm1heEJzb25NZXNzYWdlU2l6ZSIsIkJ1ZmZlclBvb2wiLCJidWZmZXIiLCJfd3JpdGUiLCJjaHVuayIsIl8iLCJjYWxsYmFjayIsImFwcGVuZCIsInByb2Nlc3NJbmNvbWluZ0RhdGEiLCJfcmVhZCIsIndyaXRlQ29tbWFuZCIsImNvbW1hbmQiLCJvcGVyYXRpb25EZXNjcmlwdGlvbiIsImFncmVlZENvbXByZXNzb3IiLCJjYW5Db21wcmVzcyIsImRhdGEiLCJ0b0JpbiIsInB1c2giLCJBcnJheSIsImlzQXJyYXkiLCJCdWZmZXIiLCJjb25jYXQiLCJjb25jYXRlbmF0ZWRPcmlnaW5hbENvbW1hbmRCdWZmZXIiLCJtZXNzYWdlVG9CZUNvbXByZXNzZWQiLCJzbGljZSIsIm9yaWdpbmFsQ29tbWFuZE9wQ29kZSIsInJlYWRJbnQzMkxFIiwiemxpYkNvbXByZXNzaW9uTGV2ZWwiLCJjb21wcmVzcyIsInRoZW4iLCJjb21wcmVzc2VkTWVzc2FnZSIsIm1zZ0hlYWRlciIsImFsbG9jIiwid3JpdGVJbnQzMkxFIiwibGVuZ3RoIiwicmVxdWVzdElkIiwiT1BfQ09NUFJFU1NFRCIsImNvbXByZXNzaW9uRGV0YWlscyIsIndyaXRlVUludDgiLCJDb21wcmVzc29yIiwiZXJyb3IiLCJjYiIsImNvbW1hbmREb2MiLCJNc2ciLCJxdWVyeSIsImNvbW1hbmROYW1lIiwia2V5cyIsInVuY29tcHJlc3NpYmxlQ29tbWFuZHMiLCJoYXMiLCJzdHJlYW0iLCJzaXplT2ZNZXNzYWdlIiwiZ2V0SW50MzIiLCJNb25nb1BhcnNlRXJyb3IiLCJtZXNzYWdlIiwicmVhZCIsIm1lc3NhZ2VIZWFkZXIiLCJyZXNwb25zZVRvIiwib3BDb2RlIiwibW9uaXRvckhhc0Fub3RoZXJIZWxsbyIsIlJlc3BvbnNlVHlwZSIsIk9QX01TRyIsIkJpbk1zZyIsIlJlc3BvbnNlIiwibWVzc2FnZUJvZHkiLCJzdWJhcnJheSIsImVtaXQiLCJmcm9tQ29tcHJlc3NlZCIsImNvbXByZXNzb3JJRCIsImNvbXByZXNzZWRCdWZmZXIiLCJkZWNvbXByZXNzIiwiTW9uZ29EZWNvbXByZXNzaW9uRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/message_stream.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/metrics.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/metrics.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ConnectionPoolMetrics = void 0;\n/** @internal */ class ConnectionPoolMetrics {\n    constructor(){\n        this.txnConnections = 0;\n        this.cursorConnections = 0;\n        this.otherConnections = 0;\n    }\n    /**\n     * Mark a connection as pinned for a specific operation.\n     */ markPinned(pinType) {\n        if (pinType === ConnectionPoolMetrics.TXN) {\n            this.txnConnections += 1;\n        } else if (pinType === ConnectionPoolMetrics.CURSOR) {\n            this.cursorConnections += 1;\n        } else {\n            this.otherConnections += 1;\n        }\n    }\n    /**\n     * Unmark a connection as pinned for an operation.\n     */ markUnpinned(pinType) {\n        if (pinType === ConnectionPoolMetrics.TXN) {\n            this.txnConnections -= 1;\n        } else if (pinType === ConnectionPoolMetrics.CURSOR) {\n            this.cursorConnections -= 1;\n        } else {\n            this.otherConnections -= 1;\n        }\n    }\n    /**\n     * Return information about the cmap metrics as a string.\n     */ info(maxPoolSize) {\n        return \"Timed out while checking out a connection from connection pool: \" + `maxPoolSize: ${maxPoolSize}, ` + `connections in use by cursors: ${this.cursorConnections}, ` + `connections in use by transactions: ${this.txnConnections}, ` + `connections in use by other operations: ${this.otherConnections}`;\n    }\n    /**\n     * Reset the metrics to the initial values.\n     */ reset() {\n        this.txnConnections = 0;\n        this.cursorConnections = 0;\n        this.otherConnections = 0;\n    }\n}\nConnectionPoolMetrics.TXN = \"txn\";\nConnectionPoolMetrics.CURSOR = \"cursor\";\nConnectionPoolMetrics.OTHER = \"other\";\nexports.ConnectionPoolMetrics = ConnectionPoolMetrics; //# sourceMappingURL=metrics.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9tZXRyaWNzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw2QkFBNkIsR0FBRyxLQUFLO0FBQ3JDLGNBQWMsR0FDZCxNQUFNRTtJQUNGQyxhQUFjO1FBQ1YsSUFBSSxDQUFDQyxjQUFjLEdBQUc7UUFDdEIsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRztRQUN6QixJQUFJLENBQUNDLGdCQUFnQixHQUFHO0lBQzVCO0lBQ0E7O0tBRUMsR0FDREMsV0FBV0MsT0FBTyxFQUFFO1FBQ2hCLElBQUlBLFlBQVlOLHNCQUFzQk8sR0FBRyxFQUFFO1lBQ3ZDLElBQUksQ0FBQ0wsY0FBYyxJQUFJO1FBQzNCLE9BQ0ssSUFBSUksWUFBWU4sc0JBQXNCUSxNQUFNLEVBQUU7WUFDL0MsSUFBSSxDQUFDTCxpQkFBaUIsSUFBSTtRQUM5QixPQUNLO1lBQ0QsSUFBSSxDQUFDQyxnQkFBZ0IsSUFBSTtRQUM3QjtJQUNKO0lBQ0E7O0tBRUMsR0FDREssYUFBYUgsT0FBTyxFQUFFO1FBQ2xCLElBQUlBLFlBQVlOLHNCQUFzQk8sR0FBRyxFQUFFO1lBQ3ZDLElBQUksQ0FBQ0wsY0FBYyxJQUFJO1FBQzNCLE9BQ0ssSUFBSUksWUFBWU4sc0JBQXNCUSxNQUFNLEVBQUU7WUFDL0MsSUFBSSxDQUFDTCxpQkFBaUIsSUFBSTtRQUM5QixPQUNLO1lBQ0QsSUFBSSxDQUFDQyxnQkFBZ0IsSUFBSTtRQUM3QjtJQUNKO0lBQ0E7O0tBRUMsR0FDRE0sS0FBS0MsV0FBVyxFQUFFO1FBQ2QsT0FBUSxxRUFDSixDQUFDLGFBQWEsRUFBRUEsWUFBWSxFQUFFLENBQUMsR0FDL0IsQ0FBQywrQkFBK0IsRUFBRSxJQUFJLENBQUNSLGlCQUFpQixDQUFDLEVBQUUsQ0FBQyxHQUM1RCxDQUFDLG9DQUFvQyxFQUFFLElBQUksQ0FBQ0QsY0FBYyxDQUFDLEVBQUUsQ0FBQyxHQUM5RCxDQUFDLHdDQUF3QyxFQUFFLElBQUksQ0FBQ0UsZ0JBQWdCLENBQUMsQ0FBQztJQUMxRTtJQUNBOztLQUVDLEdBQ0RRLFFBQVE7UUFDSixJQUFJLENBQUNWLGNBQWMsR0FBRztRQUN0QixJQUFJLENBQUNDLGlCQUFpQixHQUFHO1FBQ3pCLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUc7SUFDNUI7QUFDSjtBQUNBSixzQkFBc0JPLEdBQUcsR0FBRztBQUM1QlAsc0JBQXNCUSxNQUFNLEdBQUc7QUFDL0JSLHNCQUFzQmEsS0FBSyxHQUFHO0FBQzlCZiw2QkFBNkIsR0FBR0UsdUJBQ2hDLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL21ldHJpY3MuanM/YTE0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ29ubmVjdGlvblBvb2xNZXRyaWNzID0gdm9pZCAwO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgQ29ubmVjdGlvblBvb2xNZXRyaWNzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50eG5Db25uZWN0aW9ucyA9IDA7XG4gICAgICAgIHRoaXMuY3Vyc29yQ29ubmVjdGlvbnMgPSAwO1xuICAgICAgICB0aGlzLm90aGVyQ29ubmVjdGlvbnMgPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrIGEgY29ubmVjdGlvbiBhcyBwaW5uZWQgZm9yIGEgc3BlY2lmaWMgb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIG1hcmtQaW5uZWQocGluVHlwZSkge1xuICAgICAgICBpZiAocGluVHlwZSA9PT0gQ29ubmVjdGlvblBvb2xNZXRyaWNzLlRYTikge1xuICAgICAgICAgICAgdGhpcy50eG5Db25uZWN0aW9ucyArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBpblR5cGUgPT09IENvbm5lY3Rpb25Qb29sTWV0cmljcy5DVVJTT1IpIHtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yQ29ubmVjdGlvbnMgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub3RoZXJDb25uZWN0aW9ucyArPSAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVubWFyayBhIGNvbm5lY3Rpb24gYXMgcGlubmVkIGZvciBhbiBvcGVyYXRpb24uXG4gICAgICovXG4gICAgbWFya1VucGlubmVkKHBpblR5cGUpIHtcbiAgICAgICAgaWYgKHBpblR5cGUgPT09IENvbm5lY3Rpb25Qb29sTWV0cmljcy5UWE4pIHtcbiAgICAgICAgICAgIHRoaXMudHhuQ29ubmVjdGlvbnMgLT0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwaW5UeXBlID09PSBDb25uZWN0aW9uUG9vbE1ldHJpY3MuQ1VSU09SKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnNvckNvbm5lY3Rpb25zIC09IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm90aGVyQ29ubmVjdGlvbnMgLT0gMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNtYXAgbWV0cmljcyBhcyBhIHN0cmluZy5cbiAgICAgKi9cbiAgICBpbmZvKG1heFBvb2xTaXplKSB7XG4gICAgICAgIHJldHVybiAoJ1RpbWVkIG91dCB3aGlsZSBjaGVja2luZyBvdXQgYSBjb25uZWN0aW9uIGZyb20gY29ubmVjdGlvbiBwb29sOiAnICtcbiAgICAgICAgICAgIGBtYXhQb29sU2l6ZTogJHttYXhQb29sU2l6ZX0sIGAgK1xuICAgICAgICAgICAgYGNvbm5lY3Rpb25zIGluIHVzZSBieSBjdXJzb3JzOiAke3RoaXMuY3Vyc29yQ29ubmVjdGlvbnN9LCBgICtcbiAgICAgICAgICAgIGBjb25uZWN0aW9ucyBpbiB1c2UgYnkgdHJhbnNhY3Rpb25zOiAke3RoaXMudHhuQ29ubmVjdGlvbnN9LCBgICtcbiAgICAgICAgICAgIGBjb25uZWN0aW9ucyBpbiB1c2UgYnkgb3RoZXIgb3BlcmF0aW9uczogJHt0aGlzLm90aGVyQ29ubmVjdGlvbnN9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBtZXRyaWNzIHRvIHRoZSBpbml0aWFsIHZhbHVlcy5cbiAgICAgKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy50eG5Db25uZWN0aW9ucyA9IDA7XG4gICAgICAgIHRoaXMuY3Vyc29yQ29ubmVjdGlvbnMgPSAwO1xuICAgICAgICB0aGlzLm90aGVyQ29ubmVjdGlvbnMgPSAwO1xuICAgIH1cbn1cbkNvbm5lY3Rpb25Qb29sTWV0cmljcy5UWE4gPSAndHhuJztcbkNvbm5lY3Rpb25Qb29sTWV0cmljcy5DVVJTT1IgPSAnY3Vyc29yJztcbkNvbm5lY3Rpb25Qb29sTWV0cmljcy5PVEhFUiA9ICdvdGhlcic7XG5leHBvcnRzLkNvbm5lY3Rpb25Qb29sTWV0cmljcyA9IENvbm5lY3Rpb25Qb29sTWV0cmljcztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1ldHJpY3MuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ29ubmVjdGlvblBvb2xNZXRyaWNzIiwiY29uc3RydWN0b3IiLCJ0eG5Db25uZWN0aW9ucyIsImN1cnNvckNvbm5lY3Rpb25zIiwib3RoZXJDb25uZWN0aW9ucyIsIm1hcmtQaW5uZWQiLCJwaW5UeXBlIiwiVFhOIiwiQ1VSU09SIiwibWFya1VucGlubmVkIiwiaW5mbyIsIm1heFBvb2xTaXplIiwicmVzZXQiLCJPVEhFUiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/metrics.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/stream_description.js":
/*!*************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/stream_description.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.StreamDescription = void 0;\nconst common_1 = __webpack_require__(/*! ../sdam/common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst server_description_1 = __webpack_require__(/*! ../sdam/server_description */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_description.js\");\nconst RESPONSE_FIELDS = [\n    \"minWireVersion\",\n    \"maxWireVersion\",\n    \"maxBsonObjectSize\",\n    \"maxMessageSizeBytes\",\n    \"maxWriteBatchSize\",\n    \"logicalSessionTimeoutMinutes\"\n];\n/** @public */ class StreamDescription {\n    constructor(address, options){\n        this.address = address;\n        this.type = common_1.ServerType.Unknown;\n        this.minWireVersion = undefined;\n        this.maxWireVersion = undefined;\n        this.maxBsonObjectSize = 16777216;\n        this.maxMessageSizeBytes = 48000000;\n        this.maxWriteBatchSize = 100000;\n        this.logicalSessionTimeoutMinutes = options?.logicalSessionTimeoutMinutes;\n        this.loadBalanced = !!options?.loadBalanced;\n        this.compressors = options && options.compressors && Array.isArray(options.compressors) ? options.compressors : [];\n    }\n    receiveResponse(response) {\n        if (response == null) {\n            return;\n        }\n        this.type = (0, server_description_1.parseServerType)(response);\n        for (const field of RESPONSE_FIELDS){\n            if (response[field] != null) {\n                this[field] = response[field];\n            }\n            // testing case\n            if (\"__nodejs_mock_server__\" in response) {\n                this.__nodejs_mock_server__ = response[\"__nodejs_mock_server__\"];\n            }\n        }\n        if (response.compression) {\n            this.compressor = this.compressors.filter((c)=>response.compression?.includes(c))[0];\n        }\n    }\n}\nexports.StreamDescription = StreamDescription; //# sourceMappingURL=stream_description.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9zdHJlYW1fZGVzY3JpcHRpb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHlCQUF5QixHQUFHLEtBQUs7QUFDakMsTUFBTUcsV0FBV0MsbUJBQU9BLENBQUMsdUVBQWdCO0FBQ3pDLE1BQU1DLHVCQUF1QkQsbUJBQU9BLENBQUMsK0ZBQTRCO0FBQ2pFLE1BQU1FLGtCQUFrQjtJQUNwQjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDSDtBQUNELFlBQVksR0FDWixNQUFNSjtJQUNGSyxZQUFZQyxPQUFPLEVBQUVDLE9BQU8sQ0FBRTtRQUMxQixJQUFJLENBQUNELE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNFLElBQUksR0FBR1AsU0FBU1EsVUFBVSxDQUFDQyxPQUFPO1FBQ3ZDLElBQUksQ0FBQ0MsY0FBYyxHQUFHQztRQUN0QixJQUFJLENBQUNDLGNBQWMsR0FBR0Q7UUFDdEIsSUFBSSxDQUFDRSxpQkFBaUIsR0FBRztRQUN6QixJQUFJLENBQUNDLG1CQUFtQixHQUFHO1FBQzNCLElBQUksQ0FBQ0MsaUJBQWlCLEdBQUc7UUFDekIsSUFBSSxDQUFDQyw0QkFBNEIsR0FBR1YsU0FBU1U7UUFDN0MsSUFBSSxDQUFDQyxZQUFZLEdBQUcsQ0FBQyxDQUFDWCxTQUFTVztRQUMvQixJQUFJLENBQUNDLFdBQVcsR0FDWlosV0FBV0EsUUFBUVksV0FBVyxJQUFJQyxNQUFNQyxPQUFPLENBQUNkLFFBQVFZLFdBQVcsSUFDN0RaLFFBQVFZLFdBQVcsR0FDbkIsRUFBRTtJQUNoQjtJQUNBRyxnQkFBZ0JDLFFBQVEsRUFBRTtRQUN0QixJQUFJQSxZQUFZLE1BQU07WUFDbEI7UUFDSjtRQUNBLElBQUksQ0FBQ2YsSUFBSSxHQUFHLENBQUMsR0FBR0wscUJBQXFCcUIsZUFBZSxFQUFFRDtRQUN0RCxLQUFLLE1BQU1FLFNBQVNyQixnQkFBaUI7WUFDakMsSUFBSW1CLFFBQVEsQ0FBQ0UsTUFBTSxJQUFJLE1BQU07Z0JBQ3pCLElBQUksQ0FBQ0EsTUFBTSxHQUFHRixRQUFRLENBQUNFLE1BQU07WUFDakM7WUFDQSxlQUFlO1lBQ2YsSUFBSSw0QkFBNEJGLFVBQVU7Z0JBQ3RDLElBQUksQ0FBQ0csc0JBQXNCLEdBQUdILFFBQVEsQ0FBQyx5QkFBeUI7WUFDcEU7UUFDSjtRQUNBLElBQUlBLFNBQVNJLFdBQVcsRUFBRTtZQUN0QixJQUFJLENBQUNDLFVBQVUsR0FBRyxJQUFJLENBQUNULFdBQVcsQ0FBQ1UsTUFBTSxDQUFDQyxDQUFBQSxJQUFLUCxTQUFTSSxXQUFXLEVBQUVJLFNBQVNELEdBQUcsQ0FBQyxFQUFFO1FBQ3hGO0lBQ0o7QUFDSjtBQUNBaEMseUJBQXlCLEdBQUdFLG1CQUM1Qiw4Q0FBOEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9zdHJlYW1fZGVzY3JpcHRpb24uanM/YjIxYyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU3RyZWFtRGVzY3JpcHRpb24gPSB2b2lkIDA7XG5jb25zdCBjb21tb25fMSA9IHJlcXVpcmUoXCIuLi9zZGFtL2NvbW1vblwiKTtcbmNvbnN0IHNlcnZlcl9kZXNjcmlwdGlvbl8xID0gcmVxdWlyZShcIi4uL3NkYW0vc2VydmVyX2Rlc2NyaXB0aW9uXCIpO1xuY29uc3QgUkVTUE9OU0VfRklFTERTID0gW1xuICAgICdtaW5XaXJlVmVyc2lvbicsXG4gICAgJ21heFdpcmVWZXJzaW9uJyxcbiAgICAnbWF4QnNvbk9iamVjdFNpemUnLFxuICAgICdtYXhNZXNzYWdlU2l6ZUJ5dGVzJyxcbiAgICAnbWF4V3JpdGVCYXRjaFNpemUnLFxuICAgICdsb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzJ1xuXTtcbi8qKiBAcHVibGljICovXG5jbGFzcyBTdHJlYW1EZXNjcmlwdGlvbiB7XG4gICAgY29uc3RydWN0b3IoYWRkcmVzcywgb3B0aW9ucykge1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLnR5cGUgPSBjb21tb25fMS5TZXJ2ZXJUeXBlLlVua25vd247XG4gICAgICAgIHRoaXMubWluV2lyZVZlcnNpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubWF4V2lyZVZlcnNpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubWF4QnNvbk9iamVjdFNpemUgPSAxNjc3NzIxNjtcbiAgICAgICAgdGhpcy5tYXhNZXNzYWdlU2l6ZUJ5dGVzID0gNDgwMDAwMDA7XG4gICAgICAgIHRoaXMubWF4V3JpdGVCYXRjaFNpemUgPSAxMDAwMDA7XG4gICAgICAgIHRoaXMubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyA9IG9wdGlvbnM/LmxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXM7XG4gICAgICAgIHRoaXMubG9hZEJhbGFuY2VkID0gISFvcHRpb25zPy5sb2FkQmFsYW5jZWQ7XG4gICAgICAgIHRoaXMuY29tcHJlc3NvcnMgPVxuICAgICAgICAgICAgb3B0aW9ucyAmJiBvcHRpb25zLmNvbXByZXNzb3JzICYmIEFycmF5LmlzQXJyYXkob3B0aW9ucy5jb21wcmVzc29ycylcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuY29tcHJlc3NvcnNcbiAgICAgICAgICAgICAgICA6IFtdO1xuICAgIH1cbiAgICByZWNlaXZlUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnR5cGUgPSAoMCwgc2VydmVyX2Rlc2NyaXB0aW9uXzEucGFyc2VTZXJ2ZXJUeXBlKShyZXNwb25zZSk7XG4gICAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgUkVTUE9OU0VfRklFTERTKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2VbZmllbGRdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzW2ZpZWxkXSA9IHJlc3BvbnNlW2ZpZWxkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRlc3RpbmcgY2FzZVxuICAgICAgICAgICAgaWYgKCdfX25vZGVqc19tb2NrX3NlcnZlcl9fJyBpbiByZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX19ub2RlanNfbW9ja19zZXJ2ZXJfXyA9IHJlc3BvbnNlWydfX25vZGVqc19tb2NrX3NlcnZlcl9fJ107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3BvbnNlLmNvbXByZXNzaW9uKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXByZXNzb3IgPSB0aGlzLmNvbXByZXNzb3JzLmZpbHRlcihjID0+IHJlc3BvbnNlLmNvbXByZXNzaW9uPy5pbmNsdWRlcyhjKSlbMF07XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLlN0cmVhbURlc2NyaXB0aW9uID0gU3RyZWFtRGVzY3JpcHRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdHJlYW1fZGVzY3JpcHRpb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiU3RyZWFtRGVzY3JpcHRpb24iLCJjb21tb25fMSIsInJlcXVpcmUiLCJzZXJ2ZXJfZGVzY3JpcHRpb25fMSIsIlJFU1BPTlNFX0ZJRUxEUyIsImNvbnN0cnVjdG9yIiwiYWRkcmVzcyIsIm9wdGlvbnMiLCJ0eXBlIiwiU2VydmVyVHlwZSIsIlVua25vd24iLCJtaW5XaXJlVmVyc2lvbiIsInVuZGVmaW5lZCIsIm1heFdpcmVWZXJzaW9uIiwibWF4QnNvbk9iamVjdFNpemUiLCJtYXhNZXNzYWdlU2l6ZUJ5dGVzIiwibWF4V3JpdGVCYXRjaFNpemUiLCJsb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzIiwibG9hZEJhbGFuY2VkIiwiY29tcHJlc3NvcnMiLCJBcnJheSIsImlzQXJyYXkiLCJyZWNlaXZlUmVzcG9uc2UiLCJyZXNwb25zZSIsInBhcnNlU2VydmVyVHlwZSIsImZpZWxkIiwiX19ub2RlanNfbW9ja19zZXJ2ZXJfXyIsImNvbXByZXNzaW9uIiwiY29tcHJlc3NvciIsImZpbHRlciIsImMiLCJpbmNsdWRlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/stream_description.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/compression.js":
/*!********************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/wire_protocol/compression.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.decompress = exports.compress = exports.uncompressibleCommands = exports.Compressor = void 0;\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst zlib = __webpack_require__(/*! zlib */ \"zlib\");\nconst constants_1 = __webpack_require__(/*! ../../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst deps_1 = __webpack_require__(/*! ../../deps */ \"(ssr)/./node_modules/mongodb/lib/deps.js\");\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/** @public */ exports.Compressor = Object.freeze({\n    none: 0,\n    snappy: 1,\n    zlib: 2,\n    zstd: 3\n});\nexports.uncompressibleCommands = new Set([\n    constants_1.LEGACY_HELLO_COMMAND,\n    \"saslStart\",\n    \"saslContinue\",\n    \"getnonce\",\n    \"authenticate\",\n    \"createUser\",\n    \"updateUser\",\n    \"copydbSaslStart\",\n    \"copydbgetnonce\",\n    \"copydb\"\n]);\nconst ZSTD_COMPRESSION_LEVEL = 3;\nconst zlibInflate = (0, util_1.promisify)(zlib.inflate.bind(zlib));\nconst zlibDeflate = (0, util_1.promisify)(zlib.deflate.bind(zlib));\nlet zstd;\nlet Snappy = null;\nfunction loadSnappy() {\n    if (Snappy == null) {\n        const snappyImport = (0, deps_1.getSnappy)();\n        if (\"kModuleError\" in snappyImport) {\n            throw snappyImport.kModuleError;\n        }\n        Snappy = snappyImport;\n    }\n    return Snappy;\n}\n// Facilitate compressing a message using an agreed compressor\nasync function compress(options, dataToBeCompressed) {\n    const zlibOptions = {};\n    switch(options.agreedCompressor){\n        case \"snappy\":\n            {\n                Snappy ?? (Snappy = loadSnappy());\n                return Snappy.compress(dataToBeCompressed);\n            }\n        case \"zstd\":\n            {\n                loadZstd();\n                if (\"kModuleError\" in zstd) {\n                    throw zstd[\"kModuleError\"];\n                }\n                return zstd.compress(dataToBeCompressed, ZSTD_COMPRESSION_LEVEL);\n            }\n        case \"zlib\":\n            {\n                if (options.zlibCompressionLevel) {\n                    zlibOptions.level = options.zlibCompressionLevel;\n                }\n                return zlibDeflate(dataToBeCompressed, zlibOptions);\n            }\n        default:\n            {\n                throw new error_1.MongoInvalidArgumentError(`Unknown compressor ${options.agreedCompressor} failed to compress`);\n            }\n    }\n}\nexports.compress = compress;\n// Decompress a message using the given compressor\nasync function decompress(compressorID, compressedData) {\n    if (compressorID !== exports.Compressor.snappy && compressorID !== exports.Compressor.zstd && compressorID !== exports.Compressor.zlib && compressorID !== exports.Compressor.none) {\n        throw new error_1.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${compressorID})`);\n    }\n    switch(compressorID){\n        case exports.Compressor.snappy:\n            {\n                Snappy ?? (Snappy = loadSnappy());\n                return Snappy.uncompress(compressedData, {\n                    asBuffer: true\n                });\n            }\n        case exports.Compressor.zstd:\n            {\n                loadZstd();\n                if (\"kModuleError\" in zstd) {\n                    throw zstd[\"kModuleError\"];\n                }\n                return zstd.decompress(compressedData);\n            }\n        case exports.Compressor.zlib:\n            {\n                return zlibInflate(compressedData);\n            }\n        default:\n            {\n                return compressedData;\n            }\n    }\n}\nexports.decompress = decompress;\n/**\n * Load ZStandard if it is not already set.\n */ function loadZstd() {\n    if (!zstd) {\n        zstd = (0, deps_1.getZstdLibrary)();\n    }\n} //# sourceMappingURL=compression.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC93aXJlX3Byb3RvY29sL2NvbXByZXNzaW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBR0EsZ0JBQWdCLEdBQUdBLDhCQUE4QixHQUFHQSxrQkFBa0IsR0FBRyxLQUFLO0FBQ25HLE1BQU1NLFNBQVNDLG1CQUFPQSxDQUFDLGtCQUFNO0FBQzdCLE1BQU1DLE9BQU9ELG1CQUFPQSxDQUFDLGtCQUFNO0FBQzNCLE1BQU1FLGNBQWNGLG1CQUFPQSxDQUFDLHNFQUFpQjtBQUM3QyxNQUFNRyxTQUFTSCxtQkFBT0EsQ0FBQyw0REFBWTtBQUNuQyxNQUFNSSxVQUFVSixtQkFBT0EsQ0FBQyw4REFBYTtBQUNyQyxZQUFZLEdBQ1pQLGtCQUFrQixHQUFHRixPQUFPYyxNQUFNLENBQUM7SUFDL0JDLE1BQU07SUFDTkMsUUFBUTtJQUNSTixNQUFNO0lBQ05PLE1BQU07QUFDVjtBQUNBZiw4QkFBOEIsR0FBRyxJQUFJZ0IsSUFBSTtJQUNyQ1AsWUFBWVEsb0JBQW9CO0lBQ2hDO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNIO0FBQ0QsTUFBTUMseUJBQXlCO0FBQy9CLE1BQU1DLGNBQWMsQ0FBQyxHQUFHYixPQUFPYyxTQUFTLEVBQUVaLEtBQUthLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDZDtBQUM1RCxNQUFNZSxjQUFjLENBQUMsR0FBR2pCLE9BQU9jLFNBQVMsRUFBRVosS0FBS2dCLE9BQU8sQ0FBQ0YsSUFBSSxDQUFDZDtBQUM1RCxJQUFJTztBQUNKLElBQUlVLFNBQVM7QUFDYixTQUFTQztJQUNMLElBQUlELFVBQVUsTUFBTTtRQUNoQixNQUFNRSxlQUFlLENBQUMsR0FBR2pCLE9BQU9rQixTQUFTO1FBQ3pDLElBQUksa0JBQWtCRCxjQUFjO1lBQ2hDLE1BQU1BLGFBQWFFLFlBQVk7UUFDbkM7UUFDQUosU0FBU0U7SUFDYjtJQUNBLE9BQU9GO0FBQ1g7QUFDQSw4REFBOEQ7QUFDOUQsZUFBZXRCLFNBQVMyQixPQUFPLEVBQUVDLGtCQUFrQjtJQUMvQyxNQUFNQyxjQUFjLENBQUM7SUFDckIsT0FBUUYsUUFBUUcsZ0JBQWdCO1FBQzVCLEtBQUs7WUFBVTtnQkFDWFIsVUFBV0EsQ0FBQUEsU0FBU0MsWUFBVztnQkFDL0IsT0FBT0QsT0FBT3RCLFFBQVEsQ0FBQzRCO1lBQzNCO1FBQ0EsS0FBSztZQUFRO2dCQUNURztnQkFDQSxJQUFJLGtCQUFrQm5CLE1BQU07b0JBQ3hCLE1BQU1BLElBQUksQ0FBQyxlQUFlO2dCQUM5QjtnQkFDQSxPQUFPQSxLQUFLWixRQUFRLENBQUM0QixvQkFBb0JiO1lBQzdDO1FBQ0EsS0FBSztZQUFRO2dCQUNULElBQUlZLFFBQVFLLG9CQUFvQixFQUFFO29CQUM5QkgsWUFBWUksS0FBSyxHQUFHTixRQUFRSyxvQkFBb0I7Z0JBQ3BEO2dCQUNBLE9BQU9aLFlBQVlRLG9CQUFvQkM7WUFDM0M7UUFDQTtZQUFTO2dCQUNMLE1BQU0sSUFBSXJCLFFBQVEwQix5QkFBeUIsQ0FBQyxDQUFDLG1CQUFtQixFQUFFUCxRQUFRRyxnQkFBZ0IsQ0FBQyxtQkFBbUIsQ0FBQztZQUNuSDtJQUNKO0FBQ0o7QUFDQWpDLGdCQUFnQixHQUFHRztBQUNuQixrREFBa0Q7QUFDbEQsZUFBZUQsV0FBV29DLFlBQVksRUFBRUMsY0FBYztJQUNsRCxJQUFJRCxpQkFBaUJ0QyxRQUFRSyxVQUFVLENBQUNTLE1BQU0sSUFDMUN3QixpQkFBaUJ0QyxRQUFRSyxVQUFVLENBQUNVLElBQUksSUFDeEN1QixpQkFBaUJ0QyxRQUFRSyxVQUFVLENBQUNHLElBQUksSUFDeEM4QixpQkFBaUJ0QyxRQUFRSyxVQUFVLENBQUNRLElBQUksRUFBRTtRQUMxQyxNQUFNLElBQUlGLFFBQVE2Qix1QkFBdUIsQ0FBQyxDQUFDLHdGQUF3RixFQUFFRixhQUFhLENBQUMsQ0FBQztJQUN4SjtJQUNBLE9BQVFBO1FBQ0osS0FBS3RDLFFBQVFLLFVBQVUsQ0FBQ1MsTUFBTTtZQUFFO2dCQUM1QlcsVUFBV0EsQ0FBQUEsU0FBU0MsWUFBVztnQkFDL0IsT0FBT0QsT0FBT2dCLFVBQVUsQ0FBQ0YsZ0JBQWdCO29CQUFFRyxVQUFVO2dCQUFLO1lBQzlEO1FBQ0EsS0FBSzFDLFFBQVFLLFVBQVUsQ0FBQ1UsSUFBSTtZQUFFO2dCQUMxQm1CO2dCQUNBLElBQUksa0JBQWtCbkIsTUFBTTtvQkFDeEIsTUFBTUEsSUFBSSxDQUFDLGVBQWU7Z0JBQzlCO2dCQUNBLE9BQU9BLEtBQUtiLFVBQVUsQ0FBQ3FDO1lBQzNCO1FBQ0EsS0FBS3ZDLFFBQVFLLFVBQVUsQ0FBQ0csSUFBSTtZQUFFO2dCQUMxQixPQUFPVyxZQUFZb0I7WUFDdkI7UUFDQTtZQUFTO2dCQUNMLE9BQU9BO1lBQ1g7SUFDSjtBQUNKO0FBQ0F2QyxrQkFBa0IsR0FBR0U7QUFDckI7O0NBRUMsR0FDRCxTQUFTZ0M7SUFDTCxJQUFJLENBQUNuQixNQUFNO1FBQ1BBLE9BQU8sQ0FBQyxHQUFHTCxPQUFPaUMsY0FBYztJQUNwQztBQUNKLEVBQ0EsdUNBQXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvd2lyZV9wcm90b2NvbC9jb21wcmVzc2lvbi5qcz85YmM2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWNvbXByZXNzID0gZXhwb3J0cy5jb21wcmVzcyA9IGV4cG9ydHMudW5jb21wcmVzc2libGVDb21tYW5kcyA9IGV4cG9ydHMuQ29tcHJlc3NvciA9IHZvaWQgMDtcbmNvbnN0IHV0aWxfMSA9IHJlcXVpcmUoXCJ1dGlsXCIpO1xuY29uc3QgemxpYiA9IHJlcXVpcmUoXCJ6bGliXCIpO1xuY29uc3QgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vLi4vY29uc3RhbnRzXCIpO1xuY29uc3QgZGVwc18xID0gcmVxdWlyZShcIi4uLy4uL2RlcHNcIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uLy4uL2Vycm9yXCIpO1xuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydHMuQ29tcHJlc3NvciA9IE9iamVjdC5mcmVlemUoe1xuICAgIG5vbmU6IDAsXG4gICAgc25hcHB5OiAxLFxuICAgIHpsaWI6IDIsXG4gICAgenN0ZDogM1xufSk7XG5leHBvcnRzLnVuY29tcHJlc3NpYmxlQ29tbWFuZHMgPSBuZXcgU2V0KFtcbiAgICBjb25zdGFudHNfMS5MRUdBQ1lfSEVMTE9fQ09NTUFORCxcbiAgICAnc2FzbFN0YXJ0JyxcbiAgICAnc2FzbENvbnRpbnVlJyxcbiAgICAnZ2V0bm9uY2UnLFxuICAgICdhdXRoZW50aWNhdGUnLFxuICAgICdjcmVhdGVVc2VyJyxcbiAgICAndXBkYXRlVXNlcicsXG4gICAgJ2NvcHlkYlNhc2xTdGFydCcsXG4gICAgJ2NvcHlkYmdldG5vbmNlJyxcbiAgICAnY29weWRiJ1xuXSk7XG5jb25zdCBaU1REX0NPTVBSRVNTSU9OX0xFVkVMID0gMztcbmNvbnN0IHpsaWJJbmZsYXRlID0gKDAsIHV0aWxfMS5wcm9taXNpZnkpKHpsaWIuaW5mbGF0ZS5iaW5kKHpsaWIpKTtcbmNvbnN0IHpsaWJEZWZsYXRlID0gKDAsIHV0aWxfMS5wcm9taXNpZnkpKHpsaWIuZGVmbGF0ZS5iaW5kKHpsaWIpKTtcbmxldCB6c3RkO1xubGV0IFNuYXBweSA9IG51bGw7XG5mdW5jdGlvbiBsb2FkU25hcHB5KCkge1xuICAgIGlmIChTbmFwcHkgPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBzbmFwcHlJbXBvcnQgPSAoMCwgZGVwc18xLmdldFNuYXBweSkoKTtcbiAgICAgICAgaWYgKCdrTW9kdWxlRXJyb3InIGluIHNuYXBweUltcG9ydCkge1xuICAgICAgICAgICAgdGhyb3cgc25hcHB5SW1wb3J0LmtNb2R1bGVFcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBTbmFwcHkgPSBzbmFwcHlJbXBvcnQ7XG4gICAgfVxuICAgIHJldHVybiBTbmFwcHk7XG59XG4vLyBGYWNpbGl0YXRlIGNvbXByZXNzaW5nIGEgbWVzc2FnZSB1c2luZyBhbiBhZ3JlZWQgY29tcHJlc3NvclxuYXN5bmMgZnVuY3Rpb24gY29tcHJlc3Mob3B0aW9ucywgZGF0YVRvQmVDb21wcmVzc2VkKSB7XG4gICAgY29uc3QgemxpYk9wdGlvbnMgPSB7fTtcbiAgICBzd2l0Y2ggKG9wdGlvbnMuYWdyZWVkQ29tcHJlc3Nvcikge1xuICAgICAgICBjYXNlICdzbmFwcHknOiB7XG4gICAgICAgICAgICBTbmFwcHkgPz8gKFNuYXBweSA9IGxvYWRTbmFwcHkoKSk7XG4gICAgICAgICAgICByZXR1cm4gU25hcHB5LmNvbXByZXNzKGRhdGFUb0JlQ29tcHJlc3NlZCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnenN0ZCc6IHtcbiAgICAgICAgICAgIGxvYWRac3RkKCk7XG4gICAgICAgICAgICBpZiAoJ2tNb2R1bGVFcnJvcicgaW4genN0ZCkge1xuICAgICAgICAgICAgICAgIHRocm93IHpzdGRbJ2tNb2R1bGVFcnJvciddO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHpzdGQuY29tcHJlc3MoZGF0YVRvQmVDb21wcmVzc2VkLCBaU1REX0NPTVBSRVNTSU9OX0xFVkVMKTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICd6bGliJzoge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuemxpYkNvbXByZXNzaW9uTGV2ZWwpIHtcbiAgICAgICAgICAgICAgICB6bGliT3B0aW9ucy5sZXZlbCA9IG9wdGlvbnMuemxpYkNvbXByZXNzaW9uTGV2ZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gemxpYkRlZmxhdGUoZGF0YVRvQmVDb21wcmVzc2VkLCB6bGliT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgVW5rbm93biBjb21wcmVzc29yICR7b3B0aW9ucy5hZ3JlZWRDb21wcmVzc29yfSBmYWlsZWQgdG8gY29tcHJlc3NgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuY29tcHJlc3MgPSBjb21wcmVzcztcbi8vIERlY29tcHJlc3MgYSBtZXNzYWdlIHVzaW5nIHRoZSBnaXZlbiBjb21wcmVzc29yXG5hc3luYyBmdW5jdGlvbiBkZWNvbXByZXNzKGNvbXByZXNzb3JJRCwgY29tcHJlc3NlZERhdGEpIHtcbiAgICBpZiAoY29tcHJlc3NvcklEICE9PSBleHBvcnRzLkNvbXByZXNzb3Iuc25hcHB5ICYmXG4gICAgICAgIGNvbXByZXNzb3JJRCAhPT0gZXhwb3J0cy5Db21wcmVzc29yLnpzdGQgJiZcbiAgICAgICAgY29tcHJlc3NvcklEICE9PSBleHBvcnRzLkNvbXByZXNzb3IuemxpYiAmJlxuICAgICAgICBjb21wcmVzc29ySUQgIT09IGV4cG9ydHMuQ29tcHJlc3Nvci5ub25lKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvRGVjb21wcmVzc2lvbkVycm9yKGBTZXJ2ZXIgc2VudCBtZXNzYWdlIGNvbXByZXNzZWQgdXNpbmcgYW4gdW5zdXBwb3J0ZWQgY29tcHJlc3Nvci4gKFJlY2VpdmVkIGNvbXByZXNzb3IgSUQgJHtjb21wcmVzc29ySUR9KWApO1xuICAgIH1cbiAgICBzd2l0Y2ggKGNvbXByZXNzb3JJRCkge1xuICAgICAgICBjYXNlIGV4cG9ydHMuQ29tcHJlc3Nvci5zbmFwcHk6IHtcbiAgICAgICAgICAgIFNuYXBweSA/PyAoU25hcHB5ID0gbG9hZFNuYXBweSgpKTtcbiAgICAgICAgICAgIHJldHVybiBTbmFwcHkudW5jb21wcmVzcyhjb21wcmVzc2VkRGF0YSwgeyBhc0J1ZmZlcjogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIGV4cG9ydHMuQ29tcHJlc3Nvci56c3RkOiB7XG4gICAgICAgICAgICBsb2FkWnN0ZCgpO1xuICAgICAgICAgICAgaWYgKCdrTW9kdWxlRXJyb3InIGluIHpzdGQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyB6c3RkWydrTW9kdWxlRXJyb3InXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB6c3RkLmRlY29tcHJlc3MoY29tcHJlc3NlZERhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgZXhwb3J0cy5Db21wcmVzc29yLnpsaWI6IHtcbiAgICAgICAgICAgIHJldHVybiB6bGliSW5mbGF0ZShjb21wcmVzc2VkRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXByZXNzZWREYXRhO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5kZWNvbXByZXNzID0gZGVjb21wcmVzcztcbi8qKlxuICogTG9hZCBaU3RhbmRhcmQgaWYgaXQgaXMgbm90IGFscmVhZHkgc2V0LlxuICovXG5mdW5jdGlvbiBsb2FkWnN0ZCgpIHtcbiAgICBpZiAoIXpzdGQpIHtcbiAgICAgICAgenN0ZCA9ICgwLCBkZXBzXzEuZ2V0WnN0ZExpYnJhcnkpKCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tcHJlc3Npb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVjb21wcmVzcyIsImNvbXByZXNzIiwidW5jb21wcmVzc2libGVDb21tYW5kcyIsIkNvbXByZXNzb3IiLCJ1dGlsXzEiLCJyZXF1aXJlIiwiemxpYiIsImNvbnN0YW50c18xIiwiZGVwc18xIiwiZXJyb3JfMSIsImZyZWV6ZSIsIm5vbmUiLCJzbmFwcHkiLCJ6c3RkIiwiU2V0IiwiTEVHQUNZX0hFTExPX0NPTU1BTkQiLCJaU1REX0NPTVBSRVNTSU9OX0xFVkVMIiwiemxpYkluZmxhdGUiLCJwcm9taXNpZnkiLCJpbmZsYXRlIiwiYmluZCIsInpsaWJEZWZsYXRlIiwiZGVmbGF0ZSIsIlNuYXBweSIsImxvYWRTbmFwcHkiLCJzbmFwcHlJbXBvcnQiLCJnZXRTbmFwcHkiLCJrTW9kdWxlRXJyb3IiLCJvcHRpb25zIiwiZGF0YVRvQmVDb21wcmVzc2VkIiwiemxpYk9wdGlvbnMiLCJhZ3JlZWRDb21wcmVzc29yIiwibG9hZFpzdGQiLCJ6bGliQ29tcHJlc3Npb25MZXZlbCIsImxldmVsIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsImNvbXByZXNzb3JJRCIsImNvbXByZXNzZWREYXRhIiwiTW9uZ29EZWNvbXByZXNzaW9uRXJyb3IiLCJ1bmNvbXByZXNzIiwiYXNCdWZmZXIiLCJnZXRac3RkTGlicmFyeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/compression.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js":
/*!******************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/wire_protocol/constants.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.OP_MSG = exports.OP_COMPRESSED = exports.OP_DELETE = exports.OP_QUERY = exports.OP_INSERT = exports.OP_UPDATE = exports.OP_REPLY = exports.MIN_SUPPORTED_QE_SERVER_VERSION = exports.MIN_SUPPORTED_QE_WIRE_VERSION = exports.MAX_SUPPORTED_WIRE_VERSION = exports.MIN_SUPPORTED_WIRE_VERSION = exports.MAX_SUPPORTED_SERVER_VERSION = exports.MIN_SUPPORTED_SERVER_VERSION = void 0;\nexports.MIN_SUPPORTED_SERVER_VERSION = \"3.6\";\nexports.MAX_SUPPORTED_SERVER_VERSION = \"7.0\";\nexports.MIN_SUPPORTED_WIRE_VERSION = 6;\nexports.MAX_SUPPORTED_WIRE_VERSION = 21;\nexports.MIN_SUPPORTED_QE_WIRE_VERSION = 21;\nexports.MIN_SUPPORTED_QE_SERVER_VERSION = \"7.0\";\nexports.OP_REPLY = 1;\nexports.OP_UPDATE = 2001;\nexports.OP_INSERT = 2002;\nexports.OP_QUERY = 2004;\nexports.OP_DELETE = 2006;\nexports.OP_COMPRESSED = 2012;\nexports.OP_MSG = 2013; //# sourceMappingURL=constants.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC93aXJlX3Byb3RvY29sL2NvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsY0FBYyxHQUFHQSxxQkFBcUIsR0FBR0EsaUJBQWlCLEdBQUdBLGdCQUFnQixHQUFHQSxpQkFBaUIsR0FBR0EsaUJBQWlCLEdBQUdBLGdCQUFnQixHQUFHQSx1Q0FBdUMsR0FBR0EscUNBQXFDLEdBQUdBLGtDQUFrQyxHQUFHQSxrQ0FBa0MsR0FBR0Esb0NBQW9DLEdBQUdBLG9DQUFvQyxHQUFHLEtBQUs7QUFDMVhBLG9DQUFvQyxHQUFHO0FBQ3ZDQSxvQ0FBb0MsR0FBRztBQUN2Q0Esa0NBQWtDLEdBQUc7QUFDckNBLGtDQUFrQyxHQUFHO0FBQ3JDQSxxQ0FBcUMsR0FBRztBQUN4Q0EsdUNBQXVDLEdBQUc7QUFDMUNBLGdCQUFnQixHQUFHO0FBQ25CQSxpQkFBaUIsR0FBRztBQUNwQkEsaUJBQWlCLEdBQUc7QUFDcEJBLGdCQUFnQixHQUFHO0FBQ25CQSxpQkFBaUIsR0FBRztBQUNwQkEscUJBQXFCLEdBQUc7QUFDeEJBLGNBQWMsR0FBRyxNQUNqQixxQ0FBcUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC93aXJlX3Byb3RvY29sL2NvbnN0YW50cy5qcz9iODkxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5PUF9NU0cgPSBleHBvcnRzLk9QX0NPTVBSRVNTRUQgPSBleHBvcnRzLk9QX0RFTEVURSA9IGV4cG9ydHMuT1BfUVVFUlkgPSBleHBvcnRzLk9QX0lOU0VSVCA9IGV4cG9ydHMuT1BfVVBEQVRFID0gZXhwb3J0cy5PUF9SRVBMWSA9IGV4cG9ydHMuTUlOX1NVUFBPUlRFRF9RRV9TRVJWRVJfVkVSU0lPTiA9IGV4cG9ydHMuTUlOX1NVUFBPUlRFRF9RRV9XSVJFX1ZFUlNJT04gPSBleHBvcnRzLk1BWF9TVVBQT1JURURfV0lSRV9WRVJTSU9OID0gZXhwb3J0cy5NSU5fU1VQUE9SVEVEX1dJUkVfVkVSU0lPTiA9IGV4cG9ydHMuTUFYX1NVUFBPUlRFRF9TRVJWRVJfVkVSU0lPTiA9IGV4cG9ydHMuTUlOX1NVUFBPUlRFRF9TRVJWRVJfVkVSU0lPTiA9IHZvaWQgMDtcbmV4cG9ydHMuTUlOX1NVUFBPUlRFRF9TRVJWRVJfVkVSU0lPTiA9ICczLjYnO1xuZXhwb3J0cy5NQVhfU1VQUE9SVEVEX1NFUlZFUl9WRVJTSU9OID0gJzcuMCc7XG5leHBvcnRzLk1JTl9TVVBQT1JURURfV0lSRV9WRVJTSU9OID0gNjtcbmV4cG9ydHMuTUFYX1NVUFBPUlRFRF9XSVJFX1ZFUlNJT04gPSAyMTtcbmV4cG9ydHMuTUlOX1NVUFBPUlRFRF9RRV9XSVJFX1ZFUlNJT04gPSAyMTtcbmV4cG9ydHMuTUlOX1NVUFBPUlRFRF9RRV9TRVJWRVJfVkVSU0lPTiA9ICc3LjAnO1xuZXhwb3J0cy5PUF9SRVBMWSA9IDE7XG5leHBvcnRzLk9QX1VQREFURSA9IDIwMDE7XG5leHBvcnRzLk9QX0lOU0VSVCA9IDIwMDI7XG5leHBvcnRzLk9QX1FVRVJZID0gMjAwNDtcbmV4cG9ydHMuT1BfREVMRVRFID0gMjAwNjtcbmV4cG9ydHMuT1BfQ09NUFJFU1NFRCA9IDIwMTI7XG5leHBvcnRzLk9QX01TRyA9IDIwMTM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25zdGFudHMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiT1BfTVNHIiwiT1BfQ09NUFJFU1NFRCIsIk9QX0RFTEVURSIsIk9QX1FVRVJZIiwiT1BfSU5TRVJUIiwiT1BfVVBEQVRFIiwiT1BfUkVQTFkiLCJNSU5fU1VQUE9SVEVEX1FFX1NFUlZFUl9WRVJTSU9OIiwiTUlOX1NVUFBPUlRFRF9RRV9XSVJFX1ZFUlNJT04iLCJNQVhfU1VQUE9SVEVEX1dJUkVfVkVSU0lPTiIsIk1JTl9TVVBQT1JURURfV0lSRV9WRVJTSU9OIiwiTUFYX1NVUFBPUlRFRF9TRVJWRVJfVkVSU0lPTiIsIk1JTl9TVVBQT1JURURfU0VSVkVSX1ZFUlNJT04iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/shared.js":
/*!***************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/wire_protocol/shared.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.isSharded = exports.getReadPreference = void 0;\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_preference_1 = __webpack_require__(/*! ../../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst common_1 = __webpack_require__(/*! ../../sdam/common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst topology_description_1 = __webpack_require__(/*! ../../sdam/topology_description */ \"(ssr)/./node_modules/mongodb/lib/sdam/topology_description.js\");\nfunction getReadPreference(options) {\n    // Default to command version of the readPreference\n    let readPreference = options?.readPreference ?? read_preference_1.ReadPreference.primary;\n    // If we have an option readPreference override the command one\n    if (options?.readPreference) {\n        readPreference = options.readPreference;\n    }\n    if (typeof readPreference === \"string\") {\n        readPreference = read_preference_1.ReadPreference.fromString(readPreference);\n    }\n    if (!(readPreference instanceof read_preference_1.ReadPreference)) {\n        throw new error_1.MongoInvalidArgumentError('Option \"readPreference\" must be a ReadPreference instance');\n    }\n    return readPreference;\n}\nexports.getReadPreference = getReadPreference;\nfunction isSharded(topologyOrServer) {\n    if (topologyOrServer == null) {\n        return false;\n    }\n    if (topologyOrServer.description && topologyOrServer.description.type === common_1.ServerType.Mongos) {\n        return true;\n    }\n    // NOTE: This is incredibly inefficient, and should be removed once command construction\n    //       happens based on `Server` not `Topology`.\n    if (topologyOrServer.description && topologyOrServer.description instanceof topology_description_1.TopologyDescription) {\n        const servers = Array.from(topologyOrServer.description.servers.values());\n        return servers.some((server)=>server.type === common_1.ServerType.Mongos);\n    }\n    return false;\n}\nexports.isSharded = isSharded; //# sourceMappingURL=shared.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC93aXJlX3Byb3RvY29sL3NoYXJlZC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsaUJBQWlCLEdBQUdBLHlCQUF5QixHQUFHLEtBQUs7QUFDckQsTUFBTUksVUFBVUMsbUJBQU9BLENBQUMsOERBQWE7QUFDckMsTUFBTUMsb0JBQW9CRCxtQkFBT0EsQ0FBQyxrRkFBdUI7QUFDekQsTUFBTUUsV0FBV0YsbUJBQU9BLENBQUMsMEVBQW1CO0FBQzVDLE1BQU1HLHlCQUF5QkgsbUJBQU9BLENBQUMsc0dBQWlDO0FBQ3hFLFNBQVNGLGtCQUFrQk0sT0FBTztJQUM5QixtREFBbUQ7SUFDbkQsSUFBSUMsaUJBQWlCRCxTQUFTQyxrQkFBa0JKLGtCQUFrQkssY0FBYyxDQUFDQyxPQUFPO0lBQ3hGLCtEQUErRDtJQUMvRCxJQUFJSCxTQUFTQyxnQkFBZ0I7UUFDekJBLGlCQUFpQkQsUUFBUUMsY0FBYztJQUMzQztJQUNBLElBQUksT0FBT0EsbUJBQW1CLFVBQVU7UUFDcENBLGlCQUFpQkosa0JBQWtCSyxjQUFjLENBQUNFLFVBQVUsQ0FBQ0g7SUFDakU7SUFDQSxJQUFJLENBQUVBLENBQUFBLDBCQUEwQkosa0JBQWtCSyxjQUFjLEdBQUc7UUFDL0QsTUFBTSxJQUFJUCxRQUFRVSx5QkFBeUIsQ0FBQztJQUNoRDtJQUNBLE9BQU9KO0FBQ1g7QUFDQVYseUJBQXlCLEdBQUdHO0FBQzVCLFNBQVNELFVBQVVhLGdCQUFnQjtJQUMvQixJQUFJQSxvQkFBb0IsTUFBTTtRQUMxQixPQUFPO0lBQ1g7SUFDQSxJQUFJQSxpQkFBaUJDLFdBQVcsSUFBSUQsaUJBQWlCQyxXQUFXLENBQUNDLElBQUksS0FBS1YsU0FBU1csVUFBVSxDQUFDQyxNQUFNLEVBQUU7UUFDbEcsT0FBTztJQUNYO0lBQ0Esd0ZBQXdGO0lBQ3hGLGtEQUFrRDtJQUNsRCxJQUFJSixpQkFBaUJDLFdBQVcsSUFBSUQsaUJBQWlCQyxXQUFXLFlBQVlSLHVCQUF1QlksbUJBQW1CLEVBQUU7UUFDcEgsTUFBTUMsVUFBVUMsTUFBTUMsSUFBSSxDQUFDUixpQkFBaUJDLFdBQVcsQ0FBQ0ssT0FBTyxDQUFDRyxNQUFNO1FBQ3RFLE9BQU9ILFFBQVFJLElBQUksQ0FBQyxDQUFDQyxTQUFXQSxPQUFPVCxJQUFJLEtBQUtWLFNBQVNXLFVBQVUsQ0FBQ0MsTUFBTTtJQUM5RTtJQUNBLE9BQU87QUFDWDtBQUNBbkIsaUJBQWlCLEdBQUdFLFdBQ3BCLGtDQUFrQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL3dpcmVfcHJvdG9jb2wvc2hhcmVkLmpzP2ZiODUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmlzU2hhcmRlZCA9IGV4cG9ydHMuZ2V0UmVhZFByZWZlcmVuY2UgPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uLy4uL2Vycm9yXCIpO1xuY29uc3QgcmVhZF9wcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi4vLi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuY29uc3QgY29tbW9uXzEgPSByZXF1aXJlKFwiLi4vLi4vc2RhbS9jb21tb25cIik7XG5jb25zdCB0b3BvbG9neV9kZXNjcmlwdGlvbl8xID0gcmVxdWlyZShcIi4uLy4uL3NkYW0vdG9wb2xvZ3lfZGVzY3JpcHRpb25cIik7XG5mdW5jdGlvbiBnZXRSZWFkUHJlZmVyZW5jZShvcHRpb25zKSB7XG4gICAgLy8gRGVmYXVsdCB0byBjb21tYW5kIHZlcnNpb24gb2YgdGhlIHJlYWRQcmVmZXJlbmNlXG4gICAgbGV0IHJlYWRQcmVmZXJlbmNlID0gb3B0aW9ucz8ucmVhZFByZWZlcmVuY2UgPz8gcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UucHJpbWFyeTtcbiAgICAvLyBJZiB3ZSBoYXZlIGFuIG9wdGlvbiByZWFkUHJlZmVyZW5jZSBvdmVycmlkZSB0aGUgY29tbWFuZCBvbmVcbiAgICBpZiAob3B0aW9ucz8ucmVhZFByZWZlcmVuY2UpIHtcbiAgICAgICAgcmVhZFByZWZlcmVuY2UgPSBvcHRpb25zLnJlYWRQcmVmZXJlbmNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHJlYWRQcmVmZXJlbmNlID09PSAnc3RyaW5nJykge1xuICAgICAgICByZWFkUHJlZmVyZW5jZSA9IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLmZyb21TdHJpbmcocmVhZFByZWZlcmVuY2UpO1xuICAgIH1cbiAgICBpZiAoIShyZWFkUHJlZmVyZW5jZSBpbnN0YW5jZW9mIHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlKSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdPcHRpb24gXCJyZWFkUHJlZmVyZW5jZVwiIG11c3QgYmUgYSBSZWFkUHJlZmVyZW5jZSBpbnN0YW5jZScpO1xuICAgIH1cbiAgICByZXR1cm4gcmVhZFByZWZlcmVuY2U7XG59XG5leHBvcnRzLmdldFJlYWRQcmVmZXJlbmNlID0gZ2V0UmVhZFByZWZlcmVuY2U7XG5mdW5jdGlvbiBpc1NoYXJkZWQodG9wb2xvZ3lPclNlcnZlcikge1xuICAgIGlmICh0b3BvbG9neU9yU2VydmVyID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAodG9wb2xvZ3lPclNlcnZlci5kZXNjcmlwdGlvbiAmJiB0b3BvbG9neU9yU2VydmVyLmRlc2NyaXB0aW9uLnR5cGUgPT09IGNvbW1vbl8xLlNlcnZlclR5cGUuTW9uZ29zKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBOT1RFOiBUaGlzIGlzIGluY3JlZGlibHkgaW5lZmZpY2llbnQsIGFuZCBzaG91bGQgYmUgcmVtb3ZlZCBvbmNlIGNvbW1hbmQgY29uc3RydWN0aW9uXG4gICAgLy8gICAgICAgaGFwcGVucyBiYXNlZCBvbiBgU2VydmVyYCBub3QgYFRvcG9sb2d5YC5cbiAgICBpZiAodG9wb2xvZ3lPclNlcnZlci5kZXNjcmlwdGlvbiAmJiB0b3BvbG9neU9yU2VydmVyLmRlc2NyaXB0aW9uIGluc3RhbmNlb2YgdG9wb2xvZ3lfZGVzY3JpcHRpb25fMS5Ub3BvbG9neURlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlcnMgPSBBcnJheS5mcm9tKHRvcG9sb2d5T3JTZXJ2ZXIuZGVzY3JpcHRpb24uc2VydmVycy52YWx1ZXMoKSk7XG4gICAgICAgIHJldHVybiBzZXJ2ZXJzLnNvbWUoKHNlcnZlcikgPT4gc2VydmVyLnR5cGUgPT09IGNvbW1vbl8xLlNlcnZlclR5cGUuTW9uZ29zKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0cy5pc1NoYXJkZWQgPSBpc1NoYXJkZWQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGFyZWQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiaXNTaGFyZGVkIiwiZ2V0UmVhZFByZWZlcmVuY2UiLCJlcnJvcl8xIiwicmVxdWlyZSIsInJlYWRfcHJlZmVyZW5jZV8xIiwiY29tbW9uXzEiLCJ0b3BvbG9neV9kZXNjcmlwdGlvbl8xIiwib3B0aW9ucyIsInJlYWRQcmVmZXJlbmNlIiwiUmVhZFByZWZlcmVuY2UiLCJwcmltYXJ5IiwiZnJvbVN0cmluZyIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJ0b3BvbG9neU9yU2VydmVyIiwiZGVzY3JpcHRpb24iLCJ0eXBlIiwiU2VydmVyVHlwZSIsIk1vbmdvcyIsIlRvcG9sb2d5RGVzY3JpcHRpb24iLCJzZXJ2ZXJzIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwic29tZSIsInNlcnZlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/shared.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/collection.js":
/*!************************************************!*\
  !*** ./node_modules/mongodb/lib/collection.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Collection = void 0;\nconst bson_1 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst ordered_1 = __webpack_require__(/*! ./bulk/ordered */ \"(ssr)/./node_modules/mongodb/lib/bulk/ordered.js\");\nconst unordered_1 = __webpack_require__(/*! ./bulk/unordered */ \"(ssr)/./node_modules/mongodb/lib/bulk/unordered.js\");\nconst change_stream_1 = __webpack_require__(/*! ./change_stream */ \"(ssr)/./node_modules/mongodb/lib/change_stream.js\");\nconst aggregation_cursor_1 = __webpack_require__(/*! ./cursor/aggregation_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/aggregation_cursor.js\");\nconst find_cursor_1 = __webpack_require__(/*! ./cursor/find_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/find_cursor.js\");\nconst list_indexes_cursor_1 = __webpack_require__(/*! ./cursor/list_indexes_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/list_indexes_cursor.js\");\nconst list_search_indexes_cursor_1 = __webpack_require__(/*! ./cursor/list_search_indexes_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/list_search_indexes_cursor.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst bulk_write_1 = __webpack_require__(/*! ./operations/bulk_write */ \"(ssr)/./node_modules/mongodb/lib/operations/bulk_write.js\");\nconst count_1 = __webpack_require__(/*! ./operations/count */ \"(ssr)/./node_modules/mongodb/lib/operations/count.js\");\nconst count_documents_1 = __webpack_require__(/*! ./operations/count_documents */ \"(ssr)/./node_modules/mongodb/lib/operations/count_documents.js\");\nconst delete_1 = __webpack_require__(/*! ./operations/delete */ \"(ssr)/./node_modules/mongodb/lib/operations/delete.js\");\nconst distinct_1 = __webpack_require__(/*! ./operations/distinct */ \"(ssr)/./node_modules/mongodb/lib/operations/distinct.js\");\nconst drop_1 = __webpack_require__(/*! ./operations/drop */ \"(ssr)/./node_modules/mongodb/lib/operations/drop.js\");\nconst estimated_document_count_1 = __webpack_require__(/*! ./operations/estimated_document_count */ \"(ssr)/./node_modules/mongodb/lib/operations/estimated_document_count.js\");\nconst execute_operation_1 = __webpack_require__(/*! ./operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst find_and_modify_1 = __webpack_require__(/*! ./operations/find_and_modify */ \"(ssr)/./node_modules/mongodb/lib/operations/find_and_modify.js\");\nconst indexes_1 = __webpack_require__(/*! ./operations/indexes */ \"(ssr)/./node_modules/mongodb/lib/operations/indexes.js\");\nconst insert_1 = __webpack_require__(/*! ./operations/insert */ \"(ssr)/./node_modules/mongodb/lib/operations/insert.js\");\nconst is_capped_1 = __webpack_require__(/*! ./operations/is_capped */ \"(ssr)/./node_modules/mongodb/lib/operations/is_capped.js\");\nconst options_operation_1 = __webpack_require__(/*! ./operations/options_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/options_operation.js\");\nconst rename_1 = __webpack_require__(/*! ./operations/rename */ \"(ssr)/./node_modules/mongodb/lib/operations/rename.js\");\nconst create_1 = __webpack_require__(/*! ./operations/search_indexes/create */ \"(ssr)/./node_modules/mongodb/lib/operations/search_indexes/create.js\");\nconst drop_2 = __webpack_require__(/*! ./operations/search_indexes/drop */ \"(ssr)/./node_modules/mongodb/lib/operations/search_indexes/drop.js\");\nconst update_1 = __webpack_require__(/*! ./operations/search_indexes/update */ \"(ssr)/./node_modules/mongodb/lib/operations/search_indexes/update.js\");\nconst stats_1 = __webpack_require__(/*! ./operations/stats */ \"(ssr)/./node_modules/mongodb/lib/operations/stats.js\");\nconst update_2 = __webpack_require__(/*! ./operations/update */ \"(ssr)/./node_modules/mongodb/lib/operations/update.js\");\nconst read_concern_1 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst write_concern_1 = __webpack_require__(/*! ./write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\n/**\n * The **Collection** class is an internal class that embodies a MongoDB collection\n * allowing for insert/find/update/delete and other command operation on that MongoDB collection.\n *\n * **COLLECTION Cannot directly be instantiated**\n * @public\n *\n * @example\n * ```ts\n * import { MongoClient } from 'mongodb';\n *\n * interface Pet {\n *   name: string;\n *   kind: 'dog' | 'cat' | 'fish';\n * }\n *\n * const client = new MongoClient('mongodb://localhost:27017');\n * const pets = client.db().collection<Pet>('pets');\n *\n * const petCursor = pets.find();\n *\n * for await (const pet of petCursor) {\n *   console.log(`${pet.name} is a ${pet.kind}!`);\n * }\n * ```\n */ class Collection {\n    /**\n     * Create a new Collection instance\n     * @internal\n     */ constructor(db, name, options){\n        (0, utils_1.checkCollectionName)(name);\n        // Internal state\n        this.s = {\n            db,\n            options,\n            namespace: new utils_1.MongoDBCollectionNamespace(db.databaseName, name),\n            pkFactory: db.options?.pkFactory ?? utils_1.DEFAULT_PK_FACTORY,\n            readPreference: read_preference_1.ReadPreference.fromOptions(options),\n            bsonOptions: (0, bson_1.resolveBSONOptions)(options, db),\n            readConcern: read_concern_1.ReadConcern.fromOptions(options),\n            writeConcern: write_concern_1.WriteConcern.fromOptions(options)\n        };\n        this.client = db.client;\n    }\n    /**\n     * The name of the database this collection belongs to\n     */ get dbName() {\n        return this.s.namespace.db;\n    }\n    /**\n     * The name of this collection\n     */ get collectionName() {\n        return this.s.namespace.collection;\n    }\n    /**\n     * The namespace of this collection, in the format `${this.dbName}.${this.collectionName}`\n     */ get namespace() {\n        return this.fullNamespace.toString();\n    }\n    /**\n     *  @internal\n     *\n     * The `MongoDBNamespace` for the collection.\n     */ get fullNamespace() {\n        return this.s.namespace;\n    }\n    /**\n     * The current readConcern of the collection. If not explicitly defined for\n     * this collection, will be inherited from the parent DB\n     */ get readConcern() {\n        if (this.s.readConcern == null) {\n            return this.s.db.readConcern;\n        }\n        return this.s.readConcern;\n    }\n    /**\n     * The current readPreference of the collection. If not explicitly defined for\n     * this collection, will be inherited from the parent DB\n     */ get readPreference() {\n        if (this.s.readPreference == null) {\n            return this.s.db.readPreference;\n        }\n        return this.s.readPreference;\n    }\n    get bsonOptions() {\n        return this.s.bsonOptions;\n    }\n    /**\n     * The current writeConcern of the collection. If not explicitly defined for\n     * this collection, will be inherited from the parent DB\n     */ get writeConcern() {\n        if (this.s.writeConcern == null) {\n            return this.s.db.writeConcern;\n        }\n        return this.s.writeConcern;\n    }\n    /** The current index hint for the collection */ get hint() {\n        return this.s.collectionHint;\n    }\n    set hint(v) {\n        this.s.collectionHint = (0, utils_1.normalizeHintField)(v);\n    }\n    /**\n     * Inserts a single document into MongoDB. If documents passed in do not contain the **_id** field,\n     * one will be added to each of the documents missing it by the driver, mutating the document. This behavior\n     * can be overridden by setting the **forceServerObjectId** flag.\n     *\n     * @param doc - The document to insert\n     * @param options - Optional settings for the command\n     */ async insertOne(doc, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new insert_1.InsertOneOperation(this, doc, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Inserts an array of documents into MongoDB. If documents passed in do not contain the **_id** field,\n     * one will be added to each of the documents missing it by the driver, mutating the document. This behavior\n     * can be overridden by setting the **forceServerObjectId** flag.\n     *\n     * @param docs - The documents to insert\n     * @param options - Optional settings for the command\n     */ async insertMany(docs, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new insert_1.InsertManyOperation(this, docs, (0, utils_1.resolveOptions)(this, options ?? {\n            ordered: true\n        })));\n    }\n    /**\n     * Perform a bulkWrite operation without a fluent API\n     *\n     * Legal operation types are\n     * - `insertOne`\n     * - `replaceOne`\n     * - `updateOne`\n     * - `updateMany`\n     * - `deleteOne`\n     * - `deleteMany`\n     *\n     * If documents passed in do not contain the **_id** field,\n     * one will be added to each of the documents missing it by the driver, mutating the document. This behavior\n     * can be overridden by setting the **forceServerObjectId** flag.\n     *\n     * @param operations - Bulk operations to perform\n     * @param options - Optional settings for the command\n     * @throws MongoDriverError if operations is not an array\n     */ async bulkWrite(operations, options) {\n        if (!Array.isArray(operations)) {\n            throw new error_1.MongoInvalidArgumentError('Argument \"operations\" must be an array of documents');\n        }\n        return (0, execute_operation_1.executeOperation)(this.client, new bulk_write_1.BulkWriteOperation(this, operations, (0, utils_1.resolveOptions)(this, options ?? {\n            ordered: true\n        })));\n    }\n    /**\n     * Update a single document in a collection\n     *\n     * @param filter - The filter used to select the document to update\n     * @param update - The update operations to be applied to the document\n     * @param options - Optional settings for the command\n     */ async updateOne(filter, update, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new update_2.UpdateOneOperation(this, filter, update, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Replace a document in a collection with another document\n     *\n     * @param filter - The filter used to select the document to replace\n     * @param replacement - The Document that replaces the matching document\n     * @param options - Optional settings for the command\n     */ async replaceOne(filter, replacement, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new update_2.ReplaceOneOperation(this, filter, replacement, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Update multiple documents in a collection\n     *\n     * @param filter - The filter used to select the documents to update\n     * @param update - The update operations to be applied to the documents\n     * @param options - Optional settings for the command\n     */ async updateMany(filter, update, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new update_2.UpdateManyOperation(this, filter, update, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Delete a document from a collection\n     *\n     * @param filter - The filter used to select the document to remove\n     * @param options - Optional settings for the command\n     */ async deleteOne(filter = {}, options = {}) {\n        return (0, execute_operation_1.executeOperation)(this.client, new delete_1.DeleteOneOperation(this, filter, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Delete multiple documents from a collection\n     *\n     * @param filter - The filter used to select the documents to remove\n     * @param options - Optional settings for the command\n     */ async deleteMany(filter = {}, options = {}) {\n        return (0, execute_operation_1.executeOperation)(this.client, new delete_1.DeleteManyOperation(this, filter, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Rename the collection.\n     *\n     * @remarks\n     * This operation does not inherit options from the Db or MongoClient.\n     *\n     * @param newName - New name of of the collection.\n     * @param options - Optional settings for the command\n     */ async rename(newName, options) {\n        // Intentionally, we do not inherit options from parent for this operation.\n        return (0, execute_operation_1.executeOperation)(this.client, new rename_1.RenameOperation(this, newName, {\n            ...options,\n            readPreference: read_preference_1.ReadPreference.PRIMARY\n        }));\n    }\n    /**\n     * Drop the collection from the database, removing it permanently. New accesses will create a new collection.\n     *\n     * @param options - Optional settings for the command\n     */ async drop(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new drop_1.DropCollectionOperation(this.s.db, this.collectionName, options));\n    }\n    async findOne(filter = {}, options = {}) {\n        return this.find(filter, options).limit(-1).batchSize(1).next();\n    }\n    find(filter = {}, options = {}) {\n        return new find_cursor_1.FindCursor(this.client, this.s.namespace, filter, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * Returns the options of the collection.\n     *\n     * @param options - Optional settings for the command\n     */ async options(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new options_operation_1.OptionsOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Returns if the collection is a capped collection\n     *\n     * @param options - Optional settings for the command\n     */ async isCapped(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new is_capped_1.IsCappedOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Creates an index on the db and collection collection.\n     *\n     * @param indexSpec - The field name or index specification to create an index for\n     * @param options - Optional settings for the command\n     *\n     * @example\n     * ```ts\n     * const collection = client.db('foo').collection('bar');\n     *\n     * await collection.createIndex({ a: 1, b: -1 });\n     *\n     * // Alternate syntax for { c: 1, d: -1 } that ensures order of indexes\n     * await collection.createIndex([ [c, 1], [d, -1] ]);\n     *\n     * // Equivalent to { e: 1 }\n     * await collection.createIndex('e');\n     *\n     * // Equivalent to { f: 1, g: 1 }\n     * await collection.createIndex(['f', 'g'])\n     *\n     * // Equivalent to { h: 1, i: -1 }\n     * await collection.createIndex([ { h: 1 }, { i: -1 } ]);\n     *\n     * // Equivalent to { j: 1, k: -1, l: 2d }\n     * await collection.createIndex(['j', ['k', -1], { l: '2d' }])\n     * ```\n     */ async createIndex(indexSpec, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.CreateIndexOperation(this, this.collectionName, indexSpec, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Creates multiple indexes in the collection, this method is only supported for\n     * MongoDB 2.6 or higher. Earlier version of MongoDB will throw a command not supported\n     * error.\n     *\n     * **Note**: Unlike {@link Collection#createIndex| createIndex}, this function takes in raw index specifications.\n     * Index specifications are defined {@link https://www.mongodb.com/docs/manual/reference/command/createIndexes/| here}.\n     *\n     * @param indexSpecs - An array of index specifications to be created\n     * @param options - Optional settings for the command\n     *\n     * @example\n     * ```ts\n     * const collection = client.db('foo').collection('bar');\n     * await collection.createIndexes([\n     *   // Simple index on field fizz\n     *   {\n     *     key: { fizz: 1 },\n     *   }\n     *   // wildcard index\n     *   {\n     *     key: { '$**': 1 }\n     *   },\n     *   // named index on darmok and jalad\n     *   {\n     *     key: { darmok: 1, jalad: -1 }\n     *     name: 'tanagra'\n     *   }\n     * ]);\n     * ```\n     */ async createIndexes(indexSpecs, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.CreateIndexesOperation(this, this.collectionName, indexSpecs, (0, utils_1.resolveOptions)(this, {\n            ...options,\n            maxTimeMS: undefined\n        })));\n    }\n    /**\n     * Drops an index from this collection.\n     *\n     * @param indexName - Name of the index to drop.\n     * @param options - Optional settings for the command\n     */ async dropIndex(indexName, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.DropIndexOperation(this, indexName, {\n            ...(0, utils_1.resolveOptions)(this, options),\n            readPreference: read_preference_1.ReadPreference.primary\n        }));\n    }\n    /**\n     * Drops all indexes from this collection.\n     *\n     * @param options - Optional settings for the command\n     */ async dropIndexes(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.DropIndexesOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Get the list of all indexes information for the collection.\n     *\n     * @param options - Optional settings for the command\n     */ listIndexes(options) {\n        return new list_indexes_cursor_1.ListIndexesCursor(this, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * Checks if one or more indexes exist on the collection, fails on first non-existing index\n     *\n     * @param indexes - One or more index names to check.\n     * @param options - Optional settings for the command\n     */ async indexExists(indexes, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.IndexExistsOperation(this, indexes, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Retrieves this collections index info.\n     *\n     * @param options - Optional settings for the command\n     */ async indexInformation(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.IndexInformationOperation(this.s.db, this.collectionName, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Gets an estimate of the count of documents in a collection using collection metadata.\n     * This will always run a count command on all server versions.\n     *\n     * due to an oversight in versions 5.0.0-5.0.8 of MongoDB, the count command,\n     * which estimatedDocumentCount uses in its implementation, was not included in v1 of\n     * the Stable API, and so users of the Stable API with estimatedDocumentCount are\n     * recommended to upgrade their server version to 5.0.9+ or set apiStrict: false to avoid\n     * encountering errors.\n     *\n     * @see {@link https://www.mongodb.com/docs/manual/reference/command/count/#behavior|Count: Behavior}\n     * @param options - Optional settings for the command\n     */ async estimatedDocumentCount(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new estimated_document_count_1.EstimatedDocumentCountOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Gets the number of documents matching the filter.\n     * For a fast count of the total documents in a collection see {@link Collection#estimatedDocumentCount| estimatedDocumentCount}.\n     * **Note**: When migrating from {@link Collection#count| count} to {@link Collection#countDocuments| countDocuments}\n     * the following query operators must be replaced:\n     *\n     * | Operator | Replacement |\n     * | -------- | ----------- |\n     * | `$where`   | [`$expr`][1] |\n     * | `$near`    | [`$geoWithin`][2] with [`$center`][3] |\n     * | `$nearSphere` | [`$geoWithin`][2] with [`$centerSphere`][4] |\n     *\n     * [1]: https://www.mongodb.com/docs/manual/reference/operator/query/expr/\n     * [2]: https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/\n     * [3]: https://www.mongodb.com/docs/manual/reference/operator/query/center/#op._S_center\n     * [4]: https://www.mongodb.com/docs/manual/reference/operator/query/centerSphere/#op._S_centerSphere\n     *\n     * @param filter - The filter for the count\n     * @param options - Optional settings for the command\n     *\n     * @see https://www.mongodb.com/docs/manual/reference/operator/query/expr/\n     * @see https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/\n     * @see https://www.mongodb.com/docs/manual/reference/operator/query/center/#op._S_center\n     * @see https://www.mongodb.com/docs/manual/reference/operator/query/centerSphere/#op._S_centerSphere\n     */ async countDocuments(filter = {}, options = {}) {\n        return (0, execute_operation_1.executeOperation)(this.client, new count_documents_1.CountDocumentsOperation(this, filter, (0, utils_1.resolveOptions)(this, options)));\n    }\n    async distinct(key, filter = {}, options = {}) {\n        return (0, execute_operation_1.executeOperation)(this.client, new distinct_1.DistinctOperation(this, key, filter, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Retrieve all the indexes on the collection.\n     *\n     * @param options - Optional settings for the command\n     */ async indexes(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.IndexesOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Get all the collection statistics.\n     *\n     * @deprecated the `collStats` operation will be removed in the next major release.  Please\n     * use an aggregation pipeline with the [`$collStats`](https://www.mongodb.com/docs/manual/reference/operator/aggregation/collStats/) stage instead\n     *\n     * @param options - Optional settings for the command\n     */ async stats(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new stats_1.CollStatsOperation(this, options));\n    }\n    async findOneAndDelete(filter, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new find_and_modify_1.FindOneAndDeleteOperation(this, filter, (0, utils_1.resolveOptions)(this, options)));\n    }\n    async findOneAndReplace(filter, replacement, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new find_and_modify_1.FindOneAndReplaceOperation(this, filter, replacement, (0, utils_1.resolveOptions)(this, options)));\n    }\n    async findOneAndUpdate(filter, update, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new find_and_modify_1.FindOneAndUpdateOperation(this, filter, update, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Execute an aggregation framework pipeline against the collection, needs MongoDB \\>= 2.2\n     *\n     * @param pipeline - An array of aggregation pipelines to execute\n     * @param options - Optional settings for the command\n     */ aggregate(pipeline = [], options) {\n        if (!Array.isArray(pipeline)) {\n            throw new error_1.MongoInvalidArgumentError('Argument \"pipeline\" must be an array of aggregation stages');\n        }\n        return new aggregation_cursor_1.AggregationCursor(this.client, this.s.namespace, pipeline, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * Create a new Change Stream, watching for new changes (insertions, updates, replacements, deletions, and invalidations) in this collection.\n     *\n     * @remarks\n     * watch() accepts two generic arguments for distinct use cases:\n     * - The first is to override the schema that may be defined for this specific collection\n     * - The second is to override the shape of the change stream document entirely, if it is not provided the type will default to ChangeStreamDocument of the first argument\n     * @example\n     * By just providing the first argument I can type the change to be `ChangeStreamDocument<{ _id: number }>`\n     * ```ts\n     * collection.watch<{ _id: number }>()\n     *   .on('change', change => console.log(change._id.toFixed(4)));\n     * ```\n     *\n     * @example\n     * Passing a second argument provides a way to reflect the type changes caused by an advanced pipeline.\n     * Here, we are using a pipeline to have MongoDB filter for insert changes only and add a comment.\n     * No need start from scratch on the ChangeStreamInsertDocument type!\n     * By using an intersection we can save time and ensure defaults remain the same type!\n     * ```ts\n     * collection\n     *   .watch<Schema, ChangeStreamInsertDocument<Schema> & { comment: string }>([\n     *     { $addFields: { comment: 'big changes' } },\n     *     { $match: { operationType: 'insert' } }\n     *   ])\n     *   .on('change', change => {\n     *     change.comment.startsWith('big');\n     *     change.operationType === 'insert';\n     *     // No need to narrow in code because the generics did that for us!\n     *     expectType<Schema>(change.fullDocument);\n     *   });\n     * ```\n     *\n     * @param pipeline - An array of {@link https://www.mongodb.com/docs/manual/reference/operator/aggregation-pipeline/|aggregation pipeline stages} through which to pass change stream documents. This allows for filtering (using $match) and manipulating the change stream documents.\n     * @param options - Optional settings for the command\n     * @typeParam TLocal - Type of the data being detected by the change stream\n     * @typeParam TChange - Type of the whole change stream document emitted\n     */ watch(pipeline = [], options = {}) {\n        // Allow optionally not specifying a pipeline\n        if (!Array.isArray(pipeline)) {\n            options = pipeline;\n            pipeline = [];\n        }\n        return new change_stream_1.ChangeStream(this, pipeline, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * Initiate an Out of order batch write operation. All operations will be buffered into insert/update/remove commands executed out of order.\n     *\n     * @throws MongoNotConnectedError\n     * @remarks\n     * **NOTE:** MongoClient must be connected prior to calling this method due to a known limitation in this legacy implementation.\n     * However, `collection.bulkWrite()` provides an equivalent API that does not require prior connecting.\n     */ initializeUnorderedBulkOp(options) {\n        return new unordered_1.UnorderedBulkOperation(this, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * Initiate an In order bulk write operation. Operations will be serially executed in the order they are added, creating a new operation for each switch in types.\n     *\n     * @throws MongoNotConnectedError\n     * @remarks\n     * **NOTE:** MongoClient must be connected prior to calling this method due to a known limitation in this legacy implementation.\n     * However, `collection.bulkWrite()` provides an equivalent API that does not require prior connecting.\n     */ initializeOrderedBulkOp(options) {\n        return new ordered_1.OrderedBulkOperation(this, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * An estimated count of matching documents in the db to a filter.\n     *\n     * **NOTE:** This method has been deprecated, since it does not provide an accurate count of the documents\n     * in a collection. To obtain an accurate count of documents in the collection, use {@link Collection#countDocuments| countDocuments}.\n     * To obtain an estimated count of all documents in the collection, use {@link Collection#estimatedDocumentCount| estimatedDocumentCount}.\n     *\n     * @deprecated use {@link Collection#countDocuments| countDocuments} or {@link Collection#estimatedDocumentCount| estimatedDocumentCount} instead\n     *\n     * @param filter - The filter for the count.\n     * @param options - Optional settings for the command\n     */ async count(filter = {}, options = {}) {\n        return (0, execute_operation_1.executeOperation)(this.client, new count_1.CountOperation(this.fullNamespace, filter, (0, utils_1.resolveOptions)(this, options)));\n    }\n    listSearchIndexes(indexNameOrOptions, options) {\n        options = typeof indexNameOrOptions === \"object\" ? indexNameOrOptions : options == null ? {} : options;\n        const indexName = indexNameOrOptions == null ? null : typeof indexNameOrOptions === \"object\" ? null : indexNameOrOptions;\n        return new list_search_indexes_cursor_1.ListSearchIndexesCursor(this, indexName, options);\n    }\n    /**\n     * Creates a single search index for the collection.\n     *\n     * @param description - The index description for the new search index.\n     * @returns A promise that resolves to the name of the new search index.\n     *\n     * @remarks Only available when used against a 7.0+ Atlas cluster.\n     */ async createSearchIndex(description) {\n        const [index] = await this.createSearchIndexes([\n            description\n        ]);\n        return index;\n    }\n    /**\n     * Creates multiple search indexes for the current collection.\n     *\n     * @param descriptions - An array of `SearchIndexDescription`s for the new search indexes.\n     * @returns A promise that resolves to an array of the newly created search index names.\n     *\n     * @remarks Only available when used against a 7.0+ Atlas cluster.\n     * @returns\n     */ async createSearchIndexes(descriptions) {\n        return (0, execute_operation_1.executeOperation)(this.client, new create_1.CreateSearchIndexesOperation(this, descriptions));\n    }\n    /**\n     * Deletes a search index by index name.\n     *\n     * @param name - The name of the search index to be deleted.\n     *\n     * @remarks Only available when used against a 7.0+ Atlas cluster.\n     */ async dropSearchIndex(name) {\n        return (0, execute_operation_1.executeOperation)(this.client, new drop_2.DropSearchIndexOperation(this, name));\n    }\n    /**\n     * Updates a search index by replacing the existing index definition with the provided definition.\n     *\n     * @param name - The name of the search index to update.\n     * @param definition - The new search index definition.\n     *\n     * @remarks Only available when used against a 7.0+ Atlas cluster.\n     */ async updateSearchIndex(name, definition) {\n        return (0, execute_operation_1.executeOperation)(this.client, new update_1.UpdateSearchIndexOperation(this, name, definition));\n    }\n}\nexports.Collection = Collection; //# sourceMappingURL=collection.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY29sbGVjdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsa0JBQWtCLEdBQUcsS0FBSztBQUMxQixNQUFNRyxTQUFTQyxtQkFBT0EsQ0FBQyx3REFBUTtBQUMvQixNQUFNQyxZQUFZRCxtQkFBT0EsQ0FBQyx3RUFBZ0I7QUFDMUMsTUFBTUUsY0FBY0YsbUJBQU9BLENBQUMsNEVBQWtCO0FBQzlDLE1BQU1HLGtCQUFrQkgsbUJBQU9BLENBQUMsMEVBQWlCO0FBQ2pELE1BQU1JLHVCQUF1QkosbUJBQU9BLENBQUMsa0dBQTZCO0FBQ2xFLE1BQU1LLGdCQUFnQkwsbUJBQU9BLENBQUMsb0ZBQXNCO0FBQ3BELE1BQU1NLHdCQUF3Qk4sbUJBQU9BLENBQUMsb0dBQThCO0FBQ3BFLE1BQU1PLCtCQUErQlAsbUJBQU9BLENBQUMsa0hBQXFDO0FBQ2xGLE1BQU1RLFVBQVVSLG1CQUFPQSxDQUFDLDBEQUFTO0FBQ2pDLE1BQU1TLGVBQWVULG1CQUFPQSxDQUFDLDBGQUF5QjtBQUN0RCxNQUFNVSxVQUFVVixtQkFBT0EsQ0FBQyxnRkFBb0I7QUFDNUMsTUFBTVcsb0JBQW9CWCxtQkFBT0EsQ0FBQyxvR0FBOEI7QUFDaEUsTUFBTVksV0FBV1osbUJBQU9BLENBQUMsa0ZBQXFCO0FBQzlDLE1BQU1hLGFBQWFiLG1CQUFPQSxDQUFDLHNGQUF1QjtBQUNsRCxNQUFNYyxTQUFTZCxtQkFBT0EsQ0FBQyw4RUFBbUI7QUFDMUMsTUFBTWUsNkJBQTZCZixtQkFBT0EsQ0FBQyxzSEFBdUM7QUFDbEYsTUFBTWdCLHNCQUFzQmhCLG1CQUFPQSxDQUFDLHdHQUFnQztBQUNwRSxNQUFNaUIsb0JBQW9CakIsbUJBQU9BLENBQUMsb0dBQThCO0FBQ2hFLE1BQU1rQixZQUFZbEIsbUJBQU9BLENBQUMsb0ZBQXNCO0FBQ2hELE1BQU1tQixXQUFXbkIsbUJBQU9BLENBQUMsa0ZBQXFCO0FBQzlDLE1BQU1vQixjQUFjcEIsbUJBQU9BLENBQUMsd0ZBQXdCO0FBQ3BELE1BQU1xQixzQkFBc0JyQixtQkFBT0EsQ0FBQyx3R0FBZ0M7QUFDcEUsTUFBTXNCLFdBQVd0QixtQkFBT0EsQ0FBQyxrRkFBcUI7QUFDOUMsTUFBTXVCLFdBQVd2QixtQkFBT0EsQ0FBQyxnSEFBb0M7QUFDN0QsTUFBTXdCLFNBQVN4QixtQkFBT0EsQ0FBQyw0R0FBa0M7QUFDekQsTUFBTXlCLFdBQVd6QixtQkFBT0EsQ0FBQyxnSEFBb0M7QUFDN0QsTUFBTTBCLFVBQVUxQixtQkFBT0EsQ0FBQyxnRkFBb0I7QUFDNUMsTUFBTTJCLFdBQVczQixtQkFBT0EsQ0FBQyxrRkFBcUI7QUFDOUMsTUFBTTRCLGlCQUFpQjVCLG1CQUFPQSxDQUFDLHdFQUFnQjtBQUMvQyxNQUFNNkIsb0JBQW9CN0IsbUJBQU9BLENBQUMsOEVBQW1CO0FBQ3JELE1BQU04QixVQUFVOUIsbUJBQU9BLENBQUMsMERBQVM7QUFDakMsTUFBTStCLGtCQUFrQi9CLG1CQUFPQSxDQUFDLDBFQUFpQjtBQUNqRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQXlCQyxHQUNELE1BQU1GO0lBQ0Y7OztLQUdDLEdBQ0RrQyxZQUFZQyxFQUFFLEVBQUVDLElBQUksRUFBRUMsT0FBTyxDQUFFO1FBQzFCLElBQUdMLFFBQVFNLG1CQUFtQixFQUFFRjtRQUNqQyxpQkFBaUI7UUFDakIsSUFBSSxDQUFDRyxDQUFDLEdBQUc7WUFDTEo7WUFDQUU7WUFDQUcsV0FBVyxJQUFJUixRQUFRUywwQkFBMEIsQ0FBQ04sR0FBR08sWUFBWSxFQUFFTjtZQUNuRU8sV0FBV1IsR0FBR0UsT0FBTyxFQUFFTSxhQUFhWCxRQUFRWSxrQkFBa0I7WUFDOURDLGdCQUFnQmQsa0JBQWtCZSxjQUFjLENBQUNDLFdBQVcsQ0FBQ1Y7WUFDN0RXLGFBQWEsQ0FBQyxHQUFHL0MsT0FBT2dELGtCQUFrQixFQUFFWixTQUFTRjtZQUNyRGUsYUFBYXBCLGVBQWVxQixXQUFXLENBQUNKLFdBQVcsQ0FBQ1Y7WUFDcERlLGNBQWNuQixnQkFBZ0JvQixZQUFZLENBQUNOLFdBQVcsQ0FBQ1Y7UUFDM0Q7UUFDQSxJQUFJLENBQUNpQixNQUFNLEdBQUduQixHQUFHbUIsTUFBTTtJQUMzQjtJQUNBOztLQUVDLEdBQ0QsSUFBSUMsU0FBUztRQUNULE9BQU8sSUFBSSxDQUFDaEIsQ0FBQyxDQUFDQyxTQUFTLENBQUNMLEVBQUU7SUFDOUI7SUFDQTs7S0FFQyxHQUNELElBQUlxQixpQkFBaUI7UUFDakIsT0FBTyxJQUFJLENBQUNqQixDQUFDLENBQUNDLFNBQVMsQ0FBQ2lCLFVBQVU7SUFDdEM7SUFDQTs7S0FFQyxHQUNELElBQUlqQixZQUFZO1FBQ1osT0FBTyxJQUFJLENBQUNrQixhQUFhLENBQUNDLFFBQVE7SUFDdEM7SUFDQTs7OztLQUlDLEdBQ0QsSUFBSUQsZ0JBQWdCO1FBQ2hCLE9BQU8sSUFBSSxDQUFDbkIsQ0FBQyxDQUFDQyxTQUFTO0lBQzNCO0lBQ0E7OztLQUdDLEdBQ0QsSUFBSVUsY0FBYztRQUNkLElBQUksSUFBSSxDQUFDWCxDQUFDLENBQUNXLFdBQVcsSUFBSSxNQUFNO1lBQzVCLE9BQU8sSUFBSSxDQUFDWCxDQUFDLENBQUNKLEVBQUUsQ0FBQ2UsV0FBVztRQUNoQztRQUNBLE9BQU8sSUFBSSxDQUFDWCxDQUFDLENBQUNXLFdBQVc7SUFDN0I7SUFDQTs7O0tBR0MsR0FDRCxJQUFJTCxpQkFBaUI7UUFDakIsSUFBSSxJQUFJLENBQUNOLENBQUMsQ0FBQ00sY0FBYyxJQUFJLE1BQU07WUFDL0IsT0FBTyxJQUFJLENBQUNOLENBQUMsQ0FBQ0osRUFBRSxDQUFDVSxjQUFjO1FBQ25DO1FBQ0EsT0FBTyxJQUFJLENBQUNOLENBQUMsQ0FBQ00sY0FBYztJQUNoQztJQUNBLElBQUlHLGNBQWM7UUFDZCxPQUFPLElBQUksQ0FBQ1QsQ0FBQyxDQUFDUyxXQUFXO0lBQzdCO0lBQ0E7OztLQUdDLEdBQ0QsSUFBSUksZUFBZTtRQUNmLElBQUksSUFBSSxDQUFDYixDQUFDLENBQUNhLFlBQVksSUFBSSxNQUFNO1lBQzdCLE9BQU8sSUFBSSxDQUFDYixDQUFDLENBQUNKLEVBQUUsQ0FBQ2lCLFlBQVk7UUFDakM7UUFDQSxPQUFPLElBQUksQ0FBQ2IsQ0FBQyxDQUFDYSxZQUFZO0lBQzlCO0lBQ0EsOENBQThDLEdBQzlDLElBQUlRLE9BQU87UUFDUCxPQUFPLElBQUksQ0FBQ3JCLENBQUMsQ0FBQ3NCLGNBQWM7SUFDaEM7SUFDQSxJQUFJRCxLQUFLRSxDQUFDLEVBQUU7UUFDUixJQUFJLENBQUN2QixDQUFDLENBQUNzQixjQUFjLEdBQUcsQ0FBQyxHQUFHN0IsUUFBUStCLGtCQUFrQixFQUFFRDtJQUM1RDtJQUNBOzs7Ozs7O0tBT0MsR0FDRCxNQUFNRSxVQUFVQyxHQUFHLEVBQUU1QixPQUFPLEVBQUU7UUFDMUIsT0FBTyxDQUFDLEdBQUduQixvQkFBb0JnRCxnQkFBZ0IsRUFBRSxJQUFJLENBQUNaLE1BQU0sRUFBRSxJQUFJakMsU0FBUzhDLGtCQUFrQixDQUFDLElBQUksRUFBRUYsS0FBSyxDQUFDLEdBQUdqQyxRQUFRb0MsY0FBYyxFQUFFLElBQUksRUFBRS9CO0lBQy9JO0lBQ0E7Ozs7Ozs7S0FPQyxHQUNELE1BQU1nQyxXQUFXQyxJQUFJLEVBQUVqQyxPQUFPLEVBQUU7UUFDNUIsT0FBTyxDQUFDLEdBQUduQixvQkFBb0JnRCxnQkFBZ0IsRUFBRSxJQUFJLENBQUNaLE1BQU0sRUFBRSxJQUFJakMsU0FBU2tELG1CQUFtQixDQUFDLElBQUksRUFBRUQsTUFBTSxDQUFDLEdBQUd0QyxRQUFRb0MsY0FBYyxFQUFFLElBQUksRUFBRS9CLFdBQVc7WUFBRW1DLFNBQVM7UUFBSztJQUM1SztJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7S0FrQkMsR0FDRCxNQUFNQyxVQUFVQyxVQUFVLEVBQUVyQyxPQUFPLEVBQUU7UUFDakMsSUFBSSxDQUFDc0MsTUFBTUMsT0FBTyxDQUFDRixhQUFhO1lBQzVCLE1BQU0sSUFBSWhFLFFBQVFtRSx5QkFBeUIsQ0FBQztRQUNoRDtRQUNBLE9BQU8sQ0FBQyxHQUFHM0Qsb0JBQW9CZ0QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWixNQUFNLEVBQUUsSUFBSTNDLGFBQWFtRSxrQkFBa0IsQ0FBQyxJQUFJLEVBQUVKLFlBQVksQ0FBQyxHQUFHMUMsUUFBUW9DLGNBQWMsRUFBRSxJQUFJLEVBQUUvQixXQUFXO1lBQUVtQyxTQUFTO1FBQUs7SUFDckw7SUFDQTs7Ozs7O0tBTUMsR0FDRCxNQUFNTyxVQUFVQyxNQUFNLEVBQUVDLE1BQU0sRUFBRTVDLE9BQU8sRUFBRTtRQUNyQyxPQUFPLENBQUMsR0FBR25CLG9CQUFvQmdELGdCQUFnQixFQUFFLElBQUksQ0FBQ1osTUFBTSxFQUFFLElBQUl6QixTQUFTcUQsa0JBQWtCLENBQUMsSUFBSSxFQUFFRixRQUFRQyxRQUFRLENBQUMsR0FBR2pELFFBQVFvQyxjQUFjLEVBQUUsSUFBSSxFQUFFL0I7SUFDMUo7SUFDQTs7Ozs7O0tBTUMsR0FDRCxNQUFNOEMsV0FBV0gsTUFBTSxFQUFFSSxXQUFXLEVBQUUvQyxPQUFPLEVBQUU7UUFDM0MsT0FBTyxDQUFDLEdBQUduQixvQkFBb0JnRCxnQkFBZ0IsRUFBRSxJQUFJLENBQUNaLE1BQU0sRUFBRSxJQUFJekIsU0FBU3dELG1CQUFtQixDQUFDLElBQUksRUFBRUwsUUFBUUksYUFBYSxDQUFDLEdBQUdwRCxRQUFRb0MsY0FBYyxFQUFFLElBQUksRUFBRS9CO0lBQ2hLO0lBQ0E7Ozs7OztLQU1DLEdBQ0QsTUFBTWlELFdBQVdOLE1BQU0sRUFBRUMsTUFBTSxFQUFFNUMsT0FBTyxFQUFFO1FBQ3RDLE9BQU8sQ0FBQyxHQUFHbkIsb0JBQW9CZ0QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWixNQUFNLEVBQUUsSUFBSXpCLFNBQVMwRCxtQkFBbUIsQ0FBQyxJQUFJLEVBQUVQLFFBQVFDLFFBQVEsQ0FBQyxHQUFHakQsUUFBUW9DLGNBQWMsRUFBRSxJQUFJLEVBQUUvQjtJQUMzSjtJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTW1ELFVBQVVSLFNBQVMsQ0FBQyxDQUFDLEVBQUUzQyxVQUFVLENBQUMsQ0FBQyxFQUFFO1FBQ3ZDLE9BQU8sQ0FBQyxHQUFHbkIsb0JBQW9CZ0QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWixNQUFNLEVBQUUsSUFBSXhDLFNBQVMyRSxrQkFBa0IsQ0FBQyxJQUFJLEVBQUVULFFBQVEsQ0FBQyxHQUFHaEQsUUFBUW9DLGNBQWMsRUFBRSxJQUFJLEVBQUUvQjtJQUNsSjtJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTXFELFdBQVdWLFNBQVMsQ0FBQyxDQUFDLEVBQUUzQyxVQUFVLENBQUMsQ0FBQyxFQUFFO1FBQ3hDLE9BQU8sQ0FBQyxHQUFHbkIsb0JBQW9CZ0QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWixNQUFNLEVBQUUsSUFBSXhDLFNBQVM2RSxtQkFBbUIsQ0FBQyxJQUFJLEVBQUVYLFFBQVEsQ0FBQyxHQUFHaEQsUUFBUW9DLGNBQWMsRUFBRSxJQUFJLEVBQUUvQjtJQUNuSjtJQUNBOzs7Ozs7OztLQVFDLEdBQ0QsTUFBTXVELE9BQU9DLE9BQU8sRUFBRXhELE9BQU8sRUFBRTtRQUMzQiwyRUFBMkU7UUFDM0UsT0FBTyxDQUFDLEdBQUduQixvQkFBb0JnRCxnQkFBZ0IsRUFBRSxJQUFJLENBQUNaLE1BQU0sRUFBRSxJQUFJOUIsU0FBU3NFLGVBQWUsQ0FBQyxJQUFJLEVBQUVELFNBQVM7WUFDdEcsR0FBR3hELE9BQU87WUFDVlEsZ0JBQWdCZCxrQkFBa0JlLGNBQWMsQ0FBQ2lELE9BQU87UUFDNUQ7SUFDSjtJQUNBOzs7O0tBSUMsR0FDRCxNQUFNQyxLQUFLM0QsT0FBTyxFQUFFO1FBQ2hCLE9BQU8sQ0FBQyxHQUFHbkIsb0JBQW9CZ0QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWixNQUFNLEVBQUUsSUFBSXRDLE9BQU9pRix1QkFBdUIsQ0FBQyxJQUFJLENBQUMxRCxDQUFDLENBQUNKLEVBQUUsRUFBRSxJQUFJLENBQUNxQixjQUFjLEVBQUVuQjtJQUNySTtJQUNBLE1BQU02RCxRQUFRbEIsU0FBUyxDQUFDLENBQUMsRUFBRTNDLFVBQVUsQ0FBQyxDQUFDLEVBQUU7UUFDckMsT0FBTyxJQUFJLENBQUM4RCxJQUFJLENBQUNuQixRQUFRM0MsU0FBUytELEtBQUssQ0FBQyxDQUFDLEdBQUdDLFNBQVMsQ0FBQyxHQUFHQyxJQUFJO0lBQ2pFO0lBQ0FILEtBQUtuQixTQUFTLENBQUMsQ0FBQyxFQUFFM0MsVUFBVSxDQUFDLENBQUMsRUFBRTtRQUM1QixPQUFPLElBQUk5QixjQUFjZ0csVUFBVSxDQUFDLElBQUksQ0FBQ2pELE1BQU0sRUFBRSxJQUFJLENBQUNmLENBQUMsQ0FBQ0MsU0FBUyxFQUFFd0MsUUFBUSxDQUFDLEdBQUdoRCxRQUFRb0MsY0FBYyxFQUFFLElBQUksRUFBRS9CO0lBQ2pIO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU1BLFFBQVFBLE9BQU8sRUFBRTtRQUNuQixPQUFPLENBQUMsR0FBR25CLG9CQUFvQmdELGdCQUFnQixFQUFFLElBQUksQ0FBQ1osTUFBTSxFQUFFLElBQUkvQixvQkFBb0JpRixnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHeEUsUUFBUW9DLGNBQWMsRUFBRSxJQUFJLEVBQUUvQjtJQUNuSjtJQUNBOzs7O0tBSUMsR0FDRCxNQUFNb0UsU0FBU3BFLE9BQU8sRUFBRTtRQUNwQixPQUFPLENBQUMsR0FBR25CLG9CQUFvQmdELGdCQUFnQixFQUFFLElBQUksQ0FBQ1osTUFBTSxFQUFFLElBQUloQyxZQUFZb0YsaUJBQWlCLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRzFFLFFBQVFvQyxjQUFjLEVBQUUsSUFBSSxFQUFFL0I7SUFDNUk7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBMkJDLEdBQ0QsTUFBTXNFLFlBQVlDLFNBQVMsRUFBRXZFLE9BQU8sRUFBRTtRQUNsQyxPQUFPLENBQUMsR0FBR25CLG9CQUFvQmdELGdCQUFnQixFQUFFLElBQUksQ0FBQ1osTUFBTSxFQUFFLElBQUlsQyxVQUFVeUYsb0JBQW9CLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQ3JELGNBQWMsRUFBRW9ELFdBQVcsQ0FBQyxHQUFHNUUsUUFBUW9DLGNBQWMsRUFBRSxJQUFJLEVBQUUvQjtJQUM3SztJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0E4QkMsR0FDRCxNQUFNeUUsY0FBY0MsVUFBVSxFQUFFMUUsT0FBTyxFQUFFO1FBQ3JDLE9BQU8sQ0FBQyxHQUFHbkIsb0JBQW9CZ0QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWixNQUFNLEVBQUUsSUFBSWxDLFVBQVU0RixzQkFBc0IsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDeEQsY0FBYyxFQUFFdUQsWUFBWSxDQUFDLEdBQUcvRSxRQUFRb0MsY0FBYyxFQUFFLElBQUksRUFBRTtZQUFFLEdBQUcvQixPQUFPO1lBQUU0RSxXQUFXQztRQUFVO0lBQ25OO0lBQ0E7Ozs7O0tBS0MsR0FDRCxNQUFNQyxVQUFVQyxTQUFTLEVBQUUvRSxPQUFPLEVBQUU7UUFDaEMsT0FBTyxDQUFDLEdBQUduQixvQkFBb0JnRCxnQkFBZ0IsRUFBRSxJQUFJLENBQUNaLE1BQU0sRUFBRSxJQUFJbEMsVUFBVWlHLGtCQUFrQixDQUFDLElBQUksRUFBRUQsV0FBVztZQUM1RyxHQUFHLENBQUMsR0FBR3BGLFFBQVFvQyxjQUFjLEVBQUUsSUFBSSxFQUFFL0IsUUFBUTtZQUM3Q1EsZ0JBQWdCZCxrQkFBa0JlLGNBQWMsQ0FBQ3dFLE9BQU87UUFDNUQ7SUFDSjtJQUNBOzs7O0tBSUMsR0FDRCxNQUFNQyxZQUFZbEYsT0FBTyxFQUFFO1FBQ3ZCLE9BQU8sQ0FBQyxHQUFHbkIsb0JBQW9CZ0QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWixNQUFNLEVBQUUsSUFBSWxDLFVBQVVvRyxvQkFBb0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHeEYsUUFBUW9DLGNBQWMsRUFBRSxJQUFJLEVBQUUvQjtJQUM3STtJQUNBOzs7O0tBSUMsR0FDRG9GLFlBQVlwRixPQUFPLEVBQUU7UUFDakIsT0FBTyxJQUFJN0Isc0JBQXNCa0gsaUJBQWlCLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRzFGLFFBQVFvQyxjQUFjLEVBQUUsSUFBSSxFQUFFL0I7SUFDL0Y7SUFDQTs7Ozs7S0FLQyxHQUNELE1BQU1zRixZQUFZQyxPQUFPLEVBQUV2RixPQUFPLEVBQUU7UUFDaEMsT0FBTyxDQUFDLEdBQUduQixvQkFBb0JnRCxnQkFBZ0IsRUFBRSxJQUFJLENBQUNaLE1BQU0sRUFBRSxJQUFJbEMsVUFBVXlHLG9CQUFvQixDQUFDLElBQUksRUFBRUQsU0FBUyxDQUFDLEdBQUc1RixRQUFRb0MsY0FBYyxFQUFFLElBQUksRUFBRS9CO0lBQ3RKO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU15RixpQkFBaUJ6RixPQUFPLEVBQUU7UUFDNUIsT0FBTyxDQUFDLEdBQUduQixvQkFBb0JnRCxnQkFBZ0IsRUFBRSxJQUFJLENBQUNaLE1BQU0sRUFBRSxJQUFJbEMsVUFBVTJHLHlCQUF5QixDQUFDLElBQUksQ0FBQ3hGLENBQUMsQ0FBQ0osRUFBRSxFQUFFLElBQUksQ0FBQ3FCLGNBQWMsRUFBRSxDQUFDLEdBQUd4QixRQUFRb0MsY0FBYyxFQUFFLElBQUksRUFBRS9CO0lBQzVLO0lBQ0E7Ozs7Ozs7Ozs7OztLQVlDLEdBQ0QsTUFBTTJGLHVCQUF1QjNGLE9BQU8sRUFBRTtRQUNsQyxPQUFPLENBQUMsR0FBR25CLG9CQUFvQmdELGdCQUFnQixFQUFFLElBQUksQ0FBQ1osTUFBTSxFQUFFLElBQUlyQywyQkFBMkJnSCwrQkFBK0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHakcsUUFBUW9DLGNBQWMsRUFBRSxJQUFJLEVBQUUvQjtJQUN6SztJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0F3QkMsR0FDRCxNQUFNNkYsZUFBZWxELFNBQVMsQ0FBQyxDQUFDLEVBQUUzQyxVQUFVLENBQUMsQ0FBQyxFQUFFO1FBQzVDLE9BQU8sQ0FBQyxHQUFHbkIsb0JBQW9CZ0QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWixNQUFNLEVBQUUsSUFBSXpDLGtCQUFrQnNILHVCQUF1QixDQUFDLElBQUksRUFBRW5ELFFBQVEsQ0FBQyxHQUFHaEQsUUFBUW9DLGNBQWMsRUFBRSxJQUFJLEVBQUUvQjtJQUNoSztJQUNBLE1BQU0rRixTQUFTQyxHQUFHLEVBQUVyRCxTQUFTLENBQUMsQ0FBQyxFQUFFM0MsVUFBVSxDQUFDLENBQUMsRUFBRTtRQUMzQyxPQUFPLENBQUMsR0FBR25CLG9CQUFvQmdELGdCQUFnQixFQUFFLElBQUksQ0FBQ1osTUFBTSxFQUFFLElBQUl2QyxXQUFXdUgsaUJBQWlCLENBQUMsSUFBSSxFQUFFRCxLQUFLckQsUUFBUSxDQUFDLEdBQUdoRCxRQUFRb0MsY0FBYyxFQUFFLElBQUksRUFBRS9CO0lBQ3hKO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU11RixRQUFRdkYsT0FBTyxFQUFFO1FBQ25CLE9BQU8sQ0FBQyxHQUFHbkIsb0JBQW9CZ0QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWixNQUFNLEVBQUUsSUFBSWxDLFVBQVVtSCxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHdkcsUUFBUW9DLGNBQWMsRUFBRSxJQUFJLEVBQUUvQjtJQUN6STtJQUNBOzs7Ozs7O0tBT0MsR0FDRCxNQUFNbUcsTUFBTW5HLE9BQU8sRUFBRTtRQUNqQixPQUFPLENBQUMsR0FBR25CLG9CQUFvQmdELGdCQUFnQixFQUFFLElBQUksQ0FBQ1osTUFBTSxFQUFFLElBQUkxQixRQUFRNkcsa0JBQWtCLENBQUMsSUFBSSxFQUFFcEc7SUFDdkc7SUFDQSxNQUFNcUcsaUJBQWlCMUQsTUFBTSxFQUFFM0MsT0FBTyxFQUFFO1FBQ3BDLE9BQU8sQ0FBQyxHQUFHbkIsb0JBQW9CZ0QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWixNQUFNLEVBQUUsSUFBSW5DLGtCQUFrQndILHlCQUF5QixDQUFDLElBQUksRUFBRTNELFFBQVEsQ0FBQyxHQUFHaEQsUUFBUW9DLGNBQWMsRUFBRSxJQUFJLEVBQUUvQjtJQUNsSztJQUNBLE1BQU11RyxrQkFBa0I1RCxNQUFNLEVBQUVJLFdBQVcsRUFBRS9DLE9BQU8sRUFBRTtRQUNsRCxPQUFPLENBQUMsR0FBR25CLG9CQUFvQmdELGdCQUFnQixFQUFFLElBQUksQ0FBQ1osTUFBTSxFQUFFLElBQUluQyxrQkFBa0IwSCwwQkFBMEIsQ0FBQyxJQUFJLEVBQUU3RCxRQUFRSSxhQUFhLENBQUMsR0FBR3BELFFBQVFvQyxjQUFjLEVBQUUsSUFBSSxFQUFFL0I7SUFDaEw7SUFDQSxNQUFNeUcsaUJBQWlCOUQsTUFBTSxFQUFFQyxNQUFNLEVBQUU1QyxPQUFPLEVBQUU7UUFDNUMsT0FBTyxDQUFDLEdBQUduQixvQkFBb0JnRCxnQkFBZ0IsRUFBRSxJQUFJLENBQUNaLE1BQU0sRUFBRSxJQUFJbkMsa0JBQWtCNEgseUJBQXlCLENBQUMsSUFBSSxFQUFFL0QsUUFBUUMsUUFBUSxDQUFDLEdBQUdqRCxRQUFRb0MsY0FBYyxFQUFFLElBQUksRUFBRS9CO0lBQzFLO0lBQ0E7Ozs7O0tBS0MsR0FDRDJHLFVBQVVDLFdBQVcsRUFBRSxFQUFFNUcsT0FBTyxFQUFFO1FBQzlCLElBQUksQ0FBQ3NDLE1BQU1DLE9BQU8sQ0FBQ3FFLFdBQVc7WUFDMUIsTUFBTSxJQUFJdkksUUFBUW1FLHlCQUF5QixDQUFDO1FBQ2hEO1FBQ0EsT0FBTyxJQUFJdkUscUJBQXFCNEksaUJBQWlCLENBQUMsSUFBSSxDQUFDNUYsTUFBTSxFQUFFLElBQUksQ0FBQ2YsQ0FBQyxDQUFDQyxTQUFTLEVBQUV5RyxVQUFVLENBQUMsR0FBR2pILFFBQVFvQyxjQUFjLEVBQUUsSUFBSSxFQUFFL0I7SUFDakk7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztLQXFDQyxHQUNEOEcsTUFBTUYsV0FBVyxFQUFFLEVBQUU1RyxVQUFVLENBQUMsQ0FBQyxFQUFFO1FBQy9CLDZDQUE2QztRQUM3QyxJQUFJLENBQUNzQyxNQUFNQyxPQUFPLENBQUNxRSxXQUFXO1lBQzFCNUcsVUFBVTRHO1lBQ1ZBLFdBQVcsRUFBRTtRQUNqQjtRQUNBLE9BQU8sSUFBSTVJLGdCQUFnQitJLFlBQVksQ0FBQyxJQUFJLEVBQUVILFVBQVUsQ0FBQyxHQUFHakgsUUFBUW9DLGNBQWMsRUFBRSxJQUFJLEVBQUUvQjtJQUM5RjtJQUNBOzs7Ozs7O0tBT0MsR0FDRGdILDBCQUEwQmhILE9BQU8sRUFBRTtRQUMvQixPQUFPLElBQUlqQyxZQUFZa0osc0JBQXNCLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBR3RILFFBQVFvQyxjQUFjLEVBQUUsSUFBSSxFQUFFL0I7SUFDMUY7SUFDQTs7Ozs7OztLQU9DLEdBQ0RrSCx3QkFBd0JsSCxPQUFPLEVBQUU7UUFDN0IsT0FBTyxJQUFJbEMsVUFBVXFKLG9CQUFvQixDQUFDLElBQUksRUFBRSxDQUFDLEdBQUd4SCxRQUFRb0MsY0FBYyxFQUFFLElBQUksRUFBRS9CO0lBQ3RGO0lBQ0E7Ozs7Ozs7Ozs7O0tBV0MsR0FDRCxNQUFNb0gsTUFBTXpFLFNBQVMsQ0FBQyxDQUFDLEVBQUUzQyxVQUFVLENBQUMsQ0FBQyxFQUFFO1FBQ25DLE9BQU8sQ0FBQyxHQUFHbkIsb0JBQW9CZ0QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWixNQUFNLEVBQUUsSUFBSTFDLFFBQVE4SSxjQUFjLENBQUMsSUFBSSxDQUFDaEcsYUFBYSxFQUFFc0IsUUFBUSxDQUFDLEdBQUdoRCxRQUFRb0MsY0FBYyxFQUFFLElBQUksRUFBRS9CO0lBQzNKO0lBQ0FzSCxrQkFBa0JDLGtCQUFrQixFQUFFdkgsT0FBTyxFQUFFO1FBQzNDQSxVQUNJLE9BQU91SCx1QkFBdUIsV0FBV0EscUJBQXFCdkgsV0FBVyxPQUFPLENBQUMsSUFBSUE7UUFDekYsTUFBTStFLFlBQVl3QyxzQkFBc0IsT0FDbEMsT0FDQSxPQUFPQSx1QkFBdUIsV0FDMUIsT0FDQUE7UUFDVixPQUFPLElBQUluSiw2QkFBNkJvSix1QkFBdUIsQ0FBQyxJQUFJLEVBQUV6QyxXQUFXL0U7SUFDckY7SUFDQTs7Ozs7OztLQU9DLEdBQ0QsTUFBTXlILGtCQUFrQkMsV0FBVyxFQUFFO1FBQ2pDLE1BQU0sQ0FBQ0MsTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDQyxtQkFBbUIsQ0FBQztZQUFDRjtTQUFZO1FBQzVELE9BQU9DO0lBQ1g7SUFDQTs7Ozs7Ozs7S0FRQyxHQUNELE1BQU1DLG9CQUFvQkMsWUFBWSxFQUFFO1FBQ3BDLE9BQU8sQ0FBQyxHQUFHaEosb0JBQW9CZ0QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWixNQUFNLEVBQUUsSUFBSTdCLFNBQVMwSSw0QkFBNEIsQ0FBQyxJQUFJLEVBQUVEO0lBQ2xIO0lBQ0E7Ozs7OztLQU1DLEdBQ0QsTUFBTUUsZ0JBQWdCaEksSUFBSSxFQUFFO1FBQ3hCLE9BQU8sQ0FBQyxHQUFHbEIsb0JBQW9CZ0QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWixNQUFNLEVBQUUsSUFBSTVCLE9BQU8ySSx3QkFBd0IsQ0FBQyxJQUFJLEVBQUVqSTtJQUM1RztJQUNBOzs7Ozs7O0tBT0MsR0FDRCxNQUFNa0ksa0JBQWtCbEksSUFBSSxFQUFFbUksVUFBVSxFQUFFO1FBQ3RDLE9BQU8sQ0FBQyxHQUFHckosb0JBQW9CZ0QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWixNQUFNLEVBQUUsSUFBSTNCLFNBQVM2SSwwQkFBMEIsQ0FBQyxJQUFJLEVBQUVwSSxNQUFNbUk7SUFDdEg7QUFDSjtBQUNBekssa0JBQWtCLEdBQUdFLFlBQ3JCLHNDQUFzQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jb2xsZWN0aW9uLmpzPzYzNTkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNvbGxlY3Rpb24gPSB2b2lkIDA7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi9ic29uXCIpO1xuY29uc3Qgb3JkZXJlZF8xID0gcmVxdWlyZShcIi4vYnVsay9vcmRlcmVkXCIpO1xuY29uc3QgdW5vcmRlcmVkXzEgPSByZXF1aXJlKFwiLi9idWxrL3Vub3JkZXJlZFwiKTtcbmNvbnN0IGNoYW5nZV9zdHJlYW1fMSA9IHJlcXVpcmUoXCIuL2NoYW5nZV9zdHJlYW1cIik7XG5jb25zdCBhZ2dyZWdhdGlvbl9jdXJzb3JfMSA9IHJlcXVpcmUoXCIuL2N1cnNvci9hZ2dyZWdhdGlvbl9jdXJzb3JcIik7XG5jb25zdCBmaW5kX2N1cnNvcl8xID0gcmVxdWlyZShcIi4vY3Vyc29yL2ZpbmRfY3Vyc29yXCIpO1xuY29uc3QgbGlzdF9pbmRleGVzX2N1cnNvcl8xID0gcmVxdWlyZShcIi4vY3Vyc29yL2xpc3RfaW5kZXhlc19jdXJzb3JcIik7XG5jb25zdCBsaXN0X3NlYXJjaF9pbmRleGVzX2N1cnNvcl8xID0gcmVxdWlyZShcIi4vY3Vyc29yL2xpc3Rfc2VhcmNoX2luZGV4ZXNfY3Vyc29yXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuL2Vycm9yXCIpO1xuY29uc3QgYnVsa193cml0ZV8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9idWxrX3dyaXRlXCIpO1xuY29uc3QgY291bnRfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvY291bnRcIik7XG5jb25zdCBjb3VudF9kb2N1bWVudHNfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvY291bnRfZG9jdW1lbnRzXCIpO1xuY29uc3QgZGVsZXRlXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2RlbGV0ZVwiKTtcbmNvbnN0IGRpc3RpbmN0XzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2Rpc3RpbmN0XCIpO1xuY29uc3QgZHJvcF8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9kcm9wXCIpO1xuY29uc3QgZXN0aW1hdGVkX2RvY3VtZW50X2NvdW50XzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2VzdGltYXRlZF9kb2N1bWVudF9jb3VudFwiKTtcbmNvbnN0IGV4ZWN1dGVfb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2V4ZWN1dGVfb3BlcmF0aW9uXCIpO1xuY29uc3QgZmluZF9hbmRfbW9kaWZ5XzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2ZpbmRfYW5kX21vZGlmeVwiKTtcbmNvbnN0IGluZGV4ZXNfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvaW5kZXhlc1wiKTtcbmNvbnN0IGluc2VydF8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9pbnNlcnRcIik7XG5jb25zdCBpc19jYXBwZWRfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvaXNfY2FwcGVkXCIpO1xuY29uc3Qgb3B0aW9uc19vcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvb3B0aW9uc19vcGVyYXRpb25cIik7XG5jb25zdCByZW5hbWVfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvcmVuYW1lXCIpO1xuY29uc3QgY3JlYXRlXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL3NlYXJjaF9pbmRleGVzL2NyZWF0ZVwiKTtcbmNvbnN0IGRyb3BfMiA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvc2VhcmNoX2luZGV4ZXMvZHJvcFwiKTtcbmNvbnN0IHVwZGF0ZV8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9zZWFyY2hfaW5kZXhlcy91cGRhdGVcIik7XG5jb25zdCBzdGF0c18xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9zdGF0c1wiKTtcbmNvbnN0IHVwZGF0ZV8yID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy91cGRhdGVcIik7XG5jb25zdCByZWFkX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuL3JlYWRfY29uY2VyblwiKTtcbmNvbnN0IHJlYWRfcHJlZmVyZW5jZV8xID0gcmVxdWlyZShcIi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuY29uc3Qgd3JpdGVfY29uY2Vybl8xID0gcmVxdWlyZShcIi4vd3JpdGVfY29uY2VyblwiKTtcbi8qKlxuICogVGhlICoqQ29sbGVjdGlvbioqIGNsYXNzIGlzIGFuIGludGVybmFsIGNsYXNzIHRoYXQgZW1ib2RpZXMgYSBNb25nb0RCIGNvbGxlY3Rpb25cbiAqIGFsbG93aW5nIGZvciBpbnNlcnQvZmluZC91cGRhdGUvZGVsZXRlIGFuZCBvdGhlciBjb21tYW5kIG9wZXJhdGlvbiBvbiB0aGF0IE1vbmdvREIgY29sbGVjdGlvbi5cbiAqXG4gKiAqKkNPTExFQ1RJT04gQ2Fubm90IGRpcmVjdGx5IGJlIGluc3RhbnRpYXRlZCoqXG4gKiBAcHVibGljXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBNb25nb0NsaWVudCB9IGZyb20gJ21vbmdvZGInO1xuICpcbiAqIGludGVyZmFjZSBQZXQge1xuICogICBuYW1lOiBzdHJpbmc7XG4gKiAgIGtpbmQ6ICdkb2cnIHwgJ2NhdCcgfCAnZmlzaCc7XG4gKiB9XG4gKlxuICogY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KCdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3Jyk7XG4gKiBjb25zdCBwZXRzID0gY2xpZW50LmRiKCkuY29sbGVjdGlvbjxQZXQ+KCdwZXRzJyk7XG4gKlxuICogY29uc3QgcGV0Q3Vyc29yID0gcGV0cy5maW5kKCk7XG4gKlxuICogZm9yIGF3YWl0IChjb25zdCBwZXQgb2YgcGV0Q3Vyc29yKSB7XG4gKiAgIGNvbnNvbGUubG9nKGAke3BldC5uYW1lfSBpcyBhICR7cGV0LmtpbmR9IWApO1xuICogfVxuICogYGBgXG4gKi9cbmNsYXNzIENvbGxlY3Rpb24ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBDb2xsZWN0aW9uIGluc3RhbmNlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGIsIG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgKDAsIHV0aWxzXzEuY2hlY2tDb2xsZWN0aW9uTmFtZSkobmFtZSk7XG4gICAgICAgIC8vIEludGVybmFsIHN0YXRlXG4gICAgICAgIHRoaXMucyA9IHtcbiAgICAgICAgICAgIGRiLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG5hbWVzcGFjZTogbmV3IHV0aWxzXzEuTW9uZ29EQkNvbGxlY3Rpb25OYW1lc3BhY2UoZGIuZGF0YWJhc2VOYW1lLCBuYW1lKSxcbiAgICAgICAgICAgIHBrRmFjdG9yeTogZGIub3B0aW9ucz8ucGtGYWN0b3J5ID8/IHV0aWxzXzEuREVGQVVMVF9QS19GQUNUT1JZLFxuICAgICAgICAgICAgcmVhZFByZWZlcmVuY2U6IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLmZyb21PcHRpb25zKG9wdGlvbnMpLFxuICAgICAgICAgICAgYnNvbk9wdGlvbnM6ICgwLCBic29uXzEucmVzb2x2ZUJTT05PcHRpb25zKShvcHRpb25zLCBkYiksXG4gICAgICAgICAgICByZWFkQ29uY2VybjogcmVhZF9jb25jZXJuXzEuUmVhZENvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucyksXG4gICAgICAgICAgICB3cml0ZUNvbmNlcm46IHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucylcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jbGllbnQgPSBkYi5jbGllbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBkYXRhYmFzZSB0aGlzIGNvbGxlY3Rpb24gYmVsb25ncyB0b1xuICAgICAqL1xuICAgIGdldCBkYk5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMubmFtZXNwYWNlLmRiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGlzIGNvbGxlY3Rpb25cbiAgICAgKi9cbiAgICBnZXQgY29sbGVjdGlvbk5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMubmFtZXNwYWNlLmNvbGxlY3Rpb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lc3BhY2Ugb2YgdGhpcyBjb2xsZWN0aW9uLCBpbiB0aGUgZm9ybWF0IGAke3RoaXMuZGJOYW1lfS4ke3RoaXMuY29sbGVjdGlvbk5hbWV9YFxuICAgICAqL1xuICAgIGdldCBuYW1lc3BhY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZ1bGxOYW1lc3BhY2UudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogIEBpbnRlcm5hbFxuICAgICAqXG4gICAgICogVGhlIGBNb25nb0RCTmFtZXNwYWNlYCBmb3IgdGhlIGNvbGxlY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IGZ1bGxOYW1lc3BhY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMubmFtZXNwYWNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCByZWFkQ29uY2VybiBvZiB0aGUgY29sbGVjdGlvbi4gSWYgbm90IGV4cGxpY2l0bHkgZGVmaW5lZCBmb3JcbiAgICAgKiB0aGlzIGNvbGxlY3Rpb24sIHdpbGwgYmUgaW5oZXJpdGVkIGZyb20gdGhlIHBhcmVudCBEQlxuICAgICAqL1xuICAgIGdldCByZWFkQ29uY2VybigpIHtcbiAgICAgICAgaWYgKHRoaXMucy5yZWFkQ29uY2VybiA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zLmRiLnJlYWRDb25jZXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnMucmVhZENvbmNlcm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHJlYWRQcmVmZXJlbmNlIG9mIHRoZSBjb2xsZWN0aW9uLiBJZiBub3QgZXhwbGljaXRseSBkZWZpbmVkIGZvclxuICAgICAqIHRoaXMgY29sbGVjdGlvbiwgd2lsbCBiZSBpbmhlcml0ZWQgZnJvbSB0aGUgcGFyZW50IERCXG4gICAgICovXG4gICAgZ2V0IHJlYWRQcmVmZXJlbmNlKCkge1xuICAgICAgICBpZiAodGhpcy5zLnJlYWRQcmVmZXJlbmNlID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnMuZGIucmVhZFByZWZlcmVuY2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucy5yZWFkUHJlZmVyZW5jZTtcbiAgICB9XG4gICAgZ2V0IGJzb25PcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLmJzb25PcHRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCB3cml0ZUNvbmNlcm4gb2YgdGhlIGNvbGxlY3Rpb24uIElmIG5vdCBleHBsaWNpdGx5IGRlZmluZWQgZm9yXG4gICAgICogdGhpcyBjb2xsZWN0aW9uLCB3aWxsIGJlIGluaGVyaXRlZCBmcm9tIHRoZSBwYXJlbnQgREJcbiAgICAgKi9cbiAgICBnZXQgd3JpdGVDb25jZXJuKCkge1xuICAgICAgICBpZiAodGhpcy5zLndyaXRlQ29uY2VybiA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zLmRiLndyaXRlQ29uY2VybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zLndyaXRlQ29uY2VybjtcbiAgICB9XG4gICAgLyoqIFRoZSBjdXJyZW50IGluZGV4IGhpbnQgZm9yIHRoZSBjb2xsZWN0aW9uICovXG4gICAgZ2V0IGhpbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMuY29sbGVjdGlvbkhpbnQ7XG4gICAgfVxuICAgIHNldCBoaW50KHYpIHtcbiAgICAgICAgdGhpcy5zLmNvbGxlY3Rpb25IaW50ID0gKDAsIHV0aWxzXzEubm9ybWFsaXplSGludEZpZWxkKSh2KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5zZXJ0cyBhIHNpbmdsZSBkb2N1bWVudCBpbnRvIE1vbmdvREIuIElmIGRvY3VtZW50cyBwYXNzZWQgaW4gZG8gbm90IGNvbnRhaW4gdGhlICoqX2lkKiogZmllbGQsXG4gICAgICogb25lIHdpbGwgYmUgYWRkZWQgdG8gZWFjaCBvZiB0aGUgZG9jdW1lbnRzIG1pc3NpbmcgaXQgYnkgdGhlIGRyaXZlciwgbXV0YXRpbmcgdGhlIGRvY3VtZW50LiBUaGlzIGJlaGF2aW9yXG4gICAgICogY2FuIGJlIG92ZXJyaWRkZW4gYnkgc2V0dGluZyB0aGUgKipmb3JjZVNlcnZlck9iamVjdElkKiogZmxhZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2MgLSBUaGUgZG9jdW1lbnQgdG8gaW5zZXJ0XG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBpbnNlcnRPbmUoZG9jLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGluc2VydF8xLkluc2VydE9uZU9wZXJhdGlvbih0aGlzLCBkb2MsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIGFuIGFycmF5IG9mIGRvY3VtZW50cyBpbnRvIE1vbmdvREIuIElmIGRvY3VtZW50cyBwYXNzZWQgaW4gZG8gbm90IGNvbnRhaW4gdGhlICoqX2lkKiogZmllbGQsXG4gICAgICogb25lIHdpbGwgYmUgYWRkZWQgdG8gZWFjaCBvZiB0aGUgZG9jdW1lbnRzIG1pc3NpbmcgaXQgYnkgdGhlIGRyaXZlciwgbXV0YXRpbmcgdGhlIGRvY3VtZW50LiBUaGlzIGJlaGF2aW9yXG4gICAgICogY2FuIGJlIG92ZXJyaWRkZW4gYnkgc2V0dGluZyB0aGUgKipmb3JjZVNlcnZlck9iamVjdElkKiogZmxhZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2NzIC0gVGhlIGRvY3VtZW50cyB0byBpbnNlcnRcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIGluc2VydE1hbnkoZG9jcywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBpbnNlcnRfMS5JbnNlcnRNYW55T3BlcmF0aW9uKHRoaXMsIGRvY3MsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zID8/IHsgb3JkZXJlZDogdHJ1ZSB9KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGEgYnVsa1dyaXRlIG9wZXJhdGlvbiB3aXRob3V0IGEgZmx1ZW50IEFQSVxuICAgICAqXG4gICAgICogTGVnYWwgb3BlcmF0aW9uIHR5cGVzIGFyZVxuICAgICAqIC0gYGluc2VydE9uZWBcbiAgICAgKiAtIGByZXBsYWNlT25lYFxuICAgICAqIC0gYHVwZGF0ZU9uZWBcbiAgICAgKiAtIGB1cGRhdGVNYW55YFxuICAgICAqIC0gYGRlbGV0ZU9uZWBcbiAgICAgKiAtIGBkZWxldGVNYW55YFxuICAgICAqXG4gICAgICogSWYgZG9jdW1lbnRzIHBhc3NlZCBpbiBkbyBub3QgY29udGFpbiB0aGUgKipfaWQqKiBmaWVsZCxcbiAgICAgKiBvbmUgd2lsbCBiZSBhZGRlZCB0byBlYWNoIG9mIHRoZSBkb2N1bWVudHMgbWlzc2luZyBpdCBieSB0aGUgZHJpdmVyLCBtdXRhdGluZyB0aGUgZG9jdW1lbnQuIFRoaXMgYmVoYXZpb3JcbiAgICAgKiBjYW4gYmUgb3ZlcnJpZGRlbiBieSBzZXR0aW5nIHRoZSAqKmZvcmNlU2VydmVyT2JqZWN0SWQqKiBmbGFnLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wZXJhdGlvbnMgLSBCdWxrIG9wZXJhdGlvbnMgdG8gcGVyZm9ybVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICogQHRocm93cyBNb25nb0RyaXZlckVycm9yIGlmIG9wZXJhdGlvbnMgaXMgbm90IGFuIGFycmF5XG4gICAgICovXG4gICAgYXN5bmMgYnVsa1dyaXRlKG9wZXJhdGlvbnMsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9wZXJhdGlvbnMpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdBcmd1bWVudCBcIm9wZXJhdGlvbnNcIiBtdXN0IGJlIGFuIGFycmF5IG9mIGRvY3VtZW50cycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGJ1bGtfd3JpdGVfMS5CdWxrV3JpdGVPcGVyYXRpb24odGhpcywgb3BlcmF0aW9ucywgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMgPz8geyBvcmRlcmVkOiB0cnVlIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBhIHNpbmdsZSBkb2N1bWVudCBpbiBhIGNvbGxlY3Rpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWx0ZXIgLSBUaGUgZmlsdGVyIHVzZWQgdG8gc2VsZWN0IHRoZSBkb2N1bWVudCB0byB1cGRhdGVcbiAgICAgKiBAcGFyYW0gdXBkYXRlIC0gVGhlIHVwZGF0ZSBvcGVyYXRpb25zIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGRvY3VtZW50XG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyB1cGRhdGVPbmUoZmlsdGVyLCB1cGRhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgdXBkYXRlXzIuVXBkYXRlT25lT3BlcmF0aW9uKHRoaXMsIGZpbHRlciwgdXBkYXRlLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVwbGFjZSBhIGRvY3VtZW50IGluIGEgY29sbGVjdGlvbiB3aXRoIGFub3RoZXIgZG9jdW1lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWx0ZXIgLSBUaGUgZmlsdGVyIHVzZWQgdG8gc2VsZWN0IHRoZSBkb2N1bWVudCB0byByZXBsYWNlXG4gICAgICogQHBhcmFtIHJlcGxhY2VtZW50IC0gVGhlIERvY3VtZW50IHRoYXQgcmVwbGFjZXMgdGhlIG1hdGNoaW5nIGRvY3VtZW50XG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyByZXBsYWNlT25lKGZpbHRlciwgcmVwbGFjZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgdXBkYXRlXzIuUmVwbGFjZU9uZU9wZXJhdGlvbih0aGlzLCBmaWx0ZXIsIHJlcGxhY2VtZW50LCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIG11bHRpcGxlIGRvY3VtZW50cyBpbiBhIGNvbGxlY3Rpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWx0ZXIgLSBUaGUgZmlsdGVyIHVzZWQgdG8gc2VsZWN0IHRoZSBkb2N1bWVudHMgdG8gdXBkYXRlXG4gICAgICogQHBhcmFtIHVwZGF0ZSAtIFRoZSB1cGRhdGUgb3BlcmF0aW9ucyB0byBiZSBhcHBsaWVkIHRvIHRoZSBkb2N1bWVudHNcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIHVwZGF0ZU1hbnkoZmlsdGVyLCB1cGRhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgdXBkYXRlXzIuVXBkYXRlTWFueU9wZXJhdGlvbih0aGlzLCBmaWx0ZXIsIHVwZGF0ZSwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhIGRvY3VtZW50IGZyb20gYSBjb2xsZWN0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmlsdGVyIC0gVGhlIGZpbHRlciB1c2VkIHRvIHNlbGVjdCB0aGUgZG9jdW1lbnQgdG8gcmVtb3ZlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBkZWxldGVPbmUoZmlsdGVyID0ge30sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBkZWxldGVfMS5EZWxldGVPbmVPcGVyYXRpb24odGhpcywgZmlsdGVyLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIG11bHRpcGxlIGRvY3VtZW50cyBmcm9tIGEgY29sbGVjdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbHRlciAtIFRoZSBmaWx0ZXIgdXNlZCB0byBzZWxlY3QgdGhlIGRvY3VtZW50cyB0byByZW1vdmVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIGRlbGV0ZU1hbnkoZmlsdGVyID0ge30sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBkZWxldGVfMS5EZWxldGVNYW55T3BlcmF0aW9uKHRoaXMsIGZpbHRlciwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbmFtZSB0aGUgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBvcGVyYXRpb24gZG9lcyBub3QgaW5oZXJpdCBvcHRpb25zIGZyb20gdGhlIERiIG9yIE1vbmdvQ2xpZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIG5ld05hbWUgLSBOZXcgbmFtZSBvZiBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIHJlbmFtZShuZXdOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIC8vIEludGVudGlvbmFsbHksIHdlIGRvIG5vdCBpbmhlcml0IG9wdGlvbnMgZnJvbSBwYXJlbnQgZm9yIHRoaXMgb3BlcmF0aW9uLlxuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyByZW5hbWVfMS5SZW5hbWVPcGVyYXRpb24odGhpcywgbmV3TmFtZSwge1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIHJlYWRQcmVmZXJlbmNlOiByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5QUklNQVJZXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRHJvcCB0aGUgY29sbGVjdGlvbiBmcm9tIHRoZSBkYXRhYmFzZSwgcmVtb3ZpbmcgaXQgcGVybWFuZW50bHkuIE5ldyBhY2Nlc3NlcyB3aWxsIGNyZWF0ZSBhIG5ldyBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBkcm9wKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgZHJvcF8xLkRyb3BDb2xsZWN0aW9uT3BlcmF0aW9uKHRoaXMucy5kYiwgdGhpcy5jb2xsZWN0aW9uTmFtZSwgb3B0aW9ucykpO1xuICAgIH1cbiAgICBhc3luYyBmaW5kT25lKGZpbHRlciA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZChmaWx0ZXIsIG9wdGlvbnMpLmxpbWl0KC0xKS5iYXRjaFNpemUoMSkubmV4dCgpO1xuICAgIH1cbiAgICBmaW5kKGZpbHRlciA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBmaW5kX2N1cnNvcl8xLkZpbmRDdXJzb3IodGhpcy5jbGllbnQsIHRoaXMucy5uYW1lc3BhY2UsIGZpbHRlciwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgb3B0aW9ucyBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgb3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IG9wdGlvbnNfb3BlcmF0aW9uXzEuT3B0aW9uc09wZXJhdGlvbih0aGlzLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBpZiB0aGUgY29sbGVjdGlvbiBpcyBhIGNhcHBlZCBjb2xsZWN0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIGlzQ2FwcGVkKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgaXNfY2FwcGVkXzEuSXNDYXBwZWRPcGVyYXRpb24odGhpcywgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5kZXggb24gdGhlIGRiIGFuZCBjb2xsZWN0aW9uIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5kZXhTcGVjIC0gVGhlIGZpZWxkIG5hbWUgb3IgaW5kZXggc3BlY2lmaWNhdGlvbiB0byBjcmVhdGUgYW4gaW5kZXggZm9yXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiBjb25zdCBjb2xsZWN0aW9uID0gY2xpZW50LmRiKCdmb28nKS5jb2xsZWN0aW9uKCdiYXInKTtcbiAgICAgKlxuICAgICAqIGF3YWl0IGNvbGxlY3Rpb24uY3JlYXRlSW5kZXgoeyBhOiAxLCBiOiAtMSB9KTtcbiAgICAgKlxuICAgICAqIC8vIEFsdGVybmF0ZSBzeW50YXggZm9yIHsgYzogMSwgZDogLTEgfSB0aGF0IGVuc3VyZXMgb3JkZXIgb2YgaW5kZXhlc1xuICAgICAqIGF3YWl0IGNvbGxlY3Rpb24uY3JlYXRlSW5kZXgoWyBbYywgMV0sIFtkLCAtMV0gXSk7XG4gICAgICpcbiAgICAgKiAvLyBFcXVpdmFsZW50IHRvIHsgZTogMSB9XG4gICAgICogYXdhaXQgY29sbGVjdGlvbi5jcmVhdGVJbmRleCgnZScpO1xuICAgICAqXG4gICAgICogLy8gRXF1aXZhbGVudCB0byB7IGY6IDEsIGc6IDEgfVxuICAgICAqIGF3YWl0IGNvbGxlY3Rpb24uY3JlYXRlSW5kZXgoWydmJywgJ2cnXSlcbiAgICAgKlxuICAgICAqIC8vIEVxdWl2YWxlbnQgdG8geyBoOiAxLCBpOiAtMSB9XG4gICAgICogYXdhaXQgY29sbGVjdGlvbi5jcmVhdGVJbmRleChbIHsgaDogMSB9LCB7IGk6IC0xIH0gXSk7XG4gICAgICpcbiAgICAgKiAvLyBFcXVpdmFsZW50IHRvIHsgajogMSwgazogLTEsIGw6IDJkIH1cbiAgICAgKiBhd2FpdCBjb2xsZWN0aW9uLmNyZWF0ZUluZGV4KFsnaicsIFsnaycsIC0xXSwgeyBsOiAnMmQnIH1dKVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZUluZGV4KGluZGV4U3BlYywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBpbmRleGVzXzEuQ3JlYXRlSW5kZXhPcGVyYXRpb24odGhpcywgdGhpcy5jb2xsZWN0aW9uTmFtZSwgaW5kZXhTcGVjLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBtdWx0aXBsZSBpbmRleGVzIGluIHRoZSBjb2xsZWN0aW9uLCB0aGlzIG1ldGhvZCBpcyBvbmx5IHN1cHBvcnRlZCBmb3JcbiAgICAgKiBNb25nb0RCIDIuNiBvciBoaWdoZXIuIEVhcmxpZXIgdmVyc2lvbiBvZiBNb25nb0RCIHdpbGwgdGhyb3cgYSBjb21tYW5kIG5vdCBzdXBwb3J0ZWRcbiAgICAgKiBlcnJvci5cbiAgICAgKlxuICAgICAqICoqTm90ZSoqOiBVbmxpa2Uge0BsaW5rIENvbGxlY3Rpb24jY3JlYXRlSW5kZXh8IGNyZWF0ZUluZGV4fSwgdGhpcyBmdW5jdGlvbiB0YWtlcyBpbiByYXcgaW5kZXggc3BlY2lmaWNhdGlvbnMuXG4gICAgICogSW5kZXggc3BlY2lmaWNhdGlvbnMgYXJlIGRlZmluZWQge0BsaW5rIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9jb21tYW5kL2NyZWF0ZUluZGV4ZXMvfCBoZXJlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmRleFNwZWNzIC0gQW4gYXJyYXkgb2YgaW5kZXggc3BlY2lmaWNhdGlvbnMgdG8gYmUgY3JlYXRlZFxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzXG4gICAgICogY29uc3QgY29sbGVjdGlvbiA9IGNsaWVudC5kYignZm9vJykuY29sbGVjdGlvbignYmFyJyk7XG4gICAgICogYXdhaXQgY29sbGVjdGlvbi5jcmVhdGVJbmRleGVzKFtcbiAgICAgKiAgIC8vIFNpbXBsZSBpbmRleCBvbiBmaWVsZCBmaXp6XG4gICAgICogICB7XG4gICAgICogICAgIGtleTogeyBmaXp6OiAxIH0sXG4gICAgICogICB9XG4gICAgICogICAvLyB3aWxkY2FyZCBpbmRleFxuICAgICAqICAge1xuICAgICAqICAgICBrZXk6IHsgJyQqKic6IDEgfVxuICAgICAqICAgfSxcbiAgICAgKiAgIC8vIG5hbWVkIGluZGV4IG9uIGRhcm1vayBhbmQgamFsYWRcbiAgICAgKiAgIHtcbiAgICAgKiAgICAga2V5OiB7IGRhcm1vazogMSwgamFsYWQ6IC0xIH1cbiAgICAgKiAgICAgbmFtZTogJ3RhbmFncmEnXG4gICAgICogICB9XG4gICAgICogXSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlSW5kZXhlcyhpbmRleFNwZWNzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGluZGV4ZXNfMS5DcmVhdGVJbmRleGVzT3BlcmF0aW9uKHRoaXMsIHRoaXMuY29sbGVjdGlvbk5hbWUsIGluZGV4U3BlY3MsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCB7IC4uLm9wdGlvbnMsIG1heFRpbWVNUzogdW5kZWZpbmVkIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyb3BzIGFuIGluZGV4IGZyb20gdGhpcyBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGluZGV4TmFtZSAtIE5hbWUgb2YgdGhlIGluZGV4IHRvIGRyb3AuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBkcm9wSW5kZXgoaW5kZXhOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGluZGV4ZXNfMS5Ecm9wSW5kZXhPcGVyYXRpb24odGhpcywgaW5kZXhOYW1lLCB7XG4gICAgICAgICAgICAuLi4oMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucyksXG4gICAgICAgICAgICByZWFkUHJlZmVyZW5jZTogcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UucHJpbWFyeVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyb3BzIGFsbCBpbmRleGVzIGZyb20gdGhpcyBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBkcm9wSW5kZXhlcyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGluZGV4ZXNfMS5Ecm9wSW5kZXhlc09wZXJhdGlvbih0aGlzLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIGFsbCBpbmRleGVzIGluZm9ybWF0aW9uIGZvciB0aGUgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgbGlzdEluZGV4ZXMob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IGxpc3RfaW5kZXhlc19jdXJzb3JfMS5MaXN0SW5kZXhlc0N1cnNvcih0aGlzLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgb25lIG9yIG1vcmUgaW5kZXhlcyBleGlzdCBvbiB0aGUgY29sbGVjdGlvbiwgZmFpbHMgb24gZmlyc3Qgbm9uLWV4aXN0aW5nIGluZGV4XG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5kZXhlcyAtIE9uZSBvciBtb3JlIGluZGV4IG5hbWVzIHRvIGNoZWNrLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgaW5kZXhFeGlzdHMoaW5kZXhlcywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBpbmRleGVzXzEuSW5kZXhFeGlzdHNPcGVyYXRpb24odGhpcywgaW5kZXhlcywgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGlzIGNvbGxlY3Rpb25zIGluZGV4IGluZm8uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIGluZGV4SW5mb3JtYXRpb24ob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBpbmRleGVzXzEuSW5kZXhJbmZvcm1hdGlvbk9wZXJhdGlvbih0aGlzLnMuZGIsIHRoaXMuY29sbGVjdGlvbk5hbWUsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGFuIGVzdGltYXRlIG9mIHRoZSBjb3VudCBvZiBkb2N1bWVudHMgaW4gYSBjb2xsZWN0aW9uIHVzaW5nIGNvbGxlY3Rpb24gbWV0YWRhdGEuXG4gICAgICogVGhpcyB3aWxsIGFsd2F5cyBydW4gYSBjb3VudCBjb21tYW5kIG9uIGFsbCBzZXJ2ZXIgdmVyc2lvbnMuXG4gICAgICpcbiAgICAgKiBkdWUgdG8gYW4gb3ZlcnNpZ2h0IGluIHZlcnNpb25zIDUuMC4wLTUuMC44IG9mIE1vbmdvREIsIHRoZSBjb3VudCBjb21tYW5kLFxuICAgICAqIHdoaWNoIGVzdGltYXRlZERvY3VtZW50Q291bnQgdXNlcyBpbiBpdHMgaW1wbGVtZW50YXRpb24sIHdhcyBub3QgaW5jbHVkZWQgaW4gdjEgb2ZcbiAgICAgKiB0aGUgU3RhYmxlIEFQSSwgYW5kIHNvIHVzZXJzIG9mIHRoZSBTdGFibGUgQVBJIHdpdGggZXN0aW1hdGVkRG9jdW1lbnRDb3VudCBhcmVcbiAgICAgKiByZWNvbW1lbmRlZCB0byB1cGdyYWRlIHRoZWlyIHNlcnZlciB2ZXJzaW9uIHRvIDUuMC45KyBvciBzZXQgYXBpU3RyaWN0OiBmYWxzZSB0byBhdm9pZFxuICAgICAqIGVuY291bnRlcmluZyBlcnJvcnMuXG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kb2NzL21hbnVhbC9yZWZlcmVuY2UvY29tbWFuZC9jb3VudC8jYmVoYXZpb3J8Q291bnQ6IEJlaGF2aW9yfVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgZXN0aW1hdGVkRG9jdW1lbnRDb3VudChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGVzdGltYXRlZF9kb2N1bWVudF9jb3VudF8xLkVzdGltYXRlZERvY3VtZW50Q291bnRPcGVyYXRpb24odGhpcywgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIGZpbHRlci5cbiAgICAgKiBGb3IgYSBmYXN0IGNvdW50IG9mIHRoZSB0b3RhbCBkb2N1bWVudHMgaW4gYSBjb2xsZWN0aW9uIHNlZSB7QGxpbmsgQ29sbGVjdGlvbiNlc3RpbWF0ZWREb2N1bWVudENvdW50fCBlc3RpbWF0ZWREb2N1bWVudENvdW50fS5cbiAgICAgKiAqKk5vdGUqKjogV2hlbiBtaWdyYXRpbmcgZnJvbSB7QGxpbmsgQ29sbGVjdGlvbiNjb3VudHwgY291bnR9IHRvIHtAbGluayBDb2xsZWN0aW9uI2NvdW50RG9jdW1lbnRzfCBjb3VudERvY3VtZW50c31cbiAgICAgKiB0aGUgZm9sbG93aW5nIHF1ZXJ5IG9wZXJhdG9ycyBtdXN0IGJlIHJlcGxhY2VkOlxuICAgICAqXG4gICAgICogfCBPcGVyYXRvciB8IFJlcGxhY2VtZW50IHxcbiAgICAgKiB8IC0tLS0tLS0tIHwgLS0tLS0tLS0tLS0gfFxuICAgICAqIHwgYCR3aGVyZWAgICB8IFtgJGV4cHJgXVsxXSB8XG4gICAgICogfCBgJG5lYXJgICAgIHwgW2AkZ2VvV2l0aGluYF1bMl0gd2l0aCBbYCRjZW50ZXJgXVszXSB8XG4gICAgICogfCBgJG5lYXJTcGhlcmVgIHwgW2AkZ2VvV2l0aGluYF1bMl0gd2l0aCBbYCRjZW50ZXJTcGhlcmVgXVs0XSB8XG4gICAgICpcbiAgICAgKiBbMV06IGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9vcGVyYXRvci9xdWVyeS9leHByL1xuICAgICAqIFsyXTogaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL29wZXJhdG9yL3F1ZXJ5L2dlb1dpdGhpbi9cbiAgICAgKiBbM106IGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9vcGVyYXRvci9xdWVyeS9jZW50ZXIvI29wLl9TX2NlbnRlclxuICAgICAqIFs0XTogaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL29wZXJhdG9yL3F1ZXJ5L2NlbnRlclNwaGVyZS8jb3AuX1NfY2VudGVyU3BoZXJlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmlsdGVyIC0gVGhlIGZpbHRlciBmb3IgdGhlIGNvdW50XG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKlxuICAgICAqIEBzZWUgaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL29wZXJhdG9yL3F1ZXJ5L2V4cHIvXG4gICAgICogQHNlZSBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kb2NzL21hbnVhbC9yZWZlcmVuY2Uvb3BlcmF0b3IvcXVlcnkvZ2VvV2l0aGluL1xuICAgICAqIEBzZWUgaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL29wZXJhdG9yL3F1ZXJ5L2NlbnRlci8jb3AuX1NfY2VudGVyXG4gICAgICogQHNlZSBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kb2NzL21hbnVhbC9yZWZlcmVuY2Uvb3BlcmF0b3IvcXVlcnkvY2VudGVyU3BoZXJlLyNvcC5fU19jZW50ZXJTcGhlcmVcbiAgICAgKi9cbiAgICBhc3luYyBjb3VudERvY3VtZW50cyhmaWx0ZXIgPSB7fSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGNvdW50X2RvY3VtZW50c18xLkNvdW50RG9jdW1lbnRzT3BlcmF0aW9uKHRoaXMsIGZpbHRlciwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGRpc3RpbmN0KGtleSwgZmlsdGVyID0ge30sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBkaXN0aW5jdF8xLkRpc3RpbmN0T3BlcmF0aW9uKHRoaXMsIGtleSwgZmlsdGVyLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgYWxsIHRoZSBpbmRleGVzIG9uIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBpbmRleGVzKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgaW5kZXhlc18xLkluZGV4ZXNPcGVyYXRpb24odGhpcywgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgdGhlIGNvbGxlY3Rpb24gc3RhdGlzdGljcy5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIHRoZSBgY29sbFN0YXRzYCBvcGVyYXRpb24gd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuICBQbGVhc2VcbiAgICAgKiB1c2UgYW4gYWdncmVnYXRpb24gcGlwZWxpbmUgd2l0aCB0aGUgW2AkY29sbFN0YXRzYF0oaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL29wZXJhdG9yL2FnZ3JlZ2F0aW9uL2NvbGxTdGF0cy8pIHN0YWdlIGluc3RlYWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgc3RhdHMob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBzdGF0c18xLkNvbGxTdGF0c09wZXJhdGlvbih0aGlzLCBvcHRpb25zKSk7XG4gICAgfVxuICAgIGFzeW5jIGZpbmRPbmVBbmREZWxldGUoZmlsdGVyLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGZpbmRfYW5kX21vZGlmeV8xLkZpbmRPbmVBbmREZWxldGVPcGVyYXRpb24odGhpcywgZmlsdGVyLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgYXN5bmMgZmluZE9uZUFuZFJlcGxhY2UoZmlsdGVyLCByZXBsYWNlbWVudCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBmaW5kX2FuZF9tb2RpZnlfMS5GaW5kT25lQW5kUmVwbGFjZU9wZXJhdGlvbih0aGlzLCBmaWx0ZXIsIHJlcGxhY2VtZW50LCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgYXN5bmMgZmluZE9uZUFuZFVwZGF0ZShmaWx0ZXIsIHVwZGF0ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBmaW5kX2FuZF9tb2RpZnlfMS5GaW5kT25lQW5kVXBkYXRlT3BlcmF0aW9uKHRoaXMsIGZpbHRlciwgdXBkYXRlLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSBhbiBhZ2dyZWdhdGlvbiBmcmFtZXdvcmsgcGlwZWxpbmUgYWdhaW5zdCB0aGUgY29sbGVjdGlvbiwgbmVlZHMgTW9uZ29EQiBcXD49IDIuMlxuICAgICAqXG4gICAgICogQHBhcmFtIHBpcGVsaW5lIC0gQW4gYXJyYXkgb2YgYWdncmVnYXRpb24gcGlwZWxpbmVzIHRvIGV4ZWN1dGVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFnZ3JlZ2F0ZShwaXBlbGluZSA9IFtdLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwaXBlbGluZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0FyZ3VtZW50IFwicGlwZWxpbmVcIiBtdXN0IGJlIGFuIGFycmF5IG9mIGFnZ3JlZ2F0aW9uIHN0YWdlcycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgYWdncmVnYXRpb25fY3Vyc29yXzEuQWdncmVnYXRpb25DdXJzb3IodGhpcy5jbGllbnQsIHRoaXMucy5uYW1lc3BhY2UsIHBpcGVsaW5lLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgQ2hhbmdlIFN0cmVhbSwgd2F0Y2hpbmcgZm9yIG5ldyBjaGFuZ2VzIChpbnNlcnRpb25zLCB1cGRhdGVzLCByZXBsYWNlbWVudHMsIGRlbGV0aW9ucywgYW5kIGludmFsaWRhdGlvbnMpIGluIHRoaXMgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogd2F0Y2goKSBhY2NlcHRzIHR3byBnZW5lcmljIGFyZ3VtZW50cyBmb3IgZGlzdGluY3QgdXNlIGNhc2VzOlxuICAgICAqIC0gVGhlIGZpcnN0IGlzIHRvIG92ZXJyaWRlIHRoZSBzY2hlbWEgdGhhdCBtYXkgYmUgZGVmaW5lZCBmb3IgdGhpcyBzcGVjaWZpYyBjb2xsZWN0aW9uXG4gICAgICogLSBUaGUgc2Vjb25kIGlzIHRvIG92ZXJyaWRlIHRoZSBzaGFwZSBvZiB0aGUgY2hhbmdlIHN0cmVhbSBkb2N1bWVudCBlbnRpcmVseSwgaWYgaXQgaXMgbm90IHByb3ZpZGVkIHRoZSB0eXBlIHdpbGwgZGVmYXVsdCB0byBDaGFuZ2VTdHJlYW1Eb2N1bWVudCBvZiB0aGUgZmlyc3QgYXJndW1lbnRcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIEJ5IGp1c3QgcHJvdmlkaW5nIHRoZSBmaXJzdCBhcmd1bWVudCBJIGNhbiB0eXBlIHRoZSBjaGFuZ2UgdG8gYmUgYENoYW5nZVN0cmVhbURvY3VtZW50PHsgX2lkOiBudW1iZXIgfT5gXG4gICAgICogYGBgdHNcbiAgICAgKiBjb2xsZWN0aW9uLndhdGNoPHsgX2lkOiBudW1iZXIgfT4oKVxuICAgICAqICAgLm9uKCdjaGFuZ2UnLCBjaGFuZ2UgPT4gY29uc29sZS5sb2coY2hhbmdlLl9pZC50b0ZpeGVkKDQpKSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIFBhc3NpbmcgYSBzZWNvbmQgYXJndW1lbnQgcHJvdmlkZXMgYSB3YXkgdG8gcmVmbGVjdCB0aGUgdHlwZSBjaGFuZ2VzIGNhdXNlZCBieSBhbiBhZHZhbmNlZCBwaXBlbGluZS5cbiAgICAgKiBIZXJlLCB3ZSBhcmUgdXNpbmcgYSBwaXBlbGluZSB0byBoYXZlIE1vbmdvREIgZmlsdGVyIGZvciBpbnNlcnQgY2hhbmdlcyBvbmx5IGFuZCBhZGQgYSBjb21tZW50LlxuICAgICAqIE5vIG5lZWQgc3RhcnQgZnJvbSBzY3JhdGNoIG9uIHRoZSBDaGFuZ2VTdHJlYW1JbnNlcnREb2N1bWVudCB0eXBlIVxuICAgICAqIEJ5IHVzaW5nIGFuIGludGVyc2VjdGlvbiB3ZSBjYW4gc2F2ZSB0aW1lIGFuZCBlbnN1cmUgZGVmYXVsdHMgcmVtYWluIHRoZSBzYW1lIHR5cGUhXG4gICAgICogYGBgdHNcbiAgICAgKiBjb2xsZWN0aW9uXG4gICAgICogICAud2F0Y2g8U2NoZW1hLCBDaGFuZ2VTdHJlYW1JbnNlcnREb2N1bWVudDxTY2hlbWE+ICYgeyBjb21tZW50OiBzdHJpbmcgfT4oW1xuICAgICAqICAgICB7ICRhZGRGaWVsZHM6IHsgY29tbWVudDogJ2JpZyBjaGFuZ2VzJyB9IH0sXG4gICAgICogICAgIHsgJG1hdGNoOiB7IG9wZXJhdGlvblR5cGU6ICdpbnNlcnQnIH0gfVxuICAgICAqICAgXSlcbiAgICAgKiAgIC5vbignY2hhbmdlJywgY2hhbmdlID0+IHtcbiAgICAgKiAgICAgY2hhbmdlLmNvbW1lbnQuc3RhcnRzV2l0aCgnYmlnJyk7XG4gICAgICogICAgIGNoYW5nZS5vcGVyYXRpb25UeXBlID09PSAnaW5zZXJ0JztcbiAgICAgKiAgICAgLy8gTm8gbmVlZCB0byBuYXJyb3cgaW4gY29kZSBiZWNhdXNlIHRoZSBnZW5lcmljcyBkaWQgdGhhdCBmb3IgdXMhXG4gICAgICogICAgIGV4cGVjdFR5cGU8U2NoZW1hPihjaGFuZ2UuZnVsbERvY3VtZW50KTtcbiAgICAgKiAgIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHBpcGVsaW5lIC0gQW4gYXJyYXkgb2Yge0BsaW5rIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9vcGVyYXRvci9hZ2dyZWdhdGlvbi1waXBlbGluZS98YWdncmVnYXRpb24gcGlwZWxpbmUgc3RhZ2VzfSB0aHJvdWdoIHdoaWNoIHRvIHBhc3MgY2hhbmdlIHN0cmVhbSBkb2N1bWVudHMuIFRoaXMgYWxsb3dzIGZvciBmaWx0ZXJpbmcgKHVzaW5nICRtYXRjaCkgYW5kIG1hbmlwdWxhdGluZyB0aGUgY2hhbmdlIHN0cmVhbSBkb2N1bWVudHMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKiBAdHlwZVBhcmFtIFRMb2NhbCAtIFR5cGUgb2YgdGhlIGRhdGEgYmVpbmcgZGV0ZWN0ZWQgYnkgdGhlIGNoYW5nZSBzdHJlYW1cbiAgICAgKiBAdHlwZVBhcmFtIFRDaGFuZ2UgLSBUeXBlIG9mIHRoZSB3aG9sZSBjaGFuZ2Ugc3RyZWFtIGRvY3VtZW50IGVtaXR0ZWRcbiAgICAgKi9cbiAgICB3YXRjaChwaXBlbGluZSA9IFtdLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgLy8gQWxsb3cgb3B0aW9uYWxseSBub3Qgc3BlY2lmeWluZyBhIHBpcGVsaW5lXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwaXBlbGluZSkpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBwaXBlbGluZTtcbiAgICAgICAgICAgIHBpcGVsaW5lID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBjaGFuZ2Vfc3RyZWFtXzEuQ2hhbmdlU3RyZWFtKHRoaXMsIHBpcGVsaW5lLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbml0aWF0ZSBhbiBPdXQgb2Ygb3JkZXIgYmF0Y2ggd3JpdGUgb3BlcmF0aW9uLiBBbGwgb3BlcmF0aW9ucyB3aWxsIGJlIGJ1ZmZlcmVkIGludG8gaW5zZXJ0L3VwZGF0ZS9yZW1vdmUgY29tbWFuZHMgZXhlY3V0ZWQgb3V0IG9mIG9yZGVyLlxuICAgICAqXG4gICAgICogQHRocm93cyBNb25nb05vdENvbm5lY3RlZEVycm9yXG4gICAgICogQHJlbWFya3NcbiAgICAgKiAqKk5PVEU6KiogTW9uZ29DbGllbnQgbXVzdCBiZSBjb25uZWN0ZWQgcHJpb3IgdG8gY2FsbGluZyB0aGlzIG1ldGhvZCBkdWUgdG8gYSBrbm93biBsaW1pdGF0aW9uIGluIHRoaXMgbGVnYWN5IGltcGxlbWVudGF0aW9uLlxuICAgICAqIEhvd2V2ZXIsIGBjb2xsZWN0aW9uLmJ1bGtXcml0ZSgpYCBwcm92aWRlcyBhbiBlcXVpdmFsZW50IEFQSSB0aGF0IGRvZXMgbm90IHJlcXVpcmUgcHJpb3IgY29ubmVjdGluZy5cbiAgICAgKi9cbiAgICBpbml0aWFsaXplVW5vcmRlcmVkQnVsa09wKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB1bm9yZGVyZWRfMS5Vbm9yZGVyZWRCdWxrT3BlcmF0aW9uKHRoaXMsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluaXRpYXRlIGFuIEluIG9yZGVyIGJ1bGsgd3JpdGUgb3BlcmF0aW9uLiBPcGVyYXRpb25zIHdpbGwgYmUgc2VyaWFsbHkgZXhlY3V0ZWQgaW4gdGhlIG9yZGVyIHRoZXkgYXJlIGFkZGVkLCBjcmVhdGluZyBhIG5ldyBvcGVyYXRpb24gZm9yIGVhY2ggc3dpdGNoIGluIHR5cGVzLlxuICAgICAqXG4gICAgICogQHRocm93cyBNb25nb05vdENvbm5lY3RlZEVycm9yXG4gICAgICogQHJlbWFya3NcbiAgICAgKiAqKk5PVEU6KiogTW9uZ29DbGllbnQgbXVzdCBiZSBjb25uZWN0ZWQgcHJpb3IgdG8gY2FsbGluZyB0aGlzIG1ldGhvZCBkdWUgdG8gYSBrbm93biBsaW1pdGF0aW9uIGluIHRoaXMgbGVnYWN5IGltcGxlbWVudGF0aW9uLlxuICAgICAqIEhvd2V2ZXIsIGBjb2xsZWN0aW9uLmJ1bGtXcml0ZSgpYCBwcm92aWRlcyBhbiBlcXVpdmFsZW50IEFQSSB0aGF0IGRvZXMgbm90IHJlcXVpcmUgcHJpb3IgY29ubmVjdGluZy5cbiAgICAgKi9cbiAgICBpbml0aWFsaXplT3JkZXJlZEJ1bGtPcChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgb3JkZXJlZF8xLk9yZGVyZWRCdWxrT3BlcmF0aW9uKHRoaXMsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFuIGVzdGltYXRlZCBjb3VudCBvZiBtYXRjaGluZyBkb2N1bWVudHMgaW4gdGhlIGRiIHRvIGEgZmlsdGVyLlxuICAgICAqXG4gICAgICogKipOT1RFOioqIFRoaXMgbWV0aG9kIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHNpbmNlIGl0IGRvZXMgbm90IHByb3ZpZGUgYW4gYWNjdXJhdGUgY291bnQgb2YgdGhlIGRvY3VtZW50c1xuICAgICAqIGluIGEgY29sbGVjdGlvbi4gVG8gb2J0YWluIGFuIGFjY3VyYXRlIGNvdW50IG9mIGRvY3VtZW50cyBpbiB0aGUgY29sbGVjdGlvbiwgdXNlIHtAbGluayBDb2xsZWN0aW9uI2NvdW50RG9jdW1lbnRzfCBjb3VudERvY3VtZW50c30uXG4gICAgICogVG8gb2J0YWluIGFuIGVzdGltYXRlZCBjb3VudCBvZiBhbGwgZG9jdW1lbnRzIGluIHRoZSBjb2xsZWN0aW9uLCB1c2Uge0BsaW5rIENvbGxlY3Rpb24jZXN0aW1hdGVkRG9jdW1lbnRDb3VudHwgZXN0aW1hdGVkRG9jdW1lbnRDb3VudH0uXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCB1c2Uge0BsaW5rIENvbGxlY3Rpb24jY291bnREb2N1bWVudHN8IGNvdW50RG9jdW1lbnRzfSBvciB7QGxpbmsgQ29sbGVjdGlvbiNlc3RpbWF0ZWREb2N1bWVudENvdW50fCBlc3RpbWF0ZWREb2N1bWVudENvdW50fSBpbnN0ZWFkXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmlsdGVyIC0gVGhlIGZpbHRlciBmb3IgdGhlIGNvdW50LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgY291bnQoZmlsdGVyID0ge30sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBjb3VudF8xLkNvdW50T3BlcmF0aW9uKHRoaXMuZnVsbE5hbWVzcGFjZSwgZmlsdGVyLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgbGlzdFNlYXJjaEluZGV4ZXMoaW5kZXhOYW1lT3JPcHRpb25zLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPVxuICAgICAgICAgICAgdHlwZW9mIGluZGV4TmFtZU9yT3B0aW9ucyA9PT0gJ29iamVjdCcgPyBpbmRleE5hbWVPck9wdGlvbnMgOiBvcHRpb25zID09IG51bGwgPyB7fSA6IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGluZGV4TmFtZSA9IGluZGV4TmFtZU9yT3B0aW9ucyA9PSBudWxsXG4gICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgIDogdHlwZW9mIGluZGV4TmFtZU9yT3B0aW9ucyA9PT0gJ29iamVjdCdcbiAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICA6IGluZGV4TmFtZU9yT3B0aW9ucztcbiAgICAgICAgcmV0dXJuIG5ldyBsaXN0X3NlYXJjaF9pbmRleGVzX2N1cnNvcl8xLkxpc3RTZWFyY2hJbmRleGVzQ3Vyc29yKHRoaXMsIGluZGV4TmFtZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzaW5nbGUgc2VhcmNoIGluZGV4IGZvciB0aGUgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkZXNjcmlwdGlvbiAtIFRoZSBpbmRleCBkZXNjcmlwdGlvbiBmb3IgdGhlIG5ldyBzZWFyY2ggaW5kZXguXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG5hbWUgb2YgdGhlIG5ldyBzZWFyY2ggaW5kZXguXG4gICAgICpcbiAgICAgKiBAcmVtYXJrcyBPbmx5IGF2YWlsYWJsZSB3aGVuIHVzZWQgYWdhaW5zdCBhIDcuMCsgQXRsYXMgY2x1c3Rlci5cbiAgICAgKi9cbiAgICBhc3luYyBjcmVhdGVTZWFyY2hJbmRleChkZXNjcmlwdGlvbikge1xuICAgICAgICBjb25zdCBbaW5kZXhdID0gYXdhaXQgdGhpcy5jcmVhdGVTZWFyY2hJbmRleGVzKFtkZXNjcmlwdGlvbl0pO1xuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbXVsdGlwbGUgc2VhcmNoIGluZGV4ZXMgZm9yIHRoZSBjdXJyZW50IGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGVzY3JpcHRpb25zIC0gQW4gYXJyYXkgb2YgYFNlYXJjaEluZGV4RGVzY3JpcHRpb25gcyBmb3IgdGhlIG5ldyBzZWFyY2ggaW5kZXhlcy5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBhcnJheSBvZiB0aGUgbmV3bHkgY3JlYXRlZCBzZWFyY2ggaW5kZXggbmFtZXMuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrcyBPbmx5IGF2YWlsYWJsZSB3aGVuIHVzZWQgYWdhaW5zdCBhIDcuMCsgQXRsYXMgY2x1c3Rlci5cbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZVNlYXJjaEluZGV4ZXMoZGVzY3JpcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGNyZWF0ZV8xLkNyZWF0ZVNlYXJjaEluZGV4ZXNPcGVyYXRpb24odGhpcywgZGVzY3JpcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgYSBzZWFyY2ggaW5kZXggYnkgaW5kZXggbmFtZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHNlYXJjaCBpbmRleCB0byBiZSBkZWxldGVkLlxuICAgICAqXG4gICAgICogQHJlbWFya3MgT25seSBhdmFpbGFibGUgd2hlbiB1c2VkIGFnYWluc3QgYSA3LjArIEF0bGFzIGNsdXN0ZXIuXG4gICAgICovXG4gICAgYXN5bmMgZHJvcFNlYXJjaEluZGV4KG5hbWUpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgZHJvcF8yLkRyb3BTZWFyY2hJbmRleE9wZXJhdGlvbih0aGlzLCBuYW1lKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgYSBzZWFyY2ggaW5kZXggYnkgcmVwbGFjaW5nIHRoZSBleGlzdGluZyBpbmRleCBkZWZpbml0aW9uIHdpdGggdGhlIHByb3ZpZGVkIGRlZmluaXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBzZWFyY2ggaW5kZXggdG8gdXBkYXRlLlxuICAgICAqIEBwYXJhbSBkZWZpbml0aW9uIC0gVGhlIG5ldyBzZWFyY2ggaW5kZXggZGVmaW5pdGlvbi5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzIE9ubHkgYXZhaWxhYmxlIHdoZW4gdXNlZCBhZ2FpbnN0IGEgNy4wKyBBdGxhcyBjbHVzdGVyLlxuICAgICAqL1xuICAgIGFzeW5jIHVwZGF0ZVNlYXJjaEluZGV4KG5hbWUsIGRlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgdXBkYXRlXzEuVXBkYXRlU2VhcmNoSW5kZXhPcGVyYXRpb24odGhpcywgbmFtZSwgZGVmaW5pdGlvbikpO1xuICAgIH1cbn1cbmV4cG9ydHMuQ29sbGVjdGlvbiA9IENvbGxlY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2xsZWN0aW9uLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkNvbGxlY3Rpb24iLCJic29uXzEiLCJyZXF1aXJlIiwib3JkZXJlZF8xIiwidW5vcmRlcmVkXzEiLCJjaGFuZ2Vfc3RyZWFtXzEiLCJhZ2dyZWdhdGlvbl9jdXJzb3JfMSIsImZpbmRfY3Vyc29yXzEiLCJsaXN0X2luZGV4ZXNfY3Vyc29yXzEiLCJsaXN0X3NlYXJjaF9pbmRleGVzX2N1cnNvcl8xIiwiZXJyb3JfMSIsImJ1bGtfd3JpdGVfMSIsImNvdW50XzEiLCJjb3VudF9kb2N1bWVudHNfMSIsImRlbGV0ZV8xIiwiZGlzdGluY3RfMSIsImRyb3BfMSIsImVzdGltYXRlZF9kb2N1bWVudF9jb3VudF8xIiwiZXhlY3V0ZV9vcGVyYXRpb25fMSIsImZpbmRfYW5kX21vZGlmeV8xIiwiaW5kZXhlc18xIiwiaW5zZXJ0XzEiLCJpc19jYXBwZWRfMSIsIm9wdGlvbnNfb3BlcmF0aW9uXzEiLCJyZW5hbWVfMSIsImNyZWF0ZV8xIiwiZHJvcF8yIiwidXBkYXRlXzEiLCJzdGF0c18xIiwidXBkYXRlXzIiLCJyZWFkX2NvbmNlcm5fMSIsInJlYWRfcHJlZmVyZW5jZV8xIiwidXRpbHNfMSIsIndyaXRlX2NvbmNlcm5fMSIsImNvbnN0cnVjdG9yIiwiZGIiLCJuYW1lIiwib3B0aW9ucyIsImNoZWNrQ29sbGVjdGlvbk5hbWUiLCJzIiwibmFtZXNwYWNlIiwiTW9uZ29EQkNvbGxlY3Rpb25OYW1lc3BhY2UiLCJkYXRhYmFzZU5hbWUiLCJwa0ZhY3RvcnkiLCJERUZBVUxUX1BLX0ZBQ1RPUlkiLCJyZWFkUHJlZmVyZW5jZSIsIlJlYWRQcmVmZXJlbmNlIiwiZnJvbU9wdGlvbnMiLCJic29uT3B0aW9ucyIsInJlc29sdmVCU09OT3B0aW9ucyIsInJlYWRDb25jZXJuIiwiUmVhZENvbmNlcm4iLCJ3cml0ZUNvbmNlcm4iLCJXcml0ZUNvbmNlcm4iLCJjbGllbnQiLCJkYk5hbWUiLCJjb2xsZWN0aW9uTmFtZSIsImNvbGxlY3Rpb24iLCJmdWxsTmFtZXNwYWNlIiwidG9TdHJpbmciLCJoaW50IiwiY29sbGVjdGlvbkhpbnQiLCJ2Iiwibm9ybWFsaXplSGludEZpZWxkIiwiaW5zZXJ0T25lIiwiZG9jIiwiZXhlY3V0ZU9wZXJhdGlvbiIsIkluc2VydE9uZU9wZXJhdGlvbiIsInJlc29sdmVPcHRpb25zIiwiaW5zZXJ0TWFueSIsImRvY3MiLCJJbnNlcnRNYW55T3BlcmF0aW9uIiwib3JkZXJlZCIsImJ1bGtXcml0ZSIsIm9wZXJhdGlvbnMiLCJBcnJheSIsImlzQXJyYXkiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiQnVsa1dyaXRlT3BlcmF0aW9uIiwidXBkYXRlT25lIiwiZmlsdGVyIiwidXBkYXRlIiwiVXBkYXRlT25lT3BlcmF0aW9uIiwicmVwbGFjZU9uZSIsInJlcGxhY2VtZW50IiwiUmVwbGFjZU9uZU9wZXJhdGlvbiIsInVwZGF0ZU1hbnkiLCJVcGRhdGVNYW55T3BlcmF0aW9uIiwiZGVsZXRlT25lIiwiRGVsZXRlT25lT3BlcmF0aW9uIiwiZGVsZXRlTWFueSIsIkRlbGV0ZU1hbnlPcGVyYXRpb24iLCJyZW5hbWUiLCJuZXdOYW1lIiwiUmVuYW1lT3BlcmF0aW9uIiwiUFJJTUFSWSIsImRyb3AiLCJEcm9wQ29sbGVjdGlvbk9wZXJhdGlvbiIsImZpbmRPbmUiLCJmaW5kIiwibGltaXQiLCJiYXRjaFNpemUiLCJuZXh0IiwiRmluZEN1cnNvciIsIk9wdGlvbnNPcGVyYXRpb24iLCJpc0NhcHBlZCIsIklzQ2FwcGVkT3BlcmF0aW9uIiwiY3JlYXRlSW5kZXgiLCJpbmRleFNwZWMiLCJDcmVhdGVJbmRleE9wZXJhdGlvbiIsImNyZWF0ZUluZGV4ZXMiLCJpbmRleFNwZWNzIiwiQ3JlYXRlSW5kZXhlc09wZXJhdGlvbiIsIm1heFRpbWVNUyIsInVuZGVmaW5lZCIsImRyb3BJbmRleCIsImluZGV4TmFtZSIsIkRyb3BJbmRleE9wZXJhdGlvbiIsInByaW1hcnkiLCJkcm9wSW5kZXhlcyIsIkRyb3BJbmRleGVzT3BlcmF0aW9uIiwibGlzdEluZGV4ZXMiLCJMaXN0SW5kZXhlc0N1cnNvciIsImluZGV4RXhpc3RzIiwiaW5kZXhlcyIsIkluZGV4RXhpc3RzT3BlcmF0aW9uIiwiaW5kZXhJbmZvcm1hdGlvbiIsIkluZGV4SW5mb3JtYXRpb25PcGVyYXRpb24iLCJlc3RpbWF0ZWREb2N1bWVudENvdW50IiwiRXN0aW1hdGVkRG9jdW1lbnRDb3VudE9wZXJhdGlvbiIsImNvdW50RG9jdW1lbnRzIiwiQ291bnREb2N1bWVudHNPcGVyYXRpb24iLCJkaXN0aW5jdCIsImtleSIsIkRpc3RpbmN0T3BlcmF0aW9uIiwiSW5kZXhlc09wZXJhdGlvbiIsInN0YXRzIiwiQ29sbFN0YXRzT3BlcmF0aW9uIiwiZmluZE9uZUFuZERlbGV0ZSIsIkZpbmRPbmVBbmREZWxldGVPcGVyYXRpb24iLCJmaW5kT25lQW5kUmVwbGFjZSIsIkZpbmRPbmVBbmRSZXBsYWNlT3BlcmF0aW9uIiwiZmluZE9uZUFuZFVwZGF0ZSIsIkZpbmRPbmVBbmRVcGRhdGVPcGVyYXRpb24iLCJhZ2dyZWdhdGUiLCJwaXBlbGluZSIsIkFnZ3JlZ2F0aW9uQ3Vyc29yIiwid2F0Y2giLCJDaGFuZ2VTdHJlYW0iLCJpbml0aWFsaXplVW5vcmRlcmVkQnVsa09wIiwiVW5vcmRlcmVkQnVsa09wZXJhdGlvbiIsImluaXRpYWxpemVPcmRlcmVkQnVsa09wIiwiT3JkZXJlZEJ1bGtPcGVyYXRpb24iLCJjb3VudCIsIkNvdW50T3BlcmF0aW9uIiwibGlzdFNlYXJjaEluZGV4ZXMiLCJpbmRleE5hbWVPck9wdGlvbnMiLCJMaXN0U2VhcmNoSW5kZXhlc0N1cnNvciIsImNyZWF0ZVNlYXJjaEluZGV4IiwiZGVzY3JpcHRpb24iLCJpbmRleCIsImNyZWF0ZVNlYXJjaEluZGV4ZXMiLCJkZXNjcmlwdGlvbnMiLCJDcmVhdGVTZWFyY2hJbmRleGVzT3BlcmF0aW9uIiwiZHJvcFNlYXJjaEluZGV4IiwiRHJvcFNlYXJjaEluZGV4T3BlcmF0aW9uIiwidXBkYXRlU2VhcmNoSW5kZXgiLCJkZWZpbml0aW9uIiwiVXBkYXRlU2VhcmNoSW5kZXhPcGVyYXRpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/collection.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/connection_string.js":
/*!*******************************************************!*\
  !*** ./node_modules/mongodb/lib/connection_string.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.FEATURE_FLAGS = exports.DEFAULT_OPTIONS = exports.OPTIONS = exports.parseOptions = exports.resolveSRVRecord = void 0;\nconst dns = __webpack_require__(/*! dns */ \"dns\");\nconst fs = __webpack_require__(/*! fs */ \"fs\");\nconst mongodb_connection_string_url_1 = __webpack_require__(/*! mongodb-connection-string-url */ \"(ssr)/./node_modules/mongodb-connection-string-url/lib/index.js\");\nconst url_1 = __webpack_require__(/*! url */ \"url\");\nconst mongo_credentials_1 = __webpack_require__(/*! ./cmap/auth/mongo_credentials */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongo_credentials.js\");\nconst providers_1 = __webpack_require__(/*! ./cmap/auth/providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\nconst client_metadata_1 = __webpack_require__(/*! ./cmap/handshake/client_metadata */ \"(ssr)/./node_modules/mongodb/lib/cmap/handshake/client_metadata.js\");\nconst compression_1 = __webpack_require__(/*! ./cmap/wire_protocol/compression */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/compression.js\");\nconst encrypter_1 = __webpack_require__(/*! ./encrypter */ \"(ssr)/./node_modules/mongodb/lib/encrypter.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_client_1 = __webpack_require__(/*! ./mongo_client */ \"(ssr)/./node_modules/mongodb/lib/mongo_client.js\");\nconst mongo_logger_1 = __webpack_require__(/*! ./mongo_logger */ \"(ssr)/./node_modules/mongodb/lib/mongo_logger.js\");\nconst read_concern_1 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst write_concern_1 = __webpack_require__(/*! ./write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nconst VALID_TXT_RECORDS = [\n    \"authSource\",\n    \"replicaSet\",\n    \"loadBalanced\"\n];\nconst LB_SINGLE_HOST_ERROR = \"loadBalanced option only supported with a single host in the URI\";\nconst LB_REPLICA_SET_ERROR = \"loadBalanced option not supported with a replicaSet option\";\nconst LB_DIRECT_CONNECTION_ERROR = \"loadBalanced option not supported when directConnection is provided\";\n/**\n * Lookup a `mongodb+srv` connection string, combine the parts and reparse it as a normal\n * connection string.\n *\n * @param uri - The connection string to parse\n * @param options - Optional user provided connection string options\n */ async function resolveSRVRecord(options) {\n    if (typeof options.srvHost !== \"string\") {\n        throw new error_1.MongoAPIError('Option \"srvHost\" must not be empty');\n    }\n    if (options.srvHost.split(\".\").length < 3) {\n        // TODO(NODE-3484): Replace with MongoConnectionStringError\n        throw new error_1.MongoAPIError(\"URI must include hostname, domain name, and tld\");\n    }\n    // Resolve the SRV record and use the result as the list of hosts to connect to.\n    const lookupAddress = options.srvHost;\n    const addresses = await dns.promises.resolveSrv(`_${options.srvServiceName}._tcp.${lookupAddress}`);\n    if (addresses.length === 0) {\n        throw new error_1.MongoAPIError(\"No addresses found at host\");\n    }\n    for (const { name } of addresses){\n        if (!(0, utils_1.matchesParentDomain)(name, lookupAddress)) {\n            throw new error_1.MongoAPIError(\"Server record does not share hostname with parent URI\");\n        }\n    }\n    const hostAddresses = addresses.map((r)=>utils_1.HostAddress.fromString(`${r.name}:${r.port ?? 27017}`));\n    validateLoadBalancedOptions(hostAddresses, options, true);\n    // Resolve TXT record and add options from there if they exist.\n    let record;\n    try {\n        record = await dns.promises.resolveTxt(lookupAddress);\n    } catch (error) {\n        if (error.code !== \"ENODATA\" && error.code !== \"ENOTFOUND\") {\n            throw error;\n        }\n        return hostAddresses;\n    }\n    if (record.length > 1) {\n        throw new error_1.MongoParseError(\"Multiple text records not allowed\");\n    }\n    const txtRecordOptions = new url_1.URLSearchParams(record[0].join(\"\"));\n    const txtRecordOptionKeys = [\n        ...txtRecordOptions.keys()\n    ];\n    if (txtRecordOptionKeys.some((key)=>!VALID_TXT_RECORDS.includes(key))) {\n        throw new error_1.MongoParseError(`Text record may only set any of: ${VALID_TXT_RECORDS.join(\", \")}`);\n    }\n    if (VALID_TXT_RECORDS.some((option)=>txtRecordOptions.get(option) === \"\")) {\n        throw new error_1.MongoParseError(\"Cannot have empty URI params in DNS TXT Record\");\n    }\n    const source = txtRecordOptions.get(\"authSource\") ?? undefined;\n    const replicaSet = txtRecordOptions.get(\"replicaSet\") ?? undefined;\n    const loadBalanced = txtRecordOptions.get(\"loadBalanced\") ?? undefined;\n    if (!options.userSpecifiedAuthSource && source && options.credentials && !providers_1.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(options.credentials.mechanism)) {\n        options.credentials = mongo_credentials_1.MongoCredentials.merge(options.credentials, {\n            source\n        });\n    }\n    if (!options.userSpecifiedReplicaSet && replicaSet) {\n        options.replicaSet = replicaSet;\n    }\n    if (loadBalanced === \"true\") {\n        options.loadBalanced = true;\n    }\n    if (options.replicaSet && options.srvMaxHosts > 0) {\n        throw new error_1.MongoParseError(\"Cannot combine replicaSet option with srvMaxHosts\");\n    }\n    validateLoadBalancedOptions(hostAddresses, options, true);\n    return hostAddresses;\n}\nexports.resolveSRVRecord = resolveSRVRecord;\n/**\n * Checks if TLS options are valid\n *\n * @param allOptions - All options provided by user or included in default options map\n * @throws MongoAPIError if TLS options are invalid\n */ function checkTLSOptions(allOptions) {\n    if (!allOptions) return;\n    const check = (a, b)=>{\n        if (allOptions.has(a) && allOptions.has(b)) {\n            throw new error_1.MongoAPIError(`The '${a}' option cannot be used with the '${b}' option`);\n        }\n    };\n    check(\"tlsInsecure\", \"tlsAllowInvalidCertificates\");\n    check(\"tlsInsecure\", \"tlsAllowInvalidHostnames\");\n    check(\"tlsInsecure\", \"tlsDisableCertificateRevocationCheck\");\n    check(\"tlsInsecure\", \"tlsDisableOCSPEndpointCheck\");\n    check(\"tlsAllowInvalidCertificates\", \"tlsDisableCertificateRevocationCheck\");\n    check(\"tlsAllowInvalidCertificates\", \"tlsDisableOCSPEndpointCheck\");\n    check(\"tlsDisableCertificateRevocationCheck\", \"tlsDisableOCSPEndpointCheck\");\n}\nconst TRUTHS = new Set([\n    \"true\",\n    \"t\",\n    \"1\",\n    \"y\",\n    \"yes\"\n]);\nconst FALSEHOODS = new Set([\n    \"false\",\n    \"f\",\n    \"0\",\n    \"n\",\n    \"no\",\n    \"-1\"\n]);\nfunction getBoolean(name, value) {\n    if (typeof value === \"boolean\") return value;\n    const valueString = String(value).toLowerCase();\n    if (TRUTHS.has(valueString)) {\n        if (valueString !== \"true\") {\n            (0, utils_1.emitWarningOnce)(`deprecated value for ${name} : ${valueString} - please update to ${name} : true instead`);\n        }\n        return true;\n    }\n    if (FALSEHOODS.has(valueString)) {\n        if (valueString !== \"false\") {\n            (0, utils_1.emitWarningOnce)(`deprecated value for ${name} : ${valueString} - please update to ${name} : false instead`);\n        }\n        return false;\n    }\n    throw new error_1.MongoParseError(`Expected ${name} to be stringified boolean value, got: ${value}`);\n}\nfunction getIntFromOptions(name, value) {\n    const parsedInt = (0, utils_1.parseInteger)(value);\n    if (parsedInt != null) {\n        return parsedInt;\n    }\n    throw new error_1.MongoParseError(`Expected ${name} to be stringified int value, got: ${value}`);\n}\nfunction getUIntFromOptions(name, value) {\n    const parsedValue = getIntFromOptions(name, value);\n    if (parsedValue < 0) {\n        throw new error_1.MongoParseError(`${name} can only be a positive int value, got: ${value}`);\n    }\n    return parsedValue;\n}\nfunction* entriesFromString(value) {\n    const keyValuePairs = value.split(\",\");\n    for (const keyValue of keyValuePairs){\n        const [key, value] = keyValue.split(/:(.*)/);\n        if (value == null) {\n            throw new error_1.MongoParseError(\"Cannot have undefined values in key value pairs\");\n        }\n        yield [\n            key,\n            value\n        ];\n    }\n}\nclass CaseInsensitiveMap extends Map {\n    constructor(entries = []){\n        super(entries.map(([k, v])=>[\n                k.toLowerCase(),\n                v\n            ]));\n    }\n    has(k) {\n        return super.has(k.toLowerCase());\n    }\n    get(k) {\n        return super.get(k.toLowerCase());\n    }\n    set(k, v) {\n        return super.set(k.toLowerCase(), v);\n    }\n    delete(k) {\n        return super.delete(k.toLowerCase());\n    }\n}\nfunction parseOptions(uri, mongoClient = undefined, options = {}) {\n    if (mongoClient != null && !(mongoClient instanceof mongo_client_1.MongoClient)) {\n        options = mongoClient;\n        mongoClient = undefined;\n    }\n    // validate BSONOptions\n    if (options.useBigInt64 && typeof options.promoteLongs === \"boolean\" && !options.promoteLongs) {\n        throw new error_1.MongoAPIError(\"Must request either bigint or Long for int64 deserialization\");\n    }\n    if (options.useBigInt64 && typeof options.promoteValues === \"boolean\" && !options.promoteValues) {\n        throw new error_1.MongoAPIError(\"Must request either bigint or Long for int64 deserialization\");\n    }\n    const url = new mongodb_connection_string_url_1.default(uri);\n    const { hosts, isSRV } = url;\n    const mongoOptions = Object.create(null);\n    // Feature flags\n    for (const flag of Object.getOwnPropertySymbols(options)){\n        if (exports.FEATURE_FLAGS.has(flag)) {\n            mongoOptions[flag] = options[flag];\n        }\n    }\n    mongoOptions.hosts = isSRV ? [] : hosts.map(utils_1.HostAddress.fromString);\n    const urlOptions = new CaseInsensitiveMap();\n    if (url.pathname !== \"/\" && url.pathname !== \"\") {\n        const dbName = decodeURIComponent(url.pathname[0] === \"/\" ? url.pathname.slice(1) : url.pathname);\n        if (dbName) {\n            urlOptions.set(\"dbName\", [\n                dbName\n            ]);\n        }\n    }\n    if (url.username !== \"\") {\n        const auth = {\n            username: decodeURIComponent(url.username)\n        };\n        if (typeof url.password === \"string\") {\n            auth.password = decodeURIComponent(url.password);\n        }\n        urlOptions.set(\"auth\", [\n            auth\n        ]);\n    }\n    for (const key of url.searchParams.keys()){\n        const values = [\n            ...url.searchParams.getAll(key)\n        ];\n        if (values.includes(\"\")) {\n            throw new error_1.MongoAPIError(\"URI cannot contain options with no value\");\n        }\n        if (!urlOptions.has(key)) {\n            urlOptions.set(key, values);\n        }\n    }\n    const objectOptions = new CaseInsensitiveMap(Object.entries(options).filter(([, v])=>v != null));\n    // Validate options that can only be provided by one of uri or object\n    if (urlOptions.has(\"serverApi\")) {\n        throw new error_1.MongoParseError(\"URI cannot contain `serverApi`, it can only be passed to the client\");\n    }\n    const uriMechanismProperties = urlOptions.get(\"authMechanismProperties\");\n    if (uriMechanismProperties) {\n        for (const property of uriMechanismProperties){\n            if (/(^|,)ALLOWED_HOSTS:/.test(property)) {\n                throw new error_1.MongoParseError(\"Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.\");\n            }\n        }\n    }\n    if (objectOptions.has(\"loadBalanced\")) {\n        throw new error_1.MongoParseError(\"loadBalanced is only a valid option in the URI\");\n    }\n    // All option collection\n    const allProvidedOptions = new CaseInsensitiveMap();\n    const allProvidedKeys = new Set([\n        ...urlOptions.keys(),\n        ...objectOptions.keys()\n    ]);\n    for (const key of allProvidedKeys){\n        const values = [];\n        const objectOptionValue = objectOptions.get(key);\n        if (objectOptionValue != null) {\n            values.push(objectOptionValue);\n        }\n        const urlValues = urlOptions.get(key) ?? [];\n        values.push(...urlValues);\n        allProvidedOptions.set(key, values);\n    }\n    const didMapTLSCertificateFile = allProvidedOptions.has(\"tlsCertificateKeyFile\") && !allProvidedOptions.has(\"tlsCertificateFile\");\n    if (didMapTLSCertificateFile) {\n        allProvidedOptions.set(\"tlsCertificateFile\", allProvidedOptions.get(\"tlsCertificateKeyFile\"));\n    }\n    if (allProvidedOptions.has(\"tls\") || allProvidedOptions.has(\"ssl\")) {\n        const tlsAndSslOpts = (allProvidedOptions.get(\"tls\") || []).concat(allProvidedOptions.get(\"ssl\") || []).map(getBoolean.bind(null, \"tls/ssl\"));\n        if (new Set(tlsAndSslOpts).size !== 1) {\n            throw new error_1.MongoParseError(\"All values of tls/ssl must be the same.\");\n        }\n    }\n    checkTLSOptions(allProvidedOptions);\n    const unsupportedOptions = (0, utils_1.setDifference)(allProvidedKeys, Array.from(Object.keys(exports.OPTIONS)).map((s)=>s.toLowerCase()));\n    if (unsupportedOptions.size !== 0) {\n        const optionWord = unsupportedOptions.size > 1 ? \"options\" : \"option\";\n        const isOrAre = unsupportedOptions.size > 1 ? \"are\" : \"is\";\n        throw new error_1.MongoParseError(`${optionWord} ${Array.from(unsupportedOptions).join(\", \")} ${isOrAre} not supported`);\n    }\n    // Option parsing and setting\n    for (const [key, descriptor] of Object.entries(exports.OPTIONS)){\n        const values = allProvidedOptions.get(key);\n        if (!values || values.length === 0) {\n            if (exports.DEFAULT_OPTIONS.has(key)) {\n                setOption(mongoOptions, key, descriptor, [\n                    exports.DEFAULT_OPTIONS.get(key)\n                ]);\n            }\n        } else {\n            const { deprecated } = descriptor;\n            const shouldEmitTLSCertificateFileDeprecation = didMapTLSCertificateFile && key === \"tlsCertificateFile\";\n            if (deprecated && !shouldEmitTLSCertificateFileDeprecation) {\n                const deprecatedMsg = typeof deprecated === \"string\" ? `: ${deprecated}` : \"\";\n                (0, utils_1.emitWarning)(`${key} is a deprecated option${deprecatedMsg}`);\n            }\n            setOption(mongoOptions, key, descriptor, values);\n        }\n    }\n    if (mongoOptions.credentials) {\n        const isGssapi = mongoOptions.credentials.mechanism === providers_1.AuthMechanism.MONGODB_GSSAPI;\n        const isX509 = mongoOptions.credentials.mechanism === providers_1.AuthMechanism.MONGODB_X509;\n        const isAws = mongoOptions.credentials.mechanism === providers_1.AuthMechanism.MONGODB_AWS;\n        const isOidc = mongoOptions.credentials.mechanism === providers_1.AuthMechanism.MONGODB_OIDC;\n        if ((isGssapi || isX509) && allProvidedOptions.has(\"authSource\") && mongoOptions.credentials.source !== \"$external\") {\n            // If authSource was explicitly given and its incorrect, we error\n            throw new error_1.MongoParseError(`authMechanism ${mongoOptions.credentials.mechanism} requires an authSource of '$external'`);\n        }\n        if (!(isGssapi || isX509 || isAws || isOidc) && mongoOptions.dbName && !allProvidedOptions.has(\"authSource\")) {\n            // inherit the dbName unless GSSAPI or X509, then silently ignore dbName\n            // and there was no specific authSource given\n            mongoOptions.credentials = mongo_credentials_1.MongoCredentials.merge(mongoOptions.credentials, {\n                source: mongoOptions.dbName\n            });\n        }\n        if (isAws && mongoOptions.credentials.username && !mongoOptions.credentials.password) {\n            throw new error_1.MongoMissingCredentialsError(`When using ${mongoOptions.credentials.mechanism} password must be set when a username is specified`);\n        }\n        mongoOptions.credentials.validate();\n        // Check if the only auth related option provided was authSource, if so we can remove credentials\n        if (mongoOptions.credentials.password === \"\" && mongoOptions.credentials.username === \"\" && mongoOptions.credentials.mechanism === providers_1.AuthMechanism.MONGODB_DEFAULT && Object.keys(mongoOptions.credentials.mechanismProperties).length === 0) {\n            delete mongoOptions.credentials;\n        }\n    }\n    if (!mongoOptions.dbName) {\n        // dbName default is applied here because of the credential validation above\n        mongoOptions.dbName = \"test\";\n    }\n    validateLoadBalancedOptions(hosts, mongoOptions, isSRV);\n    if (mongoClient && mongoOptions.autoEncryption) {\n        encrypter_1.Encrypter.checkForMongoCrypt();\n        mongoOptions.encrypter = new encrypter_1.Encrypter(mongoClient, uri, options);\n        mongoOptions.autoEncrypter = mongoOptions.encrypter.autoEncrypter;\n    }\n    // Potential SRV Overrides and SRV connection string validations\n    mongoOptions.userSpecifiedAuthSource = objectOptions.has(\"authSource\") || urlOptions.has(\"authSource\");\n    mongoOptions.userSpecifiedReplicaSet = objectOptions.has(\"replicaSet\") || urlOptions.has(\"replicaSet\");\n    if (isSRV) {\n        // SRV Record is resolved upon connecting\n        mongoOptions.srvHost = hosts[0];\n        if (mongoOptions.directConnection) {\n            throw new error_1.MongoAPIError(\"SRV URI does not support directConnection\");\n        }\n        if (mongoOptions.srvMaxHosts > 0 && typeof mongoOptions.replicaSet === \"string\") {\n            throw new error_1.MongoParseError(\"Cannot use srvMaxHosts option with replicaSet\");\n        }\n        // SRV turns on TLS by default, but users can override and turn it off\n        const noUserSpecifiedTLS = !objectOptions.has(\"tls\") && !urlOptions.has(\"tls\");\n        const noUserSpecifiedSSL = !objectOptions.has(\"ssl\") && !urlOptions.has(\"ssl\");\n        if (noUserSpecifiedTLS && noUserSpecifiedSSL) {\n            mongoOptions.tls = true;\n        }\n    } else {\n        const userSpecifiedSrvOptions = urlOptions.has(\"srvMaxHosts\") || objectOptions.has(\"srvMaxHosts\") || urlOptions.has(\"srvServiceName\") || objectOptions.has(\"srvServiceName\");\n        if (userSpecifiedSrvOptions) {\n            throw new error_1.MongoParseError(\"Cannot use srvMaxHosts or srvServiceName with a non-srv connection string\");\n        }\n    }\n    if (mongoOptions.directConnection && mongoOptions.hosts.length !== 1) {\n        throw new error_1.MongoParseError(\"directConnection option requires exactly one host\");\n    }\n    if (!mongoOptions.proxyHost && (mongoOptions.proxyPort || mongoOptions.proxyUsername || mongoOptions.proxyPassword)) {\n        throw new error_1.MongoParseError(\"Must specify proxyHost if other proxy options are passed\");\n    }\n    if (mongoOptions.proxyUsername && !mongoOptions.proxyPassword || !mongoOptions.proxyUsername && mongoOptions.proxyPassword) {\n        throw new error_1.MongoParseError(\"Can only specify both of proxy username/password or neither\");\n    }\n    const proxyOptions = [\n        \"proxyHost\",\n        \"proxyPort\",\n        \"proxyUsername\",\n        \"proxyPassword\"\n    ].map((key)=>urlOptions.get(key) ?? []);\n    if (proxyOptions.some((options)=>options.length > 1)) {\n        throw new error_1.MongoParseError(\"Proxy options cannot be specified multiple times in the connection string\");\n    }\n    const loggerFeatureFlag = Symbol.for(\"@@mdb.enableMongoLogger\");\n    mongoOptions[loggerFeatureFlag] = mongoOptions[loggerFeatureFlag] ?? false;\n    let loggerEnvOptions = {};\n    let loggerClientOptions = {};\n    if (mongoOptions[loggerFeatureFlag]) {\n        loggerEnvOptions = {\n            MONGODB_LOG_COMMAND: process.env.MONGODB_LOG_COMMAND,\n            MONGODB_LOG_TOPOLOGY: process.env.MONGODB_LOG_TOPOLOGY,\n            MONGODB_LOG_SERVER_SELECTION: process.env.MONGODB_LOG_SERVER_SELECTION,\n            MONGODB_LOG_CONNECTION: process.env.MONGODB_LOG_CONNECTION,\n            MONGODB_LOG_ALL: process.env.MONGODB_LOG_ALL,\n            MONGODB_LOG_MAX_DOCUMENT_LENGTH: process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,\n            MONGODB_LOG_PATH: process.env.MONGODB_LOG_PATH,\n            ...mongoOptions[Symbol.for(\"@@mdb.internalLoggerConfig\")]\n        };\n        loggerClientOptions = {\n            mongodbLogPath: mongoOptions.mongodbLogPath\n        };\n    }\n    mongoOptions.mongoLoggerOptions = mongo_logger_1.MongoLogger.resolveOptions(loggerEnvOptions, loggerClientOptions);\n    mongoOptions.metadata = (0, client_metadata_1.makeClientMetadata)(mongoOptions);\n    return mongoOptions;\n}\nexports.parseOptions = parseOptions;\n/**\n * #### Throws if LB mode is true:\n * - hosts contains more than one host\n * - there is a replicaSet name set\n * - directConnection is set\n * - if srvMaxHosts is used when an srv connection string is passed in\n *\n * @throws MongoParseError\n */ function validateLoadBalancedOptions(hosts, mongoOptions, isSrv) {\n    if (mongoOptions.loadBalanced) {\n        if (hosts.length > 1) {\n            throw new error_1.MongoParseError(LB_SINGLE_HOST_ERROR);\n        }\n        if (mongoOptions.replicaSet) {\n            throw new error_1.MongoParseError(LB_REPLICA_SET_ERROR);\n        }\n        if (mongoOptions.directConnection) {\n            throw new error_1.MongoParseError(LB_DIRECT_CONNECTION_ERROR);\n        }\n        if (isSrv && mongoOptions.srvMaxHosts > 0) {\n            throw new error_1.MongoParseError(\"Cannot limit srv hosts with loadBalanced enabled\");\n        }\n    }\n    return;\n}\nfunction setOption(mongoOptions, key, descriptor, values) {\n    const { target, type, transform } = descriptor;\n    const name = target ?? key;\n    switch(type){\n        case \"boolean\":\n            mongoOptions[name] = getBoolean(name, values[0]);\n            break;\n        case \"int\":\n            mongoOptions[name] = getIntFromOptions(name, values[0]);\n            break;\n        case \"uint\":\n            mongoOptions[name] = getUIntFromOptions(name, values[0]);\n            break;\n        case \"string\":\n            if (values[0] == null) {\n                break;\n            }\n            mongoOptions[name] = String(values[0]);\n            break;\n        case \"record\":\n            if (!(0, utils_1.isRecord)(values[0])) {\n                throw new error_1.MongoParseError(`${name} must be an object`);\n            }\n            mongoOptions[name] = values[0];\n            break;\n        case \"any\":\n            mongoOptions[name] = values[0];\n            break;\n        default:\n            {\n                if (!transform) {\n                    throw new error_1.MongoParseError(\"Descriptors missing a type must define a transform\");\n                }\n                const transformValue = transform({\n                    name,\n                    options: mongoOptions,\n                    values\n                });\n                mongoOptions[name] = transformValue;\n                break;\n            }\n    }\n}\nexports.OPTIONS = {\n    appName: {\n        type: \"string\"\n    },\n    auth: {\n        target: \"credentials\",\n        transform ({ name, options, values: [value] }) {\n            if (!(0, utils_1.isRecord)(value, [\n                \"username\",\n                \"password\"\n            ])) {\n                throw new error_1.MongoParseError(`${name} must be an object with 'username' and 'password' properties`);\n            }\n            return mongo_credentials_1.MongoCredentials.merge(options.credentials, {\n                username: value.username,\n                password: value.password\n            });\n        }\n    },\n    authMechanism: {\n        target: \"credentials\",\n        transform ({ options, values: [value] }) {\n            const mechanisms = Object.values(providers_1.AuthMechanism);\n            const [mechanism] = mechanisms.filter((m)=>m.match(RegExp(String.raw`\\b${value}\\b`, \"i\")));\n            if (!mechanism) {\n                throw new error_1.MongoParseError(`authMechanism one of ${mechanisms}, got ${value}`);\n            }\n            let source = options.credentials?.source;\n            if (mechanism === providers_1.AuthMechanism.MONGODB_PLAIN || providers_1.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(mechanism)) {\n                // some mechanisms have '$external' as the Auth Source\n                source = \"$external\";\n            }\n            let password = options.credentials?.password;\n            if (mechanism === providers_1.AuthMechanism.MONGODB_X509 && password === \"\") {\n                password = undefined;\n            }\n            return mongo_credentials_1.MongoCredentials.merge(options.credentials, {\n                mechanism,\n                source,\n                password\n            });\n        }\n    },\n    authMechanismProperties: {\n        target: \"credentials\",\n        transform ({ options, values }) {\n            // We can have a combination of options passed in the URI and options passed\n            // as an object to the MongoClient. So we must transform the string options\n            // as well as merge them together with a potentially provided object.\n            let mechanismProperties = Object.create(null);\n            for (const optionValue of values){\n                if (typeof optionValue === \"string\") {\n                    for (const [key, value] of entriesFromString(optionValue)){\n                        try {\n                            mechanismProperties[key] = getBoolean(key, value);\n                        } catch  {\n                            mechanismProperties[key] = value;\n                        }\n                    }\n                } else {\n                    if (!(0, utils_1.isRecord)(optionValue)) {\n                        throw new error_1.MongoParseError(\"AuthMechanismProperties must be an object\");\n                    }\n                    mechanismProperties = {\n                        ...optionValue\n                    };\n                }\n            }\n            return mongo_credentials_1.MongoCredentials.merge(options.credentials, {\n                mechanismProperties\n            });\n        }\n    },\n    authSource: {\n        target: \"credentials\",\n        transform ({ options, values: [value] }) {\n            const source = String(value);\n            return mongo_credentials_1.MongoCredentials.merge(options.credentials, {\n                source\n            });\n        }\n    },\n    autoEncryption: {\n        type: \"record\"\n    },\n    bsonRegExp: {\n        type: \"boolean\"\n    },\n    serverApi: {\n        target: \"serverApi\",\n        transform ({ values: [version] }) {\n            const serverApiToValidate = typeof version === \"string\" ? {\n                version\n            } : version;\n            const versionToValidate = serverApiToValidate && serverApiToValidate.version;\n            if (!versionToValidate) {\n                throw new error_1.MongoParseError(`Invalid \\`serverApi\\` property; must specify a version from the following enum: [\"${Object.values(mongo_client_1.ServerApiVersion).join('\", \"')}\"]`);\n            }\n            if (!Object.values(mongo_client_1.ServerApiVersion).some((v)=>v === versionToValidate)) {\n                throw new error_1.MongoParseError(`Invalid server API version=${versionToValidate}; must be in the following enum: [\"${Object.values(mongo_client_1.ServerApiVersion).join('\", \"')}\"]`);\n            }\n            return serverApiToValidate;\n        }\n    },\n    checkKeys: {\n        type: \"boolean\"\n    },\n    compressors: {\n        default: \"none\",\n        target: \"compressors\",\n        transform ({ values }) {\n            const compressionList = new Set();\n            for (const compVal of values){\n                const compValArray = typeof compVal === \"string\" ? compVal.split(\",\") : compVal;\n                if (!Array.isArray(compValArray)) {\n                    throw new error_1.MongoInvalidArgumentError(\"compressors must be an array or a comma-delimited list of strings\");\n                }\n                for (const c of compValArray){\n                    if (Object.keys(compression_1.Compressor).includes(String(c))) {\n                        compressionList.add(String(c));\n                    } else {\n                        throw new error_1.MongoInvalidArgumentError(`${c} is not a valid compression mechanism. Must be one of: ${Object.keys(compression_1.Compressor)}.`);\n                    }\n                }\n            }\n            return [\n                ...compressionList\n            ];\n        }\n    },\n    connectTimeoutMS: {\n        default: 30000,\n        type: \"uint\"\n    },\n    dbName: {\n        type: \"string\"\n    },\n    directConnection: {\n        default: false,\n        type: \"boolean\"\n    },\n    driverInfo: {\n        default: {},\n        type: \"record\"\n    },\n    enableUtf8Validation: {\n        type: \"boolean\",\n        default: true\n    },\n    family: {\n        transform ({ name, values: [value] }) {\n            const transformValue = getIntFromOptions(name, value);\n            if (transformValue === 4 || transformValue === 6) {\n                return transformValue;\n            }\n            throw new error_1.MongoParseError(`Option 'family' must be 4 or 6 got ${transformValue}.`);\n        }\n    },\n    fieldsAsRaw: {\n        type: \"record\"\n    },\n    forceServerObjectId: {\n        default: false,\n        type: \"boolean\"\n    },\n    fsync: {\n        deprecated: \"Please use journal instead\",\n        target: \"writeConcern\",\n        transform ({ name, options, values: [value] }) {\n            const wc = write_concern_1.WriteConcern.fromOptions({\n                writeConcern: {\n                    ...options.writeConcern,\n                    fsync: getBoolean(name, value)\n                }\n            });\n            if (!wc) throw new error_1.MongoParseError(`Unable to make a writeConcern from fsync=${value}`);\n            return wc;\n        }\n    },\n    heartbeatFrequencyMS: {\n        default: 10000,\n        type: \"uint\"\n    },\n    ignoreUndefined: {\n        type: \"boolean\"\n    },\n    j: {\n        deprecated: \"Please use journal instead\",\n        target: \"writeConcern\",\n        transform ({ name, options, values: [value] }) {\n            const wc = write_concern_1.WriteConcern.fromOptions({\n                writeConcern: {\n                    ...options.writeConcern,\n                    journal: getBoolean(name, value)\n                }\n            });\n            if (!wc) throw new error_1.MongoParseError(`Unable to make a writeConcern from journal=${value}`);\n            return wc;\n        }\n    },\n    journal: {\n        target: \"writeConcern\",\n        transform ({ name, options, values: [value] }) {\n            const wc = write_concern_1.WriteConcern.fromOptions({\n                writeConcern: {\n                    ...options.writeConcern,\n                    journal: getBoolean(name, value)\n                }\n            });\n            if (!wc) throw new error_1.MongoParseError(`Unable to make a writeConcern from journal=${value}`);\n            return wc;\n        }\n    },\n    keepAlive: {\n        default: true,\n        type: \"boolean\",\n        deprecated: \"Will not be able to turn off in the future.\"\n    },\n    keepAliveInitialDelay: {\n        default: 120000,\n        type: \"uint\",\n        deprecated: \"Will not be configurable in the future.\"\n    },\n    loadBalanced: {\n        default: false,\n        type: \"boolean\"\n    },\n    localThresholdMS: {\n        default: 15,\n        type: \"uint\"\n    },\n    maxConnecting: {\n        default: 2,\n        transform ({ name, values: [value] }) {\n            const maxConnecting = getUIntFromOptions(name, value);\n            if (maxConnecting === 0) {\n                throw new error_1.MongoInvalidArgumentError(\"maxConnecting must be > 0 if specified\");\n            }\n            return maxConnecting;\n        }\n    },\n    maxIdleTimeMS: {\n        default: 0,\n        type: \"uint\"\n    },\n    maxPoolSize: {\n        default: 100,\n        type: \"uint\"\n    },\n    maxStalenessSeconds: {\n        target: \"readPreference\",\n        transform ({ name, options, values: [value] }) {\n            const maxStalenessSeconds = getUIntFromOptions(name, value);\n            if (options.readPreference) {\n                return read_preference_1.ReadPreference.fromOptions({\n                    readPreference: {\n                        ...options.readPreference,\n                        maxStalenessSeconds\n                    }\n                });\n            } else {\n                return new read_preference_1.ReadPreference(\"secondary\", undefined, {\n                    maxStalenessSeconds\n                });\n            }\n        }\n    },\n    minInternalBufferSize: {\n        type: \"uint\"\n    },\n    minPoolSize: {\n        default: 0,\n        type: \"uint\"\n    },\n    minHeartbeatFrequencyMS: {\n        default: 500,\n        type: \"uint\"\n    },\n    monitorCommands: {\n        default: false,\n        type: \"boolean\"\n    },\n    name: {\n        target: \"driverInfo\",\n        transform ({ values: [value], options }) {\n            return {\n                ...options.driverInfo,\n                name: String(value)\n            };\n        }\n    },\n    noDelay: {\n        default: true,\n        type: \"boolean\"\n    },\n    pkFactory: {\n        default: utils_1.DEFAULT_PK_FACTORY,\n        transform ({ values: [value] }) {\n            if ((0, utils_1.isRecord)(value, [\n                \"createPk\"\n            ]) && typeof value.createPk === \"function\") {\n                return value;\n            }\n            throw new error_1.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${value}`);\n        }\n    },\n    promoteBuffers: {\n        type: \"boolean\"\n    },\n    promoteLongs: {\n        type: \"boolean\"\n    },\n    promoteValues: {\n        type: \"boolean\"\n    },\n    useBigInt64: {\n        type: \"boolean\"\n    },\n    proxyHost: {\n        type: \"string\"\n    },\n    proxyPassword: {\n        type: \"string\"\n    },\n    proxyPort: {\n        type: \"uint\"\n    },\n    proxyUsername: {\n        type: \"string\"\n    },\n    raw: {\n        default: false,\n        type: \"boolean\"\n    },\n    readConcern: {\n        transform ({ values: [value], options }) {\n            if (value instanceof read_concern_1.ReadConcern || (0, utils_1.isRecord)(value, [\n                \"level\"\n            ])) {\n                return read_concern_1.ReadConcern.fromOptions({\n                    ...options.readConcern,\n                    ...value\n                });\n            }\n            throw new error_1.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(value)}`);\n        }\n    },\n    readConcernLevel: {\n        target: \"readConcern\",\n        transform ({ values: [level], options }) {\n            return read_concern_1.ReadConcern.fromOptions({\n                ...options.readConcern,\n                level: level\n            });\n        }\n    },\n    readPreference: {\n        default: read_preference_1.ReadPreference.primary,\n        transform ({ values: [value], options }) {\n            if (value instanceof read_preference_1.ReadPreference) {\n                return read_preference_1.ReadPreference.fromOptions({\n                    readPreference: {\n                        ...options.readPreference,\n                        ...value\n                    },\n                    ...value\n                });\n            }\n            if ((0, utils_1.isRecord)(value, [\n                \"mode\"\n            ])) {\n                const rp = read_preference_1.ReadPreference.fromOptions({\n                    readPreference: {\n                        ...options.readPreference,\n                        ...value\n                    },\n                    ...value\n                });\n                if (rp) return rp;\n                else throw new error_1.MongoParseError(`Cannot make read preference from ${JSON.stringify(value)}`);\n            }\n            if (typeof value === \"string\") {\n                const rpOpts = {\n                    hedge: options.readPreference?.hedge,\n                    maxStalenessSeconds: options.readPreference?.maxStalenessSeconds\n                };\n                return new read_preference_1.ReadPreference(value, options.readPreference?.tags, rpOpts);\n            }\n            throw new error_1.MongoParseError(`Unknown ReadPreference value: ${value}`);\n        }\n    },\n    readPreferenceTags: {\n        target: \"readPreference\",\n        transform ({ values, options }) {\n            const tags = Array.isArray(values[0]) ? values[0] : values;\n            const readPreferenceTags = [];\n            for (const tag of tags){\n                const readPreferenceTag = Object.create(null);\n                if (typeof tag === \"string\") {\n                    for (const [k, v] of entriesFromString(tag)){\n                        readPreferenceTag[k] = v;\n                    }\n                }\n                if ((0, utils_1.isRecord)(tag)) {\n                    for (const [k, v] of Object.entries(tag)){\n                        readPreferenceTag[k] = v;\n                    }\n                }\n                readPreferenceTags.push(readPreferenceTag);\n            }\n            return read_preference_1.ReadPreference.fromOptions({\n                readPreference: options.readPreference,\n                readPreferenceTags\n            });\n        }\n    },\n    replicaSet: {\n        type: \"string\"\n    },\n    retryReads: {\n        default: true,\n        type: \"boolean\"\n    },\n    retryWrites: {\n        default: true,\n        type: \"boolean\"\n    },\n    serializeFunctions: {\n        type: \"boolean\"\n    },\n    serverSelectionTimeoutMS: {\n        default: 30000,\n        type: \"uint\"\n    },\n    servername: {\n        type: \"string\"\n    },\n    socketTimeoutMS: {\n        default: 0,\n        type: \"uint\"\n    },\n    srvMaxHosts: {\n        type: \"uint\",\n        default: 0\n    },\n    srvServiceName: {\n        type: \"string\",\n        default: \"mongodb\"\n    },\n    ssl: {\n        target: \"tls\",\n        type: \"boolean\"\n    },\n    sslCA: {\n        deprecated: \"sslCA is deprecated and will be removed in the next major version. Please use tlsCAFile instead.\",\n        target: \"ca\",\n        transform ({ values: [value] }) {\n            return fs.readFileSync(String(value), {\n                encoding: \"ascii\"\n            });\n        }\n    },\n    sslCRL: {\n        deprecated: \"sslCRL is deprecated and will be removed in the next major version and be replaced by tlsCRLFile in that release.\",\n        target: \"crl\",\n        transform ({ values: [value] }) {\n            return fs.readFileSync(String(value), {\n                encoding: \"ascii\"\n            });\n        }\n    },\n    sslCert: {\n        deprecated: \"sslCert is deprecated and will be removed in the next major version. Please use tlsCertificateKeyFile instead.\",\n        target: \"cert\",\n        transform ({ values: [value] }) {\n            return fs.readFileSync(String(value), {\n                encoding: \"ascii\"\n            });\n        }\n    },\n    sslKey: {\n        deprecated: \"sslKey is deprecated and will be removed in the next major version. Please use tlsCertificateKeyFile instead.\",\n        target: \"key\",\n        transform ({ values: [value] }) {\n            return fs.readFileSync(String(value), {\n                encoding: \"ascii\"\n            });\n        }\n    },\n    sslPass: {\n        deprecated: \"sslPass is deprecated and will be removed in the next major version. Please use tlsCertificateKeyFilePassword instead.\",\n        target: \"passphrase\",\n        type: \"string\"\n    },\n    sslValidate: {\n        deprecated: \"sslValidate is deprecated and will be removed in the next major version. Please use tlsAllowInvalidCertificates instead.\",\n        target: \"rejectUnauthorized\",\n        type: \"boolean\"\n    },\n    tls: {\n        type: \"boolean\"\n    },\n    tlsAllowInvalidCertificates: {\n        target: \"rejectUnauthorized\",\n        transform ({ name, values: [value] }) {\n            // allowInvalidCertificates is the inverse of rejectUnauthorized\n            return !getBoolean(name, value);\n        }\n    },\n    tlsAllowInvalidHostnames: {\n        target: \"checkServerIdentity\",\n        transform ({ name, values: [value] }) {\n            // tlsAllowInvalidHostnames means setting the checkServerIdentity function to a noop\n            return getBoolean(name, value) ? ()=>undefined : undefined;\n        }\n    },\n    tlsCAFile: {\n        target: \"ca\",\n        transform ({ values: [value] }) {\n            return fs.readFileSync(String(value), {\n                encoding: \"ascii\"\n            });\n        }\n    },\n    tlsCertificateFile: {\n        deprecated: \"tlsCertificateFile is deprecated and will be removed in the next major version. Please use tlsCertificateKeyFile instead.\",\n        target: \"cert\",\n        transform ({ values: [value] }) {\n            return fs.readFileSync(String(value), {\n                encoding: \"ascii\"\n            });\n        }\n    },\n    tlsCertificateKeyFile: {\n        target: \"key\",\n        transform ({ values: [value] }) {\n            return fs.readFileSync(String(value), {\n                encoding: \"ascii\"\n            });\n        }\n    },\n    tlsCertificateKeyFilePassword: {\n        target: \"passphrase\",\n        type: \"any\"\n    },\n    tlsInsecure: {\n        transform ({ name, options, values: [value] }) {\n            const tlsInsecure = getBoolean(name, value);\n            if (tlsInsecure) {\n                options.checkServerIdentity = ()=>undefined;\n                options.rejectUnauthorized = false;\n            } else {\n                options.checkServerIdentity = options.tlsAllowInvalidHostnames ? ()=>undefined : undefined;\n                options.rejectUnauthorized = options.tlsAllowInvalidCertificates ? false : true;\n            }\n            return tlsInsecure;\n        }\n    },\n    w: {\n        target: \"writeConcern\",\n        transform ({ values: [value], options }) {\n            return write_concern_1.WriteConcern.fromOptions({\n                writeConcern: {\n                    ...options.writeConcern,\n                    w: value\n                }\n            });\n        }\n    },\n    waitQueueTimeoutMS: {\n        default: 0,\n        type: \"uint\"\n    },\n    writeConcern: {\n        target: \"writeConcern\",\n        transform ({ values: [value], options }) {\n            if ((0, utils_1.isRecord)(value) || value instanceof write_concern_1.WriteConcern) {\n                return write_concern_1.WriteConcern.fromOptions({\n                    writeConcern: {\n                        ...options.writeConcern,\n                        ...value\n                    }\n                });\n            } else if (value === \"majority\" || typeof value === \"number\") {\n                return write_concern_1.WriteConcern.fromOptions({\n                    writeConcern: {\n                        ...options.writeConcern,\n                        w: value\n                    }\n                });\n            }\n            throw new error_1.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(value)}`);\n        }\n    },\n    wtimeout: {\n        deprecated: \"Please use wtimeoutMS instead\",\n        target: \"writeConcern\",\n        transform ({ values: [value], options }) {\n            const wc = write_concern_1.WriteConcern.fromOptions({\n                writeConcern: {\n                    ...options.writeConcern,\n                    wtimeout: getUIntFromOptions(\"wtimeout\", value)\n                }\n            });\n            if (wc) return wc;\n            throw new error_1.MongoParseError(`Cannot make WriteConcern from wtimeout`);\n        }\n    },\n    wtimeoutMS: {\n        target: \"writeConcern\",\n        transform ({ values: [value], options }) {\n            const wc = write_concern_1.WriteConcern.fromOptions({\n                writeConcern: {\n                    ...options.writeConcern,\n                    wtimeoutMS: getUIntFromOptions(\"wtimeoutMS\", value)\n                }\n            });\n            if (wc) return wc;\n            throw new error_1.MongoParseError(`Cannot make WriteConcern from wtimeout`);\n        }\n    },\n    zlibCompressionLevel: {\n        default: 0,\n        type: \"int\"\n    },\n    // Custom types for modifying core behavior\n    connectionType: {\n        type: \"any\"\n    },\n    srvPoller: {\n        type: \"any\"\n    },\n    // Accepted NodeJS Options\n    minDHSize: {\n        type: \"any\"\n    },\n    pskCallback: {\n        type: \"any\"\n    },\n    secureContext: {\n        type: \"any\"\n    },\n    enableTrace: {\n        type: \"any\"\n    },\n    requestCert: {\n        type: \"any\"\n    },\n    rejectUnauthorized: {\n        type: \"any\"\n    },\n    checkServerIdentity: {\n        type: \"any\"\n    },\n    ALPNProtocols: {\n        type: \"any\"\n    },\n    SNICallback: {\n        type: \"any\"\n    },\n    session: {\n        type: \"any\"\n    },\n    requestOCSP: {\n        type: \"any\"\n    },\n    localAddress: {\n        type: \"any\"\n    },\n    localPort: {\n        type: \"any\"\n    },\n    hints: {\n        type: \"any\"\n    },\n    lookup: {\n        type: \"any\"\n    },\n    ca: {\n        type: \"any\"\n    },\n    cert: {\n        type: \"any\"\n    },\n    ciphers: {\n        type: \"any\"\n    },\n    crl: {\n        type: \"any\"\n    },\n    ecdhCurve: {\n        type: \"any\"\n    },\n    key: {\n        type: \"any\"\n    },\n    passphrase: {\n        type: \"any\"\n    },\n    pfx: {\n        type: \"any\"\n    },\n    secureProtocol: {\n        type: \"any\"\n    },\n    index: {\n        type: \"any\"\n    },\n    // Legacy Options, these are unused but left here to avoid errors with CSFLE lib\n    useNewUrlParser: {\n        type: \"boolean\"\n    },\n    useUnifiedTopology: {\n        type: \"boolean\"\n    },\n    // MongoLogger\n    // TODO(NODE-4849): Tighten the type of mongodbLogPath\n    mongodbLogPath: {\n        type: \"any\"\n    }\n};\nexports.DEFAULT_OPTIONS = new CaseInsensitiveMap(Object.entries(exports.OPTIONS).filter(([, descriptor])=>descriptor.default != null).map(([k, d])=>[\n        k,\n        d.default\n    ]));\n/**\n * Set of permitted feature flags\n * @internal\n */ exports.FEATURE_FLAGS = new Set([\n    Symbol.for(\"@@mdb.skipPingOnConnect\"),\n    Symbol.for(\"@@mdb.enableMongoLogger\"),\n    Symbol.for(\"@@mdb.internalLoggerConfig\")\n]); //# sourceMappingURL=connection_string.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY29ubmVjdGlvbl9zdHJpbmcuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHFCQUFxQixHQUFHQSx1QkFBdUIsR0FBR0EsZUFBZSxHQUFHQSxvQkFBb0IsR0FBR0Esd0JBQXdCLEdBQUcsS0FBSztBQUMzSCxNQUFNTyxNQUFNQyxtQkFBT0EsQ0FBQyxnQkFBSztBQUN6QixNQUFNQyxLQUFLRCxtQkFBT0EsQ0FBQyxjQUFJO0FBQ3ZCLE1BQU1FLGtDQUFrQ0YsbUJBQU9BLENBQUMsc0dBQStCO0FBQy9FLE1BQU1HLFFBQVFILG1CQUFPQSxDQUFDLGdCQUFLO0FBQzNCLE1BQU1JLHNCQUFzQkosbUJBQU9BLENBQUMsc0dBQStCO0FBQ25FLE1BQU1LLGNBQWNMLG1CQUFPQSxDQUFDLHNGQUF1QjtBQUNuRCxNQUFNTSxvQkFBb0JOLG1CQUFPQSxDQUFDLDRHQUFrQztBQUNwRSxNQUFNTyxnQkFBZ0JQLG1CQUFPQSxDQUFDLDRHQUFrQztBQUNoRSxNQUFNUSxjQUFjUixtQkFBT0EsQ0FBQyxrRUFBYTtBQUN6QyxNQUFNUyxVQUFVVCxtQkFBT0EsQ0FBQywwREFBUztBQUNqQyxNQUFNVSxpQkFBaUJWLG1CQUFPQSxDQUFDLHdFQUFnQjtBQUMvQyxNQUFNVyxpQkFBaUJYLG1CQUFPQSxDQUFDLHdFQUFnQjtBQUMvQyxNQUFNWSxpQkFBaUJaLG1CQUFPQSxDQUFDLHdFQUFnQjtBQUMvQyxNQUFNYSxvQkFBb0JiLG1CQUFPQSxDQUFDLDhFQUFtQjtBQUNyRCxNQUFNYyxVQUFVZCxtQkFBT0EsQ0FBQywwREFBUztBQUNqQyxNQUFNZSxrQkFBa0JmLG1CQUFPQSxDQUFDLDBFQUFpQjtBQUNqRCxNQUFNZ0Isb0JBQW9CO0lBQUM7SUFBYztJQUFjO0NBQWU7QUFDdEUsTUFBTUMsdUJBQXVCO0FBQzdCLE1BQU1DLHVCQUF1QjtBQUM3QixNQUFNQyw2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b0JBQW9CO1FBQUVwSSxNQUFNO0lBQVU7SUFDdEMsY0FBYztJQUNkLHNEQUFzRDtJQUN0RFIsZ0JBQWdCO1FBQUVRLE1BQU07SUFBTTtBQUNsQztBQUNBL00sdUJBQXVCLEdBQUcsSUFBSWdHLG1CQUFtQmxHLE9BQU9xRyxPQUFPLENBQUNuRyxRQUFRSSxPQUFPLEVBQzFFOEgsTUFBTSxDQUFDLENBQUMsR0FBR3FCLFdBQVcsR0FBS0EsV0FBV3hDLE9BQU8sSUFBSSxNQUNqRHRFLEdBQUcsQ0FBQyxDQUFDLENBQUMyRCxHQUFHZ1AsRUFBRSxHQUFLO1FBQUNoUDtRQUFHZ1AsRUFBRXJPLE9BQU87S0FBQztBQUNuQzs7O0NBR0MsR0FDRC9HLHFCQUFxQixHQUFHLElBQUlpRixJQUFJO0lBQzVCeUcsT0FBT0MsR0FBRyxDQUFDO0lBQ1hELE9BQU9DLEdBQUcsQ0FBQztJQUNYRCxPQUFPQyxHQUFHLENBQUM7Q0FDZCxHQUNELDZDQUE2QyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jb25uZWN0aW9uX3N0cmluZy5qcz80ODUyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5GRUFUVVJFX0ZMQUdTID0gZXhwb3J0cy5ERUZBVUxUX09QVElPTlMgPSBleHBvcnRzLk9QVElPTlMgPSBleHBvcnRzLnBhcnNlT3B0aW9ucyA9IGV4cG9ydHMucmVzb2x2ZVNSVlJlY29yZCA9IHZvaWQgMDtcbmNvbnN0IGRucyA9IHJlcXVpcmUoXCJkbnNcIik7XG5jb25zdCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcbmNvbnN0IG1vbmdvZGJfY29ubmVjdGlvbl9zdHJpbmdfdXJsXzEgPSByZXF1aXJlKFwibW9uZ29kYi1jb25uZWN0aW9uLXN0cmluZy11cmxcIik7XG5jb25zdCB1cmxfMSA9IHJlcXVpcmUoXCJ1cmxcIik7XG5jb25zdCBtb25nb19jcmVkZW50aWFsc18xID0gcmVxdWlyZShcIi4vY21hcC9hdXRoL21vbmdvX2NyZWRlbnRpYWxzXCIpO1xuY29uc3QgcHJvdmlkZXJzXzEgPSByZXF1aXJlKFwiLi9jbWFwL2F1dGgvcHJvdmlkZXJzXCIpO1xuY29uc3QgY2xpZW50X21ldGFkYXRhXzEgPSByZXF1aXJlKFwiLi9jbWFwL2hhbmRzaGFrZS9jbGllbnRfbWV0YWRhdGFcIik7XG5jb25zdCBjb21wcmVzc2lvbl8xID0gcmVxdWlyZShcIi4vY21hcC93aXJlX3Byb3RvY29sL2NvbXByZXNzaW9uXCIpO1xuY29uc3QgZW5jcnlwdGVyXzEgPSByZXF1aXJlKFwiLi9lbmNyeXB0ZXJcIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4vZXJyb3JcIik7XG5jb25zdCBtb25nb19jbGllbnRfMSA9IHJlcXVpcmUoXCIuL21vbmdvX2NsaWVudFwiKTtcbmNvbnN0IG1vbmdvX2xvZ2dlcl8xID0gcmVxdWlyZShcIi4vbW9uZ29fbG9nZ2VyXCIpO1xuY29uc3QgcmVhZF9jb25jZXJuXzEgPSByZXF1aXJlKFwiLi9yZWFkX2NvbmNlcm5cIik7XG5jb25zdCByZWFkX3ByZWZlcmVuY2VfMSA9IHJlcXVpcmUoXCIuL3JlYWRfcHJlZmVyZW5jZVwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi91dGlsc1wiKTtcbmNvbnN0IHdyaXRlX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuL3dyaXRlX2NvbmNlcm5cIik7XG5jb25zdCBWQUxJRF9UWFRfUkVDT1JEUyA9IFsnYXV0aFNvdXJjZScsICdyZXBsaWNhU2V0JywgJ2xvYWRCYWxhbmNlZCddO1xuY29uc3QgTEJfU0lOR0xFX0hPU1RfRVJST1IgPSAnbG9hZEJhbGFuY2VkIG9wdGlvbiBvbmx5IHN1cHBvcnRlZCB3aXRoIGEgc2luZ2xlIGhvc3QgaW4gdGhlIFVSSSc7XG5jb25zdCBMQl9SRVBMSUNBX1NFVF9FUlJPUiA9ICdsb2FkQmFsYW5jZWQgb3B0aW9uIG5vdCBzdXBwb3J0ZWQgd2l0aCBhIHJlcGxpY2FTZXQgb3B0aW9uJztcbmNvbnN0IExCX0RJUkVDVF9DT05ORUNUSU9OX0VSUk9SID0gJ2xvYWRCYWxhbmNlZCBvcHRpb24gbm90IHN1cHBvcnRlZCB3aGVuIGRpcmVjdENvbm5lY3Rpb24gaXMgcHJvdmlkZWQnO1xuLyoqXG4gKiBMb29rdXAgYSBgbW9uZ29kYitzcnZgIGNvbm5lY3Rpb24gc3RyaW5nLCBjb21iaW5lIHRoZSBwYXJ0cyBhbmQgcmVwYXJzZSBpdCBhcyBhIG5vcm1hbFxuICogY29ubmVjdGlvbiBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHVyaSAtIFRoZSBjb25uZWN0aW9uIHN0cmluZyB0byBwYXJzZVxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCB1c2VyIHByb3ZpZGVkIGNvbm5lY3Rpb24gc3RyaW5nIG9wdGlvbnNcbiAqL1xuYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZVNSVlJlY29yZChvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnNydkhvc3QgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoJ09wdGlvbiBcInNydkhvc3RcIiBtdXN0IG5vdCBiZSBlbXB0eScpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5zcnZIb3N0LnNwbGl0KCcuJykubGVuZ3RoIDwgMykge1xuICAgICAgICAvLyBUT0RPKE5PREUtMzQ4NCk6IFJlcGxhY2Ugd2l0aCBNb25nb0Nvbm5lY3Rpb25TdHJpbmdFcnJvclxuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKCdVUkkgbXVzdCBpbmNsdWRlIGhvc3RuYW1lLCBkb21haW4gbmFtZSwgYW5kIHRsZCcpO1xuICAgIH1cbiAgICAvLyBSZXNvbHZlIHRoZSBTUlYgcmVjb3JkIGFuZCB1c2UgdGhlIHJlc3VsdCBhcyB0aGUgbGlzdCBvZiBob3N0cyB0byBjb25uZWN0IHRvLlxuICAgIGNvbnN0IGxvb2t1cEFkZHJlc3MgPSBvcHRpb25zLnNydkhvc3Q7XG4gICAgY29uc3QgYWRkcmVzc2VzID0gYXdhaXQgZG5zLnByb21pc2VzLnJlc29sdmVTcnYoYF8ke29wdGlvbnMuc3J2U2VydmljZU5hbWV9Ll90Y3AuJHtsb29rdXBBZGRyZXNzfWApO1xuICAgIGlmIChhZGRyZXNzZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoJ05vIGFkZHJlc3NlcyBmb3VuZCBhdCBob3N0Jyk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgeyBuYW1lIH0gb2YgYWRkcmVzc2VzKSB7XG4gICAgICAgIGlmICghKDAsIHV0aWxzXzEubWF0Y2hlc1BhcmVudERvbWFpbikobmFtZSwgbG9va3VwQWRkcmVzcykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoJ1NlcnZlciByZWNvcmQgZG9lcyBub3Qgc2hhcmUgaG9zdG5hbWUgd2l0aCBwYXJlbnQgVVJJJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaG9zdEFkZHJlc3NlcyA9IGFkZHJlc3Nlcy5tYXAociA9PiB1dGlsc18xLkhvc3RBZGRyZXNzLmZyb21TdHJpbmcoYCR7ci5uYW1lfToke3IucG9ydCA/PyAyNzAxN31gKSk7XG4gICAgdmFsaWRhdGVMb2FkQmFsYW5jZWRPcHRpb25zKGhvc3RBZGRyZXNzZXMsIG9wdGlvbnMsIHRydWUpO1xuICAgIC8vIFJlc29sdmUgVFhUIHJlY29yZCBhbmQgYWRkIG9wdGlvbnMgZnJvbSB0aGVyZSBpZiB0aGV5IGV4aXN0LlxuICAgIGxldCByZWNvcmQ7XG4gICAgdHJ5IHtcbiAgICAgICAgcmVjb3JkID0gYXdhaXQgZG5zLnByb21pc2VzLnJlc29sdmVUeHQobG9va3VwQWRkcmVzcyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IuY29kZSAhPT0gJ0VOT0RBVEEnICYmIGVycm9yLmNvZGUgIT09ICdFTk9URk9VTkQnKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaG9zdEFkZHJlc3NlcztcbiAgICB9XG4gICAgaWYgKHJlY29yZC5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcignTXVsdGlwbGUgdGV4dCByZWNvcmRzIG5vdCBhbGxvd2VkJyk7XG4gICAgfVxuICAgIGNvbnN0IHR4dFJlY29yZE9wdGlvbnMgPSBuZXcgdXJsXzEuVVJMU2VhcmNoUGFyYW1zKHJlY29yZFswXS5qb2luKCcnKSk7XG4gICAgY29uc3QgdHh0UmVjb3JkT3B0aW9uS2V5cyA9IFsuLi50eHRSZWNvcmRPcHRpb25zLmtleXMoKV07XG4gICAgaWYgKHR4dFJlY29yZE9wdGlvbktleXMuc29tZShrZXkgPT4gIVZBTElEX1RYVF9SRUNPUkRTLmluY2x1ZGVzKGtleSkpKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgVGV4dCByZWNvcmQgbWF5IG9ubHkgc2V0IGFueSBvZjogJHtWQUxJRF9UWFRfUkVDT1JEUy5qb2luKCcsICcpfWApO1xuICAgIH1cbiAgICBpZiAoVkFMSURfVFhUX1JFQ09SRFMuc29tZShvcHRpb24gPT4gdHh0UmVjb3JkT3B0aW9ucy5nZXQob3B0aW9uKSA9PT0gJycpKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcignQ2Fubm90IGhhdmUgZW1wdHkgVVJJIHBhcmFtcyBpbiBETlMgVFhUIFJlY29yZCcpO1xuICAgIH1cbiAgICBjb25zdCBzb3VyY2UgPSB0eHRSZWNvcmRPcHRpb25zLmdldCgnYXV0aFNvdXJjZScpID8/IHVuZGVmaW5lZDtcbiAgICBjb25zdCByZXBsaWNhU2V0ID0gdHh0UmVjb3JkT3B0aW9ucy5nZXQoJ3JlcGxpY2FTZXQnKSA/PyB1bmRlZmluZWQ7XG4gICAgY29uc3QgbG9hZEJhbGFuY2VkID0gdHh0UmVjb3JkT3B0aW9ucy5nZXQoJ2xvYWRCYWxhbmNlZCcpID8/IHVuZGVmaW5lZDtcbiAgICBpZiAoIW9wdGlvbnMudXNlclNwZWNpZmllZEF1dGhTb3VyY2UgJiZcbiAgICAgICAgc291cmNlICYmXG4gICAgICAgIG9wdGlvbnMuY3JlZGVudGlhbHMgJiZcbiAgICAgICAgIXByb3ZpZGVyc18xLkFVVEhfTUVDSFNfQVVUSF9TUkNfRVhURVJOQUwuaGFzKG9wdGlvbnMuY3JlZGVudGlhbHMubWVjaGFuaXNtKSkge1xuICAgICAgICBvcHRpb25zLmNyZWRlbnRpYWxzID0gbW9uZ29fY3JlZGVudGlhbHNfMS5Nb25nb0NyZWRlbnRpYWxzLm1lcmdlKG9wdGlvbnMuY3JlZGVudGlhbHMsIHsgc291cmNlIH0pO1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMudXNlclNwZWNpZmllZFJlcGxpY2FTZXQgJiYgcmVwbGljYVNldCkge1xuICAgICAgICBvcHRpb25zLnJlcGxpY2FTZXQgPSByZXBsaWNhU2V0O1xuICAgIH1cbiAgICBpZiAobG9hZEJhbGFuY2VkID09PSAndHJ1ZScpIHtcbiAgICAgICAgb3B0aW9ucy5sb2FkQmFsYW5jZWQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5yZXBsaWNhU2V0ICYmIG9wdGlvbnMuc3J2TWF4SG9zdHMgPiAwKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcignQ2Fubm90IGNvbWJpbmUgcmVwbGljYVNldCBvcHRpb24gd2l0aCBzcnZNYXhIb3N0cycpO1xuICAgIH1cbiAgICB2YWxpZGF0ZUxvYWRCYWxhbmNlZE9wdGlvbnMoaG9zdEFkZHJlc3Nlcywgb3B0aW9ucywgdHJ1ZSk7XG4gICAgcmV0dXJuIGhvc3RBZGRyZXNzZXM7XG59XG5leHBvcnRzLnJlc29sdmVTUlZSZWNvcmQgPSByZXNvbHZlU1JWUmVjb3JkO1xuLyoqXG4gKiBDaGVja3MgaWYgVExTIG9wdGlvbnMgYXJlIHZhbGlkXG4gKlxuICogQHBhcmFtIGFsbE9wdGlvbnMgLSBBbGwgb3B0aW9ucyBwcm92aWRlZCBieSB1c2VyIG9yIGluY2x1ZGVkIGluIGRlZmF1bHQgb3B0aW9ucyBtYXBcbiAqIEB0aHJvd3MgTW9uZ29BUElFcnJvciBpZiBUTFMgb3B0aW9ucyBhcmUgaW52YWxpZFxuICovXG5mdW5jdGlvbiBjaGVja1RMU09wdGlvbnMoYWxsT3B0aW9ucykge1xuICAgIGlmICghYWxsT3B0aW9ucylcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGNoZWNrID0gKGEsIGIpID0+IHtcbiAgICAgICAgaWYgKGFsbE9wdGlvbnMuaGFzKGEpICYmIGFsbE9wdGlvbnMuaGFzKGIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKGBUaGUgJyR7YX0nIG9wdGlvbiBjYW5ub3QgYmUgdXNlZCB3aXRoIHRoZSAnJHtifScgb3B0aW9uYCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNoZWNrKCd0bHNJbnNlY3VyZScsICd0bHNBbGxvd0ludmFsaWRDZXJ0aWZpY2F0ZXMnKTtcbiAgICBjaGVjaygndGxzSW5zZWN1cmUnLCAndGxzQWxsb3dJbnZhbGlkSG9zdG5hbWVzJyk7XG4gICAgY2hlY2soJ3Rsc0luc2VjdXJlJywgJ3Rsc0Rpc2FibGVDZXJ0aWZpY2F0ZVJldm9jYXRpb25DaGVjaycpO1xuICAgIGNoZWNrKCd0bHNJbnNlY3VyZScsICd0bHNEaXNhYmxlT0NTUEVuZHBvaW50Q2hlY2snKTtcbiAgICBjaGVjaygndGxzQWxsb3dJbnZhbGlkQ2VydGlmaWNhdGVzJywgJ3Rsc0Rpc2FibGVDZXJ0aWZpY2F0ZVJldm9jYXRpb25DaGVjaycpO1xuICAgIGNoZWNrKCd0bHNBbGxvd0ludmFsaWRDZXJ0aWZpY2F0ZXMnLCAndGxzRGlzYWJsZU9DU1BFbmRwb2ludENoZWNrJyk7XG4gICAgY2hlY2soJ3Rsc0Rpc2FibGVDZXJ0aWZpY2F0ZVJldm9jYXRpb25DaGVjaycsICd0bHNEaXNhYmxlT0NTUEVuZHBvaW50Q2hlY2snKTtcbn1cbmNvbnN0IFRSVVRIUyA9IG5ldyBTZXQoWyd0cnVlJywgJ3QnLCAnMScsICd5JywgJ3llcyddKTtcbmNvbnN0IEZBTFNFSE9PRFMgPSBuZXcgU2V0KFsnZmFsc2UnLCAnZicsICcwJywgJ24nLCAnbm8nLCAnLTEnXSk7XG5mdW5jdGlvbiBnZXRCb29sZWFuKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgY29uc3QgdmFsdWVTdHJpbmcgPSBTdHJpbmcodmFsdWUpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKFRSVVRIUy5oYXModmFsdWVTdHJpbmcpKSB7XG4gICAgICAgIGlmICh2YWx1ZVN0cmluZyAhPT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAoMCwgdXRpbHNfMS5lbWl0V2FybmluZ09uY2UpKGBkZXByZWNhdGVkIHZhbHVlIGZvciAke25hbWV9IDogJHt2YWx1ZVN0cmluZ30gLSBwbGVhc2UgdXBkYXRlIHRvICR7bmFtZX0gOiB0cnVlIGluc3RlYWRgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKEZBTFNFSE9PRFMuaGFzKHZhbHVlU3RyaW5nKSkge1xuICAgICAgICBpZiAodmFsdWVTdHJpbmcgIT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgICgwLCB1dGlsc18xLmVtaXRXYXJuaW5nT25jZSkoYGRlcHJlY2F0ZWQgdmFsdWUgZm9yICR7bmFtZX0gOiAke3ZhbHVlU3RyaW5nfSAtIHBsZWFzZSB1cGRhdGUgdG8gJHtuYW1lfSA6IGZhbHNlIGluc3RlYWRgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgRXhwZWN0ZWQgJHtuYW1lfSB0byBiZSBzdHJpbmdpZmllZCBib29sZWFuIHZhbHVlLCBnb3Q6ICR7dmFsdWV9YCk7XG59XG5mdW5jdGlvbiBnZXRJbnRGcm9tT3B0aW9ucyhuYW1lLCB2YWx1ZSkge1xuICAgIGNvbnN0IHBhcnNlZEludCA9ICgwLCB1dGlsc18xLnBhcnNlSW50ZWdlcikodmFsdWUpO1xuICAgIGlmIChwYXJzZWRJbnQgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcGFyc2VkSW50O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoYEV4cGVjdGVkICR7bmFtZX0gdG8gYmUgc3RyaW5naWZpZWQgaW50IHZhbHVlLCBnb3Q6ICR7dmFsdWV9YCk7XG59XG5mdW5jdGlvbiBnZXRVSW50RnJvbU9wdGlvbnMobmFtZSwgdmFsdWUpIHtcbiAgICBjb25zdCBwYXJzZWRWYWx1ZSA9IGdldEludEZyb21PcHRpb25zKG5hbWUsIHZhbHVlKTtcbiAgICBpZiAocGFyc2VkVmFsdWUgPCAwKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgJHtuYW1lfSBjYW4gb25seSBiZSBhIHBvc2l0aXZlIGludCB2YWx1ZSwgZ290OiAke3ZhbHVlfWApO1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkVmFsdWU7XG59XG5mdW5jdGlvbiogZW50cmllc0Zyb21TdHJpbmcodmFsdWUpIHtcbiAgICBjb25zdCBrZXlWYWx1ZVBhaXJzID0gdmFsdWUuc3BsaXQoJywnKTtcbiAgICBmb3IgKGNvbnN0IGtleVZhbHVlIG9mIGtleVZhbHVlUGFpcnMpIHtcbiAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0ga2V5VmFsdWUuc3BsaXQoLzooLiopLyk7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoJ0Nhbm5vdCBoYXZlIHVuZGVmaW5lZCB2YWx1ZXMgaW4ga2V5IHZhbHVlIHBhaXJzJyk7XG4gICAgICAgIH1cbiAgICAgICAgeWllbGQgW2tleSwgdmFsdWVdO1xuICAgIH1cbn1cbmNsYXNzIENhc2VJbnNlbnNpdGl2ZU1hcCBleHRlbmRzIE1hcCB7XG4gICAgY29uc3RydWN0b3IoZW50cmllcyA9IFtdKSB7XG4gICAgICAgIHN1cGVyKGVudHJpZXMubWFwKChbaywgdl0pID0+IFtrLnRvTG93ZXJDYXNlKCksIHZdKSk7XG4gICAgfVxuICAgIGhhcyhrKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5oYXMoay50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG4gICAgZ2V0KGspIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldChrLnRvTG93ZXJDYXNlKCkpO1xuICAgIH1cbiAgICBzZXQoaywgdikge1xuICAgICAgICByZXR1cm4gc3VwZXIuc2V0KGsudG9Mb3dlckNhc2UoKSwgdik7XG4gICAgfVxuICAgIGRlbGV0ZShrKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5kZWxldGUoay50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG59XG5mdW5jdGlvbiBwYXJzZU9wdGlvbnModXJpLCBtb25nb0NsaWVudCA9IHVuZGVmaW5lZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKG1vbmdvQ2xpZW50ICE9IG51bGwgJiYgIShtb25nb0NsaWVudCBpbnN0YW5jZW9mIG1vbmdvX2NsaWVudF8xLk1vbmdvQ2xpZW50KSkge1xuICAgICAgICBvcHRpb25zID0gbW9uZ29DbGllbnQ7XG4gICAgICAgIG1vbmdvQ2xpZW50ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyB2YWxpZGF0ZSBCU09OT3B0aW9uc1xuICAgIGlmIChvcHRpb25zLnVzZUJpZ0ludDY0ICYmIHR5cGVvZiBvcHRpb25zLnByb21vdGVMb25ncyA9PT0gJ2Jvb2xlYW4nICYmICFvcHRpb25zLnByb21vdGVMb25ncykge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKCdNdXN0IHJlcXVlc3QgZWl0aGVyIGJpZ2ludCBvciBMb25nIGZvciBpbnQ2NCBkZXNlcmlhbGl6YXRpb24nKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMudXNlQmlnSW50NjQgJiYgdHlwZW9mIG9wdGlvbnMucHJvbW90ZVZhbHVlcyA9PT0gJ2Jvb2xlYW4nICYmICFvcHRpb25zLnByb21vdGVWYWx1ZXMpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignTXVzdCByZXF1ZXN0IGVpdGhlciBiaWdpbnQgb3IgTG9uZyBmb3IgaW50NjQgZGVzZXJpYWxpemF0aW9uJyk7XG4gICAgfVxuICAgIGNvbnN0IHVybCA9IG5ldyBtb25nb2RiX2Nvbm5lY3Rpb25fc3RyaW5nX3VybF8xLmRlZmF1bHQodXJpKTtcbiAgICBjb25zdCB7IGhvc3RzLCBpc1NSViB9ID0gdXJsO1xuICAgIGNvbnN0IG1vbmdvT3B0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgLy8gRmVhdHVyZSBmbGFnc1xuICAgIGZvciAoY29uc3QgZmxhZyBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9wdGlvbnMpKSB7XG4gICAgICAgIGlmIChleHBvcnRzLkZFQVRVUkVfRkxBR1MuaGFzKGZsYWcpKSB7XG4gICAgICAgICAgICBtb25nb09wdGlvbnNbZmxhZ10gPSBvcHRpb25zW2ZsYWddO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1vbmdvT3B0aW9ucy5ob3N0cyA9IGlzU1JWID8gW10gOiBob3N0cy5tYXAodXRpbHNfMS5Ib3N0QWRkcmVzcy5mcm9tU3RyaW5nKTtcbiAgICBjb25zdCB1cmxPcHRpb25zID0gbmV3IENhc2VJbnNlbnNpdGl2ZU1hcCgpO1xuICAgIGlmICh1cmwucGF0aG5hbWUgIT09ICcvJyAmJiB1cmwucGF0aG5hbWUgIT09ICcnKSB7XG4gICAgICAgIGNvbnN0IGRiTmFtZSA9IGRlY29kZVVSSUNvbXBvbmVudCh1cmwucGF0aG5hbWVbMF0gPT09ICcvJyA/IHVybC5wYXRobmFtZS5zbGljZSgxKSA6IHVybC5wYXRobmFtZSk7XG4gICAgICAgIGlmIChkYk5hbWUpIHtcbiAgICAgICAgICAgIHVybE9wdGlvbnMuc2V0KCdkYk5hbWUnLCBbZGJOYW1lXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHVybC51c2VybmFtZSAhPT0gJycpIHtcbiAgICAgICAgY29uc3QgYXV0aCA9IHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiBkZWNvZGVVUklDb21wb25lbnQodXJsLnVzZXJuYW1lKVxuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIHVybC5wYXNzd29yZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGF1dGgucGFzc3dvcmQgPSBkZWNvZGVVUklDb21wb25lbnQodXJsLnBhc3N3b3JkKTtcbiAgICAgICAgfVxuICAgICAgICB1cmxPcHRpb25zLnNldCgnYXV0aCcsIFthdXRoXSk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IG9mIHVybC5zZWFyY2hQYXJhbXMua2V5cygpKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IFsuLi51cmwuc2VhcmNoUGFyYW1zLmdldEFsbChrZXkpXTtcbiAgICAgICAgaWYgKHZhbHVlcy5pbmNsdWRlcygnJykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoJ1VSSSBjYW5ub3QgY29udGFpbiBvcHRpb25zIHdpdGggbm8gdmFsdWUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXVybE9wdGlvbnMuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIHVybE9wdGlvbnMuc2V0KGtleSwgdmFsdWVzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBvYmplY3RPcHRpb25zID0gbmV3IENhc2VJbnNlbnNpdGl2ZU1hcChPYmplY3QuZW50cmllcyhvcHRpb25zKS5maWx0ZXIoKFssIHZdKSA9PiB2ICE9IG51bGwpKTtcbiAgICAvLyBWYWxpZGF0ZSBvcHRpb25zIHRoYXQgY2FuIG9ubHkgYmUgcHJvdmlkZWQgYnkgb25lIG9mIHVyaSBvciBvYmplY3RcbiAgICBpZiAodXJsT3B0aW9ucy5oYXMoJ3NlcnZlckFwaScpKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcignVVJJIGNhbm5vdCBjb250YWluIGBzZXJ2ZXJBcGlgLCBpdCBjYW4gb25seSBiZSBwYXNzZWQgdG8gdGhlIGNsaWVudCcpO1xuICAgIH1cbiAgICBjb25zdCB1cmlNZWNoYW5pc21Qcm9wZXJ0aWVzID0gdXJsT3B0aW9ucy5nZXQoJ2F1dGhNZWNoYW5pc21Qcm9wZXJ0aWVzJyk7XG4gICAgaWYgKHVyaU1lY2hhbmlzbVByb3BlcnRpZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9wZXJ0eSBvZiB1cmlNZWNoYW5pc21Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBpZiAoLyhefCwpQUxMT1dFRF9IT1NUUzovLnRlc3QocHJvcGVydHkpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKCdBdXRoIG1lY2hhbmlzbSBwcm9wZXJ0eSBBTExPV0VEX0hPU1RTIGlzIG5vdCBhbGxvd2VkIGluIHRoZSBjb25uZWN0aW9uIHN0cmluZy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob2JqZWN0T3B0aW9ucy5oYXMoJ2xvYWRCYWxhbmNlZCcpKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcignbG9hZEJhbGFuY2VkIGlzIG9ubHkgYSB2YWxpZCBvcHRpb24gaW4gdGhlIFVSSScpO1xuICAgIH1cbiAgICAvLyBBbGwgb3B0aW9uIGNvbGxlY3Rpb25cbiAgICBjb25zdCBhbGxQcm92aWRlZE9wdGlvbnMgPSBuZXcgQ2FzZUluc2Vuc2l0aXZlTWFwKCk7XG4gICAgY29uc3QgYWxsUHJvdmlkZWRLZXlzID0gbmV3IFNldChbLi4udXJsT3B0aW9ucy5rZXlzKCksIC4uLm9iamVjdE9wdGlvbnMua2V5cygpXSk7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgYWxsUHJvdmlkZWRLZXlzKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xuICAgICAgICBjb25zdCBvYmplY3RPcHRpb25WYWx1ZSA9IG9iamVjdE9wdGlvbnMuZ2V0KGtleSk7XG4gICAgICAgIGlmIChvYmplY3RPcHRpb25WYWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICB2YWx1ZXMucHVzaChvYmplY3RPcHRpb25WYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXJsVmFsdWVzID0gdXJsT3B0aW9ucy5nZXQoa2V5KSA/PyBbXTtcbiAgICAgICAgdmFsdWVzLnB1c2goLi4udXJsVmFsdWVzKTtcbiAgICAgICAgYWxsUHJvdmlkZWRPcHRpb25zLnNldChrZXksIHZhbHVlcyk7XG4gICAgfVxuICAgIGNvbnN0IGRpZE1hcFRMU0NlcnRpZmljYXRlRmlsZSA9IGFsbFByb3ZpZGVkT3B0aW9ucy5oYXMoJ3Rsc0NlcnRpZmljYXRlS2V5RmlsZScpICYmXG4gICAgICAgICFhbGxQcm92aWRlZE9wdGlvbnMuaGFzKCd0bHNDZXJ0aWZpY2F0ZUZpbGUnKTtcbiAgICBpZiAoZGlkTWFwVExTQ2VydGlmaWNhdGVGaWxlKSB7XG4gICAgICAgIGFsbFByb3ZpZGVkT3B0aW9ucy5zZXQoJ3Rsc0NlcnRpZmljYXRlRmlsZScsIGFsbFByb3ZpZGVkT3B0aW9ucy5nZXQoJ3Rsc0NlcnRpZmljYXRlS2V5RmlsZScpKTtcbiAgICB9XG4gICAgaWYgKGFsbFByb3ZpZGVkT3B0aW9ucy5oYXMoJ3RscycpIHx8IGFsbFByb3ZpZGVkT3B0aW9ucy5oYXMoJ3NzbCcpKSB7XG4gICAgICAgIGNvbnN0IHRsc0FuZFNzbE9wdHMgPSAoYWxsUHJvdmlkZWRPcHRpb25zLmdldCgndGxzJykgfHwgW10pXG4gICAgICAgICAgICAuY29uY2F0KGFsbFByb3ZpZGVkT3B0aW9ucy5nZXQoJ3NzbCcpIHx8IFtdKVxuICAgICAgICAgICAgLm1hcChnZXRCb29sZWFuLmJpbmQobnVsbCwgJ3Rscy9zc2wnKSk7XG4gICAgICAgIGlmIChuZXcgU2V0KHRsc0FuZFNzbE9wdHMpLnNpemUgIT09IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcignQWxsIHZhbHVlcyBvZiB0bHMvc3NsIG11c3QgYmUgdGhlIHNhbWUuJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hlY2tUTFNPcHRpb25zKGFsbFByb3ZpZGVkT3B0aW9ucyk7XG4gICAgY29uc3QgdW5zdXBwb3J0ZWRPcHRpb25zID0gKDAsIHV0aWxzXzEuc2V0RGlmZmVyZW5jZSkoYWxsUHJvdmlkZWRLZXlzLCBBcnJheS5mcm9tKE9iamVjdC5rZXlzKGV4cG9ydHMuT1BUSU9OUykpLm1hcChzID0+IHMudG9Mb3dlckNhc2UoKSkpO1xuICAgIGlmICh1bnN1cHBvcnRlZE9wdGlvbnMuc2l6ZSAhPT0gMCkge1xuICAgICAgICBjb25zdCBvcHRpb25Xb3JkID0gdW5zdXBwb3J0ZWRPcHRpb25zLnNpemUgPiAxID8gJ29wdGlvbnMnIDogJ29wdGlvbic7XG4gICAgICAgIGNvbnN0IGlzT3JBcmUgPSB1bnN1cHBvcnRlZE9wdGlvbnMuc2l6ZSA+IDEgPyAnYXJlJyA6ICdpcyc7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgJHtvcHRpb25Xb3JkfSAke0FycmF5LmZyb20odW5zdXBwb3J0ZWRPcHRpb25zKS5qb2luKCcsICcpfSAke2lzT3JBcmV9IG5vdCBzdXBwb3J0ZWRgKTtcbiAgICB9XG4gICAgLy8gT3B0aW9uIHBhcnNpbmcgYW5kIHNldHRpbmdcbiAgICBmb3IgKGNvbnN0IFtrZXksIGRlc2NyaXB0b3JdIG9mIE9iamVjdC5lbnRyaWVzKGV4cG9ydHMuT1BUSU9OUykpIHtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gYWxsUHJvdmlkZWRPcHRpb25zLmdldChrZXkpO1xuICAgICAgICBpZiAoIXZhbHVlcyB8fCB2YWx1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBpZiAoZXhwb3J0cy5ERUZBVUxUX09QVElPTlMuaGFzKGtleSkpIHtcbiAgICAgICAgICAgICAgICBzZXRPcHRpb24obW9uZ29PcHRpb25zLCBrZXksIGRlc2NyaXB0b3IsIFtleHBvcnRzLkRFRkFVTFRfT1BUSU9OUy5nZXQoa2V5KV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgeyBkZXByZWNhdGVkIH0gPSBkZXNjcmlwdG9yO1xuICAgICAgICAgICAgY29uc3Qgc2hvdWxkRW1pdFRMU0NlcnRpZmljYXRlRmlsZURlcHJlY2F0aW9uID0gZGlkTWFwVExTQ2VydGlmaWNhdGVGaWxlICYmIGtleSA9PT0gJ3Rsc0NlcnRpZmljYXRlRmlsZSc7XG4gICAgICAgICAgICBpZiAoZGVwcmVjYXRlZCAmJiAhc2hvdWxkRW1pdFRMU0NlcnRpZmljYXRlRmlsZURlcHJlY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVwcmVjYXRlZE1zZyA9IHR5cGVvZiBkZXByZWNhdGVkID09PSAnc3RyaW5nJyA/IGA6ICR7ZGVwcmVjYXRlZH1gIDogJyc7XG4gICAgICAgICAgICAgICAgKDAsIHV0aWxzXzEuZW1pdFdhcm5pbmcpKGAke2tleX0gaXMgYSBkZXByZWNhdGVkIG9wdGlvbiR7ZGVwcmVjYXRlZE1zZ31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldE9wdGlvbihtb25nb09wdGlvbnMsIGtleSwgZGVzY3JpcHRvciwgdmFsdWVzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAobW9uZ29PcHRpb25zLmNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGNvbnN0IGlzR3NzYXBpID0gbW9uZ29PcHRpb25zLmNyZWRlbnRpYWxzLm1lY2hhbmlzbSA9PT0gcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX0dTU0FQSTtcbiAgICAgICAgY29uc3QgaXNYNTA5ID0gbW9uZ29PcHRpb25zLmNyZWRlbnRpYWxzLm1lY2hhbmlzbSA9PT0gcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX1g1MDk7XG4gICAgICAgIGNvbnN0IGlzQXdzID0gbW9uZ29PcHRpb25zLmNyZWRlbnRpYWxzLm1lY2hhbmlzbSA9PT0gcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX0FXUztcbiAgICAgICAgY29uc3QgaXNPaWRjID0gbW9uZ29PcHRpb25zLmNyZWRlbnRpYWxzLm1lY2hhbmlzbSA9PT0gcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX09JREM7XG4gICAgICAgIGlmICgoaXNHc3NhcGkgfHwgaXNYNTA5KSAmJlxuICAgICAgICAgICAgYWxsUHJvdmlkZWRPcHRpb25zLmhhcygnYXV0aFNvdXJjZScpICYmXG4gICAgICAgICAgICBtb25nb09wdGlvbnMuY3JlZGVudGlhbHMuc291cmNlICE9PSAnJGV4dGVybmFsJykge1xuICAgICAgICAgICAgLy8gSWYgYXV0aFNvdXJjZSB3YXMgZXhwbGljaXRseSBnaXZlbiBhbmQgaXRzIGluY29ycmVjdCwgd2UgZXJyb3JcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgYXV0aE1lY2hhbmlzbSAke21vbmdvT3B0aW9ucy5jcmVkZW50aWFscy5tZWNoYW5pc219IHJlcXVpcmVzIGFuIGF1dGhTb3VyY2Ugb2YgJyRleHRlcm5hbCdgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShpc0dzc2FwaSB8fCBpc1g1MDkgfHwgaXNBd3MgfHwgaXNPaWRjKSAmJlxuICAgICAgICAgICAgbW9uZ29PcHRpb25zLmRiTmFtZSAmJlxuICAgICAgICAgICAgIWFsbFByb3ZpZGVkT3B0aW9ucy5oYXMoJ2F1dGhTb3VyY2UnKSkge1xuICAgICAgICAgICAgLy8gaW5oZXJpdCB0aGUgZGJOYW1lIHVubGVzcyBHU1NBUEkgb3IgWDUwOSwgdGhlbiBzaWxlbnRseSBpZ25vcmUgZGJOYW1lXG4gICAgICAgICAgICAvLyBhbmQgdGhlcmUgd2FzIG5vIHNwZWNpZmljIGF1dGhTb3VyY2UgZ2l2ZW5cbiAgICAgICAgICAgIG1vbmdvT3B0aW9ucy5jcmVkZW50aWFscyA9IG1vbmdvX2NyZWRlbnRpYWxzXzEuTW9uZ29DcmVkZW50aWFscy5tZXJnZShtb25nb09wdGlvbnMuY3JlZGVudGlhbHMsIHtcbiAgICAgICAgICAgICAgICBzb3VyY2U6IG1vbmdvT3B0aW9ucy5kYk5hbWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0F3cyAmJiBtb25nb09wdGlvbnMuY3JlZGVudGlhbHMudXNlcm5hbWUgJiYgIW1vbmdvT3B0aW9ucy5jcmVkZW50aWFscy5wYXNzd29yZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcihgV2hlbiB1c2luZyAke21vbmdvT3B0aW9ucy5jcmVkZW50aWFscy5tZWNoYW5pc219IHBhc3N3b3JkIG11c3QgYmUgc2V0IHdoZW4gYSB1c2VybmFtZSBpcyBzcGVjaWZpZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBtb25nb09wdGlvbnMuY3JlZGVudGlhbHMudmFsaWRhdGUoKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIG9ubHkgYXV0aCByZWxhdGVkIG9wdGlvbiBwcm92aWRlZCB3YXMgYXV0aFNvdXJjZSwgaWYgc28gd2UgY2FuIHJlbW92ZSBjcmVkZW50aWFsc1xuICAgICAgICBpZiAobW9uZ29PcHRpb25zLmNyZWRlbnRpYWxzLnBhc3N3b3JkID09PSAnJyAmJlxuICAgICAgICAgICAgbW9uZ29PcHRpb25zLmNyZWRlbnRpYWxzLnVzZXJuYW1lID09PSAnJyAmJlxuICAgICAgICAgICAgbW9uZ29PcHRpb25zLmNyZWRlbnRpYWxzLm1lY2hhbmlzbSA9PT0gcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX0RFRkFVTFQgJiZcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKG1vbmdvT3B0aW9ucy5jcmVkZW50aWFscy5tZWNoYW5pc21Qcm9wZXJ0aWVzKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGRlbGV0ZSBtb25nb09wdGlvbnMuY3JlZGVudGlhbHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFtb25nb09wdGlvbnMuZGJOYW1lKSB7XG4gICAgICAgIC8vIGRiTmFtZSBkZWZhdWx0IGlzIGFwcGxpZWQgaGVyZSBiZWNhdXNlIG9mIHRoZSBjcmVkZW50aWFsIHZhbGlkYXRpb24gYWJvdmVcbiAgICAgICAgbW9uZ29PcHRpb25zLmRiTmFtZSA9ICd0ZXN0JztcbiAgICB9XG4gICAgdmFsaWRhdGVMb2FkQmFsYW5jZWRPcHRpb25zKGhvc3RzLCBtb25nb09wdGlvbnMsIGlzU1JWKTtcbiAgICBpZiAobW9uZ29DbGllbnQgJiYgbW9uZ29PcHRpb25zLmF1dG9FbmNyeXB0aW9uKSB7XG4gICAgICAgIGVuY3J5cHRlcl8xLkVuY3J5cHRlci5jaGVja0Zvck1vbmdvQ3J5cHQoKTtcbiAgICAgICAgbW9uZ29PcHRpb25zLmVuY3J5cHRlciA9IG5ldyBlbmNyeXB0ZXJfMS5FbmNyeXB0ZXIobW9uZ29DbGllbnQsIHVyaSwgb3B0aW9ucyk7XG4gICAgICAgIG1vbmdvT3B0aW9ucy5hdXRvRW5jcnlwdGVyID0gbW9uZ29PcHRpb25zLmVuY3J5cHRlci5hdXRvRW5jcnlwdGVyO1xuICAgIH1cbiAgICAvLyBQb3RlbnRpYWwgU1JWIE92ZXJyaWRlcyBhbmQgU1JWIGNvbm5lY3Rpb24gc3RyaW5nIHZhbGlkYXRpb25zXG4gICAgbW9uZ29PcHRpb25zLnVzZXJTcGVjaWZpZWRBdXRoU291cmNlID1cbiAgICAgICAgb2JqZWN0T3B0aW9ucy5oYXMoJ2F1dGhTb3VyY2UnKSB8fCB1cmxPcHRpb25zLmhhcygnYXV0aFNvdXJjZScpO1xuICAgIG1vbmdvT3B0aW9ucy51c2VyU3BlY2lmaWVkUmVwbGljYVNldCA9XG4gICAgICAgIG9iamVjdE9wdGlvbnMuaGFzKCdyZXBsaWNhU2V0JykgfHwgdXJsT3B0aW9ucy5oYXMoJ3JlcGxpY2FTZXQnKTtcbiAgICBpZiAoaXNTUlYpIHtcbiAgICAgICAgLy8gU1JWIFJlY29yZCBpcyByZXNvbHZlZCB1cG9uIGNvbm5lY3RpbmdcbiAgICAgICAgbW9uZ29PcHRpb25zLnNydkhvc3QgPSBob3N0c1swXTtcbiAgICAgICAgaWYgKG1vbmdvT3B0aW9ucy5kaXJlY3RDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKCdTUlYgVVJJIGRvZXMgbm90IHN1cHBvcnQgZGlyZWN0Q29ubmVjdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb25nb09wdGlvbnMuc3J2TWF4SG9zdHMgPiAwICYmIHR5cGVvZiBtb25nb09wdGlvbnMucmVwbGljYVNldCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcignQ2Fubm90IHVzZSBzcnZNYXhIb3N0cyBvcHRpb24gd2l0aCByZXBsaWNhU2V0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU1JWIHR1cm5zIG9uIFRMUyBieSBkZWZhdWx0LCBidXQgdXNlcnMgY2FuIG92ZXJyaWRlIGFuZCB0dXJuIGl0IG9mZlxuICAgICAgICBjb25zdCBub1VzZXJTcGVjaWZpZWRUTFMgPSAhb2JqZWN0T3B0aW9ucy5oYXMoJ3RscycpICYmICF1cmxPcHRpb25zLmhhcygndGxzJyk7XG4gICAgICAgIGNvbnN0IG5vVXNlclNwZWNpZmllZFNTTCA9ICFvYmplY3RPcHRpb25zLmhhcygnc3NsJykgJiYgIXVybE9wdGlvbnMuaGFzKCdzc2wnKTtcbiAgICAgICAgaWYgKG5vVXNlclNwZWNpZmllZFRMUyAmJiBub1VzZXJTcGVjaWZpZWRTU0wpIHtcbiAgICAgICAgICAgIG1vbmdvT3B0aW9ucy50bHMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB1c2VyU3BlY2lmaWVkU3J2T3B0aW9ucyA9IHVybE9wdGlvbnMuaGFzKCdzcnZNYXhIb3N0cycpIHx8XG4gICAgICAgICAgICBvYmplY3RPcHRpb25zLmhhcygnc3J2TWF4SG9zdHMnKSB8fFxuICAgICAgICAgICAgdXJsT3B0aW9ucy5oYXMoJ3NydlNlcnZpY2VOYW1lJykgfHxcbiAgICAgICAgICAgIG9iamVjdE9wdGlvbnMuaGFzKCdzcnZTZXJ2aWNlTmFtZScpO1xuICAgICAgICBpZiAodXNlclNwZWNpZmllZFNydk9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcignQ2Fubm90IHVzZSBzcnZNYXhIb3N0cyBvciBzcnZTZXJ2aWNlTmFtZSB3aXRoIGEgbm9uLXNydiBjb25uZWN0aW9uIHN0cmluZycpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChtb25nb09wdGlvbnMuZGlyZWN0Q29ubmVjdGlvbiAmJiBtb25nb09wdGlvbnMuaG9zdHMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcignZGlyZWN0Q29ubmVjdGlvbiBvcHRpb24gcmVxdWlyZXMgZXhhY3RseSBvbmUgaG9zdCcpO1xuICAgIH1cbiAgICBpZiAoIW1vbmdvT3B0aW9ucy5wcm94eUhvc3QgJiZcbiAgICAgICAgKG1vbmdvT3B0aW9ucy5wcm94eVBvcnQgfHwgbW9uZ29PcHRpb25zLnByb3h5VXNlcm5hbWUgfHwgbW9uZ29PcHRpb25zLnByb3h5UGFzc3dvcmQpKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcignTXVzdCBzcGVjaWZ5IHByb3h5SG9zdCBpZiBvdGhlciBwcm94eSBvcHRpb25zIGFyZSBwYXNzZWQnKTtcbiAgICB9XG4gICAgaWYgKChtb25nb09wdGlvbnMucHJveHlVc2VybmFtZSAmJiAhbW9uZ29PcHRpb25zLnByb3h5UGFzc3dvcmQpIHx8XG4gICAgICAgICghbW9uZ29PcHRpb25zLnByb3h5VXNlcm5hbWUgJiYgbW9uZ29PcHRpb25zLnByb3h5UGFzc3dvcmQpKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcignQ2FuIG9ubHkgc3BlY2lmeSBib3RoIG9mIHByb3h5IHVzZXJuYW1lL3Bhc3N3b3JkIG9yIG5laXRoZXInKTtcbiAgICB9XG4gICAgY29uc3QgcHJveHlPcHRpb25zID0gWydwcm94eUhvc3QnLCAncHJveHlQb3J0JywgJ3Byb3h5VXNlcm5hbWUnLCAncHJveHlQYXNzd29yZCddLm1hcChrZXkgPT4gdXJsT3B0aW9ucy5nZXQoa2V5KSA/PyBbXSk7XG4gICAgaWYgKHByb3h5T3B0aW9ucy5zb21lKG9wdGlvbnMgPT4gb3B0aW9ucy5sZW5ndGggPiAxKSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoJ1Byb3h5IG9wdGlvbnMgY2Fubm90IGJlIHNwZWNpZmllZCBtdWx0aXBsZSB0aW1lcyBpbiB0aGUgY29ubmVjdGlvbiBzdHJpbmcnKTtcbiAgICB9XG4gICAgY29uc3QgbG9nZ2VyRmVhdHVyZUZsYWcgPSBTeW1ib2wuZm9yKCdAQG1kYi5lbmFibGVNb25nb0xvZ2dlcicpO1xuICAgIG1vbmdvT3B0aW9uc1tsb2dnZXJGZWF0dXJlRmxhZ10gPSBtb25nb09wdGlvbnNbbG9nZ2VyRmVhdHVyZUZsYWddID8/IGZhbHNlO1xuICAgIGxldCBsb2dnZXJFbnZPcHRpb25zID0ge307XG4gICAgbGV0IGxvZ2dlckNsaWVudE9wdGlvbnMgPSB7fTtcbiAgICBpZiAobW9uZ29PcHRpb25zW2xvZ2dlckZlYXR1cmVGbGFnXSkge1xuICAgICAgICBsb2dnZXJFbnZPcHRpb25zID0ge1xuICAgICAgICAgICAgTU9OR09EQl9MT0dfQ09NTUFORDogcHJvY2Vzcy5lbnYuTU9OR09EQl9MT0dfQ09NTUFORCxcbiAgICAgICAgICAgIE1PTkdPREJfTE9HX1RPUE9MT0dZOiBwcm9jZXNzLmVudi5NT05HT0RCX0xPR19UT1BPTE9HWSxcbiAgICAgICAgICAgIE1PTkdPREJfTE9HX1NFUlZFUl9TRUxFQ1RJT046IHByb2Nlc3MuZW52Lk1PTkdPREJfTE9HX1NFUlZFUl9TRUxFQ1RJT04sXG4gICAgICAgICAgICBNT05HT0RCX0xPR19DT05ORUNUSU9OOiBwcm9jZXNzLmVudi5NT05HT0RCX0xPR19DT05ORUNUSU9OLFxuICAgICAgICAgICAgTU9OR09EQl9MT0dfQUxMOiBwcm9jZXNzLmVudi5NT05HT0RCX0xPR19BTEwsXG4gICAgICAgICAgICBNT05HT0RCX0xPR19NQVhfRE9DVU1FTlRfTEVOR1RIOiBwcm9jZXNzLmVudi5NT05HT0RCX0xPR19NQVhfRE9DVU1FTlRfTEVOR1RILFxuICAgICAgICAgICAgTU9OR09EQl9MT0dfUEFUSDogcHJvY2Vzcy5lbnYuTU9OR09EQl9MT0dfUEFUSCxcbiAgICAgICAgICAgIC4uLm1vbmdvT3B0aW9uc1tTeW1ib2wuZm9yKCdAQG1kYi5pbnRlcm5hbExvZ2dlckNvbmZpZycpXVxuICAgICAgICB9O1xuICAgICAgICBsb2dnZXJDbGllbnRPcHRpb25zID0ge1xuICAgICAgICAgICAgbW9uZ29kYkxvZ1BhdGg6IG1vbmdvT3B0aW9ucy5tb25nb2RiTG9nUGF0aFxuICAgICAgICB9O1xuICAgIH1cbiAgICBtb25nb09wdGlvbnMubW9uZ29Mb2dnZXJPcHRpb25zID0gbW9uZ29fbG9nZ2VyXzEuTW9uZ29Mb2dnZXIucmVzb2x2ZU9wdGlvbnMobG9nZ2VyRW52T3B0aW9ucywgbG9nZ2VyQ2xpZW50T3B0aW9ucyk7XG4gICAgbW9uZ29PcHRpb25zLm1ldGFkYXRhID0gKDAsIGNsaWVudF9tZXRhZGF0YV8xLm1ha2VDbGllbnRNZXRhZGF0YSkobW9uZ29PcHRpb25zKTtcbiAgICByZXR1cm4gbW9uZ29PcHRpb25zO1xufVxuZXhwb3J0cy5wYXJzZU9wdGlvbnMgPSBwYXJzZU9wdGlvbnM7XG4vKipcbiAqICMjIyMgVGhyb3dzIGlmIExCIG1vZGUgaXMgdHJ1ZTpcbiAqIC0gaG9zdHMgY29udGFpbnMgbW9yZSB0aGFuIG9uZSBob3N0XG4gKiAtIHRoZXJlIGlzIGEgcmVwbGljYVNldCBuYW1lIHNldFxuICogLSBkaXJlY3RDb25uZWN0aW9uIGlzIHNldFxuICogLSBpZiBzcnZNYXhIb3N0cyBpcyB1c2VkIHdoZW4gYW4gc3J2IGNvbm5lY3Rpb24gc3RyaW5nIGlzIHBhc3NlZCBpblxuICpcbiAqIEB0aHJvd3MgTW9uZ29QYXJzZUVycm9yXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlTG9hZEJhbGFuY2VkT3B0aW9ucyhob3N0cywgbW9uZ29PcHRpb25zLCBpc1Nydikge1xuICAgIGlmIChtb25nb09wdGlvbnMubG9hZEJhbGFuY2VkKSB7XG4gICAgICAgIGlmIChob3N0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoTEJfU0lOR0xFX0hPU1RfRVJST1IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb25nb09wdGlvbnMucmVwbGljYVNldCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKExCX1JFUExJQ0FfU0VUX0VSUk9SKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW9uZ29PcHRpb25zLmRpcmVjdENvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihMQl9ESVJFQ1RfQ09OTkVDVElPTl9FUlJPUik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzU3J2ICYmIG1vbmdvT3B0aW9ucy5zcnZNYXhIb3N0cyA+IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcignQ2Fubm90IGxpbWl0IHNydiBob3N0cyB3aXRoIGxvYWRCYWxhbmNlZCBlbmFibGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuO1xufVxuZnVuY3Rpb24gc2V0T3B0aW9uKG1vbmdvT3B0aW9ucywga2V5LCBkZXNjcmlwdG9yLCB2YWx1ZXMpIHtcbiAgICBjb25zdCB7IHRhcmdldCwgdHlwZSwgdHJhbnNmb3JtIH0gPSBkZXNjcmlwdG9yO1xuICAgIGNvbnN0IG5hbWUgPSB0YXJnZXQgPz8ga2V5O1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgICAgIG1vbmdvT3B0aW9uc1tuYW1lXSA9IGdldEJvb2xlYW4obmFtZSwgdmFsdWVzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdpbnQnOlxuICAgICAgICAgICAgbW9uZ29PcHRpb25zW25hbWVdID0gZ2V0SW50RnJvbU9wdGlvbnMobmFtZSwgdmFsdWVzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd1aW50JzpcbiAgICAgICAgICAgIG1vbmdvT3B0aW9uc1tuYW1lXSA9IGdldFVJbnRGcm9tT3B0aW9ucyhuYW1lLCB2YWx1ZXNbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICBpZiAodmFsdWVzWzBdID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vbmdvT3B0aW9uc1tuYW1lXSA9IFN0cmluZyh2YWx1ZXNbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3JlY29yZCc6XG4gICAgICAgICAgICBpZiAoISgwLCB1dGlsc18xLmlzUmVjb3JkKSh2YWx1ZXNbMF0pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKGAke25hbWV9IG11c3QgYmUgYW4gb2JqZWN0YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb25nb09wdGlvbnNbbmFtZV0gPSB2YWx1ZXNbMF07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnYW55JzpcbiAgICAgICAgICAgIG1vbmdvT3B0aW9uc1tuYW1lXSA9IHZhbHVlc1swXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICBpZiAoIXRyYW5zZm9ybSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcignRGVzY3JpcHRvcnMgbWlzc2luZyBhIHR5cGUgbXVzdCBkZWZpbmUgYSB0cmFuc2Zvcm0nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybVZhbHVlID0gdHJhbnNmb3JtKHsgbmFtZSwgb3B0aW9uczogbW9uZ29PcHRpb25zLCB2YWx1ZXMgfSk7XG4gICAgICAgICAgICBtb25nb09wdGlvbnNbbmFtZV0gPSB0cmFuc2Zvcm1WYWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5PUFRJT05TID0ge1xuICAgIGFwcE5hbWU6IHtcbiAgICAgICAgdHlwZTogJ3N0cmluZydcbiAgICB9LFxuICAgIGF1dGg6IHtcbiAgICAgICAgdGFyZ2V0OiAnY3JlZGVudGlhbHMnLFxuICAgICAgICB0cmFuc2Zvcm0oeyBuYW1lLCBvcHRpb25zLCB2YWx1ZXM6IFt2YWx1ZV0gfSkge1xuICAgICAgICAgICAgaWYgKCEoMCwgdXRpbHNfMS5pc1JlY29yZCkodmFsdWUsIFsndXNlcm5hbWUnLCAncGFzc3dvcmQnXSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoYCR7bmFtZX0gbXVzdCBiZSBhbiBvYmplY3Qgd2l0aCAndXNlcm5hbWUnIGFuZCAncGFzc3dvcmQnIHByb3BlcnRpZXNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtb25nb19jcmVkZW50aWFsc18xLk1vbmdvQ3JlZGVudGlhbHMubWVyZ2Uob3B0aW9ucy5jcmVkZW50aWFscywge1xuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB2YWx1ZS51c2VybmFtZSxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogdmFsdWUucGFzc3dvcmRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBhdXRoTWVjaGFuaXNtOiB7XG4gICAgICAgIHRhcmdldDogJ2NyZWRlbnRpYWxzJyxcbiAgICAgICAgdHJhbnNmb3JtKHsgb3B0aW9ucywgdmFsdWVzOiBbdmFsdWVdIH0pIHtcbiAgICAgICAgICAgIGNvbnN0IG1lY2hhbmlzbXMgPSBPYmplY3QudmFsdWVzKHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20pO1xuICAgICAgICAgICAgY29uc3QgW21lY2hhbmlzbV0gPSBtZWNoYW5pc21zLmZpbHRlcihtID0+IG0ubWF0Y2goUmVnRXhwKFN0cmluZy5yYXcgYFxcYiR7dmFsdWV9XFxiYCwgJ2knKSkpO1xuICAgICAgICAgICAgaWYgKCFtZWNoYW5pc20pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoYGF1dGhNZWNoYW5pc20gb25lIG9mICR7bWVjaGFuaXNtc30sIGdvdCAke3ZhbHVlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHNvdXJjZSA9IG9wdGlvbnMuY3JlZGVudGlhbHM/LnNvdXJjZTtcbiAgICAgICAgICAgIGlmIChtZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9QTEFJTiB8fFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyc18xLkFVVEhfTUVDSFNfQVVUSF9TUkNfRVhURVJOQUwuaGFzKG1lY2hhbmlzbSkpIHtcbiAgICAgICAgICAgICAgICAvLyBzb21lIG1lY2hhbmlzbXMgaGF2ZSAnJGV4dGVybmFsJyBhcyB0aGUgQXV0aCBTb3VyY2VcbiAgICAgICAgICAgICAgICBzb3VyY2UgPSAnJGV4dGVybmFsJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBwYXNzd29yZCA9IG9wdGlvbnMuY3JlZGVudGlhbHM/LnBhc3N3b3JkO1xuICAgICAgICAgICAgaWYgKG1lY2hhbmlzbSA9PT0gcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX1g1MDkgJiYgcGFzc3dvcmQgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgcGFzc3dvcmQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbW9uZ29fY3JlZGVudGlhbHNfMS5Nb25nb0NyZWRlbnRpYWxzLm1lcmdlKG9wdGlvbnMuY3JlZGVudGlhbHMsIHtcbiAgICAgICAgICAgICAgICBtZWNoYW5pc20sXG4gICAgICAgICAgICAgICAgc291cmNlLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgYXV0aE1lY2hhbmlzbVByb3BlcnRpZXM6IHtcbiAgICAgICAgdGFyZ2V0OiAnY3JlZGVudGlhbHMnLFxuICAgICAgICB0cmFuc2Zvcm0oeyBvcHRpb25zLCB2YWx1ZXMgfSkge1xuICAgICAgICAgICAgLy8gV2UgY2FuIGhhdmUgYSBjb21iaW5hdGlvbiBvZiBvcHRpb25zIHBhc3NlZCBpbiB0aGUgVVJJIGFuZCBvcHRpb25zIHBhc3NlZFxuICAgICAgICAgICAgLy8gYXMgYW4gb2JqZWN0IHRvIHRoZSBNb25nb0NsaWVudC4gU28gd2UgbXVzdCB0cmFuc2Zvcm0gdGhlIHN0cmluZyBvcHRpb25zXG4gICAgICAgICAgICAvLyBhcyB3ZWxsIGFzIG1lcmdlIHRoZW0gdG9nZXRoZXIgd2l0aCBhIHBvdGVudGlhbGx5IHByb3ZpZGVkIG9iamVjdC5cbiAgICAgICAgICAgIGxldCBtZWNoYW5pc21Qcm9wZXJ0aWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uVmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25WYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgZW50cmllc0Zyb21TdHJpbmcob3B0aW9uVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lY2hhbmlzbVByb3BlcnRpZXNba2V5XSA9IGdldEJvb2xlYW4oa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVjaGFuaXNtUHJvcGVydGllc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKDAsIHV0aWxzXzEuaXNSZWNvcmQpKG9wdGlvblZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKCdBdXRoTWVjaGFuaXNtUHJvcGVydGllcyBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1lY2hhbmlzbVByb3BlcnRpZXMgPSB7IC4uLm9wdGlvblZhbHVlIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1vbmdvX2NyZWRlbnRpYWxzXzEuTW9uZ29DcmVkZW50aWFscy5tZXJnZShvcHRpb25zLmNyZWRlbnRpYWxzLCB7XG4gICAgICAgICAgICAgICAgbWVjaGFuaXNtUHJvcGVydGllc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGF1dGhTb3VyY2U6IHtcbiAgICAgICAgdGFyZ2V0OiAnY3JlZGVudGlhbHMnLFxuICAgICAgICB0cmFuc2Zvcm0oeyBvcHRpb25zLCB2YWx1ZXM6IFt2YWx1ZV0gfSkge1xuICAgICAgICAgICAgY29uc3Qgc291cmNlID0gU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBtb25nb19jcmVkZW50aWFsc18xLk1vbmdvQ3JlZGVudGlhbHMubWVyZ2Uob3B0aW9ucy5jcmVkZW50aWFscywgeyBzb3VyY2UgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGF1dG9FbmNyeXB0aW9uOiB7XG4gICAgICAgIHR5cGU6ICdyZWNvcmQnXG4gICAgfSxcbiAgICBic29uUmVnRXhwOiB7XG4gICAgICAgIHR5cGU6ICdib29sZWFuJ1xuICAgIH0sXG4gICAgc2VydmVyQXBpOiB7XG4gICAgICAgIHRhcmdldDogJ3NlcnZlckFwaScsXG4gICAgICAgIHRyYW5zZm9ybSh7IHZhbHVlczogW3ZlcnNpb25dIH0pIHtcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlckFwaVRvVmFsaWRhdGUgPSB0eXBlb2YgdmVyc2lvbiA9PT0gJ3N0cmluZycgPyB7IHZlcnNpb24gfSA6IHZlcnNpb247XG4gICAgICAgICAgICBjb25zdCB2ZXJzaW9uVG9WYWxpZGF0ZSA9IHNlcnZlckFwaVRvVmFsaWRhdGUgJiYgc2VydmVyQXBpVG9WYWxpZGF0ZS52ZXJzaW9uO1xuICAgICAgICAgICAgaWYgKCF2ZXJzaW9uVG9WYWxpZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgSW52YWxpZCBcXGBzZXJ2ZXJBcGlcXGAgcHJvcGVydHk7IG11c3Qgc3BlY2lmeSBhIHZlcnNpb24gZnJvbSB0aGUgZm9sbG93aW5nIGVudW06IFtcIiR7T2JqZWN0LnZhbHVlcyhtb25nb19jbGllbnRfMS5TZXJ2ZXJBcGlWZXJzaW9uKS5qb2luKCdcIiwgXCInKX1cIl1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghT2JqZWN0LnZhbHVlcyhtb25nb19jbGllbnRfMS5TZXJ2ZXJBcGlWZXJzaW9uKS5zb21lKHYgPT4gdiA9PT0gdmVyc2lvblRvVmFsaWRhdGUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKGBJbnZhbGlkIHNlcnZlciBBUEkgdmVyc2lvbj0ke3ZlcnNpb25Ub1ZhbGlkYXRlfTsgbXVzdCBiZSBpbiB0aGUgZm9sbG93aW5nIGVudW06IFtcIiR7T2JqZWN0LnZhbHVlcyhtb25nb19jbGllbnRfMS5TZXJ2ZXJBcGlWZXJzaW9uKS5qb2luKCdcIiwgXCInKX1cIl1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZXJ2ZXJBcGlUb1ZhbGlkYXRlO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBjaGVja0tleXM6IHtcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICBjb21wcmVzc29yczoge1xuICAgICAgICBkZWZhdWx0OiAnbm9uZScsXG4gICAgICAgIHRhcmdldDogJ2NvbXByZXNzb3JzJyxcbiAgICAgICAgdHJhbnNmb3JtKHsgdmFsdWVzIH0pIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXByZXNzaW9uTGlzdCA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY29tcFZhbCBvZiB2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wVmFsQXJyYXkgPSB0eXBlb2YgY29tcFZhbCA9PT0gJ3N0cmluZycgPyBjb21wVmFsLnNwbGl0KCcsJykgOiBjb21wVmFsO1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShjb21wVmFsQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ2NvbXByZXNzb3JzIG11c3QgYmUgYW4gYXJyYXkgb3IgYSBjb21tYS1kZWxpbWl0ZWQgbGlzdCBvZiBzdHJpbmdzJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYyBvZiBjb21wVmFsQXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGNvbXByZXNzaW9uXzEuQ29tcHJlc3NvcikuaW5jbHVkZXMoU3RyaW5nKGMpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tcHJlc3Npb25MaXN0LmFkZChTdHJpbmcoYykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgJHtjfSBpcyBub3QgYSB2YWxpZCBjb21wcmVzc2lvbiBtZWNoYW5pc20uIE11c3QgYmUgb25lIG9mOiAke09iamVjdC5rZXlzKGNvbXByZXNzaW9uXzEuQ29tcHJlc3Nvcil9LmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFsuLi5jb21wcmVzc2lvbkxpc3RdO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBjb25uZWN0VGltZW91dE1TOiB7XG4gICAgICAgIGRlZmF1bHQ6IDMwMDAwLFxuICAgICAgICB0eXBlOiAndWludCdcbiAgICB9LFxuICAgIGRiTmFtZToge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgIH0sXG4gICAgZGlyZWN0Q29ubmVjdGlvbjoge1xuICAgICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICBkcml2ZXJJbmZvOiB7XG4gICAgICAgIGRlZmF1bHQ6IHt9LFxuICAgICAgICB0eXBlOiAncmVjb3JkJ1xuICAgIH0sXG4gICAgZW5hYmxlVXRmOFZhbGlkYXRpb246IHsgdHlwZTogJ2Jvb2xlYW4nLCBkZWZhdWx0OiB0cnVlIH0sXG4gICAgZmFtaWx5OiB7XG4gICAgICAgIHRyYW5zZm9ybSh7IG5hbWUsIHZhbHVlczogW3ZhbHVlXSB9KSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1WYWx1ZSA9IGdldEludEZyb21PcHRpb25zKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm1WYWx1ZSA9PT0gNCB8fCB0cmFuc2Zvcm1WYWx1ZSA9PT0gNikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2Zvcm1WYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgT3B0aW9uICdmYW1pbHknIG11c3QgYmUgNCBvciA2IGdvdCAke3RyYW5zZm9ybVZhbHVlfS5gKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZmllbGRzQXNSYXc6IHtcbiAgICAgICAgdHlwZTogJ3JlY29yZCdcbiAgICB9LFxuICAgIGZvcmNlU2VydmVyT2JqZWN0SWQ6IHtcbiAgICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgICAgIHR5cGU6ICdib29sZWFuJ1xuICAgIH0sXG4gICAgZnN5bmM6IHtcbiAgICAgICAgZGVwcmVjYXRlZDogJ1BsZWFzZSB1c2Ugam91cm5hbCBpbnN0ZWFkJyxcbiAgICAgICAgdGFyZ2V0OiAnd3JpdGVDb25jZXJuJyxcbiAgICAgICAgdHJhbnNmb3JtKHsgbmFtZSwgb3B0aW9ucywgdmFsdWVzOiBbdmFsdWVdIH0pIHtcbiAgICAgICAgICAgIGNvbnN0IHdjID0gd3JpdGVfY29uY2Vybl8xLldyaXRlQ29uY2Vybi5mcm9tT3B0aW9ucyh7XG4gICAgICAgICAgICAgICAgd3JpdGVDb25jZXJuOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMud3JpdGVDb25jZXJuLFxuICAgICAgICAgICAgICAgICAgICBmc3luYzogZ2V0Qm9vbGVhbihuYW1lLCB2YWx1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghd2MpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKGBVbmFibGUgdG8gbWFrZSBhIHdyaXRlQ29uY2VybiBmcm9tIGZzeW5jPSR7dmFsdWV9YCk7XG4gICAgICAgICAgICByZXR1cm4gd2M7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGhlYXJ0YmVhdEZyZXF1ZW5jeU1TOiB7XG4gICAgICAgIGRlZmF1bHQ6IDEwMDAwLFxuICAgICAgICB0eXBlOiAndWludCdcbiAgICB9LFxuICAgIGlnbm9yZVVuZGVmaW5lZDoge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbidcbiAgICB9LFxuICAgIGo6IHtcbiAgICAgICAgZGVwcmVjYXRlZDogJ1BsZWFzZSB1c2Ugam91cm5hbCBpbnN0ZWFkJyxcbiAgICAgICAgdGFyZ2V0OiAnd3JpdGVDb25jZXJuJyxcbiAgICAgICAgdHJhbnNmb3JtKHsgbmFtZSwgb3B0aW9ucywgdmFsdWVzOiBbdmFsdWVdIH0pIHtcbiAgICAgICAgICAgIGNvbnN0IHdjID0gd3JpdGVfY29uY2Vybl8xLldyaXRlQ29uY2Vybi5mcm9tT3B0aW9ucyh7XG4gICAgICAgICAgICAgICAgd3JpdGVDb25jZXJuOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMud3JpdGVDb25jZXJuLFxuICAgICAgICAgICAgICAgICAgICBqb3VybmFsOiBnZXRCb29sZWFuKG5hbWUsIHZhbHVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCF3YylcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoYFVuYWJsZSB0byBtYWtlIGEgd3JpdGVDb25jZXJuIGZyb20gam91cm5hbD0ke3ZhbHVlfWApO1xuICAgICAgICAgICAgcmV0dXJuIHdjO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBqb3VybmFsOiB7XG4gICAgICAgIHRhcmdldDogJ3dyaXRlQ29uY2VybicsXG4gICAgICAgIHRyYW5zZm9ybSh7IG5hbWUsIG9wdGlvbnMsIHZhbHVlczogW3ZhbHVlXSB9KSB7XG4gICAgICAgICAgICBjb25zdCB3YyA9IHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uZnJvbU9wdGlvbnMoe1xuICAgICAgICAgICAgICAgIHdyaXRlQ29uY2Vybjoge1xuICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zLndyaXRlQ29uY2VybixcbiAgICAgICAgICAgICAgICAgICAgam91cm5hbDogZ2V0Qm9vbGVhbihuYW1lLCB2YWx1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghd2MpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKGBVbmFibGUgdG8gbWFrZSBhIHdyaXRlQ29uY2VybiBmcm9tIGpvdXJuYWw9JHt2YWx1ZX1gKTtcbiAgICAgICAgICAgIHJldHVybiB3YztcbiAgICAgICAgfVxuICAgIH0sXG4gICAga2VlcEFsaXZlOiB7XG4gICAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgICAgIHR5cGU6ICdib29sZWFuJyxcbiAgICAgICAgZGVwcmVjYXRlZDogJ1dpbGwgbm90IGJlIGFibGUgdG8gdHVybiBvZmYgaW4gdGhlIGZ1dHVyZS4nXG4gICAgfSxcbiAgICBrZWVwQWxpdmVJbml0aWFsRGVsYXk6IHtcbiAgICAgICAgZGVmYXVsdDogMTIwMDAwLFxuICAgICAgICB0eXBlOiAndWludCcsXG4gICAgICAgIGRlcHJlY2F0ZWQ6ICdXaWxsIG5vdCBiZSBjb25maWd1cmFibGUgaW4gdGhlIGZ1dHVyZS4nXG4gICAgfSxcbiAgICBsb2FkQmFsYW5jZWQ6IHtcbiAgICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgICAgIHR5cGU6ICdib29sZWFuJ1xuICAgIH0sXG4gICAgbG9jYWxUaHJlc2hvbGRNUzoge1xuICAgICAgICBkZWZhdWx0OiAxNSxcbiAgICAgICAgdHlwZTogJ3VpbnQnXG4gICAgfSxcbiAgICBtYXhDb25uZWN0aW5nOiB7XG4gICAgICAgIGRlZmF1bHQ6IDIsXG4gICAgICAgIHRyYW5zZm9ybSh7IG5hbWUsIHZhbHVlczogW3ZhbHVlXSB9KSB7XG4gICAgICAgICAgICBjb25zdCBtYXhDb25uZWN0aW5nID0gZ2V0VUludEZyb21PcHRpb25zKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChtYXhDb25uZWN0aW5nID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignbWF4Q29ubmVjdGluZyBtdXN0IGJlID4gMCBpZiBzcGVjaWZpZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYXhDb25uZWN0aW5nO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBtYXhJZGxlVGltZU1TOiB7XG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICAgIHR5cGU6ICd1aW50J1xuICAgIH0sXG4gICAgbWF4UG9vbFNpemU6IHtcbiAgICAgICAgZGVmYXVsdDogMTAwLFxuICAgICAgICB0eXBlOiAndWludCdcbiAgICB9LFxuICAgIG1heFN0YWxlbmVzc1NlY29uZHM6IHtcbiAgICAgICAgdGFyZ2V0OiAncmVhZFByZWZlcmVuY2UnLFxuICAgICAgICB0cmFuc2Zvcm0oeyBuYW1lLCBvcHRpb25zLCB2YWx1ZXM6IFt2YWx1ZV0gfSkge1xuICAgICAgICAgICAgY29uc3QgbWF4U3RhbGVuZXNzU2Vjb25kcyA9IGdldFVJbnRGcm9tT3B0aW9ucyhuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yZWFkUHJlZmVyZW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5mcm9tT3B0aW9ucyh7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRQcmVmZXJlbmNlOiB7IC4uLm9wdGlvbnMucmVhZFByZWZlcmVuY2UsIG1heFN0YWxlbmVzc1NlY29uZHMgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZSgnc2Vjb25kYXJ5JywgdW5kZWZpbmVkLCB7IG1heFN0YWxlbmVzc1NlY29uZHMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG1pbkludGVybmFsQnVmZmVyU2l6ZToge1xuICAgICAgICB0eXBlOiAndWludCdcbiAgICB9LFxuICAgIG1pblBvb2xTaXplOiB7XG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICAgIHR5cGU6ICd1aW50J1xuICAgIH0sXG4gICAgbWluSGVhcnRiZWF0RnJlcXVlbmN5TVM6IHtcbiAgICAgICAgZGVmYXVsdDogNTAwLFxuICAgICAgICB0eXBlOiAndWludCdcbiAgICB9LFxuICAgIG1vbml0b3JDb21tYW5kczoge1xuICAgICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICBuYW1lOiB7XG4gICAgICAgIHRhcmdldDogJ2RyaXZlckluZm8nLFxuICAgICAgICB0cmFuc2Zvcm0oeyB2YWx1ZXM6IFt2YWx1ZV0sIG9wdGlvbnMgfSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4ub3B0aW9ucy5kcml2ZXJJbmZvLCBuYW1lOiBTdHJpbmcodmFsdWUpIH07XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG5vRGVsYXk6IHtcbiAgICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICBwa0ZhY3Rvcnk6IHtcbiAgICAgICAgZGVmYXVsdDogdXRpbHNfMS5ERUZBVUxUX1BLX0ZBQ1RPUlksXG4gICAgICAgIHRyYW5zZm9ybSh7IHZhbHVlczogW3ZhbHVlXSB9KSB7XG4gICAgICAgICAgICBpZiAoKDAsIHV0aWxzXzEuaXNSZWNvcmQpKHZhbHVlLCBbJ2NyZWF0ZVBrJ10pICYmIHR5cGVvZiB2YWx1ZS5jcmVhdGVQayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgT3B0aW9uIHBrRmFjdG9yeSBtdXN0IGJlIGFuIG9iamVjdCB3aXRoIGEgY3JlYXRlUGsgZnVuY3Rpb24sIGdvdCAke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBwcm9tb3RlQnVmZmVyczoge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbidcbiAgICB9LFxuICAgIHByb21vdGVMb25nczoge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbidcbiAgICB9LFxuICAgIHByb21vdGVWYWx1ZXM6IHtcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICB1c2VCaWdJbnQ2NDoge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbidcbiAgICB9LFxuICAgIHByb3h5SG9zdDoge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgIH0sXG4gICAgcHJveHlQYXNzd29yZDoge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgIH0sXG4gICAgcHJveHlQb3J0OiB7XG4gICAgICAgIHR5cGU6ICd1aW50J1xuICAgIH0sXG4gICAgcHJveHlVc2VybmFtZToge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgIH0sXG4gICAgcmF3OiB7XG4gICAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgICAgICB0eXBlOiAnYm9vbGVhbidcbiAgICB9LFxuICAgIHJlYWRDb25jZXJuOiB7XG4gICAgICAgIHRyYW5zZm9ybSh7IHZhbHVlczogW3ZhbHVlXSwgb3B0aW9ucyB9KSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiByZWFkX2NvbmNlcm5fMS5SZWFkQ29uY2VybiB8fCAoMCwgdXRpbHNfMS5pc1JlY29yZCkodmFsdWUsIFsnbGV2ZWwnXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZF9jb25jZXJuXzEuUmVhZENvbmNlcm4uZnJvbU9wdGlvbnMoeyAuLi5vcHRpb25zLnJlYWRDb25jZXJuLCAuLi52YWx1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgUmVhZENvbmNlcm4gbXVzdCBiZSBhbiBvYmplY3QsIGdvdCAke0pTT04uc3RyaW5naWZ5KHZhbHVlKX1gKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVhZENvbmNlcm5MZXZlbDoge1xuICAgICAgICB0YXJnZXQ6ICdyZWFkQ29uY2VybicsXG4gICAgICAgIHRyYW5zZm9ybSh7IHZhbHVlczogW2xldmVsXSwgb3B0aW9ucyB9KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVhZF9jb25jZXJuXzEuUmVhZENvbmNlcm4uZnJvbU9wdGlvbnMoe1xuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMucmVhZENvbmNlcm4sXG4gICAgICAgICAgICAgICAgbGV2ZWw6IGxldmVsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVhZFByZWZlcmVuY2U6IHtcbiAgICAgICAgZGVmYXVsdDogcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UucHJpbWFyeSxcbiAgICAgICAgdHJhbnNmb3JtKHsgdmFsdWVzOiBbdmFsdWVdLCBvcHRpb25zIH0pIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLmZyb21PcHRpb25zKHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZFByZWZlcmVuY2U6IHsgLi4ub3B0aW9ucy5yZWFkUHJlZmVyZW5jZSwgLi4udmFsdWUgfSxcbiAgICAgICAgICAgICAgICAgICAgLi4udmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoMCwgdXRpbHNfMS5pc1JlY29yZCkodmFsdWUsIFsnbW9kZSddKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJwID0gcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UuZnJvbU9wdGlvbnMoe1xuICAgICAgICAgICAgICAgICAgICByZWFkUHJlZmVyZW5jZTogeyAuLi5vcHRpb25zLnJlYWRQcmVmZXJlbmNlLCAuLi52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAuLi52YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChycClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJwO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKGBDYW5ub3QgbWFrZSByZWFkIHByZWZlcmVuY2UgZnJvbSAke0pTT04uc3RyaW5naWZ5KHZhbHVlKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcnBPcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBoZWRnZTogb3B0aW9ucy5yZWFkUHJlZmVyZW5jZT8uaGVkZ2UsXG4gICAgICAgICAgICAgICAgICAgIG1heFN0YWxlbmVzc1NlY29uZHM6IG9wdGlvbnMucmVhZFByZWZlcmVuY2U/Lm1heFN0YWxlbmVzc1NlY29uZHNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UodmFsdWUsIG9wdGlvbnMucmVhZFByZWZlcmVuY2U/LnRhZ3MsIHJwT3B0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoYFVua25vd24gUmVhZFByZWZlcmVuY2UgdmFsdWU6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJlYWRQcmVmZXJlbmNlVGFnczoge1xuICAgICAgICB0YXJnZXQ6ICdyZWFkUHJlZmVyZW5jZScsXG4gICAgICAgIHRyYW5zZm9ybSh7IHZhbHVlcywgb3B0aW9ucyB9KSB7XG4gICAgICAgICAgICBjb25zdCB0YWdzID0gQXJyYXkuaXNBcnJheSh2YWx1ZXNbMF0pXG4gICAgICAgICAgICAgICAgPyB2YWx1ZXNbMF1cbiAgICAgICAgICAgICAgICA6IHZhbHVlcztcbiAgICAgICAgICAgIGNvbnN0IHJlYWRQcmVmZXJlbmNlVGFncyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRQcmVmZXJlbmNlVGFnID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgZW50cmllc0Zyb21TdHJpbmcodGFnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZFByZWZlcmVuY2VUYWdba10gPSB2O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgoMCwgdXRpbHNfMS5pc1JlY29yZCkodGFnKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyh0YWcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkUHJlZmVyZW5jZVRhZ1trXSA9IHY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVhZFByZWZlcmVuY2VUYWdzLnB1c2gocmVhZFByZWZlcmVuY2VUYWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLmZyb21PcHRpb25zKHtcbiAgICAgICAgICAgICAgICByZWFkUHJlZmVyZW5jZTogb3B0aW9ucy5yZWFkUHJlZmVyZW5jZSxcbiAgICAgICAgICAgICAgICByZWFkUHJlZmVyZW5jZVRhZ3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICByZXBsaWNhU2V0OiB7XG4gICAgICAgIHR5cGU6ICdzdHJpbmcnXG4gICAgfSxcbiAgICByZXRyeVJlYWRzOiB7XG4gICAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgICAgIHR5cGU6ICdib29sZWFuJ1xuICAgIH0sXG4gICAgcmV0cnlXcml0ZXM6IHtcbiAgICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICBzZXJpYWxpemVGdW5jdGlvbnM6IHtcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICBzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVM6IHtcbiAgICAgICAgZGVmYXVsdDogMzAwMDAsXG4gICAgICAgIHR5cGU6ICd1aW50J1xuICAgIH0sXG4gICAgc2VydmVybmFtZToge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgIH0sXG4gICAgc29ja2V0VGltZW91dE1TOiB7XG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICAgIHR5cGU6ICd1aW50J1xuICAgIH0sXG4gICAgc3J2TWF4SG9zdHM6IHtcbiAgICAgICAgdHlwZTogJ3VpbnQnLFxuICAgICAgICBkZWZhdWx0OiAwXG4gICAgfSxcbiAgICBzcnZTZXJ2aWNlTmFtZToge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgZGVmYXVsdDogJ21vbmdvZGInXG4gICAgfSxcbiAgICBzc2w6IHtcbiAgICAgICAgdGFyZ2V0OiAndGxzJyxcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICBzc2xDQToge1xuICAgICAgICBkZXByZWNhdGVkOiAnc3NsQ0EgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24uIFBsZWFzZSB1c2UgdGxzQ0FGaWxlIGluc3RlYWQuJyxcbiAgICAgICAgdGFyZ2V0OiAnY2EnLFxuICAgICAgICB0cmFuc2Zvcm0oeyB2YWx1ZXM6IFt2YWx1ZV0gfSkge1xuICAgICAgICAgICAgcmV0dXJuIGZzLnJlYWRGaWxlU3luYyhTdHJpbmcodmFsdWUpLCB7IGVuY29kaW5nOiAnYXNjaWknIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzc2xDUkw6IHtcbiAgICAgICAgZGVwcmVjYXRlZDogJ3NzbENSTCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBhbmQgYmUgcmVwbGFjZWQgYnkgdGxzQ1JMRmlsZSBpbiB0aGF0IHJlbGVhc2UuJyxcbiAgICAgICAgdGFyZ2V0OiAnY3JsJyxcbiAgICAgICAgdHJhbnNmb3JtKHsgdmFsdWVzOiBbdmFsdWVdIH0pIHtcbiAgICAgICAgICAgIHJldHVybiBmcy5yZWFkRmlsZVN5bmMoU3RyaW5nKHZhbHVlKSwgeyBlbmNvZGluZzogJ2FzY2lpJyB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc3NsQ2VydDoge1xuICAgICAgICBkZXByZWNhdGVkOiAnc3NsQ2VydCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbi4gUGxlYXNlIHVzZSB0bHNDZXJ0aWZpY2F0ZUtleUZpbGUgaW5zdGVhZC4nLFxuICAgICAgICB0YXJnZXQ6ICdjZXJ0JyxcbiAgICAgICAgdHJhbnNmb3JtKHsgdmFsdWVzOiBbdmFsdWVdIH0pIHtcbiAgICAgICAgICAgIHJldHVybiBmcy5yZWFkRmlsZVN5bmMoU3RyaW5nKHZhbHVlKSwgeyBlbmNvZGluZzogJ2FzY2lpJyB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc3NsS2V5OiB7XG4gICAgICAgIGRlcHJlY2F0ZWQ6ICdzc2xLZXkgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24uIFBsZWFzZSB1c2UgdGxzQ2VydGlmaWNhdGVLZXlGaWxlIGluc3RlYWQuJyxcbiAgICAgICAgdGFyZ2V0OiAna2V5JyxcbiAgICAgICAgdHJhbnNmb3JtKHsgdmFsdWVzOiBbdmFsdWVdIH0pIHtcbiAgICAgICAgICAgIHJldHVybiBmcy5yZWFkRmlsZVN5bmMoU3RyaW5nKHZhbHVlKSwgeyBlbmNvZGluZzogJ2FzY2lpJyB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc3NsUGFzczoge1xuICAgICAgICBkZXByZWNhdGVkOiAnc3NsUGFzcyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbi4gUGxlYXNlIHVzZSB0bHNDZXJ0aWZpY2F0ZUtleUZpbGVQYXNzd29yZCBpbnN0ZWFkLicsXG4gICAgICAgIHRhcmdldDogJ3Bhc3NwaHJhc2UnLFxuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgIH0sXG4gICAgc3NsVmFsaWRhdGU6IHtcbiAgICAgICAgZGVwcmVjYXRlZDogJ3NzbFZhbGlkYXRlIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uLiBQbGVhc2UgdXNlIHRsc0FsbG93SW52YWxpZENlcnRpZmljYXRlcyBpbnN0ZWFkLicsXG4gICAgICAgIHRhcmdldDogJ3JlamVjdFVuYXV0aG9yaXplZCcsXG4gICAgICAgIHR5cGU6ICdib29sZWFuJ1xuICAgIH0sXG4gICAgdGxzOiB7XG4gICAgICAgIHR5cGU6ICdib29sZWFuJ1xuICAgIH0sXG4gICAgdGxzQWxsb3dJbnZhbGlkQ2VydGlmaWNhdGVzOiB7XG4gICAgICAgIHRhcmdldDogJ3JlamVjdFVuYXV0aG9yaXplZCcsXG4gICAgICAgIHRyYW5zZm9ybSh7IG5hbWUsIHZhbHVlczogW3ZhbHVlXSB9KSB7XG4gICAgICAgICAgICAvLyBhbGxvd0ludmFsaWRDZXJ0aWZpY2F0ZXMgaXMgdGhlIGludmVyc2Ugb2YgcmVqZWN0VW5hdXRob3JpemVkXG4gICAgICAgICAgICByZXR1cm4gIWdldEJvb2xlYW4obmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB0bHNBbGxvd0ludmFsaWRIb3N0bmFtZXM6IHtcbiAgICAgICAgdGFyZ2V0OiAnY2hlY2tTZXJ2ZXJJZGVudGl0eScsXG4gICAgICAgIHRyYW5zZm9ybSh7IG5hbWUsIHZhbHVlczogW3ZhbHVlXSB9KSB7XG4gICAgICAgICAgICAvLyB0bHNBbGxvd0ludmFsaWRIb3N0bmFtZXMgbWVhbnMgc2V0dGluZyB0aGUgY2hlY2tTZXJ2ZXJJZGVudGl0eSBmdW5jdGlvbiB0byBhIG5vb3BcbiAgICAgICAgICAgIHJldHVybiBnZXRCb29sZWFuKG5hbWUsIHZhbHVlKSA/ICgpID0+IHVuZGVmaW5lZCA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdGxzQ0FGaWxlOiB7XG4gICAgICAgIHRhcmdldDogJ2NhJyxcbiAgICAgICAgdHJhbnNmb3JtKHsgdmFsdWVzOiBbdmFsdWVdIH0pIHtcbiAgICAgICAgICAgIHJldHVybiBmcy5yZWFkRmlsZVN5bmMoU3RyaW5nKHZhbHVlKSwgeyBlbmNvZGluZzogJ2FzY2lpJyB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdGxzQ2VydGlmaWNhdGVGaWxlOiB7XG4gICAgICAgIGRlcHJlY2F0ZWQ6ICd0bHNDZXJ0aWZpY2F0ZUZpbGUgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24uIFBsZWFzZSB1c2UgdGxzQ2VydGlmaWNhdGVLZXlGaWxlIGluc3RlYWQuJyxcbiAgICAgICAgdGFyZ2V0OiAnY2VydCcsXG4gICAgICAgIHRyYW5zZm9ybSh7IHZhbHVlczogW3ZhbHVlXSB9KSB7XG4gICAgICAgICAgICByZXR1cm4gZnMucmVhZEZpbGVTeW5jKFN0cmluZyh2YWx1ZSksIHsgZW5jb2Rpbmc6ICdhc2NpaScgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHRsc0NlcnRpZmljYXRlS2V5RmlsZToge1xuICAgICAgICB0YXJnZXQ6ICdrZXknLFxuICAgICAgICB0cmFuc2Zvcm0oeyB2YWx1ZXM6IFt2YWx1ZV0gfSkge1xuICAgICAgICAgICAgcmV0dXJuIGZzLnJlYWRGaWxlU3luYyhTdHJpbmcodmFsdWUpLCB7IGVuY29kaW5nOiAnYXNjaWknIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB0bHNDZXJ0aWZpY2F0ZUtleUZpbGVQYXNzd29yZDoge1xuICAgICAgICB0YXJnZXQ6ICdwYXNzcGhyYXNlJyxcbiAgICAgICAgdHlwZTogJ2FueSdcbiAgICB9LFxuICAgIHRsc0luc2VjdXJlOiB7XG4gICAgICAgIHRyYW5zZm9ybSh7IG5hbWUsIG9wdGlvbnMsIHZhbHVlczogW3ZhbHVlXSB9KSB7XG4gICAgICAgICAgICBjb25zdCB0bHNJbnNlY3VyZSA9IGdldEJvb2xlYW4obmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgaWYgKHRsc0luc2VjdXJlKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jaGVja1NlcnZlcklkZW50aXR5ID0gKCkgPT4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMucmVqZWN0VW5hdXRob3JpemVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNoZWNrU2VydmVySWRlbnRpdHkgPSBvcHRpb25zLnRsc0FsbG93SW52YWxpZEhvc3RuYW1lc1xuICAgICAgICAgICAgICAgICAgICA/ICgpID0+IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnJlamVjdFVuYXV0aG9yaXplZCA9IG9wdGlvbnMudGxzQWxsb3dJbnZhbGlkQ2VydGlmaWNhdGVzID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRsc0luc2VjdXJlO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB3OiB7XG4gICAgICAgIHRhcmdldDogJ3dyaXRlQ29uY2VybicsXG4gICAgICAgIHRyYW5zZm9ybSh7IHZhbHVlczogW3ZhbHVlXSwgb3B0aW9ucyB9KSB7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVfY29uY2Vybl8xLldyaXRlQ29uY2Vybi5mcm9tT3B0aW9ucyh7IHdyaXRlQ29uY2VybjogeyAuLi5vcHRpb25zLndyaXRlQ29uY2VybiwgdzogdmFsdWUgfSB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgd2FpdFF1ZXVlVGltZW91dE1TOiB7XG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICAgIHR5cGU6ICd1aW50J1xuICAgIH0sXG4gICAgd3JpdGVDb25jZXJuOiB7XG4gICAgICAgIHRhcmdldDogJ3dyaXRlQ29uY2VybicsXG4gICAgICAgIHRyYW5zZm9ybSh7IHZhbHVlczogW3ZhbHVlXSwgb3B0aW9ucyB9KSB7XG4gICAgICAgICAgICBpZiAoKDAsIHV0aWxzXzEuaXNSZWNvcmQpKHZhbHVlKSB8fCB2YWx1ZSBpbnN0YW5jZW9mIHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVfY29uY2Vybl8xLldyaXRlQ29uY2Vybi5mcm9tT3B0aW9ucyh7XG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQ29uY2Vybjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9ucy53cml0ZUNvbmNlcm4sXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gJ21ham9yaXR5JyB8fCB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uZnJvbU9wdGlvbnMoe1xuICAgICAgICAgICAgICAgICAgICB3cml0ZUNvbmNlcm46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMud3JpdGVDb25jZXJuLFxuICAgICAgICAgICAgICAgICAgICAgICAgdzogdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKGBJbnZhbGlkIFdyaXRlQ29uY2VybiBjYW5ub3QgcGFyc2U6ICR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfWApO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB3dGltZW91dDoge1xuICAgICAgICBkZXByZWNhdGVkOiAnUGxlYXNlIHVzZSB3dGltZW91dE1TIGluc3RlYWQnLFxuICAgICAgICB0YXJnZXQ6ICd3cml0ZUNvbmNlcm4nLFxuICAgICAgICB0cmFuc2Zvcm0oeyB2YWx1ZXM6IFt2YWx1ZV0sIG9wdGlvbnMgfSkge1xuICAgICAgICAgICAgY29uc3Qgd2MgPSB3cml0ZV9jb25jZXJuXzEuV3JpdGVDb25jZXJuLmZyb21PcHRpb25zKHtcbiAgICAgICAgICAgICAgICB3cml0ZUNvbmNlcm46IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9ucy53cml0ZUNvbmNlcm4sXG4gICAgICAgICAgICAgICAgICAgIHd0aW1lb3V0OiBnZXRVSW50RnJvbU9wdGlvbnMoJ3d0aW1lb3V0JywgdmFsdWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAod2MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdjO1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKGBDYW5ub3QgbWFrZSBXcml0ZUNvbmNlcm4gZnJvbSB3dGltZW91dGApO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB3dGltZW91dE1TOiB7XG4gICAgICAgIHRhcmdldDogJ3dyaXRlQ29uY2VybicsXG4gICAgICAgIHRyYW5zZm9ybSh7IHZhbHVlczogW3ZhbHVlXSwgb3B0aW9ucyB9KSB7XG4gICAgICAgICAgICBjb25zdCB3YyA9IHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uZnJvbU9wdGlvbnMoe1xuICAgICAgICAgICAgICAgIHdyaXRlQ29uY2Vybjoge1xuICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zLndyaXRlQ29uY2VybixcbiAgICAgICAgICAgICAgICAgICAgd3RpbWVvdXRNUzogZ2V0VUludEZyb21PcHRpb25zKCd3dGltZW91dE1TJywgdmFsdWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAod2MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdjO1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKGBDYW5ub3QgbWFrZSBXcml0ZUNvbmNlcm4gZnJvbSB3dGltZW91dGApO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB6bGliQ29tcHJlc3Npb25MZXZlbDoge1xuICAgICAgICBkZWZhdWx0OiAwLFxuICAgICAgICB0eXBlOiAnaW50J1xuICAgIH0sXG4gICAgLy8gQ3VzdG9tIHR5cGVzIGZvciBtb2RpZnlpbmcgY29yZSBiZWhhdmlvclxuICAgIGNvbm5lY3Rpb25UeXBlOiB7IHR5cGU6ICdhbnknIH0sXG4gICAgc3J2UG9sbGVyOiB7IHR5cGU6ICdhbnknIH0sXG4gICAgLy8gQWNjZXB0ZWQgTm9kZUpTIE9wdGlvbnNcbiAgICBtaW5ESFNpemU6IHsgdHlwZTogJ2FueScgfSxcbiAgICBwc2tDYWxsYmFjazogeyB0eXBlOiAnYW55JyB9LFxuICAgIHNlY3VyZUNvbnRleHQ6IHsgdHlwZTogJ2FueScgfSxcbiAgICBlbmFibGVUcmFjZTogeyB0eXBlOiAnYW55JyB9LFxuICAgIHJlcXVlc3RDZXJ0OiB7IHR5cGU6ICdhbnknIH0sXG4gICAgcmVqZWN0VW5hdXRob3JpemVkOiB7IHR5cGU6ICdhbnknIH0sXG4gICAgY2hlY2tTZXJ2ZXJJZGVudGl0eTogeyB0eXBlOiAnYW55JyB9LFxuICAgIEFMUE5Qcm90b2NvbHM6IHsgdHlwZTogJ2FueScgfSxcbiAgICBTTklDYWxsYmFjazogeyB0eXBlOiAnYW55JyB9LFxuICAgIHNlc3Npb246IHsgdHlwZTogJ2FueScgfSxcbiAgICByZXF1ZXN0T0NTUDogeyB0eXBlOiAnYW55JyB9LFxuICAgIGxvY2FsQWRkcmVzczogeyB0eXBlOiAnYW55JyB9LFxuICAgIGxvY2FsUG9ydDogeyB0eXBlOiAnYW55JyB9LFxuICAgIGhpbnRzOiB7IHR5cGU6ICdhbnknIH0sXG4gICAgbG9va3VwOiB7IHR5cGU6ICdhbnknIH0sXG4gICAgY2E6IHsgdHlwZTogJ2FueScgfSxcbiAgICBjZXJ0OiB7IHR5cGU6ICdhbnknIH0sXG4gICAgY2lwaGVyczogeyB0eXBlOiAnYW55JyB9LFxuICAgIGNybDogeyB0eXBlOiAnYW55JyB9LFxuICAgIGVjZGhDdXJ2ZTogeyB0eXBlOiAnYW55JyB9LFxuICAgIGtleTogeyB0eXBlOiAnYW55JyB9LFxuICAgIHBhc3NwaHJhc2U6IHsgdHlwZTogJ2FueScgfSxcbiAgICBwZng6IHsgdHlwZTogJ2FueScgfSxcbiAgICBzZWN1cmVQcm90b2NvbDogeyB0eXBlOiAnYW55JyB9LFxuICAgIGluZGV4OiB7IHR5cGU6ICdhbnknIH0sXG4gICAgLy8gTGVnYWN5IE9wdGlvbnMsIHRoZXNlIGFyZSB1bnVzZWQgYnV0IGxlZnQgaGVyZSB0byBhdm9pZCBlcnJvcnMgd2l0aCBDU0ZMRSBsaWJcbiAgICB1c2VOZXdVcmxQYXJzZXI6IHsgdHlwZTogJ2Jvb2xlYW4nIH0sXG4gICAgdXNlVW5pZmllZFRvcG9sb2d5OiB7IHR5cGU6ICdib29sZWFuJyB9LFxuICAgIC8vIE1vbmdvTG9nZ2VyXG4gICAgLy8gVE9ETyhOT0RFLTQ4NDkpOiBUaWdodGVuIHRoZSB0eXBlIG9mIG1vbmdvZGJMb2dQYXRoXG4gICAgbW9uZ29kYkxvZ1BhdGg6IHsgdHlwZTogJ2FueScgfVxufTtcbmV4cG9ydHMuREVGQVVMVF9PUFRJT05TID0gbmV3IENhc2VJbnNlbnNpdGl2ZU1hcChPYmplY3QuZW50cmllcyhleHBvcnRzLk9QVElPTlMpXG4gICAgLmZpbHRlcigoWywgZGVzY3JpcHRvcl0pID0+IGRlc2NyaXB0b3IuZGVmYXVsdCAhPSBudWxsKVxuICAgIC5tYXAoKFtrLCBkXSkgPT4gW2ssIGQuZGVmYXVsdF0pKTtcbi8qKlxuICogU2V0IG9mIHBlcm1pdHRlZCBmZWF0dXJlIGZsYWdzXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0cy5GRUFUVVJFX0ZMQUdTID0gbmV3IFNldChbXG4gICAgU3ltYm9sLmZvcignQEBtZGIuc2tpcFBpbmdPbkNvbm5lY3QnKSxcbiAgICBTeW1ib2wuZm9yKCdAQG1kYi5lbmFibGVNb25nb0xvZ2dlcicpLFxuICAgIFN5bWJvbC5mb3IoJ0BAbWRiLmludGVybmFsTG9nZ2VyQ29uZmlnJylcbl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29ubmVjdGlvbl9zdHJpbmcuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRkVBVFVSRV9GTEFHUyIsIkRFRkFVTFRfT1BUSU9OUyIsIk9QVElPTlMiLCJwYXJzZU9wdGlvbnMiLCJyZXNvbHZlU1JWUmVjb3JkIiwiZG5zIiwicmVxdWlyZSIsImZzIiwibW9uZ29kYl9jb25uZWN0aW9uX3N0cmluZ191cmxfMSIsInVybF8xIiwibW9uZ29fY3JlZGVudGlhbHNfMSIsInByb3ZpZGVyc18xIiwiY2xpZW50X21ldGFkYXRhXzEiLCJjb21wcmVzc2lvbl8xIiwiZW5jcnlwdGVyXzEiLCJlcnJvcl8xIiwibW9uZ29fY2xpZW50XzEiLCJtb25nb19sb2dnZXJfMSIsInJlYWRfY29uY2Vybl8xIiwicmVhZF9wcmVmZXJlbmNlXzEiLCJ1dGlsc18xIiwid3JpdGVfY29uY2Vybl8xIiwiVkFMSURfVFhUX1JFQ09SRFMiLCJMQl9TSU5HTEVfSE9TVF9FUlJPUiIsIkxCX1JFUExJQ0FfU0VUX0VSUk9SIiwiTEJfRElSRUNUX0NPTk5FQ1RJT05fRVJST1IiLCJvcHRpb25zIiwic3J2SG9zdCIsIk1vbmdvQVBJRXJyb3IiLCJzcGxpdCIsImxlbmd0aCIsImxvb2t1cEFkZHJlc3MiLCJhZGRyZXNzZXMiLCJwcm9taXNlcyIsInJlc29sdmVTcnYiLCJzcnZTZXJ2aWNlTmFtZSIsIm5hbWUiLCJtYXRjaGVzUGFyZW50RG9tYWluIiwiaG9zdEFkZHJlc3NlcyIsIm1hcCIsInIiLCJIb3N0QWRkcmVzcyIsImZyb21TdHJpbmciLCJwb3J0IiwidmFsaWRhdGVMb2FkQmFsYW5jZWRPcHRpb25zIiwicmVjb3JkIiwicmVzb2x2ZVR4dCIsImVycm9yIiwiY29kZSIsIk1vbmdvUGFyc2VFcnJvciIsInR4dFJlY29yZE9wdGlvbnMiLCJVUkxTZWFyY2hQYXJhbXMiLCJqb2luIiwidHh0UmVjb3JkT3B0aW9uS2V5cyIsImtleXMiLCJzb21lIiwia2V5IiwiaW5jbHVkZXMiLCJvcHRpb24iLCJnZXQiLCJzb3VyY2UiLCJ1bmRlZmluZWQiLCJyZXBsaWNhU2V0IiwibG9hZEJhbGFuY2VkIiwidXNlclNwZWNpZmllZEF1dGhTb3VyY2UiLCJjcmVkZW50aWFscyIsIkFVVEhfTUVDSFNfQVVUSF9TUkNfRVhURVJOQUwiLCJoYXMiLCJtZWNoYW5pc20iLCJNb25nb0NyZWRlbnRpYWxzIiwibWVyZ2UiLCJ1c2VyU3BlY2lmaWVkUmVwbGljYVNldCIsInNydk1heEhvc3RzIiwiY2hlY2tUTFNPcHRpb25zIiwiYWxsT3B0aW9ucyIsImNoZWNrIiwiYSIsImIiLCJUUlVUSFMiLCJTZXQiLCJGQUxTRUhPT0RTIiwiZ2V0Qm9vbGVhbiIsInZhbHVlU3RyaW5nIiwiU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJlbWl0V2FybmluZ09uY2UiLCJnZXRJbnRGcm9tT3B0aW9ucyIsInBhcnNlZEludCIsInBhcnNlSW50ZWdlciIsImdldFVJbnRGcm9tT3B0aW9ucyIsInBhcnNlZFZhbHVlIiwiZW50cmllc0Zyb21TdHJpbmciLCJrZXlWYWx1ZVBhaXJzIiwia2V5VmFsdWUiLCJDYXNlSW5zZW5zaXRpdmVNYXAiLCJNYXAiLCJjb25zdHJ1Y3RvciIsImVudHJpZXMiLCJrIiwidiIsInNldCIsImRlbGV0ZSIsInVyaSIsIm1vbmdvQ2xpZW50IiwiTW9uZ29DbGllbnQiLCJ1c2VCaWdJbnQ2NCIsInByb21vdGVMb25ncyIsInByb21vdGVWYWx1ZXMiLCJ1cmwiLCJkZWZhdWx0IiwiaG9zdHMiLCJpc1NSViIsIm1vbmdvT3B0aW9ucyIsImNyZWF0ZSIsImZsYWciLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJ1cmxPcHRpb25zIiwicGF0aG5hbWUiLCJkYk5hbWUiLCJkZWNvZGVVUklDb21wb25lbnQiLCJzbGljZSIsInVzZXJuYW1lIiwiYXV0aCIsInBhc3N3b3JkIiwic2VhcmNoUGFyYW1zIiwidmFsdWVzIiwiZ2V0QWxsIiwib2JqZWN0T3B0aW9ucyIsImZpbHRlciIsInVyaU1lY2hhbmlzbVByb3BlcnRpZXMiLCJwcm9wZXJ0eSIsInRlc3QiLCJhbGxQcm92aWRlZE9wdGlvbnMiLCJhbGxQcm92aWRlZEtleXMiLCJvYmplY3RPcHRpb25WYWx1ZSIsInB1c2giLCJ1cmxWYWx1ZXMiLCJkaWRNYXBUTFNDZXJ0aWZpY2F0ZUZpbGUiLCJ0bHNBbmRTc2xPcHRzIiwiY29uY2F0IiwiYmluZCIsInNpemUiLCJ1bnN1cHBvcnRlZE9wdGlvbnMiLCJzZXREaWZmZXJlbmNlIiwiQXJyYXkiLCJmcm9tIiwicyIsIm9wdGlvbldvcmQiLCJpc09yQXJlIiwiZGVzY3JpcHRvciIsInNldE9wdGlvbiIsImRlcHJlY2F0ZWQiLCJzaG91bGRFbWl0VExTQ2VydGlmaWNhdGVGaWxlRGVwcmVjYXRpb24iLCJkZXByZWNhdGVkTXNnIiwiZW1pdFdhcm5pbmciLCJpc0dzc2FwaSIsIkF1dGhNZWNoYW5pc20iLCJNT05HT0RCX0dTU0FQSSIsImlzWDUwOSIsIk1PTkdPREJfWDUwOSIsImlzQXdzIiwiTU9OR09EQl9BV1MiLCJpc09pZGMiLCJNT05HT0RCX09JREMiLCJNb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yIiwidmFsaWRhdGUiLCJNT05HT0RCX0RFRkFVTFQiLCJtZWNoYW5pc21Qcm9wZXJ0aWVzIiwiYXV0b0VuY3J5cHRpb24iLCJFbmNyeXB0ZXIiLCJjaGVja0Zvck1vbmdvQ3J5cHQiLCJlbmNyeXB0ZXIiLCJhdXRvRW5jcnlwdGVyIiwiZGlyZWN0Q29ubmVjdGlvbiIsIm5vVXNlclNwZWNpZmllZFRMUyIsIm5vVXNlclNwZWNpZmllZFNTTCIsInRscyIsInVzZXJTcGVjaWZpZWRTcnZPcHRpb25zIiwicHJveHlIb3N0IiwicHJveHlQb3J0IiwicHJveHlVc2VybmFtZSIsInByb3h5UGFzc3dvcmQiLCJwcm94eU9wdGlvbnMiLCJsb2dnZXJGZWF0dXJlRmxhZyIsIlN5bWJvbCIsImZvciIsImxvZ2dlckVudk9wdGlvbnMiLCJsb2dnZXJDbGllbnRPcHRpb25zIiwiTU9OR09EQl9MT0dfQ09NTUFORCIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX0xPR19UT1BPTE9HWSIsIk1PTkdPREJfTE9HX1NFUlZFUl9TRUxFQ1RJT04iLCJNT05HT0RCX0xPR19DT05ORUNUSU9OIiwiTU9OR09EQl9MT0dfQUxMIiwiTU9OR09EQl9MT0dfTUFYX0RPQ1VNRU5UX0xFTkdUSCIsIk1PTkdPREJfTE9HX1BBVEgiLCJtb25nb2RiTG9nUGF0aCIsIm1vbmdvTG9nZ2VyT3B0aW9ucyIsIk1vbmdvTG9nZ2VyIiwicmVzb2x2ZU9wdGlvbnMiLCJtZXRhZGF0YSIsIm1ha2VDbGllbnRNZXRhZGF0YSIsImlzU3J2IiwidGFyZ2V0IiwidHlwZSIsInRyYW5zZm9ybSIsImlzUmVjb3JkIiwidHJhbnNmb3JtVmFsdWUiLCJhcHBOYW1lIiwiYXV0aE1lY2hhbmlzbSIsIm1lY2hhbmlzbXMiLCJtIiwibWF0Y2giLCJSZWdFeHAiLCJyYXciLCJNT05HT0RCX1BMQUlOIiwiYXV0aE1lY2hhbmlzbVByb3BlcnRpZXMiLCJvcHRpb25WYWx1ZSIsImF1dGhTb3VyY2UiLCJic29uUmVnRXhwIiwic2VydmVyQXBpIiwidmVyc2lvbiIsInNlcnZlckFwaVRvVmFsaWRhdGUiLCJ2ZXJzaW9uVG9WYWxpZGF0ZSIsIlNlcnZlckFwaVZlcnNpb24iLCJjaGVja0tleXMiLCJjb21wcmVzc29ycyIsImNvbXByZXNzaW9uTGlzdCIsImNvbXBWYWwiLCJjb21wVmFsQXJyYXkiLCJpc0FycmF5IiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsImMiLCJDb21wcmVzc29yIiwiYWRkIiwiY29ubmVjdFRpbWVvdXRNUyIsImRyaXZlckluZm8iLCJlbmFibGVVdGY4VmFsaWRhdGlvbiIsImZhbWlseSIsImZpZWxkc0FzUmF3IiwiZm9yY2VTZXJ2ZXJPYmplY3RJZCIsImZzeW5jIiwid2MiLCJXcml0ZUNvbmNlcm4iLCJmcm9tT3B0aW9ucyIsIndyaXRlQ29uY2VybiIsImhlYXJ0YmVhdEZyZXF1ZW5jeU1TIiwiaWdub3JlVW5kZWZpbmVkIiwiaiIsImpvdXJuYWwiLCJrZWVwQWxpdmUiLCJrZWVwQWxpdmVJbml0aWFsRGVsYXkiLCJsb2NhbFRocmVzaG9sZE1TIiwibWF4Q29ubmVjdGluZyIsIm1heElkbGVUaW1lTVMiLCJtYXhQb29sU2l6ZSIsIm1heFN0YWxlbmVzc1NlY29uZHMiLCJyZWFkUHJlZmVyZW5jZSIsIlJlYWRQcmVmZXJlbmNlIiwibWluSW50ZXJuYWxCdWZmZXJTaXplIiwibWluUG9vbFNpemUiLCJtaW5IZWFydGJlYXRGcmVxdWVuY3lNUyIsIm1vbml0b3JDb21tYW5kcyIsIm5vRGVsYXkiLCJwa0ZhY3RvcnkiLCJERUZBVUxUX1BLX0ZBQ1RPUlkiLCJjcmVhdGVQayIsInByb21vdGVCdWZmZXJzIiwicmVhZENvbmNlcm4iLCJSZWFkQ29uY2VybiIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZWFkQ29uY2VybkxldmVsIiwibGV2ZWwiLCJwcmltYXJ5IiwicnAiLCJycE9wdHMiLCJoZWRnZSIsInRhZ3MiLCJyZWFkUHJlZmVyZW5jZVRhZ3MiLCJ0YWciLCJyZWFkUHJlZmVyZW5jZVRhZyIsInJldHJ5UmVhZHMiLCJyZXRyeVdyaXRlcyIsInNlcmlhbGl6ZUZ1bmN0aW9ucyIsInNlcnZlclNlbGVjdGlvblRpbWVvdXRNUyIsInNlcnZlcm5hbWUiLCJzb2NrZXRUaW1lb3V0TVMiLCJzc2wiLCJzc2xDQSIsInJlYWRGaWxlU3luYyIsImVuY29kaW5nIiwic3NsQ1JMIiwic3NsQ2VydCIsInNzbEtleSIsInNzbFBhc3MiLCJzc2xWYWxpZGF0ZSIsInRsc0FsbG93SW52YWxpZENlcnRpZmljYXRlcyIsInRsc0FsbG93SW52YWxpZEhvc3RuYW1lcyIsInRsc0NBRmlsZSIsInRsc0NlcnRpZmljYXRlRmlsZSIsInRsc0NlcnRpZmljYXRlS2V5RmlsZSIsInRsc0NlcnRpZmljYXRlS2V5RmlsZVBhc3N3b3JkIiwidGxzSW5zZWN1cmUiLCJjaGVja1NlcnZlcklkZW50aXR5IiwicmVqZWN0VW5hdXRob3JpemVkIiwidyIsIndhaXRRdWV1ZVRpbWVvdXRNUyIsInd0aW1lb3V0Iiwid3RpbWVvdXRNUyIsInpsaWJDb21wcmVzc2lvbkxldmVsIiwiY29ubmVjdGlvblR5cGUiLCJzcnZQb2xsZXIiLCJtaW5ESFNpemUiLCJwc2tDYWxsYmFjayIsInNlY3VyZUNvbnRleHQiLCJlbmFibGVUcmFjZSIsInJlcXVlc3RDZXJ0IiwiQUxQTlByb3RvY29scyIsIlNOSUNhbGxiYWNrIiwic2Vzc2lvbiIsInJlcXVlc3RPQ1NQIiwibG9jYWxBZGRyZXNzIiwibG9jYWxQb3J0IiwiaGludHMiLCJsb29rdXAiLCJjYSIsImNlcnQiLCJjaXBoZXJzIiwiY3JsIiwiZWNkaEN1cnZlIiwicGFzc3BocmFzZSIsInBmeCIsInNlY3VyZVByb3RvY29sIiwiaW5kZXgiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/connection_string.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/constants.js":
/*!***********************************************!*\
  !*** ./node_modules/mongodb/lib/constants.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.TOPOLOGY_EVENTS = exports.CMAP_EVENTS = exports.HEARTBEAT_EVENTS = exports.RESUME_TOKEN_CHANGED = exports.END = exports.CHANGE = exports.INIT = exports.MORE = exports.RESPONSE = exports.SERVER_HEARTBEAT_FAILED = exports.SERVER_HEARTBEAT_SUCCEEDED = exports.SERVER_HEARTBEAT_STARTED = exports.COMMAND_FAILED = exports.COMMAND_SUCCEEDED = exports.COMMAND_STARTED = exports.CLUSTER_TIME_RECEIVED = exports.CONNECTION_CHECKED_IN = exports.CONNECTION_CHECKED_OUT = exports.CONNECTION_CHECK_OUT_FAILED = exports.CONNECTION_CHECK_OUT_STARTED = exports.CONNECTION_CLOSED = exports.CONNECTION_READY = exports.CONNECTION_CREATED = exports.CONNECTION_POOL_READY = exports.CONNECTION_POOL_CLEARED = exports.CONNECTION_POOL_CLOSED = exports.CONNECTION_POOL_CREATED = exports.TOPOLOGY_DESCRIPTION_CHANGED = exports.TOPOLOGY_CLOSED = exports.TOPOLOGY_OPENING = exports.SERVER_DESCRIPTION_CHANGED = exports.SERVER_CLOSED = exports.SERVER_OPENING = exports.DESCRIPTION_RECEIVED = exports.UNPINNED = exports.PINNED = exports.MESSAGE = exports.ENDED = exports.CLOSED = exports.CONNECT = exports.OPEN = exports.CLOSE = exports.TIMEOUT = exports.ERROR = exports.SYSTEM_JS_COLLECTION = exports.SYSTEM_COMMAND_COLLECTION = exports.SYSTEM_USER_COLLECTION = exports.SYSTEM_PROFILE_COLLECTION = exports.SYSTEM_INDEX_COLLECTION = exports.SYSTEM_NAMESPACE_COLLECTION = void 0;\nexports.LEGACY_HELLO_COMMAND_CAMEL_CASE = exports.LEGACY_HELLO_COMMAND = exports.MONGO_CLIENT_EVENTS = exports.LOCAL_SERVER_EVENTS = exports.SERVER_RELAY_EVENTS = exports.APM_EVENTS = void 0;\nexports.SYSTEM_NAMESPACE_COLLECTION = \"system.namespaces\";\nexports.SYSTEM_INDEX_COLLECTION = \"system.indexes\";\nexports.SYSTEM_PROFILE_COLLECTION = \"system.profile\";\nexports.SYSTEM_USER_COLLECTION = \"system.users\";\nexports.SYSTEM_COMMAND_COLLECTION = \"$cmd\";\nexports.SYSTEM_JS_COLLECTION = \"system.js\";\n// events\nexports.ERROR = \"error\";\nexports.TIMEOUT = \"timeout\";\nexports.CLOSE = \"close\";\nexports.OPEN = \"open\";\nexports.CONNECT = \"connect\";\nexports.CLOSED = \"closed\";\nexports.ENDED = \"ended\";\nexports.MESSAGE = \"message\";\nexports.PINNED = \"pinned\";\nexports.UNPINNED = \"unpinned\";\nexports.DESCRIPTION_RECEIVED = \"descriptionReceived\";\nexports.SERVER_OPENING = \"serverOpening\";\nexports.SERVER_CLOSED = \"serverClosed\";\nexports.SERVER_DESCRIPTION_CHANGED = \"serverDescriptionChanged\";\nexports.TOPOLOGY_OPENING = \"topologyOpening\";\nexports.TOPOLOGY_CLOSED = \"topologyClosed\";\nexports.TOPOLOGY_DESCRIPTION_CHANGED = \"topologyDescriptionChanged\";\n/** @internal */ exports.CONNECTION_POOL_CREATED = \"connectionPoolCreated\";\n/** @internal */ exports.CONNECTION_POOL_CLOSED = \"connectionPoolClosed\";\n/** @internal */ exports.CONNECTION_POOL_CLEARED = \"connectionPoolCleared\";\n/** @internal */ exports.CONNECTION_POOL_READY = \"connectionPoolReady\";\n/** @internal */ exports.CONNECTION_CREATED = \"connectionCreated\";\n/** @internal */ exports.CONNECTION_READY = \"connectionReady\";\n/** @internal */ exports.CONNECTION_CLOSED = \"connectionClosed\";\n/** @internal */ exports.CONNECTION_CHECK_OUT_STARTED = \"connectionCheckOutStarted\";\n/** @internal */ exports.CONNECTION_CHECK_OUT_FAILED = \"connectionCheckOutFailed\";\n/** @internal */ exports.CONNECTION_CHECKED_OUT = \"connectionCheckedOut\";\n/** @internal */ exports.CONNECTION_CHECKED_IN = \"connectionCheckedIn\";\nexports.CLUSTER_TIME_RECEIVED = \"clusterTimeReceived\";\nexports.COMMAND_STARTED = \"commandStarted\";\nexports.COMMAND_SUCCEEDED = \"commandSucceeded\";\nexports.COMMAND_FAILED = \"commandFailed\";\nexports.SERVER_HEARTBEAT_STARTED = \"serverHeartbeatStarted\";\nexports.SERVER_HEARTBEAT_SUCCEEDED = \"serverHeartbeatSucceeded\";\nexports.SERVER_HEARTBEAT_FAILED = \"serverHeartbeatFailed\";\nexports.RESPONSE = \"response\";\nexports.MORE = \"more\";\nexports.INIT = \"init\";\nexports.CHANGE = \"change\";\nexports.END = \"end\";\nexports.RESUME_TOKEN_CHANGED = \"resumeTokenChanged\";\n/** @public */ exports.HEARTBEAT_EVENTS = Object.freeze([\n    exports.SERVER_HEARTBEAT_STARTED,\n    exports.SERVER_HEARTBEAT_SUCCEEDED,\n    exports.SERVER_HEARTBEAT_FAILED\n]);\n/** @public */ exports.CMAP_EVENTS = Object.freeze([\n    exports.CONNECTION_POOL_CREATED,\n    exports.CONNECTION_POOL_READY,\n    exports.CONNECTION_POOL_CLEARED,\n    exports.CONNECTION_POOL_CLOSED,\n    exports.CONNECTION_CREATED,\n    exports.CONNECTION_READY,\n    exports.CONNECTION_CLOSED,\n    exports.CONNECTION_CHECK_OUT_STARTED,\n    exports.CONNECTION_CHECK_OUT_FAILED,\n    exports.CONNECTION_CHECKED_OUT,\n    exports.CONNECTION_CHECKED_IN\n]);\n/** @public */ exports.TOPOLOGY_EVENTS = Object.freeze([\n    exports.SERVER_OPENING,\n    exports.SERVER_CLOSED,\n    exports.SERVER_DESCRIPTION_CHANGED,\n    exports.TOPOLOGY_OPENING,\n    exports.TOPOLOGY_CLOSED,\n    exports.TOPOLOGY_DESCRIPTION_CHANGED,\n    exports.ERROR,\n    exports.TIMEOUT,\n    exports.CLOSE\n]);\n/** @public */ exports.APM_EVENTS = Object.freeze([\n    exports.COMMAND_STARTED,\n    exports.COMMAND_SUCCEEDED,\n    exports.COMMAND_FAILED\n]);\n/**\n * All events that we relay to the `Topology`\n * @internal\n */ exports.SERVER_RELAY_EVENTS = Object.freeze([\n    exports.SERVER_HEARTBEAT_STARTED,\n    exports.SERVER_HEARTBEAT_SUCCEEDED,\n    exports.SERVER_HEARTBEAT_FAILED,\n    exports.COMMAND_STARTED,\n    exports.COMMAND_SUCCEEDED,\n    exports.COMMAND_FAILED,\n    ...exports.CMAP_EVENTS\n]);\n/**\n * All events we listen to from `Server` instances, but do not forward to the client\n * @internal\n */ exports.LOCAL_SERVER_EVENTS = Object.freeze([\n    exports.CONNECT,\n    exports.DESCRIPTION_RECEIVED,\n    exports.CLOSED,\n    exports.ENDED\n]);\n/** @public */ exports.MONGO_CLIENT_EVENTS = Object.freeze([\n    ...exports.CMAP_EVENTS,\n    ...exports.APM_EVENTS,\n    ...exports.TOPOLOGY_EVENTS,\n    ...exports.HEARTBEAT_EVENTS\n]);\n/**\n * @internal\n * The legacy hello command that was deprecated in MongoDB 5.0.\n */ exports.LEGACY_HELLO_COMMAND = \"ismaster\";\n/**\n * @internal\n * The legacy hello command that was deprecated in MongoDB 5.0.\n */ exports.LEGACY_HELLO_COMMAND_CAMEL_CASE = \"isMaster\"; //# sourceMappingURL=constants.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY29uc3RhbnRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx1QkFBdUIsR0FBR0EsbUJBQW1CLEdBQUdBLHdCQUF3QixHQUFHQSw0QkFBNEIsR0FBR0EsV0FBVyxHQUFHQSxjQUFjLEdBQUdBLFlBQVksR0FBR0EsWUFBWSxHQUFHQSxnQkFBZ0IsR0FBR0EsK0JBQStCLEdBQUdBLGtDQUFrQyxHQUFHQSxnQ0FBZ0MsR0FBR0Esc0JBQXNCLEdBQUdBLHlCQUF5QixHQUFHQSx1QkFBdUIsR0FBR0EsNkJBQTZCLEdBQUdBLDZCQUE2QixHQUFHQSw4QkFBOEIsR0FBR0EsbUNBQW1DLEdBQUdBLG9DQUFvQyxHQUFHQSx5QkFBeUIsR0FBR0Esd0JBQXdCLEdBQUdBLDBCQUEwQixHQUFHQSw2QkFBNkIsR0FBR0EsK0JBQStCLEdBQUdBLDhCQUE4QixHQUFHQSwrQkFBK0IsR0FBR0Esb0NBQW9DLEdBQUdBLHVCQUF1QixHQUFHQSx3QkFBd0IsR0FBR0Esa0NBQWtDLEdBQUdBLHFCQUFxQixHQUFHQSxzQkFBc0IsR0FBR0EsNEJBQTRCLEdBQUdBLGdCQUFnQixHQUFHQSxjQUFjLEdBQUdBLGVBQWUsR0FBR0EsYUFBYSxHQUFHQSxjQUFjLEdBQUdBLGVBQWUsR0FBR0EsWUFBWSxHQUFHQSxhQUFhLEdBQUdBLGVBQWUsR0FBR0EsYUFBYSxHQUFHQSw0QkFBNEIsR0FBR0EsaUNBQWlDLEdBQUdBLDhCQUE4QixHQUFHQSxpQ0FBaUMsR0FBR0EsK0JBQStCLEdBQUdBLG1DQUFtQyxHQUFHLEtBQUs7QUFDMTBDQSx1Q0FBdUMsR0FBR0EsNEJBQTRCLEdBQUdBLDJCQUEyQixHQUFHQSwyQkFBMkIsR0FBR0EsMkJBQTJCLEdBQUdBLGtCQUFrQixHQUFHLEtBQUs7QUFDN0xBLG1DQUFtQyxHQUFHO0FBQ3RDQSwrQkFBK0IsR0FBRztBQUNsQ0EsaUNBQWlD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Qy9CWCxRQUFRZ0IsZUFBZTtJQUN2QmhCLFFBQVFlLGlCQUFpQjtJQUN6QmYsUUFBUWMsY0FBYztPQUNuQmQsUUFBUUcsV0FBVztDQUN6QjtBQUNEOzs7Q0FHQyxHQUNESCwyQkFBMkIsR0FBR0YsT0FBTzRELE1BQU0sQ0FBQztJQUN4QzFELFFBQVF5QyxPQUFPO0lBQ2Z6QyxRQUFRbUMsb0JBQW9CO0lBQzVCbkMsUUFBUXdDLE1BQU07SUFDZHhDLFFBQVF1QyxLQUFLO0NBQ2hCO0FBQ0QsWUFBWSxHQUNadkMsMkJBQTJCLEdBQUdGLE9BQU80RCxNQUFNLENBQUM7T0FDckMxRCxRQUFRRyxXQUFXO09BQ25CSCxRQUFReUQsVUFBVTtPQUNsQnpELFFBQVFFLGVBQWU7T0FDdkJGLFFBQVFJLGdCQUFnQjtDQUM5QjtBQUNEOzs7Q0FHQyxHQUNESiw0QkFBNEIsR0FBRztBQUMvQjs7O0NBR0MsR0FDREEsdUNBQXVDLEdBQUcsWUFDMUMscUNBQXFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NvbnN0YW50cy5qcz9mZmUwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5UT1BPTE9HWV9FVkVOVFMgPSBleHBvcnRzLkNNQVBfRVZFTlRTID0gZXhwb3J0cy5IRUFSVEJFQVRfRVZFTlRTID0gZXhwb3J0cy5SRVNVTUVfVE9LRU5fQ0hBTkdFRCA9IGV4cG9ydHMuRU5EID0gZXhwb3J0cy5DSEFOR0UgPSBleHBvcnRzLklOSVQgPSBleHBvcnRzLk1PUkUgPSBleHBvcnRzLlJFU1BPTlNFID0gZXhwb3J0cy5TRVJWRVJfSEVBUlRCRUFUX0ZBSUxFRCA9IGV4cG9ydHMuU0VSVkVSX0hFQVJUQkVBVF9TVUNDRUVERUQgPSBleHBvcnRzLlNFUlZFUl9IRUFSVEJFQVRfU1RBUlRFRCA9IGV4cG9ydHMuQ09NTUFORF9GQUlMRUQgPSBleHBvcnRzLkNPTU1BTkRfU1VDQ0VFREVEID0gZXhwb3J0cy5DT01NQU5EX1NUQVJURUQgPSBleHBvcnRzLkNMVVNURVJfVElNRV9SRUNFSVZFRCA9IGV4cG9ydHMuQ09OTkVDVElPTl9DSEVDS0VEX0lOID0gZXhwb3J0cy5DT05ORUNUSU9OX0NIRUNLRURfT1VUID0gZXhwb3J0cy5DT05ORUNUSU9OX0NIRUNLX09VVF9GQUlMRUQgPSBleHBvcnRzLkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX1NUQVJURUQgPSBleHBvcnRzLkNPTk5FQ1RJT05fQ0xPU0VEID0gZXhwb3J0cy5DT05ORUNUSU9OX1JFQURZID0gZXhwb3J0cy5DT05ORUNUSU9OX0NSRUFURUQgPSBleHBvcnRzLkNPTk5FQ1RJT05fUE9PTF9SRUFEWSA9IGV4cG9ydHMuQ09OTkVDVElPTl9QT09MX0NMRUFSRUQgPSBleHBvcnRzLkNPTk5FQ1RJT05fUE9PTF9DTE9TRUQgPSBleHBvcnRzLkNPTk5FQ1RJT05fUE9PTF9DUkVBVEVEID0gZXhwb3J0cy5UT1BPTE9HWV9ERVNDUklQVElPTl9DSEFOR0VEID0gZXhwb3J0cy5UT1BPTE9HWV9DTE9TRUQgPSBleHBvcnRzLlRPUE9MT0dZX09QRU5JTkcgPSBleHBvcnRzLlNFUlZFUl9ERVNDUklQVElPTl9DSEFOR0VEID0gZXhwb3J0cy5TRVJWRVJfQ0xPU0VEID0gZXhwb3J0cy5TRVJWRVJfT1BFTklORyA9IGV4cG9ydHMuREVTQ1JJUFRJT05fUkVDRUlWRUQgPSBleHBvcnRzLlVOUElOTkVEID0gZXhwb3J0cy5QSU5ORUQgPSBleHBvcnRzLk1FU1NBR0UgPSBleHBvcnRzLkVOREVEID0gZXhwb3J0cy5DTE9TRUQgPSBleHBvcnRzLkNPTk5FQ1QgPSBleHBvcnRzLk9QRU4gPSBleHBvcnRzLkNMT1NFID0gZXhwb3J0cy5USU1FT1VUID0gZXhwb3J0cy5FUlJPUiA9IGV4cG9ydHMuU1lTVEVNX0pTX0NPTExFQ1RJT04gPSBleHBvcnRzLlNZU1RFTV9DT01NQU5EX0NPTExFQ1RJT04gPSBleHBvcnRzLlNZU1RFTV9VU0VSX0NPTExFQ1RJT04gPSBleHBvcnRzLlNZU1RFTV9QUk9GSUxFX0NPTExFQ1RJT04gPSBleHBvcnRzLlNZU1RFTV9JTkRFWF9DT0xMRUNUSU9OID0gZXhwb3J0cy5TWVNURU1fTkFNRVNQQUNFX0NPTExFQ1RJT04gPSB2b2lkIDA7XG5leHBvcnRzLkxFR0FDWV9IRUxMT19DT01NQU5EX0NBTUVMX0NBU0UgPSBleHBvcnRzLkxFR0FDWV9IRUxMT19DT01NQU5EID0gZXhwb3J0cy5NT05HT19DTElFTlRfRVZFTlRTID0gZXhwb3J0cy5MT0NBTF9TRVJWRVJfRVZFTlRTID0gZXhwb3J0cy5TRVJWRVJfUkVMQVlfRVZFTlRTID0gZXhwb3J0cy5BUE1fRVZFTlRTID0gdm9pZCAwO1xuZXhwb3J0cy5TWVNURU1fTkFNRVNQQUNFX0NPTExFQ1RJT04gPSAnc3lzdGVtLm5hbWVzcGFjZXMnO1xuZXhwb3J0cy5TWVNURU1fSU5ERVhfQ09MTEVDVElPTiA9ICdzeXN0ZW0uaW5kZXhlcyc7XG5leHBvcnRzLlNZU1RFTV9QUk9GSUxFX0NPTExFQ1RJT04gPSAnc3lzdGVtLnByb2ZpbGUnO1xuZXhwb3J0cy5TWVNURU1fVVNFUl9DT0xMRUNUSU9OID0gJ3N5c3RlbS51c2Vycyc7XG5leHBvcnRzLlNZU1RFTV9DT01NQU5EX0NPTExFQ1RJT04gPSAnJGNtZCc7XG5leHBvcnRzLlNZU1RFTV9KU19DT0xMRUNUSU9OID0gJ3N5c3RlbS5qcyc7XG4vLyBldmVudHNcbmV4cG9ydHMuRVJST1IgPSAnZXJyb3InO1xuZXhwb3J0cy5USU1FT1VUID0gJ3RpbWVvdXQnO1xuZXhwb3J0cy5DTE9TRSA9ICdjbG9zZSc7XG5leHBvcnRzLk9QRU4gPSAnb3Blbic7XG5leHBvcnRzLkNPTk5FQ1QgPSAnY29ubmVjdCc7XG5leHBvcnRzLkNMT1NFRCA9ICdjbG9zZWQnO1xuZXhwb3J0cy5FTkRFRCA9ICdlbmRlZCc7XG5leHBvcnRzLk1FU1NBR0UgPSAnbWVzc2FnZSc7XG5leHBvcnRzLlBJTk5FRCA9ICdwaW5uZWQnO1xuZXhwb3J0cy5VTlBJTk5FRCA9ICd1bnBpbm5lZCc7XG5leHBvcnRzLkRFU0NSSVBUSU9OX1JFQ0VJVkVEID0gJ2Rlc2NyaXB0aW9uUmVjZWl2ZWQnO1xuZXhwb3J0cy5TRVJWRVJfT1BFTklORyA9ICdzZXJ2ZXJPcGVuaW5nJztcbmV4cG9ydHMuU0VSVkVSX0NMT1NFRCA9ICdzZXJ2ZXJDbG9zZWQnO1xuZXhwb3J0cy5TRVJWRVJfREVTQ1JJUFRJT05fQ0hBTkdFRCA9ICdzZXJ2ZXJEZXNjcmlwdGlvbkNoYW5nZWQnO1xuZXhwb3J0cy5UT1BPTE9HWV9PUEVOSU5HID0gJ3RvcG9sb2d5T3BlbmluZyc7XG5leHBvcnRzLlRPUE9MT0dZX0NMT1NFRCA9ICd0b3BvbG9neUNsb3NlZCc7XG5leHBvcnRzLlRPUE9MT0dZX0RFU0NSSVBUSU9OX0NIQU5HRUQgPSAndG9wb2xvZ3lEZXNjcmlwdGlvbkNoYW5nZWQnO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5DT05ORUNUSU9OX1BPT0xfQ1JFQVRFRCA9ICdjb25uZWN0aW9uUG9vbENyZWF0ZWQnO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5DT05ORUNUSU9OX1BPT0xfQ0xPU0VEID0gJ2Nvbm5lY3Rpb25Qb29sQ2xvc2VkJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuQ09OTkVDVElPTl9QT09MX0NMRUFSRUQgPSAnY29ubmVjdGlvblBvb2xDbGVhcmVkJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuQ09OTkVDVElPTl9QT09MX1JFQURZID0gJ2Nvbm5lY3Rpb25Qb29sUmVhZHknO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5DT05ORUNUSU9OX0NSRUFURUQgPSAnY29ubmVjdGlvbkNyZWF0ZWQnO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5DT05ORUNUSU9OX1JFQURZID0gJ2Nvbm5lY3Rpb25SZWFkeSc7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLkNPTk5FQ1RJT05fQ0xPU0VEID0gJ2Nvbm5lY3Rpb25DbG9zZWQnO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5DT05ORUNUSU9OX0NIRUNLX09VVF9TVEFSVEVEID0gJ2Nvbm5lY3Rpb25DaGVja091dFN0YXJ0ZWQnO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5DT05ORUNUSU9OX0NIRUNLX09VVF9GQUlMRUQgPSAnY29ubmVjdGlvbkNoZWNrT3V0RmFpbGVkJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuQ09OTkVDVElPTl9DSEVDS0VEX09VVCA9ICdjb25uZWN0aW9uQ2hlY2tlZE91dCc7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLkNPTk5FQ1RJT05fQ0hFQ0tFRF9JTiA9ICdjb25uZWN0aW9uQ2hlY2tlZEluJztcbmV4cG9ydHMuQ0xVU1RFUl9USU1FX1JFQ0VJVkVEID0gJ2NsdXN0ZXJUaW1lUmVjZWl2ZWQnO1xuZXhwb3J0cy5DT01NQU5EX1NUQVJURUQgPSAnY29tbWFuZFN0YXJ0ZWQnO1xuZXhwb3J0cy5DT01NQU5EX1NVQ0NFRURFRCA9ICdjb21tYW5kU3VjY2VlZGVkJztcbmV4cG9ydHMuQ09NTUFORF9GQUlMRUQgPSAnY29tbWFuZEZhaWxlZCc7XG5leHBvcnRzLlNFUlZFUl9IRUFSVEJFQVRfU1RBUlRFRCA9ICdzZXJ2ZXJIZWFydGJlYXRTdGFydGVkJztcbmV4cG9ydHMuU0VSVkVSX0hFQVJUQkVBVF9TVUNDRUVERUQgPSAnc2VydmVySGVhcnRiZWF0U3VjY2VlZGVkJztcbmV4cG9ydHMuU0VSVkVSX0hFQVJUQkVBVF9GQUlMRUQgPSAnc2VydmVySGVhcnRiZWF0RmFpbGVkJztcbmV4cG9ydHMuUkVTUE9OU0UgPSAncmVzcG9uc2UnO1xuZXhwb3J0cy5NT1JFID0gJ21vcmUnO1xuZXhwb3J0cy5JTklUID0gJ2luaXQnO1xuZXhwb3J0cy5DSEFOR0UgPSAnY2hhbmdlJztcbmV4cG9ydHMuRU5EID0gJ2VuZCc7XG5leHBvcnRzLlJFU1VNRV9UT0tFTl9DSEFOR0VEID0gJ3Jlc3VtZVRva2VuQ2hhbmdlZCc7XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0cy5IRUFSVEJFQVRfRVZFTlRTID0gT2JqZWN0LmZyZWV6ZShbXG4gICAgZXhwb3J0cy5TRVJWRVJfSEVBUlRCRUFUX1NUQVJURUQsXG4gICAgZXhwb3J0cy5TRVJWRVJfSEVBUlRCRUFUX1NVQ0NFRURFRCxcbiAgICBleHBvcnRzLlNFUlZFUl9IRUFSVEJFQVRfRkFJTEVEXG5dKTtcbi8qKiBAcHVibGljICovXG5leHBvcnRzLkNNQVBfRVZFTlRTID0gT2JqZWN0LmZyZWV6ZShbXG4gICAgZXhwb3J0cy5DT05ORUNUSU9OX1BPT0xfQ1JFQVRFRCxcbiAgICBleHBvcnRzLkNPTk5FQ1RJT05fUE9PTF9SRUFEWSxcbiAgICBleHBvcnRzLkNPTk5FQ1RJT05fUE9PTF9DTEVBUkVELFxuICAgIGV4cG9ydHMuQ09OTkVDVElPTl9QT09MX0NMT1NFRCxcbiAgICBleHBvcnRzLkNPTk5FQ1RJT05fQ1JFQVRFRCxcbiAgICBleHBvcnRzLkNPTk5FQ1RJT05fUkVBRFksXG4gICAgZXhwb3J0cy5DT05ORUNUSU9OX0NMT1NFRCxcbiAgICBleHBvcnRzLkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX1NUQVJURUQsXG4gICAgZXhwb3J0cy5DT05ORUNUSU9OX0NIRUNLX09VVF9GQUlMRUQsXG4gICAgZXhwb3J0cy5DT05ORUNUSU9OX0NIRUNLRURfT1VULFxuICAgIGV4cG9ydHMuQ09OTkVDVElPTl9DSEVDS0VEX0lOXG5dKTtcbi8qKiBAcHVibGljICovXG5leHBvcnRzLlRPUE9MT0dZX0VWRU5UUyA9IE9iamVjdC5mcmVlemUoW1xuICAgIGV4cG9ydHMuU0VSVkVSX09QRU5JTkcsXG4gICAgZXhwb3J0cy5TRVJWRVJfQ0xPU0VELFxuICAgIGV4cG9ydHMuU0VSVkVSX0RFU0NSSVBUSU9OX0NIQU5HRUQsXG4gICAgZXhwb3J0cy5UT1BPTE9HWV9PUEVOSU5HLFxuICAgIGV4cG9ydHMuVE9QT0xPR1lfQ0xPU0VELFxuICAgIGV4cG9ydHMuVE9QT0xPR1lfREVTQ1JJUFRJT05fQ0hBTkdFRCxcbiAgICBleHBvcnRzLkVSUk9SLFxuICAgIGV4cG9ydHMuVElNRU9VVCxcbiAgICBleHBvcnRzLkNMT1NFXG5dKTtcbi8qKiBAcHVibGljICovXG5leHBvcnRzLkFQTV9FVkVOVFMgPSBPYmplY3QuZnJlZXplKFtcbiAgICBleHBvcnRzLkNPTU1BTkRfU1RBUlRFRCxcbiAgICBleHBvcnRzLkNPTU1BTkRfU1VDQ0VFREVELFxuICAgIGV4cG9ydHMuQ09NTUFORF9GQUlMRURcbl0pO1xuLyoqXG4gKiBBbGwgZXZlbnRzIHRoYXQgd2UgcmVsYXkgdG8gdGhlIGBUb3BvbG9neWBcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnRzLlNFUlZFUl9SRUxBWV9FVkVOVFMgPSBPYmplY3QuZnJlZXplKFtcbiAgICBleHBvcnRzLlNFUlZFUl9IRUFSVEJFQVRfU1RBUlRFRCxcbiAgICBleHBvcnRzLlNFUlZFUl9IRUFSVEJFQVRfU1VDQ0VFREVELFxuICAgIGV4cG9ydHMuU0VSVkVSX0hFQVJUQkVBVF9GQUlMRUQsXG4gICAgZXhwb3J0cy5DT01NQU5EX1NUQVJURUQsXG4gICAgZXhwb3J0cy5DT01NQU5EX1NVQ0NFRURFRCxcbiAgICBleHBvcnRzLkNPTU1BTkRfRkFJTEVELFxuICAgIC4uLmV4cG9ydHMuQ01BUF9FVkVOVFNcbl0pO1xuLyoqXG4gKiBBbGwgZXZlbnRzIHdlIGxpc3RlbiB0byBmcm9tIGBTZXJ2ZXJgIGluc3RhbmNlcywgYnV0IGRvIG5vdCBmb3J3YXJkIHRvIHRoZSBjbGllbnRcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnRzLkxPQ0FMX1NFUlZFUl9FVkVOVFMgPSBPYmplY3QuZnJlZXplKFtcbiAgICBleHBvcnRzLkNPTk5FQ1QsXG4gICAgZXhwb3J0cy5ERVNDUklQVElPTl9SRUNFSVZFRCxcbiAgICBleHBvcnRzLkNMT1NFRCxcbiAgICBleHBvcnRzLkVOREVEXG5dKTtcbi8qKiBAcHVibGljICovXG5leHBvcnRzLk1PTkdPX0NMSUVOVF9FVkVOVFMgPSBPYmplY3QuZnJlZXplKFtcbiAgICAuLi5leHBvcnRzLkNNQVBfRVZFTlRTLFxuICAgIC4uLmV4cG9ydHMuQVBNX0VWRU5UUyxcbiAgICAuLi5leHBvcnRzLlRPUE9MT0dZX0VWRU5UUyxcbiAgICAuLi5leHBvcnRzLkhFQVJUQkVBVF9FVkVOVFNcbl0pO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIFRoZSBsZWdhY3kgaGVsbG8gY29tbWFuZCB0aGF0IHdhcyBkZXByZWNhdGVkIGluIE1vbmdvREIgNS4wLlxuICovXG5leHBvcnRzLkxFR0FDWV9IRUxMT19DT01NQU5EID0gJ2lzbWFzdGVyJztcbi8qKlxuICogQGludGVybmFsXG4gKiBUaGUgbGVnYWN5IGhlbGxvIGNvbW1hbmQgdGhhdCB3YXMgZGVwcmVjYXRlZCBpbiBNb25nb0RCIDUuMC5cbiAqL1xuZXhwb3J0cy5MRUdBQ1lfSEVMTE9fQ09NTUFORF9DQU1FTF9DQVNFID0gJ2lzTWFzdGVyJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnN0YW50cy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJUT1BPTE9HWV9FVkVOVFMiLCJDTUFQX0VWRU5UUyIsIkhFQVJUQkVBVF9FVkVOVFMiLCJSRVNVTUVfVE9LRU5fQ0hBTkdFRCIsIkVORCIsIkNIQU5HRSIsIklOSVQiLCJNT1JFIiwiUkVTUE9OU0UiLCJTRVJWRVJfSEVBUlRCRUFUX0ZBSUxFRCIsIlNFUlZFUl9IRUFSVEJFQVRfU1VDQ0VFREVEIiwiU0VSVkVSX0hFQVJUQkVBVF9TVEFSVEVEIiwiQ09NTUFORF9GQUlMRUQiLCJDT01NQU5EX1NVQ0NFRURFRCIsIkNPTU1BTkRfU1RBUlRFRCIsIkNMVVNURVJfVElNRV9SRUNFSVZFRCIsIkNPTk5FQ1RJT05fQ0hFQ0tFRF9JTiIsIkNPTk5FQ1RJT05fQ0hFQ0tFRF9PVVQiLCJDT05ORUNUSU9OX0NIRUNLX09VVF9GQUlMRUQiLCJDT05ORUNUSU9OX0NIRUNLX09VVF9TVEFSVEVEIiwiQ09OTkVDVElPTl9DTE9TRUQiLCJDT05ORUNUSU9OX1JFQURZIiwiQ09OTkVDVElPTl9DUkVBVEVEIiwiQ09OTkVDVElPTl9QT09MX1JFQURZIiwiQ09OTkVDVElPTl9QT09MX0NMRUFSRUQiLCJDT05ORUNUSU9OX1BPT0xfQ0xPU0VEIiwiQ09OTkVDVElPTl9QT09MX0NSRUFURUQiLCJUT1BPTE9HWV9ERVNDUklQVElPTl9DSEFOR0VEIiwiVE9QT0xPR1lfQ0xPU0VEIiwiVE9QT0xPR1lfT1BFTklORyIsIlNFUlZFUl9ERVNDUklQVElPTl9DSEFOR0VEIiwiU0VSVkVSX0NMT1NFRCIsIlNFUlZFUl9PUEVOSU5HIiwiREVTQ1JJUFRJT05fUkVDRUlWRUQiLCJVTlBJTk5FRCIsIlBJTk5FRCIsIk1FU1NBR0UiLCJFTkRFRCIsIkNMT1NFRCIsIkNPTk5FQ1QiLCJPUEVOIiwiQ0xPU0UiLCJUSU1FT1VUIiwiRVJST1IiLCJTWVNURU1fSlNfQ09MTEVDVElPTiIsIlNZU1RFTV9DT01NQU5EX0NPTExFQ1RJT04iLCJTWVNURU1fVVNFUl9DT0xMRUNUSU9OIiwiU1lTVEVNX1BST0ZJTEVfQ09MTEVDVElPTiIsIlNZU1RFTV9JTkRFWF9DT0xMRUNUSU9OIiwiU1lTVEVNX05BTUVTUEFDRV9DT0xMRUNUSU9OIiwiTEVHQUNZX0hFTExPX0NPTU1BTkRfQ0FNRUxfQ0FTRSIsIkxFR0FDWV9IRUxMT19DT01NQU5EIiwiTU9OR09fQ0xJRU5UX0VWRU5UUyIsIkxPQ0FMX1NFUlZFUl9FVkVOVFMiLCJTRVJWRVJfUkVMQVlfRVZFTlRTIiwiQVBNX0VWRU5UUyIsImZyZWV6ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js":
/*!************************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/abstract_cursor.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.assertUninitialized = exports.AbstractCursor = exports.CURSOR_FLAGS = void 0;\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst get_more_1 = __webpack_require__(/*! ../operations/get_more */ \"(ssr)/./node_modules/mongodb/lib/operations/get_more.js\");\nconst kill_cursors_1 = __webpack_require__(/*! ../operations/kill_cursors */ \"(ssr)/./node_modules/mongodb/lib/operations/kill_cursors.js\");\nconst read_concern_1 = __webpack_require__(/*! ../read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst sessions_1 = __webpack_require__(/*! ../sessions */ \"(ssr)/./node_modules/mongodb/lib/sessions.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\n/** @internal */ const kId = Symbol(\"id\");\n/** @internal */ const kDocuments = Symbol(\"documents\");\n/** @internal */ const kServer = Symbol(\"server\");\n/** @internal */ const kNamespace = Symbol(\"namespace\");\n/** @internal */ const kClient = Symbol(\"client\");\n/** @internal */ const kSession = Symbol(\"session\");\n/** @internal */ const kOptions = Symbol(\"options\");\n/** @internal */ const kTransform = Symbol(\"transform\");\n/** @internal */ const kInitialized = Symbol(\"initialized\");\n/** @internal */ const kClosed = Symbol(\"closed\");\n/** @internal */ const kKilled = Symbol(\"killed\");\n/** @internal */ const kInit = Symbol(\"kInit\");\n/** @public */ exports.CURSOR_FLAGS = [\n    \"tailable\",\n    \"oplogReplay\",\n    \"noCursorTimeout\",\n    \"awaitData\",\n    \"exhaust\",\n    \"partial\"\n];\n/** @public */ class AbstractCursor extends mongo_types_1.TypedEventEmitter {\n    /** @internal */ constructor(client, namespace, options = {}){\n        super();\n        if (!client.s.isMongoClient) {\n            throw new error_1.MongoRuntimeError(\"Cursor must be constructed with MongoClient\");\n        }\n        this[kClient] = client;\n        this[kNamespace] = namespace;\n        this[kId] = null;\n        this[kDocuments] = new utils_1.List();\n        this[kInitialized] = false;\n        this[kClosed] = false;\n        this[kKilled] = false;\n        this[kOptions] = {\n            readPreference: options.readPreference && options.readPreference instanceof read_preference_1.ReadPreference ? options.readPreference : read_preference_1.ReadPreference.primary,\n            ...(0, bson_1.pluckBSONSerializeOptions)(options)\n        };\n        const readConcern = read_concern_1.ReadConcern.fromOptions(options);\n        if (readConcern) {\n            this[kOptions].readConcern = readConcern;\n        }\n        if (typeof options.batchSize === \"number\") {\n            this[kOptions].batchSize = options.batchSize;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (options.comment !== undefined) {\n            this[kOptions].comment = options.comment;\n        }\n        if (typeof options.maxTimeMS === \"number\") {\n            this[kOptions].maxTimeMS = options.maxTimeMS;\n        }\n        if (typeof options.maxAwaitTimeMS === \"number\") {\n            this[kOptions].maxAwaitTimeMS = options.maxAwaitTimeMS;\n        }\n        if (options.session instanceof sessions_1.ClientSession) {\n            this[kSession] = options.session;\n        } else {\n            this[kSession] = this[kClient].startSession({\n                owner: this,\n                explicit: false\n            });\n        }\n    }\n    get id() {\n        return this[kId] ?? undefined;\n    }\n    /** @internal */ get client() {\n        return this[kClient];\n    }\n    /** @internal */ get server() {\n        return this[kServer];\n    }\n    get namespace() {\n        return this[kNamespace];\n    }\n    get readPreference() {\n        return this[kOptions].readPreference;\n    }\n    get readConcern() {\n        return this[kOptions].readConcern;\n    }\n    /** @internal */ get session() {\n        return this[kSession];\n    }\n    set session(clientSession) {\n        this[kSession] = clientSession;\n    }\n    /** @internal */ get cursorOptions() {\n        return this[kOptions];\n    }\n    get closed() {\n        return this[kClosed];\n    }\n    get killed() {\n        return this[kKilled];\n    }\n    get loadBalanced() {\n        return !!this[kClient].topology?.loadBalanced;\n    }\n    /** Returns current buffered documents length */ bufferedCount() {\n        return this[kDocuments].length;\n    }\n    /** Returns current buffered documents */ readBufferedDocuments(number) {\n        const bufferedDocs = [];\n        const documentsToRead = Math.min(number ?? this[kDocuments].length, this[kDocuments].length);\n        for(let count = 0; count < documentsToRead; count++){\n            const document = this[kDocuments].shift();\n            if (document != null) {\n                bufferedDocs.push(document);\n            }\n        }\n        return bufferedDocs;\n    }\n    async *[Symbol.asyncIterator]() {\n        if (this.closed) {\n            return;\n        }\n        try {\n            while(true){\n                const document = await this.next();\n                // Intentional strict null check, because users can map cursors to falsey values.\n                // We allow mapping to all values except for null.\n                // eslint-disable-next-line no-restricted-syntax\n                if (document === null) {\n                    if (!this.closed) {\n                        const message = \"Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.\";\n                        await cleanupCursorAsync(this, {\n                            needsToEmitClosed: true\n                        }).catch(()=>null);\n                        throw new error_1.MongoAPIError(message);\n                    }\n                    break;\n                }\n                yield document;\n                if (this[kId] === bson_1.Long.ZERO) {\n                    break;\n                }\n            }\n        } finally{\n            // Only close the cursor if it has not already been closed. This finally clause handles\n            // the case when a user would break out of a for await of loop early.\n            if (!this.closed) {\n                await this.close().catch(()=>null);\n            }\n        }\n    }\n    stream(options) {\n        if (options?.transform) {\n            const transform = options.transform;\n            const readable = new ReadableCursorStream(this);\n            return readable.pipe(new stream_1.Transform({\n                objectMode: true,\n                highWaterMark: 1,\n                transform (chunk, _, callback) {\n                    try {\n                        const transformed = transform(chunk);\n                        callback(undefined, transformed);\n                    } catch (err) {\n                        callback(err);\n                    }\n                }\n            }));\n        }\n        return new ReadableCursorStream(this);\n    }\n    async hasNext() {\n        if (this[kId] === bson_1.Long.ZERO) {\n            return false;\n        }\n        if (this[kDocuments].length !== 0) {\n            return true;\n        }\n        const doc = await next(this, {\n            blocking: true,\n            transform: false\n        });\n        if (doc) {\n            this[kDocuments].unshift(doc);\n            return true;\n        }\n        return false;\n    }\n    /** Get the next available document from the cursor, returns null if no more documents are available. */ async next() {\n        if (this[kId] === bson_1.Long.ZERO) {\n            throw new error_1.MongoCursorExhaustedError();\n        }\n        return next(this, {\n            blocking: true,\n            transform: true\n        });\n    }\n    /**\n     * Try to get the next available document from the cursor or `null` if an empty batch is returned\n     */ async tryNext() {\n        if (this[kId] === bson_1.Long.ZERO) {\n            throw new error_1.MongoCursorExhaustedError();\n        }\n        return next(this, {\n            blocking: false,\n            transform: true\n        });\n    }\n    /**\n     * Iterates over all the documents for this cursor using the iterator, callback pattern.\n     *\n     * If the iterator returns `false`, iteration will stop.\n     *\n     * @param iterator - The iteration callback.\n     * @deprecated - Will be removed in a future release. Use for await...of instead.\n     */ async forEach(iterator) {\n        if (typeof iterator !== \"function\") {\n            throw new error_1.MongoInvalidArgumentError('Argument \"iterator\" must be a function');\n        }\n        for await (const document of this){\n            const result = iterator(document);\n            if (result === false) {\n                break;\n            }\n        }\n    }\n    async close() {\n        const needsToEmitClosed = !this[kClosed];\n        this[kClosed] = true;\n        await cleanupCursorAsync(this, {\n            needsToEmitClosed\n        });\n    }\n    /**\n     * Returns an array of documents. The caller is responsible for making sure that there\n     * is enough memory to store the results. Note that the array only contains partial\n     * results when this cursor had been previously accessed. In that case,\n     * cursor.rewind() can be used to reset the cursor.\n     */ async toArray() {\n        const array = [];\n        for await (const document of this){\n            array.push(document);\n        }\n        return array;\n    }\n    /**\n     * Add a cursor flag to the cursor\n     *\n     * @param flag - The flag to set, must be one of following ['tailable', 'oplogReplay', 'noCursorTimeout', 'awaitData', 'partial' -.\n     * @param value - The flag boolean value.\n     */ addCursorFlag(flag, value) {\n        assertUninitialized(this);\n        if (!exports.CURSOR_FLAGS.includes(flag)) {\n            throw new error_1.MongoInvalidArgumentError(`Flag ${flag} is not one of ${exports.CURSOR_FLAGS}`);\n        }\n        if (typeof value !== \"boolean\") {\n            throw new error_1.MongoInvalidArgumentError(`Flag ${flag} must be a boolean value`);\n        }\n        this[kOptions][flag] = value;\n        return this;\n    }\n    /**\n     * Map all documents using the provided function\n     * If there is a transform set on the cursor, that will be called first and the result passed to\n     * this function's transform.\n     *\n     * @remarks\n     *\n     * **Note** Cursors use `null` internally to indicate that there are no more documents in the cursor. Providing a mapping\n     * function that maps values to `null` will result in the cursor closing itself before it has finished iterating\n     * all documents.  This will **not** result in a memory leak, just surprising behavior.  For example:\n     *\n     * ```typescript\n     * const cursor = collection.find({});\n     * cursor.map(() => null);\n     *\n     * const documents = await cursor.toArray();\n     * // documents is always [], regardless of how many documents are in the collection.\n     * ```\n     *\n     * Other falsey values are allowed:\n     *\n     * ```typescript\n     * const cursor = collection.find({});\n     * cursor.map(() => '');\n     *\n     * const documents = await cursor.toArray();\n     * // documents is now an array of empty strings\n     * ```\n     *\n     * **Note for Typescript Users:** adding a transform changes the return type of the iteration of this cursor,\n     * it **does not** return a new instance of a cursor. This means when calling map,\n     * you should always assign the result to a new variable in order to get a correctly typed cursor variable.\n     * Take note of the following example:\n     *\n     * @example\n     * ```typescript\n     * const cursor: FindCursor<Document> = coll.find();\n     * const mappedCursor: FindCursor<number> = cursor.map(doc => Object.keys(doc).length);\n     * const keyCounts: number[] = await mappedCursor.toArray(); // cursor.toArray() still returns Document[]\n     * ```\n     * @param transform - The mapping transformation method.\n     */ map(transform) {\n        assertUninitialized(this);\n        const oldTransform = this[kTransform]; // TODO(NODE-3283): Improve transform typing\n        if (oldTransform) {\n            this[kTransform] = (doc)=>{\n                return transform(oldTransform(doc));\n            };\n        } else {\n            this[kTransform] = transform;\n        }\n        return this;\n    }\n    /**\n     * Set the ReadPreference for the cursor.\n     *\n     * @param readPreference - The new read preference for the cursor.\n     */ withReadPreference(readPreference) {\n        assertUninitialized(this);\n        if (readPreference instanceof read_preference_1.ReadPreference) {\n            this[kOptions].readPreference = readPreference;\n        } else if (typeof readPreference === \"string\") {\n            this[kOptions].readPreference = read_preference_1.ReadPreference.fromString(readPreference);\n        } else {\n            throw new error_1.MongoInvalidArgumentError(`Invalid read preference: ${readPreference}`);\n        }\n        return this;\n    }\n    /**\n     * Set the ReadPreference for the cursor.\n     *\n     * @param readPreference - The new read preference for the cursor.\n     */ withReadConcern(readConcern) {\n        assertUninitialized(this);\n        const resolvedReadConcern = read_concern_1.ReadConcern.fromOptions({\n            readConcern\n        });\n        if (resolvedReadConcern) {\n            this[kOptions].readConcern = resolvedReadConcern;\n        }\n        return this;\n    }\n    /**\n     * Set a maxTimeMS on the cursor query, allowing for hard timeout limits on queries (Only supported on MongoDB 2.6 or higher)\n     *\n     * @param value - Number of milliseconds to wait before aborting the query.\n     */ maxTimeMS(value) {\n        assertUninitialized(this);\n        if (typeof value !== \"number\") {\n            throw new error_1.MongoInvalidArgumentError(\"Argument for maxTimeMS must be a number\");\n        }\n        this[kOptions].maxTimeMS = value;\n        return this;\n    }\n    /**\n     * Set the batch size for the cursor.\n     *\n     * @param value - The number of documents to return per batch. See {@link https://www.mongodb.com/docs/manual/reference/command/find/|find command documentation}.\n     */ batchSize(value) {\n        assertUninitialized(this);\n        if (this[kOptions].tailable) {\n            throw new error_1.MongoTailableCursorError(\"Tailable cursor does not support batchSize\");\n        }\n        if (typeof value !== \"number\") {\n            throw new error_1.MongoInvalidArgumentError('Operation \"batchSize\" requires an integer');\n        }\n        this[kOptions].batchSize = value;\n        return this;\n    }\n    /**\n     * Rewind this cursor to its uninitialized state. Any options that are present on the cursor will\n     * remain in effect. Iterating this cursor will cause new queries to be sent to the server, even\n     * if the resultant data has already been retrieved by this cursor.\n     */ rewind() {\n        if (!this[kInitialized]) {\n            return;\n        }\n        this[kId] = null;\n        this[kDocuments].clear();\n        this[kClosed] = false;\n        this[kKilled] = false;\n        this[kInitialized] = false;\n        const session = this[kSession];\n        if (session) {\n            // We only want to end this session if we created it, and it hasn't ended yet\n            if (session.explicit === false) {\n                if (!session.hasEnded) {\n                    session.endSession().catch(()=>null);\n                }\n                this[kSession] = this.client.startSession({\n                    owner: this,\n                    explicit: false\n                });\n            }\n        }\n    }\n    /** @internal */ _getMore(batchSize, callback) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const getMoreOperation = new get_more_1.GetMoreOperation(this[kNamespace], this[kId], this[kServer], {\n            ...this[kOptions],\n            session: this[kSession],\n            batchSize\n        });\n        (0, execute_operation_1.executeOperation)(this[kClient], getMoreOperation, callback);\n    }\n    /**\n     * @internal\n     *\n     * This function is exposed for the unified test runner's createChangeStream\n     * operation.  We cannot refactor to use the abstract _initialize method without\n     * a significant refactor.\n     */ [kInit](callback) {\n        this._initialize(this[kSession], (error, state)=>{\n            if (state) {\n                const response = state.response;\n                this[kServer] = state.server;\n                if (response.cursor) {\n                    // TODO(NODE-2674): Preserve int64 sent from MongoDB\n                    this[kId] = typeof response.cursor.id === \"number\" ? bson_1.Long.fromNumber(response.cursor.id) : typeof response.cursor.id === \"bigint\" ? bson_1.Long.fromBigInt(response.cursor.id) : response.cursor.id;\n                    if (response.cursor.ns) {\n                        this[kNamespace] = (0, utils_1.ns)(response.cursor.ns);\n                    }\n                    this[kDocuments].pushMany(response.cursor.firstBatch);\n                }\n                // When server responses return without a cursor document, we close this cursor\n                // and return the raw server response. This is often the case for explain commands\n                // for example\n                if (this[kId] == null) {\n                    this[kId] = bson_1.Long.ZERO;\n                    // TODO(NODE-3286): ExecutionResult needs to accept a generic parameter\n                    this[kDocuments].push(state.response);\n                }\n            }\n            // the cursor is now initialized, even if an error occurred or it is dead\n            this[kInitialized] = true;\n            if (error) {\n                return cleanupCursor(this, {\n                    error\n                }, ()=>callback(error, undefined));\n            }\n            if (cursorIsDead(this)) {\n                return cleanupCursor(this, undefined, ()=>callback());\n            }\n            callback();\n        });\n    }\n}\n/** @event */ AbstractCursor.CLOSE = \"close\";\nexports.AbstractCursor = AbstractCursor;\n/**\n * @param cursor - the cursor on which to call `next`\n * @param blocking - a boolean indicating whether or not the cursor should `block` until data\n *     is available.  Generally, this flag is set to `false` because if the getMore returns no documents,\n *     the cursor has been exhausted.  In certain scenarios (ChangeStreams, tailable await cursors and\n *     `tryNext`, for example) blocking is necessary because a getMore returning no documents does\n *     not indicate the end of the cursor.\n * @param transform - if true, the cursor's transform function is applied to the result document (if the transform exists)\n * @returns the next document in the cursor, or `null`.  When `blocking` is `true`, a `null` document means\n * the cursor has been exhausted.  Otherwise, it means that there is no document available in the cursor's buffer.\n */ async function next(cursor, { blocking, transform }) {\n    const cursorId = cursor[kId];\n    if (cursor.closed) {\n        return null;\n    }\n    if (cursor[kDocuments].length !== 0) {\n        const doc = cursor[kDocuments].shift();\n        if (doc != null && transform && cursor[kTransform]) {\n            try {\n                return cursor[kTransform](doc);\n            } catch (error) {\n                await cleanupCursorAsync(cursor, {\n                    error,\n                    needsToEmitClosed: true\n                }).catch(()=>{\n                // `cleanupCursorAsync` should never throw, but if it does we want to throw the original\n                // error instead.\n                });\n                throw error;\n            }\n        }\n        return doc;\n    }\n    if (cursorId == null) {\n        // All cursors must operate within a session, one must be made implicitly if not explicitly provided\n        const init = (0, util_1.promisify)((cb)=>cursor[kInit](cb));\n        await init();\n        return next(cursor, {\n            blocking,\n            transform\n        });\n    }\n    if (cursorIsDead(cursor)) {\n        // if the cursor is dead, we clean it up\n        // cleanupCursorAsync should never throw, but if it does it indicates a bug in the driver\n        // and we should surface the error\n        await cleanupCursorAsync(cursor, {});\n        return null;\n    }\n    // otherwise need to call getMore\n    const batchSize = cursor[kOptions].batchSize || 1000;\n    const getMore = (0, util_1.promisify)((batchSize, cb)=>cursor._getMore(batchSize, cb));\n    let response;\n    try {\n        response = await getMore(batchSize);\n    } catch (error) {\n        if (error) {\n            await cleanupCursorAsync(cursor, {\n                error\n            }).catch(()=>{\n            // `cleanupCursorAsync` should never throw, but if it does we want to throw the original\n            // error instead.\n            });\n            throw error;\n        }\n    }\n    if (response) {\n        const cursorId = typeof response.cursor.id === \"number\" ? bson_1.Long.fromNumber(response.cursor.id) : typeof response.cursor.id === \"bigint\" ? bson_1.Long.fromBigInt(response.cursor.id) : response.cursor.id;\n        cursor[kDocuments].pushMany(response.cursor.nextBatch);\n        cursor[kId] = cursorId;\n    }\n    if (cursorIsDead(cursor)) {\n        // If we successfully received a response from a cursor BUT the cursor indicates that it is exhausted,\n        // we intentionally clean up the cursor to release its session back into the pool before the cursor\n        // is iterated.  This prevents a cursor that is exhausted on the server from holding\n        // onto a session indefinitely until the AbstractCursor is iterated.\n        //\n        // cleanupCursorAsync should never throw, but if it does it indicates a bug in the driver\n        // and we should surface the error\n        await cleanupCursorAsync(cursor, {});\n    }\n    if (cursor[kDocuments].length === 0 && blocking === false) {\n        return null;\n    }\n    return next(cursor, {\n        blocking,\n        transform\n    });\n}\nfunction cursorIsDead(cursor) {\n    const cursorId = cursor[kId];\n    return !!cursorId && cursorId.isZero();\n}\nconst cleanupCursorAsync = (0, util_1.promisify)(cleanupCursor);\nfunction cleanupCursor(cursor, options, callback) {\n    const cursorId = cursor[kId];\n    const cursorNs = cursor[kNamespace];\n    const server = cursor[kServer];\n    const session = cursor[kSession];\n    const error = options?.error;\n    // Cursors only emit closed events once the client-side cursor has been exhausted fully or there\n    // was an error.  Notably, when the server returns a cursor id of 0 and a non-empty batch, we\n    // cleanup the cursor but don't emit a `close` event.\n    const needsToEmitClosed = options?.needsToEmitClosed ?? cursor[kDocuments].length === 0;\n    if (error) {\n        if (cursor.loadBalanced && error instanceof error_1.MongoNetworkError) {\n            return completeCleanup();\n        }\n    }\n    if (cursorId == null || server == null || cursorId.isZero() || cursorNs == null) {\n        if (needsToEmitClosed) {\n            cursor[kClosed] = true;\n            cursor[kId] = bson_1.Long.ZERO;\n            cursor.emit(AbstractCursor.CLOSE);\n        }\n        if (session) {\n            if (session.owner === cursor) {\n                session.endSession({\n                    error\n                }).finally(()=>{\n                    callback();\n                });\n                return;\n            }\n            if (!session.inTransaction()) {\n                (0, sessions_1.maybeClearPinnedConnection)(session, {\n                    error\n                });\n            }\n        }\n        return callback();\n    }\n    function completeCleanup() {\n        if (session) {\n            if (session.owner === cursor) {\n                session.endSession({\n                    error\n                }).finally(()=>{\n                    cursor.emit(AbstractCursor.CLOSE);\n                    callback();\n                });\n                return;\n            }\n            if (!session.inTransaction()) {\n                (0, sessions_1.maybeClearPinnedConnection)(session, {\n                    error\n                });\n            }\n        }\n        cursor.emit(AbstractCursor.CLOSE);\n        return callback();\n    }\n    cursor[kKilled] = true;\n    if (session.hasEnded) {\n        return completeCleanup();\n    }\n    (0, execute_operation_1.executeOperation)(cursor[kClient], new kill_cursors_1.KillCursorsOperation(cursorId, cursorNs, server, {\n        session\n    })).catch(()=>null).finally(completeCleanup);\n}\n/** @internal */ function assertUninitialized(cursor) {\n    if (cursor[kInitialized]) {\n        throw new error_1.MongoCursorInUseError();\n    }\n}\nexports.assertUninitialized = assertUninitialized;\nclass ReadableCursorStream extends stream_1.Readable {\n    constructor(cursor){\n        super({\n            objectMode: true,\n            autoDestroy: false,\n            highWaterMark: 1\n        });\n        this._readInProgress = false;\n        this._cursor = cursor;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _read(size) {\n        if (!this._readInProgress) {\n            this._readInProgress = true;\n            this._readNext();\n        }\n    }\n    _destroy(error, callback) {\n        this._cursor.close().then(()=>callback(error), (closeError)=>callback(closeError));\n    }\n    _readNext() {\n        next(this._cursor, {\n            blocking: true,\n            transform: true\n        }).then((result)=>{\n            if (result == null) {\n                this.push(null);\n            } else if (this.destroyed) {\n                this._cursor.close().catch(()=>null);\n            } else {\n                if (this.push(result)) {\n                    return this._readNext();\n                }\n                this._readInProgress = false;\n            }\n        }, (err)=>{\n            // NOTE: This is questionable, but we have a test backing the behavior. It seems the\n            //       desired behavior is that a stream ends cleanly when a user explicitly closes\n            //       a client during iteration. Alternatively, we could do the \"right\" thing and\n            //       propagate the error message by removing this special case.\n            if (err.message.match(/server is closed/)) {\n                this._cursor.close().catch(()=>null);\n                return this.push(null);\n            }\n            // NOTE: This is also perhaps questionable. The rationale here is that these errors tend\n            //       to be \"operation was interrupted\", where a cursor has been closed but there is an\n            //       active getMore in-flight. This used to check if the cursor was killed but once\n            //       that changed to happen in cleanup legitimate errors would not destroy the\n            //       stream. There are change streams test specifically test these cases.\n            if (err.message.match(/operation was interrupted/)) {\n                return this.push(null);\n            }\n            // NOTE: The two above checks on the message of the error will cause a null to be pushed\n            //       to the stream, thus closing the stream before the destroy call happens. This means\n            //       that either of those error messages on a change stream will not get a proper\n            //       'error' event to be emitted (the error passed to destroy). Change stream resumability\n            //       relies on that error event to be emitted to create its new cursor and thus was not\n            //       working on 4.4 servers because the error emitted on failover was \"interrupted at\n            //       shutdown\" while on 5.0+ it is \"The server is in quiesce mode and will shut down\".\n            //       See NODE-4475.\n            return this.destroy(err);\n        });\n    }\n} //# sourceMappingURL=abstract_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2Fic3RyYWN0X2N1cnNvci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMkJBQTJCLEdBQUdBLHNCQUFzQixHQUFHQSxvQkFBb0IsR0FBRyxLQUFLO0FBQ25GLE1BQU1LLFdBQVdDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1DLFNBQVNELG1CQUFPQSxDQUFDLGtCQUFNO0FBQzdCLE1BQU1FLFNBQVNGLG1CQUFPQSxDQUFDLHlEQUFTO0FBQ2hDLE1BQU1HLFVBQVVILG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1JLGdCQUFnQkosbUJBQU9BLENBQUMsdUVBQWdCO0FBQzlDLE1BQU1LLHNCQUFzQkwsbUJBQU9BLENBQUMseUdBQWlDO0FBQ3JFLE1BQU1NLGFBQWFOLG1CQUFPQSxDQUFDLHVGQUF3QjtBQUNuRCxNQUFNTyxpQkFBaUJQLG1CQUFPQSxDQUFDLCtGQUE0QjtBQUMzRCxNQUFNUSxpQkFBaUJSLG1CQUFPQSxDQUFDLHlFQUFpQjtBQUNoRCxNQUFNUyxvQkFBb0JULG1CQUFPQSxDQUFDLCtFQUFvQjtBQUN0RCxNQUFNVSxhQUFhVixtQkFBT0EsQ0FBQyxpRUFBYTtBQUN4QyxNQUFNVyxVQUFVWCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxjQUFjLEdBQ2QsTUFBTVksTUFBTUMsT0FBTztBQUNuQixjQUFjLEdBQ2QsTUFBTUMsYUFBYUQsT0FBTztBQUMxQixjQUFjLEdBQ2QsTUFBTUUsVUFBVUYsT0FBTztBQUN2QixjQUFjLEdBQ2QsTUFBTUcsYUFBYUgsT0FBTztBQUMxQixjQUFjLEdBQ2QsTUFBTUksVUFBVUosT0FBTztBQUN2QixjQUFjLEdBQ2QsTUFBTUssV0FBV0wsT0FBTztBQUN4QixjQUFjLEdBQ2QsTUFBTU0sV0FBV04sT0FBTztBQUN4QixjQUFjLEdBQ2QsTUFBTU8sYUFBYVAsT0FBTztB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QUFBO1lBQ3pELElBQUlBLFVBQVUsTUFBTTtnQkFDaEIsSUFBSSxDQUFDakMsSUFBSSxDQUFDO1lBQ2QsT0FDSyxJQUFJLElBQUksQ0FBQzhGLFNBQVMsRUFBRTtnQkFDckIsSUFBSSxDQUFDUCxPQUFPLENBQUM3RSxLQUFLLEdBQUdKLEtBQUssQ0FBQyxJQUFNO1lBQ3JDLE9BQ0s7Z0JBQ0QsSUFBSSxJQUFJLENBQUNOLElBQUksQ0FBQ2lDLFNBQVM7b0JBQ25CLE9BQU8sSUFBSSxDQUFDeUQsU0FBUztnQkFDekI7Z0JBQ0EsSUFBSSxDQUFDSixlQUFlLEdBQUc7WUFDM0I7UUFDSixHQUFHL0QsQ0FBQUE7WUFDQyxvRkFBb0Y7WUFDcEYscUZBQXFGO1lBQ3JGLG9GQUFvRjtZQUNwRixtRUFBbUU7WUFDbkUsSUFBSUEsSUFBSXBCLE9BQU8sQ0FBQzRGLEtBQUssQ0FBQyxxQkFBcUI7Z0JBQ3ZDLElBQUksQ0FBQ1IsT0FBTyxDQUFDN0UsS0FBSyxHQUFHSixLQUFLLENBQUMsSUFBTTtnQkFDakMsT0FBTyxJQUFJLENBQUNOLElBQUksQ0FBQztZQUNyQjtZQUNBLHdGQUF3RjtZQUN4RiwwRkFBMEY7WUFDMUYsdUZBQXVGO1lBQ3ZGLGtGQUFrRjtZQUNsRiw2RUFBNkU7WUFDN0UsSUFBSXVCLElBQUlwQixPQUFPLENBQUM0RixLQUFLLENBQUMsOEJBQThCO2dCQUNoRCxPQUFPLElBQUksQ0FBQy9GLElBQUksQ0FBQztZQUNyQjtZQUNBLHdGQUF3RjtZQUN4RiwyRkFBMkY7WUFDM0YscUZBQXFGO1lBQ3JGLDhGQUE4RjtZQUM5RiwyRkFBMkY7WUFDM0YseUZBQXlGO1lBQ3pGLDBGQUEwRjtZQUMxRix1QkFBdUI7WUFDdkIsT0FBTyxJQUFJLENBQUNnRyxPQUFPLENBQUN6RTtRQUN4QjtJQUNKO0FBQ0osRUFDQSwyQ0FBMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2Fic3RyYWN0X2N1cnNvci5qcz9jNzc3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5hc3NlcnRVbmluaXRpYWxpemVkID0gZXhwb3J0cy5BYnN0cmFjdEN1cnNvciA9IGV4cG9ydHMuQ1VSU09SX0ZMQUdTID0gdm9pZCAwO1xuY29uc3Qgc3RyZWFtXzEgPSByZXF1aXJlKFwic3RyZWFtXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcInV0aWxcIik7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi4vYnNvblwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBtb25nb190eXBlc18xID0gcmVxdWlyZShcIi4uL21vbmdvX3R5cGVzXCIpO1xuY29uc3QgZXhlY3V0ZV9vcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuLi9vcGVyYXRpb25zL2V4ZWN1dGVfb3BlcmF0aW9uXCIpO1xuY29uc3QgZ2V0X21vcmVfMSA9IHJlcXVpcmUoXCIuLi9vcGVyYXRpb25zL2dldF9tb3JlXCIpO1xuY29uc3Qga2lsbF9jdXJzb3JzXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9raWxsX2N1cnNvcnNcIik7XG5jb25zdCByZWFkX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuLi9yZWFkX2NvbmNlcm5cIik7XG5jb25zdCByZWFkX3ByZWZlcmVuY2VfMSA9IHJlcXVpcmUoXCIuLi9yZWFkX3ByZWZlcmVuY2VcIik7XG5jb25zdCBzZXNzaW9uc18xID0gcmVxdWlyZShcIi4uL3Nlc3Npb25zXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtJZCA9IFN5bWJvbCgnaWQnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtEb2N1bWVudHMgPSBTeW1ib2woJ2RvY3VtZW50cycpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga1NlcnZlciA9IFN5bWJvbCgnc2VydmVyJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrTmFtZXNwYWNlID0gU3ltYm9sKCduYW1lc3BhY2UnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtDbGllbnQgPSBTeW1ib2woJ2NsaWVudCcpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga1Nlc3Npb24gPSBTeW1ib2woJ3Nlc3Npb24nKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtPcHRpb25zID0gU3ltYm9sKCdvcHRpb25zJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrVHJhbnNmb3JtID0gU3ltYm9sKCd0cmFuc2Zvcm0nKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtJbml0aWFsaXplZCA9IFN5bWJvbCgnaW5pdGlhbGl6ZWQnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtDbG9zZWQgPSBTeW1ib2woJ2Nsb3NlZCcpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0tpbGxlZCA9IFN5bWJvbCgna2lsbGVkJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrSW5pdCA9IFN5bWJvbCgna0luaXQnKTtcbi8qKiBAcHVibGljICovXG5leHBvcnRzLkNVUlNPUl9GTEFHUyA9IFtcbiAgICAndGFpbGFibGUnLFxuICAgICdvcGxvZ1JlcGxheScsXG4gICAgJ25vQ3Vyc29yVGltZW91dCcsXG4gICAgJ2F3YWl0RGF0YScsXG4gICAgJ2V4aGF1c3QnLFxuICAgICdwYXJ0aWFsJ1xuXTtcbi8qKiBAcHVibGljICovXG5jbGFzcyBBYnN0cmFjdEN1cnNvciBleHRlbmRzIG1vbmdvX3R5cGVzXzEuVHlwZWRFdmVudEVtaXR0ZXIge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3RvcihjbGllbnQsIG5hbWVzcGFjZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGlmICghY2xpZW50LnMuaXNNb25nb0NsaWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ0N1cnNvciBtdXN0IGJlIGNvbnN0cnVjdGVkIHdpdGggTW9uZ29DbGllbnQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tDbGllbnRdID0gY2xpZW50O1xuICAgICAgICB0aGlzW2tOYW1lc3BhY2VdID0gbmFtZXNwYWNlO1xuICAgICAgICB0aGlzW2tJZF0gPSBudWxsO1xuICAgICAgICB0aGlzW2tEb2N1bWVudHNdID0gbmV3IHV0aWxzXzEuTGlzdCgpO1xuICAgICAgICB0aGlzW2tJbml0aWFsaXplZF0gPSBmYWxzZTtcbiAgICAgICAgdGhpc1trQ2xvc2VkXSA9IGZhbHNlO1xuICAgICAgICB0aGlzW2tLaWxsZWRdID0gZmFsc2U7XG4gICAgICAgIHRoaXNba09wdGlvbnNdID0ge1xuICAgICAgICAgICAgcmVhZFByZWZlcmVuY2U6IG9wdGlvbnMucmVhZFByZWZlcmVuY2UgJiYgb3B0aW9ucy5yZWFkUHJlZmVyZW5jZSBpbnN0YW5jZW9mIHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLnJlYWRQcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgOiByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5wcmltYXJ5LFxuICAgICAgICAgICAgLi4uKDAsIGJzb25fMS5wbHVja0JTT05TZXJpYWxpemVPcHRpb25zKShvcHRpb25zKVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZWFkQ29uY2VybiA9IHJlYWRfY29uY2Vybl8xLlJlYWRDb25jZXJuLmZyb21PcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBpZiAocmVhZENvbmNlcm4pIHtcbiAgICAgICAgICAgIHRoaXNba09wdGlvbnNdLnJlYWRDb25jZXJuID0gcmVhZENvbmNlcm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmJhdGNoU2l6ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRoaXNba09wdGlvbnNdLmJhdGNoU2l6ZSA9IG9wdGlvbnMuYmF0Y2hTaXplO1xuICAgICAgICB9XG4gICAgICAgIC8vIHdlIGNoZWNrIGZvciB1bmRlZmluZWQgc3BlY2lmaWNhbGx5IGhlcmUgdG8gYWxsb3cgZmFsc3kgdmFsdWVzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICBpZiAob3B0aW9ucy5jb21tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXNba09wdGlvbnNdLmNvbW1lbnQgPSBvcHRpb25zLmNvbW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLm1heFRpbWVNUyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRoaXNba09wdGlvbnNdLm1heFRpbWVNUyA9IG9wdGlvbnMubWF4VGltZU1TO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5tYXhBd2FpdFRpbWVNUyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRoaXNba09wdGlvbnNdLm1heEF3YWl0VGltZU1TID0gb3B0aW9ucy5tYXhBd2FpdFRpbWVNUztcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5zZXNzaW9uIGluc3RhbmNlb2Ygc2Vzc2lvbnNfMS5DbGllbnRTZXNzaW9uKSB7XG4gICAgICAgICAgICB0aGlzW2tTZXNzaW9uXSA9IG9wdGlvbnMuc2Vzc2lvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXNba1Nlc3Npb25dID0gdGhpc1trQ2xpZW50XS5zdGFydFNlc3Npb24oeyBvd25lcjogdGhpcywgZXhwbGljaXQ6IGZhbHNlIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba0lkXSA/PyB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBnZXQgY2xpZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpc1trQ2xpZW50XTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGdldCBzZXJ2ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tTZXJ2ZXJdO1xuICAgIH1cbiAgICBnZXQgbmFtZXNwYWNlKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trTmFtZXNwYWNlXTtcbiAgICB9XG4gICAgZ2V0IHJlYWRQcmVmZXJlbmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trT3B0aW9uc10ucmVhZFByZWZlcmVuY2U7XG4gICAgfVxuICAgIGdldCByZWFkQ29uY2VybigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba09wdGlvbnNdLnJlYWRDb25jZXJuO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZ2V0IHNlc3Npb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tTZXNzaW9uXTtcbiAgICB9XG4gICAgc2V0IHNlc3Npb24oY2xpZW50U2Vzc2lvbikge1xuICAgICAgICB0aGlzW2tTZXNzaW9uXSA9IGNsaWVudFNlc3Npb247XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBnZXQgY3Vyc29yT3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba09wdGlvbnNdO1xuICAgIH1cbiAgICBnZXQgY2xvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trQ2xvc2VkXTtcbiAgICB9XG4gICAgZ2V0IGtpbGxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba0tpbGxlZF07XG4gICAgfVxuICAgIGdldCBsb2FkQmFsYW5jZWQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXNba0NsaWVudF0udG9wb2xvZ3k/LmxvYWRCYWxhbmNlZDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgY3VycmVudCBidWZmZXJlZCBkb2N1bWVudHMgbGVuZ3RoICovXG4gICAgYnVmZmVyZWRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba0RvY3VtZW50c10ubGVuZ3RoO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBjdXJyZW50IGJ1ZmZlcmVkIGRvY3VtZW50cyAqL1xuICAgIHJlYWRCdWZmZXJlZERvY3VtZW50cyhudW1iZXIpIHtcbiAgICAgICAgY29uc3QgYnVmZmVyZWREb2NzID0gW107XG4gICAgICAgIGNvbnN0IGRvY3VtZW50c1RvUmVhZCA9IE1hdGgubWluKG51bWJlciA/PyB0aGlzW2tEb2N1bWVudHNdLmxlbmd0aCwgdGhpc1trRG9jdW1lbnRzXS5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBjb3VudCA9IDA7IGNvdW50IDwgZG9jdW1lbnRzVG9SZWFkOyBjb3VudCsrKSB7XG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IHRoaXNba0RvY3VtZW50c10uc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYnVmZmVyZWREb2NzLnB1c2goZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWZmZXJlZERvY3M7XG4gICAgfVxuICAgIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IGF3YWl0IHRoaXMubmV4dCgpO1xuICAgICAgICAgICAgICAgIC8vIEludGVudGlvbmFsIHN0cmljdCBudWxsIGNoZWNrLCBiZWNhdXNlIHVzZXJzIGNhbiBtYXAgY3Vyc29ycyB0byBmYWxzZXkgdmFsdWVzLlxuICAgICAgICAgICAgICAgIC8vIFdlIGFsbG93IG1hcHBpbmcgdG8gYWxsIHZhbHVlcyBleGNlcHQgZm9yIG51bGwuXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnQ3Vyc29yIHJldHVybmVkIGEgYG51bGxgIGRvY3VtZW50LCBidXQgdGhlIGN1cnNvciBpcyBub3QgZXhoYXVzdGVkLiAgTWFwcGluZyBkb2N1bWVudHMgdG8gYG51bGxgIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhlIGN1cnNvciB0cmFuc2Zvcm0uJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFudXBDdXJzb3JBc3luYyh0aGlzLCB7IG5lZWRzVG9FbWl0Q2xvc2VkOiB0cnVlIH0pLmNhdGNoKCgpID0+IG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeWllbGQgZG9jdW1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXNba0lkXSA9PT0gYnNvbl8xLkxvbmcuWkVSTykge1xuICAgICAgICAgICAgICAgICAgICAvLyBDdXJzb3IgZXhoYXVzdGVkXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIC8vIE9ubHkgY2xvc2UgdGhlIGN1cnNvciBpZiBpdCBoYXMgbm90IGFscmVhZHkgYmVlbiBjbG9zZWQuIFRoaXMgZmluYWxseSBjbGF1c2UgaGFuZGxlc1xuICAgICAgICAgICAgLy8gdGhlIGNhc2Ugd2hlbiBhIHVzZXIgd291bGQgYnJlYWsgb3V0IG9mIGEgZm9yIGF3YWl0IG9mIGxvb3AgZWFybHkuXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jbG9zZSgpLmNhdGNoKCgpID0+IG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHN0cmVhbShvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zPy50cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IG9wdGlvbnMudHJhbnNmb3JtO1xuICAgICAgICAgICAgY29uc3QgcmVhZGFibGUgPSBuZXcgUmVhZGFibGVDdXJzb3JTdHJlYW0odGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gcmVhZGFibGUucGlwZShuZXcgc3RyZWFtXzEuVHJhbnNmb3JtKHtcbiAgICAgICAgICAgICAgICBvYmplY3RNb2RlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGhpZ2hXYXRlck1hcms6IDEsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtKGNodW5rLCBfLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSB0cmFuc2Zvcm0oY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCB0cmFuc2Zvcm1lZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFJlYWRhYmxlQ3Vyc29yU3RyZWFtKHRoaXMpO1xuICAgIH1cbiAgICBhc3luYyBoYXNOZXh0KCkge1xuICAgICAgICBpZiAodGhpc1trSWRdID09PSBic29uXzEuTG9uZy5aRVJPKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXNba0RvY3VtZW50c10ubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkb2MgPSBhd2FpdCBuZXh0KHRoaXMsIHsgYmxvY2tpbmc6IHRydWUsIHRyYW5zZm9ybTogZmFsc2UgfSk7XG4gICAgICAgIGlmIChkb2MpIHtcbiAgICAgICAgICAgIHRoaXNba0RvY3VtZW50c10udW5zaGlmdChkb2MpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKiogR2V0IHRoZSBuZXh0IGF2YWlsYWJsZSBkb2N1bWVudCBmcm9tIHRoZSBjdXJzb3IsIHJldHVybnMgbnVsbCBpZiBubyBtb3JlIGRvY3VtZW50cyBhcmUgYXZhaWxhYmxlLiAqL1xuICAgIGFzeW5jIG5leHQoKSB7XG4gICAgICAgIGlmICh0aGlzW2tJZF0gPT09IGJzb25fMS5Mb25nLlpFUk8pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQ3Vyc29yRXhoYXVzdGVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dCh0aGlzLCB7IGJsb2NraW5nOiB0cnVlLCB0cmFuc2Zvcm06IHRydWUgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyeSB0byBnZXQgdGhlIG5leHQgYXZhaWxhYmxlIGRvY3VtZW50IGZyb20gdGhlIGN1cnNvciBvciBgbnVsbGAgaWYgYW4gZW1wdHkgYmF0Y2ggaXMgcmV0dXJuZWRcbiAgICAgKi9cbiAgICBhc3luYyB0cnlOZXh0KCkge1xuICAgICAgICBpZiAodGhpc1trSWRdID09PSBic29uXzEuTG9uZy5aRVJPKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0N1cnNvckV4aGF1c3RlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5leHQodGhpcywgeyBibG9ja2luZzogZmFsc2UsIHRyYW5zZm9ybTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhbGwgdGhlIGRvY3VtZW50cyBmb3IgdGhpcyBjdXJzb3IgdXNpbmcgdGhlIGl0ZXJhdG9yLCBjYWxsYmFjayBwYXR0ZXJuLlxuICAgICAqXG4gICAgICogSWYgdGhlIGl0ZXJhdG9yIHJldHVybnMgYGZhbHNlYCwgaXRlcmF0aW9uIHdpbGwgc3RvcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpdGVyYXRvciAtIFRoZSBpdGVyYXRpb24gY2FsbGJhY2suXG4gICAgICogQGRlcHJlY2F0ZWQgLSBXaWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgcmVsZWFzZS4gVXNlIGZvciBhd2FpdC4uLm9mIGluc3RlYWQuXG4gICAgICovXG4gICAgYXN5bmMgZm9yRWFjaChpdGVyYXRvcikge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZXJhdG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdBcmd1bWVudCBcIml0ZXJhdG9yXCIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBkb2N1bWVudCBvZiB0aGlzKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBpdGVyYXRvcihkb2N1bWVudCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlKCkge1xuICAgICAgICBjb25zdCBuZWVkc1RvRW1pdENsb3NlZCA9ICF0aGlzW2tDbG9zZWRdO1xuICAgICAgICB0aGlzW2tDbG9zZWRdID0gdHJ1ZTtcbiAgICAgICAgYXdhaXQgY2xlYW51cEN1cnNvckFzeW5jKHRoaXMsIHsgbmVlZHNUb0VtaXRDbG9zZWQgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgZG9jdW1lbnRzLiBUaGUgY2FsbGVyIGlzIHJlc3BvbnNpYmxlIGZvciBtYWtpbmcgc3VyZSB0aGF0IHRoZXJlXG4gICAgICogaXMgZW5vdWdoIG1lbW9yeSB0byBzdG9yZSB0aGUgcmVzdWx0cy4gTm90ZSB0aGF0IHRoZSBhcnJheSBvbmx5IGNvbnRhaW5zIHBhcnRpYWxcbiAgICAgKiByZXN1bHRzIHdoZW4gdGhpcyBjdXJzb3IgaGFkIGJlZW4gcHJldmlvdXNseSBhY2Nlc3NlZC4gSW4gdGhhdCBjYXNlLFxuICAgICAqIGN1cnNvci5yZXdpbmQoKSBjYW4gYmUgdXNlZCB0byByZXNldCB0aGUgY3Vyc29yLlxuICAgICAqL1xuICAgIGFzeW5jIHRvQXJyYXkoKSB7XG4gICAgICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgZG9jdW1lbnQgb2YgdGhpcykge1xuICAgICAgICAgICAgYXJyYXkucHVzaChkb2N1bWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgYSBjdXJzb3IgZmxhZyB0byB0aGUgY3Vyc29yXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmxhZyAtIFRoZSBmbGFnIHRvIHNldCwgbXVzdCBiZSBvbmUgb2YgZm9sbG93aW5nIFsndGFpbGFibGUnLCAnb3Bsb2dSZXBsYXknLCAnbm9DdXJzb3JUaW1lb3V0JywgJ2F3YWl0RGF0YScsICdwYXJ0aWFsJyAtLlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBmbGFnIGJvb2xlYW4gdmFsdWUuXG4gICAgICovXG4gICAgYWRkQ3Vyc29yRmxhZyhmbGFnLCB2YWx1ZSkge1xuICAgICAgICBhc3NlcnRVbmluaXRpYWxpemVkKHRoaXMpO1xuICAgICAgICBpZiAoIWV4cG9ydHMuQ1VSU09SX0ZMQUdTLmluY2x1ZGVzKGZsYWcpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBGbGFnICR7ZmxhZ30gaXMgbm90IG9uZSBvZiAke2V4cG9ydHMuQ1VSU09SX0ZMQUdTfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgRmxhZyAke2ZsYWd9IG11c3QgYmUgYSBib29sZWFuIHZhbHVlYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trT3B0aW9uc11bZmxhZ10gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcCBhbGwgZG9jdW1lbnRzIHVzaW5nIHRoZSBwcm92aWRlZCBmdW5jdGlvblxuICAgICAqIElmIHRoZXJlIGlzIGEgdHJhbnNmb3JtIHNldCBvbiB0aGUgY3Vyc29yLCB0aGF0IHdpbGwgYmUgY2FsbGVkIGZpcnN0IGFuZCB0aGUgcmVzdWx0IHBhc3NlZCB0b1xuICAgICAqIHRoaXMgZnVuY3Rpb24ncyB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqXG4gICAgICogKipOb3RlKiogQ3Vyc29ycyB1c2UgYG51bGxgIGludGVybmFsbHkgdG8gaW5kaWNhdGUgdGhhdCB0aGVyZSBhcmUgbm8gbW9yZSBkb2N1bWVudHMgaW4gdGhlIGN1cnNvci4gUHJvdmlkaW5nIGEgbWFwcGluZ1xuICAgICAqIGZ1bmN0aW9uIHRoYXQgbWFwcyB2YWx1ZXMgdG8gYG51bGxgIHdpbGwgcmVzdWx0IGluIHRoZSBjdXJzb3IgY2xvc2luZyBpdHNlbGYgYmVmb3JlIGl0IGhhcyBmaW5pc2hlZCBpdGVyYXRpbmdcbiAgICAgKiBhbGwgZG9jdW1lbnRzLiAgVGhpcyB3aWxsICoqbm90KiogcmVzdWx0IGluIGEgbWVtb3J5IGxlYWssIGp1c3Qgc3VycHJpc2luZyBiZWhhdmlvci4gIEZvciBleGFtcGxlOlxuICAgICAqXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIGNvbnN0IGN1cnNvciA9IGNvbGxlY3Rpb24uZmluZCh7fSk7XG4gICAgICogY3Vyc29yLm1hcCgoKSA9PiBudWxsKTtcbiAgICAgKlxuICAgICAqIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IGN1cnNvci50b0FycmF5KCk7XG4gICAgICogLy8gZG9jdW1lbnRzIGlzIGFsd2F5cyBbXSwgcmVnYXJkbGVzcyBvZiBob3cgbWFueSBkb2N1bWVudHMgYXJlIGluIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogT3RoZXIgZmFsc2V5IHZhbHVlcyBhcmUgYWxsb3dlZDpcbiAgICAgKlxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiBjb25zdCBjdXJzb3IgPSBjb2xsZWN0aW9uLmZpbmQoe30pO1xuICAgICAqIGN1cnNvci5tYXAoKCkgPT4gJycpO1xuICAgICAqXG4gICAgICogY29uc3QgZG9jdW1lbnRzID0gYXdhaXQgY3Vyc29yLnRvQXJyYXkoKTtcbiAgICAgKiAvLyBkb2N1bWVudHMgaXMgbm93IGFuIGFycmF5IG9mIGVtcHR5IHN0cmluZ3NcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICoqTm90ZSBmb3IgVHlwZXNjcmlwdCBVc2VyczoqKiBhZGRpbmcgYSB0cmFuc2Zvcm0gY2hhbmdlcyB0aGUgcmV0dXJuIHR5cGUgb2YgdGhlIGl0ZXJhdGlvbiBvZiB0aGlzIGN1cnNvcixcbiAgICAgKiBpdCAqKmRvZXMgbm90KiogcmV0dXJuIGEgbmV3IGluc3RhbmNlIG9mIGEgY3Vyc29yLiBUaGlzIG1lYW5zIHdoZW4gY2FsbGluZyBtYXAsXG4gICAgICogeW91IHNob3VsZCBhbHdheXMgYXNzaWduIHRoZSByZXN1bHQgdG8gYSBuZXcgdmFyaWFibGUgaW4gb3JkZXIgdG8gZ2V0IGEgY29ycmVjdGx5IHR5cGVkIGN1cnNvciB2YXJpYWJsZS5cbiAgICAgKiBUYWtlIG5vdGUgb2YgdGhlIGZvbGxvd2luZyBleGFtcGxlOlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogY29uc3QgY3Vyc29yOiBGaW5kQ3Vyc29yPERvY3VtZW50PiA9IGNvbGwuZmluZCgpO1xuICAgICAqIGNvbnN0IG1hcHBlZEN1cnNvcjogRmluZEN1cnNvcjxudW1iZXI+ID0gY3Vyc29yLm1hcChkb2MgPT4gT2JqZWN0LmtleXMoZG9jKS5sZW5ndGgpO1xuICAgICAqIGNvbnN0IGtleUNvdW50czogbnVtYmVyW10gPSBhd2FpdCBtYXBwZWRDdXJzb3IudG9BcnJheSgpOyAvLyBjdXJzb3IudG9BcnJheSgpIHN0aWxsIHJldHVybnMgRG9jdW1lbnRbXVxuICAgICAqIGBgYFxuICAgICAqIEBwYXJhbSB0cmFuc2Zvcm0gLSBUaGUgbWFwcGluZyB0cmFuc2Zvcm1hdGlvbiBtZXRob2QuXG4gICAgICovXG4gICAgbWFwKHRyYW5zZm9ybSkge1xuICAgICAgICBhc3NlcnRVbmluaXRpYWxpemVkKHRoaXMpO1xuICAgICAgICBjb25zdCBvbGRUcmFuc2Zvcm0gPSB0aGlzW2tUcmFuc2Zvcm1dOyAvLyBUT0RPKE5PREUtMzI4Myk6IEltcHJvdmUgdHJhbnNmb3JtIHR5cGluZ1xuICAgICAgICBpZiAob2xkVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICB0aGlzW2tUcmFuc2Zvcm1dID0gZG9jID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtKG9sZFRyYW5zZm9ybShkb2MpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzW2tUcmFuc2Zvcm1dID0gdHJhbnNmb3JtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIFJlYWRQcmVmZXJlbmNlIGZvciB0aGUgY3Vyc29yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlYWRQcmVmZXJlbmNlIC0gVGhlIG5ldyByZWFkIHByZWZlcmVuY2UgZm9yIHRoZSBjdXJzb3IuXG4gICAgICovXG4gICAgd2l0aFJlYWRQcmVmZXJlbmNlKHJlYWRQcmVmZXJlbmNlKSB7XG4gICAgICAgIGFzc2VydFVuaW5pdGlhbGl6ZWQodGhpcyk7XG4gICAgICAgIGlmIChyZWFkUHJlZmVyZW5jZSBpbnN0YW5jZW9mIHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlKSB7XG4gICAgICAgICAgICB0aGlzW2tPcHRpb25zXS5yZWFkUHJlZmVyZW5jZSA9IHJlYWRQcmVmZXJlbmNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiByZWFkUHJlZmVyZW5jZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRoaXNba09wdGlvbnNdLnJlYWRQcmVmZXJlbmNlID0gcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UuZnJvbVN0cmluZyhyZWFkUHJlZmVyZW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBJbnZhbGlkIHJlYWQgcHJlZmVyZW5jZTogJHtyZWFkUHJlZmVyZW5jZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBSZWFkUHJlZmVyZW5jZSBmb3IgdGhlIGN1cnNvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByZWFkUHJlZmVyZW5jZSAtIFRoZSBuZXcgcmVhZCBwcmVmZXJlbmNlIGZvciB0aGUgY3Vyc29yLlxuICAgICAqL1xuICAgIHdpdGhSZWFkQ29uY2VybihyZWFkQ29uY2Vybikge1xuICAgICAgICBhc3NlcnRVbmluaXRpYWxpemVkKHRoaXMpO1xuICAgICAgICBjb25zdCByZXNvbHZlZFJlYWRDb25jZXJuID0gcmVhZF9jb25jZXJuXzEuUmVhZENvbmNlcm4uZnJvbU9wdGlvbnMoeyByZWFkQ29uY2VybiB9KTtcbiAgICAgICAgaWYgKHJlc29sdmVkUmVhZENvbmNlcm4pIHtcbiAgICAgICAgICAgIHRoaXNba09wdGlvbnNdLnJlYWRDb25jZXJuID0gcmVzb2x2ZWRSZWFkQ29uY2VybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGEgbWF4VGltZU1TIG9uIHRoZSBjdXJzb3IgcXVlcnksIGFsbG93aW5nIGZvciBoYXJkIHRpbWVvdXQgbGltaXRzIG9uIHF1ZXJpZXMgKE9ubHkgc3VwcG9ydGVkIG9uIE1vbmdvREIgMi42IG9yIGhpZ2hlcilcbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIE51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdCBiZWZvcmUgYWJvcnRpbmcgdGhlIHF1ZXJ5LlxuICAgICAqL1xuICAgIG1heFRpbWVNUyh2YWx1ZSkge1xuICAgICAgICBhc3NlcnRVbmluaXRpYWxpemVkKHRoaXMpO1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignQXJndW1lbnQgZm9yIG1heFRpbWVNUyBtdXN0IGJlIGEgbnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trT3B0aW9uc10ubWF4VGltZU1TID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGJhdGNoIHNpemUgZm9yIHRoZSBjdXJzb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0byByZXR1cm4gcGVyIGJhdGNoLiBTZWUge0BsaW5rIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9jb21tYW5kL2ZpbmQvfGZpbmQgY29tbWFuZCBkb2N1bWVudGF0aW9ufS5cbiAgICAgKi9cbiAgICBiYXRjaFNpemUodmFsdWUpIHtcbiAgICAgICAgYXNzZXJ0VW5pbml0aWFsaXplZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXNba09wdGlvbnNdLnRhaWxhYmxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3IoJ1RhaWxhYmxlIGN1cnNvciBkb2VzIG5vdCBzdXBwb3J0IGJhdGNoU2l6ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdPcGVyYXRpb24gXCJiYXRjaFNpemVcIiByZXF1aXJlcyBhbiBpbnRlZ2VyJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trT3B0aW9uc10uYmF0Y2hTaXplID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXdpbmQgdGhpcyBjdXJzb3IgdG8gaXRzIHVuaW5pdGlhbGl6ZWQgc3RhdGUuIEFueSBvcHRpb25zIHRoYXQgYXJlIHByZXNlbnQgb24gdGhlIGN1cnNvciB3aWxsXG4gICAgICogcmVtYWluIGluIGVmZmVjdC4gSXRlcmF0aW5nIHRoaXMgY3Vyc29yIHdpbGwgY2F1c2UgbmV3IHF1ZXJpZXMgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyLCBldmVuXG4gICAgICogaWYgdGhlIHJlc3VsdGFudCBkYXRhIGhhcyBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIGJ5IHRoaXMgY3Vyc29yLlxuICAgICAqL1xuICAgIHJld2luZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzW2tJbml0aWFsaXplZF0pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tJZF0gPSBudWxsO1xuICAgICAgICB0aGlzW2tEb2N1bWVudHNdLmNsZWFyKCk7XG4gICAgICAgIHRoaXNba0Nsb3NlZF0gPSBmYWxzZTtcbiAgICAgICAgdGhpc1trS2lsbGVkXSA9IGZhbHNlO1xuICAgICAgICB0aGlzW2tJbml0aWFsaXplZF0gPSBmYWxzZTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHRoaXNba1Nlc3Npb25dO1xuICAgICAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIGVuZCB0aGlzIHNlc3Npb24gaWYgd2UgY3JlYXRlZCBpdCwgYW5kIGl0IGhhc24ndCBlbmRlZCB5ZXRcbiAgICAgICAgICAgIGlmIChzZXNzaW9uLmV4cGxpY2l0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGlmICghc2Vzc2lvbi5oYXNFbmRlZCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLmVuZFNlc3Npb24oKS5jYXRjaCgoKSA9PiBudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpc1trU2Vzc2lvbl0gPSB0aGlzLmNsaWVudC5zdGFydFNlc3Npb24oeyBvd25lcjogdGhpcywgZXhwbGljaXQ6IGZhbHNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfZ2V0TW9yZShiYXRjaFNpemUsIGNhbGxiYWNrKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgIGNvbnN0IGdldE1vcmVPcGVyYXRpb24gPSBuZXcgZ2V0X21vcmVfMS5HZXRNb3JlT3BlcmF0aW9uKHRoaXNba05hbWVzcGFjZV0sIHRoaXNba0lkXSwgdGhpc1trU2VydmVyXSwge1xuICAgICAgICAgICAgLi4udGhpc1trT3B0aW9uc10sXG4gICAgICAgICAgICBzZXNzaW9uOiB0aGlzW2tTZXNzaW9uXSxcbiAgICAgICAgICAgIGJhdGNoU2l6ZVxuICAgICAgICB9KTtcbiAgICAgICAgKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpc1trQ2xpZW50XSwgZ2V0TW9yZU9wZXJhdGlvbiwgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgZXhwb3NlZCBmb3IgdGhlIHVuaWZpZWQgdGVzdCBydW5uZXIncyBjcmVhdGVDaGFuZ2VTdHJlYW1cbiAgICAgKiBvcGVyYXRpb24uICBXZSBjYW5ub3QgcmVmYWN0b3IgdG8gdXNlIHRoZSBhYnN0cmFjdCBfaW5pdGlhbGl6ZSBtZXRob2Qgd2l0aG91dFxuICAgICAqIGEgc2lnbmlmaWNhbnQgcmVmYWN0b3IuXG4gICAgICovXG4gICAgW2tJbml0XShjYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9pbml0aWFsaXplKHRoaXNba1Nlc3Npb25dLCAoZXJyb3IsIHN0YXRlKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHN0YXRlLnJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIHRoaXNba1NlcnZlcl0gPSBzdGF0ZS5zZXJ2ZXI7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmN1cnNvcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKE5PREUtMjY3NCk6IFByZXNlcnZlIGludDY0IHNlbnQgZnJvbSBNb25nb0RCXG4gICAgICAgICAgICAgICAgICAgIHRoaXNba0lkXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgcmVzcG9uc2UuY3Vyc29yLmlkID09PSAnbnVtYmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYnNvbl8xLkxvbmcuZnJvbU51bWJlcihyZXNwb25zZS5jdXJzb3IuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0eXBlb2YgcmVzcG9uc2UuY3Vyc29yLmlkID09PSAnYmlnaW50J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGJzb25fMS5Mb25nLmZyb21CaWdJbnQocmVzcG9uc2UuY3Vyc29yLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHJlc3BvbnNlLmN1cnNvci5pZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmN1cnNvci5ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trTmFtZXNwYWNlXSA9ICgwLCB1dGlsc18xLm5zKShyZXNwb25zZS5jdXJzb3IubnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXNba0RvY3VtZW50c10ucHVzaE1hbnkocmVzcG9uc2UuY3Vyc29yLmZpcnN0QmF0Y2gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXaGVuIHNlcnZlciByZXNwb25zZXMgcmV0dXJuIHdpdGhvdXQgYSBjdXJzb3IgZG9jdW1lbnQsIHdlIGNsb3NlIHRoaXMgY3Vyc29yXG4gICAgICAgICAgICAgICAgLy8gYW5kIHJldHVybiB0aGUgcmF3IHNlcnZlciByZXNwb25zZS4gVGhpcyBpcyBvZnRlbiB0aGUgY2FzZSBmb3IgZXhwbGFpbiBjb21tYW5kc1xuICAgICAgICAgICAgICAgIC8vIGZvciBleGFtcGxlXG4gICAgICAgICAgICAgICAgaWYgKHRoaXNba0lkXSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNba0lkXSA9IGJzb25fMS5Mb25nLlpFUk87XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zMjg2KTogRXhlY3V0aW9uUmVzdWx0IG5lZWRzIHRvIGFjY2VwdCBhIGdlbmVyaWMgcGFyYW1ldGVyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNba0RvY3VtZW50c10ucHVzaChzdGF0ZS5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdGhlIGN1cnNvciBpcyBub3cgaW5pdGlhbGl6ZWQsIGV2ZW4gaWYgYW4gZXJyb3Igb2NjdXJyZWQgb3IgaXQgaXMgZGVhZFxuICAgICAgICAgICAgdGhpc1trSW5pdGlhbGl6ZWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGVhbnVwQ3Vyc29yKHRoaXMsIHsgZXJyb3IgfSwgKCkgPT4gY2FsbGJhY2soZXJyb3IsIHVuZGVmaW5lZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN1cnNvcklzRGVhZCh0aGlzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGVhbnVwQ3Vyc29yKHRoaXMsIHVuZGVmaW5lZCwgKCkgPT4gY2FsbGJhY2soKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vKiogQGV2ZW50ICovXG5BYnN0cmFjdEN1cnNvci5DTE9TRSA9ICdjbG9zZSc7XG5leHBvcnRzLkFic3RyYWN0Q3Vyc29yID0gQWJzdHJhY3RDdXJzb3I7XG4vKipcbiAqIEBwYXJhbSBjdXJzb3IgLSB0aGUgY3Vyc29yIG9uIHdoaWNoIHRvIGNhbGwgYG5leHRgXG4gKiBAcGFyYW0gYmxvY2tpbmcgLSBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGUgY3Vyc29yIHNob3VsZCBgYmxvY2tgIHVudGlsIGRhdGFcbiAqICAgICBpcyBhdmFpbGFibGUuICBHZW5lcmFsbHksIHRoaXMgZmxhZyBpcyBzZXQgdG8gYGZhbHNlYCBiZWNhdXNlIGlmIHRoZSBnZXRNb3JlIHJldHVybnMgbm8gZG9jdW1lbnRzLFxuICogICAgIHRoZSBjdXJzb3IgaGFzIGJlZW4gZXhoYXVzdGVkLiAgSW4gY2VydGFpbiBzY2VuYXJpb3MgKENoYW5nZVN0cmVhbXMsIHRhaWxhYmxlIGF3YWl0IGN1cnNvcnMgYW5kXG4gKiAgICAgYHRyeU5leHRgLCBmb3IgZXhhbXBsZSkgYmxvY2tpbmcgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYSBnZXRNb3JlIHJldHVybmluZyBubyBkb2N1bWVudHMgZG9lc1xuICogICAgIG5vdCBpbmRpY2F0ZSB0aGUgZW5kIG9mIHRoZSBjdXJzb3IuXG4gKiBAcGFyYW0gdHJhbnNmb3JtIC0gaWYgdHJ1ZSwgdGhlIGN1cnNvcidzIHRyYW5zZm9ybSBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIHRoZSByZXN1bHQgZG9jdW1lbnQgKGlmIHRoZSB0cmFuc2Zvcm0gZXhpc3RzKVxuICogQHJldHVybnMgdGhlIG5leHQgZG9jdW1lbnQgaW4gdGhlIGN1cnNvciwgb3IgYG51bGxgLiAgV2hlbiBgYmxvY2tpbmdgIGlzIGB0cnVlYCwgYSBgbnVsbGAgZG9jdW1lbnQgbWVhbnNcbiAqIHRoZSBjdXJzb3IgaGFzIGJlZW4gZXhoYXVzdGVkLiAgT3RoZXJ3aXNlLCBpdCBtZWFucyB0aGF0IHRoZXJlIGlzIG5vIGRvY3VtZW50IGF2YWlsYWJsZSBpbiB0aGUgY3Vyc29yJ3MgYnVmZmVyLlxuICovXG5hc3luYyBmdW5jdGlvbiBuZXh0KGN1cnNvciwgeyBibG9ja2luZywgdHJhbnNmb3JtIH0pIHtcbiAgICBjb25zdCBjdXJzb3JJZCA9IGN1cnNvcltrSWRdO1xuICAgIGlmIChjdXJzb3IuY2xvc2VkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoY3Vyc29yW2tEb2N1bWVudHNdLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICBjb25zdCBkb2MgPSBjdXJzb3Jba0RvY3VtZW50c10uc2hpZnQoKTtcbiAgICAgICAgaWYgKGRvYyAhPSBudWxsICYmIHRyYW5zZm9ybSAmJiBjdXJzb3Jba1RyYW5zZm9ybV0pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnNvcltrVHJhbnNmb3JtXShkb2MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2xlYW51cEN1cnNvckFzeW5jKGN1cnNvciwgeyBlcnJvciwgbmVlZHNUb0VtaXRDbG9zZWQ6IHRydWUgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBgY2xlYW51cEN1cnNvckFzeW5jYCBzaG91bGQgbmV2ZXIgdGhyb3csIGJ1dCBpZiBpdCBkb2VzIHdlIHdhbnQgdG8gdGhyb3cgdGhlIG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRvYztcbiAgICB9XG4gICAgaWYgKGN1cnNvcklkID09IG51bGwpIHtcbiAgICAgICAgLy8gQWxsIGN1cnNvcnMgbXVzdCBvcGVyYXRlIHdpdGhpbiBhIHNlc3Npb24sIG9uZSBtdXN0IGJlIG1hZGUgaW1wbGljaXRseSBpZiBub3QgZXhwbGljaXRseSBwcm92aWRlZFxuICAgICAgICBjb25zdCBpbml0ID0gKDAsIHV0aWxfMS5wcm9taXNpZnkpKGNiID0+IGN1cnNvcltrSW5pdF0oY2IpKTtcbiAgICAgICAgYXdhaXQgaW5pdCgpO1xuICAgICAgICByZXR1cm4gbmV4dChjdXJzb3IsIHsgYmxvY2tpbmcsIHRyYW5zZm9ybSB9KTtcbiAgICB9XG4gICAgaWYgKGN1cnNvcklzRGVhZChjdXJzb3IpKSB7XG4gICAgICAgIC8vIGlmIHRoZSBjdXJzb3IgaXMgZGVhZCwgd2UgY2xlYW4gaXQgdXBcbiAgICAgICAgLy8gY2xlYW51cEN1cnNvckFzeW5jIHNob3VsZCBuZXZlciB0aHJvdywgYnV0IGlmIGl0IGRvZXMgaXQgaW5kaWNhdGVzIGEgYnVnIGluIHRoZSBkcml2ZXJcbiAgICAgICAgLy8gYW5kIHdlIHNob3VsZCBzdXJmYWNlIHRoZSBlcnJvclxuICAgICAgICBhd2FpdCBjbGVhbnVwQ3Vyc29yQXN5bmMoY3Vyc29yLCB7fSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBvdGhlcndpc2UgbmVlZCB0byBjYWxsIGdldE1vcmVcbiAgICBjb25zdCBiYXRjaFNpemUgPSBjdXJzb3Jba09wdGlvbnNdLmJhdGNoU2l6ZSB8fCAxMDAwO1xuICAgIGNvbnN0IGdldE1vcmUgPSAoMCwgdXRpbF8xLnByb21pc2lmeSkoKGJhdGNoU2l6ZSwgY2IpID0+IGN1cnNvci5fZ2V0TW9yZShiYXRjaFNpemUsIGNiKSk7XG4gICAgbGV0IHJlc3BvbnNlO1xuICAgIHRyeSB7XG4gICAgICAgIHJlc3BvbnNlID0gYXdhaXQgZ2V0TW9yZShiYXRjaFNpemUpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBhd2FpdCBjbGVhbnVwQ3Vyc29yQXN5bmMoY3Vyc29yLCB7IGVycm9yIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBgY2xlYW51cEN1cnNvckFzeW5jYCBzaG91bGQgbmV2ZXIgdGhyb3csIGJ1dCBpZiBpdCBkb2VzIHdlIHdhbnQgdG8gdGhyb3cgdGhlIG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgLy8gZXJyb3IgaW5zdGVhZC5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnN0IGN1cnNvcklkID0gdHlwZW9mIHJlc3BvbnNlLmN1cnNvci5pZCA9PT0gJ251bWJlcidcbiAgICAgICAgICAgID8gYnNvbl8xLkxvbmcuZnJvbU51bWJlcihyZXNwb25zZS5jdXJzb3IuaWQpXG4gICAgICAgICAgICA6IHR5cGVvZiByZXNwb25zZS5jdXJzb3IuaWQgPT09ICdiaWdpbnQnXG4gICAgICAgICAgICAgICAgPyBic29uXzEuTG9uZy5mcm9tQmlnSW50KHJlc3BvbnNlLmN1cnNvci5pZClcbiAgICAgICAgICAgICAgICA6IHJlc3BvbnNlLmN1cnNvci5pZDtcbiAgICAgICAgY3Vyc29yW2tEb2N1bWVudHNdLnB1c2hNYW55KHJlc3BvbnNlLmN1cnNvci5uZXh0QmF0Y2gpO1xuICAgICAgICBjdXJzb3Jba0lkXSA9IGN1cnNvcklkO1xuICAgIH1cbiAgICBpZiAoY3Vyc29ySXNEZWFkKGN1cnNvcikpIHtcbiAgICAgICAgLy8gSWYgd2Ugc3VjY2Vzc2Z1bGx5IHJlY2VpdmVkIGEgcmVzcG9uc2UgZnJvbSBhIGN1cnNvciBCVVQgdGhlIGN1cnNvciBpbmRpY2F0ZXMgdGhhdCBpdCBpcyBleGhhdXN0ZWQsXG4gICAgICAgIC8vIHdlIGludGVudGlvbmFsbHkgY2xlYW4gdXAgdGhlIGN1cnNvciB0byByZWxlYXNlIGl0cyBzZXNzaW9uIGJhY2sgaW50byB0aGUgcG9vbCBiZWZvcmUgdGhlIGN1cnNvclxuICAgICAgICAvLyBpcyBpdGVyYXRlZC4gIFRoaXMgcHJldmVudHMgYSBjdXJzb3IgdGhhdCBpcyBleGhhdXN0ZWQgb24gdGhlIHNlcnZlciBmcm9tIGhvbGRpbmdcbiAgICAgICAgLy8gb250byBhIHNlc3Npb24gaW5kZWZpbml0ZWx5IHVudGlsIHRoZSBBYnN0cmFjdEN1cnNvciBpcyBpdGVyYXRlZC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gY2xlYW51cEN1cnNvckFzeW5jIHNob3VsZCBuZXZlciB0aHJvdywgYnV0IGlmIGl0IGRvZXMgaXQgaW5kaWNhdGVzIGEgYnVnIGluIHRoZSBkcml2ZXJcbiAgICAgICAgLy8gYW5kIHdlIHNob3VsZCBzdXJmYWNlIHRoZSBlcnJvclxuICAgICAgICBhd2FpdCBjbGVhbnVwQ3Vyc29yQXN5bmMoY3Vyc29yLCB7fSk7XG4gICAgfVxuICAgIGlmIChjdXJzb3Jba0RvY3VtZW50c10ubGVuZ3RoID09PSAwICYmIGJsb2NraW5nID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5leHQoY3Vyc29yLCB7IGJsb2NraW5nLCB0cmFuc2Zvcm0gfSk7XG59XG5mdW5jdGlvbiBjdXJzb3JJc0RlYWQoY3Vyc29yKSB7XG4gICAgY29uc3QgY3Vyc29ySWQgPSBjdXJzb3Jba0lkXTtcbiAgICByZXR1cm4gISFjdXJzb3JJZCAmJiBjdXJzb3JJZC5pc1plcm8oKTtcbn1cbmNvbnN0IGNsZWFudXBDdXJzb3JBc3luYyA9ICgwLCB1dGlsXzEucHJvbWlzaWZ5KShjbGVhbnVwQ3Vyc29yKTtcbmZ1bmN0aW9uIGNsZWFudXBDdXJzb3IoY3Vyc29yLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGN1cnNvcklkID0gY3Vyc29yW2tJZF07XG4gICAgY29uc3QgY3Vyc29yTnMgPSBjdXJzb3Jba05hbWVzcGFjZV07XG4gICAgY29uc3Qgc2VydmVyID0gY3Vyc29yW2tTZXJ2ZXJdO1xuICAgIGNvbnN0IHNlc3Npb24gPSBjdXJzb3Jba1Nlc3Npb25dO1xuICAgIGNvbnN0IGVycm9yID0gb3B0aW9ucz8uZXJyb3I7XG4gICAgLy8gQ3Vyc29ycyBvbmx5IGVtaXQgY2xvc2VkIGV2ZW50cyBvbmNlIHRoZSBjbGllbnQtc2lkZSBjdXJzb3IgaGFzIGJlZW4gZXhoYXVzdGVkIGZ1bGx5IG9yIHRoZXJlXG4gICAgLy8gd2FzIGFuIGVycm9yLiAgTm90YWJseSwgd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBjdXJzb3IgaWQgb2YgMCBhbmQgYSBub24tZW1wdHkgYmF0Y2gsIHdlXG4gICAgLy8gY2xlYW51cCB0aGUgY3Vyc29yIGJ1dCBkb24ndCBlbWl0IGEgYGNsb3NlYCBldmVudC5cbiAgICBjb25zdCBuZWVkc1RvRW1pdENsb3NlZCA9IG9wdGlvbnM/Lm5lZWRzVG9FbWl0Q2xvc2VkID8/IGN1cnNvcltrRG9jdW1lbnRzXS5sZW5ndGggPT09IDA7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGlmIChjdXJzb3IubG9hZEJhbGFuY2VkICYmIGVycm9yIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb05ldHdvcmtFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlQ2xlYW51cCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChjdXJzb3JJZCA9PSBudWxsIHx8IHNlcnZlciA9PSBudWxsIHx8IGN1cnNvcklkLmlzWmVybygpIHx8IGN1cnNvck5zID09IG51bGwpIHtcbiAgICAgICAgaWYgKG5lZWRzVG9FbWl0Q2xvc2VkKSB7XG4gICAgICAgICAgICBjdXJzb3Jba0Nsb3NlZF0gPSB0cnVlO1xuICAgICAgICAgICAgY3Vyc29yW2tJZF0gPSBic29uXzEuTG9uZy5aRVJPO1xuICAgICAgICAgICAgY3Vyc29yLmVtaXQoQWJzdHJhY3RDdXJzb3IuQ0xPU0UpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZXNzaW9uKSB7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5vd25lciA9PT0gY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbi5lbmRTZXNzaW9uKHsgZXJyb3IgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzZXNzaW9uLmluVHJhbnNhY3Rpb24oKSkge1xuICAgICAgICAgICAgICAgICgwLCBzZXNzaW9uc18xLm1heWJlQ2xlYXJQaW5uZWRDb25uZWN0aW9uKShzZXNzaW9uLCB7IGVycm9yIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21wbGV0ZUNsZWFudXAoKSB7XG4gICAgICAgIGlmIChzZXNzaW9uKSB7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5vd25lciA9PT0gY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbi5lbmRTZXNzaW9uKHsgZXJyb3IgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnNvci5lbWl0KEFic3RyYWN0Q3Vyc29yLkNMT1NFKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXNlc3Npb24uaW5UcmFuc2FjdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgKDAsIHNlc3Npb25zXzEubWF5YmVDbGVhclBpbm5lZENvbm5lY3Rpb24pKHNlc3Npb24sIHsgZXJyb3IgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY3Vyc29yLmVtaXQoQWJzdHJhY3RDdXJzb3IuQ0xPU0UpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgICB9XG4gICAgY3Vyc29yW2tLaWxsZWRdID0gdHJ1ZTtcbiAgICBpZiAoc2Vzc2lvbi5oYXNFbmRlZCkge1xuICAgICAgICByZXR1cm4gY29tcGxldGVDbGVhbnVwKCk7XG4gICAgfVxuICAgICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKGN1cnNvcltrQ2xpZW50XSwgbmV3IGtpbGxfY3Vyc29yc18xLktpbGxDdXJzb3JzT3BlcmF0aW9uKGN1cnNvcklkLCBjdXJzb3JOcywgc2VydmVyLCB7IHNlc3Npb24gfSkpXG4gICAgICAgIC5jYXRjaCgoKSA9PiBudWxsKVxuICAgICAgICAuZmluYWxseShjb21wbGV0ZUNsZWFudXApO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gYXNzZXJ0VW5pbml0aWFsaXplZChjdXJzb3IpIHtcbiAgICBpZiAoY3Vyc29yW2tJbml0aWFsaXplZF0pIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29DdXJzb3JJblVzZUVycm9yKCk7XG4gICAgfVxufVxuZXhwb3J0cy5hc3NlcnRVbmluaXRpYWxpemVkID0gYXNzZXJ0VW5pbml0aWFsaXplZDtcbmNsYXNzIFJlYWRhYmxlQ3Vyc29yU3RyZWFtIGV4dGVuZHMgc3RyZWFtXzEuUmVhZGFibGUge1xuICAgIGNvbnN0cnVjdG9yKGN1cnNvcikge1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBvYmplY3RNb2RlOiB0cnVlLFxuICAgICAgICAgICAgYXV0b0Rlc3Ryb3k6IGZhbHNlLFxuICAgICAgICAgICAgaGlnaFdhdGVyTWFyazogMVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fcmVhZEluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fY3Vyc29yID0gY3Vyc29yO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgX3JlYWQoc2l6ZSkge1xuICAgICAgICBpZiAoIXRoaXMuX3JlYWRJblByb2dyZXNzKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWFkSW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9yZWFkTmV4dCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9kZXN0cm95KGVycm9yLCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9jdXJzb3IuY2xvc2UoKS50aGVuKCgpID0+IGNhbGxiYWNrKGVycm9yKSwgY2xvc2VFcnJvciA9PiBjYWxsYmFjayhjbG9zZUVycm9yKSk7XG4gICAgfVxuICAgIF9yZWFkTmV4dCgpIHtcbiAgICAgICAgbmV4dCh0aGlzLl9jdXJzb3IsIHsgYmxvY2tpbmc6IHRydWUsIHRyYW5zZm9ybTogdHJ1ZSB9KS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnB1c2gobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnNvci5jbG9zZSgpLmNhdGNoKCgpID0+IG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHVzaChyZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWFkTmV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9yZWFkSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBlcnIgPT4ge1xuICAgICAgICAgICAgLy8gTk9URTogVGhpcyBpcyBxdWVzdGlvbmFibGUsIGJ1dCB3ZSBoYXZlIGEgdGVzdCBiYWNraW5nIHRoZSBiZWhhdmlvci4gSXQgc2VlbXMgdGhlXG4gICAgICAgICAgICAvLyAgICAgICBkZXNpcmVkIGJlaGF2aW9yIGlzIHRoYXQgYSBzdHJlYW0gZW5kcyBjbGVhbmx5IHdoZW4gYSB1c2VyIGV4cGxpY2l0bHkgY2xvc2VzXG4gICAgICAgICAgICAvLyAgICAgICBhIGNsaWVudCBkdXJpbmcgaXRlcmF0aW9uLiBBbHRlcm5hdGl2ZWx5LCB3ZSBjb3VsZCBkbyB0aGUgXCJyaWdodFwiIHRoaW5nIGFuZFxuICAgICAgICAgICAgLy8gICAgICAgcHJvcGFnYXRlIHRoZSBlcnJvciBtZXNzYWdlIGJ5IHJlbW92aW5nIHRoaXMgc3BlY2lhbCBjYXNlLlxuICAgICAgICAgICAgaWYgKGVyci5tZXNzYWdlLm1hdGNoKC9zZXJ2ZXIgaXMgY2xvc2VkLykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJzb3IuY2xvc2UoKS5jYXRjaCgoKSA9PiBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTk9URTogVGhpcyBpcyBhbHNvIHBlcmhhcHMgcXVlc3Rpb25hYmxlLiBUaGUgcmF0aW9uYWxlIGhlcmUgaXMgdGhhdCB0aGVzZSBlcnJvcnMgdGVuZFxuICAgICAgICAgICAgLy8gICAgICAgdG8gYmUgXCJvcGVyYXRpb24gd2FzIGludGVycnVwdGVkXCIsIHdoZXJlIGEgY3Vyc29yIGhhcyBiZWVuIGNsb3NlZCBidXQgdGhlcmUgaXMgYW5cbiAgICAgICAgICAgIC8vICAgICAgIGFjdGl2ZSBnZXRNb3JlIGluLWZsaWdodC4gVGhpcyB1c2VkIHRvIGNoZWNrIGlmIHRoZSBjdXJzb3Igd2FzIGtpbGxlZCBidXQgb25jZVxuICAgICAgICAgICAgLy8gICAgICAgdGhhdCBjaGFuZ2VkIHRvIGhhcHBlbiBpbiBjbGVhbnVwIGxlZ2l0aW1hdGUgZXJyb3JzIHdvdWxkIG5vdCBkZXN0cm95IHRoZVxuICAgICAgICAgICAgLy8gICAgICAgc3RyZWFtLiBUaGVyZSBhcmUgY2hhbmdlIHN0cmVhbXMgdGVzdCBzcGVjaWZpY2FsbHkgdGVzdCB0aGVzZSBjYXNlcy5cbiAgICAgICAgICAgIGlmIChlcnIubWVzc2FnZS5tYXRjaCgvb3BlcmF0aW9uIHdhcyBpbnRlcnJ1cHRlZC8pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaChudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5PVEU6IFRoZSB0d28gYWJvdmUgY2hlY2tzIG9uIHRoZSBtZXNzYWdlIG9mIHRoZSBlcnJvciB3aWxsIGNhdXNlIGEgbnVsbCB0byBiZSBwdXNoZWRcbiAgICAgICAgICAgIC8vICAgICAgIHRvIHRoZSBzdHJlYW0sIHRodXMgY2xvc2luZyB0aGUgc3RyZWFtIGJlZm9yZSB0aGUgZGVzdHJveSBjYWxsIGhhcHBlbnMuIFRoaXMgbWVhbnNcbiAgICAgICAgICAgIC8vICAgICAgIHRoYXQgZWl0aGVyIG9mIHRob3NlIGVycm9yIG1lc3NhZ2VzIG9uIGEgY2hhbmdlIHN0cmVhbSB3aWxsIG5vdCBnZXQgYSBwcm9wZXJcbiAgICAgICAgICAgIC8vICAgICAgICdlcnJvcicgZXZlbnQgdG8gYmUgZW1pdHRlZCAodGhlIGVycm9yIHBhc3NlZCB0byBkZXN0cm95KS4gQ2hhbmdlIHN0cmVhbSByZXN1bWFiaWxpdHlcbiAgICAgICAgICAgIC8vICAgICAgIHJlbGllcyBvbiB0aGF0IGVycm9yIGV2ZW50IHRvIGJlIGVtaXR0ZWQgdG8gY3JlYXRlIGl0cyBuZXcgY3Vyc29yIGFuZCB0aHVzIHdhcyBub3RcbiAgICAgICAgICAgIC8vICAgICAgIHdvcmtpbmcgb24gNC40IHNlcnZlcnMgYmVjYXVzZSB0aGUgZXJyb3IgZW1pdHRlZCBvbiBmYWlsb3ZlciB3YXMgXCJpbnRlcnJ1cHRlZCBhdFxuICAgICAgICAgICAgLy8gICAgICAgc2h1dGRvd25cIiB3aGlsZSBvbiA1LjArIGl0IGlzIFwiVGhlIHNlcnZlciBpcyBpbiBxdWllc2NlIG1vZGUgYW5kIHdpbGwgc2h1dCBkb3duXCIuXG4gICAgICAgICAgICAvLyAgICAgICBTZWUgTk9ERS00NDc1LlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVzdHJveShlcnIpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hYnN0cmFjdF9jdXJzb3IuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiYXNzZXJ0VW5pbml0aWFsaXplZCIsIkFic3RyYWN0Q3Vyc29yIiwiQ1VSU09SX0ZMQUdTIiwic3RyZWFtXzEiLCJyZXF1aXJlIiwidXRpbF8xIiwiYnNvbl8xIiwiZXJyb3JfMSIsIm1vbmdvX3R5cGVzXzEiLCJleGVjdXRlX29wZXJhdGlvbl8xIiwiZ2V0X21vcmVfMSIsImtpbGxfY3Vyc29yc18xIiwicmVhZF9jb25jZXJuXzEiLCJyZWFkX3ByZWZlcmVuY2VfMSIsInNlc3Npb25zXzEiLCJ1dGlsc18xIiwia0lkIiwiU3ltYm9sIiwia0RvY3VtZW50cyIsImtTZXJ2ZXIiLCJrTmFtZXNwYWNlIiwia0NsaWVudCIsImtTZXNzaW9uIiwia09wdGlvbnMiLCJrVHJhbnNmb3JtIiwia0luaXRpYWxpemVkIiwia0Nsb3NlZCIsImtLaWxsZWQiLCJrSW5pdCIsIlR5cGVkRXZlbnRFbWl0dGVyIiwiY29uc3RydWN0b3IiLCJjbGllbnQiLCJuYW1lc3BhY2UiLCJvcHRpb25zIiwicyIsImlzTW9uZ29DbGllbnQiLCJNb25nb1J1bnRpbWVFcnJvciIsIkxpc3QiLCJyZWFkUHJlZmVyZW5jZSIsIlJlYWRQcmVmZXJlbmNlIiwicHJpbWFyeSIsInBsdWNrQlNPTlNlcmlhbGl6ZU9wdGlvbnMiLCJyZWFkQ29uY2VybiIsIlJlYWRDb25jZXJuIiwiZnJvbU9wdGlvbnMiLCJiYXRjaFNpemUiLCJjb21tZW50IiwidW5kZWZpbmVkIiwibWF4VGltZU1TIiwibWF4QXdhaXRUaW1lTVMiLCJzZXNzaW9uIiwiQ2xpZW50U2Vzc2lvbiIsInN0YXJ0U2Vzc2lvbiIsIm93bmVyIiwiZXhwbGljaXQiLCJpZCIsInNlcnZlciIsImNsaWVudFNlc3Npb24iLCJjdXJzb3JPcHRpb25zIiwiY2xvc2VkIiwia2lsbGVkIiwibG9hZEJhbGFuY2VkIiwidG9wb2xvZ3kiLCJidWZmZXJlZENvdW50IiwibGVuZ3RoIiwicmVhZEJ1ZmZlcmVkRG9jdW1lbnRzIiwibnVtYmVyIiwiYnVmZmVyZWREb2NzIiwiZG9jdW1lbnRzVG9SZWFkIiwiTWF0aCIsIm1pbiIsImNvdW50IiwiZG9jdW1lbnQiLCJzaGlmdCIsInB1c2giLCJhc3luY0l0ZXJhdG9yIiwibmV4dCIsIm1lc3NhZ2UiLCJjbGVhbnVwQ3Vyc29yQXN5bmMiLCJuZWVkc1RvRW1pdENsb3NlZCIsImNhdGNoIiwiTW9uZ29BUElFcnJvciIsIkxvbmciLCJaRVJPIiwiY2xvc2UiLCJzdHJlYW0iLCJ0cmFuc2Zvcm0iLCJyZWFkYWJsZSIsIlJlYWRhYmxlQ3Vyc29yU3RyZWFtIiwicGlwZSIsIlRyYW5zZm9ybSIsIm9iamVjdE1vZGUiLCJoaWdoV2F0ZXJNYXJrIiwiY2h1bmsiLCJfIiwiY2FsbGJhY2siLCJ0cmFuc2Zvcm1lZCIsImVyciIsImhhc05leHQiLCJkb2MiLCJibG9ja2luZyIsInVuc2hpZnQiLCJNb25nb0N1cnNvckV4aGF1c3RlZEVycm9yIiwidHJ5TmV4dCIsImZvckVhY2giLCJpdGVyYXRvciIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJyZXN1bHQiLCJ0b0FycmF5IiwiYXJyYXkiLCJhZGRDdXJzb3JGbGFnIiwiZmxhZyIsImluY2x1ZGVzIiwibWFwIiwib2xkVHJhbnNmb3JtIiwid2l0aFJlYWRQcmVmZXJlbmNlIiwiZnJvbVN0cmluZyIsIndpdGhSZWFkQ29uY2VybiIsInJlc29sdmVkUmVhZENvbmNlcm4iLCJ0YWlsYWJsZSIsIk1vbmdvVGFpbGFibGVDdXJzb3JFcnJvciIsInJld2luZCIsImNsZWFyIiwiaGFzRW5kZWQiLCJlbmRTZXNzaW9uIiwiX2dldE1vcmUiLCJnZXRNb3JlT3BlcmF0aW9uIiwiR2V0TW9yZU9wZXJhdGlvbiIsImV4ZWN1dGVPcGVyYXRpb24iLCJfaW5pdGlhbGl6ZSIsImVycm9yIiwic3RhdGUiLCJyZXNwb25zZSIsImN1cnNvciIsImZyb21OdW1iZXIiLCJmcm9tQmlnSW50IiwibnMiLCJwdXNoTWFueSIsImZpcnN0QmF0Y2giLCJjbGVhbnVwQ3Vyc29yIiwiY3Vyc29ySXNEZWFkIiwiQ0xPU0UiLCJjdXJzb3JJZCIsImluaXQiLCJwcm9taXNpZnkiLCJjYiIsImdldE1vcmUiLCJuZXh0QmF0Y2giLCJpc1plcm8iLCJjdXJzb3JOcyIsIk1vbmdvTmV0d29ya0Vycm9yIiwiY29tcGxldGVDbGVhbnVwIiwiZW1pdCIsImZpbmFsbHkiLCJpblRyYW5zYWN0aW9uIiwibWF5YmVDbGVhclBpbm5lZENvbm5lY3Rpb24iLCJLaWxsQ3Vyc29yc09wZXJhdGlvbiIsIk1vbmdvQ3Vyc29ySW5Vc2VFcnJvciIsIlJlYWRhYmxlIiwiYXV0b0Rlc3Ryb3kiLCJfcmVhZEluUHJvZ3Jlc3MiLCJfY3Vyc29yIiwiX3JlYWQiLCJzaXplIiwiX3JlYWROZXh0IiwiX2Rlc3Ryb3kiLCJ0aGVuIiwiY2xvc2VFcnJvciIsImRlc3Ryb3llZCIsIm1hdGNoIiwiZGVzdHJveSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/aggregation_cursor.js":
/*!***************************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/aggregation_cursor.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AggregationCursor = void 0;\nconst aggregate_1 = __webpack_require__(/*! ../operations/aggregate */ \"(ssr)/./node_modules/mongodb/lib/operations/aggregate.js\");\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst abstract_cursor_1 = __webpack_require__(/*! ./abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\n/** @internal */ const kPipeline = Symbol(\"pipeline\");\n/** @internal */ const kOptions = Symbol(\"options\");\n/**\n * The **AggregationCursor** class is an internal class that embodies an aggregation cursor on MongoDB\n * allowing for iteration over the results returned from the underlying query. It supports\n * one by one document iteration, conversion to an array or can be iterated as a Node 4.X\n * or higher stream\n * @public\n */ class AggregationCursor extends abstract_cursor_1.AbstractCursor {\n    /** @internal */ constructor(client, namespace, pipeline = [], options = {}){\n        super(client, namespace, options);\n        this[kPipeline] = pipeline;\n        this[kOptions] = options;\n    }\n    get pipeline() {\n        return this[kPipeline];\n    }\n    clone() {\n        const clonedOptions = (0, utils_1.mergeOptions)({}, this[kOptions]);\n        delete clonedOptions.session;\n        return new AggregationCursor(this.client, this.namespace, this[kPipeline], {\n            ...clonedOptions\n        });\n    }\n    map(transform) {\n        return super.map(transform);\n    }\n    /** @internal */ _initialize(session, callback) {\n        const aggregateOperation = new aggregate_1.AggregateOperation(this.namespace, this[kPipeline], {\n            ...this[kOptions],\n            ...this.cursorOptions,\n            session\n        });\n        (0, execute_operation_1.executeOperation)(this.client, aggregateOperation, (err, response)=>{\n            if (err || response == null) return callback(err);\n            // TODO: NODE-2882\n            callback(undefined, {\n                server: aggregateOperation.server,\n                session,\n                response\n            });\n        });\n    }\n    /** Execute the explain for the cursor */ async explain(verbosity) {\n        return (0, execute_operation_1.executeOperation)(this.client, new aggregate_1.AggregateOperation(this.namespace, this[kPipeline], {\n            ...this[kOptions],\n            ...this.cursorOptions,\n            explain: verbosity ?? true\n        }));\n    }\n    group($group) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $group\n        });\n        return this;\n    }\n    /** Add a limit stage to the aggregation pipeline */ limit($limit) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $limit\n        });\n        return this;\n    }\n    /** Add a match stage to the aggregation pipeline */ match($match) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $match\n        });\n        return this;\n    }\n    /** Add an out stage to the aggregation pipeline */ out($out) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $out\n        });\n        return this;\n    }\n    /**\n     * Add a project stage to the aggregation pipeline\n     *\n     * @remarks\n     * In order to strictly type this function you must provide an interface\n     * that represents the effect of your projection on the result documents.\n     *\n     * By default chaining a projection to your cursor changes the returned type to the generic {@link Document} type.\n     * You should specify a parameterized type to have assertions on your final results.\n     *\n     * @example\n     * ```typescript\n     * // Best way\n     * const docs: AggregationCursor<{ a: number }> = cursor.project<{ a: number }>({ _id: 0, a: true });\n     * // Flexible way\n     * const docs: AggregationCursor<Document> = cursor.project({ _id: 0, a: true });\n     * ```\n     *\n     * @remarks\n     * In order to strictly type this function you must provide an interface\n     * that represents the effect of your projection on the result documents.\n     *\n     * **Note for Typescript Users:** adding a transform changes the return type of the iteration of this cursor,\n     * it **does not** return a new instance of a cursor. This means when calling project,\n     * you should always assign the result to a new variable in order to get a correctly typed cursor variable.\n     * Take note of the following example:\n     *\n     * @example\n     * ```typescript\n     * const cursor: AggregationCursor<{ a: number; b: string }> = coll.aggregate([]);\n     * const projectCursor = cursor.project<{ a: number }>({ _id: 0, a: true });\n     * const aPropOnlyArray: {a: number}[] = await projectCursor.toArray();\n     *\n     * // or always use chaining and save the final cursor\n     *\n     * const cursor = coll.aggregate().project<{ a: string }>({\n     *   _id: 0,\n     *   a: { $convert: { input: '$a', to: 'string' }\n     * }});\n     * ```\n     */ project($project) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $project\n        });\n        return this;\n    }\n    /** Add a lookup stage to the aggregation pipeline */ lookup($lookup) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $lookup\n        });\n        return this;\n    }\n    /** Add a redact stage to the aggregation pipeline */ redact($redact) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $redact\n        });\n        return this;\n    }\n    /** Add a skip stage to the aggregation pipeline */ skip($skip) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $skip\n        });\n        return this;\n    }\n    /** Add a sort stage to the aggregation pipeline */ sort($sort) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $sort\n        });\n        return this;\n    }\n    /** Add a unwind stage to the aggregation pipeline */ unwind($unwind) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $unwind\n        });\n        return this;\n    }\n    /** Add a geoNear stage to the aggregation pipeline */ geoNear($geoNear) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $geoNear\n        });\n        return this;\n    }\n}\nexports.AggregationCursor = AggregationCursor; //# sourceMappingURL=aggregation_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2FnZ3JlZ2F0aW9uX2N1cnNvci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQseUJBQXlCLEdBQUcsS0FBSztBQUNqQyxNQUFNRyxjQUFjQyxtQkFBT0EsQ0FBQyx5RkFBeUI7QUFDckQsTUFBTUMsc0JBQXNCRCxtQkFBT0EsQ0FBQyx5R0FBaUM7QUFDckUsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUcsb0JBQW9CSCxtQkFBT0EsQ0FBQyxxRkFBbUI7QUFDckQsY0FBYyxHQUNkLE1BQU1JLFlBQVlDLE9BQU87QUFDekIsY0FBYyxHQUNkLE1BQU1DLFdBQVdELE9BQU87QUFDeEI7Ozs7OztDQU1DLEdBQ0QsTUFBTVAsMEJBQTBCSyxrQkFBa0JJLGNBQWM7SUFDNUQsY0FBYyxHQUNkQyxZQUFZQyxNQUFNLEVBQUVDLFNBQVMsRUFBRUMsV0FBVyxFQUFFLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLENBQUU7UUFDeEQsS0FBSyxDQUFDSCxRQUFRQyxXQUFXRTtRQUN6QixJQUFJLENBQUNSLFVBQVUsR0FBR087UUFDbEIsSUFBSSxDQUFDTCxTQUFTLEdBQUdNO0lBQ3JCO0lBQ0EsSUFBSUQsV0FBVztRQUNYLE9BQU8sSUFBSSxDQUFDUCxVQUFVO0lBQzFCO0lBQ0FTLFFBQVE7UUFDSixNQUFNQyxnQkFBZ0IsQ0FBQyxHQUFHWixRQUFRYSxZQUFZLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQ1QsU0FBUztRQUNsRSxPQUFPUSxjQUFjRSxPQUFPO1FBQzVCLE9BQU8sSUFBSWxCLGtCQUFrQixJQUFJLENBQUNXLE1BQU0sRUFBRSxJQUFJLENBQUNDLFNBQVMsRUFBRSxJQUFJLENBQUNOLFVBQVUsRUFBRTtZQUN2RSxHQUFHVSxhQUFhO1FBQ3BCO0lBQ0o7SUFDQUcsSUFBSUMsU0FBUyxFQUFFO1FBQ1gsT0FB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SSxDQUFDN0IsVUFBVSxDQUFDOEIsSUFBSSxDQUFDO1lBQUVjO1FBQU07UUFDN0IsT0FBTyxJQUFJO0lBQ2Y7SUFDQSxpREFBaUQsR0FDakRDLEtBQUtDLEtBQUssRUFBRTtRQUNQLElBQUcvQyxrQkFBa0I4QixtQkFBbUIsRUFBRSxJQUFJO1FBQy9DLElBQUksQ0FBQzdCLFVBQVUsQ0FBQzhCLElBQUksQ0FBQztZQUFFZ0I7UUFBTTtRQUM3QixPQUFPLElBQUk7SUFDZjtJQUNBLG1EQUFtRCxHQUNuREMsT0FBT0MsT0FBTyxFQUFFO1FBQ1gsSUFBR2pELGtCQUFrQjhCLG1CQUFtQixFQUFFLElBQUk7UUFDL0MsSUFBSSxDQUFDN0IsVUFBVSxDQUFDOEIsSUFBSSxDQUFDO1lBQUVrQjtRQUFRO1FBQy9CLE9BQU8sSUFBSTtJQUNmO0lBQ0Esb0RBQW9ELEdBQ3BEQyxRQUFRQyxRQUFRLEVBQUU7UUFDYixJQUFHbkQsa0JBQWtCOEIsbUJBQW1CLEVBQUUsSUFBSTtRQUMvQyxJQUFJLENBQUM3QixVQUFVLENBQUM4QixJQUFJLENBQUM7WUFBRW9CO1FBQVM7UUFDaEMsT0FBTyxJQUFJO0lBQ2Y7QUFDSjtBQUNBMUQseUJBQXlCLEdBQUdFLG1CQUM1Qiw4Q0FBOEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2FnZ3JlZ2F0aW9uX2N1cnNvci5qcz84YzBkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BZ2dyZWdhdGlvbkN1cnNvciA9IHZvaWQgMDtcbmNvbnN0IGFnZ3JlZ2F0ZV8xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMvYWdncmVnYXRlXCIpO1xuY29uc3QgZXhlY3V0ZV9vcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuLi9vcGVyYXRpb25zL2V4ZWN1dGVfb3BlcmF0aW9uXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IGFic3RyYWN0X2N1cnNvcl8xID0gcmVxdWlyZShcIi4vYWJzdHJhY3RfY3Vyc29yXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga1BpcGVsaW5lID0gU3ltYm9sKCdwaXBlbGluZScpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga09wdGlvbnMgPSBTeW1ib2woJ29wdGlvbnMnKTtcbi8qKlxuICogVGhlICoqQWdncmVnYXRpb25DdXJzb3IqKiBjbGFzcyBpcyBhbiBpbnRlcm5hbCBjbGFzcyB0aGF0IGVtYm9kaWVzIGFuIGFnZ3JlZ2F0aW9uIGN1cnNvciBvbiBNb25nb0RCXG4gKiBhbGxvd2luZyBmb3IgaXRlcmF0aW9uIG92ZXIgdGhlIHJlc3VsdHMgcmV0dXJuZWQgZnJvbSB0aGUgdW5kZXJseWluZyBxdWVyeS4gSXQgc3VwcG9ydHNcbiAqIG9uZSBieSBvbmUgZG9jdW1lbnQgaXRlcmF0aW9uLCBjb252ZXJzaW9uIHRvIGFuIGFycmF5IG9yIGNhbiBiZSBpdGVyYXRlZCBhcyBhIE5vZGUgNC5YXG4gKiBvciBoaWdoZXIgc3RyZWFtXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIEFnZ3JlZ2F0aW9uQ3Vyc29yIGV4dGVuZHMgYWJzdHJhY3RfY3Vyc29yXzEuQWJzdHJhY3RDdXJzb3Ige1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3RvcihjbGllbnQsIG5hbWVzcGFjZSwgcGlwZWxpbmUgPSBbXSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKGNsaWVudCwgbmFtZXNwYWNlLCBvcHRpb25zKTtcbiAgICAgICAgdGhpc1trUGlwZWxpbmVdID0gcGlwZWxpbmU7XG4gICAgICAgIHRoaXNba09wdGlvbnNdID0gb3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IHBpcGVsaW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trUGlwZWxpbmVdO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3QgY2xvbmVkT3B0aW9ucyA9ICgwLCB1dGlsc18xLm1lcmdlT3B0aW9ucykoe30sIHRoaXNba09wdGlvbnNdKTtcbiAgICAgICAgZGVsZXRlIGNsb25lZE9wdGlvbnMuc2Vzc2lvbjtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2dyZWdhdGlvbkN1cnNvcih0aGlzLmNsaWVudCwgdGhpcy5uYW1lc3BhY2UsIHRoaXNba1BpcGVsaW5lXSwge1xuICAgICAgICAgICAgLi4uY2xvbmVkT3B0aW9uc1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWFwKHRyYW5zZm9ybSkge1xuICAgICAgICByZXR1cm4gc3VwZXIubWFwKHRyYW5zZm9ybSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfaW5pdGlhbGl6ZShzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBhZ2dyZWdhdGVPcGVyYXRpb24gPSBuZXcgYWdncmVnYXRlXzEuQWdncmVnYXRlT3BlcmF0aW9uKHRoaXMubmFtZXNwYWNlLCB0aGlzW2tQaXBlbGluZV0sIHtcbiAgICAgICAgICAgIC4uLnRoaXNba09wdGlvbnNdLFxuICAgICAgICAgICAgLi4udGhpcy5jdXJzb3JPcHRpb25zLFxuICAgICAgICAgICAgc2Vzc2lvblxuICAgICAgICB9KTtcbiAgICAgICAgKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIGFnZ3JlZ2F0ZU9wZXJhdGlvbiwgKGVyciwgcmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIgfHwgcmVzcG9uc2UgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIC8vIFRPRE86IE5PREUtMjg4MlxuICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCB7IHNlcnZlcjogYWdncmVnYXRlT3BlcmF0aW9uLnNlcnZlciwgc2Vzc2lvbiwgcmVzcG9uc2UgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiogRXhlY3V0ZSB0aGUgZXhwbGFpbiBmb3IgdGhlIGN1cnNvciAqL1xuICAgIGFzeW5jIGV4cGxhaW4odmVyYm9zaXR5KSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGFnZ3JlZ2F0ZV8xLkFnZ3JlZ2F0ZU9wZXJhdGlvbih0aGlzLm5hbWVzcGFjZSwgdGhpc1trUGlwZWxpbmVdLCB7XG4gICAgICAgICAgICAuLi50aGlzW2tPcHRpb25zXSxcbiAgICAgICAgICAgIC4uLnRoaXMuY3Vyc29yT3B0aW9ucyxcbiAgICAgICAgICAgIGV4cGxhaW46IHZlcmJvc2l0eSA/PyB0cnVlXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ3JvdXAoJGdyb3VwKSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgdGhpc1trUGlwZWxpbmVdLnB1c2goeyAkZ3JvdXAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQWRkIGEgbGltaXQgc3RhZ2UgdG8gdGhlIGFnZ3JlZ2F0aW9uIHBpcGVsaW5lICovXG4gICAgbGltaXQoJGxpbWl0KSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgdGhpc1trUGlwZWxpbmVdLnB1c2goeyAkbGltaXQgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQWRkIGEgbWF0Y2ggc3RhZ2UgdG8gdGhlIGFnZ3JlZ2F0aW9uIHBpcGVsaW5lICovXG4gICAgbWF0Y2goJG1hdGNoKSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgdGhpc1trUGlwZWxpbmVdLnB1c2goeyAkbWF0Y2ggfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQWRkIGFuIG91dCBzdGFnZSB0byB0aGUgYWdncmVnYXRpb24gcGlwZWxpbmUgKi9cbiAgICBvdXQoJG91dCkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIHRoaXNba1BpcGVsaW5lXS5wdXNoKHsgJG91dCB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIHByb2plY3Qgc3RhZ2UgdG8gdGhlIGFnZ3JlZ2F0aW9uIHBpcGVsaW5lXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIEluIG9yZGVyIHRvIHN0cmljdGx5IHR5cGUgdGhpcyBmdW5jdGlvbiB5b3UgbXVzdCBwcm92aWRlIGFuIGludGVyZmFjZVxuICAgICAqIHRoYXQgcmVwcmVzZW50cyB0aGUgZWZmZWN0IG9mIHlvdXIgcHJvamVjdGlvbiBvbiB0aGUgcmVzdWx0IGRvY3VtZW50cy5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQgY2hhaW5pbmcgYSBwcm9qZWN0aW9uIHRvIHlvdXIgY3Vyc29yIGNoYW5nZXMgdGhlIHJldHVybmVkIHR5cGUgdG8gdGhlIGdlbmVyaWMge0BsaW5rIERvY3VtZW50fSB0eXBlLlxuICAgICAqIFlvdSBzaG91bGQgc3BlY2lmeSBhIHBhcmFtZXRlcml6ZWQgdHlwZSB0byBoYXZlIGFzc2VydGlvbnMgb24geW91ciBmaW5hbCByZXN1bHRzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogLy8gQmVzdCB3YXlcbiAgICAgKiBjb25zdCBkb2NzOiBBZ2dyZWdhdGlvbkN1cnNvcjx7IGE6IG51bWJlciB9PiA9IGN1cnNvci5wcm9qZWN0PHsgYTogbnVtYmVyIH0+KHsgX2lkOiAwLCBhOiB0cnVlIH0pO1xuICAgICAqIC8vIEZsZXhpYmxlIHdheVxuICAgICAqIGNvbnN0IGRvY3M6IEFnZ3JlZ2F0aW9uQ3Vyc29yPERvY3VtZW50PiA9IGN1cnNvci5wcm9qZWN0KHsgX2lkOiAwLCBhOiB0cnVlIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBJbiBvcmRlciB0byBzdHJpY3RseSB0eXBlIHRoaXMgZnVuY3Rpb24geW91IG11c3QgcHJvdmlkZSBhbiBpbnRlcmZhY2VcbiAgICAgKiB0aGF0IHJlcHJlc2VudHMgdGhlIGVmZmVjdCBvZiB5b3VyIHByb2plY3Rpb24gb24gdGhlIHJlc3VsdCBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiAqKk5vdGUgZm9yIFR5cGVzY3JpcHQgVXNlcnM6KiogYWRkaW5nIGEgdHJhbnNmb3JtIGNoYW5nZXMgdGhlIHJldHVybiB0eXBlIG9mIHRoZSBpdGVyYXRpb24gb2YgdGhpcyBjdXJzb3IsXG4gICAgICogaXQgKipkb2VzIG5vdCoqIHJldHVybiBhIG5ldyBpbnN0YW5jZSBvZiBhIGN1cnNvci4gVGhpcyBtZWFucyB3aGVuIGNhbGxpbmcgcHJvamVjdCxcbiAgICAgKiB5b3Ugc2hvdWxkIGFsd2F5cyBhc3NpZ24gdGhlIHJlc3VsdCB0byBhIG5ldyB2YXJpYWJsZSBpbiBvcmRlciB0byBnZXQgYSBjb3JyZWN0bHkgdHlwZWQgY3Vyc29yIHZhcmlhYmxlLlxuICAgICAqIFRha2Ugbm90ZSBvZiB0aGUgZm9sbG93aW5nIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiBjb25zdCBjdXJzb3I6IEFnZ3JlZ2F0aW9uQ3Vyc29yPHsgYTogbnVtYmVyOyBiOiBzdHJpbmcgfT4gPSBjb2xsLmFnZ3JlZ2F0ZShbXSk7XG4gICAgICogY29uc3QgcHJvamVjdEN1cnNvciA9IGN1cnNvci5wcm9qZWN0PHsgYTogbnVtYmVyIH0+KHsgX2lkOiAwLCBhOiB0cnVlIH0pO1xuICAgICAqIGNvbnN0IGFQcm9wT25seUFycmF5OiB7YTogbnVtYmVyfVtdID0gYXdhaXQgcHJvamVjdEN1cnNvci50b0FycmF5KCk7XG4gICAgICpcbiAgICAgKiAvLyBvciBhbHdheXMgdXNlIGNoYWluaW5nIGFuZCBzYXZlIHRoZSBmaW5hbCBjdXJzb3JcbiAgICAgKlxuICAgICAqIGNvbnN0IGN1cnNvciA9IGNvbGwuYWdncmVnYXRlKCkucHJvamVjdDx7IGE6IHN0cmluZyB9Pih7XG4gICAgICogICBfaWQ6IDAsXG4gICAgICogICBhOiB7ICRjb252ZXJ0OiB7IGlucHV0OiAnJGEnLCB0bzogJ3N0cmluZycgfVxuICAgICAqIH19KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBwcm9qZWN0KCRwcm9qZWN0KSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgdGhpc1trUGlwZWxpbmVdLnB1c2goeyAkcHJvamVjdCB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBBZGQgYSBsb29rdXAgc3RhZ2UgdG8gdGhlIGFnZ3JlZ2F0aW9uIHBpcGVsaW5lICovXG4gICAgbG9va3VwKCRsb29rdXApIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICB0aGlzW2tQaXBlbGluZV0ucHVzaCh7ICRsb29rdXAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQWRkIGEgcmVkYWN0IHN0YWdlIHRvIHRoZSBhZ2dyZWdhdGlvbiBwaXBlbGluZSAqL1xuICAgIHJlZGFjdCgkcmVkYWN0KSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgdGhpc1trUGlwZWxpbmVdLnB1c2goeyAkcmVkYWN0IH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIEFkZCBhIHNraXAgc3RhZ2UgdG8gdGhlIGFnZ3JlZ2F0aW9uIHBpcGVsaW5lICovXG4gICAgc2tpcCgkc2tpcCkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIHRoaXNba1BpcGVsaW5lXS5wdXNoKHsgJHNraXAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQWRkIGEgc29ydCBzdGFnZSB0byB0aGUgYWdncmVnYXRpb24gcGlwZWxpbmUgKi9cbiAgICBzb3J0KCRzb3J0KSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgdGhpc1trUGlwZWxpbmVdLnB1c2goeyAkc29ydCB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBBZGQgYSB1bndpbmQgc3RhZ2UgdG8gdGhlIGFnZ3JlZ2F0aW9uIHBpcGVsaW5lICovXG4gICAgdW53aW5kKCR1bndpbmQpIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICB0aGlzW2tQaXBlbGluZV0ucHVzaCh7ICR1bndpbmQgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQWRkIGEgZ2VvTmVhciBzdGFnZSB0byB0aGUgYWdncmVnYXRpb24gcGlwZWxpbmUgKi9cbiAgICBnZW9OZWFyKCRnZW9OZWFyKSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgdGhpc1trUGlwZWxpbmVdLnB1c2goeyAkZ2VvTmVhciB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuZXhwb3J0cy5BZ2dyZWdhdGlvbkN1cnNvciA9IEFnZ3JlZ2F0aW9uQ3Vyc29yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWdncmVnYXRpb25fY3Vyc29yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkFnZ3JlZ2F0aW9uQ3Vyc29yIiwiYWdncmVnYXRlXzEiLCJyZXF1aXJlIiwiZXhlY3V0ZV9vcGVyYXRpb25fMSIsInV0aWxzXzEiLCJhYnN0cmFjdF9jdXJzb3JfMSIsImtQaXBlbGluZSIsIlN5bWJvbCIsImtPcHRpb25zIiwiQWJzdHJhY3RDdXJzb3IiLCJjb25zdHJ1Y3RvciIsImNsaWVudCIsIm5hbWVzcGFjZSIsInBpcGVsaW5lIiwib3B0aW9ucyIsImNsb25lIiwiY2xvbmVkT3B0aW9ucyIsIm1lcmdlT3B0aW9ucyIsInNlc3Npb24iLCJtYXAiLCJ0cmFuc2Zvcm0iLCJfaW5pdGlhbGl6ZSIsImNhbGxiYWNrIiwiYWdncmVnYXRlT3BlcmF0aW9uIiwiQWdncmVnYXRlT3BlcmF0aW9uIiwiY3Vyc29yT3B0aW9ucyIsImV4ZWN1dGVPcGVyYXRpb24iLCJlcnIiLCJyZXNwb25zZSIsInVuZGVmaW5lZCIsInNlcnZlciIsImV4cGxhaW4iLCJ2ZXJib3NpdHkiLCJncm91cCIsIiRncm91cCIsImFzc2VydFVuaW5pdGlhbGl6ZWQiLCJwdXNoIiwibGltaXQiLCIkbGltaXQiLCJtYXRjaCIsIiRtYXRjaCIsIm91dCIsIiRvdXQiLCJwcm9qZWN0IiwiJHByb2plY3QiLCJsb29rdXAiLCIkbG9va3VwIiwicmVkYWN0IiwiJHJlZGFjdCIsInNraXAiLCIkc2tpcCIsInNvcnQiLCIkc29ydCIsInVud2luZCIsIiR1bndpbmQiLCJnZW9OZWFyIiwiJGdlb05lYXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/aggregation_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/change_stream_cursor.js":
/*!*****************************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/change_stream_cursor.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ChangeStreamCursor = void 0;\nconst change_stream_1 = __webpack_require__(/*! ../change_stream */ \"(ssr)/./node_modules/mongodb/lib/change_stream.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst aggregate_1 = __webpack_require__(/*! ../operations/aggregate */ \"(ssr)/./node_modules/mongodb/lib/operations/aggregate.js\");\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst abstract_cursor_1 = __webpack_require__(/*! ./abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\n/** @internal */ class ChangeStreamCursor extends abstract_cursor_1.AbstractCursor {\n    constructor(client, namespace, pipeline = [], options = {}){\n        super(client, namespace, options);\n        this.pipeline = pipeline;\n        this.options = options;\n        this._resumeToken = null;\n        this.startAtOperationTime = options.startAtOperationTime;\n        if (options.startAfter) {\n            this.resumeToken = options.startAfter;\n        } else if (options.resumeAfter) {\n            this.resumeToken = options.resumeAfter;\n        }\n    }\n    set resumeToken(token) {\n        this._resumeToken = token;\n        this.emit(change_stream_1.ChangeStream.RESUME_TOKEN_CHANGED, token);\n    }\n    get resumeToken() {\n        return this._resumeToken;\n    }\n    get resumeOptions() {\n        const options = {\n            ...this.options\n        };\n        for (const key of [\n            \"resumeAfter\",\n            \"startAfter\",\n            \"startAtOperationTime\"\n        ]){\n            delete options[key];\n        }\n        if (this.resumeToken != null) {\n            if (this.options.startAfter && !this.hasReceived) {\n                options.startAfter = this.resumeToken;\n            } else {\n                options.resumeAfter = this.resumeToken;\n            }\n        } else if (this.startAtOperationTime != null && (0, utils_1.maxWireVersion)(this.server) >= 7) {\n            options.startAtOperationTime = this.startAtOperationTime;\n        }\n        return options;\n    }\n    cacheResumeToken(resumeToken) {\n        if (this.bufferedCount() === 0 && this.postBatchResumeToken) {\n            this.resumeToken = this.postBatchResumeToken;\n        } else {\n            this.resumeToken = resumeToken;\n        }\n        this.hasReceived = true;\n    }\n    _processBatch(response) {\n        const cursor = response.cursor;\n        if (cursor.postBatchResumeToken) {\n            this.postBatchResumeToken = response.cursor.postBatchResumeToken;\n            const batch = \"firstBatch\" in response.cursor ? response.cursor.firstBatch : response.cursor.nextBatch;\n            if (batch.length === 0) {\n                this.resumeToken = cursor.postBatchResumeToken;\n            }\n        }\n    }\n    clone() {\n        return new ChangeStreamCursor(this.client, this.namespace, this.pipeline, {\n            ...this.cursorOptions\n        });\n    }\n    _initialize(session, callback) {\n        const aggregateOperation = new aggregate_1.AggregateOperation(this.namespace, this.pipeline, {\n            ...this.cursorOptions,\n            ...this.options,\n            session\n        });\n        (0, execute_operation_1.executeOperation)(session.client, aggregateOperation, (err, response)=>{\n            if (err || response == null) {\n                return callback(err);\n            }\n            const server = aggregateOperation.server;\n            this.maxWireVersion = (0, utils_1.maxWireVersion)(server);\n            if (this.startAtOperationTime == null && this.resumeAfter == null && this.startAfter == null && this.maxWireVersion >= 7) {\n                this.startAtOperationTime = response.operationTime;\n            }\n            this._processBatch(response);\n            this.emit(constants_1.INIT, response);\n            this.emit(constants_1.RESPONSE);\n            // TODO: NODE-2882\n            callback(undefined, {\n                server,\n                session,\n                response\n            });\n        });\n    }\n    _getMore(batchSize, callback) {\n        super._getMore(batchSize, (err, response)=>{\n            if (err) {\n                return callback(err);\n            }\n            this.maxWireVersion = (0, utils_1.maxWireVersion)(this.server);\n            this._processBatch(response);\n            this.emit(change_stream_1.ChangeStream.MORE, response);\n            this.emit(change_stream_1.ChangeStream.RESPONSE);\n            callback(err, response);\n        });\n    }\n}\nexports.ChangeStreamCursor = ChangeStreamCursor; //# sourceMappingURL=change_stream_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2NoYW5nZV9zdHJlYW1fY3Vyc29yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwwQkFBMEIsR0FBRyxLQUFLO0FBQ2xDLE1BQU1HLGtCQUFrQkMsbUJBQU9BLENBQUMsMkVBQWtCO0FBQ2xELE1BQU1DLGNBQWNELG1CQUFPQSxDQUFDLG1FQUFjO0FBQzFDLE1BQU1FLGNBQWNGLG1CQUFPQSxDQUFDLHlGQUF5QjtBQUNyRCxNQUFNRyxzQkFBc0JILG1CQUFPQSxDQUFDLHlHQUFpQztBQUNyRSxNQUFNSSxVQUFVSixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNSyxvQkFBb0JMLG1CQUFPQSxDQUFDLHFGQUFtQjtBQUNyRCxjQUFjLEdBQ2QsTUFBTUYsMkJBQTJCTyxrQkFBa0JDLGNBQWM7SUFDN0RDLFlBQVlDLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxXQUFXLEVBQUUsRUFBRUMsVUFBVSxDQUFDLENBQUMsQ0FBRTtRQUN4RCxLQUFLLENBQUNILFFBQVFDLFdBQVdFO1FBQ3pCLElBQUksQ0FBQ0QsUUFBUSxHQUFHQTtRQUNoQixJQUFJLENBQUNDLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLFlBQVksR0FBRztRQUNwQixJQUFJLENBQUNDLG9CQUFvQixHQUFHRixRQUFRRSxvQkFBb0I7UUFDeEQsSUFBSUYsUUFBUUcsVUFBVSxFQUFFO1lBQ3BCLElBQUksQ0FBQ0MsV0FBVyxHQUFHSixRQUFRRyxVQUFVO1FBQ3pDLE9BQ0ssSUFBSUgsUUFBUUssV0FBVyxFQUFFO1lBQzFCLElBQUksQ0FBQ0QsV0FBVyxHQUFHSixRQUFRSyxXQUFXO1FBQzFDO0lBQ0o7SUFDQSxJQUFJRCxZQUFZRSxLQUFLLEVBQUU7UUFDbkIsSUFBSSxDQUFDTCxZQUFZLEdBQUdLO1FBQ3BCLElBQUksQ0FBQ0MsSUFBSSxDQUFDbkIsZ0JBQWdC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b0IsR0FBR2lCLFNBQVNlLGFBQWE7WUFDdEQ7WUFDQSxJQUFJLENBQUNoQixhQUFhLENBQUNDO1lBQ25CLElBQUksQ0FBQ1osSUFBSSxDQUFDakIsWUFBWTZDLElBQUksRUFBRWhCO1lBQzVCLElBQUksQ0FBQ1osSUFBSSxDQUFDakIsWUFBWThDLFFBQVE7WUFDOUIsa0JBQWtCO1lBQ2xCUCxTQUFTUSxXQUFXO2dCQUFFdkI7Z0JBQVFjO2dCQUFTVDtZQUFTO1FBQ3BEO0lBQ0o7SUFDQW1CLFNBQVNDLFNBQVMsRUFBRVYsUUFBUSxFQUFFO1FBQzFCLEtBQUssQ0FBQ1MsU0FBU0MsV0FBVyxDQUFDTixLQUFLZDtZQUM1QixJQUFJYyxLQUFLO2dCQUNMLE9BQU9KLFNBQVNJO1lBQ3BCO1lBQ0EsSUFBSSxDQUFDcEIsY0FBYyxHQUFHLENBQUMsR0FBR3BCLFFBQVFvQixjQUFjLEVBQUUsSUFBSSxDQUFDQyxNQUFNO1lBQzdELElBQUksQ0FBQ0ksYUFBYSxDQUFDQztZQUNuQixJQUFJLENBQUNaLElBQUksQ0FBQ25CLGdCQUFnQm9CLFlBQVksQ0FBQ2dDLElBQUksRUFBRXJCO1lBQzdDLElBQUksQ0FBQ1osSUFBSSxDQUFDbkIsZ0JBQWdCb0IsWUFBWSxDQUFDNEIsUUFBUTtZQUMvQ1AsU0FBU0ksS0FBS2Q7UUFDbEI7SUFDSjtBQUNKO0FBQ0FsQywwQkFBMEIsR0FBR0Usb0JBQzdCLGdEQUFnRCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jdXJzb3IvY2hhbmdlX3N0cmVhbV9jdXJzb3IuanM/ZTIxNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ2hhbmdlU3RyZWFtQ3Vyc29yID0gdm9pZCAwO1xuY29uc3QgY2hhbmdlX3N0cmVhbV8xID0gcmVxdWlyZShcIi4uL2NoYW5nZV9zdHJlYW1cIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG5jb25zdCBhZ2dyZWdhdGVfMSA9IHJlcXVpcmUoXCIuLi9vcGVyYXRpb25zL2FnZ3JlZ2F0ZVwiKTtcbmNvbnN0IGV4ZWN1dGVfb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9leGVjdXRlX29wZXJhdGlvblwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBhYnN0cmFjdF9jdXJzb3JfMSA9IHJlcXVpcmUoXCIuL2Fic3RyYWN0X2N1cnNvclwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIENoYW5nZVN0cmVhbUN1cnNvciBleHRlbmRzIGFic3RyYWN0X2N1cnNvcl8xLkFic3RyYWN0Q3Vyc29yIHtcbiAgICBjb25zdHJ1Y3RvcihjbGllbnQsIG5hbWVzcGFjZSwgcGlwZWxpbmUgPSBbXSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKGNsaWVudCwgbmFtZXNwYWNlLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5waXBlbGluZSA9IHBpcGVsaW5lO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLl9yZXN1bWVUb2tlbiA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhcnRBdE9wZXJhdGlvblRpbWUgPSBvcHRpb25zLnN0YXJ0QXRPcGVyYXRpb25UaW1lO1xuICAgICAgICBpZiAob3B0aW9ucy5zdGFydEFmdGVyKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gb3B0aW9ucy5zdGFydEFmdGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMucmVzdW1lQWZ0ZXIpIHtcbiAgICAgICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSBvcHRpb25zLnJlc3VtZUFmdGVyO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldCByZXN1bWVUb2tlbih0b2tlbikge1xuICAgICAgICB0aGlzLl9yZXN1bWVUb2tlbiA9IHRva2VuO1xuICAgICAgICB0aGlzLmVtaXQoY2hhbmdlX3N0cmVhbV8xLkNoYW5nZVN0cmVhbS5SRVNVTUVfVE9LRU5fQ0hBTkdFRCwgdG9rZW4pO1xuICAgIH1cbiAgICBnZXQgcmVzdW1lVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXN1bWVUb2tlbjtcbiAgICB9XG4gICAgZ2V0IHJlc3VtZU9wdGlvbnMoKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLm9wdGlvbnNcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgWydyZXN1bWVBZnRlcicsICdzdGFydEFmdGVyJywgJ3N0YXJ0QXRPcGVyYXRpb25UaW1lJ10pIHtcbiAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmVzdW1lVG9rZW4gIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zdGFydEFmdGVyICYmICF0aGlzLmhhc1JlY2VpdmVkKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5zdGFydEFmdGVyID0gdGhpcy5yZXN1bWVUb2tlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMucmVzdW1lQWZ0ZXIgPSB0aGlzLnJlc3VtZVRva2VuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc3RhcnRBdE9wZXJhdGlvblRpbWUgIT0gbnVsbCAmJiAoMCwgdXRpbHNfMS5tYXhXaXJlVmVyc2lvbikodGhpcy5zZXJ2ZXIpID49IDcpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuc3RhcnRBdE9wZXJhdGlvblRpbWUgPSB0aGlzLnN0YXJ0QXRPcGVyYXRpb25UaW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cbiAgICBjYWNoZVJlc3VtZVRva2VuKHJlc3VtZVRva2VuKSB7XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlcmVkQ291bnQoKSA9PT0gMCAmJiB0aGlzLnBvc3RCYXRjaFJlc3VtZVRva2VuKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gdGhpcy5wb3N0QmF0Y2hSZXN1bWVUb2tlbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSByZXN1bWVUb2tlbjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhc1JlY2VpdmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgX3Byb2Nlc3NCYXRjaChyZXNwb25zZSkge1xuICAgICAgICBjb25zdCBjdXJzb3IgPSByZXNwb25zZS5jdXJzb3I7XG4gICAgICAgIGlmIChjdXJzb3IucG9zdEJhdGNoUmVzdW1lVG9rZW4pIHtcbiAgICAgICAgICAgIHRoaXMucG9zdEJhdGNoUmVzdW1lVG9rZW4gPSByZXNwb25zZS5jdXJzb3IucG9zdEJhdGNoUmVzdW1lVG9rZW47XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9ICdmaXJzdEJhdGNoJyBpbiByZXNwb25zZS5jdXJzb3IgPyByZXNwb25zZS5jdXJzb3IuZmlyc3RCYXRjaCA6IHJlc3BvbnNlLmN1cnNvci5uZXh0QmF0Y2g7XG4gICAgICAgICAgICBpZiAoYmF0Y2gubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IGN1cnNvci5wb3N0QmF0Y2hSZXN1bWVUb2tlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VTdHJlYW1DdXJzb3IodGhpcy5jbGllbnQsIHRoaXMubmFtZXNwYWNlLCB0aGlzLnBpcGVsaW5lLCB7XG4gICAgICAgICAgICAuLi50aGlzLmN1cnNvck9wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9pbml0aWFsaXplKHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGFnZ3JlZ2F0ZU9wZXJhdGlvbiA9IG5ldyBhZ2dyZWdhdGVfMS5BZ2dyZWdhdGVPcGVyYXRpb24odGhpcy5uYW1lc3BhY2UsIHRoaXMucGlwZWxpbmUsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuY3Vyc29yT3B0aW9ucyxcbiAgICAgICAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgfSk7XG4gICAgICAgICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHNlc3Npb24uY2xpZW50LCBhZ2dyZWdhdGVPcGVyYXRpb24sIChlcnIsIHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyIHx8IHJlc3BvbnNlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNlcnZlciA9IGFnZ3JlZ2F0ZU9wZXJhdGlvbi5zZXJ2ZXI7XG4gICAgICAgICAgICB0aGlzLm1heFdpcmVWZXJzaW9uID0gKDAsIHV0aWxzXzEubWF4V2lyZVZlcnNpb24pKHNlcnZlcik7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGFydEF0T3BlcmF0aW9uVGltZSA9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bWVBZnRlciA9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydEFmdGVyID09IG51bGwgJiZcbiAgICAgICAgICAgICAgICB0aGlzLm1heFdpcmVWZXJzaW9uID49IDcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0QXRPcGVyYXRpb25UaW1lID0gcmVzcG9uc2Uub3BlcmF0aW9uVGltZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NCYXRjaChyZXNwb25zZSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoY29uc3RhbnRzXzEuSU5JVCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KGNvbnN0YW50c18xLlJFU1BPTlNFKTtcbiAgICAgICAgICAgIC8vIFRPRE86IE5PREUtMjg4MlxuICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCB7IHNlcnZlciwgc2Vzc2lvbiwgcmVzcG9uc2UgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfZ2V0TW9yZShiYXRjaFNpemUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHN1cGVyLl9nZXRNb3JlKGJhdGNoU2l6ZSwgKGVyciwgcmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWF4V2lyZVZlcnNpb24gPSAoMCwgdXRpbHNfMS5tYXhXaXJlVmVyc2lvbikodGhpcy5zZXJ2ZXIpO1xuICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc0JhdGNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdChjaGFuZ2Vfc3RyZWFtXzEuQ2hhbmdlU3RyZWFtLk1PUkUsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdChjaGFuZ2Vfc3RyZWFtXzEuQ2hhbmdlU3RyZWFtLlJFU1BPTlNFKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKGVyciwgcmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkNoYW5nZVN0cmVhbUN1cnNvciA9IENoYW5nZVN0cmVhbUN1cnNvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNoYW5nZV9zdHJlYW1fY3Vyc29yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkNoYW5nZVN0cmVhbUN1cnNvciIsImNoYW5nZV9zdHJlYW1fMSIsInJlcXVpcmUiLCJjb25zdGFudHNfMSIsImFnZ3JlZ2F0ZV8xIiwiZXhlY3V0ZV9vcGVyYXRpb25fMSIsInV0aWxzXzEiLCJhYnN0cmFjdF9jdXJzb3JfMSIsIkFic3RyYWN0Q3Vyc29yIiwiY29uc3RydWN0b3IiLCJjbGllbnQiLCJuYW1lc3BhY2UiLCJwaXBlbGluZSIsIm9wdGlvbnMiLCJfcmVzdW1lVG9rZW4iLCJzdGFydEF0T3BlcmF0aW9uVGltZSIsInN0YXJ0QWZ0ZXIiLCJyZXN1bWVUb2tlbiIsInJlc3VtZUFmdGVyIiwidG9rZW4iLCJlbWl0IiwiQ2hhbmdlU3RyZWFtIiwiUkVTVU1FX1RPS0VOX0NIQU5HRUQiLCJyZXN1bWVPcHRpb25zIiwia2V5IiwiaGFzUmVjZWl2ZWQiLCJtYXhXaXJlVmVyc2lvbiIsInNlcnZlciIsImNhY2hlUmVzdW1lVG9rZW4iLCJidWZmZXJlZENvdW50IiwicG9zdEJhdGNoUmVzdW1lVG9rZW4iLCJfcHJvY2Vzc0JhdGNoIiwicmVzcG9uc2UiLCJjdXJzb3IiLCJiYXRjaCIsImZpcnN0QmF0Y2giLCJuZXh0QmF0Y2giLCJsZW5ndGgiLCJjbG9uZSIsImN1cnNvck9wdGlvbnMiLCJfaW5pdGlhbGl6ZSIsInNlc3Npb24iLCJjYWxsYmFjayIsImFnZ3JlZ2F0ZU9wZXJhdGlvbiIsIkFnZ3JlZ2F0ZU9wZXJhdGlvbiIsImV4ZWN1dGVPcGVyYXRpb24iLCJlcnIiLCJvcGVyYXRpb25UaW1lIiwiSU5JVCIsIlJFU1BPTlNFIiwidW5kZWZpbmVkIiwiX2dldE1vcmUiLCJiYXRjaFNpemUiLCJNT1JFIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/change_stream_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/find_cursor.js":
/*!********************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/find_cursor.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.FindCursor = exports.FLAGS = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst count_1 = __webpack_require__(/*! ../operations/count */ \"(ssr)/./node_modules/mongodb/lib/operations/count.js\");\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst find_1 = __webpack_require__(/*! ../operations/find */ \"(ssr)/./node_modules/mongodb/lib/operations/find.js\");\nconst sort_1 = __webpack_require__(/*! ../sort */ \"(ssr)/./node_modules/mongodb/lib/sort.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst abstract_cursor_1 = __webpack_require__(/*! ./abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\n/** @internal */ const kFilter = Symbol(\"filter\");\n/** @internal */ const kNumReturned = Symbol(\"numReturned\");\n/** @internal */ const kBuiltOptions = Symbol(\"builtOptions\");\n/** @public Flags allowed for cursor */ exports.FLAGS = [\n    \"tailable\",\n    \"oplogReplay\",\n    \"noCursorTimeout\",\n    \"awaitData\",\n    \"exhaust\",\n    \"partial\"\n];\n/** @public */ class FindCursor extends abstract_cursor_1.AbstractCursor {\n    /** @internal */ constructor(client, namespace, filter = {}, options = {}){\n        super(client, namespace, options);\n        this[kFilter] = filter;\n        this[kBuiltOptions] = options;\n        if (options.sort != null) {\n            this[kBuiltOptions].sort = (0, sort_1.formatSort)(options.sort);\n        }\n    }\n    clone() {\n        const clonedOptions = (0, utils_1.mergeOptions)({}, this[kBuiltOptions]);\n        delete clonedOptions.session;\n        return new FindCursor(this.client, this.namespace, this[kFilter], {\n            ...clonedOptions\n        });\n    }\n    map(transform) {\n        return super.map(transform);\n    }\n    /** @internal */ _initialize(session, callback) {\n        const findOperation = new find_1.FindOperation(undefined, this.namespace, this[kFilter], {\n            ...this[kBuiltOptions],\n            ...this.cursorOptions,\n            session\n        });\n        (0, execute_operation_1.executeOperation)(this.client, findOperation, (err, response)=>{\n            if (err || response == null) return callback(err);\n            // TODO: We only need this for legacy queries that do not support `limit`, maybe\n            //       the value should only be saved in those cases.\n            if (response.cursor) {\n                this[kNumReturned] = response.cursor.firstBatch.length;\n            } else {\n                this[kNumReturned] = response.documents ? response.documents.length : 0;\n            }\n            // TODO: NODE-2882\n            callback(undefined, {\n                server: findOperation.server,\n                session,\n                response\n            });\n        });\n    }\n    /** @internal */ _getMore(batchSize, callback) {\n        // NOTE: this is to support client provided limits in pre-command servers\n        const numReturned = this[kNumReturned];\n        if (numReturned) {\n            const limit = this[kBuiltOptions].limit;\n            batchSize = limit && limit > 0 && numReturned + batchSize > limit ? limit - numReturned : batchSize;\n            if (batchSize <= 0) {\n                this.close().finally(()=>callback());\n                return;\n            }\n        }\n        super._getMore(batchSize, (err, response)=>{\n            if (err) return callback(err);\n            // TODO: wrap this in some logic to prevent it from happening if we don't need this support\n            if (response) {\n                this[kNumReturned] = this[kNumReturned] + response.cursor.nextBatch.length;\n            }\n            callback(undefined, response);\n        });\n    }\n    /**\n     * Get the count of documents for this cursor\n     * @deprecated Use `collection.estimatedDocumentCount` or `collection.countDocuments` instead\n     */ async count(options) {\n        (0, utils_1.emitWarningOnce)(\"cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead \");\n        if (typeof options === \"boolean\") {\n            throw new error_1.MongoInvalidArgumentError(\"Invalid first parameter to count\");\n        }\n        return (0, execute_operation_1.executeOperation)(this.client, new count_1.CountOperation(this.namespace, this[kFilter], {\n            ...this[kBuiltOptions],\n            ...this.cursorOptions,\n            ...options\n        }));\n    }\n    /** Execute the explain for the cursor */ async explain(verbosity) {\n        return (0, execute_operation_1.executeOperation)(this.client, new find_1.FindOperation(undefined, this.namespace, this[kFilter], {\n            ...this[kBuiltOptions],\n            ...this.cursorOptions,\n            explain: verbosity ?? true\n        }));\n    }\n    /** Set the cursor query */ filter(filter) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kFilter] = filter;\n        return this;\n    }\n    /**\n     * Set the cursor hint\n     *\n     * @param hint - If specified, then the query system will only consider plans using the hinted index.\n     */ hint(hint) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].hint = hint;\n        return this;\n    }\n    /**\n     * Set the cursor min\n     *\n     * @param min - Specify a $min value to specify the inclusive lower bound for a specific index in order to constrain the results of find(). The $min specifies the lower bound for all keys of a specific index in order.\n     */ min(min) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].min = min;\n        return this;\n    }\n    /**\n     * Set the cursor max\n     *\n     * @param max - Specify a $max value to specify the exclusive upper bound for a specific index in order to constrain the results of find(). The $max specifies the upper bound for all keys of a specific index in order.\n     */ max(max) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].max = max;\n        return this;\n    }\n    /**\n     * Set the cursor returnKey.\n     * If set to true, modifies the cursor to only return the index field or fields for the results of the query, rather than documents.\n     * If set to true and the query does not use an index to perform the read operation, the returned documents will not contain any fields.\n     *\n     * @param value - the returnKey value.\n     */ returnKey(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].returnKey = value;\n        return this;\n    }\n    /**\n     * Modifies the output of a query by adding a field $recordId to matching documents. $recordId is the internal key which uniquely identifies a document in a collection.\n     *\n     * @param value - The $showDiskLoc option has now been deprecated and replaced with the showRecordId field. $showDiskLoc will still be accepted for OP_QUERY stye find.\n     */ showRecordId(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].showRecordId = value;\n        return this;\n    }\n    /**\n     * Add a query modifier to the cursor query\n     *\n     * @param name - The query modifier (must start with $, such as $orderby etc)\n     * @param value - The modifier value.\n     */ addQueryModifier(name, value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        if (name[0] !== \"$\") {\n            throw new error_1.MongoInvalidArgumentError(`${name} is not a valid query modifier`);\n        }\n        // Strip of the $\n        const field = name.substr(1);\n        // NOTE: consider some TS magic for this\n        switch(field){\n            case \"comment\":\n                this[kBuiltOptions].comment = value;\n                break;\n            case \"explain\":\n                this[kBuiltOptions].explain = value;\n                break;\n            case \"hint\":\n                this[kBuiltOptions].hint = value;\n                break;\n            case \"max\":\n                this[kBuiltOptions].max = value;\n                break;\n            case \"maxTimeMS\":\n                this[kBuiltOptions].maxTimeMS = value;\n                break;\n            case \"min\":\n                this[kBuiltOptions].min = value;\n                break;\n            case \"orderby\":\n                this[kBuiltOptions].sort = (0, sort_1.formatSort)(value);\n                break;\n            case \"query\":\n                this[kFilter] = value;\n                break;\n            case \"returnKey\":\n                this[kBuiltOptions].returnKey = value;\n                break;\n            case \"showDiskLoc\":\n                this[kBuiltOptions].showRecordId = value;\n                break;\n            default:\n                throw new error_1.MongoInvalidArgumentError(`Invalid query modifier: ${name}`);\n        }\n        return this;\n    }\n    /**\n     * Add a comment to the cursor query allowing for tracking the comment in the log.\n     *\n     * @param value - The comment attached to this query.\n     */ comment(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].comment = value;\n        return this;\n    }\n    /**\n     * Set a maxAwaitTimeMS on a tailing cursor query to allow to customize the timeout value for the option awaitData (Only supported on MongoDB 3.2 or higher, ignored otherwise)\n     *\n     * @param value - Number of milliseconds to wait before aborting the tailed query.\n     */ maxAwaitTimeMS(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        if (typeof value !== \"number\") {\n            throw new error_1.MongoInvalidArgumentError(\"Argument for maxAwaitTimeMS must be a number\");\n        }\n        this[kBuiltOptions].maxAwaitTimeMS = value;\n        return this;\n    }\n    /**\n     * Set a maxTimeMS on the cursor query, allowing for hard timeout limits on queries (Only supported on MongoDB 2.6 or higher)\n     *\n     * @param value - Number of milliseconds to wait before aborting the query.\n     */ maxTimeMS(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        if (typeof value !== \"number\") {\n            throw new error_1.MongoInvalidArgumentError(\"Argument for maxTimeMS must be a number\");\n        }\n        this[kBuiltOptions].maxTimeMS = value;\n        return this;\n    }\n    /**\n     * Add a project stage to the aggregation pipeline\n     *\n     * @remarks\n     * In order to strictly type this function you must provide an interface\n     * that represents the effect of your projection on the result documents.\n     *\n     * By default chaining a projection to your cursor changes the returned type to the generic\n     * {@link Document} type.\n     * You should specify a parameterized type to have assertions on your final results.\n     *\n     * @example\n     * ```typescript\n     * // Best way\n     * const docs: FindCursor<{ a: number }> = cursor.project<{ a: number }>({ _id: 0, a: true });\n     * // Flexible way\n     * const docs: FindCursor<Document> = cursor.project({ _id: 0, a: true });\n     * ```\n     *\n     * @remarks\n     *\n     * **Note for Typescript Users:** adding a transform changes the return type of the iteration of this cursor,\n     * it **does not** return a new instance of a cursor. This means when calling project,\n     * you should always assign the result to a new variable in order to get a correctly typed cursor variable.\n     * Take note of the following example:\n     *\n     * @example\n     * ```typescript\n     * const cursor: FindCursor<{ a: number; b: string }> = coll.find();\n     * const projectCursor = cursor.project<{ a: number }>({ _id: 0, a: true });\n     * const aPropOnlyArray: {a: number}[] = await projectCursor.toArray();\n     *\n     * // or always use chaining and save the final cursor\n     *\n     * const cursor = coll.find().project<{ a: string }>({\n     *   _id: 0,\n     *   a: { $convert: { input: '$a', to: 'string' }\n     * }});\n     * ```\n     */ project(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].projection = value;\n        return this;\n    }\n    /**\n     * Sets the sort order of the cursor query.\n     *\n     * @param sort - The key or keys set for the sort.\n     * @param direction - The direction of the sorting (1 or -1).\n     */ sort(sort, direction) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        if (this[kBuiltOptions].tailable) {\n            throw new error_1.MongoTailableCursorError(\"Tailable cursor does not support sorting\");\n        }\n        this[kBuiltOptions].sort = (0, sort_1.formatSort)(sort, direction);\n        return this;\n    }\n    /**\n     * Allows disk use for blocking sort operations exceeding 100MB memory. (MongoDB 3.2 or higher)\n     *\n     * @remarks\n     * {@link https://www.mongodb.com/docs/manual/reference/command/find/#find-cmd-allowdiskuse | find command allowDiskUse documentation}\n     */ allowDiskUse(allow = true) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        if (!this[kBuiltOptions].sort) {\n            throw new error_1.MongoInvalidArgumentError('Option \"allowDiskUse\" requires a sort specification');\n        }\n        // As of 6.0 the default is true. This allows users to get back to the old behavior.\n        if (!allow) {\n            this[kBuiltOptions].allowDiskUse = false;\n            return this;\n        }\n        this[kBuiltOptions].allowDiskUse = true;\n        return this;\n    }\n    /**\n     * Set the collation options for the cursor.\n     *\n     * @param value - The cursor collation options (MongoDB 3.4 or higher) settings for update operation (see 3.4 documentation for available fields).\n     */ collation(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].collation = value;\n        return this;\n    }\n    /**\n     * Set the limit for the cursor.\n     *\n     * @param value - The limit for the cursor query.\n     */ limit(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        if (this[kBuiltOptions].tailable) {\n            throw new error_1.MongoTailableCursorError(\"Tailable cursor does not support limit\");\n        }\n        if (typeof value !== \"number\") {\n            throw new error_1.MongoInvalidArgumentError('Operation \"limit\" requires an integer');\n        }\n        this[kBuiltOptions].limit = value;\n        return this;\n    }\n    /**\n     * Set the skip for the cursor.\n     *\n     * @param value - The skip for the cursor query.\n     */ skip(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        if (this[kBuiltOptions].tailable) {\n            throw new error_1.MongoTailableCursorError(\"Tailable cursor does not support skip\");\n        }\n        if (typeof value !== \"number\") {\n            throw new error_1.MongoInvalidArgumentError('Operation \"skip\" requires an integer');\n        }\n        this[kBuiltOptions].skip = value;\n        return this;\n    }\n}\nexports.FindCursor = FindCursor; //# sourceMappingURL=find_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2ZpbmRfY3Vyc29yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBR0EsYUFBYSxHQUFHLEtBQUs7QUFDMUMsTUFBTUksVUFBVUMsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUMsVUFBVUQsbUJBQU9BLENBQUMsaUZBQXFCO0FBQzdDLE1BQU1FLHNCQUFzQkYsbUJBQU9BLENBQUMseUdBQWlDO0FBQ3JFLE1BQU1HLFNBQVNILG1CQUFPQSxDQUFDLCtFQUFvQjtBQUMzQyxNQUFNSSxTQUFTSixtQkFBT0EsQ0FBQyx5REFBUztBQUNoQyxNQUFNSyxVQUFVTCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNTSxvQkFBb0JOLG1CQUFPQSxDQUFDLHFGQUFtQjtBQUNyRCxjQUFjLEdBQ2QsTUFBTU8sVUFBVUMsT0FBTztBQUN2QixjQUFjLEdBQ2QsTUFBTUMsZUFBZUQsT0FBTztBQUM1QixjQUFjLEdBQ2QsTUFBTUUsZ0JBQWdCRixPQUFPO0FBQzdCLHFDQUFxQyxHQUNyQ2IsYUFBYSxHQUFHO0lBQ1o7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0g7QUFDRCxZQUFZLEdBQ1osTUFBTUUsbUJBQW1CUyxrQkFBa0JLLGNBQWM7SUFDckQsY0FBYyxHQUNkQyxZQUFZQyxNQUFNLEVBQUVDLFNBQVMsRUFBRUMsU0FBUyxDQUFDLENBQUMsRUFBRUMsVUFBVSxDQUFDLENBQUMsQ0FBRTtRQUN0RCxLQUFLLENBQUNILFFBQVFDLFdBQVdFO1FBQ3pCLElBQUksQ0FBQ1QsUUFBUSxHQUFHUTtRQUNoQixJQUFJLENBQUNMLGNBQWMsR0FBR007UUFDdEIsSUFBSUEsUUFBUUMsSUFBSSxJQUFJLE1BQU07WUFDdEIsSUFBSSxDQUFDUCxjQUFjLENBQUNPLElBQUksR0FBRyxDQUFDLEdBQUdiLE9BQU9jLFVBQVUs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UXNFLHdCQUF3QixDQUFDO1FBQy9DO1FBQ0EsSUFBSSxPQUFPekUsVUFBVSxVQUFVO1lBQzNCLE1BQU0sSUFBSUcsUUFBUWlELHlCQUF5QixDQUFDO1FBQ2hEO1FBQ0EsSUFBSSxDQUFDdEMsY0FBYyxDQUFDZ0MsS0FBSyxHQUFHOUM7UUFDNUIsT0FBTyxJQUFJO0lBQ2Y7SUFDQTs7OztLQUlDLEdBQ0Q2RSxLQUFLN0UsS0FBSyxFQUFFO1FBQ1AsSUFBR1Usa0JBQWtCOEMsbUJBQW1CLEVBQUUsSUFBSTtRQUMvQyxJQUFJLElBQUksQ0FBQzFDLGNBQWMsQ0FBQzBELFFBQVEsRUFBRTtZQUM5QixNQUFNLElBQUlyRSxRQUFRc0Usd0JBQXdCLENBQUM7UUFDL0M7UUFDQSxJQUFJLE9BQU96RSxVQUFVLFVBQVU7WUFDM0IsTUFBTSxJQUFJRyxRQUFRaUQseUJBQXlCLENBQUM7UUFDaEQ7UUFDQSxJQUFJLENBQUN0QyxjQUFjLENBQUMrRCxJQUFJLEdBQUc3RTtRQUMzQixPQUFPLElBQUk7SUFDZjtBQUNKO0FBQ0FELGtCQUFrQixHQUFHRSxZQUNyQix1Q0FBdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2ZpbmRfY3Vyc29yLmpzP2JjZmEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZpbmRDdXJzb3IgPSBleHBvcnRzLkZMQUdTID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IGNvdW50XzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9jb3VudFwiKTtcbmNvbnN0IGV4ZWN1dGVfb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9leGVjdXRlX29wZXJhdGlvblwiKTtcbmNvbnN0IGZpbmRfMSA9IHJlcXVpcmUoXCIuLi9vcGVyYXRpb25zL2ZpbmRcIik7XG5jb25zdCBzb3J0XzEgPSByZXF1aXJlKFwiLi4vc29ydFwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBhYnN0cmFjdF9jdXJzb3JfMSA9IHJlcXVpcmUoXCIuL2Fic3RyYWN0X2N1cnNvclwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtGaWx0ZXIgPSBTeW1ib2woJ2ZpbHRlcicpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga051bVJldHVybmVkID0gU3ltYm9sKCdudW1SZXR1cm5lZCcpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0J1aWx0T3B0aW9ucyA9IFN5bWJvbCgnYnVpbHRPcHRpb25zJyk7XG4vKiogQHB1YmxpYyBGbGFncyBhbGxvd2VkIGZvciBjdXJzb3IgKi9cbmV4cG9ydHMuRkxBR1MgPSBbXG4gICAgJ3RhaWxhYmxlJyxcbiAgICAnb3Bsb2dSZXBsYXknLFxuICAgICdub0N1cnNvclRpbWVvdXQnLFxuICAgICdhd2FpdERhdGEnLFxuICAgICdleGhhdXN0JyxcbiAgICAncGFydGlhbCdcbl07XG4vKiogQHB1YmxpYyAqL1xuY2xhc3MgRmluZEN1cnNvciBleHRlbmRzIGFic3RyYWN0X2N1cnNvcl8xLkFic3RyYWN0Q3Vyc29yIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IoY2xpZW50LCBuYW1lc3BhY2UsIGZpbHRlciA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoY2xpZW50LCBuYW1lc3BhY2UsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzW2tGaWx0ZXJdID0gZmlsdGVyO1xuICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdID0gb3B0aW9ucztcbiAgICAgICAgaWYgKG9wdGlvbnMuc29ydCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLnNvcnQgPSAoMCwgc29ydF8xLmZvcm1hdFNvcnQpKG9wdGlvbnMuc29ydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGNvbnN0IGNsb25lZE9wdGlvbnMgPSAoMCwgdXRpbHNfMS5tZXJnZU9wdGlvbnMpKHt9LCB0aGlzW2tCdWlsdE9wdGlvbnNdKTtcbiAgICAgICAgZGVsZXRlIGNsb25lZE9wdGlvbnMuc2Vzc2lvbjtcbiAgICAgICAgcmV0dXJuIG5ldyBGaW5kQ3Vyc29yKHRoaXMuY2xpZW50LCB0aGlzLm5hbWVzcGFjZSwgdGhpc1trRmlsdGVyXSwge1xuICAgICAgICAgICAgLi4uY2xvbmVkT3B0aW9uc1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWFwKHRyYW5zZm9ybSkge1xuICAgICAgICByZXR1cm4gc3VwZXIubWFwKHRyYW5zZm9ybSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfaW5pdGlhbGl6ZShzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBmaW5kT3BlcmF0aW9uID0gbmV3IGZpbmRfMS5GaW5kT3BlcmF0aW9uKHVuZGVmaW5lZCwgdGhpcy5uYW1lc3BhY2UsIHRoaXNba0ZpbHRlcl0sIHtcbiAgICAgICAgICAgIC4uLnRoaXNba0J1aWx0T3B0aW9uc10sXG4gICAgICAgICAgICAuLi50aGlzLmN1cnNvck9wdGlvbnMsXG4gICAgICAgICAgICBzZXNzaW9uXG4gICAgICAgIH0pO1xuICAgICAgICAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgZmluZE9wZXJhdGlvbiwgKGVyciwgcmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIgfHwgcmVzcG9uc2UgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIC8vIFRPRE86IFdlIG9ubHkgbmVlZCB0aGlzIGZvciBsZWdhY3kgcXVlcmllcyB0aGF0IGRvIG5vdCBzdXBwb3J0IGBsaW1pdGAsIG1heWJlXG4gICAgICAgICAgICAvLyAgICAgICB0aGUgdmFsdWUgc2hvdWxkIG9ubHkgYmUgc2F2ZWQgaW4gdGhvc2UgY2FzZXMuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgdGhpc1trTnVtUmV0dXJuZWRdID0gcmVzcG9uc2UuY3Vyc29yLmZpcnN0QmF0Y2gubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpc1trTnVtUmV0dXJuZWRdID0gcmVzcG9uc2UuZG9jdW1lbnRzID8gcmVzcG9uc2UuZG9jdW1lbnRzLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUT0RPOiBOT0RFLTI4ODJcbiAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwgeyBzZXJ2ZXI6IGZpbmRPcGVyYXRpb24uc2VydmVyLCBzZXNzaW9uLCByZXNwb25zZSB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfZ2V0TW9yZShiYXRjaFNpemUsIGNhbGxiYWNrKSB7XG4gICAgICAgIC8vIE5PVEU6IHRoaXMgaXMgdG8gc3VwcG9ydCBjbGllbnQgcHJvdmlkZWQgbGltaXRzIGluIHByZS1jb21tYW5kIHNlcnZlcnNcbiAgICAgICAgY29uc3QgbnVtUmV0dXJuZWQgPSB0aGlzW2tOdW1SZXR1cm5lZF07XG4gICAgICAgIGlmIChudW1SZXR1cm5lZCkge1xuICAgICAgICAgICAgY29uc3QgbGltaXQgPSB0aGlzW2tCdWlsdE9wdGlvbnNdLmxpbWl0O1xuICAgICAgICAgICAgYmF0Y2hTaXplID1cbiAgICAgICAgICAgICAgICBsaW1pdCAmJiBsaW1pdCA+IDAgJiYgbnVtUmV0dXJuZWQgKyBiYXRjaFNpemUgPiBsaW1pdCA/IGxpbWl0IC0gbnVtUmV0dXJuZWQgOiBiYXRjaFNpemU7XG4gICAgICAgICAgICBpZiAoYmF0Y2hTaXplIDw9IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCkuZmluYWxseSgoKSA9PiBjYWxsYmFjaygpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIuX2dldE1vcmUoYmF0Y2hTaXplLCAoZXJyLCByZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycilcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIC8vIFRPRE86IHdyYXAgdGhpcyBpbiBzb21lIGxvZ2ljIHRvIHByZXZlbnQgaXQgZnJvbSBoYXBwZW5pbmcgaWYgd2UgZG9uJ3QgbmVlZCB0aGlzIHN1cHBvcnRcbiAgICAgICAgICAgIGlmIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHRoaXNba051bVJldHVybmVkXSA9IHRoaXNba051bVJldHVybmVkXSArIHJlc3BvbnNlLmN1cnNvci5uZXh0QmF0Y2gubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCByZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvdW50IG9mIGRvY3VtZW50cyBmb3IgdGhpcyBjdXJzb3JcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYGNvbGxlY3Rpb24uZXN0aW1hdGVkRG9jdW1lbnRDb3VudGAgb3IgYGNvbGxlY3Rpb24uY291bnREb2N1bWVudHNgIGluc3RlYWRcbiAgICAgKi9cbiAgICBhc3luYyBjb3VudChvcHRpb25zKSB7XG4gICAgICAgICgwLCB1dGlsc18xLmVtaXRXYXJuaW5nT25jZSkoJ2N1cnNvci5jb3VudCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiwgcGxlYXNlIHVzZSBgY29sbGVjdGlvbi5lc3RpbWF0ZWREb2N1bWVudENvdW50YCBvciBgY29sbGVjdGlvbi5jb3VudERvY3VtZW50c2AgaW5zdGVhZCAnKTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0ludmFsaWQgZmlyc3QgcGFyYW1ldGVyIHRvIGNvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgY291bnRfMS5Db3VudE9wZXJhdGlvbih0aGlzLm5hbWVzcGFjZSwgdGhpc1trRmlsdGVyXSwge1xuICAgICAgICAgICAgLi4udGhpc1trQnVpbHRPcHRpb25zXSxcbiAgICAgICAgICAgIC4uLnRoaXMuY3Vyc29yT3B0aW9ucyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnNcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKiogRXhlY3V0ZSB0aGUgZXhwbGFpbiBmb3IgdGhlIGN1cnNvciAqL1xuICAgIGFzeW5jIGV4cGxhaW4odmVyYm9zaXR5KSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGZpbmRfMS5GaW5kT3BlcmF0aW9uKHVuZGVmaW5lZCwgdGhpcy5uYW1lc3BhY2UsIHRoaXNba0ZpbHRlcl0sIHtcbiAgICAgICAgICAgIC4uLnRoaXNba0J1aWx0T3B0aW9uc10sXG4gICAgICAgICAgICAuLi50aGlzLmN1cnNvck9wdGlvbnMsXG4gICAgICAgICAgICBleHBsYWluOiB2ZXJib3NpdHkgPz8gdHJ1ZVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKiBTZXQgdGhlIGN1cnNvciBxdWVyeSAqL1xuICAgIGZpbHRlcihmaWx0ZXIpIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICB0aGlzW2tGaWx0ZXJdID0gZmlsdGVyO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjdXJzb3IgaGludFxuICAgICAqXG4gICAgICogQHBhcmFtIGhpbnQgLSBJZiBzcGVjaWZpZWQsIHRoZW4gdGhlIHF1ZXJ5IHN5c3RlbSB3aWxsIG9ubHkgY29uc2lkZXIgcGxhbnMgdXNpbmcgdGhlIGhpbnRlZCBpbmRleC5cbiAgICAgKi9cbiAgICBoaW50KGhpbnQpIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLmhpbnQgPSBoaW50O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjdXJzb3IgbWluXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWluIC0gU3BlY2lmeSBhICRtaW4gdmFsdWUgdG8gc3BlY2lmeSB0aGUgaW5jbHVzaXZlIGxvd2VyIGJvdW5kIGZvciBhIHNwZWNpZmljIGluZGV4IGluIG9yZGVyIHRvIGNvbnN0cmFpbiB0aGUgcmVzdWx0cyBvZiBmaW5kKCkuIFRoZSAkbWluIHNwZWNpZmllcyB0aGUgbG93ZXIgYm91bmQgZm9yIGFsbCBrZXlzIG9mIGEgc3BlY2lmaWMgaW5kZXggaW4gb3JkZXIuXG4gICAgICovXG4gICAgbWluKG1pbikge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIHRoaXNba0J1aWx0T3B0aW9uc10ubWluID0gbWluO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjdXJzb3IgbWF4XG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWF4IC0gU3BlY2lmeSBhICRtYXggdmFsdWUgdG8gc3BlY2lmeSB0aGUgZXhjbHVzaXZlIHVwcGVyIGJvdW5kIGZvciBhIHNwZWNpZmljIGluZGV4IGluIG9yZGVyIHRvIGNvbnN0cmFpbiB0aGUgcmVzdWx0cyBvZiBmaW5kKCkuIFRoZSAkbWF4IHNwZWNpZmllcyB0aGUgdXBwZXIgYm91bmQgZm9yIGFsbCBrZXlzIG9mIGEgc3BlY2lmaWMgaW5kZXggaW4gb3JkZXIuXG4gICAgICovXG4gICAgbWF4KG1heCkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIHRoaXNba0J1aWx0T3B0aW9uc10ubWF4ID0gbWF4O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjdXJzb3IgcmV0dXJuS2V5LlxuICAgICAqIElmIHNldCB0byB0cnVlLCBtb2RpZmllcyB0aGUgY3Vyc29yIHRvIG9ubHkgcmV0dXJuIHRoZSBpbmRleCBmaWVsZCBvciBmaWVsZHMgZm9yIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeSwgcmF0aGVyIHRoYW4gZG9jdW1lbnRzLlxuICAgICAqIElmIHNldCB0byB0cnVlIGFuZCB0aGUgcXVlcnkgZG9lcyBub3QgdXNlIGFuIGluZGV4IHRvIHBlcmZvcm0gdGhlIHJlYWQgb3BlcmF0aW9uLCB0aGUgcmV0dXJuZWQgZG9jdW1lbnRzIHdpbGwgbm90IGNvbnRhaW4gYW55IGZpZWxkcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIHRoZSByZXR1cm5LZXkgdmFsdWUuXG4gICAgICovXG4gICAgcmV0dXJuS2V5KHZhbHVlKSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5yZXR1cm5LZXkgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vZGlmaWVzIHRoZSBvdXRwdXQgb2YgYSBxdWVyeSBieSBhZGRpbmcgYSBmaWVsZCAkcmVjb3JkSWQgdG8gbWF0Y2hpbmcgZG9jdW1lbnRzLiAkcmVjb3JkSWQgaXMgdGhlIGludGVybmFsIGtleSB3aGljaCB1bmlxdWVseSBpZGVudGlmaWVzIGEgZG9jdW1lbnQgaW4gYSBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlICRzaG93RGlza0xvYyBvcHRpb24gaGFzIG5vdyBiZWVuIGRlcHJlY2F0ZWQgYW5kIHJlcGxhY2VkIHdpdGggdGhlIHNob3dSZWNvcmRJZCBmaWVsZC4gJHNob3dEaXNrTG9jIHdpbGwgc3RpbGwgYmUgYWNjZXB0ZWQgZm9yIE9QX1FVRVJZIHN0eWUgZmluZC5cbiAgICAgKi9cbiAgICBzaG93UmVjb3JkSWQodmFsdWUpIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLnNob3dSZWNvcmRJZCA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgcXVlcnkgbW9kaWZpZXIgdG8gdGhlIGN1cnNvciBxdWVyeVxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgLSBUaGUgcXVlcnkgbW9kaWZpZXIgKG11c3Qgc3RhcnQgd2l0aCAkLCBzdWNoIGFzICRvcmRlcmJ5IGV0YylcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgbW9kaWZpZXIgdmFsdWUuXG4gICAgICovXG4gICAgYWRkUXVlcnlNb2RpZmllcihuYW1lLCB2YWx1ZSkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIGlmIChuYW1lWzBdICE9PSAnJCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYCR7bmFtZX0gaXMgbm90IGEgdmFsaWQgcXVlcnkgbW9kaWZpZXJgKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTdHJpcCBvZiB0aGUgJFxuICAgICAgICBjb25zdCBmaWVsZCA9IG5hbWUuc3Vic3RyKDEpO1xuICAgICAgICAvLyBOT1RFOiBjb25zaWRlciBzb21lIFRTIG1hZ2ljIGZvciB0aGlzXG4gICAgICAgIHN3aXRjaCAoZmllbGQpIHtcbiAgICAgICAgICAgIGNhc2UgJ2NvbW1lbnQnOlxuICAgICAgICAgICAgICAgIHRoaXNba0J1aWx0T3B0aW9uc10uY29tbWVudCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZXhwbGFpbic6XG4gICAgICAgICAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5leHBsYWluID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdoaW50JzpcbiAgICAgICAgICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLmhpbnQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5tYXggPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21heFRpbWVNUyc6XG4gICAgICAgICAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5tYXhUaW1lTVMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5taW4gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ29yZGVyYnknOlxuICAgICAgICAgICAgICAgIHRoaXNba0J1aWx0T3B0aW9uc10uc29ydCA9ICgwLCBzb3J0XzEuZm9ybWF0U29ydCkodmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncXVlcnknOlxuICAgICAgICAgICAgICAgIHRoaXNba0ZpbHRlcl0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3JldHVybktleSc6XG4gICAgICAgICAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5yZXR1cm5LZXkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3Nob3dEaXNrTG9jJzpcbiAgICAgICAgICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLnNob3dSZWNvcmRJZCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBJbnZhbGlkIHF1ZXJ5IG1vZGlmaWVyOiAke25hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIGNvbW1lbnQgdG8gdGhlIGN1cnNvciBxdWVyeSBhbGxvd2luZyBmb3IgdHJhY2tpbmcgdGhlIGNvbW1lbnQgaW4gdGhlIGxvZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBjb21tZW50IGF0dGFjaGVkIHRvIHRoaXMgcXVlcnkuXG4gICAgICovXG4gICAgY29tbWVudCh2YWx1ZSkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIHRoaXNba0J1aWx0T3B0aW9uc10uY29tbWVudCA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGEgbWF4QXdhaXRUaW1lTVMgb24gYSB0YWlsaW5nIGN1cnNvciBxdWVyeSB0byBhbGxvdyB0byBjdXN0b21pemUgdGhlIHRpbWVvdXQgdmFsdWUgZm9yIHRoZSBvcHRpb24gYXdhaXREYXRhIChPbmx5IHN1cHBvcnRlZCBvbiBNb25nb0RCIDMuMiBvciBoaWdoZXIsIGlnbm9yZWQgb3RoZXJ3aXNlKVxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gTnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBhYm9ydGluZyB0aGUgdGFpbGVkIHF1ZXJ5LlxuICAgICAqL1xuICAgIG1heEF3YWl0VGltZU1TKHZhbHVlKSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0FyZ3VtZW50IGZvciBtYXhBd2FpdFRpbWVNUyBtdXN0IGJlIGEgbnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5tYXhBd2FpdFRpbWVNUyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGEgbWF4VGltZU1TIG9uIHRoZSBjdXJzb3IgcXVlcnksIGFsbG93aW5nIGZvciBoYXJkIHRpbWVvdXQgbGltaXRzIG9uIHF1ZXJpZXMgKE9ubHkgc3VwcG9ydGVkIG9uIE1vbmdvREIgMi42IG9yIGhpZ2hlcilcbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIE51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdCBiZWZvcmUgYWJvcnRpbmcgdGhlIHF1ZXJ5LlxuICAgICAqL1xuICAgIG1heFRpbWVNUyh2YWx1ZSkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdBcmd1bWVudCBmb3IgbWF4VGltZU1TIG11c3QgYmUgYSBudW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLm1heFRpbWVNUyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgcHJvamVjdCBzdGFnZSB0byB0aGUgYWdncmVnYXRpb24gcGlwZWxpbmVcbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogSW4gb3JkZXIgdG8gc3RyaWN0bHkgdHlwZSB0aGlzIGZ1bmN0aW9uIHlvdSBtdXN0IHByb3ZpZGUgYW4gaW50ZXJmYWNlXG4gICAgICogdGhhdCByZXByZXNlbnRzIHRoZSBlZmZlY3Qgb2YgeW91ciBwcm9qZWN0aW9uIG9uIHRoZSByZXN1bHQgZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCBjaGFpbmluZyBhIHByb2plY3Rpb24gdG8geW91ciBjdXJzb3IgY2hhbmdlcyB0aGUgcmV0dXJuZWQgdHlwZSB0byB0aGUgZ2VuZXJpY1xuICAgICAqIHtAbGluayBEb2N1bWVudH0gdHlwZS5cbiAgICAgKiBZb3Ugc2hvdWxkIHNwZWNpZnkgYSBwYXJhbWV0ZXJpemVkIHR5cGUgdG8gaGF2ZSBhc3NlcnRpb25zIG9uIHlvdXIgZmluYWwgcmVzdWx0cy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIC8vIEJlc3Qgd2F5XG4gICAgICogY29uc3QgZG9jczogRmluZEN1cnNvcjx7IGE6IG51bWJlciB9PiA9IGN1cnNvci5wcm9qZWN0PHsgYTogbnVtYmVyIH0+KHsgX2lkOiAwLCBhOiB0cnVlIH0pO1xuICAgICAqIC8vIEZsZXhpYmxlIHdheVxuICAgICAqIGNvbnN0IGRvY3M6IEZpbmRDdXJzb3I8RG9jdW1lbnQ+ID0gY3Vyc29yLnByb2plY3QoeyBfaWQ6IDAsIGE6IHRydWUgfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqXG4gICAgICogKipOb3RlIGZvciBUeXBlc2NyaXB0IFVzZXJzOioqIGFkZGluZyBhIHRyYW5zZm9ybSBjaGFuZ2VzIHRoZSByZXR1cm4gdHlwZSBvZiB0aGUgaXRlcmF0aW9uIG9mIHRoaXMgY3Vyc29yLFxuICAgICAqIGl0ICoqZG9lcyBub3QqKiByZXR1cm4gYSBuZXcgaW5zdGFuY2Ugb2YgYSBjdXJzb3IuIFRoaXMgbWVhbnMgd2hlbiBjYWxsaW5nIHByb2plY3QsXG4gICAgICogeW91IHNob3VsZCBhbHdheXMgYXNzaWduIHRoZSByZXN1bHQgdG8gYSBuZXcgdmFyaWFibGUgaW4gb3JkZXIgdG8gZ2V0IGEgY29ycmVjdGx5IHR5cGVkIGN1cnNvciB2YXJpYWJsZS5cbiAgICAgKiBUYWtlIG5vdGUgb2YgdGhlIGZvbGxvd2luZyBleGFtcGxlOlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogY29uc3QgY3Vyc29yOiBGaW5kQ3Vyc29yPHsgYTogbnVtYmVyOyBiOiBzdHJpbmcgfT4gPSBjb2xsLmZpbmQoKTtcbiAgICAgKiBjb25zdCBwcm9qZWN0Q3Vyc29yID0gY3Vyc29yLnByb2plY3Q8eyBhOiBudW1iZXIgfT4oeyBfaWQ6IDAsIGE6IHRydWUgfSk7XG4gICAgICogY29uc3QgYVByb3BPbmx5QXJyYXk6IHthOiBudW1iZXJ9W10gPSBhd2FpdCBwcm9qZWN0Q3Vyc29yLnRvQXJyYXkoKTtcbiAgICAgKlxuICAgICAqIC8vIG9yIGFsd2F5cyB1c2UgY2hhaW5pbmcgYW5kIHNhdmUgdGhlIGZpbmFsIGN1cnNvclxuICAgICAqXG4gICAgICogY29uc3QgY3Vyc29yID0gY29sbC5maW5kKCkucHJvamVjdDx7IGE6IHN0cmluZyB9Pih7XG4gICAgICogICBfaWQ6IDAsXG4gICAgICogICBhOiB7ICRjb252ZXJ0OiB7IGlucHV0OiAnJGEnLCB0bzogJ3N0cmluZycgfVxuICAgICAqIH19KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBwcm9qZWN0KHZhbHVlKSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5wcm9qZWN0aW9uID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzb3J0IG9yZGVyIG9mIHRoZSBjdXJzb3IgcXVlcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc29ydCAtIFRoZSBrZXkgb3Iga2V5cyBzZXQgZm9yIHRoZSBzb3J0LlxuICAgICAqIEBwYXJhbSBkaXJlY3Rpb24gLSBUaGUgZGlyZWN0aW9uIG9mIHRoZSBzb3J0aW5nICgxIG9yIC0xKS5cbiAgICAgKi9cbiAgICBzb3J0KHNvcnQsIGRpcmVjdGlvbikge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIGlmICh0aGlzW2tCdWlsdE9wdGlvbnNdLnRhaWxhYmxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3IoJ1RhaWxhYmxlIGN1cnNvciBkb2VzIG5vdCBzdXBwb3J0IHNvcnRpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLnNvcnQgPSAoMCwgc29ydF8xLmZvcm1hdFNvcnQpKHNvcnQsIGRpcmVjdGlvbik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbGxvd3MgZGlzayB1c2UgZm9yIGJsb2NraW5nIHNvcnQgb3BlcmF0aW9ucyBleGNlZWRpbmcgMTAwTUIgbWVtb3J5LiAoTW9uZ29EQiAzLjIgb3IgaGlnaGVyKVxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL2NvbW1hbmQvZmluZC8jZmluZC1jbWQtYWxsb3dkaXNrdXNlIHwgZmluZCBjb21tYW5kIGFsbG93RGlza1VzZSBkb2N1bWVudGF0aW9ufVxuICAgICAqL1xuICAgIGFsbG93RGlza1VzZShhbGxvdyA9IHRydWUpIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXNba0J1aWx0T3B0aW9uc10uc29ydCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignT3B0aW9uIFwiYWxsb3dEaXNrVXNlXCIgcmVxdWlyZXMgYSBzb3J0IHNwZWNpZmljYXRpb24nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBcyBvZiA2LjAgdGhlIGRlZmF1bHQgaXMgdHJ1ZS4gVGhpcyBhbGxvd3MgdXNlcnMgdG8gZ2V0IGJhY2sgdG8gdGhlIG9sZCBiZWhhdmlvci5cbiAgICAgICAgaWYgKCFhbGxvdykge1xuICAgICAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5hbGxvd0Rpc2tVc2UgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNba0J1aWx0T3B0aW9uc10uYWxsb3dEaXNrVXNlID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29sbGF0aW9uIG9wdGlvbnMgZm9yIHRoZSBjdXJzb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgY3Vyc29yIGNvbGxhdGlvbiBvcHRpb25zIChNb25nb0RCIDMuNCBvciBoaWdoZXIpIHNldHRpbmdzIGZvciB1cGRhdGUgb3BlcmF0aW9uIChzZWUgMy40IGRvY3VtZW50YXRpb24gZm9yIGF2YWlsYWJsZSBmaWVsZHMpLlxuICAgICAqL1xuICAgIGNvbGxhdGlvbih2YWx1ZSkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIHRoaXNba0J1aWx0T3B0aW9uc10uY29sbGF0aW9uID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxpbWl0IGZvciB0aGUgY3Vyc29yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIGxpbWl0IGZvciB0aGUgY3Vyc29yIHF1ZXJ5LlxuICAgICAqL1xuICAgIGxpbWl0KHZhbHVlKSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXNba0J1aWx0T3B0aW9uc10udGFpbGFibGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvVGFpbGFibGVDdXJzb3JFcnJvcignVGFpbGFibGUgY3Vyc29yIGRvZXMgbm90IHN1cHBvcnQgbGltaXQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignT3BlcmF0aW9uIFwibGltaXRcIiByZXF1aXJlcyBhbiBpbnRlZ2VyJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5saW1pdCA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBza2lwIGZvciB0aGUgY3Vyc29yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHNraXAgZm9yIHRoZSBjdXJzb3IgcXVlcnkuXG4gICAgICovXG4gICAgc2tpcCh2YWx1ZSkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIGlmICh0aGlzW2tCdWlsdE9wdGlvbnNdLnRhaWxhYmxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3IoJ1RhaWxhYmxlIGN1cnNvciBkb2VzIG5vdCBzdXBwb3J0IHNraXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignT3BlcmF0aW9uIFwic2tpcFwiIHJlcXVpcmVzIGFuIGludGVnZXInKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLnNraXAgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuZXhwb3J0cy5GaW5kQ3Vyc29yID0gRmluZEN1cnNvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbmRfY3Vyc29yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkZpbmRDdXJzb3IiLCJGTEFHUyIsImVycm9yXzEiLCJyZXF1aXJlIiwiY291bnRfMSIsImV4ZWN1dGVfb3BlcmF0aW9uXzEiLCJmaW5kXzEiLCJzb3J0XzEiLCJ1dGlsc18xIiwiYWJzdHJhY3RfY3Vyc29yXzEiLCJrRmlsdGVyIiwiU3ltYm9sIiwia051bVJldHVybmVkIiwia0J1aWx0T3B0aW9ucyIsIkFic3RyYWN0Q3Vyc29yIiwiY29uc3RydWN0b3IiLCJjbGllbnQiLCJuYW1lc3BhY2UiLCJmaWx0ZXIiLCJvcHRpb25zIiwic29ydCIsImZvcm1hdFNvcnQiLCJjbG9uZSIsImNsb25lZE9wdGlvbnMiLCJtZXJnZU9wdGlvbnMiLCJzZXNzaW9uIiwibWFwIiwidHJhbnNmb3JtIiwiX2luaXRpYWxpemUiLCJjYWxsYmFjayIsImZpbmRPcGVyYXRpb24iLCJGaW5kT3BlcmF0aW9uIiwidW5kZWZpbmVkIiwiY3Vyc29yT3B0aW9ucyIsImV4ZWN1dGVPcGVyYXRpb24iLCJlcnIiLCJyZXNwb25zZSIsImN1cnNvciIsImZpcnN0QmF0Y2giLCJsZW5ndGgiLCJkb2N1bWVudHMiLCJzZXJ2ZXIiLCJfZ2V0TW9yZSIsImJhdGNoU2l6ZSIsIm51bVJldHVybmVkIiwibGltaXQiLCJjbG9zZSIsImZpbmFsbHkiLCJuZXh0QmF0Y2giLCJjb3VudCIsImVtaXRXYXJuaW5nT25jZSIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJDb3VudE9wZXJhdGlvbiIsImV4cGxhaW4iLCJ2ZXJib3NpdHkiLCJhc3NlcnRVbmluaXRpYWxpemVkIiwiaGludCIsIm1pbiIsIm1heCIsInJldHVybktleSIsInNob3dSZWNvcmRJZCIsImFkZFF1ZXJ5TW9kaWZpZXIiLCJuYW1lIiwiZmllbGQiLCJzdWJzdHIiLCJjb21tZW50IiwibWF4VGltZU1TIiwibWF4QXdhaXRUaW1lTVMiLCJwcm9qZWN0IiwicHJvamVjdGlvbiIsImRpcmVjdGlvbiIsInRhaWxhYmxlIiwiTW9uZ29UYWlsYWJsZUN1cnNvckVycm9yIiwiYWxsb3dEaXNrVXNlIiwiYWxsb3ciLCJjb2xsYXRpb24iLCJza2lwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/find_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/list_collections_cursor.js":
/*!********************************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/list_collections_cursor.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ListCollectionsCursor = void 0;\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst list_collections_1 = __webpack_require__(/*! ../operations/list_collections */ \"(ssr)/./node_modules/mongodb/lib/operations/list_collections.js\");\nconst abstract_cursor_1 = __webpack_require__(/*! ./abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\n/** @public */ class ListCollectionsCursor extends abstract_cursor_1.AbstractCursor {\n    constructor(db, filter, options){\n        super(db.client, db.s.namespace, options);\n        this.parent = db;\n        this.filter = filter;\n        this.options = options;\n    }\n    clone() {\n        return new ListCollectionsCursor(this.parent, this.filter, {\n            ...this.options,\n            ...this.cursorOptions\n        });\n    }\n    /** @internal */ _initialize(session, callback) {\n        const operation = new list_collections_1.ListCollectionsOperation(this.parent, this.filter, {\n            ...this.cursorOptions,\n            ...this.options,\n            session\n        });\n        (0, execute_operation_1.executeOperation)(this.parent.client, operation, (err, response)=>{\n            if (err || response == null) return callback(err);\n            // TODO: NODE-2882\n            callback(undefined, {\n                server: operation.server,\n                session,\n                response\n            });\n        });\n    }\n}\nexports.ListCollectionsCursor = ListCollectionsCursor; //# sourceMappingURL=list_collections_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2xpc3RfY29sbGVjdGlvbnNfY3Vyc29yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw2QkFBNkIsR0FBRyxLQUFLO0FBQ3JDLE1BQU1HLHNCQUFzQkMsbUJBQU9BLENBQUMseUdBQWlDO0FBQ3JFLE1BQU1DLHFCQUFxQkQsbUJBQU9BLENBQUMsdUdBQWdDO0FBQ25FLE1BQU1FLG9CQUFvQkYsbUJBQU9BLENBQUMscUZBQW1CO0FBQ3JELFlBQVksR0FDWixNQUFNRiw4QkFBOEJJLGtCQUFrQkMsY0FBYztJQUNoRUMsWUFBWUMsRUFBRSxFQUFFQyxNQUFNLEVBQUVDLE9BQU8sQ0FBRTtRQUM3QixLQUFLLENBQUNGLEdBQUdHLE1BQU0sRUFBRUgsR0FBR0ksQ0FBQyxDQUFDQyxTQUFTLEVBQUVIO1FBQ2pDLElBQUksQ0FBQ0ksTUFBTSxHQUFHTjtRQUNkLElBQUksQ0FBQ0MsTUFBTSxHQUFHQTtRQUNkLElBQUksQ0FBQ0MsT0FBTyxHQUFHQTtJQUNuQjtJQUNBSyxRQUFRO1FBQ0osT0FBTyxJQUFJZCxzQkFBc0IsSUFBSSxDQUFDYSxNQUFNLEVBQUUsSUFBSSxDQUFDTCxNQUFNLEVBQUU7WUFDdkQsR0FBRyxJQUFJLENBQUNDLE9BQU87WUFDZixHQUFHLElBQUksQ0FBQ00sYUFBYTtRQUN6QjtJQUNKO0lBQ0EsY0FBYyxHQUNkQyxZQUFZQyxPQUFPLEVBQUVDLFFBQVEsRUFBRTtRQUMzQixNQUFNQyxZQUFZLElBQUloQixtQkFBbUJpQix3QkFBd0IsQ0FBQyxJQUFJLENBQUNQLE1BQU0sRUFBRSxJQUFJLENBQUNMLE1BQU0sRUFBRTtZQUN4RixHQUFHLElBQUksQ0FBQ08sYUFBYTtZQUNyQixHQUFHLElBQUksQ0FBQ04sT0FBTztZQUNmUTtRQUNKO1FBQ0MsSUFBR2hCLG9CQUFvQm9CLGdCQUFnQixFQUFFLElBQUksQ0FBQ1IsTUFBTSxDQUFDSCxNQUFNLEVBQUVTLFdBQVcsQ0FBQ0csS0FBS0M7WUFDM0UsSUFBSUQsT0FBT0MsWUFBWSxNQUNuQixPQUFPTCxTQUFTSTtZQUNwQixrQkFBa0I7WUFDbEJKLFNBQVNNLFdBQVc7Z0JBQUVDLFFBQVFOLFVBQVVNLE1BQU07Z0JBQUVSO2dCQUFTTTtZQUFTO1FBQ3RFO0lBQ0o7QUFDSjtBQUNBekIsNkJBQTZCLEdBQUdFLHVCQUNoQyxtREFBbUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2xpc3RfY29sbGVjdGlvbnNfY3Vyc29yLmpzPzA3YTciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkxpc3RDb2xsZWN0aW9uc0N1cnNvciA9IHZvaWQgMDtcbmNvbnN0IGV4ZWN1dGVfb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9leGVjdXRlX29wZXJhdGlvblwiKTtcbmNvbnN0IGxpc3RfY29sbGVjdGlvbnNfMSA9IHJlcXVpcmUoXCIuLi9vcGVyYXRpb25zL2xpc3RfY29sbGVjdGlvbnNcIik7XG5jb25zdCBhYnN0cmFjdF9jdXJzb3JfMSA9IHJlcXVpcmUoXCIuL2Fic3RyYWN0X2N1cnNvclwiKTtcbi8qKiBAcHVibGljICovXG5jbGFzcyBMaXN0Q29sbGVjdGlvbnNDdXJzb3IgZXh0ZW5kcyBhYnN0cmFjdF9jdXJzb3JfMS5BYnN0cmFjdEN1cnNvciB7XG4gICAgY29uc3RydWN0b3IoZGIsIGZpbHRlciwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihkYi5jbGllbnQsIGRiLnMubmFtZXNwYWNlLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBkYjtcbiAgICAgICAgdGhpcy5maWx0ZXIgPSBmaWx0ZXI7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IExpc3RDb2xsZWN0aW9uc0N1cnNvcih0aGlzLnBhcmVudCwgdGhpcy5maWx0ZXIsIHtcbiAgICAgICAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgIC4uLnRoaXMuY3Vyc29yT3B0aW9uc1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9pbml0aWFsaXplKHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IG5ldyBsaXN0X2NvbGxlY3Rpb25zXzEuTGlzdENvbGxlY3Rpb25zT3BlcmF0aW9uKHRoaXMucGFyZW50LCB0aGlzLmZpbHRlciwge1xuICAgICAgICAgICAgLi4udGhpcy5jdXJzb3JPcHRpb25zLFxuICAgICAgICAgICAgLi4udGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgc2Vzc2lvblxuICAgICAgICB9KTtcbiAgICAgICAgKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5wYXJlbnQuY2xpZW50LCBvcGVyYXRpb24sIChlcnIsIHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyIHx8IHJlc3BvbnNlID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAvLyBUT0RPOiBOT0RFLTI4ODJcbiAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwgeyBzZXJ2ZXI6IG9wZXJhdGlvbi5zZXJ2ZXIsIHNlc3Npb24sIHJlc3BvbnNlIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkxpc3RDb2xsZWN0aW9uc0N1cnNvciA9IExpc3RDb2xsZWN0aW9uc0N1cnNvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpc3RfY29sbGVjdGlvbnNfY3Vyc29yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkxpc3RDb2xsZWN0aW9uc0N1cnNvciIsImV4ZWN1dGVfb3BlcmF0aW9uXzEiLCJyZXF1aXJlIiwibGlzdF9jb2xsZWN0aW9uc18xIiwiYWJzdHJhY3RfY3Vyc29yXzEiLCJBYnN0cmFjdEN1cnNvciIsImNvbnN0cnVjdG9yIiwiZGIiLCJmaWx0ZXIiLCJvcHRpb25zIiwiY2xpZW50IiwicyIsIm5hbWVzcGFjZSIsInBhcmVudCIsImNsb25lIiwiY3Vyc29yT3B0aW9ucyIsIl9pbml0aWFsaXplIiwic2Vzc2lvbiIsImNhbGxiYWNrIiwib3BlcmF0aW9uIiwiTGlzdENvbGxlY3Rpb25zT3BlcmF0aW9uIiwiZXhlY3V0ZU9wZXJhdGlvbiIsImVyciIsInJlc3BvbnNlIiwidW5kZWZpbmVkIiwic2VydmVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/list_collections_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/list_indexes_cursor.js":
/*!****************************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/list_indexes_cursor.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ListIndexesCursor = void 0;\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst indexes_1 = __webpack_require__(/*! ../operations/indexes */ \"(ssr)/./node_modules/mongodb/lib/operations/indexes.js\");\nconst abstract_cursor_1 = __webpack_require__(/*! ./abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\n/** @public */ class ListIndexesCursor extends abstract_cursor_1.AbstractCursor {\n    constructor(collection, options){\n        super(collection.client, collection.s.namespace, options);\n        this.parent = collection;\n        this.options = options;\n    }\n    clone() {\n        return new ListIndexesCursor(this.parent, {\n            ...this.options,\n            ...this.cursorOptions\n        });\n    }\n    /** @internal */ _initialize(session, callback) {\n        const operation = new indexes_1.ListIndexesOperation(this.parent, {\n            ...this.cursorOptions,\n            ...this.options,\n            session\n        });\n        (0, execute_operation_1.executeOperation)(this.parent.client, operation, (err, response)=>{\n            if (err || response == null) return callback(err);\n            // TODO: NODE-2882\n            callback(undefined, {\n                server: operation.server,\n                session,\n                response\n            });\n        });\n    }\n}\nexports.ListIndexesCursor = ListIndexesCursor; //# sourceMappingURL=list_indexes_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2xpc3RfaW5kZXhlc19jdXJzb3IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHlCQUF5QixHQUFHLEtBQUs7QUFDakMsTUFBTUcsc0JBQXNCQyxtQkFBT0EsQ0FBQyx5R0FBaUM7QUFDckUsTUFBTUMsWUFBWUQsbUJBQU9BLENBQUMscUZBQXVCO0FBQ2pELE1BQU1FLG9CQUFvQkYsbUJBQU9BLENBQUMscUZBQW1CO0FBQ3JELFlBQVksR0FDWixNQUFNRiwwQkFBMEJJLGtCQUFrQkMsY0FBYztJQUM1REMsWUFBWUMsVUFBVSxFQUFFQyxPQUFPLENBQUU7UUFDN0IsS0FBSyxDQUFDRCxXQUFXRSxNQUFNLEVBQUVGLFdBQVdHLENBQUMsQ0FBQ0MsU0FBUyxFQUFFSDtRQUNqRCxJQUFJLENBQUNJLE1BQU0sR0FBR0w7UUFDZCxJQUFJLENBQUNDLE9BQU8sR0FBR0E7SUFDbkI7SUFDQUssUUFBUTtRQUNKLE9BQU8sSUFBSWIsa0JBQWtCLElBQUksQ0FBQ1ksTUFBTSxFQUFFO1lBQ3RDLEdBQUcsSUFBSSxDQUFDSixPQUFPO1lBQ2YsR0FBRyxJQUFJLENBQUNNLGFBQWE7UUFDekI7SUFDSjtJQUNBLGNBQWMsR0FDZEMsWUFBWUMsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDM0IsTUFBTUMsWUFBWSxJQUFJZixVQUFVZ0Isb0JBQW9CLENBQUMsSUFBSSxDQUFDUCxNQUFNLEVBQUU7WUFDOUQsR0FBRyxJQUFJLENBQUNFLGFBQWE7WUFDckIsR0FBRyxJQUFJLENBQUNOLE9BQU87WUFDZlE7UUFDSjtRQUNDLElBQUdmLG9CQUFvQm1CLGdCQUFnQixFQUFFLElBQUksQ0FBQ1IsTUFBTSxDQUFDSCxNQUFNLEVBQUVTLFdBQVcsQ0FBQ0csS0FBS0M7WUFDM0UsSUFBSUQsT0FBT0MsWUFBWSxNQUNuQixPQUFPTCxTQUFTSTtZQUNwQixrQkFBa0I7WUFDbEJKLFNBQVNNLFdBQVc7Z0JBQUVDLFFBQVFOLFVBQVVNLE1BQU07Z0JBQUVSO2dCQUFTTTtZQUFTO1FBQ3RFO0lBQ0o7QUFDSjtBQUNBeEIseUJBQXlCLEdBQUdFLG1CQUM1QiwrQ0FBK0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2xpc3RfaW5kZXhlc19jdXJzb3IuanM/ODk1NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTGlzdEluZGV4ZXNDdXJzb3IgPSB2b2lkIDA7XG5jb25zdCBleGVjdXRlX29wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMvZXhlY3V0ZV9vcGVyYXRpb25cIik7XG5jb25zdCBpbmRleGVzXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9pbmRleGVzXCIpO1xuY29uc3QgYWJzdHJhY3RfY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9hYnN0cmFjdF9jdXJzb3JcIik7XG4vKiogQHB1YmxpYyAqL1xuY2xhc3MgTGlzdEluZGV4ZXNDdXJzb3IgZXh0ZW5kcyBhYnN0cmFjdF9jdXJzb3JfMS5BYnN0cmFjdEN1cnNvciB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihjb2xsZWN0aW9uLmNsaWVudCwgY29sbGVjdGlvbi5zLm5hbWVzcGFjZSwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMucGFyZW50ID0gY29sbGVjdGlvbjtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTGlzdEluZGV4ZXNDdXJzb3IodGhpcy5wYXJlbnQsIHtcbiAgICAgICAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgIC4uLnRoaXMuY3Vyc29yT3B0aW9uc1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9pbml0aWFsaXplKHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IG5ldyBpbmRleGVzXzEuTGlzdEluZGV4ZXNPcGVyYXRpb24odGhpcy5wYXJlbnQsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuY3Vyc29yT3B0aW9ucyxcbiAgICAgICAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgfSk7XG4gICAgICAgICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMucGFyZW50LmNsaWVudCwgb3BlcmF0aW9uLCAoZXJyLCByZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVyciB8fCByZXNwb25zZSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgLy8gVE9ETzogTk9ERS0yODgyXG4gICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIHsgc2VydmVyOiBvcGVyYXRpb24uc2VydmVyLCBzZXNzaW9uLCByZXNwb25zZSB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5MaXN0SW5kZXhlc0N1cnNvciA9IExpc3RJbmRleGVzQ3Vyc29yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGlzdF9pbmRleGVzX2N1cnNvci5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJMaXN0SW5kZXhlc0N1cnNvciIsImV4ZWN1dGVfb3BlcmF0aW9uXzEiLCJyZXF1aXJlIiwiaW5kZXhlc18xIiwiYWJzdHJhY3RfY3Vyc29yXzEiLCJBYnN0cmFjdEN1cnNvciIsImNvbnN0cnVjdG9yIiwiY29sbGVjdGlvbiIsIm9wdGlvbnMiLCJjbGllbnQiLCJzIiwibmFtZXNwYWNlIiwicGFyZW50IiwiY2xvbmUiLCJjdXJzb3JPcHRpb25zIiwiX2luaXRpYWxpemUiLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJvcGVyYXRpb24iLCJMaXN0SW5kZXhlc09wZXJhdGlvbiIsImV4ZWN1dGVPcGVyYXRpb24iLCJlcnIiLCJyZXNwb25zZSIsInVuZGVmaW5lZCIsInNlcnZlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/list_indexes_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/list_search_indexes_cursor.js":
/*!***********************************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/list_search_indexes_cursor.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ListSearchIndexesCursor = void 0;\nconst aggregation_cursor_1 = __webpack_require__(/*! ./aggregation_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/aggregation_cursor.js\");\n/** @public */ class ListSearchIndexesCursor extends aggregation_cursor_1.AggregationCursor {\n    /** @internal */ constructor({ fullNamespace: ns, client }, name, options = {}){\n        const pipeline = name == null ? [\n            {\n                $listSearchIndexes: {}\n            }\n        ] : [\n            {\n                $listSearchIndexes: {\n                    name\n                }\n            }\n        ];\n        super(client, ns, pipeline, options);\n    }\n}\nexports.ListSearchIndexesCursor = ListSearchIndexesCursor; //# sourceMappingURL=list_search_indexes_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2xpc3Rfc2VhcmNoX2luZGV4ZXNfY3Vyc29yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwrQkFBK0IsR0FBRyxLQUFLO0FBQ3ZDLE1BQU1HLHVCQUF1QkMsbUJBQU9BLENBQUMsMkZBQXNCO0FBQzNELFlBQVksR0FDWixNQUFNRixnQ0FBZ0NDLHFCQUFxQkUsaUJBQWlCO0lBQ3hFLGNBQWMsR0FDZEMsWUFBWSxFQUFFQyxlQUFlQyxFQUFFLEVBQUVDLE1BQU0sRUFBRSxFQUFFQyxJQUFJLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLENBQUU7UUFDM0QsTUFBTUMsV0FBV0YsUUFBUSxPQUFPO1lBQUM7Z0JBQUVHLG9CQUFvQixDQUFDO1lBQUU7U0FBRSxHQUFHO1lBQUM7Z0JBQUVBLG9CQUFvQjtvQkFBRUg7Z0JBQUs7WUFBRTtTQUFFO1FBQ2pHLEtBQUssQ0FBQ0QsUUFBUUQsSUFBSUksVUFBVUQ7SUFDaEM7QUFDSjtBQUNBWCwrQkFBK0IsR0FBR0UseUJBQ2xDLHNEQUFzRCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jdXJzb3IvbGlzdF9zZWFyY2hfaW5kZXhlc19jdXJzb3IuanM/NDg0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTGlzdFNlYXJjaEluZGV4ZXNDdXJzb3IgPSB2b2lkIDA7XG5jb25zdCBhZ2dyZWdhdGlvbl9jdXJzb3JfMSA9IHJlcXVpcmUoXCIuL2FnZ3JlZ2F0aW9uX2N1cnNvclwiKTtcbi8qKiBAcHVibGljICovXG5jbGFzcyBMaXN0U2VhcmNoSW5kZXhlc0N1cnNvciBleHRlbmRzIGFnZ3JlZ2F0aW9uX2N1cnNvcl8xLkFnZ3JlZ2F0aW9uQ3Vyc29yIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IoeyBmdWxsTmFtZXNwYWNlOiBucywgY2xpZW50IH0sIG5hbWUsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCBwaXBlbGluZSA9IG5hbWUgPT0gbnVsbCA/IFt7ICRsaXN0U2VhcmNoSW5kZXhlczoge30gfV0gOiBbeyAkbGlzdFNlYXJjaEluZGV4ZXM6IHsgbmFtZSB9IH1dO1xuICAgICAgICBzdXBlcihjbGllbnQsIG5zLCBwaXBlbGluZSwgb3B0aW9ucyk7XG4gICAgfVxufVxuZXhwb3J0cy5MaXN0U2VhcmNoSW5kZXhlc0N1cnNvciA9IExpc3RTZWFyY2hJbmRleGVzQ3Vyc29yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGlzdF9zZWFyY2hfaW5kZXhlc19jdXJzb3IuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiTGlzdFNlYXJjaEluZGV4ZXNDdXJzb3IiLCJhZ2dyZWdhdGlvbl9jdXJzb3JfMSIsInJlcXVpcmUiLCJBZ2dyZWdhdGlvbkN1cnNvciIsImNvbnN0cnVjdG9yIiwiZnVsbE5hbWVzcGFjZSIsIm5zIiwiY2xpZW50IiwibmFtZSIsIm9wdGlvbnMiLCJwaXBlbGluZSIsIiRsaXN0U2VhcmNoSW5kZXhlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/list_search_indexes_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/run_command_cursor.js":
/*!***************************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/run_command_cursor.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.RunCommandCursor = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst get_more_1 = __webpack_require__(/*! ../operations/get_more */ \"(ssr)/./node_modules/mongodb/lib/operations/get_more.js\");\nconst run_command_1 = __webpack_require__(/*! ../operations/run_command */ \"(ssr)/./node_modules/mongodb/lib/operations/run_command.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst abstract_cursor_1 = __webpack_require__(/*! ./abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\n/** @public */ class RunCommandCursor extends abstract_cursor_1.AbstractCursor {\n    /**\n     * Controls the `getMore.comment` field\n     * @param comment - any BSON value\n     */ setComment(comment) {\n        this.getMoreOptions.comment = comment;\n        return this;\n    }\n    /**\n     * Controls the `getMore.maxTimeMS` field. Only valid when cursor is tailable await\n     * @param maxTimeMS - the number of milliseconds to wait for new data\n     */ setMaxTimeMS(maxTimeMS) {\n        this.getMoreOptions.maxAwaitTimeMS = maxTimeMS;\n        return this;\n    }\n    /**\n     * Controls the `getMore.batchSize` field\n     * @param maxTimeMS - the number documents to return in the `nextBatch`\n     */ setBatchSize(batchSize) {\n        this.getMoreOptions.batchSize = batchSize;\n        return this;\n    }\n    /** Unsupported for RunCommandCursor */ clone() {\n        throw new error_1.MongoAPIError(\"Clone not supported, create a new cursor with db.runCursorCommand\");\n    }\n    /** Unsupported for RunCommandCursor: readConcern must be configured directly on command document */ withReadConcern(_) {\n        throw new error_1.MongoAPIError(\"RunCommandCursor does not support readConcern it must be attached to the command being run\");\n    }\n    /** Unsupported for RunCommandCursor: various cursor flags must be configured directly on command document */ addCursorFlag(_, __) {\n        throw new error_1.MongoAPIError(\"RunCommandCursor does not support cursor flags, they must be attached to the command being run\");\n    }\n    /** Unsupported for RunCommandCursor: maxTimeMS must be configured directly on command document */ maxTimeMS(_) {\n        throw new error_1.MongoAPIError(\"maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()\");\n    }\n    /** Unsupported for RunCommandCursor: batchSize must be configured directly on command document */ batchSize(_) {\n        throw new error_1.MongoAPIError(\"batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()\");\n    }\n    /** @internal */ constructor(db, command, options = {}){\n        super(db.client, (0, utils_1.ns)(db.namespace), options);\n        this.getMoreOptions = {};\n        this.db = db;\n        this.command = Object.freeze({\n            ...command\n        });\n    }\n    /** @internal */ _initialize(session, callback) {\n        const operation = new run_command_1.RunCommandOperation(this.db, this.command, {\n            ...this.cursorOptions,\n            session: session,\n            readPreference: this.cursorOptions.readPreference\n        });\n        (0, execute_operation_1.executeOperation)(this.client, operation).then((response)=>{\n            if (response.cursor == null) {\n                callback(new error_1.MongoUnexpectedServerResponseError(\"Expected server to respond with cursor\"));\n                return;\n            }\n            callback(undefined, {\n                server: operation.server,\n                session,\n                response\n            });\n        }, (err)=>callback(err));\n    }\n    /** @internal */ _getMore(_batchSize, callback) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const getMoreOperation = new get_more_1.GetMoreOperation(this.namespace, this.id, this.server, {\n            ...this.cursorOptions,\n            session: this.session,\n            ...this.getMoreOptions\n        });\n        (0, execute_operation_1.executeOperation)(this.client, getMoreOperation, callback);\n    }\n}\nexports.RunCommandCursor = RunCommandCursor; //# sourceMappingURL=run_command_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL3J1bl9jb21tYW5kX2N1cnNvci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsd0JBQXdCLEdBQUcsS0FBSztBQUNoQyxNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxzQkFBc0JELG1CQUFPQSxDQUFDLHlHQUFpQztBQUNyRSxNQUFNRSxhQUFhRixtQkFBT0EsQ0FBQyx1RkFBd0I7QUFDbkQsTUFBTUcsZ0JBQWdCSCxtQkFBT0EsQ0FBQyw2RkFBMkI7QUFDekQsTUFBTUksVUFBVUosbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUssb0JBQW9CTCxtQkFBT0EsQ0FBQyxxRkFBbUI7QUFDckQsWUFBWSxHQUNaLE1BQU1GLHlCQUF5Qk8sa0JBQWtCQyxjQUFjO0lBQzNEOzs7S0FHQyxHQUNEQyxXQUFXQyxPQUFPLEVBQUU7UUFDaEIsSUFBSSxDQUFDQyxjQUFjLENBQUNELE9BQU8sR0FBR0E7UUFDOUIsT0FBTyxJQUFJO0lBQ2Y7SUFDQTs7O0tBR0MsR0FDREUsYUFBYUMsU0FBUyxFQUFFO1FBQ3BCLElBQUksQ0FBQ0YsY0FBYyxDQUFDRyxjQUFjLEdBQUdEO1FBQ3JDLE9BQU8sSUFBSTtJQUNmO0lBQ0E7OztLQUdDLEdBQ0RFLGFBQWFDLFNBQVMsRUFBRTtRQUNwQixJQUFJLENBQUNMLGNBQWMsQ0FBQ0ssU0FBUyxHQUFHQTtRQUNoQyxPQUFPLElBQUk7SUFDZjtJQUNBLHFDQUFxQyxHQUNyQ0MsUUFBUTtRQUNKLE1BQU0sSUFBSWhCLFFBQVFpQixhQUFhLENBQUM7SUFDcEM7SUFDQSxrR0FBa0csR0FDbEdDLGdCQUFnQkMsQ0FBQyxFQUFFO1FBQ2YsTUFBTSxJQUFJbkIsUUFBUWlCLGFBQWEsQ0FBQztJQUNwQztJQUNBLDJHQUEyRyxHQUMzR0csY0FBY0QsQ0FBQyxFQUFFRSxFQUFFLEVBQUU7UUFDakIsTUFBTSxJQUFJckIsUUFBUWlCLGFBQWEsQ0FBQztJQUNwQztJQUNBLGdHQUFnRyxHQUNoR0wsVUFBVU8sQ0FBQyxFQUFFO1FBQ1QsTUFBTSxJQUFJbkIsUUFBUWlCLGFBQWEsQ0FBQztJQUNwQztJQUNBLGdHQUFnRyxHQUNoR0YsVUFBVUksQ0FBQyxFQUFFO1FBQ1QsTUFBTSxJQUFJbkIsUUFBUWlCLGFBQWEsQ0FBQztJQUNwQztJQUNBLGNBQWMsR0FDZEssWUFBWUMsRUFBRSxFQUFFQyxPQUFPLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLENBQUU7UUFDbkMsS0FBSyxDQUFDRixHQUFHRyxNQUFNLEVBQUUsQ0FBQyxHQUFHckIsUUFBUXNCLEVBQUUsRUFBRUosR0FBR0ssU0FBUyxHQUFHSDtRQUNoRCxJQUFJLENBQUNmLGNBQWMsR0FBRyxDQUFDO1FBQ3ZCLElBQUksQ0FBQ2EsRUFBRSxHQUFHQTtRQUNWLElBQUksQ0FBQ0MsT0FBTyxHQUFHN0IsT0FBT2tDLE1BQU0sQ0FBQztZQUFFLEdBQUdMLE9BQU87UUFBQztJQUM5QztJQUNBLGNBQWMsR0FDZE0sWUFBWUMsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDM0IsTUFBTUMsWUFBWSxJQUFJN0IsY0FBYzhCLG1CQUFtQixDQUFDLElBQUksQ0FBQ1gsRUFBRSxFQUFFLElBQUksQ0FBQ0MsT0FBTyxFQUFFO1lBQzNFLEdBQUcsSUFBSSxDQUFDVyxhQUFhO1lBQ3JCSixTQUFTQTtZQUNUSyxnQkFBZ0IsSUFBSSxDQUFDRCxhQUFhLENBQUNDLGNBQWM7UUFDckQ7UUFDQyxJQUFHbEMsb0JBQW9CbUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWCxNQUFNLEVBQUVPLFdBQVdLLElBQUksQ0FBQ0MsQ0FBQUE7WUFDbkUsSUFBSUEsU0FBU0MsTUFBTSxJQUFJLE1BQU07Z0JBQ3pCUixTQUFTLElBQUloQyxRQUFReUMsa0NBQWtDLENBQUM7Z0JBQ3hEO1lBQ0o7WUFDQVQsU0FBU1UsV0FBVztnQkFDaEJDLFFBQVFWLFVBQVVVLE1BQU07Z0JBQ3hCWjtnQkFDQVE7WUFDSjtRQUNKLEdBQUdLLENBQUFBLE1BQU9aLFNBQVNZO0lBQ3ZCO0lBQ0EsY0FBYyxHQUNkQyxTQUFTQyxVQUFVLEVBQUVkLFFBQVEsRUFBRTtRQUMzQixvRUFBb0U7UUFDcEUsTUFBTWUsbUJBQW1CLElBQUk1QyxXQUFXNkMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDcEIsU0FBUyxFQUFFLElBQUksQ0FBQ3FCLEVBQUUsRUFBRSxJQUFJLENBQUNOLE1BQU0sRUFBRTtZQUMzRixHQUFHLElBQUksQ0FBQ1IsYUFBYTtZQUNyQkosU0FBUyxJQUFJLENBQUNBLE9BQU87WUFDckIsR0FBRyxJQUFJLENBQUNyQixjQUFjO1FBQzFCO1FBQ0MsSUFBR1Isb0JBQW9CbUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWCxNQUFNLEVBQUVxQixrQkFBa0JmO0lBQzdFO0FBQ0o7QUFDQW5DLHdCQUF3QixHQUFHRSxrQkFDM0IsOENBQThDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2N1cnNvci9ydW5fY29tbWFuZF9jdXJzb3IuanM/ZDk3OCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUnVuQ29tbWFuZEN1cnNvciA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBleGVjdXRlX29wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMvZXhlY3V0ZV9vcGVyYXRpb25cIik7XG5jb25zdCBnZXRfbW9yZV8xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMvZ2V0X21vcmVcIik7XG5jb25zdCBydW5fY29tbWFuZF8xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMvcnVuX2NvbW1hbmRcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgYWJzdHJhY3RfY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9hYnN0cmFjdF9jdXJzb3JcIik7XG4vKiogQHB1YmxpYyAqL1xuY2xhc3MgUnVuQ29tbWFuZEN1cnNvciBleHRlbmRzIGFic3RyYWN0X2N1cnNvcl8xLkFic3RyYWN0Q3Vyc29yIHtcbiAgICAvKipcbiAgICAgKiBDb250cm9scyB0aGUgYGdldE1vcmUuY29tbWVudGAgZmllbGRcbiAgICAgKiBAcGFyYW0gY29tbWVudCAtIGFueSBCU09OIHZhbHVlXG4gICAgICovXG4gICAgc2V0Q29tbWVudChjb21tZW50KSB7XG4gICAgICAgIHRoaXMuZ2V0TW9yZU9wdGlvbnMuY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb250cm9scyB0aGUgYGdldE1vcmUubWF4VGltZU1TYCBmaWVsZC4gT25seSB2YWxpZCB3aGVuIGN1cnNvciBpcyB0YWlsYWJsZSBhd2FpdFxuICAgICAqIEBwYXJhbSBtYXhUaW1lTVMgLSB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB3YWl0IGZvciBuZXcgZGF0YVxuICAgICAqL1xuICAgIHNldE1heFRpbWVNUyhtYXhUaW1lTVMpIHtcbiAgICAgICAgdGhpcy5nZXRNb3JlT3B0aW9ucy5tYXhBd2FpdFRpbWVNUyA9IG1heFRpbWVNUztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnRyb2xzIHRoZSBgZ2V0TW9yZS5iYXRjaFNpemVgIGZpZWxkXG4gICAgICogQHBhcmFtIG1heFRpbWVNUyAtIHRoZSBudW1iZXIgZG9jdW1lbnRzIHRvIHJldHVybiBpbiB0aGUgYG5leHRCYXRjaGBcbiAgICAgKi9cbiAgICBzZXRCYXRjaFNpemUoYmF0Y2hTaXplKSB7XG4gICAgICAgIHRoaXMuZ2V0TW9yZU9wdGlvbnMuYmF0Y2hTaXplID0gYmF0Y2hTaXplO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIFVuc3VwcG9ydGVkIGZvciBSdW5Db21tYW5kQ3Vyc29yICovXG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoJ0Nsb25lIG5vdCBzdXBwb3J0ZWQsIGNyZWF0ZSBhIG5ldyBjdXJzb3Igd2l0aCBkYi5ydW5DdXJzb3JDb21tYW5kJyk7XG4gICAgfVxuICAgIC8qKiBVbnN1cHBvcnRlZCBmb3IgUnVuQ29tbWFuZEN1cnNvcjogcmVhZENvbmNlcm4gbXVzdCBiZSBjb25maWd1cmVkIGRpcmVjdGx5IG9uIGNvbW1hbmQgZG9jdW1lbnQgKi9cbiAgICB3aXRoUmVhZENvbmNlcm4oXykge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKCdSdW5Db21tYW5kQ3Vyc29yIGRvZXMgbm90IHN1cHBvcnQgcmVhZENvbmNlcm4gaXQgbXVzdCBiZSBhdHRhY2hlZCB0byB0aGUgY29tbWFuZCBiZWluZyBydW4nKTtcbiAgICB9XG4gICAgLyoqIFVuc3VwcG9ydGVkIGZvciBSdW5Db21tYW5kQ3Vyc29yOiB2YXJpb3VzIGN1cnNvciBmbGFncyBtdXN0IGJlIGNvbmZpZ3VyZWQgZGlyZWN0bHkgb24gY29tbWFuZCBkb2N1bWVudCAqL1xuICAgIGFkZEN1cnNvckZsYWcoXywgX18pIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignUnVuQ29tbWFuZEN1cnNvciBkb2VzIG5vdCBzdXBwb3J0IGN1cnNvciBmbGFncywgdGhleSBtdXN0IGJlIGF0dGFjaGVkIHRvIHRoZSBjb21tYW5kIGJlaW5nIHJ1bicpO1xuICAgIH1cbiAgICAvKiogVW5zdXBwb3J0ZWQgZm9yIFJ1bkNvbW1hbmRDdXJzb3I6IG1heFRpbWVNUyBtdXN0IGJlIGNvbmZpZ3VyZWQgZGlyZWN0bHkgb24gY29tbWFuZCBkb2N1bWVudCAqL1xuICAgIG1heFRpbWVNUyhfKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoJ21heFRpbWVNUyBtdXN0IGJlIGNvbmZpZ3VyZWQgb24gdGhlIGNvbW1hbmQgZG9jdW1lbnQgZGlyZWN0bHksIHRvIGNvbmZpZ3VyZSBnZXRNb3JlLm1heFRpbWVNUyB1c2UgY3Vyc29yLnNldE1heFRpbWVNUygpJyk7XG4gICAgfVxuICAgIC8qKiBVbnN1cHBvcnRlZCBmb3IgUnVuQ29tbWFuZEN1cnNvcjogYmF0Y2hTaXplIG11c3QgYmUgY29uZmlndXJlZCBkaXJlY3RseSBvbiBjb21tYW5kIGRvY3VtZW50ICovXG4gICAgYmF0Y2hTaXplKF8pIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignYmF0Y2hTaXplIG11c3QgYmUgY29uZmlndXJlZCBvbiB0aGUgY29tbWFuZCBkb2N1bWVudCBkaXJlY3RseSwgdG8gY29uZmlndXJlIGdldE1vcmUuYmF0Y2hTaXplIHVzZSBjdXJzb3Iuc2V0QmF0Y2hTaXplKCknKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKGRiLCBjb21tYW5kLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoZGIuY2xpZW50LCAoMCwgdXRpbHNfMS5ucykoZGIubmFtZXNwYWNlKSwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuZ2V0TW9yZU9wdGlvbnMgPSB7fTtcbiAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICB0aGlzLmNvbW1hbmQgPSBPYmplY3QuZnJlZXplKHsgLi4uY29tbWFuZCB9KTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9pbml0aWFsaXplKHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IG5ldyBydW5fY29tbWFuZF8xLlJ1bkNvbW1hbmRPcGVyYXRpb24odGhpcy5kYiwgdGhpcy5jb21tYW5kLCB7XG4gICAgICAgICAgICAuLi50aGlzLmN1cnNvck9wdGlvbnMsXG4gICAgICAgICAgICBzZXNzaW9uOiBzZXNzaW9uLFxuICAgICAgICAgICAgcmVhZFByZWZlcmVuY2U6IHRoaXMuY3Vyc29yT3B0aW9ucy5yZWFkUHJlZmVyZW5jZVxuICAgICAgICB9KTtcbiAgICAgICAgKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG9wZXJhdGlvbikudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuY3Vyc29yID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1VuZXhwZWN0ZWRTZXJ2ZXJSZXNwb25zZUVycm9yKCdFeHBlY3RlZCBzZXJ2ZXIgdG8gcmVzcG9uZCB3aXRoIGN1cnNvcicpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXI6IG9wZXJhdGlvbi5zZXJ2ZXIsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbixcbiAgICAgICAgICAgICAgICByZXNwb25zZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9nZXRNb3JlKF9iYXRjaFNpemUsIGNhbGxiYWNrKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgIGNvbnN0IGdldE1vcmVPcGVyYXRpb24gPSBuZXcgZ2V0X21vcmVfMS5HZXRNb3JlT3BlcmF0aW9uKHRoaXMubmFtZXNwYWNlLCB0aGlzLmlkLCB0aGlzLnNlcnZlciwge1xuICAgICAgICAgICAgLi4udGhpcy5jdXJzb3JPcHRpb25zLFxuICAgICAgICAgICAgc2Vzc2lvbjogdGhpcy5zZXNzaW9uLFxuICAgICAgICAgICAgLi4udGhpcy5nZXRNb3JlT3B0aW9uc1xuICAgICAgICB9KTtcbiAgICAgICAgKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIGdldE1vcmVPcGVyYXRpb24sIGNhbGxiYWNrKTtcbiAgICB9XG59XG5leHBvcnRzLlJ1bkNvbW1hbmRDdXJzb3IgPSBSdW5Db21tYW5kQ3Vyc29yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuX2NvbW1hbmRfY3Vyc29yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlJ1bkNvbW1hbmRDdXJzb3IiLCJlcnJvcl8xIiwicmVxdWlyZSIsImV4ZWN1dGVfb3BlcmF0aW9uXzEiLCJnZXRfbW9yZV8xIiwicnVuX2NvbW1hbmRfMSIsInV0aWxzXzEiLCJhYnN0cmFjdF9jdXJzb3JfMSIsIkFic3RyYWN0Q3Vyc29yIiwic2V0Q29tbWVudCIsImNvbW1lbnQiLCJnZXRNb3JlT3B0aW9ucyIsInNldE1heFRpbWVNUyIsIm1heFRpbWVNUyIsIm1heEF3YWl0VGltZU1TIiwic2V0QmF0Y2hTaXplIiwiYmF0Y2hTaXplIiwiY2xvbmUiLCJNb25nb0FQSUVycm9yIiwid2l0aFJlYWRDb25jZXJuIiwiXyIsImFkZEN1cnNvckZsYWciLCJfXyIsImNvbnN0cnVjdG9yIiwiZGIiLCJjb21tYW5kIiwib3B0aW9ucyIsImNsaWVudCIsIm5zIiwibmFtZXNwYWNlIiwiZnJlZXplIiwiX2luaXRpYWxpemUiLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJvcGVyYXRpb24iLCJSdW5Db21tYW5kT3BlcmF0aW9uIiwiY3Vyc29yT3B0aW9ucyIsInJlYWRQcmVmZXJlbmNlIiwiZXhlY3V0ZU9wZXJhdGlvbiIsInRoZW4iLCJyZXNwb25zZSIsImN1cnNvciIsIk1vbmdvVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlRXJyb3IiLCJ1bmRlZmluZWQiLCJzZXJ2ZXIiLCJlcnIiLCJfZ2V0TW9yZSIsIl9iYXRjaFNpemUiLCJnZXRNb3JlT3BlcmF0aW9uIiwiR2V0TW9yZU9wZXJhdGlvbiIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/run_command_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/db.js":
/*!****************************************!*\
  !*** ./node_modules/mongodb/lib/db.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Db = void 0;\nconst admin_1 = __webpack_require__(/*! ./admin */ \"(ssr)/./node_modules/mongodb/lib/admin.js\");\nconst bson_1 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst change_stream_1 = __webpack_require__(/*! ./change_stream */ \"(ssr)/./node_modules/mongodb/lib/change_stream.js\");\nconst collection_1 = __webpack_require__(/*! ./collection */ \"(ssr)/./node_modules/mongodb/lib/collection.js\");\nconst CONSTANTS = __webpack_require__(/*! ./constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst aggregation_cursor_1 = __webpack_require__(/*! ./cursor/aggregation_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/aggregation_cursor.js\");\nconst list_collections_cursor_1 = __webpack_require__(/*! ./cursor/list_collections_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/list_collections_cursor.js\");\nconst run_command_cursor_1 = __webpack_require__(/*! ./cursor/run_command_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/run_command_cursor.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst add_user_1 = __webpack_require__(/*! ./operations/add_user */ \"(ssr)/./node_modules/mongodb/lib/operations/add_user.js\");\nconst collections_1 = __webpack_require__(/*! ./operations/collections */ \"(ssr)/./node_modules/mongodb/lib/operations/collections.js\");\nconst create_collection_1 = __webpack_require__(/*! ./operations/create_collection */ \"(ssr)/./node_modules/mongodb/lib/operations/create_collection.js\");\nconst drop_1 = __webpack_require__(/*! ./operations/drop */ \"(ssr)/./node_modules/mongodb/lib/operations/drop.js\");\nconst execute_operation_1 = __webpack_require__(/*! ./operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst indexes_1 = __webpack_require__(/*! ./operations/indexes */ \"(ssr)/./node_modules/mongodb/lib/operations/indexes.js\");\nconst profiling_level_1 = __webpack_require__(/*! ./operations/profiling_level */ \"(ssr)/./node_modules/mongodb/lib/operations/profiling_level.js\");\nconst remove_user_1 = __webpack_require__(/*! ./operations/remove_user */ \"(ssr)/./node_modules/mongodb/lib/operations/remove_user.js\");\nconst rename_1 = __webpack_require__(/*! ./operations/rename */ \"(ssr)/./node_modules/mongodb/lib/operations/rename.js\");\nconst run_command_1 = __webpack_require__(/*! ./operations/run_command */ \"(ssr)/./node_modules/mongodb/lib/operations/run_command.js\");\nconst set_profiling_level_1 = __webpack_require__(/*! ./operations/set_profiling_level */ \"(ssr)/./node_modules/mongodb/lib/operations/set_profiling_level.js\");\nconst stats_1 = __webpack_require__(/*! ./operations/stats */ \"(ssr)/./node_modules/mongodb/lib/operations/stats.js\");\nconst read_concern_1 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst write_concern_1 = __webpack_require__(/*! ./write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\n// Allowed parameters\nconst DB_OPTIONS_ALLOW_LIST = [\n    \"writeConcern\",\n    \"readPreference\",\n    \"readPreferenceTags\",\n    \"native_parser\",\n    \"forceServerObjectId\",\n    \"pkFactory\",\n    \"serializeFunctions\",\n    \"raw\",\n    \"authSource\",\n    \"ignoreUndefined\",\n    \"readConcern\",\n    \"retryMiliSeconds\",\n    \"numberOfRetries\",\n    \"useBigInt64\",\n    \"promoteBuffers\",\n    \"promoteLongs\",\n    \"bsonRegExp\",\n    \"enableUtf8Validation\",\n    \"promoteValues\",\n    \"compression\",\n    \"retryWrites\"\n];\n/**\n * The **Db** class is a class that represents a MongoDB Database.\n * @public\n *\n * @example\n * ```ts\n * import { MongoClient } from 'mongodb';\n *\n * interface Pet {\n *   name: string;\n *   kind: 'dog' | 'cat' | 'fish';\n * }\n *\n * const client = new MongoClient('mongodb://localhost:27017');\n * const db = client.db();\n *\n * // Create a collection that validates our union\n * await db.createCollection<Pet>('pets', {\n *   validator: { $expr: { $in: ['$kind', ['dog', 'cat', 'fish']] } }\n * })\n * ```\n */ class Db {\n    /**\n     * Creates a new Db instance\n     *\n     * @param client - The MongoClient for the database.\n     * @param databaseName - The name of the database this instance represents.\n     * @param options - Optional settings for Db construction\n     */ constructor(client, databaseName, options){\n        options = options ?? {};\n        // Filter the options\n        options = (0, utils_1.filterOptions)(options, DB_OPTIONS_ALLOW_LIST);\n        // Ensure we have a valid db name\n        validateDatabaseName(databaseName);\n        // Internal state of the db object\n        this.s = {\n            // Options\n            options,\n            // Unpack read preference\n            readPreference: read_preference_1.ReadPreference.fromOptions(options),\n            // Merge bson options\n            bsonOptions: (0, bson_1.resolveBSONOptions)(options, client),\n            // Set up the primary key factory or fallback to ObjectId\n            pkFactory: options?.pkFactory ?? utils_1.DEFAULT_PK_FACTORY,\n            // ReadConcern\n            readConcern: read_concern_1.ReadConcern.fromOptions(options),\n            writeConcern: write_concern_1.WriteConcern.fromOptions(options),\n            // Namespace\n            namespace: new utils_1.MongoDBNamespace(databaseName)\n        };\n        this.client = client;\n    }\n    get databaseName() {\n        return this.s.namespace.db;\n    }\n    // Options\n    get options() {\n        return this.s.options;\n    }\n    /**\n     * Check if a secondary can be used (because the read preference is *not* set to primary)\n     */ get secondaryOk() {\n        return this.s.readPreference?.preference !== \"primary\" || false;\n    }\n    get readConcern() {\n        return this.s.readConcern;\n    }\n    /**\n     * The current readPreference of the Db. If not explicitly defined for\n     * this Db, will be inherited from the parent MongoClient\n     */ get readPreference() {\n        if (this.s.readPreference == null) {\n            return this.client.readPreference;\n        }\n        return this.s.readPreference;\n    }\n    get bsonOptions() {\n        return this.s.bsonOptions;\n    }\n    // get the write Concern\n    get writeConcern() {\n        return this.s.writeConcern;\n    }\n    get namespace() {\n        return this.s.namespace.toString();\n    }\n    /**\n     * Create a new collection on a server with the specified options. Use this to create capped collections.\n     * More information about command options available at https://www.mongodb.com/docs/manual/reference/command/create/\n     *\n     * @param name - The name of the collection to create\n     * @param options - Optional settings for the command\n     */ async createCollection(name, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new create_collection_1.CreateCollectionOperation(this, name, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Execute a command\n     *\n     * @remarks\n     * This command does not inherit options from the MongoClient.\n     *\n     * The driver will ensure the following fields are attached to the command sent to the server:\n     * - `lsid` - sourced from an implicit session or options.session\n     * - `$readPreference` - defaults to primary or can be configured by options.readPreference\n     * - `$db` - sourced from the name of this database\n     *\n     * If the client has a serverApi setting:\n     * - `apiVersion`\n     * - `apiStrict`\n     * - `apiDeprecationErrors`\n     *\n     * When in a transaction:\n     * - `readConcern` - sourced from readConcern set on the TransactionOptions\n     * - `writeConcern` - sourced from writeConcern set on the TransactionOptions\n     *\n     * Attaching any of the above fields to the command will have no effect as the driver will overwrite the value.\n     *\n     * @param command - The command to run\n     * @param options - Optional settings for the command\n     */ async command(command, options) {\n        // Intentionally, we do not inherit options from parent for this operation.\n        return (0, execute_operation_1.executeOperation)(this.client, new run_command_1.RunCommandOperation(this, command, options));\n    }\n    /**\n     * Execute an aggregation framework pipeline against the database, needs MongoDB \\>= 3.6\n     *\n     * @param pipeline - An array of aggregation stages to be executed\n     * @param options - Optional settings for the command\n     */ aggregate(pipeline = [], options) {\n        return new aggregation_cursor_1.AggregationCursor(this.client, this.s.namespace, pipeline, (0, utils_1.resolveOptions)(this, options));\n    }\n    /** Return the Admin db instance */ admin() {\n        return new admin_1.Admin(this);\n    }\n    /**\n     * Returns a reference to a MongoDB Collection. If it does not exist it will be created implicitly.\n     *\n     * @param name - the collection name we wish to access.\n     * @returns return the new Collection instance\n     */ collection(name, options = {}) {\n        if (typeof options === \"function\") {\n            throw new error_1.MongoInvalidArgumentError(\"The callback form of this helper has been removed.\");\n        }\n        return new collection_1.Collection(this, name, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * Get all the db statistics.\n     *\n     * @param options - Optional settings for the command\n     */ async stats(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new stats_1.DbStatsOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    listCollections(filter = {}, options = {}) {\n        return new list_collections_cursor_1.ListCollectionsCursor(this, filter, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * Rename a collection.\n     *\n     * @remarks\n     * This operation does not inherit options from the MongoClient.\n     *\n     * @param fromCollection - Name of current collection to rename\n     * @param toCollection - New name of of the collection\n     * @param options - Optional settings for the command\n     */ async renameCollection(fromCollection, toCollection, options) {\n        // Intentionally, we do not inherit options from parent for this operation.\n        return (0, execute_operation_1.executeOperation)(this.client, new rename_1.RenameOperation(this.collection(fromCollection), toCollection, {\n            ...options,\n            new_collection: true,\n            readPreference: read_preference_1.ReadPreference.primary\n        }));\n    }\n    /**\n     * Drop a collection from the database, removing it permanently. New accesses will create a new collection.\n     *\n     * @param name - Name of collection to drop\n     * @param options - Optional settings for the command\n     */ async dropCollection(name, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new drop_1.DropCollectionOperation(this, name, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Drop a database, removing it permanently from the server.\n     *\n     * @param options - Optional settings for the command\n     */ async dropDatabase(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new drop_1.DropDatabaseOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Fetch all collections for the current db.\n     *\n     * @param options - Optional settings for the command\n     */ async collections(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new collections_1.CollectionsOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Creates an index on the db and collection.\n     *\n     * @param name - Name of the collection to create the index on.\n     * @param indexSpec - Specify the field to index, or an index specification\n     * @param options - Optional settings for the command\n     */ async createIndex(name, indexSpec, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.CreateIndexOperation(this, name, indexSpec, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Add a user to the database\n     *\n     * @param username - The username for the new user\n     * @param passwordOrOptions - An optional password for the new user, or the options for the command\n     * @param options - Optional settings for the command\n     * @deprecated Use the createUser command in `db.command()` instead.\n     * @see https://www.mongodb.com/docs/manual/reference/command/createUser/\n     */ async addUser(username, passwordOrOptions, options) {\n        options = options != null && typeof options === \"object\" ? options : passwordOrOptions != null && typeof passwordOrOptions === \"object\" ? passwordOrOptions : undefined;\n        const password = typeof passwordOrOptions === \"string\" ? passwordOrOptions : undefined;\n        return (0, execute_operation_1.executeOperation)(this.client, new add_user_1.AddUserOperation(this, username, password, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Remove a user from a database\n     *\n     * @param username - The username to remove\n     * @param options - Optional settings for the command\n     */ async removeUser(username, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new remove_user_1.RemoveUserOperation(this, username, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Set the current profiling level of MongoDB\n     *\n     * @param level - The new profiling level (off, slow_only, all).\n     * @param options - Optional settings for the command\n     */ async setProfilingLevel(level, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new set_profiling_level_1.SetProfilingLevelOperation(this, level, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Retrieve the current profiling Level for MongoDB\n     *\n     * @param options - Optional settings for the command\n     */ async profilingLevel(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new profiling_level_1.ProfilingLevelOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Retrieves this collections index info.\n     *\n     * @param name - The name of the collection.\n     * @param options - Optional settings for the command\n     */ async indexInformation(name, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.IndexInformationOperation(this, name, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Create a new Change Stream, watching for new changes (insertions, updates,\n     * replacements, deletions, and invalidations) in this database. Will ignore all\n     * changes to system collections.\n     *\n     * @remarks\n     * watch() accepts two generic arguments for distinct use cases:\n     * - The first is to provide the schema that may be defined for all the collections within this database\n     * - The second is to override the shape of the change stream document entirely, if it is not provided the type will default to ChangeStreamDocument of the first argument\n     *\n     * @param pipeline - An array of {@link https://www.mongodb.com/docs/manual/reference/operator/aggregation-pipeline/|aggregation pipeline stages} through which to pass change stream documents. This allows for filtering (using $match) and manipulating the change stream documents.\n     * @param options - Optional settings for the command\n     * @typeParam TSchema - Type of the data being detected by the change stream\n     * @typeParam TChange - Type of the whole change stream document emitted\n     */ watch(pipeline = [], options = {}) {\n        // Allow optionally not specifying a pipeline\n        if (!Array.isArray(pipeline)) {\n            options = pipeline;\n            pipeline = [];\n        }\n        return new change_stream_1.ChangeStream(this, pipeline, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * A low level cursor API providing basic driver functionality:\n     * - ClientSession management\n     * - ReadPreference for server selection\n     * - Running getMores automatically when a local batch is exhausted\n     *\n     * @param command - The command that will start a cursor on the server.\n     * @param options - Configurations for running the command, bson options will apply to getMores\n     */ runCursorCommand(command, options) {\n        return new run_command_cursor_1.RunCommandCursor(this, command, options);\n    }\n}\nDb.SYSTEM_NAMESPACE_COLLECTION = CONSTANTS.SYSTEM_NAMESPACE_COLLECTION;\nDb.SYSTEM_INDEX_COLLECTION = CONSTANTS.SYSTEM_INDEX_COLLECTION;\nDb.SYSTEM_PROFILE_COLLECTION = CONSTANTS.SYSTEM_PROFILE_COLLECTION;\nDb.SYSTEM_USER_COLLECTION = CONSTANTS.SYSTEM_USER_COLLECTION;\nDb.SYSTEM_COMMAND_COLLECTION = CONSTANTS.SYSTEM_COMMAND_COLLECTION;\nDb.SYSTEM_JS_COLLECTION = CONSTANTS.SYSTEM_JS_COLLECTION;\nexports.Db = Db;\n// TODO(NODE-3484): Refactor into MongoDBNamespace\n// Validate the database name\nfunction validateDatabaseName(databaseName) {\n    if (typeof databaseName !== \"string\") throw new error_1.MongoInvalidArgumentError(\"Database name must be a string\");\n    if (databaseName.length === 0) throw new error_1.MongoInvalidArgumentError(\"Database name cannot be the empty string\");\n    if (databaseName === \"$external\") return;\n    const invalidChars = [\n        \" \",\n        \".\",\n        \"$\",\n        \"/\",\n        \"\\\\\"\n    ];\n    for(let i = 0; i < invalidChars.length; i++){\n        if (databaseName.indexOf(invalidChars[i]) !== -1) throw new error_1.MongoAPIError(`database names cannot contain the character '${invalidChars[i]}'`);\n    }\n} //# sourceMappingURL=db.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZGIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELFVBQVUsR0FBRyxLQUFLO0FBQ2xCLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDBEQUFTO0FBQ2pDLE1BQU1DLFNBQVNELG1CQUFPQSxDQUFDLHdEQUFRO0FBQy9CLE1BQU1FLGtCQUFrQkYsbUJBQU9BLENBQUMsMEVBQWlCO0FBQ2pELE1BQU1HLGVBQWVILG1CQUFPQSxDQUFDLG9FQUFjO0FBQzNDLE1BQU1JLFlBQVlKLG1CQUFPQSxDQUFDLGtFQUFhO0FBQ3ZDLE1BQU1LLHVCQUF1QkwsbUJBQU9BLENBQUMsa0dBQTZCO0FBQ2xFLE1BQU1NLDRCQUE0Qk4sbUJBQU9BLENBQUMsNEdBQWtDO0FBQzVFLE1BQU1PLHVCQUF1QlAsbUJBQU9BLENBQUMsa0dBQTZCO0FBQ2xFLE1BQU1RLFVBQVVSLG1CQUFPQSxDQUFDLDBEQUFTO0FBQ2pDLE1BQU1TLGFBQWFULG1CQUFPQSxDQUFDLHNGQUF1QjtBQUNsRCxNQUFNVSxnQkFBZ0JWLG1CQUFPQSxDQUFDLDRGQUEwQjtBQUN4RCxNQUFNVyxzQkFBc0JYLG1CQUFPQSxDQUFDLHdHQUFnQztBQUNwRSxNQUFNWSxTQUFTWixtQkFBT0EsQ0FBQyw4RUFBbUI7QUFDMUMsTUFBTWEsc0JBQXNCYixtQkFBT0EsQ0FBQyx3R0FBZ0M7QUFDcEUsTUFBTWMsWUFBWWQsbUJBQU9BLENBQUMsb0ZBQXNCO0FBQ2hELE1BQU1lLG9CQUFvQmYsbUJBQU9BLENBQUMsb0dBQThCO0FBQ2hFLE1BQU1nQixnQkFBZ0JoQixtQkFBT0EsQ0FBQyw0RkFBMEI7QUFDeEQsTUFBTWlCLFdBQVdqQixtQkFBT0EsQ0FBQyxrRkFBcUI7QUFDOUMsTUFBTWtCLGdCQUFnQmxCLG1CQUFPQSxDQUFDLDRGQUEwQjtBQUN4RCxNQUFNbUIsd0JBQXdCbkIsbUJBQU9BLENBQUMsNEdBQWtDO0FBQ3hFLE1BQU1vQixVQUFVcEIsbUJBQU9BLENBQUMsZ0ZBQW9CO0FBQzVDLE1BQU1xQixpQkFBaUJyQixtQkFBT0EsQ0FBQyx3RUFBZ0I7QUFDL0MsTUFBTXNCLG9CQUFvQnRCLG1CQUFPQSxDQUFDLDhFQUFtQjtBQUNyRCxNQUFNdUIsVUFBVXZCLG1CQUFPQSxDQUFDLDBEQUFTO0FBQ2pDLE1BQU13QixrQkFBa0J4QixtQkFBT0EsQ0FBQywwRUFBaUI7QUFDakQscUJBQXFCO0FBQ3JCLE1BQU15Qix3QkFBd0I7SUFDMUI7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0g7QUFDRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBcUJDLEdBQ0QsTUFBTTNCO0lBQ0Y7Ozs7OztLQU1DLEdBQ0Q0QixZQUFZQyxNQUFNLEVBQUVDLFlBQVksRUFBRUMsT0FBTyxDQUFFO1FBQ3ZDQSxVQUFVQSxXQUFXLENBQUM7UUFDdEIscUJBQXFCO1FBQ3JCQSxVQUFVLENBQUMsR0FBR04sUUFBUU8sYUFBYSxFQUFFRCxTQUFTSjtRQUM5QyxpQ0FBaUM7UUFDakNNLHFCQUFxQkg7UUFDckIsa0NBQWtDO1FBQ2xDLElBQUksQ0FBQ0ksQ0FBQyxHQUFHO1lBQ0wsVUFBVTtZQUNWSDtZQUNBLHlCQUF5QjtZQUN6QkksZ0JBQWdCWCxrQkFBa0JZLGNBQWMsQ0FBQ0MsV0FBVyxDQUFDTjtZQUM3RCxxQkFBcUI7WUFDckJPLGFBQWEsQ0FBQyxHQUFHbkMsT0FBT29DLGtCQUFrQixFQUFFUixTQUFTRjtZQUNyRCx5REFBeUQ7WUFDekRXLFdBQVdULFNBQVNTLGFBQWFmLFFBQVFnQixrQkFBa0I7WUFDM0QsY0FBYztZQUNkQyxhQUFhbkIsZUFBZW9CLFdBQVcsQ0FBQ04sV0FBVyxDQUFDTjtZQUNwRGEsY0FBY2xCLGdCQUFnQm1CLFlBQVksQ0FBQ1IsV0FBVyxDQUFDTjtZQUN2RCxZQUFZO1lBQ1plLFdBQVcsSUFBSXJCLFFBQVFzQixnQkFBZ0IsQ0FBQ2pCO1FBQzVDO1FBQ0EsSUFBSSxDQUFDRCxNQUFNLEdBQUdBO0lBQ2xCO0lBQ0EsSUFBSUMsZUFBZTtRQUNmLE9BQU8sSUFBSSxDQUFDSSxDQUFDLENBQUNZLFNBQVMsQ0FBQ0UsRUFBRTtJQUM5QjtJQUNBLFVBQVU7SUFDVixJQUFJakIsVUFBVTtRQUNWLE9BQU8sSUFBSSxDQUFDRyxDQUFDLENBQUNILE9BQU87SUFDekI7SUFDQTs7S0FFQyxHQUNELElBQUlrQixjQUFjO1FBQ2QsT0FBTyxJQUFJLENBQUNmLENBQUMsQ0FBQ0MsY0FBYyxFQUFFZSxlQUFlLGFBQWE7SUFDOUQ7SUFDQSxJQUFJUixjQUFjO1FBQ2QsT0FBTyxJQUFJLENBQUNSLENBQUMsQ0FBQ1EsV0FBVztJQUM3QjtJQUNBOzs7S0FHQyxHQUNELElBQUlQLGlCQUFpQjtRQUNqQixJQUFJLElBQUksQ0FBQ0QsQ0FBQyxDQUFDQyxjQUFjLElBQUksTUFBTTtZQUMvQixPQUFPLElBQUksQ0FBQ04sTUFBTSxDQUFDTSxjQUFjO1FBQ3JDO1FBQ0EsT0FBTyxJQUFJLENBQUNELENBQUMsQ0FBQ0MsY0FBYztJQUNoQztJQUNBLElBQUlHLGNBQWM7UUFDZCxPQUFPLElBQUksQ0FBQ0osQ0FBQyxDQUFDSSxXQUFXO0lBQzdCO0lBQ0Esd0JBQXdCO0lBQ3hCLElBQUlNLGVBQWU7UUFDZixPQUFPLElBQUksQ0FBQ1YsQ0FBQyxDQUFDVSxZQUFZO0lBQzlCO0lBQ0EsSUFBSUUsWUFBWTtRQUNaLE9BQU8sSUFBSSxDQUFDWixDQUFDLENBQUNZLFNBQVMsQ0FBQ0ssUUFBUTtJQUNwQztJQUNBOzs7Ozs7S0FNQyxHQUNELE1BQU1DLGlCQUFpQkMsSUFBSSxFQUFFdEIsT0FBTyxFQUFFO1FBQ2xDLE9BQU8sQ0FBQyxHQUFHaEIsb0JBQW9CdUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDekIsTUFBTSxFQUFFLElBQUloQixvQkFBb0IwQyx5QkFBeUIsQ0FBQyxJQUFJLEVBQUVGLE1BQU0sQ0FBQyxHQUFHNUIsUUFBUStCLGNBQWMsRUFBRSxJQUFJLEVBQUV6QjtJQUNsSztJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0F3QkMsR0FDRCxNQUFNMEIsUUFBUUEsT0FBTyxFQUFFMUIsT0FBTyxFQUFFO1FBQzVCLDJFQUEyRTtRQUMzRSxPQUFPLENBQUMsR0FBR2hCLG9CQUFvQnVDLGdCQUFnQixFQUFFLElBQUksQ0FBQ3pCLE1BQU0sRUFBRSxJQUFJVCxjQUFjc0MsbUJBQW1CLENBQUMsSUFBSSxFQUFFRCxTQUFTMUI7SUFDdkg7SUFDQTs7Ozs7S0FLQyxHQUNENEIsVUFBVUMsV0FBVyxFQUFFLEVBQUU3QixPQUFPLEVBQUU7UUFDOUIsT0FBTyxJQUFJeEIscUJBQXFCc0QsaUJBQWlCLENBQUMsSUFBSSxDQUFDaEMsTUFBTSxFQUFFLElBQUksQ0FBQ0ssQ0FBQyxDQUFDWSxTQUFTLEVBQUVjLFVBQVUsQ0FBQyxHQUFHbkMsUUFBUStCLGNBQWMsRUFBRSxJQUFJLEVBQUV6QjtJQUNqSTtJQUNBLGlDQUFpQyxHQUNqQytCLFFBQVE7UUFDSixPQUFPLElBQUk3RCxRQUFROEQsS0FBSyxDQUFDLElBQUk7SUFDakM7SUFDQTs7Ozs7S0FLQyxHQUNEQyxXQUFXWCxJQUFJLEVBQUV0QixVQUFVLENBQUMsQ0FBQyxFQUFFO1FBQzNCLElBQUksT0FBT0EsWUFBWSxZQUFZO1lBQy9CLE1BQU0sSUFBSXJCLFFBQVF1RCx5QkFBeUIsQ0FBQztRQUNoRDtRQUNBLE9BQU8sSUFBSTVELGFBQWE2RCxVQUFVLENBQUMsSUFBSSxFQUFFYixNQUFNLENBQUMsR0FBRzVCLFFBQVErQixjQUFjLEVBQUUsSUFBSSxFQUFFekI7SUFDckY7SUFDQTs7OztLQUlDLEdBQ0QsTUFBTW9DLE1BQU1wQyxPQUFPLEVBQUU7UUFDakIsT0FBTyxDQUFDLEdBQUdoQixvQkFBb0J1QyxnQkFBZ0IsRUFBRSxJQUFJLENBQUN6QixNQUFNLEVBQUUsSUFBSVAsUUFBUThDLGdCQUFnQixDQUFDLElBQUksRUFBRSxDQUFDLEdBQUczQyxRQUFRK0IsY0FBYyxFQUFFLElBQUksRUFBRXpCO0lBQ3ZJO0lBQ0FzQyxnQkFBZ0JDLFNBQVMsQ0FBQyxDQUFDLEVBQUV2QyxVQUFVLENBQUMsQ0FBQyxFQUFFO1FBQ3ZDLE9BQU8sSUFBSXZCLDBCQUEwQitELHFCQUFxQixDQUFDLElBQUksRUFBRUQsUUFBUSxDQUFDLEdBQUc3QyxRQUFRK0IsY0FBYyxFQUFFLElBQUksRUFBRXpCO0lBQy9HO0lBQ0E7Ozs7Ozs7OztLQVNDLEdBQ0QsTUFBTXlDLGlCQUFpQkMsY0FBYyxFQUFFQyxZQUFZLEVBQUUzQyxPQUFPLEVBQUU7UUFDMUQsMkVBQTJFO1FBQzNFLE9BQU8sQ0FBQyxHQUFHaEIsb0JBQW9CdUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDekIsTUFBTSxFQUFFLElBQUlWLFNBQVN3RCxlQUFlLENBQUMsSUFBSSxDQUFDWCxVQUFVLENBQUNTLGlCQUFpQkMsY0FBYztZQUFFLEdBQUczQyxPQUFPO1lBQUU2QyxnQkFBZ0I7WUFBTXpDLGdCQUFnQlgsa0JBQWtCWSxjQUFjLENBQUN5QyxPQUFPO1FBQUM7SUFDM087SUFDQTs7Ozs7S0FLQyxHQUNELE1BQU1DLGVBQWV6QixJQUFJLEVBQUV0QixPQUFPLEVBQUU7UUFDaEMsT0FBTyxDQUFDLEdBQUdoQixvQkFBb0J1QyxnQkFBZ0IsRUFBRSxJQUFJLENBQUN6QixNQUFNLEVBQUUsSUFBSWYsT0FBT2lFLHVCQUF1QixDQUFDLElBQUksRUFBRTFCLE1BQU0sQ0FBQyxHQUFHNUIsUUFBUStCLGNBQWMsRUFBRSxJQUFJLEVBQUV6QjtJQUNuSjtJQUNBOzs7O0tBSUMsR0FDRCxNQUFNaUQsYUFBYWpELE9BQU8sRUFBRTtRQUN4QixPQUFPLENBQUMsR0FBR2hCLG9CQUFvQnVDLGdCQUFnQixFQUFFLElBQUksQ0FBQ3pCLE1BQU0sRUFBRSxJQUFJZixPQUFPbUUscUJBQXFCLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBR3hELFFBQVErQixjQUFjLEVBQUUsSUFBSSxFQUFFekI7SUFDM0k7SUFDQTs7OztLQUlDLEdBQ0QsTUFBTW1ELFlBQVluRCxPQUFPLEVBQUU7UUFDdkIsT0FBTyxDQUFDLEdBQUdoQixvQkFBb0J1QyxnQkFBZ0IsRUFBRSxJQUFJLENBQUN6QixNQUFNLEVBQUUsSUFBSWpCLGNBQWN1RSxvQkFBb0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHMUQsUUFBUStCLGNBQWMsRUFBRSxJQUFJLEVBQUV6QjtJQUNqSjtJQUNBOzs7Ozs7S0FNQyxHQUNELE1BQU1xRCxZQUFZL0IsSUFBSSxFQUFFZ0MsU0FBUyxFQUFFdEQsT0FBTyxFQUFFO1FBQ3hDLE9BQU8sQ0FBQyxHQUFHaEIsb0JBQW9CdUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDekIsTUFBTSxFQUFFLElBQUliLFVBQVVzRSxvQkFBb0IsQ0FBQyxJQUFJLEVBQUVqQyxNQUFNZ0MsV0FBVyxDQUFDLEdBQUc1RCxRQUFRK0IsY0FBYyxFQUFFLElBQUksRUFBRXpCO0lBQzlKO0lBQ0E7Ozs7Ozs7O0tBUUMsR0FDRCxNQUFNd0QsUUFBUUMsUUFBUSxFQUFFQyxpQkFBaUIsRUFBRTFELE9BQU8sRUFBRTtRQUNoREEsVUFDSUEsV0FBVyxRQUFRLE9BQU9BLFlBQVksV0FDaENBLFVBQ0EwRCxxQkFBcUIsUUFBUSxPQUFPQSxzQkFBc0IsV0FDdERBLG9CQUNBQztRQUNkLE1BQU1DLFdBQVcsT0FBT0Ysc0JBQXNCLFdBQVdBLG9CQUFvQkM7UUFDN0UsT0FBTyxDQUFDLEdBQUczRSxvQkFBb0J1QyxnQkFBZ0IsRUFBRSxJQUFJLENBQUN6QixNQUFNLEVBQUUsSUFBSWxCLFdBQVdpRixnQkFBZ0IsQ0FBQyxJQUFJLEVBQUVKLFVBQVVHLFVBQVUsQ0FBQyxHQUFHbEUsUUFBUStCLGNBQWMsRUFBRSxJQUFJLEVBQUV6QjtJQUM5SjtJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTThELFdBQVdMLFFBQVEsRUFBRXpELE9BQU8sRUFBRTtRQUNoQyxPQUFPLENBQUMsR0FBR2hCLG9CQUFvQnVDLGdCQUFnQixFQUFFLElBQUksQ0FBQ3pCLE1BQU0sRUFBRSxJQUFJWCxjQUFjNEUsbUJBQW1CLENBQUMsSUFBSSxFQUFFTixVQUFVLENBQUMsR0FBRy9ELFFBQVErQixjQUFjLEVBQUUsSUFBSSxFQUFFekI7SUFDMUo7SUFDQTs7Ozs7S0FLQyxHQUNELE1BQU1nRSxrQkFBa0JDLEtBQUssRUFBRWpFLE9BQU8sRUFBRTtRQUNwQyxPQUFPLENBQUMsR0FBR2hCLG9CQUFvQnVDLGdCQUFnQixFQUFFLElBQUksQ0FBQ3pCLE1BQU0sRUFBRSxJQUFJUixzQkFBc0I0RSwwQkFBMEIsQ0FBQyxJQUFJLEVBQUVELE9BQU8sQ0FBQyxHQUFHdkUsUUFBUStCLGNBQWMsRUFBRSxJQUFJLEVBQUV6QjtJQUN0SztJQUNBOzs7O0tBSUMsR0FDRCxNQUFNbUUsZUFBZW5FLE9BQU8sRUFBRTtRQUMxQixPQUFPLENBQUMsR0FBR2hCLG9CQUFvQnVDLGdCQUFnQixFQUFFLElBQUksQ0FBQ3pCLE1BQU0sRUFBRSxJQUFJWixrQkFBa0JrRix1QkFBdUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHMUUsUUFBUStCLGNBQWMsRUFBRSxJQUFJLEVBQUV6QjtJQUN4SjtJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTXFFLGlCQUFpQi9DLElBQUksRUFBRXRCLE9BQU8sRUFBRTtRQUNsQyxPQUFPLENBQUMsR0FBR2hCLG9CQUFvQnVDLGdCQUFnQixFQUFFLElBQUksQ0FBQ3pCLE1BQU0sRUFBRSxJQUFJYixVQUFVcUYseUJBQXlCLENBQUMsSUFBSSxFQUFFaEQsTUFBTSxDQUFDLEdBQUc1QixRQUFRK0IsY0FBYyxFQUFFLElBQUksRUFBRXpCO0lBQ3hKO0lBQ0E7Ozs7Ozs7Ozs7Ozs7O0tBY0MsR0FDRHVFLE1BQU0xQyxXQUFXLEVBQUUsRUFBRTdCLFVBQVUsQ0FBQyxDQUFDLEVBQUU7UUFDL0IsNkNBQTZDO1FBQzdDLElBQUksQ0FBQ3dFLE1BQU1DLE9BQU8sQ0FBQzVDLFdBQVc7WUFDMUI3QixVQUFVNkI7WUFDVkEsV0FBVyxFQUFFO1FBQ2pCO1FBQ0EsT0FBTyxJQUFJeEQsZ0JBQWdCcUcsWUFBWSxDQUFDLElBQUksRUFBRTdDLFVBQVUsQ0FBQyxHQUFHbkMsUUFBUStCLGNBQWMsRUFBRSxJQUFJLEVBQUV6QjtJQUM5RjtJQUNBOzs7Ozs7OztLQVFDLEdBQ0QyRSxpQkFBaUJqRCxPQUFPLEVBQUUxQixPQUFPLEVBQUU7UUFDL0IsT0FBTyxJQUFJdEIscUJBQXFCa0csZ0JBQWdCLENBQUMsSUFBSSxFQUFFbEQsU0FBUzFCO0lBQ3BFO0FBQ0o7QUFDQS9CLEdBQUc0RywyQkFBMkIsR0FBR3RHLFVBQVVzRywyQkFBMkI7QUFDdEU1RyxHQUFHNkcsdUJBQXVCLEdBQUd2RyxVQUFVdUcsdUJBQXVCO0FBQzlEN0csR0FBRzhHLHlCQUF5QixHQUFHeEcsVUFBVXdHLHlCQUF5QjtBQUNsRTlHLEdBQUcrRyxzQkFBc0IsR0FBR3pHLFVBQVV5RyxzQkFBc0I7QUFDNUQvRyxHQUFHZ0gseUJBQXlCLEdBQUcxRyxVQUFVMEcseUJBQXlCO0FBQ2xFaEgsR0FBR2lILG9CQUFvQixHQUFHM0csVUFBVTJHLG9CQUFvQjtBQUN4RG5ILFVBQVUsR0FBR0U7QUFDYixrREFBa0Q7QUFDbEQsNkJBQTZCO0FBQzdCLFNBQVNpQyxxQkFBcUJILFlBQVk7SUFDdEMsSUFBSSxPQUFPQSxpQkFBaUIsVUFDeEIsTUFBTSxJQUFJcEIsUUFBUXVELHlCQUF5QixDQUFDO0lBQ2hELElBQUluQyxhQUFhb0YsTUFBTSxLQUFLLEdBQ3hCLE1BQU0sSUFBSXhHLFFBQVF1RCx5QkFBeUIsQ0FBQztJQUNoRCxJQUFJbkMsaUJBQWlCLGFBQ2pCO0lBQ0osTUFBTXFGLGVBQWU7UUFBQztRQUFLO1FBQUs7UUFBSztRQUFLO0tBQUs7SUFDL0MsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlELGFBQWFELE1BQU0sRUFBRUUsSUFBSztRQUMxQyxJQUFJdEYsYUFBYXVGLE9BQU8sQ0FBQ0YsWUFBWSxDQUFDQyxFQUFFLE1BQU0sQ0FBQyxHQUMzQyxNQUFNLElBQUkxRyxRQUFRNEcsYUFBYSxDQUFDLENBQUMsNkNBQTZDLEVBQUVILFlBQVksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMxRztBQUNKLEVBQ0EsOEJBQThCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2RiLmpzPzBmMjIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRiID0gdm9pZCAwO1xuY29uc3QgYWRtaW5fMSA9IHJlcXVpcmUoXCIuL2FkbWluXCIpO1xuY29uc3QgYnNvbl8xID0gcmVxdWlyZShcIi4vYnNvblwiKTtcbmNvbnN0IGNoYW5nZV9zdHJlYW1fMSA9IHJlcXVpcmUoXCIuL2NoYW5nZV9zdHJlYW1cIik7XG5jb25zdCBjb2xsZWN0aW9uXzEgPSByZXF1aXJlKFwiLi9jb2xsZWN0aW9uXCIpO1xuY29uc3QgQ09OU1RBTlRTID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xuY29uc3QgYWdncmVnYXRpb25fY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9jdXJzb3IvYWdncmVnYXRpb25fY3Vyc29yXCIpO1xuY29uc3QgbGlzdF9jb2xsZWN0aW9uc19jdXJzb3JfMSA9IHJlcXVpcmUoXCIuL2N1cnNvci9saXN0X2NvbGxlY3Rpb25zX2N1cnNvclwiKTtcbmNvbnN0IHJ1bl9jb21tYW5kX2N1cnNvcl8xID0gcmVxdWlyZShcIi4vY3Vyc29yL3J1bl9jb21tYW5kX2N1cnNvclwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi9lcnJvclwiKTtcbmNvbnN0IGFkZF91c2VyXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2FkZF91c2VyXCIpO1xuY29uc3QgY29sbGVjdGlvbnNfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvY29sbGVjdGlvbnNcIik7XG5jb25zdCBjcmVhdGVfY29sbGVjdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9jcmVhdGVfY29sbGVjdGlvblwiKTtcbmNvbnN0IGRyb3BfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvZHJvcFwiKTtcbmNvbnN0IGV4ZWN1dGVfb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2V4ZWN1dGVfb3BlcmF0aW9uXCIpO1xuY29uc3QgaW5kZXhlc18xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9pbmRleGVzXCIpO1xuY29uc3QgcHJvZmlsaW5nX2xldmVsXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL3Byb2ZpbGluZ19sZXZlbFwiKTtcbmNvbnN0IHJlbW92ZV91c2VyXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL3JlbW92ZV91c2VyXCIpO1xuY29uc3QgcmVuYW1lXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL3JlbmFtZVwiKTtcbmNvbnN0IHJ1bl9jb21tYW5kXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL3J1bl9jb21tYW5kXCIpO1xuY29uc3Qgc2V0X3Byb2ZpbGluZ19sZXZlbF8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9zZXRfcHJvZmlsaW5nX2xldmVsXCIpO1xuY29uc3Qgc3RhdHNfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvc3RhdHNcIik7XG5jb25zdCByZWFkX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuL3JlYWRfY29uY2VyblwiKTtcbmNvbnN0IHJlYWRfcHJlZmVyZW5jZV8xID0gcmVxdWlyZShcIi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuY29uc3Qgd3JpdGVfY29uY2Vybl8xID0gcmVxdWlyZShcIi4vd3JpdGVfY29uY2VyblwiKTtcbi8vIEFsbG93ZWQgcGFyYW1ldGVyc1xuY29uc3QgREJfT1BUSU9OU19BTExPV19MSVNUID0gW1xuICAgICd3cml0ZUNvbmNlcm4nLFxuICAgICdyZWFkUHJlZmVyZW5jZScsXG4gICAgJ3JlYWRQcmVmZXJlbmNlVGFncycsXG4gICAgJ25hdGl2ZV9wYXJzZXInLFxuICAgICdmb3JjZVNlcnZlck9iamVjdElkJyxcbiAgICAncGtGYWN0b3J5JyxcbiAgICAnc2VyaWFsaXplRnVuY3Rpb25zJyxcbiAgICAncmF3JyxcbiAgICAnYXV0aFNvdXJjZScsXG4gICAgJ2lnbm9yZVVuZGVmaW5lZCcsXG4gICAgJ3JlYWRDb25jZXJuJyxcbiAgICAncmV0cnlNaWxpU2Vjb25kcycsXG4gICAgJ251bWJlck9mUmV0cmllcycsXG4gICAgJ3VzZUJpZ0ludDY0JyxcbiAgICAncHJvbW90ZUJ1ZmZlcnMnLFxuICAgICdwcm9tb3RlTG9uZ3MnLFxuICAgICdic29uUmVnRXhwJyxcbiAgICAnZW5hYmxlVXRmOFZhbGlkYXRpb24nLFxuICAgICdwcm9tb3RlVmFsdWVzJyxcbiAgICAnY29tcHJlc3Npb24nLFxuICAgICdyZXRyeVdyaXRlcydcbl07XG4vKipcbiAqIFRoZSAqKkRiKiogY2xhc3MgaXMgYSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBNb25nb0RCIERhdGFiYXNlLlxuICogQHB1YmxpY1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tICdtb25nb2RiJztcbiAqXG4gKiBpbnRlcmZhY2UgUGV0IHtcbiAqICAgbmFtZTogc3RyaW5nO1xuICogICBraW5kOiAnZG9nJyB8ICdjYXQnIHwgJ2Zpc2gnO1xuICogfVxuICpcbiAqIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCgnbW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNycpO1xuICogY29uc3QgZGIgPSBjbGllbnQuZGIoKTtcbiAqXG4gKiAvLyBDcmVhdGUgYSBjb2xsZWN0aW9uIHRoYXQgdmFsaWRhdGVzIG91ciB1bmlvblxuICogYXdhaXQgZGIuY3JlYXRlQ29sbGVjdGlvbjxQZXQ+KCdwZXRzJywge1xuICogICB2YWxpZGF0b3I6IHsgJGV4cHI6IHsgJGluOiBbJyRraW5kJywgWydkb2cnLCAnY2F0JywgJ2Zpc2gnXV0gfSB9XG4gKiB9KVxuICogYGBgXG4gKi9cbmNsYXNzIERiIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IERiIGluc3RhbmNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2xpZW50IC0gVGhlIE1vbmdvQ2xpZW50IGZvciB0aGUgZGF0YWJhc2UuXG4gICAgICogQHBhcmFtIGRhdGFiYXNlTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBkYXRhYmFzZSB0aGlzIGluc3RhbmNlIHJlcHJlc2VudHMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgRGIgY29uc3RydWN0aW9uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY2xpZW50LCBkYXRhYmFzZU5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIC8vIEZpbHRlciB0aGUgb3B0aW9uc1xuICAgICAgICBvcHRpb25zID0gKDAsIHV0aWxzXzEuZmlsdGVyT3B0aW9ucykob3B0aW9ucywgREJfT1BUSU9OU19BTExPV19MSVNUKTtcbiAgICAgICAgLy8gRW5zdXJlIHdlIGhhdmUgYSB2YWxpZCBkYiBuYW1lXG4gICAgICAgIHZhbGlkYXRlRGF0YWJhc2VOYW1lKGRhdGFiYXNlTmFtZSk7XG4gICAgICAgIC8vIEludGVybmFsIHN0YXRlIG9mIHRoZSBkYiBvYmplY3RcbiAgICAgICAgdGhpcy5zID0ge1xuICAgICAgICAgICAgLy8gT3B0aW9uc1xuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIC8vIFVucGFjayByZWFkIHByZWZlcmVuY2VcbiAgICAgICAgICAgIHJlYWRQcmVmZXJlbmNlOiByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5mcm9tT3B0aW9ucyhvcHRpb25zKSxcbiAgICAgICAgICAgIC8vIE1lcmdlIGJzb24gb3B0aW9uc1xuICAgICAgICAgICAgYnNvbk9wdGlvbnM6ICgwLCBic29uXzEucmVzb2x2ZUJTT05PcHRpb25zKShvcHRpb25zLCBjbGllbnQpLFxuICAgICAgICAgICAgLy8gU2V0IHVwIHRoZSBwcmltYXJ5IGtleSBmYWN0b3J5IG9yIGZhbGxiYWNrIHRvIE9iamVjdElkXG4gICAgICAgICAgICBwa0ZhY3Rvcnk6IG9wdGlvbnM/LnBrRmFjdG9yeSA/PyB1dGlsc18xLkRFRkFVTFRfUEtfRkFDVE9SWSxcbiAgICAgICAgICAgIC8vIFJlYWRDb25jZXJuXG4gICAgICAgICAgICByZWFkQ29uY2VybjogcmVhZF9jb25jZXJuXzEuUmVhZENvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucyksXG4gICAgICAgICAgICB3cml0ZUNvbmNlcm46IHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucyksXG4gICAgICAgICAgICAvLyBOYW1lc3BhY2VcbiAgICAgICAgICAgIG5hbWVzcGFjZTogbmV3IHV0aWxzXzEuTW9uZ29EQk5hbWVzcGFjZShkYXRhYmFzZU5hbWUpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2xpZW50ID0gY2xpZW50O1xuICAgIH1cbiAgICBnZXQgZGF0YWJhc2VOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLm5hbWVzcGFjZS5kYjtcbiAgICB9XG4gICAgLy8gT3B0aW9uc1xuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLm9wdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgc2Vjb25kYXJ5IGNhbiBiZSB1c2VkIChiZWNhdXNlIHRoZSByZWFkIHByZWZlcmVuY2UgaXMgKm5vdCogc2V0IHRvIHByaW1hcnkpXG4gICAgICovXG4gICAgZ2V0IHNlY29uZGFyeU9rKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLnJlYWRQcmVmZXJlbmNlPy5wcmVmZXJlbmNlICE9PSAncHJpbWFyeScgfHwgZmFsc2U7XG4gICAgfVxuICAgIGdldCByZWFkQ29uY2VybigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5yZWFkQ29uY2VybjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgcmVhZFByZWZlcmVuY2Ugb2YgdGhlIERiLiBJZiBub3QgZXhwbGljaXRseSBkZWZpbmVkIGZvclxuICAgICAqIHRoaXMgRGIsIHdpbGwgYmUgaW5oZXJpdGVkIGZyb20gdGhlIHBhcmVudCBNb25nb0NsaWVudFxuICAgICAqL1xuICAgIGdldCByZWFkUHJlZmVyZW5jZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucy5yZWFkUHJlZmVyZW5jZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbGllbnQucmVhZFByZWZlcmVuY2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucy5yZWFkUHJlZmVyZW5jZTtcbiAgICB9XG4gICAgZ2V0IGJzb25PcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLmJzb25PcHRpb25zO1xuICAgIH1cbiAgICAvLyBnZXQgdGhlIHdyaXRlIENvbmNlcm5cbiAgICBnZXQgd3JpdGVDb25jZXJuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLndyaXRlQ29uY2VybjtcbiAgICB9XG4gICAgZ2V0IG5hbWVzcGFjZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5uYW1lc3BhY2UudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGNvbGxlY3Rpb24gb24gYSBzZXJ2ZXIgd2l0aCB0aGUgc3BlY2lmaWVkIG9wdGlvbnMuIFVzZSB0aGlzIHRvIGNyZWF0ZSBjYXBwZWQgY29sbGVjdGlvbnMuXG4gICAgICogTW9yZSBpbmZvcm1hdGlvbiBhYm91dCBjb21tYW5kIG9wdGlvbnMgYXZhaWxhYmxlIGF0IGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9jb21tYW5kL2NyZWF0ZS9cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGNvbGxlY3Rpb24gdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBjcmVhdGVDb2xsZWN0aW9uKG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgY3JlYXRlX2NvbGxlY3Rpb25fMS5DcmVhdGVDb2xsZWN0aW9uT3BlcmF0aW9uKHRoaXMsIG5hbWUsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIGEgY29tbWFuZFxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGNvbW1hbmQgZG9lcyBub3QgaW5oZXJpdCBvcHRpb25zIGZyb20gdGhlIE1vbmdvQ2xpZW50LlxuICAgICAqXG4gICAgICogVGhlIGRyaXZlciB3aWxsIGVuc3VyZSB0aGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgYXR0YWNoZWQgdG8gdGhlIGNvbW1hbmQgc2VudCB0byB0aGUgc2VydmVyOlxuICAgICAqIC0gYGxzaWRgIC0gc291cmNlZCBmcm9tIGFuIGltcGxpY2l0IHNlc3Npb24gb3Igb3B0aW9ucy5zZXNzaW9uXG4gICAgICogLSBgJHJlYWRQcmVmZXJlbmNlYCAtIGRlZmF1bHRzIHRvIHByaW1hcnkgb3IgY2FuIGJlIGNvbmZpZ3VyZWQgYnkgb3B0aW9ucy5yZWFkUHJlZmVyZW5jZVxuICAgICAqIC0gYCRkYmAgLSBzb3VyY2VkIGZyb20gdGhlIG5hbWUgb2YgdGhpcyBkYXRhYmFzZVxuICAgICAqXG4gICAgICogSWYgdGhlIGNsaWVudCBoYXMgYSBzZXJ2ZXJBcGkgc2V0dGluZzpcbiAgICAgKiAtIGBhcGlWZXJzaW9uYFxuICAgICAqIC0gYGFwaVN0cmljdGBcbiAgICAgKiAtIGBhcGlEZXByZWNhdGlvbkVycm9yc2BcbiAgICAgKlxuICAgICAqIFdoZW4gaW4gYSB0cmFuc2FjdGlvbjpcbiAgICAgKiAtIGByZWFkQ29uY2VybmAgLSBzb3VyY2VkIGZyb20gcmVhZENvbmNlcm4gc2V0IG9uIHRoZSBUcmFuc2FjdGlvbk9wdGlvbnNcbiAgICAgKiAtIGB3cml0ZUNvbmNlcm5gIC0gc291cmNlZCBmcm9tIHdyaXRlQ29uY2VybiBzZXQgb24gdGhlIFRyYW5zYWN0aW9uT3B0aW9uc1xuICAgICAqXG4gICAgICogQXR0YWNoaW5nIGFueSBvZiB0aGUgYWJvdmUgZmllbGRzIHRvIHRoZSBjb21tYW5kIHdpbGwgaGF2ZSBubyBlZmZlY3QgYXMgdGhlIGRyaXZlciB3aWxsIG92ZXJ3cml0ZSB0aGUgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29tbWFuZCAtIFRoZSBjb21tYW5kIHRvIHJ1blxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgY29tbWFuZChjb21tYW5kLCBvcHRpb25zKSB7XG4gICAgICAgIC8vIEludGVudGlvbmFsbHksIHdlIGRvIG5vdCBpbmhlcml0IG9wdGlvbnMgZnJvbSBwYXJlbnQgZm9yIHRoaXMgb3BlcmF0aW9uLlxuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBydW5fY29tbWFuZF8xLlJ1bkNvbW1hbmRPcGVyYXRpb24odGhpcywgY29tbWFuZCwgb3B0aW9ucykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIGFuIGFnZ3JlZ2F0aW9uIGZyYW1ld29yayBwaXBlbGluZSBhZ2FpbnN0IHRoZSBkYXRhYmFzZSwgbmVlZHMgTW9uZ29EQiBcXD49IDMuNlxuICAgICAqXG4gICAgICogQHBhcmFtIHBpcGVsaW5lIC0gQW4gYXJyYXkgb2YgYWdncmVnYXRpb24gc3RhZ2VzIHRvIGJlIGV4ZWN1dGVkXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhZ2dyZWdhdGUocGlwZWxpbmUgPSBbXSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IGFnZ3JlZ2F0aW9uX2N1cnNvcl8xLkFnZ3JlZ2F0aW9uQ3Vyc29yKHRoaXMuY2xpZW50LCB0aGlzLnMubmFtZXNwYWNlLCBwaXBlbGluZSwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqIFJldHVybiB0aGUgQWRtaW4gZGIgaW5zdGFuY2UgKi9cbiAgICBhZG1pbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhZG1pbl8xLkFkbWluKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIGEgTW9uZ29EQiBDb2xsZWN0aW9uLiBJZiBpdCBkb2VzIG5vdCBleGlzdCBpdCB3aWxsIGJlIGNyZWF0ZWQgaW1wbGljaXRseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIC0gdGhlIGNvbGxlY3Rpb24gbmFtZSB3ZSB3aXNoIHRvIGFjY2Vzcy5cbiAgICAgKiBAcmV0dXJucyByZXR1cm4gdGhlIG5ldyBDb2xsZWN0aW9uIGluc3RhbmNlXG4gICAgICovXG4gICAgY29sbGVjdGlvbihuYW1lLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdUaGUgY2FsbGJhY2sgZm9ybSBvZiB0aGlzIGhlbHBlciBoYXMgYmVlbiByZW1vdmVkLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgY29sbGVjdGlvbl8xLkNvbGxlY3Rpb24odGhpcywgbmFtZSwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGFsbCB0aGUgZGIgc3RhdGlzdGljcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgc3RhdHMob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBzdGF0c18xLkRiU3RhdHNPcGVyYXRpb24odGhpcywgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIGxpc3RDb2xsZWN0aW9ucyhmaWx0ZXIgPSB7fSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiBuZXcgbGlzdF9jb2xsZWN0aW9uc19jdXJzb3JfMS5MaXN0Q29sbGVjdGlvbnNDdXJzb3IodGhpcywgZmlsdGVyLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW5hbWUgYSBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIG9wZXJhdGlvbiBkb2VzIG5vdCBpbmhlcml0IG9wdGlvbnMgZnJvbSB0aGUgTW9uZ29DbGllbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZnJvbUNvbGxlY3Rpb24gLSBOYW1lIG9mIGN1cnJlbnQgY29sbGVjdGlvbiB0byByZW5hbWVcbiAgICAgKiBAcGFyYW0gdG9Db2xsZWN0aW9uIC0gTmV3IG5hbWUgb2Ygb2YgdGhlIGNvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIHJlbmFtZUNvbGxlY3Rpb24oZnJvbUNvbGxlY3Rpb24sIHRvQ29sbGVjdGlvbiwgb3B0aW9ucykge1xuICAgICAgICAvLyBJbnRlbnRpb25hbGx5LCB3ZSBkbyBub3QgaW5oZXJpdCBvcHRpb25zIGZyb20gcGFyZW50IGZvciB0aGlzIG9wZXJhdGlvbi5cbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgcmVuYW1lXzEuUmVuYW1lT3BlcmF0aW9uKHRoaXMuY29sbGVjdGlvbihmcm9tQ29sbGVjdGlvbiksIHRvQ29sbGVjdGlvbiwgeyAuLi5vcHRpb25zLCBuZXdfY29sbGVjdGlvbjogdHJ1ZSwgcmVhZFByZWZlcmVuY2U6IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLnByaW1hcnkgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEcm9wIGEgY29sbGVjdGlvbiBmcm9tIHRoZSBkYXRhYmFzZSwgcmVtb3ZpbmcgaXQgcGVybWFuZW50bHkuIE5ldyBhY2Nlc3NlcyB3aWxsIGNyZWF0ZSBhIG5ldyBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgLSBOYW1lIG9mIGNvbGxlY3Rpb24gdG8gZHJvcFxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgZHJvcENvbGxlY3Rpb24obmFtZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBkcm9wXzEuRHJvcENvbGxlY3Rpb25PcGVyYXRpb24odGhpcywgbmFtZSwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyb3AgYSBkYXRhYmFzZSwgcmVtb3ZpbmcgaXQgcGVybWFuZW50bHkgZnJvbSB0aGUgc2VydmVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBkcm9wRGF0YWJhc2Uob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBkcm9wXzEuRHJvcERhdGFiYXNlT3BlcmF0aW9uKHRoaXMsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaCBhbGwgY29sbGVjdGlvbnMgZm9yIHRoZSBjdXJyZW50IGRiLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBjb2xsZWN0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGNvbGxlY3Rpb25zXzEuQ29sbGVjdGlvbnNPcGVyYXRpb24odGhpcywgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5kZXggb24gdGhlIGRiIGFuZCBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgLSBOYW1lIG9mIHRoZSBjb2xsZWN0aW9uIHRvIGNyZWF0ZSB0aGUgaW5kZXggb24uXG4gICAgICogQHBhcmFtIGluZGV4U3BlYyAtIFNwZWNpZnkgdGhlIGZpZWxkIHRvIGluZGV4LCBvciBhbiBpbmRleCBzcGVjaWZpY2F0aW9uXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBjcmVhdGVJbmRleChuYW1lLCBpbmRleFNwZWMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgaW5kZXhlc18xLkNyZWF0ZUluZGV4T3BlcmF0aW9uKHRoaXMsIG5hbWUsIGluZGV4U3BlYywgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIHVzZXIgdG8gdGhlIGRhdGFiYXNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXNlcm5hbWUgLSBUaGUgdXNlcm5hbWUgZm9yIHRoZSBuZXcgdXNlclxuICAgICAqIEBwYXJhbSBwYXNzd29yZE9yT3B0aW9ucyAtIEFuIG9wdGlvbmFsIHBhc3N3b3JkIGZvciB0aGUgbmV3IHVzZXIsIG9yIHRoZSBvcHRpb25zIGZvciB0aGUgY29tbWFuZFxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBjcmVhdGVVc2VyIGNvbW1hbmQgaW4gYGRiLmNvbW1hbmQoKWAgaW5zdGVhZC5cbiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9jb21tYW5kL2NyZWF0ZVVzZXIvXG4gICAgICovXG4gICAgYXN5bmMgYWRkVXNlcih1c2VybmFtZSwgcGFzc3dvcmRPck9wdGlvbnMsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9XG4gICAgICAgICAgICBvcHRpb25zICE9IG51bGwgJiYgdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zXG4gICAgICAgICAgICAgICAgOiBwYXNzd29yZE9yT3B0aW9ucyAhPSBudWxsICYmIHR5cGVvZiBwYXNzd29yZE9yT3B0aW9ucyA9PT0gJ29iamVjdCdcbiAgICAgICAgICAgICAgICAgICAgPyBwYXNzd29yZE9yT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgcGFzc3dvcmQgPSB0eXBlb2YgcGFzc3dvcmRPck9wdGlvbnMgPT09ICdzdHJpbmcnID8gcGFzc3dvcmRPck9wdGlvbnMgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGFkZF91c2VyXzEuQWRkVXNlck9wZXJhdGlvbih0aGlzLCB1c2VybmFtZSwgcGFzc3dvcmQsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSB1c2VyIGZyb20gYSBkYXRhYmFzZVxuICAgICAqXG4gICAgICogQHBhcmFtIHVzZXJuYW1lIC0gVGhlIHVzZXJuYW1lIHRvIHJlbW92ZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgcmVtb3ZlVXNlcih1c2VybmFtZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyByZW1vdmVfdXNlcl8xLlJlbW92ZVVzZXJPcGVyYXRpb24odGhpcywgdXNlcm5hbWUsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGN1cnJlbnQgcHJvZmlsaW5nIGxldmVsIG9mIE1vbmdvREJcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsZXZlbCAtIFRoZSBuZXcgcHJvZmlsaW5nIGxldmVsIChvZmYsIHNsb3dfb25seSwgYWxsKS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIHNldFByb2ZpbGluZ0xldmVsKGxldmVsLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IHNldF9wcm9maWxpbmdfbGV2ZWxfMS5TZXRQcm9maWxpbmdMZXZlbE9wZXJhdGlvbih0aGlzLCBsZXZlbCwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIHRoZSBjdXJyZW50IHByb2ZpbGluZyBMZXZlbCBmb3IgTW9uZ29EQlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBwcm9maWxpbmdMZXZlbChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IHByb2ZpbGluZ19sZXZlbF8xLlByb2ZpbGluZ0xldmVsT3BlcmF0aW9uKHRoaXMsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhpcyBjb2xsZWN0aW9ucyBpbmRleCBpbmZvLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIGluZGV4SW5mb3JtYXRpb24obmFtZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBpbmRleGVzXzEuSW5kZXhJbmZvcm1hdGlvbk9wZXJhdGlvbih0aGlzLCBuYW1lLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IENoYW5nZSBTdHJlYW0sIHdhdGNoaW5nIGZvciBuZXcgY2hhbmdlcyAoaW5zZXJ0aW9ucywgdXBkYXRlcyxcbiAgICAgKiByZXBsYWNlbWVudHMsIGRlbGV0aW9ucywgYW5kIGludmFsaWRhdGlvbnMpIGluIHRoaXMgZGF0YWJhc2UuIFdpbGwgaWdub3JlIGFsbFxuICAgICAqIGNoYW5nZXMgdG8gc3lzdGVtIGNvbGxlY3Rpb25zLlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiB3YXRjaCgpIGFjY2VwdHMgdHdvIGdlbmVyaWMgYXJndW1lbnRzIGZvciBkaXN0aW5jdCB1c2UgY2FzZXM6XG4gICAgICogLSBUaGUgZmlyc3QgaXMgdG8gcHJvdmlkZSB0aGUgc2NoZW1hIHRoYXQgbWF5IGJlIGRlZmluZWQgZm9yIGFsbCB0aGUgY29sbGVjdGlvbnMgd2l0aGluIHRoaXMgZGF0YWJhc2VcbiAgICAgKiAtIFRoZSBzZWNvbmQgaXMgdG8gb3ZlcnJpZGUgdGhlIHNoYXBlIG9mIHRoZSBjaGFuZ2Ugc3RyZWFtIGRvY3VtZW50IGVudGlyZWx5LCBpZiBpdCBpcyBub3QgcHJvdmlkZWQgdGhlIHR5cGUgd2lsbCBkZWZhdWx0IHRvIENoYW5nZVN0cmVhbURvY3VtZW50IG9mIHRoZSBmaXJzdCBhcmd1bWVudFxuICAgICAqXG4gICAgICogQHBhcmFtIHBpcGVsaW5lIC0gQW4gYXJyYXkgb2Yge0BsaW5rIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9vcGVyYXRvci9hZ2dyZWdhdGlvbi1waXBlbGluZS98YWdncmVnYXRpb24gcGlwZWxpbmUgc3RhZ2VzfSB0aHJvdWdoIHdoaWNoIHRvIHBhc3MgY2hhbmdlIHN0cmVhbSBkb2N1bWVudHMuIFRoaXMgYWxsb3dzIGZvciBmaWx0ZXJpbmcgKHVzaW5nICRtYXRjaCkgYW5kIG1hbmlwdWxhdGluZyB0aGUgY2hhbmdlIHN0cmVhbSBkb2N1bWVudHMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKiBAdHlwZVBhcmFtIFRTY2hlbWEgLSBUeXBlIG9mIHRoZSBkYXRhIGJlaW5nIGRldGVjdGVkIGJ5IHRoZSBjaGFuZ2Ugc3RyZWFtXG4gICAgICogQHR5cGVQYXJhbSBUQ2hhbmdlIC0gVHlwZSBvZiB0aGUgd2hvbGUgY2hhbmdlIHN0cmVhbSBkb2N1bWVudCBlbWl0dGVkXG4gICAgICovXG4gICAgd2F0Y2gocGlwZWxpbmUgPSBbXSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIC8vIEFsbG93IG9wdGlvbmFsbHkgbm90IHNwZWNpZnlpbmcgYSBwaXBlbGluZVxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocGlwZWxpbmUpKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gcGlwZWxpbmU7XG4gICAgICAgICAgICBwaXBlbGluZSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgY2hhbmdlX3N0cmVhbV8xLkNoYW5nZVN0cmVhbSh0aGlzLCBwaXBlbGluZSwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBsb3cgbGV2ZWwgY3Vyc29yIEFQSSBwcm92aWRpbmcgYmFzaWMgZHJpdmVyIGZ1bmN0aW9uYWxpdHk6XG4gICAgICogLSBDbGllbnRTZXNzaW9uIG1hbmFnZW1lbnRcbiAgICAgKiAtIFJlYWRQcmVmZXJlbmNlIGZvciBzZXJ2ZXIgc2VsZWN0aW9uXG4gICAgICogLSBSdW5uaW5nIGdldE1vcmVzIGF1dG9tYXRpY2FsbHkgd2hlbiBhIGxvY2FsIGJhdGNoIGlzIGV4aGF1c3RlZFxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbW1hbmQgLSBUaGUgY29tbWFuZCB0aGF0IHdpbGwgc3RhcnQgYSBjdXJzb3Igb24gdGhlIHNlcnZlci5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIENvbmZpZ3VyYXRpb25zIGZvciBydW5uaW5nIHRoZSBjb21tYW5kLCBic29uIG9wdGlvbnMgd2lsbCBhcHBseSB0byBnZXRNb3Jlc1xuICAgICAqL1xuICAgIHJ1bkN1cnNvckNvbW1hbmQoY29tbWFuZCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IHJ1bl9jb21tYW5kX2N1cnNvcl8xLlJ1bkNvbW1hbmRDdXJzb3IodGhpcywgY29tbWFuZCwgb3B0aW9ucyk7XG4gICAgfVxufVxuRGIuU1lTVEVNX05BTUVTUEFDRV9DT0xMRUNUSU9OID0gQ09OU1RBTlRTLlNZU1RFTV9OQU1FU1BBQ0VfQ09MTEVDVElPTjtcbkRiLlNZU1RFTV9JTkRFWF9DT0xMRUNUSU9OID0gQ09OU1RBTlRTLlNZU1RFTV9JTkRFWF9DT0xMRUNUSU9OO1xuRGIuU1lTVEVNX1BST0ZJTEVfQ09MTEVDVElPTiA9IENPTlNUQU5UUy5TWVNURU1fUFJPRklMRV9DT0xMRUNUSU9OO1xuRGIuU1lTVEVNX1VTRVJfQ09MTEVDVElPTiA9IENPTlNUQU5UUy5TWVNURU1fVVNFUl9DT0xMRUNUSU9OO1xuRGIuU1lTVEVNX0NPTU1BTkRfQ09MTEVDVElPTiA9IENPTlNUQU5UUy5TWVNURU1fQ09NTUFORF9DT0xMRUNUSU9OO1xuRGIuU1lTVEVNX0pTX0NPTExFQ1RJT04gPSBDT05TVEFOVFMuU1lTVEVNX0pTX0NPTExFQ1RJT047XG5leHBvcnRzLkRiID0gRGI7XG4vLyBUT0RPKE5PREUtMzQ4NCk6IFJlZmFjdG9yIGludG8gTW9uZ29EQk5hbWVzcGFjZVxuLy8gVmFsaWRhdGUgdGhlIGRhdGFiYXNlIG5hbWVcbmZ1bmN0aW9uIHZhbGlkYXRlRGF0YWJhc2VOYW1lKGRhdGFiYXNlTmFtZSkge1xuICAgIGlmICh0eXBlb2YgZGF0YWJhc2VOYW1lICE9PSAnc3RyaW5nJylcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignRGF0YWJhc2UgbmFtZSBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgaWYgKGRhdGFiYXNlTmFtZS5sZW5ndGggPT09IDApXG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0RhdGFiYXNlIG5hbWUgY2Fubm90IGJlIHRoZSBlbXB0eSBzdHJpbmcnKTtcbiAgICBpZiAoZGF0YWJhc2VOYW1lID09PSAnJGV4dGVybmFsJylcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGludmFsaWRDaGFycyA9IFsnICcsICcuJywgJyQnLCAnLycsICdcXFxcJ107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnZhbGlkQ2hhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGRhdGFiYXNlTmFtZS5pbmRleE9mKGludmFsaWRDaGFyc1tpXSkgIT09IC0xKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcihgZGF0YWJhc2UgbmFtZXMgY2Fubm90IGNvbnRhaW4gdGhlIGNoYXJhY3RlciAnJHtpbnZhbGlkQ2hhcnNbaV19J2ApO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRiLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkRiIiwiYWRtaW5fMSIsInJlcXVpcmUiLCJic29uXzEiLCJjaGFuZ2Vfc3RyZWFtXzEiLCJjb2xsZWN0aW9uXzEiLCJDT05TVEFOVFMiLCJhZ2dyZWdhdGlvbl9jdXJzb3JfMSIsImxpc3RfY29sbGVjdGlvbnNfY3Vyc29yXzEiLCJydW5fY29tbWFuZF9jdXJzb3JfMSIsImVycm9yXzEiLCJhZGRfdXNlcl8xIiwiY29sbGVjdGlvbnNfMSIsImNyZWF0ZV9jb2xsZWN0aW9uXzEiLCJkcm9wXzEiLCJleGVjdXRlX29wZXJhdGlvbl8xIiwiaW5kZXhlc18xIiwicHJvZmlsaW5nX2xldmVsXzEiLCJyZW1vdmVfdXNlcl8xIiwicmVuYW1lXzEiLCJydW5fY29tbWFuZF8xIiwic2V0X3Byb2ZpbGluZ19sZXZlbF8xIiwic3RhdHNfMSIsInJlYWRfY29uY2Vybl8xIiwicmVhZF9wcmVmZXJlbmNlXzEiLCJ1dGlsc18xIiwid3JpdGVfY29uY2Vybl8xIiwiREJfT1BUSU9OU19BTExPV19MSVNUIiwiY29uc3RydWN0b3IiLCJjbGllbnQiLCJkYXRhYmFzZU5hbWUiLCJvcHRpb25zIiwiZmlsdGVyT3B0aW9ucyIsInZhbGlkYXRlRGF0YWJhc2VOYW1lIiwicyIsInJlYWRQcmVmZXJlbmNlIiwiUmVhZFByZWZlcmVuY2UiLCJmcm9tT3B0aW9ucyIsImJzb25PcHRpb25zIiwicmVzb2x2ZUJTT05PcHRpb25zIiwicGtGYWN0b3J5IiwiREVGQVVMVF9QS19GQUNUT1JZIiwicmVhZENvbmNlcm4iLCJSZWFkQ29uY2VybiIsIndyaXRlQ29uY2VybiIsIldyaXRlQ29uY2VybiIsIm5hbWVzcGFjZSIsIk1vbmdvREJOYW1lc3BhY2UiLCJkYiIsInNlY29uZGFyeU9rIiwicHJlZmVyZW5jZSIsInRvU3RyaW5nIiwiY3JlYXRlQ29sbGVjdGlvbiIsIm5hbWUiLCJleGVjdXRlT3BlcmF0aW9uIiwiQ3JlYXRlQ29sbGVjdGlvbk9wZXJhdGlvbiIsInJlc29sdmVPcHRpb25zIiwiY29tbWFuZCIsIlJ1bkNvbW1hbmRPcGVyYXRpb24iLCJhZ2dyZWdhdGUiLCJwaXBlbGluZSIsIkFnZ3JlZ2F0aW9uQ3Vyc29yIiwiYWRtaW4iLCJBZG1pbiIsImNvbGxlY3Rpb24iLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiQ29sbGVjdGlvbiIsInN0YXRzIiwiRGJTdGF0c09wZXJhdGlvbiIsImxpc3RDb2xsZWN0aW9ucyIsImZpbHRlciIsIkxpc3RDb2xsZWN0aW9uc0N1cnNvciIsInJlbmFtZUNvbGxlY3Rpb24iLCJmcm9tQ29sbGVjdGlvbiIsInRvQ29sbGVjdGlvbiIsIlJlbmFtZU9wZXJhdGlvbiIsIm5ld19jb2xsZWN0aW9uIiwicHJpbWFyeSIsImRyb3BDb2xsZWN0aW9uIiwiRHJvcENvbGxlY3Rpb25PcGVyYXRpb24iLCJkcm9wRGF0YWJhc2UiLCJEcm9wRGF0YWJhc2VPcGVyYXRpb24iLCJjb2xsZWN0aW9ucyIsIkNvbGxlY3Rpb25zT3BlcmF0aW9uIiwiY3JlYXRlSW5kZXgiLCJpbmRleFNwZWMiLCJDcmVhdGVJbmRleE9wZXJhdGlvbiIsImFkZFVzZXIiLCJ1c2VybmFtZSIsInBhc3N3b3JkT3JPcHRpb25zIiwidW5kZWZpbmVkIiwicGFzc3dvcmQiLCJBZGRVc2VyT3BlcmF0aW9uIiwicmVtb3ZlVXNlciIsIlJlbW92ZVVzZXJPcGVyYXRpb24iLCJzZXRQcm9maWxpbmdMZXZlbCIsImxldmVsIiwiU2V0UHJvZmlsaW5nTGV2ZWxPcGVyYXRpb24iLCJwcm9maWxpbmdMZXZlbCIsIlByb2ZpbGluZ0xldmVsT3BlcmF0aW9uIiwiaW5kZXhJbmZvcm1hdGlvbiIsIkluZGV4SW5mb3JtYXRpb25PcGVyYXRpb24iLCJ3YXRjaCIsIkFycmF5IiwiaXNBcnJheSIsIkNoYW5nZVN0cmVhbSIsInJ1bkN1cnNvckNvbW1hbmQiLCJSdW5Db21tYW5kQ3Vyc29yIiwiU1lTVEVNX05BTUVTUEFDRV9DT0xMRUNUSU9OIiwiU1lTVEVNX0lOREVYX0NPTExFQ1RJT04iLCJTWVNURU1fUFJPRklMRV9DT0xMRUNUSU9OIiwiU1lTVEVNX1VTRVJfQ09MTEVDVElPTiIsIlNZU1RFTV9DT01NQU5EX0NPTExFQ1RJT04iLCJTWVNURU1fSlNfQ09MTEVDVElPTiIsImxlbmd0aCIsImludmFsaWRDaGFycyIsImkiLCJpbmRleE9mIiwiTW9uZ29BUElFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/db.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/deps.js":
/*!******************************************!*\
  !*** ./node_modules/mongodb/lib/deps.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AutoEncryptionLoggerLevel = exports.aws4 = exports.saslprep = exports.getSnappy = exports.getAwsCredentialProvider = exports.getZstdLibrary = exports.ZStandard = exports.getKerberos = exports.Kerberos = void 0;\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nfunction makeErrorModule(error) {\n    const props = error ? {\n        kModuleError: error\n    } : {};\n    return new Proxy(props, {\n        get: (_, key)=>{\n            if (key === \"kModuleError\") {\n                return error;\n            }\n            throw error;\n        },\n        set: ()=>{\n            throw error;\n        }\n    });\n}\nexports.Kerberos = makeErrorModule(new error_1.MongoMissingDependencyError(\"Optional module `kerberos` not found. Please install it to enable kerberos authentication\"));\nfunction getKerberos() {\n    try {\n        // Ensure you always wrap an optional require in the try block NODE-3199\n        exports.Kerberos = __webpack_require__(/*! kerberos */ \"?07fb\");\n        return exports.Kerberos;\n    } catch  {\n        return exports.Kerberos;\n    }\n}\nexports.getKerberos = getKerberos;\nexports.ZStandard = makeErrorModule(new error_1.MongoMissingDependencyError(\"Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression\"));\nfunction getZstdLibrary() {\n    try {\n        exports.ZStandard = __webpack_require__(/*! @mongodb-js/zstd */ \"?e185\");\n        return exports.ZStandard;\n    } catch  {\n        return exports.ZStandard;\n    }\n}\nexports.getZstdLibrary = getZstdLibrary;\nfunction getAwsCredentialProvider() {\n    try {\n        // Ensure you always wrap an optional require in the try block NODE-3199\n        const credentialProvider = __webpack_require__(/*! @aws-sdk/credential-providers */ \"?4bb6\");\n        return credentialProvider;\n    } catch  {\n        return makeErrorModule(new error_1.MongoMissingDependencyError(\"Optional module `@aws-sdk/credential-providers` not found.\" + \" Please install it to enable getting aws credentials via the official sdk.\"));\n    }\n}\nexports.getAwsCredentialProvider = getAwsCredentialProvider;\nfunction getSnappy() {\n    try {\n        // Ensure you always wrap an optional require in the try block NODE-3199\n        const value = __webpack_require__(/*! snappy */ \"?aa0a\");\n        return value;\n    } catch (cause) {\n        const kModuleError = new error_1.MongoMissingDependencyError(\"Optional module `snappy` not found. Please install it to enable snappy compression\", {\n            cause\n        });\n        return {\n            kModuleError\n        };\n    }\n}\nexports.getSnappy = getSnappy;\nexports.saslprep = makeErrorModule(new error_1.MongoMissingDependencyError(\"Optional module `saslprep` not found.\" + \" Please install it to enable Stringprep Profile for User Names and Passwords\"));\ntry {\n    // Ensure you always wrap an optional require in the try block NODE-3199\n    exports.saslprep = __webpack_require__(/*! @mongodb-js/saslprep */ \"(ssr)/./node_modules/@mongodb-js/saslprep/dist/index.js\");\n} catch  {} // eslint-disable-line\nexports.aws4 = makeErrorModule(new error_1.MongoMissingDependencyError(\"Optional module `aws4` not found. Please install it to enable AWS authentication\"));\ntry {\n    // Ensure you always wrap an optional require in the try block NODE-3199\n    exports.aws4 = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'aws4'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n} catch  {} // eslint-disable-line\n/** @public */ exports.AutoEncryptionLoggerLevel = Object.freeze({\n    FatalError: 0,\n    Error: 1,\n    Warning: 2,\n    Info: 3,\n    Trace: 4\n}); //# sourceMappingURL=deps.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZGVwcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsaUNBQWlDLEdBQUdBLFlBQVksR0FBR0EsZ0JBQWdCLEdBQUdBLGlCQUFpQixHQUFHQSxnQ0FBZ0MsR0FBR0Esc0JBQXNCLEdBQUdBLGlCQUFpQixHQUFHQSxtQkFBbUIsR0FBR0EsZ0JBQWdCLEdBQUcsS0FBSztBQUN4TixNQUFNVyxVQUFVQyxtQkFBT0EsQ0FBQywwREFBUztBQUNqQyxTQUFTQyxnQkFBZ0JDLEtBQUs7SUFDMUIsTUFBTUMsUUFBUUQsUUFBUTtRQUFFRSxjQUFjRjtJQUFNLElBQUksQ0FBQztJQUNqRCxPQUFPLElBQUlHLE1BQU1GLE9BQU87UUFDcEJHLEtBQUssQ0FBQ0MsR0FBR0M7WUFDTCxJQUFJQSxRQUFRLGdCQUFnQjtnQkFDeEIsT0FBT047WUFDWDtZQUNBLE1BQU1BO1FBQ1Y7UUFDQU8sS0FBSztZQUNELE1BQU1QO1FBQ1Y7SUFDSjtBQUNKO0FBQ0FkLGdCQUFnQixHQUFHYSxnQkFBZ0IsSUFBSUYsUUFBUVcsMkJBQTJCLENBQUM7QUFDM0UsU0FBU2I7SUFDTCxJQUFJO1FBQ0Esd0VBQXdFO1FBQ3hFVCwrREFBMkI7UUFDM0IsT0FBT0EsUUFBUVUsUUFBUTtJQUMzQixFQUNBLE9BQU07UUFDRixPQUFPVixRQUFRVSxRQUFRO0lBQzNCO0FBQ0o7QUFDQVYsbUJBQW1CLEdBQUdTO0FBQ3RCVCxpQkFBaUIsR0FBR2EsZ0JBQWdCLElBQUlGLFFBQVFXLDJCQUEyQixDQUFDO0FBQzVFLFNBQVNmO0lBQ0wsSUFBSTtRQUNBUCx3RUFBNEI7UUFDNUIsT0FBT0EsUUFBUVEsU0FBUztJQUM1QixFQUNBLE9BQU07UUFDRixPQUFPUixRQUFRUSxTQUFTO0lBQzVCO0FBQ0o7QUFDQVIsc0JBQXNCLEdBQUdPO0FBQ3pCLFNBQVNEO0lBQ0wsSUFBSTtRQUNBLHdFQUF3RTtRQUN4RSxNQUFNaUIscUJBQXFCWCxtQkFBT0EsQ0FBQztRQUNuQyxPQUFPVztJQUNYLEVBQ0EsT0FBTTtRQUNGLE9BQU9WLGdCQUFnQixJQUFJRixRQUFRVywyQkFBMkIsQ0FBQywrREFDM0Q7SUFDUjtBQUNKO0FBQ0F0QixnQ0FBZ0MsR0FBR007QUFDbkMsU0FBU0Q7SUFDTCxJQUFJO1FBQ0Esd0VBQXdFO1FBQ3hFLE1BQU1KLFFBQVFXLG1CQUFPQSxDQUFDO1FBQ3RCLE9BQU9YO0lBQ1gsRUFDQSxPQUFPdUIsT0FBTztRQUNWLE1BQU1SLGVBQWUsSUFBSUwsUUFBUVcsMkJBQTJCLENBQUMsc0ZBQXNGO1lBQUVFO1FBQU07UUFDM0osT0FBTztZQUFFUjtRQUFhO0lBQzFCO0FBQ0o7QUFDQWhCLGlCQUFpQixHQUFHSztBQUNwQkwsZ0JBQWdCLEdBQUdhLGdCQUFnQixJQUFJRixRQUFRVywyQkFBMkIsQ0FBQywwQ0FDdkU7QUFDSixJQUFJO0lBQ0Esd0VBQXdFO0lBQ3hFdEIsNkhBQTJCO0FBQy9CLEVBQ0EsT0FBTSxDQUFFLEVBQUUsc0JBQXNCO0FBQ2hDQSxZQUFZLEdBQUdhLGdCQUFnQixJQUFJRixRQUFRVywyQkFBMkIsQ0FBQztBQUN2RSxJQUFJO0lBQ0Esd0VBQXdFO0lBQ3hFdEIsa0pBQXVCO0FBQzNCLEVBQ0EsT0FBTSxDQUFFLEVBQUUsc0JBQXNCO0FBQ2hDLFlBQVksR0FDWkEsaUNBQWlDLEdBQUdGLE9BQU8yQixNQUFNLENBQUM7SUFDOUNDLFlBQVk7SUFDWkMsT0FBTztJQUNQQyxTQUFTO0lBQ1RDLE1BQU07SUFDTkMsT0FBTztBQUNYLElBQ0EsZ0NBQWdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2RlcHMuanM/OGVlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQXV0b0VuY3J5cHRpb25Mb2dnZXJMZXZlbCA9IGV4cG9ydHMuYXdzNCA9IGV4cG9ydHMuc2FzbHByZXAgPSBleHBvcnRzLmdldFNuYXBweSA9IGV4cG9ydHMuZ2V0QXdzQ3JlZGVudGlhbFByb3ZpZGVyID0gZXhwb3J0cy5nZXRac3RkTGlicmFyeSA9IGV4cG9ydHMuWlN0YW5kYXJkID0gZXhwb3J0cy5nZXRLZXJiZXJvcyA9IGV4cG9ydHMuS2VyYmVyb3MgPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4vZXJyb3JcIik7XG5mdW5jdGlvbiBtYWtlRXJyb3JNb2R1bGUoZXJyb3IpIHtcbiAgICBjb25zdCBwcm9wcyA9IGVycm9yID8geyBrTW9kdWxlRXJyb3I6IGVycm9yIH0gOiB7fTtcbiAgICByZXR1cm4gbmV3IFByb3h5KHByb3BzLCB7XG4gICAgICAgIGdldDogKF8sIGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2tNb2R1bGVFcnJvcicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiAoKSA9PiB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuZXhwb3J0cy5LZXJiZXJvcyA9IG1ha2VFcnJvck1vZHVsZShuZXcgZXJyb3JfMS5Nb25nb01pc3NpbmdEZXBlbmRlbmN5RXJyb3IoJ09wdGlvbmFsIG1vZHVsZSBga2VyYmVyb3NgIG5vdCBmb3VuZC4gUGxlYXNlIGluc3RhbGwgaXQgdG8gZW5hYmxlIGtlcmJlcm9zIGF1dGhlbnRpY2F0aW9uJykpO1xuZnVuY3Rpb24gZ2V0S2VyYmVyb3MoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gRW5zdXJlIHlvdSBhbHdheXMgd3JhcCBhbiBvcHRpb25hbCByZXF1aXJlIGluIHRoZSB0cnkgYmxvY2sgTk9ERS0zMTk5XG4gICAgICAgIGV4cG9ydHMuS2VyYmVyb3MgPSByZXF1aXJlKCdrZXJiZXJvcycpO1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5LZXJiZXJvcztcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5LZXJiZXJvcztcbiAgICB9XG59XG5leHBvcnRzLmdldEtlcmJlcm9zID0gZ2V0S2VyYmVyb3M7XG5leHBvcnRzLlpTdGFuZGFyZCA9IG1ha2VFcnJvck1vZHVsZShuZXcgZXJyb3JfMS5Nb25nb01pc3NpbmdEZXBlbmRlbmN5RXJyb3IoJ09wdGlvbmFsIG1vZHVsZSBgQG1vbmdvZGItanMvenN0ZGAgbm90IGZvdW5kLiBQbGVhc2UgaW5zdGFsbCBpdCB0byBlbmFibGUgenN0ZCBjb21wcmVzc2lvbicpKTtcbmZ1bmN0aW9uIGdldFpzdGRMaWJyYXJ5KCkge1xuICAgIHRyeSB7XG4gICAgICAgIGV4cG9ydHMuWlN0YW5kYXJkID0gcmVxdWlyZSgnQG1vbmdvZGItanMvenN0ZCcpO1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5aU3RhbmRhcmQ7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuWlN0YW5kYXJkO1xuICAgIH1cbn1cbmV4cG9ydHMuZ2V0WnN0ZExpYnJhcnkgPSBnZXRac3RkTGlicmFyeTtcbmZ1bmN0aW9uIGdldEF3c0NyZWRlbnRpYWxQcm92aWRlcigpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBFbnN1cmUgeW91IGFsd2F5cyB3cmFwIGFuIG9wdGlvbmFsIHJlcXVpcmUgaW4gdGhlIHRyeSBibG9jayBOT0RFLTMxOTlcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbFByb3ZpZGVyID0gcmVxdWlyZSgnQGF3cy1zZGsvY3JlZGVudGlhbC1wcm92aWRlcnMnKTtcbiAgICAgICAgcmV0dXJuIGNyZWRlbnRpYWxQcm92aWRlcjtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gbWFrZUVycm9yTW9kdWxlKG5ldyBlcnJvcl8xLk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvcignT3B0aW9uYWwgbW9kdWxlIGBAYXdzLXNkay9jcmVkZW50aWFsLXByb3ZpZGVyc2Agbm90IGZvdW5kLicgK1xuICAgICAgICAgICAgJyBQbGVhc2UgaW5zdGFsbCBpdCB0byBlbmFibGUgZ2V0dGluZyBhd3MgY3JlZGVudGlhbHMgdmlhIHRoZSBvZmZpY2lhbCBzZGsuJykpO1xuICAgIH1cbn1cbmV4cG9ydHMuZ2V0QXdzQ3JlZGVudGlhbFByb3ZpZGVyID0gZ2V0QXdzQ3JlZGVudGlhbFByb3ZpZGVyO1xuZnVuY3Rpb24gZ2V0U25hcHB5KCkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIEVuc3VyZSB5b3UgYWx3YXlzIHdyYXAgYW4gb3B0aW9uYWwgcmVxdWlyZSBpbiB0aGUgdHJ5IGJsb2NrIE5PREUtMzE5OVxuICAgICAgICBjb25zdCB2YWx1ZSA9IHJlcXVpcmUoJ3NuYXBweScpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGNhdGNoIChjYXVzZSkge1xuICAgICAgICBjb25zdCBrTW9kdWxlRXJyb3IgPSBuZXcgZXJyb3JfMS5Nb25nb01pc3NpbmdEZXBlbmRlbmN5RXJyb3IoJ09wdGlvbmFsIG1vZHVsZSBgc25hcHB5YCBub3QgZm91bmQuIFBsZWFzZSBpbnN0YWxsIGl0IHRvIGVuYWJsZSBzbmFwcHkgY29tcHJlc3Npb24nLCB7IGNhdXNlIH0pO1xuICAgICAgICByZXR1cm4geyBrTW9kdWxlRXJyb3IgfTtcbiAgICB9XG59XG5leHBvcnRzLmdldFNuYXBweSA9IGdldFNuYXBweTtcbmV4cG9ydHMuc2FzbHByZXAgPSBtYWtlRXJyb3JNb2R1bGUobmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nRGVwZW5kZW5jeUVycm9yKCdPcHRpb25hbCBtb2R1bGUgYHNhc2xwcmVwYCBub3QgZm91bmQuJyArXG4gICAgJyBQbGVhc2UgaW5zdGFsbCBpdCB0byBlbmFibGUgU3RyaW5ncHJlcCBQcm9maWxlIGZvciBVc2VyIE5hbWVzIGFuZCBQYXNzd29yZHMnKSk7XG50cnkge1xuICAgIC8vIEVuc3VyZSB5b3UgYWx3YXlzIHdyYXAgYW4gb3B0aW9uYWwgcmVxdWlyZSBpbiB0aGUgdHJ5IGJsb2NrIE5PREUtMzE5OVxuICAgIGV4cG9ydHMuc2FzbHByZXAgPSByZXF1aXJlKCdAbW9uZ29kYi1qcy9zYXNscHJlcCcpO1xufVxuY2F0Y2ggeyB9IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbmV4cG9ydHMuYXdzNCA9IG1ha2VFcnJvck1vZHVsZShuZXcgZXJyb3JfMS5Nb25nb01pc3NpbmdEZXBlbmRlbmN5RXJyb3IoJ09wdGlvbmFsIG1vZHVsZSBgYXdzNGAgbm90IGZvdW5kLiBQbGVhc2UgaW5zdGFsbCBpdCB0byBlbmFibGUgQVdTIGF1dGhlbnRpY2F0aW9uJykpO1xudHJ5IHtcbiAgICAvLyBFbnN1cmUgeW91IGFsd2F5cyB3cmFwIGFuIG9wdGlvbmFsIHJlcXVpcmUgaW4gdGhlIHRyeSBibG9jayBOT0RFLTMxOTlcbiAgICBleHBvcnRzLmF3czQgPSByZXF1aXJlKCdhd3M0Jyk7XG59XG5jYXRjaCB7IH0gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydHMuQXV0b0VuY3J5cHRpb25Mb2dnZXJMZXZlbCA9IE9iamVjdC5mcmVlemUoe1xuICAgIEZhdGFsRXJyb3I6IDAsXG4gICAgRXJyb3I6IDEsXG4gICAgV2FybmluZzogMixcbiAgICBJbmZvOiAzLFxuICAgIFRyYWNlOiA0XG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlcHMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQXV0b0VuY3J5cHRpb25Mb2dnZXJMZXZlbCIsImF3czQiLCJzYXNscHJlcCIsImdldFNuYXBweSIsImdldEF3c0NyZWRlbnRpYWxQcm92aWRlciIsImdldFpzdGRMaWJyYXJ5IiwiWlN0YW5kYXJkIiwiZ2V0S2VyYmVyb3MiLCJLZXJiZXJvcyIsImVycm9yXzEiLCJyZXF1aXJlIiwibWFrZUVycm9yTW9kdWxlIiwiZXJyb3IiLCJwcm9wcyIsImtNb2R1bGVFcnJvciIsIlByb3h5IiwiZ2V0IiwiXyIsImtleSIsInNldCIsIk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvciIsImNyZWRlbnRpYWxQcm92aWRlciIsImNhdXNlIiwiZnJlZXplIiwiRmF0YWxFcnJvciIsIkVycm9yIiwiV2FybmluZyIsIkluZm8iLCJUcmFjZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/deps.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/encrypter.js":
/*!***********************************************!*\
  !*** ./node_modules/mongodb/lib/encrypter.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n/* eslint-disable @typescript-eslint/no-var-requires */ Object.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Encrypter = void 0;\nconst constants_1 = __webpack_require__(/*! ./constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_client_1 = __webpack_require__(/*! ./mongo_client */ \"(ssr)/./node_modules/mongodb/lib/mongo_client.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nlet AutoEncrypterClass;\n/** @internal */ const kInternalClient = Symbol(\"internalClient\");\n/** @internal */ class Encrypter {\n    constructor(client, uri, options){\n        if (typeof options.autoEncryption !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError('Option \"autoEncryption\" must be specified');\n        }\n        // initialize to null, if we call getInternalClient, we may set this it is important to not overwrite those function calls.\n        this[kInternalClient] = null;\n        this.bypassAutoEncryption = !!options.autoEncryption.bypassAutoEncryption;\n        this.needsConnecting = false;\n        if (options.maxPoolSize === 0 && options.autoEncryption.keyVaultClient == null) {\n            options.autoEncryption.keyVaultClient = client;\n        } else if (options.autoEncryption.keyVaultClient == null) {\n            options.autoEncryption.keyVaultClient = this.getInternalClient(client, uri, options);\n        }\n        if (this.bypassAutoEncryption) {\n            options.autoEncryption.metadataClient = undefined;\n        } else if (options.maxPoolSize === 0) {\n            options.autoEncryption.metadataClient = client;\n        } else {\n            options.autoEncryption.metadataClient = this.getInternalClient(client, uri, options);\n        }\n        if (options.proxyHost) {\n            options.autoEncryption.proxyOptions = {\n                proxyHost: options.proxyHost,\n                proxyPort: options.proxyPort,\n                proxyUsername: options.proxyUsername,\n                proxyPassword: options.proxyPassword\n            };\n        }\n        this.autoEncrypter = new AutoEncrypterClass(client, options.autoEncryption);\n    }\n    getInternalClient(client, uri, options) {\n        // TODO(NODE-4144): Remove new variable for type narrowing\n        let internalClient = this[kInternalClient];\n        if (internalClient == null) {\n            const clonedOptions = {};\n            for (const key of [\n                ...Object.getOwnPropertyNames(options),\n                ...Object.getOwnPropertySymbols(options)\n            ]){\n                if ([\n                    \"autoEncryption\",\n                    \"minPoolSize\",\n                    \"servers\",\n                    \"caseTranslate\",\n                    \"dbName\"\n                ].includes(key)) continue;\n                Reflect.set(clonedOptions, key, Reflect.get(options, key));\n            }\n            clonedOptions.minPoolSize = 0;\n            internalClient = new mongo_client_1.MongoClient(uri, clonedOptions);\n            this[kInternalClient] = internalClient;\n            for (const eventName of constants_1.MONGO_CLIENT_EVENTS){\n                for (const listener of client.listeners(eventName)){\n                    internalClient.on(eventName, listener);\n                }\n            }\n            client.on(\"newListener\", (eventName, listener)=>{\n                internalClient?.on(eventName, listener);\n            });\n            this.needsConnecting = true;\n        }\n        return internalClient;\n    }\n    async connectInternalClient() {\n        // TODO(NODE-4144): Remove new variable for type narrowing\n        const internalClient = this[kInternalClient];\n        if (this.needsConnecting && internalClient != null) {\n            this.needsConnecting = false;\n            await internalClient.connect();\n        }\n    }\n    close(client, force, callback) {\n        this.autoEncrypter.teardown(!!force, (e)=>{\n            const internalClient = this[kInternalClient];\n            if (internalClient != null && client !== internalClient) {\n                internalClient.close(force).then(()=>callback(), (error)=>callback(error));\n                return;\n            }\n            callback(e);\n        });\n    }\n    static checkForMongoCrypt() {\n        const mongodbClientEncryption = (0, utils_1.getMongoDBClientEncryption)();\n        if (mongodbClientEncryption == null) {\n            throw new error_1.MongoMissingDependencyError(\"Auto-encryption requested, but the module is not installed. \" + \"Please add `mongodb-client-encryption` as a dependency of your project\");\n        }\n        AutoEncrypterClass = mongodbClientEncryption.extension(__webpack_require__(/*! ../lib/index */ \"(ssr)/./node_modules/mongodb/lib/index.js\")).AutoEncrypter;\n    }\n}\nexports.Encrypter = Encrypter; //# sourceMappingURL=encrypter.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZW5jcnlwdGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IscURBQXFELEdBQ3JEQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsaUJBQWlCLEdBQUcsS0FBSztBQUN6QixNQUFNRyxjQUFjQyxtQkFBT0EsQ0FBQyxrRUFBYTtBQUN6QyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQywwREFBUztBQUNqQyxNQUFNRSxpQkFBaUJGLG1CQUFPQSxDQUFDLHdFQUFnQjtBQUMvQyxNQUFNRyxVQUFVSCxtQkFBT0EsQ0FBQywwREFBUztBQUNqQyxJQUFJSTtBQUNKLGNBQWMsR0FDZCxNQUFNQyxrQkFBa0JDLE9BQU87QUFDL0IsY0FBYyxHQUNkLE1BQU1SO0lBQ0ZTLFlBQVlDLE1BQU0sRUFBRUMsR0FBRyxFQUFFQyxPQUFPLENBQUU7UUFDOUIsSUFBSSxPQUFPQSxRQUFRQyxjQUFjLEtBQUssVUFBVTtZQUM1QyxNQUFNLElBQUlWLFFBQVFXLHlCQUF5QixDQUFDO1FBQ2hEO1FBQ0EsMkhBQTJIO1FBQzNILElBQUksQ0FBQ1AsZ0JBQWdCLEdBQUc7UUFDeEIsSUFBSSxDQUFDUSxvQkFBb0IsR0FBRyxDQUFDLENBQUNILFFBQVFDLGNBQWMsQ0FBQ0Usb0JBQW9CO1FBQ3pFLElBQUksQ0FBQ0MsZUFBZSxHQUFHO1FBQ3ZCLElBQUlKLFFBQVFLLFdBQVcsS0FBSyxLQUFLTCxRQUFRQyxjQUFjLENBQUNLLGNBQWMsSUFBSSxNQUFNO1lBQzVFTixRQUFRQyxjQUFjLENBQUNLLGNBQWMsR0FBR1I7UUFDNUMsT0FDSyxJQUFJRSxRQUFRQyxjQUFjLENBQUNLLGNBQWMsSUFBSSxNQUFNO1lBQ3BETixRQUFRQyxjQUFjLENBQUNLLGNBQWMsR0FBRyxJQUFJLENBQUNDLGlCQUFpQixDQUFDVCxRQUFRQyxLQUFLQztRQUNoRjtRQUNBLElBQUksSUFBSSxDQUFDRyxvQkFBb0IsRUFBRTtZQUMzQkgsUUFB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dkQsbUJBQU9BLENBQUMsa0VBQWlCd0QsYUFBYTtJQUNqRztBQUNKO0FBQ0E1RCxpQkFBaUIsR0FBR0UsV0FDcEIscUNBQXFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2VuY3J5cHRlci5qcz85MTI1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlcyAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5FbmNyeXB0ZXIgPSB2b2lkIDA7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi9lcnJvclwiKTtcbmNvbnN0IG1vbmdvX2NsaWVudF8xID0gcmVxdWlyZShcIi4vbW9uZ29fY2xpZW50XCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xubGV0IEF1dG9FbmNyeXB0ZXJDbGFzcztcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtJbnRlcm5hbENsaWVudCA9IFN5bWJvbCgnaW50ZXJuYWxDbGllbnQnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIEVuY3J5cHRlciB7XG4gICAgY29uc3RydWN0b3IoY2xpZW50LCB1cmksIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmF1dG9FbmNyeXB0aW9uICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignT3B0aW9uIFwiYXV0b0VuY3J5cHRpb25cIiBtdXN0IGJlIHNwZWNpZmllZCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGluaXRpYWxpemUgdG8gbnVsbCwgaWYgd2UgY2FsbCBnZXRJbnRlcm5hbENsaWVudCwgd2UgbWF5IHNldCB0aGlzIGl0IGlzIGltcG9ydGFudCB0byBub3Qgb3ZlcndyaXRlIHRob3NlIGZ1bmN0aW9uIGNhbGxzLlxuICAgICAgICB0aGlzW2tJbnRlcm5hbENsaWVudF0gPSBudWxsO1xuICAgICAgICB0aGlzLmJ5cGFzc0F1dG9FbmNyeXB0aW9uID0gISFvcHRpb25zLmF1dG9FbmNyeXB0aW9uLmJ5cGFzc0F1dG9FbmNyeXB0aW9uO1xuICAgICAgICB0aGlzLm5lZWRzQ29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICBpZiAob3B0aW9ucy5tYXhQb29sU2l6ZSA9PT0gMCAmJiBvcHRpb25zLmF1dG9FbmNyeXB0aW9uLmtleVZhdWx0Q2xpZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYXV0b0VuY3J5cHRpb24ua2V5VmF1bHRDbGllbnQgPSBjbGllbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5hdXRvRW5jcnlwdGlvbi5rZXlWYXVsdENsaWVudCA9PSBudWxsKSB7XG4gICAgICAgICAgICBvcHRpb25zLmF1dG9FbmNyeXB0aW9uLmtleVZhdWx0Q2xpZW50ID0gdGhpcy5nZXRJbnRlcm5hbENsaWVudChjbGllbnQsIHVyaSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYnlwYXNzQXV0b0VuY3J5cHRpb24pIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYXV0b0VuY3J5cHRpb24ubWV0YWRhdGFDbGllbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5tYXhQb29sU2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgb3B0aW9ucy5hdXRvRW5jcnlwdGlvbi5tZXRhZGF0YUNsaWVudCA9IGNsaWVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYXV0b0VuY3J5cHRpb24ubWV0YWRhdGFDbGllbnQgPSB0aGlzLmdldEludGVybmFsQ2xpZW50KGNsaWVudCwgdXJpLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5wcm94eUhvc3QpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYXV0b0VuY3J5cHRpb24ucHJveHlPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHByb3h5SG9zdDogb3B0aW9ucy5wcm94eUhvc3QsXG4gICAgICAgICAgICAgICAgcHJveHlQb3J0OiBvcHRpb25zLnByb3h5UG9ydCxcbiAgICAgICAgICAgICAgICBwcm94eVVzZXJuYW1lOiBvcHRpb25zLnByb3h5VXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgcHJveHlQYXNzd29yZDogb3B0aW9ucy5wcm94eVBhc3N3b3JkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXV0b0VuY3J5cHRlciA9IG5ldyBBdXRvRW5jcnlwdGVyQ2xhc3MoY2xpZW50LCBvcHRpb25zLmF1dG9FbmNyeXB0aW9uKTtcbiAgICB9XG4gICAgZ2V0SW50ZXJuYWxDbGllbnQoY2xpZW50LCB1cmksIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gVE9ETyhOT0RFLTQxNDQpOiBSZW1vdmUgbmV3IHZhcmlhYmxlIGZvciB0eXBlIG5hcnJvd2luZ1xuICAgICAgICBsZXQgaW50ZXJuYWxDbGllbnQgPSB0aGlzW2tJbnRlcm5hbENsaWVudF07XG4gICAgICAgIGlmIChpbnRlcm5hbENsaWVudCA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBjbG9uZWRPcHRpb25zID0ge307XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBbXG4gICAgICAgICAgICAgICAgLi4uT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob3B0aW9ucyksXG4gICAgICAgICAgICAgICAgLi4uT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvcHRpb25zKVxuICAgICAgICAgICAgXSkge1xuICAgICAgICAgICAgICAgIGlmIChbJ2F1dG9FbmNyeXB0aW9uJywgJ21pblBvb2xTaXplJywgJ3NlcnZlcnMnLCAnY2FzZVRyYW5zbGF0ZScsICdkYk5hbWUnXS5pbmNsdWRlcyhrZXkpKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBSZWZsZWN0LnNldChjbG9uZWRPcHRpb25zLCBrZXksIFJlZmxlY3QuZ2V0KG9wdGlvbnMsIGtleSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvbmVkT3B0aW9ucy5taW5Qb29sU2l6ZSA9IDA7XG4gICAgICAgICAgICBpbnRlcm5hbENsaWVudCA9IG5ldyBtb25nb19jbGllbnRfMS5Nb25nb0NsaWVudCh1cmksIGNsb25lZE9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpc1trSW50ZXJuYWxDbGllbnRdID0gaW50ZXJuYWxDbGllbnQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGV2ZW50TmFtZSBvZiBjb25zdGFudHNfMS5NT05HT19DTElFTlRfRVZFTlRTKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBjbGllbnQubGlzdGVuZXJzKGV2ZW50TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJuYWxDbGllbnQub24oZXZlbnROYW1lLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xpZW50Lm9uKCduZXdMaXN0ZW5lcicsIChldmVudE5hbWUsIGxpc3RlbmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgaW50ZXJuYWxDbGllbnQ/Lm9uKGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm5lZWRzQ29ubmVjdGluZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGludGVybmFsQ2xpZW50O1xuICAgIH1cbiAgICBhc3luYyBjb25uZWN0SW50ZXJuYWxDbGllbnQoKSB7XG4gICAgICAgIC8vIFRPRE8oTk9ERS00MTQ0KTogUmVtb3ZlIG5ldyB2YXJpYWJsZSBmb3IgdHlwZSBuYXJyb3dpbmdcbiAgICAgICAgY29uc3QgaW50ZXJuYWxDbGllbnQgPSB0aGlzW2tJbnRlcm5hbENsaWVudF07XG4gICAgICAgIGlmICh0aGlzLm5lZWRzQ29ubmVjdGluZyAmJiBpbnRlcm5hbENsaWVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLm5lZWRzQ29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgYXdhaXQgaW50ZXJuYWxDbGllbnQuY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsb3NlKGNsaWVudCwgZm9yY2UsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuYXV0b0VuY3J5cHRlci50ZWFyZG93bighIWZvcmNlLCBlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGludGVybmFsQ2xpZW50ID0gdGhpc1trSW50ZXJuYWxDbGllbnRdO1xuICAgICAgICAgICAgaWYgKGludGVybmFsQ2xpZW50ICE9IG51bGwgJiYgY2xpZW50ICE9PSBpbnRlcm5hbENsaWVudCkge1xuICAgICAgICAgICAgICAgIGludGVybmFsQ2xpZW50LmNsb3NlKGZvcmNlKS50aGVuKCgpID0+IGNhbGxiYWNrKCksIGVycm9yID0+IGNhbGxiYWNrKGVycm9yKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2soZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgY2hlY2tGb3JNb25nb0NyeXB0KCkge1xuICAgICAgICBjb25zdCBtb25nb2RiQ2xpZW50RW5jcnlwdGlvbiA9ICgwLCB1dGlsc18xLmdldE1vbmdvREJDbGllbnRFbmNyeXB0aW9uKSgpO1xuICAgICAgICBpZiAobW9uZ29kYkNsaWVudEVuY3J5cHRpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nRGVwZW5kZW5jeUVycm9yKCdBdXRvLWVuY3J5cHRpb24gcmVxdWVzdGVkLCBidXQgdGhlIG1vZHVsZSBpcyBub3QgaW5zdGFsbGVkLiAnICtcbiAgICAgICAgICAgICAgICAnUGxlYXNlIGFkZCBgbW9uZ29kYi1jbGllbnQtZW5jcnlwdGlvbmAgYXMgYSBkZXBlbmRlbmN5IG9mIHlvdXIgcHJvamVjdCcpO1xuICAgICAgICB9XG4gICAgICAgIEF1dG9FbmNyeXB0ZXJDbGFzcyA9IG1vbmdvZGJDbGllbnRFbmNyeXB0aW9uLmV4dGVuc2lvbihyZXF1aXJlKCcuLi9saWIvaW5kZXgnKSkuQXV0b0VuY3J5cHRlcjtcbiAgICB9XG59XG5leHBvcnRzLkVuY3J5cHRlciA9IEVuY3J5cHRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVuY3J5cHRlci5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJFbmNyeXB0ZXIiLCJjb25zdGFudHNfMSIsInJlcXVpcmUiLCJlcnJvcl8xIiwibW9uZ29fY2xpZW50XzEiLCJ1dGlsc18xIiwiQXV0b0VuY3J5cHRlckNsYXNzIiwia0ludGVybmFsQ2xpZW50IiwiU3ltYm9sIiwiY29uc3RydWN0b3IiLCJjbGllbnQiLCJ1cmkiLCJvcHRpb25zIiwiYXV0b0VuY3J5cHRpb24iLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiYnlwYXNzQXV0b0VuY3J5cHRpb24iLCJuZWVkc0Nvbm5lY3RpbmciLCJtYXhQb29sU2l6ZSIsImtleVZhdWx0Q2xpZW50IiwiZ2V0SW50ZXJuYWxDbGllbnQiLCJtZXRhZGF0YUNsaWVudCIsInVuZGVmaW5lZCIsInByb3h5SG9zdCIsInByb3h5T3B0aW9ucyIsInByb3h5UG9ydCIsInByb3h5VXNlcm5hbWUiLCJwcm94eVBhc3N3b3JkIiwiYXV0b0VuY3J5cHRlciIsImludGVybmFsQ2xpZW50IiwiY2xvbmVkT3B0aW9ucyIsImtleSIsImdldE93blByb3BlcnR5TmFtZXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJpbmNsdWRlcyIsIlJlZmxlY3QiLCJzZXQiLCJnZXQiLCJtaW5Qb29sU2l6ZSIsIk1vbmdvQ2xpZW50IiwiZXZlbnROYW1lIiwiTU9OR09fQ0xJRU5UX0VWRU5UUyIsImxpc3RlbmVyIiwibGlzdGVuZXJzIiwib24iLCJjb25uZWN0SW50ZXJuYWxDbGllbnQiLCJjb25uZWN0IiwiY2xvc2UiLCJmb3JjZSIsImNhbGxiYWNrIiwidGVhcmRvd24iLCJlIiwidGhlbiIsImVycm9yIiwiY2hlY2tGb3JNb25nb0NyeXB0IiwibW9uZ29kYkNsaWVudEVuY3J5cHRpb24iLCJnZXRNb25nb0RCQ2xpZW50RW5jcnlwdGlvbiIsIk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvciIsImV4dGVuc2lvbiIsIkF1dG9FbmNyeXB0ZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/encrypter.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/error.js":
/*!*******************************************!*\
  !*** ./node_modules/mongodb/lib/error.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.isResumableError = exports.isNetworkTimeoutError = exports.isSDAMUnrecoverableError = exports.isNodeShuttingDownError = exports.isRetryableReadError = exports.isRetryableWriteError = exports.needsRetryableWriteLabel = exports.MongoWriteConcernError = exports.MongoServerSelectionError = exports.MongoSystemError = exports.MongoMissingDependencyError = exports.MongoMissingCredentialsError = exports.MongoCompatibilityError = exports.MongoInvalidArgumentError = exports.MongoParseError = exports.MongoNetworkTimeoutError = exports.MongoNetworkError = exports.isNetworkErrorBeforeHandshake = exports.MongoTopologyClosedError = exports.MongoCursorExhaustedError = exports.MongoServerClosedError = exports.MongoCursorInUseError = exports.MongoUnexpectedServerResponseError = exports.MongoGridFSChunkError = exports.MongoGridFSStreamError = exports.MongoTailableCursorError = exports.MongoChangeStreamError = exports.MongoAzureError = exports.MongoAWSError = exports.MongoKerberosError = exports.MongoExpiredSessionError = exports.MongoTransactionError = exports.MongoNotConnectedError = exports.MongoDecompressionError = exports.MongoBatchReExecutionError = exports.MongoRuntimeError = exports.MongoAPIError = exports.MongoDriverError = exports.MongoServerError = exports.MongoError = exports.MongoErrorLabel = exports.GET_MORE_RESUMABLE_CODES = exports.MONGODB_ERROR_CODES = exports.NODE_IS_RECOVERING_ERROR_MESSAGE = exports.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE = exports.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE = void 0;\n/** @internal */ const kErrorLabels = Symbol(\"errorLabels\");\n/**\n * @internal\n * The legacy error message from the server that indicates the node is not a writable primary\n * https://github.com/mongodb/specifications/blob/b07c26dc40d04ac20349f989db531c9845fdd755/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-writable-primary-and-node-is-recovering\n */ exports.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE = new RegExp(\"not master\", \"i\");\n/**\n * @internal\n * The legacy error message from the server that indicates the node is not a primary or secondary\n * https://github.com/mongodb/specifications/blob/b07c26dc40d04ac20349f989db531c9845fdd755/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-writable-primary-and-node-is-recovering\n */ exports.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE = new RegExp(\"not master or secondary\", \"i\");\n/**\n * @internal\n * The error message from the server that indicates the node is recovering\n * https://github.com/mongodb/specifications/blob/b07c26dc40d04ac20349f989db531c9845fdd755/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-writable-primary-and-node-is-recovering\n */ exports.NODE_IS_RECOVERING_ERROR_MESSAGE = new RegExp(\"node is recovering\", \"i\");\n/** @internal MongoDB Error Codes */ exports.MONGODB_ERROR_CODES = Object.freeze({\n    HostUnreachable: 6,\n    HostNotFound: 7,\n    NetworkTimeout: 89,\n    ShutdownInProgress: 91,\n    PrimarySteppedDown: 189,\n    ExceededTimeLimit: 262,\n    SocketException: 9001,\n    NotWritablePrimary: 10107,\n    InterruptedAtShutdown: 11600,\n    InterruptedDueToReplStateChange: 11602,\n    NotPrimaryNoSecondaryOk: 13435,\n    NotPrimaryOrSecondary: 13436,\n    StaleShardVersion: 63,\n    StaleEpoch: 150,\n    StaleConfig: 13388,\n    RetryChangeStream: 234,\n    FailedToSatisfyReadPreference: 133,\n    CursorNotFound: 43,\n    LegacyNotPrimary: 10058,\n    WriteConcernFailed: 64,\n    NamespaceNotFound: 26,\n    IllegalOperation: 20,\n    MaxTimeMSExpired: 50,\n    UnknownReplWriteConcern: 79,\n    UnsatisfiableWriteConcern: 100,\n    Reauthenticate: 391\n});\n// From spec@https://github.com/mongodb/specifications/blob/f93d78191f3db2898a59013a7ed5650352ef6da8/source/change-streams/change-streams.rst#resumable-error\nexports.GET_MORE_RESUMABLE_CODES = new Set([\n    exports.MONGODB_ERROR_CODES.HostUnreachable,\n    exports.MONGODB_ERROR_CODES.HostNotFound,\n    exports.MONGODB_ERROR_CODES.NetworkTimeout,\n    exports.MONGODB_ERROR_CODES.ShutdownInProgress,\n    exports.MONGODB_ERROR_CODES.PrimarySteppedDown,\n    exports.MONGODB_ERROR_CODES.ExceededTimeLimit,\n    exports.MONGODB_ERROR_CODES.SocketException,\n    exports.MONGODB_ERROR_CODES.NotWritablePrimary,\n    exports.MONGODB_ERROR_CODES.InterruptedAtShutdown,\n    exports.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,\n    exports.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,\n    exports.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,\n    exports.MONGODB_ERROR_CODES.StaleShardVersion,\n    exports.MONGODB_ERROR_CODES.StaleEpoch,\n    exports.MONGODB_ERROR_CODES.StaleConfig,\n    exports.MONGODB_ERROR_CODES.RetryChangeStream,\n    exports.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,\n    exports.MONGODB_ERROR_CODES.CursorNotFound\n]);\n/** @public */ exports.MongoErrorLabel = Object.freeze({\n    RetryableWriteError: \"RetryableWriteError\",\n    TransientTransactionError: \"TransientTransactionError\",\n    UnknownTransactionCommitResult: \"UnknownTransactionCommitResult\",\n    ResumableChangeStreamError: \"ResumableChangeStreamError\",\n    HandshakeError: \"HandshakeError\",\n    ResetPool: \"ResetPool\",\n    InterruptInUseConnections: \"InterruptInUseConnections\",\n    NoWritesPerformed: \"NoWritesPerformed\"\n});\nfunction isAggregateError(e) {\n    return \"errors\" in e && Array.isArray(e.errors);\n}\n/**\n * @public\n * @category Error\n *\n * @privateRemarks\n * mongodb-client-encryption has a dependency on this error, it uses the constructor with a string argument\n */ class MongoError extends Error {\n    constructor(message){\n        super(MongoError.buildErrorMessage(message));\n        if (message instanceof Error) {\n            this.cause = message;\n        }\n        this[kErrorLabels] = new Set();\n    }\n    /** @internal */ static buildErrorMessage(e) {\n        if (typeof e === \"string\") {\n            return e;\n        }\n        if (isAggregateError(e) && e.message.length === 0) {\n            return e.errors.length === 0 ? \"AggregateError has an empty errors array. Please check the `cause` property for more information.\" : e.errors.map(({ message })=>message).join(\", \");\n        }\n        return e.message;\n    }\n    get name() {\n        return \"MongoError\";\n    }\n    /** Legacy name for server error responses */ get errmsg() {\n        return this.message;\n    }\n    /**\n     * Checks the error to see if it has an error label\n     *\n     * @param label - The error label to check for\n     * @returns returns true if the error has the provided error label\n     */ hasErrorLabel(label) {\n        return this[kErrorLabels].has(label);\n    }\n    addErrorLabel(label) {\n        this[kErrorLabels].add(label);\n    }\n    get errorLabels() {\n        return Array.from(this[kErrorLabels]);\n    }\n}\nexports.MongoError = MongoError;\n/**\n * An error coming from the mongo server\n *\n * @public\n * @category Error\n */ class MongoServerError extends MongoError {\n    constructor(message){\n        super(message.message || message.errmsg || message.$err || \"n/a\");\n        if (message.errorLabels) {\n            this[kErrorLabels] = new Set(message.errorLabels);\n        }\n        for(const name in message){\n            if (name !== \"errorLabels\" && name !== \"errmsg\" && name !== \"message\") this[name] = message[name];\n        }\n    }\n    get name() {\n        return \"MongoServerError\";\n    }\n}\nexports.MongoServerError = MongoServerError;\n/**\n * An error generated by the driver\n *\n * @public\n * @category Error\n */ class MongoDriverError extends MongoError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoDriverError\";\n    }\n}\nexports.MongoDriverError = MongoDriverError;\n/**\n * An error generated when the driver API is used incorrectly\n *\n * @privateRemarks\n * Should **never** be directly instantiated\n *\n * @public\n * @category Error\n */ class MongoAPIError extends MongoDriverError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoAPIError\";\n    }\n}\nexports.MongoAPIError = MongoAPIError;\n/**\n * An error generated when the driver encounters unexpected input\n * or reaches an unexpected/invalid internal state\n *\n * @privateRemarks\n * Should **never** be directly instantiated.\n *\n * @public\n * @category Error\n */ class MongoRuntimeError extends MongoDriverError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoRuntimeError\";\n    }\n}\nexports.MongoRuntimeError = MongoRuntimeError;\n/**\n * An error generated when a batch command is re-executed after one of the commands in the batch\n * has failed\n *\n * @public\n * @category Error\n */ class MongoBatchReExecutionError extends MongoAPIError {\n    constructor(message = \"This batch has already been executed, create new batch to execute\"){\n        super(message);\n    }\n    get name() {\n        return \"MongoBatchReExecutionError\";\n    }\n}\nexports.MongoBatchReExecutionError = MongoBatchReExecutionError;\n/**\n * An error generated when the driver fails to decompress\n * data received from the server.\n *\n * @public\n * @category Error\n */ class MongoDecompressionError extends MongoRuntimeError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoDecompressionError\";\n    }\n}\nexports.MongoDecompressionError = MongoDecompressionError;\n/**\n * An error thrown when the user attempts to operate on a database or collection through a MongoClient\n * that has not yet successfully called the \"connect\" method\n *\n * @public\n * @category Error\n */ class MongoNotConnectedError extends MongoAPIError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoNotConnectedError\";\n    }\n}\nexports.MongoNotConnectedError = MongoNotConnectedError;\n/**\n * An error generated when the user makes a mistake in the usage of transactions.\n * (e.g. attempting to commit a transaction with a readPreference other than primary)\n *\n * @public\n * @category Error\n */ class MongoTransactionError extends MongoAPIError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoTransactionError\";\n    }\n}\nexports.MongoTransactionError = MongoTransactionError;\n/**\n * An error generated when the user attempts to operate\n * on a session that has expired or has been closed.\n *\n * @public\n * @category Error\n */ class MongoExpiredSessionError extends MongoAPIError {\n    constructor(message = \"Cannot use a session that has ended\"){\n        super(message);\n    }\n    get name() {\n        return \"MongoExpiredSessionError\";\n    }\n}\nexports.MongoExpiredSessionError = MongoExpiredSessionError;\n/**\n * A error generated when the user attempts to authenticate\n * via Kerberos, but fails to connect to the Kerberos client.\n *\n * @public\n * @category Error\n */ class MongoKerberosError extends MongoRuntimeError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoKerberosError\";\n    }\n}\nexports.MongoKerberosError = MongoKerberosError;\n/**\n * A error generated when the user attempts to authenticate\n * via AWS, but fails\n *\n * @public\n * @category Error\n */ class MongoAWSError extends MongoRuntimeError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoAWSError\";\n    }\n}\nexports.MongoAWSError = MongoAWSError;\n/**\n * A error generated when the user attempts to authenticate\n * via Azure, but fails.\n *\n * @public\n * @category Error\n */ class MongoAzureError extends MongoRuntimeError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoAzureError\";\n    }\n}\nexports.MongoAzureError = MongoAzureError;\n/**\n * An error generated when a ChangeStream operation fails to execute.\n *\n * @public\n * @category Error\n */ class MongoChangeStreamError extends MongoRuntimeError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoChangeStreamError\";\n    }\n}\nexports.MongoChangeStreamError = MongoChangeStreamError;\n/**\n * An error thrown when the user calls a function or method not supported on a tailable cursor\n *\n * @public\n * @category Error\n */ class MongoTailableCursorError extends MongoAPIError {\n    constructor(message = \"Tailable cursor does not support this operation\"){\n        super(message);\n    }\n    get name() {\n        return \"MongoTailableCursorError\";\n    }\n}\nexports.MongoTailableCursorError = MongoTailableCursorError;\n/** An error generated when a GridFSStream operation fails to execute.\n *\n * @public\n * @category Error\n */ class MongoGridFSStreamError extends MongoRuntimeError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoGridFSStreamError\";\n    }\n}\nexports.MongoGridFSStreamError = MongoGridFSStreamError;\n/**\n * An error generated when a malformed or invalid chunk is\n * encountered when reading from a GridFSStream.\n *\n * @public\n * @category Error\n */ class MongoGridFSChunkError extends MongoRuntimeError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoGridFSChunkError\";\n    }\n}\nexports.MongoGridFSChunkError = MongoGridFSChunkError;\n/**\n * An error generated when a **parsable** unexpected response comes from the server.\n * This is generally an error where the driver in a state expecting a certain behavior to occur in\n * the next message from MongoDB but it receives something else.\n * This error **does not** represent an issue with wire message formatting.\n *\n * #### Example\n * When an operation fails, it is the driver's job to retry it. It must perform serverSelection\n * again to make sure that it attempts the operation against a server in a good state. If server\n * selection returns a server that does not support retryable operations, this error is used.\n * This scenario is unlikely as retryable support would also have been determined on the first attempt\n * but it is possible the state change could report a selectable server that does not support retries.\n *\n * @public\n * @category Error\n */ class MongoUnexpectedServerResponseError extends MongoRuntimeError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoUnexpectedServerResponseError\";\n    }\n}\nexports.MongoUnexpectedServerResponseError = MongoUnexpectedServerResponseError;\n/**\n * An error thrown when the user attempts to add options to a cursor that has already been\n * initialized\n *\n * @public\n * @category Error\n */ class MongoCursorInUseError extends MongoAPIError {\n    constructor(message = \"Cursor is already initialized\"){\n        super(message);\n    }\n    get name() {\n        return \"MongoCursorInUseError\";\n    }\n}\nexports.MongoCursorInUseError = MongoCursorInUseError;\n/**\n * An error generated when an attempt is made to operate\n * on a closed/closing server.\n *\n * @public\n * @category Error\n */ class MongoServerClosedError extends MongoAPIError {\n    constructor(message = \"Server is closed\"){\n        super(message);\n    }\n    get name() {\n        return \"MongoServerClosedError\";\n    }\n}\nexports.MongoServerClosedError = MongoServerClosedError;\n/**\n * An error thrown when an attempt is made to read from a cursor that has been exhausted\n *\n * @public\n * @category Error\n */ class MongoCursorExhaustedError extends MongoAPIError {\n    constructor(message){\n        super(message || \"Cursor is exhausted\");\n    }\n    get name() {\n        return \"MongoCursorExhaustedError\";\n    }\n}\nexports.MongoCursorExhaustedError = MongoCursorExhaustedError;\n/**\n * An error generated when an attempt is made to operate on a\n * dropped, or otherwise unavailable, database.\n *\n * @public\n * @category Error\n */ class MongoTopologyClosedError extends MongoAPIError {\n    constructor(message = \"Topology is closed\"){\n        super(message);\n    }\n    get name() {\n        return \"MongoTopologyClosedError\";\n    }\n}\nexports.MongoTopologyClosedError = MongoTopologyClosedError;\n/** @internal */ const kBeforeHandshake = Symbol(\"beforeHandshake\");\nfunction isNetworkErrorBeforeHandshake(err) {\n    return err[kBeforeHandshake] === true;\n}\nexports.isNetworkErrorBeforeHandshake = isNetworkErrorBeforeHandshake;\n/**\n * An error indicating an issue with the network, including TCP errors and timeouts.\n * @public\n * @category Error\n */ class MongoNetworkError extends MongoError {\n    constructor(message, options){\n        super(message);\n        if (options && typeof options.beforeHandshake === \"boolean\") {\n            this[kBeforeHandshake] = options.beforeHandshake;\n        }\n    }\n    get name() {\n        return \"MongoNetworkError\";\n    }\n}\nexports.MongoNetworkError = MongoNetworkError;\n/**\n * An error indicating a network timeout occurred\n * @public\n * @category Error\n *\n * @privateRemarks\n * mongodb-client-encryption has a dependency on this error with an instanceof check\n */ class MongoNetworkTimeoutError extends MongoNetworkError {\n    constructor(message, options){\n        super(message, options);\n    }\n    get name() {\n        return \"MongoNetworkTimeoutError\";\n    }\n}\nexports.MongoNetworkTimeoutError = MongoNetworkTimeoutError;\n/**\n * An error used when attempting to parse a value (like a connection string)\n * @public\n * @category Error\n */ class MongoParseError extends MongoDriverError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoParseError\";\n    }\n}\nexports.MongoParseError = MongoParseError;\n/**\n * An error generated when the user supplies malformed or unexpected arguments\n * or when a required argument or field is not provided.\n *\n *\n * @public\n * @category Error\n */ class MongoInvalidArgumentError extends MongoAPIError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoInvalidArgumentError\";\n    }\n}\nexports.MongoInvalidArgumentError = MongoInvalidArgumentError;\n/**\n * An error generated when a feature that is not enabled or allowed for the current server\n * configuration is used\n *\n *\n * @public\n * @category Error\n */ class MongoCompatibilityError extends MongoAPIError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoCompatibilityError\";\n    }\n}\nexports.MongoCompatibilityError = MongoCompatibilityError;\n/**\n * An error generated when the user fails to provide authentication credentials before attempting\n * to connect to a mongo server instance.\n *\n *\n * @public\n * @category Error\n */ class MongoMissingCredentialsError extends MongoAPIError {\n    constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoMissingCredentialsError\";\n    }\n}\nexports.MongoMissingCredentialsError = MongoMissingCredentialsError;\n/**\n * An error generated when a required module or dependency is not present in the local environment\n *\n * @public\n * @category Error\n */ class MongoMissingDependencyError extends MongoAPIError {\n    constructor(message, { cause } = {}){\n        super(message);\n        if (cause) this.cause = cause;\n    }\n    get name() {\n        return \"MongoMissingDependencyError\";\n    }\n}\nexports.MongoMissingDependencyError = MongoMissingDependencyError;\n/**\n * An error signifying a general system issue\n * @public\n * @category Error\n */ class MongoSystemError extends MongoError {\n    constructor(message, reason){\n        if (reason && reason.error) {\n            super(reason.error.message || reason.error);\n        } else {\n            super(message);\n        }\n        if (reason) {\n            this.reason = reason;\n        }\n        this.code = reason.error?.code;\n    }\n    get name() {\n        return \"MongoSystemError\";\n    }\n}\nexports.MongoSystemError = MongoSystemError;\n/**\n * An error signifying a client-side server selection error\n * @public\n * @category Error\n */ class MongoServerSelectionError extends MongoSystemError {\n    constructor(message, reason){\n        super(message, reason);\n    }\n    get name() {\n        return \"MongoServerSelectionError\";\n    }\n}\nexports.MongoServerSelectionError = MongoServerSelectionError;\nfunction makeWriteConcernResultObject(input) {\n    const output = Object.assign({}, input);\n    if (output.ok === 0) {\n        output.ok = 1;\n        delete output.errmsg;\n        delete output.code;\n        delete output.codeName;\n    }\n    return output;\n}\n/**\n * An error thrown when the server reports a writeConcernError\n * @public\n * @category Error\n */ class MongoWriteConcernError extends MongoServerError {\n    constructor(message, result){\n        if (result && Array.isArray(result.errorLabels)) {\n            message.errorLabels = result.errorLabels;\n        }\n        super(message);\n        this.errInfo = message.errInfo;\n        if (result != null) {\n            this.result = makeWriteConcernResultObject(result);\n        }\n    }\n    get name() {\n        return \"MongoWriteConcernError\";\n    }\n}\nexports.MongoWriteConcernError = MongoWriteConcernError;\n// https://github.com/mongodb/specifications/blob/master/source/retryable-reads/retryable-reads.rst#retryable-error\nconst RETRYABLE_READ_ERROR_CODES = new Set([\n    exports.MONGODB_ERROR_CODES.HostUnreachable,\n    exports.MONGODB_ERROR_CODES.HostNotFound,\n    exports.MONGODB_ERROR_CODES.NetworkTimeout,\n    exports.MONGODB_ERROR_CODES.ShutdownInProgress,\n    exports.MONGODB_ERROR_CODES.PrimarySteppedDown,\n    exports.MONGODB_ERROR_CODES.SocketException,\n    exports.MONGODB_ERROR_CODES.NotWritablePrimary,\n    exports.MONGODB_ERROR_CODES.InterruptedAtShutdown,\n    exports.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,\n    exports.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,\n    exports.MONGODB_ERROR_CODES.NotPrimaryOrSecondary\n]);\n// see: https://github.com/mongodb/specifications/blob/master/source/retryable-writes/retryable-writes.rst#terms\nconst RETRYABLE_WRITE_ERROR_CODES = new Set([\n    ...RETRYABLE_READ_ERROR_CODES,\n    exports.MONGODB_ERROR_CODES.ExceededTimeLimit\n]);\nfunction needsRetryableWriteLabel(error, maxWireVersion) {\n    // pre-4.4 server, then the driver adds an error label for every valid case\n    // execute operation will only inspect the label, code/message logic is handled here\n    if (error instanceof MongoNetworkError) {\n        return true;\n    }\n    if (error instanceof MongoError) {\n        if ((maxWireVersion >= 9 || error.hasErrorLabel(exports.MongoErrorLabel.RetryableWriteError)) && !error.hasErrorLabel(exports.MongoErrorLabel.HandshakeError)) {\n            // If we already have the error label no need to add it again. 4.4+ servers add the label.\n            // In the case where we have a handshake error, need to fall down to the logic checking\n            // the codes.\n            return false;\n        }\n    }\n    if (error instanceof MongoWriteConcernError) {\n        return RETRYABLE_WRITE_ERROR_CODES.has(error.result?.code ?? error.code ?? 0);\n    }\n    if (error instanceof MongoError && typeof error.code === \"number\") {\n        return RETRYABLE_WRITE_ERROR_CODES.has(error.code);\n    }\n    const isNotWritablePrimaryError = exports.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(error.message);\n    if (isNotWritablePrimaryError) {\n        return true;\n    }\n    const isNodeIsRecoveringError = exports.NODE_IS_RECOVERING_ERROR_MESSAGE.test(error.message);\n    if (isNodeIsRecoveringError) {\n        return true;\n    }\n    return false;\n}\nexports.needsRetryableWriteLabel = needsRetryableWriteLabel;\nfunction isRetryableWriteError(error) {\n    return error.hasErrorLabel(exports.MongoErrorLabel.RetryableWriteError);\n}\nexports.isRetryableWriteError = isRetryableWriteError;\n/** Determines whether an error is something the driver should attempt to retry */ function isRetryableReadError(error) {\n    const hasRetryableErrorCode = typeof error.code === \"number\" ? RETRYABLE_READ_ERROR_CODES.has(error.code) : false;\n    if (hasRetryableErrorCode) {\n        return true;\n    }\n    if (error instanceof MongoNetworkError) {\n        return true;\n    }\n    const isNotWritablePrimaryError = exports.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(error.message);\n    if (isNotWritablePrimaryError) {\n        return true;\n    }\n    const isNodeIsRecoveringError = exports.NODE_IS_RECOVERING_ERROR_MESSAGE.test(error.message);\n    if (isNodeIsRecoveringError) {\n        return true;\n    }\n    return false;\n}\nexports.isRetryableReadError = isRetryableReadError;\nconst SDAM_RECOVERING_CODES = new Set([\n    exports.MONGODB_ERROR_CODES.ShutdownInProgress,\n    exports.MONGODB_ERROR_CODES.PrimarySteppedDown,\n    exports.MONGODB_ERROR_CODES.InterruptedAtShutdown,\n    exports.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,\n    exports.MONGODB_ERROR_CODES.NotPrimaryOrSecondary\n]);\nconst SDAM_NOT_PRIMARY_CODES = new Set([\n    exports.MONGODB_ERROR_CODES.NotWritablePrimary,\n    exports.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,\n    exports.MONGODB_ERROR_CODES.LegacyNotPrimary\n]);\nconst SDAM_NODE_SHUTTING_DOWN_ERROR_CODES = new Set([\n    exports.MONGODB_ERROR_CODES.InterruptedAtShutdown,\n    exports.MONGODB_ERROR_CODES.ShutdownInProgress\n]);\nfunction isRecoveringError(err) {\n    if (typeof err.code === \"number\") {\n        // If any error code exists, we ignore the error.message\n        return SDAM_RECOVERING_CODES.has(err.code);\n    }\n    return exports.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(err.message) || exports.NODE_IS_RECOVERING_ERROR_MESSAGE.test(err.message);\n}\nfunction isNotWritablePrimaryError(err) {\n    if (typeof err.code === \"number\") {\n        // If any error code exists, we ignore the error.message\n        return SDAM_NOT_PRIMARY_CODES.has(err.code);\n    }\n    if (isRecoveringError(err)) {\n        return false;\n    }\n    return exports.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(err.message);\n}\nfunction isNodeShuttingDownError(err) {\n    return !!(typeof err.code === \"number\" && SDAM_NODE_SHUTTING_DOWN_ERROR_CODES.has(err.code));\n}\nexports.isNodeShuttingDownError = isNodeShuttingDownError;\n/**\n * Determines whether SDAM can recover from a given error. If it cannot\n * then the pool will be cleared, and server state will completely reset\n * locally.\n *\n * @see https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-master-and-node-is-recovering\n */ function isSDAMUnrecoverableError(error) {\n    // NOTE: null check is here for a strictly pre-CMAP world, a timeout or\n    //       close event are considered unrecoverable\n    if (error instanceof MongoParseError || error == null) {\n        return true;\n    }\n    return isRecoveringError(error) || isNotWritablePrimaryError(error);\n}\nexports.isSDAMUnrecoverableError = isSDAMUnrecoverableError;\nfunction isNetworkTimeoutError(err) {\n    return !!(err instanceof MongoNetworkError && err.message.match(/timed out/));\n}\nexports.isNetworkTimeoutError = isNetworkTimeoutError;\nfunction isResumableError(error, wireVersion) {\n    if (error == null || !(error instanceof MongoError)) {\n        return false;\n    }\n    if (error instanceof MongoNetworkError) {\n        return true;\n    }\n    if (wireVersion != null && wireVersion >= 9) {\n        // DRIVERS-1308: For 4.4 drivers running against 4.4 servers, drivers will add a special case to treat the CursorNotFound error code as resumable\n        if (error.code === exports.MONGODB_ERROR_CODES.CursorNotFound) {\n            return true;\n        }\n        return error.hasErrorLabel(exports.MongoErrorLabel.ResumableChangeStreamError);\n    }\n    if (typeof error.code === \"number\") {\n        return exports.GET_MORE_RESUMABLE_CODES.has(error.code);\n    }\n    return false;\n}\nexports.isResumableError = isResumableError; //# sourceMappingURL=error.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZXJyb3IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHdCQUF3QixHQUFHQSw2QkFBNkIsR0FBR0EsZ0NBQWdDLEdBQUdBLCtCQUErQixHQUFHQSw0QkFBNEIsR0FBR0EsNkJBQTZCLEdBQUdBLGdDQUFnQyxHQUFHQSw4QkFBOEIsR0FBR0EsaUNBQWlDLEdBQUdBLHdCQUF3QixHQUFHQSxtQ0FBbUMsR0FBR0Esb0NBQW9DLEdBQUdBLCtCQUErQixHQUFHQSxpQ0FBaUMsR0FBR0EsdUJBQXVCLEdBQUdBLGdDQUFnQyxHQUFHQSx5QkFBeUIsR0FBR0EscUNBQXFDLEdBQUdBLGdDQUFnQyxHQUFHQSxpQ0FBaUMsR0FBR0EsOEJBQThCLEdBQUdBLDZCQUE2QixHQUFHQSwwQ0FBMEMsR0FBR0EsNkJBQTZCLEdBQUdBLDhCQUE4QixHQUFHQSxnQ0FBZ0MsR0FBR0EsOEJBQThCLEdBQUdBLHVCQUF1QixHQUFHQSxxQkFBcUIsR0FBR0EsMEJBQTBCLEdBQUdBLGdDQUFnQyxHQUFHQSw2QkFBNkIsR0FBR0EsOEJBQThCLEdBQUdBLCtCQUErQixHQUFHQSxrQ0FBa0MsR0FBR0EseUJBQXlCLEdBQUdBLHFCQUFxQixHQUFHQSx3QkFBd0IsR0FBR0Esd0JBQXdCLEdBQUdBLGtCQUFrQixHQUFHQSx1QkFBdUIsR0FBR0EsZ0NBQWdDLEdBQUdBLDJCQUEyQixHQUFHQSx3Q0FBd0MsR0FBR0EscURBQXFELEdBQUdBLGlEQUFpRCxHQUFHLEtBQUs7QUFDaGdELGNBQWMsR0FDZCxNQUFNZ0QsZUFBZUMsT0FBTztBQUM1Qjs7OztDQUlDLEdBQ0RqRCxpREFBaUQsR0FBRyxJQUFJa0QsT0FBTyxjQUFjO0FBQzdFOzs7O0NBSUMsR0FDRGxELHFEQUFxRCxHQUFHLElBQUlrRCxPQUFPLDJCQUEyQjtBQUM5Rjs7OztDQUlDLEdBQ0RsRCx3Q0FBd0MsR0FBRyxJ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TztJQUNYO0lBQ0EsT0FBT29CLGtCQUFrQnBCLFVBQVVhLDBCQUEwQmI7QUFDakU7QUFDQW5ILGdDQUFnQyxHQUFHSTtBQUNuQyxTQUFTRCxzQkFBc0I0RyxHQUFHO0lBQzlCLE9BQU8sQ0FBQyxDQUFFQSxDQUFBQSxlQUFlN0YscUJBQXFCNkYsSUFBSWpCLE9BQU8sQ0FBQzBDLEtBQUssQ0FBQyxZQUFXO0FBQy9FO0FBQ0F4SSw2QkFBNkIsR0FBR0c7QUFDaEMsU0FBU0QsaUJBQWlCaUgsS0FBSyxFQUFFc0IsV0FBVztJQUN4QyxJQUFJdEIsU0FBUyxRQUFRLENBQUVBLENBQUFBLGlCQUFpQjFFLFVBQVMsR0FBSTtRQUNqRCxPQUFPO0lBQ1g7SUFDQSxJQUFJMEUsaUJBQWlCakcsbUJBQW1CO1FBQ3BDLE9BQU87SUFDWDtJQUNBLElBQUl1SCxlQUFlLFFBQVFBLGVBQWUsR0FBRztRQUN6QyxpSkFBaUo7UUFDakosSUFBSXRCLE1BQU1DLElBQUksS0FBS3BILFFBQVE0QyxtQkFBbUIsQ0FBQ3lCLGNBQWMsRUFBRTtZQUMzRCxPQUFPO1FBQ1g7UUFDQSxPQUFPOEMsTUFBTWIsYUFBYSxDQUFDdEcsUUFBUTBDLGVBQWUsQ0FBQ3dDLDBCQUEwQjtJQUNqRjtJQUNBLElBQUksT0FBT2lDLE1BQU1DLElBQUksS0FBSyxVQUFVO1FBQ2hDLE9BQU9wSCxRQUFRMkMsd0JBQXdCLENBQUM2RCxHQUFHLENBQUNXLE1BQU1DLElBQUk7SUFDMUQ7SUFDQSxPQUFPO0FBQ1g7QUFDQXBILHdCQUF3QixHQUFHRSxrQkFDM0IsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2Vycm9yLmpzPzMwNjkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmlzUmVzdW1hYmxlRXJyb3IgPSBleHBvcnRzLmlzTmV0d29ya1RpbWVvdXRFcnJvciA9IGV4cG9ydHMuaXNTREFNVW5yZWNvdmVyYWJsZUVycm9yID0gZXhwb3J0cy5pc05vZGVTaHV0dGluZ0Rvd25FcnJvciA9IGV4cG9ydHMuaXNSZXRyeWFibGVSZWFkRXJyb3IgPSBleHBvcnRzLmlzUmV0cnlhYmxlV3JpdGVFcnJvciA9IGV4cG9ydHMubmVlZHNSZXRyeWFibGVXcml0ZUxhYmVsID0gZXhwb3J0cy5Nb25nb1dyaXRlQ29uY2VybkVycm9yID0gZXhwb3J0cy5Nb25nb1NlcnZlclNlbGVjdGlvbkVycm9yID0gZXhwb3J0cy5Nb25nb1N5c3RlbUVycm9yID0gZXhwb3J0cy5Nb25nb01pc3NpbmdEZXBlbmRlbmN5RXJyb3IgPSBleHBvcnRzLk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IgPSBleHBvcnRzLk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yID0gZXhwb3J0cy5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yID0gZXhwb3J0cy5Nb25nb1BhcnNlRXJyb3IgPSBleHBvcnRzLk1vbmdvTmV0d29ya1RpbWVvdXRFcnJvciA9IGV4cG9ydHMuTW9uZ29OZXR3b3JrRXJyb3IgPSBleHBvcnRzLmlzTmV0d29ya0Vycm9yQmVmb3JlSGFuZHNoYWtlID0gZXhwb3J0cy5Nb25nb1RvcG9sb2d5Q2xvc2VkRXJyb3IgPSBleHBvcnRzLk1vbmdvQ3Vyc29yRXhoYXVzdGVkRXJyb3IgPSBleHBvcnRzLk1vbmdvU2VydmVyQ2xvc2VkRXJyb3IgPSBleHBvcnRzLk1vbmdvQ3Vyc29ySW5Vc2VFcnJvciA9IGV4cG9ydHMuTW9uZ29VbmV4cGVjdGVkU2VydmVyUmVzcG9uc2VFcnJvciA9IGV4cG9ydHMuTW9uZ29HcmlkRlNDaHVua0Vycm9yID0gZXhwb3J0cy5Nb25nb0dyaWRGU1N0cmVhbUVycm9yID0gZXhwb3J0cy5Nb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3IgPSBleHBvcnRzLk1vbmdvQ2hhbmdlU3RyZWFtRXJyb3IgPSBleHBvcnRzLk1vbmdvQXp1cmVFcnJvciA9IGV4cG9ydHMuTW9uZ29BV1NFcnJvciA9IGV4cG9ydHMuTW9uZ29LZXJiZXJvc0Vycm9yID0gZXhwb3J0cy5Nb25nb0V4cGlyZWRTZXNzaW9uRXJyb3IgPSBleHBvcnRzLk1vbmdvVHJhbnNhY3Rpb25FcnJvciA9IGV4cG9ydHMuTW9uZ29Ob3RDb25uZWN0ZWRFcnJvciA9IGV4cG9ydHMuTW9uZ29EZWNvbXByZXNzaW9uRXJyb3IgPSBleHBvcnRzLk1vbmdvQmF0Y2hSZUV4ZWN1dGlvbkVycm9yID0gZXhwb3J0cy5Nb25nb1J1bnRpbWVFcnJvciA9IGV4cG9ydHMuTW9uZ29BUElFcnJvciA9IGV4cG9ydHMuTW9uZ29Ecml2ZXJFcnJvciA9IGV4cG9ydHMuTW9uZ29TZXJ2ZXJFcnJvciA9IGV4cG9ydHMuTW9uZ29FcnJvciA9IGV4cG9ydHMuTW9uZ29FcnJvckxhYmVsID0gZXhwb3J0cy5HRVRfTU9SRV9SRVNVTUFCTEVfQ09ERVMgPSBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMgPSBleHBvcnRzLk5PREVfSVNfUkVDT1ZFUklOR19FUlJPUl9NRVNTQUdFID0gZXhwb3J0cy5MRUdBQ1lfTk9UX1BSSU1BUllfT1JfU0VDT05EQVJZX0VSUk9SX01FU1NBR0UgPSBleHBvcnRzLkxFR0FDWV9OT1RfV1JJVEFCTEVfUFJJTUFSWV9FUlJPUl9NRVNTQUdFID0gdm9pZCAwO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0Vycm9yTGFiZWxzID0gU3ltYm9sKCdlcnJvckxhYmVscycpO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIFRoZSBsZWdhY3kgZXJyb3IgbWVzc2FnZSBmcm9tIHRoZSBzZXJ2ZXIgdGhhdCBpbmRpY2F0ZXMgdGhlIG5vZGUgaXMgbm90IGEgd3JpdGFibGUgcHJpbWFyeVxuICogaHR0cHM6Ly9naXRodWIuY29tL21vbmdvZGIvc3BlY2lmaWNhdGlvbnMvYmxvYi9iMDdjMjZkYzQwZDA0YWMyMDM0OWY5ODlkYjUzMWM5ODQ1ZmRkNzU1L3NvdXJjZS9zZXJ2ZXItZGlzY292ZXJ5LWFuZC1tb25pdG9yaW5nL3NlcnZlci1kaXNjb3ZlcnktYW5kLW1vbml0b3JpbmcucnN0I25vdC13cml0YWJsZS1wcmltYXJ5LWFuZC1ub2RlLWlzLXJlY292ZXJpbmdcbiAqL1xuZXhwb3J0cy5MRUdBQ1lfTk9UX1dSSVRBQkxFX1BSSU1BUllfRVJST1JfTUVTU0FHRSA9IG5ldyBSZWdFeHAoJ25vdCBtYXN0ZXInLCAnaScpO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIFRoZSBsZWdhY3kgZXJyb3IgbWVzc2FnZSBmcm9tIHRoZSBzZXJ2ZXIgdGhhdCBpbmRpY2F0ZXMgdGhlIG5vZGUgaXMgbm90IGEgcHJpbWFyeSBvciBzZWNvbmRhcnlcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9tb25nb2RiL3NwZWNpZmljYXRpb25zL2Jsb2IvYjA3YzI2ZGM0MGQwNGFjMjAzNDlmOTg5ZGI1MzFjOTg0NWZkZDc1NS9zb3VyY2Uvc2VydmVyLWRpc2NvdmVyeS1hbmQtbW9uaXRvcmluZy9zZXJ2ZXItZGlzY292ZXJ5LWFuZC1tb25pdG9yaW5nLnJzdCNub3Qtd3JpdGFibGUtcHJpbWFyeS1hbmQtbm9kZS1pcy1yZWNvdmVyaW5nXG4gKi9cbmV4cG9ydHMuTEVHQUNZX05PVF9QUklNQVJZX09SX1NFQ09OREFSWV9FUlJPUl9NRVNTQUdFID0gbmV3IFJlZ0V4cCgnbm90IG1hc3RlciBvciBzZWNvbmRhcnknLCAnaScpO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIFRoZSBlcnJvciBtZXNzYWdlIGZyb20gdGhlIHNlcnZlciB0aGF0IGluZGljYXRlcyB0aGUgbm9kZSBpcyByZWNvdmVyaW5nXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbW9uZ29kYi9zcGVjaWZpY2F0aW9ucy9ibG9iL2IwN2MyNmRjNDBkMDRhYzIwMzQ5Zjk4OWRiNTMxYzk4NDVmZGQ3NTUvc291cmNlL3NlcnZlci1kaXNjb3ZlcnktYW5kLW1vbml0b3Jpbmcvc2VydmVyLWRpc2NvdmVyeS1hbmQtbW9uaXRvcmluZy5yc3Qjbm90LXdyaXRhYmxlLXByaW1hcnktYW5kLW5vZGUtaXMtcmVjb3ZlcmluZ1xuICovXG5leHBvcnRzLk5PREVfSVNfUkVDT1ZFUklOR19FUlJPUl9NRVNTQUdFID0gbmV3IFJlZ0V4cCgnbm9kZSBpcyByZWNvdmVyaW5nJywgJ2knKTtcbi8qKiBAaW50ZXJuYWwgTW9uZ29EQiBFcnJvciBDb2RlcyAqL1xuZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgSG9zdFVucmVhY2hhYmxlOiA2LFxuICAgIEhvc3ROb3RGb3VuZDogNyxcbiAgICBOZXR3b3JrVGltZW91dDogODksXG4gICAgU2h1dGRvd25JblByb2dyZXNzOiA5MSxcbiAgICBQcmltYXJ5U3RlcHBlZERvd246IDE4OSxcbiAgICBFeGNlZWRlZFRpbWVMaW1pdDogMjYyLFxuICAgIFNvY2tldEV4Y2VwdGlvbjogOTAwMSxcbiAgICBOb3RXcml0YWJsZVByaW1hcnk6IDEwMTA3LFxuICAgIEludGVycnVwdGVkQXRTaHV0ZG93bjogMTE2MDAsXG4gICAgSW50ZXJydXB0ZWREdWVUb1JlcGxTdGF0ZUNoYW5nZTogMTE2MDIsXG4gICAgTm90UHJpbWFyeU5vU2Vjb25kYXJ5T2s6IDEzNDM1LFxuICAgIE5vdFByaW1hcnlPclNlY29uZGFyeTogMTM0MzYsXG4gICAgU3RhbGVTaGFyZFZlcnNpb246IDYzLFxuICAgIFN0YWxlRXBvY2g6IDE1MCxcbiAgICBTdGFsZUNvbmZpZzogMTMzODgsXG4gICAgUmV0cnlDaGFuZ2VTdHJlYW06IDIzNCxcbiAgICBGYWlsZWRUb1NhdGlzZnlSZWFkUHJlZmVyZW5jZTogMTMzLFxuICAgIEN1cnNvck5vdEZvdW5kOiA0MyxcbiAgICBMZWdhY3lOb3RQcmltYXJ5OiAxMDA1OCxcbiAgICBXcml0ZUNvbmNlcm5GYWlsZWQ6IDY0LFxuICAgIE5hbWVzcGFjZU5vdEZvdW5kOiAyNixcbiAgICBJbGxlZ2FsT3BlcmF0aW9uOiAyMCxcbiAgICBNYXhUaW1lTVNFeHBpcmVkOiA1MCxcbiAgICBVbmtub3duUmVwbFdyaXRlQ29uY2VybjogNzksXG4gICAgVW5zYXRpc2ZpYWJsZVdyaXRlQ29uY2VybjogMTAwLFxuICAgIFJlYXV0aGVudGljYXRlOiAzOTFcbn0pO1xuLy8gRnJvbSBzcGVjQGh0dHBzOi8vZ2l0aHViLmNvbS9tb25nb2RiL3NwZWNpZmljYXRpb25zL2Jsb2IvZjkzZDc4MTkxZjNkYjI4OThhNTkwMTNhN2VkNTY1MDM1MmVmNmRhOC9zb3VyY2UvY2hhbmdlLXN0cmVhbXMvY2hhbmdlLXN0cmVhbXMucnN0I3Jlc3VtYWJsZS1lcnJvclxuZXhwb3J0cy5HRVRfTU9SRV9SRVNVTUFCTEVfQ09ERVMgPSBuZXcgU2V0KFtcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuSG9zdFVucmVhY2hhYmxlLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5Ib3N0Tm90Rm91bmQsXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLk5ldHdvcmtUaW1lb3V0LFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5TaHV0ZG93bkluUHJvZ3Jlc3MsXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLlByaW1hcnlTdGVwcGVkRG93bixcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuRXhjZWVkZWRUaW1lTGltaXQsXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLlNvY2tldEV4Y2VwdGlvbixcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuTm90V3JpdGFibGVQcmltYXJ5LFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5JbnRlcnJ1cHRlZEF0U2h1dGRvd24sXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLkludGVycnVwdGVkRHVlVG9SZXBsU3RhdGVDaGFuZ2UsXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLk5vdFByaW1hcnlOb1NlY29uZGFyeU9rLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5Ob3RQcmltYXJ5T3JTZWNvbmRhcnksXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLlN0YWxlU2hhcmRWZXJzaW9uLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5TdGFsZUVwb2NoLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5TdGFsZUNvbmZpZyxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuUmV0cnlDaGFuZ2VTdHJlYW0sXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLkZhaWxlZFRvU2F0aXNmeVJlYWRQcmVmZXJlbmNlLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5DdXJzb3JOb3RGb3VuZFxuXSk7XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0cy5Nb25nb0Vycm9yTGFiZWwgPSBPYmplY3QuZnJlZXplKHtcbiAgICBSZXRyeWFibGVXcml0ZUVycm9yOiAnUmV0cnlhYmxlV3JpdGVFcnJvcicsXG4gICAgVHJhbnNpZW50VHJhbnNhY3Rpb25FcnJvcjogJ1RyYW5zaWVudFRyYW5zYWN0aW9uRXJyb3InLFxuICAgIFVua25vd25UcmFuc2FjdGlvbkNvbW1pdFJlc3VsdDogJ1Vua25vd25UcmFuc2FjdGlvbkNvbW1pdFJlc3VsdCcsXG4gICAgUmVzdW1hYmxlQ2hhbmdlU3RyZWFtRXJyb3I6ICdSZXN1bWFibGVDaGFuZ2VTdHJlYW1FcnJvcicsXG4gICAgSGFuZHNoYWtlRXJyb3I6ICdIYW5kc2hha2VFcnJvcicsXG4gICAgUmVzZXRQb29sOiAnUmVzZXRQb29sJyxcbiAgICBJbnRlcnJ1cHRJblVzZUNvbm5lY3Rpb25zOiAnSW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucycsXG4gICAgTm9Xcml0ZXNQZXJmb3JtZWQ6ICdOb1dyaXRlc1BlcmZvcm1lZCdcbn0pO1xuZnVuY3Rpb24gaXNBZ2dyZWdhdGVFcnJvcihlKSB7XG4gICAgcmV0dXJuICdlcnJvcnMnIGluIGUgJiYgQXJyYXkuaXNBcnJheShlLmVycm9ycyk7XG59XG4vKipcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICpcbiAqIEBwcml2YXRlUmVtYXJrc1xuICogbW9uZ29kYi1jbGllbnQtZW5jcnlwdGlvbiBoYXMgYSBkZXBlbmRlbmN5IG9uIHRoaXMgZXJyb3IsIGl0IHVzZXMgdGhlIGNvbnN0cnVjdG9yIHdpdGggYSBzdHJpbmcgYXJndW1lbnRcbiAqL1xuY2xhc3MgTW9uZ29FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKE1vbmdvRXJyb3IuYnVpbGRFcnJvck1lc3NhZ2UobWVzc2FnZSkpO1xuICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmNhdXNlID0gbWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tFcnJvckxhYmVsc10gPSBuZXcgU2V0KCk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBzdGF0aWMgYnVpbGRFcnJvck1lc3NhZ2UoZSkge1xuICAgICAgICBpZiAodHlwZW9mIGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBZ2dyZWdhdGVFcnJvcihlKSAmJiBlLm1lc3NhZ2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZS5lcnJvcnMubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgPyAnQWdncmVnYXRlRXJyb3IgaGFzIGFuIGVtcHR5IGVycm9ycyBhcnJheS4gUGxlYXNlIGNoZWNrIHRoZSBgY2F1c2VgIHByb3BlcnR5IGZvciBtb3JlIGluZm9ybWF0aW9uLidcbiAgICAgICAgICAgICAgICA6IGUuZXJyb3JzLm1hcCgoeyBtZXNzYWdlIH0pID0+IG1lc3NhZ2UpLmpvaW4oJywgJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGUubWVzc2FnZTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29FcnJvcic7XG4gICAgfVxuICAgIC8qKiBMZWdhY3kgbmFtZSBmb3Igc2VydmVyIGVycm9yIHJlc3BvbnNlcyAqL1xuICAgIGdldCBlcnJtc2coKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0aGUgZXJyb3IgdG8gc2VlIGlmIGl0IGhhcyBhbiBlcnJvciBsYWJlbFxuICAgICAqXG4gICAgICogQHBhcmFtIGxhYmVsIC0gVGhlIGVycm9yIGxhYmVsIHRvIGNoZWNrIGZvclxuICAgICAqIEByZXR1cm5zIHJldHVybnMgdHJ1ZSBpZiB0aGUgZXJyb3IgaGFzIHRoZSBwcm92aWRlZCBlcnJvciBsYWJlbFxuICAgICAqL1xuICAgIGhhc0Vycm9yTGFiZWwobGFiZWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba0Vycm9yTGFiZWxzXS5oYXMobGFiZWwpO1xuICAgIH1cbiAgICBhZGRFcnJvckxhYmVsKGxhYmVsKSB7XG4gICAgICAgIHRoaXNba0Vycm9yTGFiZWxzXS5hZGQobGFiZWwpO1xuICAgIH1cbiAgICBnZXQgZXJyb3JMYWJlbHMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXNba0Vycm9yTGFiZWxzXSk7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0Vycm9yID0gTW9uZ29FcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgY29taW5nIGZyb20gdGhlIG1vbmdvIHNlcnZlclxuICpcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb1NlcnZlckVycm9yIGV4dGVuZHMgTW9uZ29FcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLm1lc3NhZ2UgfHwgbWVzc2FnZS5lcnJtc2cgfHwgbWVzc2FnZS4kZXJyIHx8ICduL2EnKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZXJyb3JMYWJlbHMpIHtcbiAgICAgICAgICAgIHRoaXNba0Vycm9yTGFiZWxzXSA9IG5ldyBTZXQobWVzc2FnZS5lcnJvckxhYmVscyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmIChuYW1lICE9PSAnZXJyb3JMYWJlbHMnICYmIG5hbWUgIT09ICdlcnJtc2cnICYmIG5hbWUgIT09ICdtZXNzYWdlJylcbiAgICAgICAgICAgICAgICB0aGlzW25hbWVdID0gbWVzc2FnZVtuYW1lXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb1NlcnZlckVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvU2VydmVyRXJyb3IgPSBNb25nb1NlcnZlckVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciBnZW5lcmF0ZWQgYnkgdGhlIGRyaXZlclxuICpcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb0RyaXZlckVycm9yIGV4dGVuZHMgTW9uZ29FcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29Ecml2ZXJFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0RyaXZlckVycm9yID0gTW9uZ29Ecml2ZXJFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgZ2VuZXJhdGVkIHdoZW4gdGhlIGRyaXZlciBBUEkgaXMgdXNlZCBpbmNvcnJlY3RseVxuICpcbiAqIEBwcml2YXRlUmVtYXJrc1xuICogU2hvdWxkICoqbmV2ZXIqKiBiZSBkaXJlY3RseSBpbnN0YW50aWF0ZWRcbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29BUElFcnJvciBleHRlbmRzIE1vbmdvRHJpdmVyRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvQVBJRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29BUElFcnJvciA9IE1vbmdvQVBJRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIGdlbmVyYXRlZCB3aGVuIHRoZSBkcml2ZXIgZW5jb3VudGVycyB1bmV4cGVjdGVkIGlucHV0XG4gKiBvciByZWFjaGVzIGFuIHVuZXhwZWN0ZWQvaW52YWxpZCBpbnRlcm5hbCBzdGF0ZVxuICpcbiAqIEBwcml2YXRlUmVtYXJrc1xuICogU2hvdWxkICoqbmV2ZXIqKiBiZSBkaXJlY3RseSBpbnN0YW50aWF0ZWQuXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvUnVudGltZUVycm9yIGV4dGVuZHMgTW9uZ29Ecml2ZXJFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29SdW50aW1lRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29SdW50aW1lRXJyb3IgPSBNb25nb1J1bnRpbWVFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgZ2VuZXJhdGVkIHdoZW4gYSBiYXRjaCBjb21tYW5kIGlzIHJlLWV4ZWN1dGVkIGFmdGVyIG9uZSBvZiB0aGUgY29tbWFuZHMgaW4gdGhlIGJhdGNoXG4gKiBoYXMgZmFpbGVkXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvQmF0Y2hSZUV4ZWN1dGlvbkVycm9yIGV4dGVuZHMgTW9uZ29BUElFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSA9ICdUaGlzIGJhdGNoIGhhcyBhbHJlYWR5IGJlZW4gZXhlY3V0ZWQsIGNyZWF0ZSBuZXcgYmF0Y2ggdG8gZXhlY3V0ZScpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvQmF0Y2hSZUV4ZWN1dGlvbkVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvQmF0Y2hSZUV4ZWN1dGlvbkVycm9yID0gTW9uZ29CYXRjaFJlRXhlY3V0aW9uRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIGdlbmVyYXRlZCB3aGVuIHRoZSBkcml2ZXIgZmFpbHMgdG8gZGVjb21wcmVzc1xuICogZGF0YSByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIuXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvRGVjb21wcmVzc2lvbkVycm9yIGV4dGVuZHMgTW9uZ29SdW50aW1lRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvRGVjb21wcmVzc2lvbkVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvRGVjb21wcmVzc2lvbkVycm9yID0gTW9uZ29EZWNvbXByZXNzaW9uRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIHRocm93biB3aGVuIHRoZSB1c2VyIGF0dGVtcHRzIHRvIG9wZXJhdGUgb24gYSBkYXRhYmFzZSBvciBjb2xsZWN0aW9uIHRocm91Z2ggYSBNb25nb0NsaWVudFxuICogdGhhdCBoYXMgbm90IHlldCBzdWNjZXNzZnVsbHkgY2FsbGVkIHRoZSBcImNvbm5lY3RcIiBtZXRob2RcbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29Ob3RDb25uZWN0ZWRFcnJvciBleHRlbmRzIE1vbmdvQVBJRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvTm90Q29ubmVjdGVkRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29Ob3RDb25uZWN0ZWRFcnJvciA9IE1vbmdvTm90Q29ubmVjdGVkRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIGdlbmVyYXRlZCB3aGVuIHRoZSB1c2VyIG1ha2VzIGEgbWlzdGFrZSBpbiB0aGUgdXNhZ2Ugb2YgdHJhbnNhY3Rpb25zLlxuICogKGUuZy4gYXR0ZW1wdGluZyB0byBjb21taXQgYSB0cmFuc2FjdGlvbiB3aXRoIGEgcmVhZFByZWZlcmVuY2Ugb3RoZXIgdGhhbiBwcmltYXJ5KVxuICpcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb1RyYW5zYWN0aW9uRXJyb3IgZXh0ZW5kcyBNb25nb0FQSUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb1RyYW5zYWN0aW9uRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29UcmFuc2FjdGlvbkVycm9yID0gTW9uZ29UcmFuc2FjdGlvbkVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciBnZW5lcmF0ZWQgd2hlbiB0aGUgdXNlciBhdHRlbXB0cyB0byBvcGVyYXRlXG4gKiBvbiBhIHNlc3Npb24gdGhhdCBoYXMgZXhwaXJlZCBvciBoYXMgYmVlbiBjbG9zZWQuXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvRXhwaXJlZFNlc3Npb25FcnJvciBleHRlbmRzIE1vbmdvQVBJRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSAnQ2Fubm90IHVzZSBhIHNlc3Npb24gdGhhdCBoYXMgZW5kZWQnKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb0V4cGlyZWRTZXNzaW9uRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29FeHBpcmVkU2Vzc2lvbkVycm9yID0gTW9uZ29FeHBpcmVkU2Vzc2lvbkVycm9yO1xuLyoqXG4gKiBBIGVycm9yIGdlbmVyYXRlZCB3aGVuIHRoZSB1c2VyIGF0dGVtcHRzIHRvIGF1dGhlbnRpY2F0ZVxuICogdmlhIEtlcmJlcm9zLCBidXQgZmFpbHMgdG8gY29ubmVjdCB0byB0aGUgS2VyYmVyb3MgY2xpZW50LlxuICpcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb0tlcmJlcm9zRXJyb3IgZXh0ZW5kcyBNb25nb1J1bnRpbWVFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29LZXJiZXJvc0Vycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvS2VyYmVyb3NFcnJvciA9IE1vbmdvS2VyYmVyb3NFcnJvcjtcbi8qKlxuICogQSBlcnJvciBnZW5lcmF0ZWQgd2hlbiB0aGUgdXNlciBhdHRlbXB0cyB0byBhdXRoZW50aWNhdGVcbiAqIHZpYSBBV1MsIGJ1dCBmYWlsc1xuICpcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb0FXU0Vycm9yIGV4dGVuZHMgTW9uZ29SdW50aW1lRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvQVdTRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29BV1NFcnJvciA9IE1vbmdvQVdTRXJyb3I7XG4vKipcbiAqIEEgZXJyb3IgZ2VuZXJhdGVkIHdoZW4gdGhlIHVzZXIgYXR0ZW1wdHMgdG8gYXV0aGVudGljYXRlXG4gKiB2aWEgQXp1cmUsIGJ1dCBmYWlscy5cbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29BenVyZUVycm9yIGV4dGVuZHMgTW9uZ29SdW50aW1lRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvQXp1cmVFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0F6dXJlRXJyb3IgPSBNb25nb0F6dXJlRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIGdlbmVyYXRlZCB3aGVuIGEgQ2hhbmdlU3RyZWFtIG9wZXJhdGlvbiBmYWlscyB0byBleGVjdXRlLlxuICpcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb0NoYW5nZVN0cmVhbUVycm9yIGV4dGVuZHMgTW9uZ29SdW50aW1lRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvQ2hhbmdlU3RyZWFtRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29DaGFuZ2VTdHJlYW1FcnJvciA9IE1vbmdvQ2hhbmdlU3RyZWFtRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIHRocm93biB3aGVuIHRoZSB1c2VyIGNhbGxzIGEgZnVuY3Rpb24gb3IgbWV0aG9kIG5vdCBzdXBwb3J0ZWQgb24gYSB0YWlsYWJsZSBjdXJzb3JcbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29UYWlsYWJsZUN1cnNvckVycm9yIGV4dGVuZHMgTW9uZ29BUElFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSA9ICdUYWlsYWJsZSBjdXJzb3IgZG9lcyBub3Qgc3VwcG9ydCB0aGlzIG9wZXJhdGlvbicpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvVGFpbGFibGVDdXJzb3JFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3IgPSBNb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3I7XG4vKiogQW4gZXJyb3IgZ2VuZXJhdGVkIHdoZW4gYSBHcmlkRlNTdHJlYW0gb3BlcmF0aW9uIGZhaWxzIHRvIGV4ZWN1dGUuXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvR3JpZEZTU3RyZWFtRXJyb3IgZXh0ZW5kcyBNb25nb1J1bnRpbWVFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29HcmlkRlNTdHJlYW1FcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0dyaWRGU1N0cmVhbUVycm9yID0gTW9uZ29HcmlkRlNTdHJlYW1FcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgZ2VuZXJhdGVkIHdoZW4gYSBtYWxmb3JtZWQgb3IgaW52YWxpZCBjaHVuayBpc1xuICogZW5jb3VudGVyZWQgd2hlbiByZWFkaW5nIGZyb20gYSBHcmlkRlNTdHJlYW0uXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvR3JpZEZTQ2h1bmtFcnJvciBleHRlbmRzIE1vbmdvUnVudGltZUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb0dyaWRGU0NodW5rRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29HcmlkRlNDaHVua0Vycm9yID0gTW9uZ29HcmlkRlNDaHVua0Vycm9yO1xuLyoqXG4gKiBBbiBlcnJvciBnZW5lcmF0ZWQgd2hlbiBhICoqcGFyc2FibGUqKiB1bmV4cGVjdGVkIHJlc3BvbnNlIGNvbWVzIGZyb20gdGhlIHNlcnZlci5cbiAqIFRoaXMgaXMgZ2VuZXJhbGx5IGFuIGVycm9yIHdoZXJlIHRoZSBkcml2ZXIgaW4gYSBzdGF0ZSBleHBlY3RpbmcgYSBjZXJ0YWluIGJlaGF2aW9yIHRvIG9jY3VyIGluXG4gKiB0aGUgbmV4dCBtZXNzYWdlIGZyb20gTW9uZ29EQiBidXQgaXQgcmVjZWl2ZXMgc29tZXRoaW5nIGVsc2UuXG4gKiBUaGlzIGVycm9yICoqZG9lcyBub3QqKiByZXByZXNlbnQgYW4gaXNzdWUgd2l0aCB3aXJlIG1lc3NhZ2UgZm9ybWF0dGluZy5cbiAqXG4gKiAjIyMjIEV4YW1wbGVcbiAqIFdoZW4gYW4gb3BlcmF0aW9uIGZhaWxzLCBpdCBpcyB0aGUgZHJpdmVyJ3Mgam9iIHRvIHJldHJ5IGl0LiBJdCBtdXN0IHBlcmZvcm0gc2VydmVyU2VsZWN0aW9uXG4gKiBhZ2FpbiB0byBtYWtlIHN1cmUgdGhhdCBpdCBhdHRlbXB0cyB0aGUgb3BlcmF0aW9uIGFnYWluc3QgYSBzZXJ2ZXIgaW4gYSBnb29kIHN0YXRlLiBJZiBzZXJ2ZXJcbiAqIHNlbGVjdGlvbiByZXR1cm5zIGEgc2VydmVyIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCByZXRyeWFibGUgb3BlcmF0aW9ucywgdGhpcyBlcnJvciBpcyB1c2VkLlxuICogVGhpcyBzY2VuYXJpbyBpcyB1bmxpa2VseSBhcyByZXRyeWFibGUgc3VwcG9ydCB3b3VsZCBhbHNvIGhhdmUgYmVlbiBkZXRlcm1pbmVkIG9uIHRoZSBmaXJzdCBhdHRlbXB0XG4gKiBidXQgaXQgaXMgcG9zc2libGUgdGhlIHN0YXRlIGNoYW5nZSBjb3VsZCByZXBvcnQgYSBzZWxlY3RhYmxlIHNlcnZlciB0aGF0IGRvZXMgbm90IHN1cHBvcnQgcmV0cmllcy5cbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29VbmV4cGVjdGVkU2VydmVyUmVzcG9uc2VFcnJvciBleHRlbmRzIE1vbmdvUnVudGltZUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb1VuZXhwZWN0ZWRTZXJ2ZXJSZXNwb25zZUVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlRXJyb3IgPSBNb25nb1VuZXhwZWN0ZWRTZXJ2ZXJSZXNwb25zZUVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciB0aHJvd24gd2hlbiB0aGUgdXNlciBhdHRlbXB0cyB0byBhZGQgb3B0aW9ucyB0byBhIGN1cnNvciB0aGF0IGhhcyBhbHJlYWR5IGJlZW5cbiAqIGluaXRpYWxpemVkXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvQ3Vyc29ySW5Vc2VFcnJvciBleHRlbmRzIE1vbmdvQVBJRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSAnQ3Vyc29yIGlzIGFscmVhZHkgaW5pdGlhbGl6ZWQnKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb0N1cnNvckluVXNlRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29DdXJzb3JJblVzZUVycm9yID0gTW9uZ29DdXJzb3JJblVzZUVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciBnZW5lcmF0ZWQgd2hlbiBhbiBhdHRlbXB0IGlzIG1hZGUgdG8gb3BlcmF0ZVxuICogb24gYSBjbG9zZWQvY2xvc2luZyBzZXJ2ZXIuXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvU2VydmVyQ2xvc2VkRXJyb3IgZXh0ZW5kcyBNb25nb0FQSUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gJ1NlcnZlciBpcyBjbG9zZWQnKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb1NlcnZlckNsb3NlZEVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvU2VydmVyQ2xvc2VkRXJyb3IgPSBNb25nb1NlcnZlckNsb3NlZEVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciB0aHJvd24gd2hlbiBhbiBhdHRlbXB0IGlzIG1hZGUgdG8gcmVhZCBmcm9tIGEgY3Vyc29yIHRoYXQgaGFzIGJlZW4gZXhoYXVzdGVkXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvQ3Vyc29yRXhoYXVzdGVkRXJyb3IgZXh0ZW5kcyBNb25nb0FQSUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0N1cnNvciBpcyBleGhhdXN0ZWQnKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29DdXJzb3JFeGhhdXN0ZWRFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0N1cnNvckV4aGF1c3RlZEVycm9yID0gTW9uZ29DdXJzb3JFeGhhdXN0ZWRFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgZ2VuZXJhdGVkIHdoZW4gYW4gYXR0ZW1wdCBpcyBtYWRlIHRvIG9wZXJhdGUgb24gYVxuICogZHJvcHBlZCwgb3Igb3RoZXJ3aXNlIHVuYXZhaWxhYmxlLCBkYXRhYmFzZS5cbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29Ub3BvbG9neUNsb3NlZEVycm9yIGV4dGVuZHMgTW9uZ29BUElFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSA9ICdUb3BvbG9neSBpcyBjbG9zZWQnKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb1RvcG9sb2d5Q2xvc2VkRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29Ub3BvbG9neUNsb3NlZEVycm9yID0gTW9uZ29Ub3BvbG9neUNsb3NlZEVycm9yO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0JlZm9yZUhhbmRzaGFrZSA9IFN5bWJvbCgnYmVmb3JlSGFuZHNoYWtlJyk7XG5mdW5jdGlvbiBpc05ldHdvcmtFcnJvckJlZm9yZUhhbmRzaGFrZShlcnIpIHtcbiAgICByZXR1cm4gZXJyW2tCZWZvcmVIYW5kc2hha2VdID09PSB0cnVlO1xufVxuZXhwb3J0cy5pc05ldHdvcmtFcnJvckJlZm9yZUhhbmRzaGFrZSA9IGlzTmV0d29ya0Vycm9yQmVmb3JlSGFuZHNoYWtlO1xuLyoqXG4gKiBBbiBlcnJvciBpbmRpY2F0aW5nIGFuIGlzc3VlIHdpdGggdGhlIG5ldHdvcmssIGluY2x1ZGluZyBUQ1AgZXJyb3JzIGFuZCB0aW1lb3V0cy5cbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb05ldHdvcmtFcnJvciBleHRlbmRzIE1vbmdvRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLmJlZm9yZUhhbmRzaGFrZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICB0aGlzW2tCZWZvcmVIYW5kc2hha2VdID0gb3B0aW9ucy5iZWZvcmVIYW5kc2hha2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29OZXR3b3JrRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29OZXR3b3JrRXJyb3IgPSBNb25nb05ldHdvcmtFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgaW5kaWNhdGluZyBhIG5ldHdvcmsgdGltZW91dCBvY2N1cnJlZFxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKlxuICogQHByaXZhdGVSZW1hcmtzXG4gKiBtb25nb2RiLWNsaWVudC1lbmNyeXB0aW9uIGhhcyBhIGRlcGVuZGVuY3kgb24gdGhpcyBlcnJvciB3aXRoIGFuIGluc3RhbmNlb2YgY2hlY2tcbiAqL1xuY2xhc3MgTW9uZ29OZXR3b3JrVGltZW91dEVycm9yIGV4dGVuZHMgTW9uZ29OZXR3b3JrRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvTmV0d29ya1RpbWVvdXRFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb05ldHdvcmtUaW1lb3V0RXJyb3IgPSBNb25nb05ldHdvcmtUaW1lb3V0RXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIHVzZWQgd2hlbiBhdHRlbXB0aW5nIHRvIHBhcnNlIGEgdmFsdWUgKGxpa2UgYSBjb25uZWN0aW9uIHN0cmluZylcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb1BhcnNlRXJyb3IgZXh0ZW5kcyBNb25nb0RyaXZlckVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb1BhcnNlRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29QYXJzZUVycm9yID0gTW9uZ29QYXJzZUVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciBnZW5lcmF0ZWQgd2hlbiB0aGUgdXNlciBzdXBwbGllcyBtYWxmb3JtZWQgb3IgdW5leHBlY3RlZCBhcmd1bWVudHNcbiAqIG9yIHdoZW4gYSByZXF1aXJlZCBhcmd1bWVudCBvciBmaWVsZCBpcyBub3QgcHJvdmlkZWQuXG4gKlxuICpcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIGV4dGVuZHMgTW9uZ29BUElFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yID0gTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgZ2VuZXJhdGVkIHdoZW4gYSBmZWF0dXJlIHRoYXQgaXMgbm90IGVuYWJsZWQgb3IgYWxsb3dlZCBmb3IgdGhlIGN1cnJlbnQgc2VydmVyXG4gKiBjb25maWd1cmF0aW9uIGlzIHVzZWRcbiAqXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvQ29tcGF0aWJpbGl0eUVycm9yIGV4dGVuZHMgTW9uZ29BUElFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29Db21wYXRpYmlsaXR5RXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IgPSBNb25nb0NvbXBhdGliaWxpdHlFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgZ2VuZXJhdGVkIHdoZW4gdGhlIHVzZXIgZmFpbHMgdG8gcHJvdmlkZSBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscyBiZWZvcmUgYXR0ZW1wdGluZ1xuICogdG8gY29ubmVjdCB0byBhIG1vbmdvIHNlcnZlciBpbnN0YW5jZS5cbiAqXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IgZXh0ZW5kcyBNb25nb0FQSUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IgPSBNb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yO1xuLyoqXG4gKiBBbiBlcnJvciBnZW5lcmF0ZWQgd2hlbiBhIHJlcXVpcmVkIG1vZHVsZSBvciBkZXBlbmRlbmN5IGlzIG5vdCBwcmVzZW50IGluIHRoZSBsb2NhbCBlbnZpcm9ubWVudFxuICpcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb01pc3NpbmdEZXBlbmRlbmN5RXJyb3IgZXh0ZW5kcyBNb25nb0FQSUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCB7IGNhdXNlIH0gPSB7fSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgaWYgKGNhdXNlKVxuICAgICAgICAgICAgdGhpcy5jYXVzZSA9IGNhdXNlO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb01pc3NpbmdEZXBlbmRlbmN5RXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29NaXNzaW5nRGVwZW5kZW5jeUVycm9yID0gTW9uZ29NaXNzaW5nRGVwZW5kZW5jeUVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciBzaWduaWZ5aW5nIGEgZ2VuZXJhbCBzeXN0ZW0gaXNzdWVcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb1N5c3RlbUVycm9yIGV4dGVuZHMgTW9uZ29FcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgcmVhc29uKSB7XG4gICAgICAgIGlmIChyZWFzb24gJiYgcmVhc29uLmVycm9yKSB7XG4gICAgICAgICAgICBzdXBlcihyZWFzb24uZXJyb3IubWVzc2FnZSB8fCByZWFzb24uZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlYXNvbikge1xuICAgICAgICAgICAgdGhpcy5yZWFzb24gPSByZWFzb247XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb2RlID0gcmVhc29uLmVycm9yPy5jb2RlO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb1N5c3RlbUVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvU3lzdGVtRXJyb3IgPSBNb25nb1N5c3RlbUVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciBzaWduaWZ5aW5nIGEgY2xpZW50LXNpZGUgc2VydmVyIHNlbGVjdGlvbiBlcnJvclxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvU2VydmVyU2VsZWN0aW9uRXJyb3IgZXh0ZW5kcyBNb25nb1N5c3RlbUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZWFzb24pIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgcmVhc29uKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29TZXJ2ZXJTZWxlY3Rpb25FcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb1NlcnZlclNlbGVjdGlvbkVycm9yID0gTW9uZ29TZXJ2ZXJTZWxlY3Rpb25FcnJvcjtcbmZ1bmN0aW9uIG1ha2VXcml0ZUNvbmNlcm5SZXN1bHRPYmplY3QoaW5wdXQpIHtcbiAgICBjb25zdCBvdXRwdXQgPSBPYmplY3QuYXNzaWduKHt9LCBpbnB1dCk7XG4gICAgaWYgKG91dHB1dC5vayA9PT0gMCkge1xuICAgICAgICBvdXRwdXQub2sgPSAxO1xuICAgICAgICBkZWxldGUgb3V0cHV0LmVycm1zZztcbiAgICAgICAgZGVsZXRlIG91dHB1dC5jb2RlO1xuICAgICAgICBkZWxldGUgb3V0cHV0LmNvZGVOYW1lO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xufVxuLyoqXG4gKiBBbiBlcnJvciB0aHJvd24gd2hlbiB0aGUgc2VydmVyIHJlcG9ydHMgYSB3cml0ZUNvbmNlcm5FcnJvclxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvV3JpdGVDb25jZXJuRXJyb3IgZXh0ZW5kcyBNb25nb1NlcnZlckVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQpIHtcbiAgICAgICAgaWYgKHJlc3VsdCAmJiBBcnJheS5pc0FycmF5KHJlc3VsdC5lcnJvckxhYmVscykpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3JMYWJlbHMgPSByZXN1bHQuZXJyb3JMYWJlbHM7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMuZXJySW5mbyA9IG1lc3NhZ2UuZXJySW5mbztcbiAgICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdCA9IG1ha2VXcml0ZUNvbmNlcm5SZXN1bHRPYmplY3QocmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb1dyaXRlQ29uY2VybkVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvV3JpdGVDb25jZXJuRXJyb3IgPSBNb25nb1dyaXRlQ29uY2VybkVycm9yO1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL21vbmdvZGIvc3BlY2lmaWNhdGlvbnMvYmxvYi9tYXN0ZXIvc291cmNlL3JldHJ5YWJsZS1yZWFkcy9yZXRyeWFibGUtcmVhZHMucnN0I3JldHJ5YWJsZS1lcnJvclxuY29uc3QgUkVUUllBQkxFX1JFQURfRVJST1JfQ09ERVMgPSBuZXcgU2V0KFtcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuSG9zdFVucmVhY2hhYmxlLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5Ib3N0Tm90Rm91bmQsXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLk5ldHdvcmtUaW1lb3V0LFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5TaHV0ZG93bkluUHJvZ3Jlc3MsXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLlByaW1hcnlTdGVwcGVkRG93bixcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuU29ja2V0RXhjZXB0aW9uLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5Ob3RXcml0YWJsZVByaW1hcnksXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLkludGVycnVwdGVkQXRTaHV0ZG93bixcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuSW50ZXJydXB0ZWREdWVUb1JlcGxTdGF0ZUNoYW5nZSxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuTm90UHJpbWFyeU5vU2Vjb25kYXJ5T2ssXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLk5vdFByaW1hcnlPclNlY29uZGFyeVxuXSk7XG4vLyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9tb25nb2RiL3NwZWNpZmljYXRpb25zL2Jsb2IvbWFzdGVyL3NvdXJjZS9yZXRyeWFibGUtd3JpdGVzL3JldHJ5YWJsZS13cml0ZXMucnN0I3Rlcm1zXG5jb25zdCBSRVRSWUFCTEVfV1JJVEVfRVJST1JfQ09ERVMgPSBuZXcgU2V0KFtcbiAgICAuLi5SRVRSWUFCTEVfUkVBRF9FUlJPUl9DT0RFUyxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuRXhjZWVkZWRUaW1lTGltaXRcbl0pO1xuZnVuY3Rpb24gbmVlZHNSZXRyeWFibGVXcml0ZUxhYmVsKGVycm9yLCBtYXhXaXJlVmVyc2lvbikge1xuICAgIC8vIHByZS00LjQgc2VydmVyLCB0aGVuIHRoZSBkcml2ZXIgYWRkcyBhbiBlcnJvciBsYWJlbCBmb3IgZXZlcnkgdmFsaWQgY2FzZVxuICAgIC8vIGV4ZWN1dGUgb3BlcmF0aW9uIHdpbGwgb25seSBpbnNwZWN0IHRoZSBsYWJlbCwgY29kZS9tZXNzYWdlIGxvZ2ljIGlzIGhhbmRsZWQgaGVyZVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIE1vbmdvTmV0d29ya0Vycm9yKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBNb25nb0Vycm9yKSB7XG4gICAgICAgIGlmICgobWF4V2lyZVZlcnNpb24gPj0gOSB8fCBlcnJvci5oYXNFcnJvckxhYmVsKGV4cG9ydHMuTW9uZ29FcnJvckxhYmVsLlJldHJ5YWJsZVdyaXRlRXJyb3IpKSAmJlxuICAgICAgICAgICAgIWVycm9yLmhhc0Vycm9yTGFiZWwoZXhwb3J0cy5Nb25nb0Vycm9yTGFiZWwuSGFuZHNoYWtlRXJyb3IpKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgdGhlIGVycm9yIGxhYmVsIG5vIG5lZWQgdG8gYWRkIGl0IGFnYWluLiA0LjQrIHNlcnZlcnMgYWRkIHRoZSBsYWJlbC5cbiAgICAgICAgICAgIC8vIEluIHRoZSBjYXNlIHdoZXJlIHdlIGhhdmUgYSBoYW5kc2hha2UgZXJyb3IsIG5lZWQgdG8gZmFsbCBkb3duIHRvIHRoZSBsb2dpYyBjaGVja2luZ1xuICAgICAgICAgICAgLy8gdGhlIGNvZGVzLlxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIE1vbmdvV3JpdGVDb25jZXJuRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIFJFVFJZQUJMRV9XUklURV9FUlJPUl9DT0RFUy5oYXMoZXJyb3IucmVzdWx0Py5jb2RlID8/IGVycm9yLmNvZGUgPz8gMCk7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIE1vbmdvRXJyb3IgJiYgdHlwZW9mIGVycm9yLmNvZGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiBSRVRSWUFCTEVfV1JJVEVfRVJST1JfQ09ERVMuaGFzKGVycm9yLmNvZGUpO1xuICAgIH1cbiAgICBjb25zdCBpc05vdFdyaXRhYmxlUHJpbWFyeUVycm9yID0gZXhwb3J0cy5MRUdBQ1lfTk9UX1dSSVRBQkxFX1BSSU1BUllfRVJST1JfTUVTU0FHRS50ZXN0KGVycm9yLm1lc3NhZ2UpO1xuICAgIGlmIChpc05vdFdyaXRhYmxlUHJpbWFyeUVycm9yKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBpc05vZGVJc1JlY292ZXJpbmdFcnJvciA9IGV4cG9ydHMuTk9ERV9JU19SRUNPVkVSSU5HX0VSUk9SX01FU1NBR0UudGVzdChlcnJvci5tZXNzYWdlKTtcbiAgICBpZiAoaXNOb2RlSXNSZWNvdmVyaW5nRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydHMubmVlZHNSZXRyeWFibGVXcml0ZUxhYmVsID0gbmVlZHNSZXRyeWFibGVXcml0ZUxhYmVsO1xuZnVuY3Rpb24gaXNSZXRyeWFibGVXcml0ZUVycm9yKGVycm9yKSB7XG4gICAgcmV0dXJuIGVycm9yLmhhc0Vycm9yTGFiZWwoZXhwb3J0cy5Nb25nb0Vycm9yTGFiZWwuUmV0cnlhYmxlV3JpdGVFcnJvcik7XG59XG5leHBvcnRzLmlzUmV0cnlhYmxlV3JpdGVFcnJvciA9IGlzUmV0cnlhYmxlV3JpdGVFcnJvcjtcbi8qKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgaXMgc29tZXRoaW5nIHRoZSBkcml2ZXIgc2hvdWxkIGF0dGVtcHQgdG8gcmV0cnkgKi9cbmZ1bmN0aW9uIGlzUmV0cnlhYmxlUmVhZEVycm9yKGVycm9yKSB7XG4gICAgY29uc3QgaGFzUmV0cnlhYmxlRXJyb3JDb2RlID0gdHlwZW9mIGVycm9yLmNvZGUgPT09ICdudW1iZXInID8gUkVUUllBQkxFX1JFQURfRVJST1JfQ09ERVMuaGFzKGVycm9yLmNvZGUpIDogZmFsc2U7XG4gICAgaWYgKGhhc1JldHJ5YWJsZUVycm9yQ29kZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTW9uZ29OZXR3b3JrRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGlzTm90V3JpdGFibGVQcmltYXJ5RXJyb3IgPSBleHBvcnRzLkxFR0FDWV9OT1RfV1JJVEFCTEVfUFJJTUFSWV9FUlJPUl9NRVNTQUdFLnRlc3QoZXJyb3IubWVzc2FnZSk7XG4gICAgaWYgKGlzTm90V3JpdGFibGVQcmltYXJ5RXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGlzTm9kZUlzUmVjb3ZlcmluZ0Vycm9yID0gZXhwb3J0cy5OT0RFX0lTX1JFQ09WRVJJTkdfRVJST1JfTUVTU0FHRS50ZXN0KGVycm9yLm1lc3NhZ2UpO1xuICAgIGlmIChpc05vZGVJc1JlY292ZXJpbmdFcnJvcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0cy5pc1JldHJ5YWJsZVJlYWRFcnJvciA9IGlzUmV0cnlhYmxlUmVhZEVycm9yO1xuY29uc3QgU0RBTV9SRUNPVkVSSU5HX0NPREVTID0gbmV3IFNldChbXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLlNodXRkb3duSW5Qcm9ncmVzcyxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuUHJpbWFyeVN0ZXBwZWREb3duLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5JbnRlcnJ1cHRlZEF0U2h1dGRvd24sXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLkludGVycnVwdGVkRHVlVG9SZXBsU3RhdGVDaGFuZ2UsXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLk5vdFByaW1hcnlPclNlY29uZGFyeVxuXSk7XG5jb25zdCBTREFNX05PVF9QUklNQVJZX0NPREVTID0gbmV3IFNldChbXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLk5vdFdyaXRhYmxlUHJpbWFyeSxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuTm90UHJpbWFyeU5vU2Vjb25kYXJ5T2ssXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLkxlZ2FjeU5vdFByaW1hcnlcbl0pO1xuY29uc3QgU0RBTV9OT0RFX1NIVVRUSU5HX0RPV05fRVJST1JfQ09ERVMgPSBuZXcgU2V0KFtcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuSW50ZXJydXB0ZWRBdFNodXRkb3duLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5TaHV0ZG93bkluUHJvZ3Jlc3Ncbl0pO1xuZnVuY3Rpb24gaXNSZWNvdmVyaW5nRXJyb3IoZXJyKSB7XG4gICAgaWYgKHR5cGVvZiBlcnIuY29kZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgLy8gSWYgYW55IGVycm9yIGNvZGUgZXhpc3RzLCB3ZSBpZ25vcmUgdGhlIGVycm9yLm1lc3NhZ2VcbiAgICAgICAgcmV0dXJuIFNEQU1fUkVDT1ZFUklOR19DT0RFUy5oYXMoZXJyLmNvZGUpO1xuICAgIH1cbiAgICByZXR1cm4gKGV4cG9ydHMuTEVHQUNZX05PVF9QUklNQVJZX09SX1NFQ09OREFSWV9FUlJPUl9NRVNTQUdFLnRlc3QoZXJyLm1lc3NhZ2UpIHx8XG4gICAgICAgIGV4cG9ydHMuTk9ERV9JU19SRUNPVkVSSU5HX0VSUk9SX01FU1NBR0UudGVzdChlcnIubWVzc2FnZSkpO1xufVxuZnVuY3Rpb24gaXNOb3RXcml0YWJsZVByaW1hcnlFcnJvcihlcnIpIHtcbiAgICBpZiAodHlwZW9mIGVyci5jb2RlID09PSAnbnVtYmVyJykge1xuICAgICAgICAvLyBJZiBhbnkgZXJyb3IgY29kZSBleGlzdHMsIHdlIGlnbm9yZSB0aGUgZXJyb3IubWVzc2FnZVxuICAgICAgICByZXR1cm4gU0RBTV9OT1RfUFJJTUFSWV9DT0RFUy5oYXMoZXJyLmNvZGUpO1xuICAgIH1cbiAgICBpZiAoaXNSZWNvdmVyaW5nRXJyb3IoZXJyKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBleHBvcnRzLkxFR0FDWV9OT1RfV1JJVEFCTEVfUFJJTUFSWV9FUlJPUl9NRVNTQUdFLnRlc3QoZXJyLm1lc3NhZ2UpO1xufVxuZnVuY3Rpb24gaXNOb2RlU2h1dHRpbmdEb3duRXJyb3IoZXJyKSB7XG4gICAgcmV0dXJuICEhKHR5cGVvZiBlcnIuY29kZSA9PT0gJ251bWJlcicgJiYgU0RBTV9OT0RFX1NIVVRUSU5HX0RPV05fRVJST1JfQ09ERVMuaGFzKGVyci5jb2RlKSk7XG59XG5leHBvcnRzLmlzTm9kZVNodXR0aW5nRG93bkVycm9yID0gaXNOb2RlU2h1dHRpbmdEb3duRXJyb3I7XG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBTREFNIGNhbiByZWNvdmVyIGZyb20gYSBnaXZlbiBlcnJvci4gSWYgaXQgY2Fubm90XG4gKiB0aGVuIHRoZSBwb29sIHdpbGwgYmUgY2xlYXJlZCwgYW5kIHNlcnZlciBzdGF0ZSB3aWxsIGNvbXBsZXRlbHkgcmVzZXRcbiAqIGxvY2FsbHkuXG4gKlxuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbW9uZ29kYi9zcGVjaWZpY2F0aW9ucy9ibG9iL21hc3Rlci9zb3VyY2Uvc2VydmVyLWRpc2NvdmVyeS1hbmQtbW9uaXRvcmluZy9zZXJ2ZXItZGlzY292ZXJ5LWFuZC1tb25pdG9yaW5nLnJzdCNub3QtbWFzdGVyLWFuZC1ub2RlLWlzLXJlY292ZXJpbmdcbiAqL1xuZnVuY3Rpb24gaXNTREFNVW5yZWNvdmVyYWJsZUVycm9yKGVycm9yKSB7XG4gICAgLy8gTk9URTogbnVsbCBjaGVjayBpcyBoZXJlIGZvciBhIHN0cmljdGx5IHByZS1DTUFQIHdvcmxkLCBhIHRpbWVvdXQgb3JcbiAgICAvLyAgICAgICBjbG9zZSBldmVudCBhcmUgY29uc2lkZXJlZCB1bnJlY292ZXJhYmxlXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTW9uZ29QYXJzZUVycm9yIHx8IGVycm9yID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBpc1JlY292ZXJpbmdFcnJvcihlcnJvcikgfHwgaXNOb3RXcml0YWJsZVByaW1hcnlFcnJvcihlcnJvcik7XG59XG5leHBvcnRzLmlzU0RBTVVucmVjb3ZlcmFibGVFcnJvciA9IGlzU0RBTVVucmVjb3ZlcmFibGVFcnJvcjtcbmZ1bmN0aW9uIGlzTmV0d29ya1RpbWVvdXRFcnJvcihlcnIpIHtcbiAgICByZXR1cm4gISEoZXJyIGluc3RhbmNlb2YgTW9uZ29OZXR3b3JrRXJyb3IgJiYgZXJyLm1lc3NhZ2UubWF0Y2goL3RpbWVkIG91dC8pKTtcbn1cbmV4cG9ydHMuaXNOZXR3b3JrVGltZW91dEVycm9yID0gaXNOZXR3b3JrVGltZW91dEVycm9yO1xuZnVuY3Rpb24gaXNSZXN1bWFibGVFcnJvcihlcnJvciwgd2lyZVZlcnNpb24pIHtcbiAgICBpZiAoZXJyb3IgPT0gbnVsbCB8fCAhKGVycm9yIGluc3RhbmNlb2YgTW9uZ29FcnJvcikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBNb25nb05ldHdvcmtFcnJvcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHdpcmVWZXJzaW9uICE9IG51bGwgJiYgd2lyZVZlcnNpb24gPj0gOSkge1xuICAgICAgICAvLyBEUklWRVJTLTEzMDg6IEZvciA0LjQgZHJpdmVycyBydW5uaW5nIGFnYWluc3QgNC40IHNlcnZlcnMsIGRyaXZlcnMgd2lsbCBhZGQgYSBzcGVjaWFsIGNhc2UgdG8gdHJlYXQgdGhlIEN1cnNvck5vdEZvdW5kIGVycm9yIGNvZGUgYXMgcmVzdW1hYmxlXG4gICAgICAgIGlmIChlcnJvci5jb2RlID09PSBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuQ3Vyc29yTm90Rm91bmQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlcnJvci5oYXNFcnJvckxhYmVsKGV4cG9ydHMuTW9uZ29FcnJvckxhYmVsLlJlc3VtYWJsZUNoYW5nZVN0cmVhbUVycm9yKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBlcnJvci5jb2RlID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5HRVRfTU9SRV9SRVNVTUFCTEVfQ09ERVMuaGFzKGVycm9yLmNvZGUpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnRzLmlzUmVzdW1hYmxlRXJyb3IgPSBpc1Jlc3VtYWJsZUVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3IuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiaXNSZXN1bWFibGVFcnJvciIsImlzTmV0d29ya1RpbWVvdXRFcnJvciIsImlzU0RBTVVucmVjb3ZlcmFibGVFcnJvciIsImlzTm9kZVNodXR0aW5nRG93bkVycm9yIiwiaXNSZXRyeWFibGVSZWFkRXJyb3IiLCJpc1JldHJ5YWJsZVdyaXRlRXJyb3IiLCJuZWVkc1JldHJ5YWJsZVdyaXRlTGFiZWwiLCJNb25nb1dyaXRlQ29uY2VybkVycm9yIiwiTW9uZ29TZXJ2ZXJTZWxlY3Rpb25FcnJvciIsIk1vbmdvU3lzdGVtRXJyb3IiLCJNb25nb01pc3NpbmdEZXBlbmRlbmN5RXJyb3IiLCJNb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yIiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiTW9uZ29QYXJzZUVycm9yIiwiTW9uZ29OZXR3b3JrVGltZW91dEVycm9yIiwiTW9uZ29OZXR3b3JrRXJyb3IiLCJpc05ldHdvcmtFcnJvckJlZm9yZUhhbmRzaGFrZSIsIk1vbmdvVG9wb2xvZ3lDbG9zZWRFcnJvciIsIk1vbmdvQ3Vyc29yRXhoYXVzdGVkRXJyb3IiLCJNb25nb1NlcnZlckNsb3NlZEVycm9yIiwiTW9uZ29DdXJzb3JJblVzZUVycm9yIiwiTW9uZ29VbmV4cGVjdGVkU2VydmVyUmVzcG9uc2VFcnJvciIsIk1vbmdvR3JpZEZTQ2h1bmtFcnJvciIsIk1vbmdvR3JpZEZTU3RyZWFtRXJyb3IiLCJNb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3IiLCJNb25nb0NoYW5nZVN0cmVhbUVycm9yIiwiTW9uZ29BenVyZUVycm9yIiwiTW9uZ29BV1NFcnJvciIsIk1vbmdvS2VyYmVyb3NFcnJvciIsIk1vbmdvRXhwaXJlZFNlc3Npb25FcnJvciIsIk1vbmdvVHJhbnNhY3Rpb25FcnJvciIsIk1vbmdvTm90Q29ubmVjdGVkRXJyb3IiLCJNb25nb0RlY29tcHJlc3Npb25FcnJvciIsIk1vbmdvQmF0Y2hSZUV4ZWN1dGlvbkVycm9yIiwiTW9uZ29SdW50aW1lRXJyb3IiLCJNb25nb0FQSUVycm9yIiwiTW9uZ29Ecml2ZXJFcnJvciIsIk1vbmdvU2VydmVyRXJyb3IiLCJNb25nb0Vycm9yIiwiTW9uZ29FcnJvckxhYmVsIiwiR0VUX01PUkVfUkVTVU1BQkxFX0NPREVTIiwiTU9OR09EQl9FUlJPUl9DT0RFUyIsIk5PREVfSVNfUkVDT1ZFUklOR19FUlJPUl9NRVNTQUdFIiwiTEVHQUNZX05PVF9QUklNQVJZX09SX1NFQ09OREFSWV9FUlJPUl9NRVNTQUdFIiwiTEVHQUNZX05PVF9XUklUQUJMRV9QUklNQVJZX0VSUk9SX01FU1NBR0UiLCJrRXJyb3JMYWJlbHMiLCJTeW1ib2wiLCJSZWdFeHAiLCJmcmVlemUiLCJIb3N0VW5yZWFjaGFibGUiLCJIb3N0Tm90Rm91bmQiLCJOZXR3b3JrVGltZW91dCIsIlNodXRkb3duSW5Qcm9ncmVzcyIsIlByaW1hcnlTdGVwcGVkRG93biIsIkV4Y2VlZGVkVGltZUxpbWl0IiwiU29ja2V0RXhjZXB0aW9uIiwiTm90V3JpdGFibGVQcmltYXJ5IiwiSW50ZXJydXB0ZWRBdFNodXRkb3duIiwiSW50ZXJydXB0ZWREdWVUb1JlcGxTdGF0ZUNoYW5nZSIsIk5vdFByaW1hcnlOb1NlY29uZGFyeU9rIiwiTm90UHJpbWFyeU9yU2Vjb25kYXJ5IiwiU3RhbGVTaGFyZFZlcnNpb24iLCJTdGFsZUVwb2NoIiwiU3RhbGVDb25maWciLCJSZXRyeUNoYW5nZVN0cmVhbSIsIkZhaWxlZFRvU2F0aXNmeVJlYWRQcmVmZXJlbmNlIiwiQ3Vyc29yTm90Rm91bmQiLCJMZWdhY3lOb3RQcmltYXJ5IiwiV3JpdGVDb25jZXJuRmFpbGVkIiwiTmFtZXNwYWNlTm90Rm91bmQiLCJJbGxlZ2FsT3BlcmF0aW9uIiwiTWF4VGltZU1TRXhwaXJlZCIsIlVua25vd25SZXBsV3JpdGVDb25jZXJuIiwiVW5zYXRpc2ZpYWJsZVdyaXRlQ29uY2VybiIsIlJlYXV0aGVudGljYXRlIiwiU2V0IiwiUmV0cnlhYmxlV3JpdGVFcnJvciIsIlRyYW5zaWVudFRyYW5zYWN0aW9uRXJyb3IiLCJVbmtub3duVHJhbnNhY3Rpb25Db21taXRSZXN1bHQiLCJSZXN1bWFibGVDaGFuZ2VTdHJlYW1FcnJvciIsIkhhbmRzaGFrZUVycm9yIiwiUmVzZXRQb29sIiwiSW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucyIsIk5vV3JpdGVzUGVyZm9ybWVkIiwiaXNBZ2dyZWdhdGVFcnJvciIsImUiLCJBcnJheSIsImlzQXJyYXkiLCJlcnJvcnMiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsImJ1aWxkRXJyb3JNZXNzYWdlIiwiY2F1c2UiLCJsZW5ndGgiLCJtYXAiLCJqb2luIiwibmFtZSIsImVycm1zZyIsImhhc0Vycm9yTGFiZWwiLCJsYWJlbCIsImhhcyIsImFkZEVycm9yTGFiZWwiLCJhZGQiLCJlcnJvckxhYmVscyIsImZyb20iLCIkZXJyIiwia0JlZm9yZUhhbmRzaGFrZSIsImVyciIsIm9wdGlvbnMiLCJiZWZvcmVIYW5kc2hha2UiLCJyZWFzb24iLCJlcnJvciIsImNvZGUiLCJtYWtlV3JpdGVDb25jZXJuUmVzdWx0T2JqZWN0IiwiaW5wdXQiLCJvdXRwdXQiLCJhc3NpZ24iLCJvayIsImNvZGVOYW1lIiwicmVzdWx0IiwiZXJySW5mbyIsIlJFVFJZQUJMRV9SRUFEX0VSUk9SX0NPREVTIiwiUkVUUllBQkxFX1dSSVRFX0VSUk9SX0NPREVTIiwibWF4V2lyZVZlcnNpb24iLCJpc05vdFdyaXRhYmxlUHJpbWFyeUVycm9yIiwidGVzdCIsImlzTm9kZUlzUmVjb3ZlcmluZ0Vycm9yIiwiaGFzUmV0cnlhYmxlRXJyb3JDb2RlIiwiU0RBTV9SRUNPVkVSSU5HX0NPREVTIiwiU0RBTV9OT1RfUFJJTUFSWV9DT0RFUyIsIlNEQU1fTk9ERV9TSFVUVElOR19ET1dOX0VSUk9SX0NPREVTIiwiaXNSZWNvdmVyaW5nRXJyb3IiLCJtYXRjaCIsIndpcmVWZXJzaW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/error.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/explain.js":
/*!*********************************************!*\
  !*** ./node_modules/mongodb/lib/explain.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Explain = exports.ExplainVerbosity = void 0;\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/** @public */ exports.ExplainVerbosity = Object.freeze({\n    queryPlanner: \"queryPlanner\",\n    queryPlannerExtended: \"queryPlannerExtended\",\n    executionStats: \"executionStats\",\n    allPlansExecution: \"allPlansExecution\"\n});\n/** @internal */ class Explain {\n    constructor(verbosity){\n        if (typeof verbosity === \"boolean\") {\n            this.verbosity = verbosity ? exports.ExplainVerbosity.allPlansExecution : exports.ExplainVerbosity.queryPlanner;\n        } else {\n            this.verbosity = verbosity;\n        }\n    }\n    static fromOptions(options) {\n        if (options?.explain == null) return;\n        const explain = options.explain;\n        if (typeof explain === \"boolean\" || typeof explain === \"string\") {\n            return new Explain(explain);\n        }\n        throw new error_1.MongoInvalidArgumentError('Field \"explain\" must be a string or a boolean');\n    }\n}\nexports.Explain = Explain; //# sourceMappingURL=explain.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZXhwbGFpbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsZUFBZSxHQUFHQSx3QkFBd0IsR0FBRyxLQUFLO0FBQ2xELE1BQU1JLFVBQVVDLG1CQUFPQSxDQUFDLDBEQUFTO0FBQ2pDLFlBQVksR0FDWkwsd0JBQXdCLEdBQUdGLE9BQU9RLE1BQU0sQ0FBQztJQUNyQ0MsY0FBYztJQUNkQyxzQkFBc0I7SUFDdEJDLGdCQUFnQjtJQUNoQkMsbUJBQW1CO0FBQ3ZCO0FBQ0EsY0FBYyxHQUNkLE1BQU1SO0lBQ0ZTLFlBQVlDLFNBQVMsQ0FBRTtRQUNuQixJQUFJLE9BQU9BLGNBQWMsV0FBVztZQUNoQyxJQUFJLENBQUNBLFNBQVMsR0FBR0EsWUFDWFosUUFBUUcsZ0JBQWdCLENBQUNPLGlCQUFpQixHQUMxQ1YsUUFBUUcsZ0JBQWdCLENBQUNJLFlBQVk7UUFDL0MsT0FDSztZQUNELElBQUksQ0FBQ0ssU0FBUyxHQUFHQTtRQUNyQjtJQUNKO0lBQ0EsT0FBT0MsWUFBWUMsT0FBTyxFQUFFO1FBQ3hCLElBQUlBLFNBQVNDLFdBQVcsTUFDcEI7UUFDSixNQUFNQSxVQUFVRCxRQUFRQyxPQUFPO1FBQy9CLElBQUksT0FBT0EsWUFBWSxhQUFhLE9BQU9BLFlBQVksVUFBVTtZQUM3RCxPQUFPLElBQUliLFFBQVFhO1FBQ3ZCO1FBQ0EsTUFBTSxJQUFJWCxRQUFRWSx5QkFBeUIsQ0FBQztJQUNoRDtBQUNKO0FBQ0FoQixlQUFlLEdBQUdFLFNBQ2xCLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9leHBsYWluLmpzPzYyNjIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkV4cGxhaW4gPSBleHBvcnRzLkV4cGxhaW5WZXJib3NpdHkgPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4vZXJyb3JcIik7XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0cy5FeHBsYWluVmVyYm9zaXR5ID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgcXVlcnlQbGFubmVyOiAncXVlcnlQbGFubmVyJyxcbiAgICBxdWVyeVBsYW5uZXJFeHRlbmRlZDogJ3F1ZXJ5UGxhbm5lckV4dGVuZGVkJyxcbiAgICBleGVjdXRpb25TdGF0czogJ2V4ZWN1dGlvblN0YXRzJyxcbiAgICBhbGxQbGFuc0V4ZWN1dGlvbjogJ2FsbFBsYW5zRXhlY3V0aW9uJ1xufSk7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBFeHBsYWluIHtcbiAgICBjb25zdHJ1Y3Rvcih2ZXJib3NpdHkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ZXJib3NpdHkgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgdGhpcy52ZXJib3NpdHkgPSB2ZXJib3NpdHlcbiAgICAgICAgICAgICAgICA/IGV4cG9ydHMuRXhwbGFpblZlcmJvc2l0eS5hbGxQbGFuc0V4ZWN1dGlvblxuICAgICAgICAgICAgICAgIDogZXhwb3J0cy5FeHBsYWluVmVyYm9zaXR5LnF1ZXJ5UGxhbm5lcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudmVyYm9zaXR5ID0gdmVyYm9zaXR5O1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tT3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zPy5leHBsYWluID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGV4cGxhaW4gPSBvcHRpb25zLmV4cGxhaW47XG4gICAgICAgIGlmICh0eXBlb2YgZXhwbGFpbiA9PT0gJ2Jvb2xlYW4nIHx8IHR5cGVvZiBleHBsYWluID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFeHBsYWluKGV4cGxhaW4pO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0ZpZWxkIFwiZXhwbGFpblwiIG11c3QgYmUgYSBzdHJpbmcgb3IgYSBib29sZWFuJyk7XG4gICAgfVxufVxuZXhwb3J0cy5FeHBsYWluID0gRXhwbGFpbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4cGxhaW4uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRXhwbGFpbiIsIkV4cGxhaW5WZXJib3NpdHkiLCJlcnJvcl8xIiwicmVxdWlyZSIsImZyZWV6ZSIsInF1ZXJ5UGxhbm5lciIsInF1ZXJ5UGxhbm5lckV4dGVuZGVkIiwiZXhlY3V0aW9uU3RhdHMiLCJhbGxQbGFuc0V4ZWN1dGlvbiIsImNvbnN0cnVjdG9yIiwidmVyYm9zaXR5IiwiZnJvbU9wdGlvbnMiLCJvcHRpb25zIiwiZXhwbGFpbiIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/explain.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/gridfs/download.js":
/*!*****************************************************!*\
  !*** ./node_modules/mongodb/lib/gridfs/download.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.GridFSBucketReadStream = void 0;\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/**\n * A readable stream that enables you to read buffers from GridFS.\n *\n * Do not instantiate this class directly. Use `openDownloadStream()` instead.\n * @public\n */ class GridFSBucketReadStream extends stream_1.Readable {\n    /**\n     * @param chunks - Handle for chunks collection\n     * @param files - Handle for files collection\n     * @param readPreference - The read preference to use\n     * @param filter - The filter to use to find the file document\n     * @internal\n     */ constructor(chunks, files, readPreference, filter, options){\n        super();\n        this.s = {\n            bytesToTrim: 0,\n            bytesToSkip: 0,\n            bytesRead: 0,\n            chunks,\n            expected: 0,\n            files,\n            filter,\n            init: false,\n            expectedEnd: 0,\n            options: {\n                start: 0,\n                end: 0,\n                ...options\n            },\n            readPreference\n        };\n    }\n    /**\n     * Reads from the cursor and pushes to the stream.\n     * Private Impl, do not call directly\n     * @internal\n     */ _read() {\n        if (this.destroyed) return;\n        waitForFile(this, ()=>doRead(this));\n    }\n    /**\n     * Sets the 0-based offset in bytes to start streaming from. Throws\n     * an error if this stream has entered flowing mode\n     * (e.g. if you've already called `on('data')`)\n     *\n     * @param start - 0-based offset in bytes to start streaming from\n     */ start(start = 0) {\n        throwIfInitialized(this);\n        this.s.options.start = start;\n        return this;\n    }\n    /**\n     * Sets the 0-based offset in bytes to start streaming from. Throws\n     * an error if this stream has entered flowing mode\n     * (e.g. if you've already called `on('data')`)\n     *\n     * @param end - Offset in bytes to stop reading at\n     */ end(end = 0) {\n        throwIfInitialized(this);\n        this.s.options.end = end;\n        return this;\n    }\n    /**\n     * Marks this stream as aborted (will never push another `data` event)\n     * and kills the underlying cursor. Will emit the 'end' event, and then\n     * the 'close' event once the cursor is successfully killed.\n     */ async abort() {\n        this.push(null);\n        this.destroyed = true;\n        if (this.s.cursor) {\n            try {\n                await this.s.cursor.close();\n            } finally{\n                this.emit(GridFSBucketReadStream.CLOSE);\n            }\n        } else {\n            if (!this.s.init) {\n                // If not initialized, fire close event because we will never\n                // get a cursor\n                this.emit(GridFSBucketReadStream.CLOSE);\n            }\n        }\n    }\n}\n/**\n * An error occurred\n * @event\n */ GridFSBucketReadStream.ERROR = \"error\";\n/**\n * Fires when the stream loaded the file document corresponding to the provided id.\n * @event\n */ GridFSBucketReadStream.FILE = \"file\";\n/**\n * Emitted when a chunk of data is available to be consumed.\n * @event\n */ GridFSBucketReadStream.DATA = \"data\";\n/**\n * Fired when the stream is exhausted (no more data events).\n * @event\n */ GridFSBucketReadStream.END = \"end\";\n/**\n * Fired when the stream is exhausted and the underlying cursor is killed\n * @event\n */ GridFSBucketReadStream.CLOSE = \"close\";\nexports.GridFSBucketReadStream = GridFSBucketReadStream;\nfunction throwIfInitialized(stream) {\n    if (stream.s.init) {\n        throw new error_1.MongoGridFSStreamError(\"Options cannot be changed after the stream is initialized\");\n    }\n}\nfunction doRead(stream) {\n    if (stream.destroyed) return;\n    if (!stream.s.cursor) return;\n    if (!stream.s.file) return;\n    const handleReadResult = ({ error, doc })=>{\n        if (stream.destroyed) {\n            return;\n        }\n        if (error) {\n            stream.emit(GridFSBucketReadStream.ERROR, error);\n            return;\n        }\n        if (!doc) {\n            stream.push(null);\n            stream.s.cursor?.close().then(()=>{\n                stream.emit(GridFSBucketReadStream.CLOSE);\n            }, (error)=>{\n                stream.emit(GridFSBucketReadStream.ERROR, error);\n            });\n            return;\n        }\n        if (!stream.s.file) return;\n        const bytesRemaining = stream.s.file.length - stream.s.bytesRead;\n        const expectedN = stream.s.expected++;\n        const expectedLength = Math.min(stream.s.file.chunkSize, bytesRemaining);\n        if (doc.n > expectedN) {\n            return stream.emit(GridFSBucketReadStream.ERROR, new error_1.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${doc.n}, expected: ${expectedN}`));\n        }\n        if (doc.n < expectedN) {\n            return stream.emit(GridFSBucketReadStream.ERROR, new error_1.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${doc.n}, expected: ${expectedN}`));\n        }\n        let buf = Buffer.isBuffer(doc.data) ? doc.data : doc.data.buffer;\n        if (buf.byteLength !== expectedLength) {\n            if (bytesRemaining <= 0) {\n                return stream.emit(GridFSBucketReadStream.ERROR, new error_1.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${doc.n}, expected file length ${stream.s.file.length} bytes but already read ${stream.s.bytesRead} bytes`));\n            }\n            return stream.emit(GridFSBucketReadStream.ERROR, new error_1.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${buf.byteLength}, expected: ${expectedLength}`));\n        }\n        stream.s.bytesRead += buf.byteLength;\n        if (buf.byteLength === 0) {\n            return stream.push(null);\n        }\n        let sliceStart = null;\n        let sliceEnd = null;\n        if (stream.s.bytesToSkip != null) {\n            sliceStart = stream.s.bytesToSkip;\n            stream.s.bytesToSkip = 0;\n        }\n        const atEndOfStream = expectedN === stream.s.expectedEnd - 1;\n        const bytesLeftToRead = stream.s.options.end - stream.s.bytesToSkip;\n        if (atEndOfStream && stream.s.bytesToTrim != null) {\n            sliceEnd = stream.s.file.chunkSize - stream.s.bytesToTrim;\n        } else if (stream.s.options.end && bytesLeftToRead < doc.data.byteLength) {\n            sliceEnd = bytesLeftToRead;\n        }\n        if (sliceStart != null || sliceEnd != null) {\n            buf = buf.slice(sliceStart || 0, sliceEnd || buf.byteLength);\n        }\n        stream.push(buf);\n        return;\n    };\n    stream.s.cursor.next().then((doc)=>handleReadResult({\n            error: null,\n            doc\n        }), (error)=>handleReadResult({\n            error,\n            doc: null\n        }));\n}\nfunction init(stream) {\n    const findOneOptions = {};\n    if (stream.s.readPreference) {\n        findOneOptions.readPreference = stream.s.readPreference;\n    }\n    if (stream.s.options && stream.s.options.sort) {\n        findOneOptions.sort = stream.s.options.sort;\n    }\n    if (stream.s.options && stream.s.options.skip) {\n        findOneOptions.skip = stream.s.options.skip;\n    }\n    const handleReadResult = ({ error, doc })=>{\n        if (error) {\n            return stream.emit(GridFSBucketReadStream.ERROR, error);\n        }\n        if (!doc) {\n            const identifier = stream.s.filter._id ? stream.s.filter._id.toString() : stream.s.filter.filename;\n            const errmsg = `FileNotFound: file ${identifier} was not found`;\n            // TODO(NODE-3483)\n            const err = new error_1.MongoRuntimeError(errmsg);\n            err.code = \"ENOENT\"; // TODO: NODE-3338 set property as part of constructor\n            return stream.emit(GridFSBucketReadStream.ERROR, err);\n        }\n        // If document is empty, kill the stream immediately and don't\n        // execute any reads\n        if (doc.length <= 0) {\n            stream.push(null);\n            return;\n        }\n        if (stream.destroyed) {\n            // If user destroys the stream before we have a cursor, wait\n            // until the query is done to say we're 'closed' because we can't\n            // cancel a query.\n            stream.emit(GridFSBucketReadStream.CLOSE);\n            return;\n        }\n        try {\n            stream.s.bytesToSkip = handleStartOption(stream, doc, stream.s.options);\n        } catch (error) {\n            return stream.emit(GridFSBucketReadStream.ERROR, error);\n        }\n        const filter = {\n            files_id: doc._id\n        };\n        // Currently (MongoDB 3.4.4) skip function does not support the index,\n        // it needs to retrieve all the documents first and then skip them. (CS-25811)\n        // As work around we use $gte on the \"n\" field.\n        if (stream.s.options && stream.s.options.start != null) {\n            const skip = Math.floor(stream.s.options.start / doc.chunkSize);\n            if (skip > 0) {\n                filter[\"n\"] = {\n                    $gte: skip\n                };\n            }\n        }\n        stream.s.cursor = stream.s.chunks.find(filter).sort({\n            n: 1\n        });\n        if (stream.s.readPreference) {\n            stream.s.cursor.withReadPreference(stream.s.readPreference);\n        }\n        stream.s.expectedEnd = Math.ceil(doc.length / doc.chunkSize);\n        stream.s.file = doc;\n        try {\n            stream.s.bytesToTrim = handleEndOption(stream, doc, stream.s.cursor, stream.s.options);\n        } catch (error) {\n            return stream.emit(GridFSBucketReadStream.ERROR, error);\n        }\n        stream.emit(GridFSBucketReadStream.FILE, doc);\n        return;\n    };\n    stream.s.files.findOne(stream.s.filter, findOneOptions).then((doc)=>handleReadResult({\n            error: null,\n            doc\n        }), (error)=>handleReadResult({\n            error,\n            doc: null\n        }));\n}\nfunction waitForFile(stream, callback) {\n    if (stream.s.file) {\n        return callback();\n    }\n    if (!stream.s.init) {\n        init(stream);\n        stream.s.init = true;\n    }\n    stream.once(\"file\", ()=>{\n        callback();\n    });\n}\nfunction handleStartOption(stream, doc, options) {\n    if (options && options.start != null) {\n        if (options.start > doc.length) {\n            throw new error_1.MongoInvalidArgumentError(`Stream start (${options.start}) must not be more than the length of the file (${doc.length})`);\n        }\n        if (options.start < 0) {\n            throw new error_1.MongoInvalidArgumentError(`Stream start (${options.start}) must not be negative`);\n        }\n        if (options.end != null && options.end < options.start) {\n            throw new error_1.MongoInvalidArgumentError(`Stream start (${options.start}) must not be greater than stream end (${options.end})`);\n        }\n        stream.s.bytesRead = Math.floor(options.start / doc.chunkSize) * doc.chunkSize;\n        stream.s.expected = Math.floor(options.start / doc.chunkSize);\n        return options.start - stream.s.bytesRead;\n    }\n    throw new error_1.MongoInvalidArgumentError(\"Start option must be defined\");\n}\nfunction handleEndOption(stream, doc, cursor, options) {\n    if (options && options.end != null) {\n        if (options.end > doc.length) {\n            throw new error_1.MongoInvalidArgumentError(`Stream end (${options.end}) must not be more than the length of the file (${doc.length})`);\n        }\n        if (options.start == null || options.start < 0) {\n            throw new error_1.MongoInvalidArgumentError(`Stream end (${options.end}) must not be negative`);\n        }\n        const start = options.start != null ? Math.floor(options.start / doc.chunkSize) : 0;\n        cursor.limit(Math.ceil(options.end / doc.chunkSize) - start);\n        stream.s.expectedEnd = Math.ceil(options.end / doc.chunkSize);\n        return Math.ceil(options.end / doc.chunkSize) * doc.chunkSize - options.end;\n    }\n    throw new error_1.MongoInvalidArgumentError(\"End option must be defined\");\n} //# sourceMappingURL=download.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZ3JpZGZzL2Rvd25sb2FkLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw4QkFBOEIsR0FBRyxLQUFLO0FBQ3RDLE1BQU1HLFdBQVdDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDOzs7OztDQUtDLEdBQ0QsTUFBTUYsK0JBQStCQyxTQUFTRyxRQUFRO0lBQ2xEOzs7Ozs7S0FNQyxHQUNEQyxZQUFZQyxNQUFNLEVBQUVDLEtBQUssRUFBRUMsY0FBYyxFQUFFQyxNQUFNLEVBQUVDLE9BQU8sQ0FBRTtRQUN4RCxLQUFLO1FBQ0wsSUFBSSxDQUFDQyxDQUFDLEdBQUc7WUFDTEMsYUFBYTtZQUNiQyxhQUFhO1lBQ2JDLFdBQVc7WUFDWFI7WUFDQVMsVUFBVTtZQUNWUjtZQUNBRTtZQUNBTyxNQUFNO1lBQ05DLGFBQWE7WUFDYlAsU0FBUztnQkFDTFEsT0FBTztnQkFDUEMsS0FBSztnQkFDTCxHQUFHVCxPQUFPO1lBQ2Q7WUFDQUY7UUFDSjtJQUNKO0lBQ0E7Ozs7S0FJQyxHQUNEWSxRQUFRO1FBQ0osSUFBSSxJQUFJLENBQUNDLFNBQVMsRUFDZDtRQUNKQyxZQUFZLElBQUksRUFBRSxJQUFNQyxPQUFPLElBQUk7SUFDdkM7SUFDQTs7Ozs7O0tBTUMsR0FDREwsTUFBTUEsUUFBUSxDQUFDLEVBQUU7UUFDYk0sbUJBQW1CLElBQUk7UUFDdkIsSUFBSSxDQUFDYixDQUFDLENBQUNELE9BQU8sQ0FBQ1EsS0FBSyxHQUFHQTtRQUN2QixPQUFPLElBQUk7SUFDZjtJQUNBOzs7Ozs7S0FNQyxHQUNEQyxJQUFJQSxNQUFNLENBQUMsRUFBRTtRQUNUSyxtQkFBbUIsSUFBSTtRQUN2QixJQUFJLENBQUNiLENBQUMsQ0FBQ0QsT0FBTyxDQUFDUyxHQUFHLEdBQUdBO1FBQ3JCLE9BQU8sSUFB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LHNCQUFzQixDQUFDO1FBQ2xHO1FBQ0EsTUFBTUQsUUFBUVIsUUFBUVEsS0FBSyxJQUFJLE9BQU80QixLQUFLOEIsS0FBSyxDQUFDbEUsUUFBUVEsS0FBSyxHQUFHc0IsSUFBSVEsU0FBUyxJQUFJO1FBQ2xGckIsT0FBTzJELEtBQUssQ0FBQ3hDLEtBQUtrQyxJQUFJLENBQUN0RSxRQUFRUyxHQUFHLEdBQUdxQixJQUFJUSxTQUFTLElBQUk5QjtRQUN0RGlCLE9BQU94QixDQUFDLENBQUNNLFdBQVcsR0FBRzZCLEtBQUtrQyxJQUFJLENBQUN0RSxRQUFRUyxHQUFHLEdBQUdxQixJQUFJUSxTQUFTO1FBQzVELE9BQU9GLEtBQUtrQyxJQUFJLENBQUN0RSxRQUFRUyxHQUFHLEdBQUdxQixJQUFJUSxTQUFTLElBQUlSLElBQUlRLFNBQVMsR0FBR3RDLFFBQVFTLEdBQUc7SUFDL0U7SUFDQSxNQUFNLElBQUloQixRQUFRa0YseUJBQXlCLENBQUM7QUFDaEQsRUFDQSxvQ0FBb0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZ3JpZGZzL2Rvd25sb2FkLmpzPzFjZjEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkdyaWRGU0J1Y2tldFJlYWRTdHJlYW0gPSB2b2lkIDA7XG5jb25zdCBzdHJlYW1fMSA9IHJlcXVpcmUoXCJzdHJlYW1cIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuLyoqXG4gKiBBIHJlYWRhYmxlIHN0cmVhbSB0aGF0IGVuYWJsZXMgeW91IHRvIHJlYWQgYnVmZmVycyBmcm9tIEdyaWRGUy5cbiAqXG4gKiBEbyBub3QgaW5zdGFudGlhdGUgdGhpcyBjbGFzcyBkaXJlY3RseS4gVXNlIGBvcGVuRG93bmxvYWRTdHJlYW0oKWAgaW5zdGVhZC5cbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgR3JpZEZTQnVja2V0UmVhZFN0cmVhbSBleHRlbmRzIHN0cmVhbV8xLlJlYWRhYmxlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gY2h1bmtzIC0gSGFuZGxlIGZvciBjaHVua3MgY29sbGVjdGlvblxuICAgICAqIEBwYXJhbSBmaWxlcyAtIEhhbmRsZSBmb3IgZmlsZXMgY29sbGVjdGlvblxuICAgICAqIEBwYXJhbSByZWFkUHJlZmVyZW5jZSAtIFRoZSByZWFkIHByZWZlcmVuY2UgdG8gdXNlXG4gICAgICogQHBhcmFtIGZpbHRlciAtIFRoZSBmaWx0ZXIgdG8gdXNlIHRvIGZpbmQgdGhlIGZpbGUgZG9jdW1lbnRcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihjaHVua3MsIGZpbGVzLCByZWFkUHJlZmVyZW5jZSwgZmlsdGVyLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucyA9IHtcbiAgICAgICAgICAgIGJ5dGVzVG9UcmltOiAwLFxuICAgICAgICAgICAgYnl0ZXNUb1NraXA6IDAsXG4gICAgICAgICAgICBieXRlc1JlYWQ6IDAsXG4gICAgICAgICAgICBjaHVua3MsXG4gICAgICAgICAgICBleHBlY3RlZDogMCxcbiAgICAgICAgICAgIGZpbGVzLFxuICAgICAgICAgICAgZmlsdGVyLFxuICAgICAgICAgICAgaW5pdDogZmFsc2UsXG4gICAgICAgICAgICBleHBlY3RlZEVuZDogMCxcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBzdGFydDogMCxcbiAgICAgICAgICAgICAgICBlbmQ6IDAsXG4gICAgICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlYWRQcmVmZXJlbmNlXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gdGhlIGN1cnNvciBhbmQgcHVzaGVzIHRvIHRoZSBzdHJlYW0uXG4gICAgICogUHJpdmF0ZSBJbXBsLCBkbyBub3QgY2FsbCBkaXJlY3RseVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9yZWFkKCkge1xuICAgICAgICBpZiAodGhpcy5kZXN0cm95ZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHdhaXRGb3JGaWxlKHRoaXMsICgpID0+IGRvUmVhZCh0aGlzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIDAtYmFzZWQgb2Zmc2V0IGluIGJ5dGVzIHRvIHN0YXJ0IHN0cmVhbWluZyBmcm9tLiBUaHJvd3NcbiAgICAgKiBhbiBlcnJvciBpZiB0aGlzIHN0cmVhbSBoYXMgZW50ZXJlZCBmbG93aW5nIG1vZGVcbiAgICAgKiAoZS5nLiBpZiB5b3UndmUgYWxyZWFkeSBjYWxsZWQgYG9uKCdkYXRhJylgKVxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXJ0IC0gMC1iYXNlZCBvZmZzZXQgaW4gYnl0ZXMgdG8gc3RhcnQgc3RyZWFtaW5nIGZyb21cbiAgICAgKi9cbiAgICBzdGFydChzdGFydCA9IDApIHtcbiAgICAgICAgdGhyb3dJZkluaXRpYWxpemVkKHRoaXMpO1xuICAgICAgICB0aGlzLnMub3B0aW9ucy5zdGFydCA9IHN0YXJ0O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgMC1iYXNlZCBvZmZzZXQgaW4gYnl0ZXMgdG8gc3RhcnQgc3RyZWFtaW5nIGZyb20uIFRocm93c1xuICAgICAqIGFuIGVycm9yIGlmIHRoaXMgc3RyZWFtIGhhcyBlbnRlcmVkIGZsb3dpbmcgbW9kZVxuICAgICAqIChlLmcuIGlmIHlvdSd2ZSBhbHJlYWR5IGNhbGxlZCBgb24oJ2RhdGEnKWApXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZW5kIC0gT2Zmc2V0IGluIGJ5dGVzIHRvIHN0b3AgcmVhZGluZyBhdFxuICAgICAqL1xuICAgIGVuZChlbmQgPSAwKSB7XG4gICAgICAgIHRocm93SWZJbml0aWFsaXplZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zLm9wdGlvbnMuZW5kID0gZW5kO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgdGhpcyBzdHJlYW0gYXMgYWJvcnRlZCAod2lsbCBuZXZlciBwdXNoIGFub3RoZXIgYGRhdGFgIGV2ZW50KVxuICAgICAqIGFuZCBraWxscyB0aGUgdW5kZXJseWluZyBjdXJzb3IuIFdpbGwgZW1pdCB0aGUgJ2VuZCcgZXZlbnQsIGFuZCB0aGVuXG4gICAgICogdGhlICdjbG9zZScgZXZlbnQgb25jZSB0aGUgY3Vyc29yIGlzIHN1Y2Nlc3NmdWxseSBraWxsZWQuXG4gICAgICovXG4gICAgYXN5bmMgYWJvcnQoKSB7XG4gICAgICAgIHRoaXMucHVzaChudWxsKTtcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5zLmN1cnNvcikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnMuY3Vyc29yLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoR3JpZEZTQnVja2V0UmVhZFN0cmVhbS5DTE9TRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucy5pbml0KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgbm90IGluaXRpYWxpemVkLCBmaXJlIGNsb3NlIGV2ZW50IGJlY2F1c2Ugd2Ugd2lsbCBuZXZlclxuICAgICAgICAgICAgICAgIC8vIGdldCBhIGN1cnNvclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChHcmlkRlNCdWNrZXRSZWFkU3RyZWFtLkNMT1NFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQW4gZXJyb3Igb2NjdXJyZWRcbiAqIEBldmVudFxuICovXG5HcmlkRlNCdWNrZXRSZWFkU3RyZWFtLkVSUk9SID0gJ2Vycm9yJztcbi8qKlxuICogRmlyZXMgd2hlbiB0aGUgc3RyZWFtIGxvYWRlZCB0aGUgZmlsZSBkb2N1bWVudCBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm92aWRlZCBpZC5cbiAqIEBldmVudFxuICovXG5HcmlkRlNCdWNrZXRSZWFkU3RyZWFtLkZJTEUgPSAnZmlsZSc7XG4vKipcbiAqIEVtaXR0ZWQgd2hlbiBhIGNodW5rIG9mIGRhdGEgaXMgYXZhaWxhYmxlIHRvIGJlIGNvbnN1bWVkLlxuICogQGV2ZW50XG4gKi9cbkdyaWRGU0J1Y2tldFJlYWRTdHJlYW0uREFUQSA9ICdkYXRhJztcbi8qKlxuICogRmlyZWQgd2hlbiB0aGUgc3RyZWFtIGlzIGV4aGF1c3RlZCAobm8gbW9yZSBkYXRhIGV2ZW50cykuXG4gKiBAZXZlbnRcbiAqL1xuR3JpZEZTQnVja2V0UmVhZFN0cmVhbS5FTkQgPSAnZW5kJztcbi8qKlxuICogRmlyZWQgd2hlbiB0aGUgc3RyZWFtIGlzIGV4aGF1c3RlZCBhbmQgdGhlIHVuZGVybHlpbmcgY3Vyc29yIGlzIGtpbGxlZFxuICogQGV2ZW50XG4gKi9cbkdyaWRGU0J1Y2tldFJlYWRTdHJlYW0uQ0xPU0UgPSAnY2xvc2UnO1xuZXhwb3J0cy5HcmlkRlNCdWNrZXRSZWFkU3RyZWFtID0gR3JpZEZTQnVja2V0UmVhZFN0cmVhbTtcbmZ1bmN0aW9uIHRocm93SWZJbml0aWFsaXplZChzdHJlYW0pIHtcbiAgICBpZiAoc3RyZWFtLnMuaW5pdCkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0dyaWRGU1N0cmVhbUVycm9yKCdPcHRpb25zIGNhbm5vdCBiZSBjaGFuZ2VkIGFmdGVyIHRoZSBzdHJlYW0gaXMgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkb1JlYWQoc3RyZWFtKSB7XG4gICAgaWYgKHN0cmVhbS5kZXN0cm95ZWQpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAoIXN0cmVhbS5zLmN1cnNvcilcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmICghc3RyZWFtLnMuZmlsZSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGhhbmRsZVJlYWRSZXN1bHQgPSAoeyBlcnJvciwgZG9jIH0pID0+IHtcbiAgICAgICAgaWYgKHN0cmVhbS5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHN0cmVhbS5lbWl0KEdyaWRGU0J1Y2tldFJlYWRTdHJlYW0uRVJST1IsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRvYykge1xuICAgICAgICAgICAgc3RyZWFtLnB1c2gobnVsbCk7XG4gICAgICAgICAgICBzdHJlYW0ucy5jdXJzb3I/LmNsb3NlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3RyZWFtLmVtaXQoR3JpZEZTQnVja2V0UmVhZFN0cmVhbS5DTE9TRSk7XG4gICAgICAgICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgc3RyZWFtLmVtaXQoR3JpZEZTQnVja2V0UmVhZFN0cmVhbS5FUlJPUiwgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzdHJlYW0ucy5maWxlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBieXRlc1JlbWFpbmluZyA9IHN0cmVhbS5zLmZpbGUubGVuZ3RoIC0gc3RyZWFtLnMuYnl0ZXNSZWFkO1xuICAgICAgICBjb25zdCBleHBlY3RlZE4gPSBzdHJlYW0ucy5leHBlY3RlZCsrO1xuICAgICAgICBjb25zdCBleHBlY3RlZExlbmd0aCA9IE1hdGgubWluKHN0cmVhbS5zLmZpbGUuY2h1bmtTaXplLCBieXRlc1JlbWFpbmluZyk7XG4gICAgICAgIGlmIChkb2MubiA+IGV4cGVjdGVkTikge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmVhbS5lbWl0KEdyaWRGU0J1Y2tldFJlYWRTdHJlYW0uRVJST1IsIG5ldyBlcnJvcl8xLk1vbmdvR3JpZEZTQ2h1bmtFcnJvcihgQ2h1bmtJc01pc3Npbmc6IEdvdCB1bmV4cGVjdGVkIG46ICR7ZG9jLm59LCBleHBlY3RlZDogJHtleHBlY3RlZE59YCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb2MubiA8IGV4cGVjdGVkTikge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmVhbS5lbWl0KEdyaWRGU0J1Y2tldFJlYWRTdHJlYW0uRVJST1IsIG5ldyBlcnJvcl8xLk1vbmdvR3JpZEZTQ2h1bmtFcnJvcihgRXh0cmFDaHVuazogR290IHVuZXhwZWN0ZWQgbjogJHtkb2Mubn0sIGV4cGVjdGVkOiAke2V4cGVjdGVkTn1gKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGJ1ZiA9IEJ1ZmZlci5pc0J1ZmZlcihkb2MuZGF0YSkgPyBkb2MuZGF0YSA6IGRvYy5kYXRhLmJ1ZmZlcjtcbiAgICAgICAgaWYgKGJ1Zi5ieXRlTGVuZ3RoICE9PSBleHBlY3RlZExlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGJ5dGVzUmVtYWluaW5nIDw9IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyZWFtLmVtaXQoR3JpZEZTQnVja2V0UmVhZFN0cmVhbS5FUlJPUiwgbmV3IGVycm9yXzEuTW9uZ29HcmlkRlNDaHVua0Vycm9yKGBFeHRyYUNodW5rOiBHb3QgdW5leHBlY3RlZCBuOiAke2RvYy5ufSwgZXhwZWN0ZWQgZmlsZSBsZW5ndGggJHtzdHJlYW0ucy5maWxlLmxlbmd0aH0gYnl0ZXMgYnV0IGFscmVhZHkgcmVhZCAke3N0cmVhbS5zLmJ5dGVzUmVhZH0gYnl0ZXNgKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RyZWFtLmVtaXQoR3JpZEZTQnVja2V0UmVhZFN0cmVhbS5FUlJPUiwgbmV3IGVycm9yXzEuTW9uZ29HcmlkRlNDaHVua0Vycm9yKGBDaHVua0lzV3JvbmdTaXplOiBHb3QgdW5leHBlY3RlZCBsZW5ndGg6ICR7YnVmLmJ5dGVMZW5ndGh9LCBleHBlY3RlZDogJHtleHBlY3RlZExlbmd0aH1gKSk7XG4gICAgICAgIH1cbiAgICAgICAgc3RyZWFtLnMuYnl0ZXNSZWFkICs9IGJ1Zi5ieXRlTGVuZ3RoO1xuICAgICAgICBpZiAoYnVmLmJ5dGVMZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBzdHJlYW0ucHVzaChudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2xpY2VTdGFydCA9IG51bGw7XG4gICAgICAgIGxldCBzbGljZUVuZCA9IG51bGw7XG4gICAgICAgIGlmIChzdHJlYW0ucy5ieXRlc1RvU2tpcCAhPSBudWxsKSB7XG4gICAgICAgICAgICBzbGljZVN0YXJ0ID0gc3RyZWFtLnMuYnl0ZXNUb1NraXA7XG4gICAgICAgICAgICBzdHJlYW0ucy5ieXRlc1RvU2tpcCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXRFbmRPZlN0cmVhbSA9IGV4cGVjdGVkTiA9PT0gc3RyZWFtLnMuZXhwZWN0ZWRFbmQgLSAxO1xuICAgICAgICBjb25zdCBieXRlc0xlZnRUb1JlYWQgPSBzdHJlYW0ucy5vcHRpb25zLmVuZCAtIHN0cmVhbS5zLmJ5dGVzVG9Ta2lwO1xuICAgICAgICBpZiAoYXRFbmRPZlN0cmVhbSAmJiBzdHJlYW0ucy5ieXRlc1RvVHJpbSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzbGljZUVuZCA9IHN0cmVhbS5zLmZpbGUuY2h1bmtTaXplIC0gc3RyZWFtLnMuYnl0ZXNUb1RyaW07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3RyZWFtLnMub3B0aW9ucy5lbmQgJiYgYnl0ZXNMZWZ0VG9SZWFkIDwgZG9jLmRhdGEuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgc2xpY2VFbmQgPSBieXRlc0xlZnRUb1JlYWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNsaWNlU3RhcnQgIT0gbnVsbCB8fCBzbGljZUVuZCAhPSBudWxsKSB7XG4gICAgICAgICAgICBidWYgPSBidWYuc2xpY2Uoc2xpY2VTdGFydCB8fCAwLCBzbGljZUVuZCB8fCBidWYuYnl0ZUxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgc3RyZWFtLnB1c2goYnVmKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgc3RyZWFtLnMuY3Vyc29yLm5leHQoKS50aGVuKGRvYyA9PiBoYW5kbGVSZWFkUmVzdWx0KHsgZXJyb3I6IG51bGwsIGRvYyB9KSwgZXJyb3IgPT4gaGFuZGxlUmVhZFJlc3VsdCh7IGVycm9yLCBkb2M6IG51bGwgfSkpO1xufVxuZnVuY3Rpb24gaW5pdChzdHJlYW0pIHtcbiAgICBjb25zdCBmaW5kT25lT3B0aW9ucyA9IHt9O1xuICAgIGlmIChzdHJlYW0ucy5yZWFkUHJlZmVyZW5jZSkge1xuICAgICAgICBmaW5kT25lT3B0aW9ucy5yZWFkUHJlZmVyZW5jZSA9IHN0cmVhbS5zLnJlYWRQcmVmZXJlbmNlO1xuICAgIH1cbiAgICBpZiAoc3RyZWFtLnMub3B0aW9ucyAmJiBzdHJlYW0ucy5vcHRpb25zLnNvcnQpIHtcbiAgICAgICAgZmluZE9uZU9wdGlvbnMuc29ydCA9IHN0cmVhbS5zLm9wdGlvbnMuc29ydDtcbiAgICB9XG4gICAgaWYgKHN0cmVhbS5zLm9wdGlvbnMgJiYgc3RyZWFtLnMub3B0aW9ucy5za2lwKSB7XG4gICAgICAgIGZpbmRPbmVPcHRpb25zLnNraXAgPSBzdHJlYW0ucy5vcHRpb25zLnNraXA7XG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZVJlYWRSZXN1bHQgPSAoeyBlcnJvciwgZG9jIH0pID0+IHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyZWFtLmVtaXQoR3JpZEZTQnVja2V0UmVhZFN0cmVhbS5FUlJPUiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZG9jKSB7XG4gICAgICAgICAgICBjb25zdCBpZGVudGlmaWVyID0gc3RyZWFtLnMuZmlsdGVyLl9pZFxuICAgICAgICAgICAgICAgID8gc3RyZWFtLnMuZmlsdGVyLl9pZC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgOiBzdHJlYW0ucy5maWx0ZXIuZmlsZW5hbWU7XG4gICAgICAgICAgICBjb25zdCBlcnJtc2cgPSBgRmlsZU5vdEZvdW5kOiBmaWxlICR7aWRlbnRpZmllcn0gd2FzIG5vdCBmb3VuZGA7XG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4MylcbiAgICAgICAgICAgIGNvbnN0IGVyciA9IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGVycm1zZyk7XG4gICAgICAgICAgICBlcnIuY29kZSA9ICdFTk9FTlQnOyAvLyBUT0RPOiBOT0RFLTMzMzggc2V0IHByb3BlcnR5IGFzIHBhcnQgb2YgY29uc3RydWN0b3JcbiAgICAgICAgICAgIHJldHVybiBzdHJlYW0uZW1pdChHcmlkRlNCdWNrZXRSZWFkU3RyZWFtLkVSUk9SLCBlcnIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIGRvY3VtZW50IGlzIGVtcHR5LCBraWxsIHRoZSBzdHJlYW0gaW1tZWRpYXRlbHkgYW5kIGRvbid0XG4gICAgICAgIC8vIGV4ZWN1dGUgYW55IHJlYWRzXG4gICAgICAgIGlmIChkb2MubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICAgIHN0cmVhbS5wdXNoKG51bGwpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdHJlYW0uZGVzdHJveWVkKSB7XG4gICAgICAgICAgICAvLyBJZiB1c2VyIGRlc3Ryb3lzIHRoZSBzdHJlYW0gYmVmb3JlIHdlIGhhdmUgYSBjdXJzb3IsIHdhaXRcbiAgICAgICAgICAgIC8vIHVudGlsIHRoZSBxdWVyeSBpcyBkb25lIHRvIHNheSB3ZSdyZSAnY2xvc2VkJyBiZWNhdXNlIHdlIGNhbid0XG4gICAgICAgICAgICAvLyBjYW5jZWwgYSBxdWVyeS5cbiAgICAgICAgICAgIHN0cmVhbS5lbWl0KEdyaWRGU0J1Y2tldFJlYWRTdHJlYW0uQ0xPU0UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzdHJlYW0ucy5ieXRlc1RvU2tpcCA9IGhhbmRsZVN0YXJ0T3B0aW9uKHN0cmVhbSwgZG9jLCBzdHJlYW0ucy5vcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHJlYW0uZW1pdChHcmlkRlNCdWNrZXRSZWFkU3RyZWFtLkVSUk9SLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsdGVyID0geyBmaWxlc19pZDogZG9jLl9pZCB9O1xuICAgICAgICAvLyBDdXJyZW50bHkgKE1vbmdvREIgMy40LjQpIHNraXAgZnVuY3Rpb24gZG9lcyBub3Qgc3VwcG9ydCB0aGUgaW5kZXgsXG4gICAgICAgIC8vIGl0IG5lZWRzIHRvIHJldHJpZXZlIGFsbCB0aGUgZG9jdW1lbnRzIGZpcnN0IGFuZCB0aGVuIHNraXAgdGhlbS4gKENTLTI1ODExKVxuICAgICAgICAvLyBBcyB3b3JrIGFyb3VuZCB3ZSB1c2UgJGd0ZSBvbiB0aGUgXCJuXCIgZmllbGQuXG4gICAgICAgIGlmIChzdHJlYW0ucy5vcHRpb25zICYmIHN0cmVhbS5zLm9wdGlvbnMuc3RhcnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3Qgc2tpcCA9IE1hdGguZmxvb3Ioc3RyZWFtLnMub3B0aW9ucy5zdGFydCAvIGRvYy5jaHVua1NpemUpO1xuICAgICAgICAgICAgaWYgKHNraXAgPiAwKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyWyduJ10gPSB7ICRndGU6IHNraXAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdHJlYW0ucy5jdXJzb3IgPSBzdHJlYW0ucy5jaHVua3MuZmluZChmaWx0ZXIpLnNvcnQoeyBuOiAxIH0pO1xuICAgICAgICBpZiAoc3RyZWFtLnMucmVhZFByZWZlcmVuY2UpIHtcbiAgICAgICAgICAgIHN0cmVhbS5zLmN1cnNvci53aXRoUmVhZFByZWZlcmVuY2Uoc3RyZWFtLnMucmVhZFByZWZlcmVuY2UpO1xuICAgICAgICB9XG4gICAgICAgIHN0cmVhbS5zLmV4cGVjdGVkRW5kID0gTWF0aC5jZWlsKGRvYy5sZW5ndGggLyBkb2MuY2h1bmtTaXplKTtcbiAgICAgICAgc3RyZWFtLnMuZmlsZSA9IGRvYztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN0cmVhbS5zLmJ5dGVzVG9UcmltID0gaGFuZGxlRW5kT3B0aW9uKHN0cmVhbSwgZG9jLCBzdHJlYW0ucy5jdXJzb3IsIHN0cmVhbS5zLm9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmVhbS5lbWl0KEdyaWRGU0J1Y2tldFJlYWRTdHJlYW0uRVJST1IsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBzdHJlYW0uZW1pdChHcmlkRlNCdWNrZXRSZWFkU3RyZWFtLkZJTEUsIGRvYyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIHN0cmVhbS5zLmZpbGVzLmZpbmRPbmUoc3RyZWFtLnMuZmlsdGVyLCBmaW5kT25lT3B0aW9ucykudGhlbihkb2MgPT4gaGFuZGxlUmVhZFJlc3VsdCh7IGVycm9yOiBudWxsLCBkb2MgfSksIGVycm9yID0+IGhhbmRsZVJlYWRSZXN1bHQoeyBlcnJvciwgZG9jOiBudWxsIH0pKTtcbn1cbmZ1bmN0aW9uIHdhaXRGb3JGaWxlKHN0cmVhbSwgY2FsbGJhY2spIHtcbiAgICBpZiAoc3RyZWFtLnMuZmlsZSkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgICB9XG4gICAgaWYgKCFzdHJlYW0ucy5pbml0KSB7XG4gICAgICAgIGluaXQoc3RyZWFtKTtcbiAgICAgICAgc3RyZWFtLnMuaW5pdCA9IHRydWU7XG4gICAgfVxuICAgIHN0cmVhbS5vbmNlKCdmaWxlJywgKCkgPT4ge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gaGFuZGxlU3RhcnRPcHRpb24oc3RyZWFtLCBkb2MsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnN0YXJ0ICE9IG51bGwpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnQgPiBkb2MubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBTdHJlYW0gc3RhcnQgKCR7b3B0aW9ucy5zdGFydH0pIG11c3Qgbm90IGJlIG1vcmUgdGhhbiB0aGUgbGVuZ3RoIG9mIHRoZSBmaWxlICgke2RvYy5sZW5ndGh9KWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnN0YXJ0IDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgU3RyZWFtIHN0YXJ0ICgke29wdGlvbnMuc3RhcnR9KSBtdXN0IG5vdCBiZSBuZWdhdGl2ZWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmVuZCAhPSBudWxsICYmIG9wdGlvbnMuZW5kIDwgb3B0aW9ucy5zdGFydCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgU3RyZWFtIHN0YXJ0ICgke29wdGlvbnMuc3RhcnR9KSBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gc3RyZWFtIGVuZCAoJHtvcHRpb25zLmVuZH0pYCk7XG4gICAgICAgIH1cbiAgICAgICAgc3RyZWFtLnMuYnl0ZXNSZWFkID0gTWF0aC5mbG9vcihvcHRpb25zLnN0YXJ0IC8gZG9jLmNodW5rU2l6ZSkgKiBkb2MuY2h1bmtTaXplO1xuICAgICAgICBzdHJlYW0ucy5leHBlY3RlZCA9IE1hdGguZmxvb3Iob3B0aW9ucy5zdGFydCAvIGRvYy5jaHVua1NpemUpO1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5zdGFydCAtIHN0cmVhbS5zLmJ5dGVzUmVhZDtcbiAgICB9XG4gICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignU3RhcnQgb3B0aW9uIG11c3QgYmUgZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gaGFuZGxlRW5kT3B0aW9uKHN0cmVhbSwgZG9jLCBjdXJzb3IsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmVuZCAhPSBudWxsKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmVuZCA+IGRvYy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYFN0cmVhbSBlbmQgKCR7b3B0aW9ucy5lbmR9KSBtdXN0IG5vdCBiZSBtb3JlIHRoYW4gdGhlIGxlbmd0aCBvZiB0aGUgZmlsZSAoJHtkb2MubGVuZ3RofSlgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5zdGFydCA9PSBudWxsIHx8IG9wdGlvbnMuc3RhcnQgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBTdHJlYW0gZW5kICgke29wdGlvbnMuZW5kfSkgbXVzdCBub3QgYmUgbmVnYXRpdmVgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGFydCA9IG9wdGlvbnMuc3RhcnQgIT0gbnVsbCA/IE1hdGguZmxvb3Iob3B0aW9ucy5zdGFydCAvIGRvYy5jaHVua1NpemUpIDogMDtcbiAgICAgICAgY3Vyc29yLmxpbWl0KE1hdGguY2VpbChvcHRpb25zLmVuZCAvIGRvYy5jaHVua1NpemUpIC0gc3RhcnQpO1xuICAgICAgICBzdHJlYW0ucy5leHBlY3RlZEVuZCA9IE1hdGguY2VpbChvcHRpb25zLmVuZCAvIGRvYy5jaHVua1NpemUpO1xuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG9wdGlvbnMuZW5kIC8gZG9jLmNodW5rU2l6ZSkgKiBkb2MuY2h1bmtTaXplIC0gb3B0aW9ucy5lbmQ7XG4gICAgfVxuICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0VuZCBvcHRpb24gbXVzdCBiZSBkZWZpbmVkJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kb3dubG9hZC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJHcmlkRlNCdWNrZXRSZWFkU3RyZWFtIiwic3RyZWFtXzEiLCJyZXF1aXJlIiwiZXJyb3JfMSIsIlJlYWRhYmxlIiwiY29uc3RydWN0b3IiLCJjaHVua3MiLCJmaWxlcyIsInJlYWRQcmVmZXJlbmNlIiwiZmlsdGVyIiwib3B0aW9ucyIsInMiLCJieXRlc1RvVHJpbSIsImJ5dGVzVG9Ta2lwIiwiYnl0ZXNSZWFkIiwiZXhwZWN0ZWQiLCJpbml0IiwiZXhwZWN0ZWRFbmQiLCJzdGFydCIsImVuZCIsIl9yZWFkIiwiZGVzdHJveWVkIiwid2FpdEZvckZpbGUiLCJkb1JlYWQiLCJ0aHJvd0lmSW5pdGlhbGl6ZWQiLCJhYm9ydCIsInB1c2giLCJjdXJzb3IiLCJjbG9zZSIsImVtaXQiLCJDTE9TRSIsIkVSUk9SIiwiRklMRSIsIkRBVEEiLCJFTkQiLCJzdHJlYW0iLCJNb25nb0dyaWRGU1N0cmVhbUVycm9yIiwiZmlsZSIsImhhbmRsZVJlYWRSZXN1bHQiLCJlcnJvciIsImRvYyIsInRoZW4iLCJieXRlc1JlbWFpbmluZyIsImxlbmd0aCIsImV4cGVjdGVkTiIsImV4cGVjdGVkTGVuZ3RoIiwiTWF0aCIsIm1pbiIsImNodW5rU2l6ZSIsIm4iLCJNb25nb0dyaWRGU0NodW5rRXJyb3IiLCJidWYiLCJCdWZmZXIiLCJpc0J1ZmZlciIsImRhdGEiLCJidWZmZXIiLCJieXRlTGVuZ3RoIiwic2xpY2VTdGFydCIsInNsaWNlRW5kIiwiYXRFbmRPZlN0cmVhbSIsImJ5dGVzTGVmdFRvUmVhZCIsInNsaWNlIiwibmV4dCIsImZpbmRPbmVPcHRpb25zIiwic29ydCIsInNraXAiLCJpZGVudGlmaWVyIiwiX2lkIiwidG9TdHJpbmciLCJmaWxlbmFtZSIsImVycm1zZyIsImVyciIsIk1vbmdvUnVudGltZUVycm9yIiwiY29kZSIsImhhbmRsZVN0YXJ0T3B0aW9uIiwiZmlsZXNfaWQiLCJmbG9vciIsIiRndGUiLCJmaW5kIiwid2l0aFJlYWRQcmVmZXJlbmNlIiwiY2VpbCIsImhhbmRsZUVuZE9wdGlvbiIsImZpbmRPbmUiLCJjYWxsYmFjayIsIm9uY2UiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwibGltaXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/gridfs/download.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/gridfs/index.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/gridfs/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.GridFSBucket = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst write_concern_1 = __webpack_require__(/*! ../write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nconst download_1 = __webpack_require__(/*! ./download */ \"(ssr)/./node_modules/mongodb/lib/gridfs/download.js\");\nconst upload_1 = __webpack_require__(/*! ./upload */ \"(ssr)/./node_modules/mongodb/lib/gridfs/upload.js\");\nconst DEFAULT_GRIDFS_BUCKET_OPTIONS = {\n    bucketName: \"fs\",\n    chunkSizeBytes: 255 * 1024\n};\n/**\n * Constructor for a streaming GridFS interface\n * @public\n */ class GridFSBucket extends mongo_types_1.TypedEventEmitter {\n    constructor(db, options){\n        super();\n        this.setMaxListeners(0);\n        const privateOptions = {\n            ...DEFAULT_GRIDFS_BUCKET_OPTIONS,\n            ...options,\n            writeConcern: write_concern_1.WriteConcern.fromOptions(options)\n        };\n        this.s = {\n            db,\n            options: privateOptions,\n            _chunksCollection: db.collection(privateOptions.bucketName + \".chunks\"),\n            _filesCollection: db.collection(privateOptions.bucketName + \".files\"),\n            checkedIndexes: false,\n            calledOpenUploadStream: false\n        };\n    }\n    /**\n     * Returns a writable stream (GridFSBucketWriteStream) for writing\n     * buffers to GridFS. The stream's 'id' property contains the resulting\n     * file's id.\n     *\n     * @param filename - The value of the 'filename' key in the files doc\n     * @param options - Optional settings.\n     */ openUploadStream(filename, options) {\n        return new upload_1.GridFSBucketWriteStream(this, filename, options);\n    }\n    /**\n     * Returns a writable stream (GridFSBucketWriteStream) for writing\n     * buffers to GridFS for a custom file id. The stream's 'id' property contains the resulting\n     * file's id.\n     */ openUploadStreamWithId(id, filename, options) {\n        return new upload_1.GridFSBucketWriteStream(this, filename, {\n            ...options,\n            id\n        });\n    }\n    /** Returns a readable stream (GridFSBucketReadStream) for streaming file data from GridFS. */ openDownloadStream(id, options) {\n        return new download_1.GridFSBucketReadStream(this.s._chunksCollection, this.s._filesCollection, this.s.options.readPreference, {\n            _id: id\n        }, options);\n    }\n    /**\n     * Deletes a file with the given id\n     *\n     * @param id - The id of the file doc\n     */ async delete(id) {\n        const { deletedCount } = await this.s._filesCollection.deleteOne({\n            _id: id\n        });\n        // Delete orphaned chunks before returning FileNotFound\n        await this.s._chunksCollection.deleteMany({\n            files_id: id\n        });\n        if (deletedCount === 0) {\n            // TODO(NODE-3483): Replace with more appropriate error\n            // Consider creating new error MongoGridFSFileNotFoundError\n            throw new error_1.MongoRuntimeError(`File not found for id ${id}`);\n        }\n    }\n    /** Convenience wrapper around find on the files collection */ find(filter = {}, options = {}) {\n        return this.s._filesCollection.find(filter, options);\n    }\n    /**\n     * Returns a readable stream (GridFSBucketReadStream) for streaming the\n     * file with the given name from GridFS. If there are multiple files with\n     * the same name, this will stream the most recent file with the given name\n     * (as determined by the `uploadDate` field). You can set the `revision`\n     * option to change this behavior.\n     */ openDownloadStreamByName(filename, options) {\n        let sort = {\n            uploadDate: -1\n        };\n        let skip = undefined;\n        if (options && options.revision != null) {\n            if (options.revision >= 0) {\n                sort = {\n                    uploadDate: 1\n                };\n                skip = options.revision;\n            } else {\n                skip = -options.revision - 1;\n            }\n        }\n        return new download_1.GridFSBucketReadStream(this.s._chunksCollection, this.s._filesCollection, this.s.options.readPreference, {\n            filename\n        }, {\n            ...options,\n            sort,\n            skip\n        });\n    }\n    /**\n     * Renames the file with the given _id to the given string\n     *\n     * @param id - the id of the file to rename\n     * @param filename - new name for the file\n     */ async rename(id, filename) {\n        const filter = {\n            _id: id\n        };\n        const update = {\n            $set: {\n                filename\n            }\n        };\n        const { matchedCount } = await this.s._filesCollection.updateOne(filter, update);\n        if (matchedCount === 0) {\n            throw new error_1.MongoRuntimeError(`File with id ${id} not found`);\n        }\n    }\n    /** Removes this bucket's files collection, followed by its chunks collection. */ async drop() {\n        await this.s._filesCollection.drop();\n        await this.s._chunksCollection.drop();\n    }\n}\n/**\n * When the first call to openUploadStream is made, the upload stream will\n * check to see if it needs to create the proper indexes on the chunks and\n * files collections. This event is fired either when 1) it determines that\n * no index creation is necessary, 2) when it successfully creates the\n * necessary indexes.\n * @event\n */ GridFSBucket.INDEX = \"index\";\nexports.GridFSBucket = GridFSBucket; //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZ3JpZGZzL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxvQkFBb0IsR0FBRyxLQUFLO0FBQzVCLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1DLGdCQUFnQkQsbUJBQU9BLENBQUMsdUVBQWdCO0FBQzlDLE1BQU1FLGtCQUFrQkYsbUJBQU9BLENBQUMsMkVBQWtCO0FBQ2xELE1BQU1HLGFBQWFILG1CQUFPQSxDQUFDLHVFQUFZO0FBQ3ZDLE1BQU1JLFdBQVdKLG1CQUFPQSxDQUFDLG1FQUFVO0FBQ25DLE1BQU1LLGdDQUFnQztJQUNsQ0MsWUFBWTtJQUNaQyxnQkFBZ0IsTUFBTTtBQUMxQjtBQUNBOzs7Q0FHQyxHQUNELE1BQU1ULHFCQUFxQkcsY0FBY08saUJBQWlCO0lBQ3REQyxZQUFZQyxFQUFFLEVBQUVDLE9BQU8sQ0FBRTtRQUNyQixLQUFLO1FBQ0wsSUFBSSxDQUFDQyxlQUFlLENBQUM7UUFDckIsTUFBTUMsaUJBQWlCO1lBQ25CLEdBQUdSLDZCQUE2QjtZQUNoQyxHQUFHTSxPQUFPO1lBQ1ZHLGNBQWNaLGdCQUFnQmEsWUFBWSxDQUFDQyxXQUFXLENBQUNMO1FBQzNEO1FBQ0EsSUFBSSxDQUFDTSxDQUFDLEdBQUc7WUFDTFA7WUFDQUMsU0FBU0U7WUFDVEssbUJBQW1CUixHQUFHUyxVQUFVLENBQUNOLGVBQWVQLFVBQVUsR0FBRztZQUM3RGMsa0JBQWtCVixHQUFHUyxVQUFVLENBQUNOLGVBQWVQLFVBQVUsR0FBRztZQUM1RGUsZ0JBQWdCO1lBQ2hCQyx3QkFBd0I7UUFDNUI7SUFDSjtJQUNBOzs7Ozs7O0tBT0MsR0FDREMsaUJBQWlCQyxRQUFRLEVBQUViLE9BQU8sRUFBRTtRQUNoQyxPQUFPLElBQUlQLFNBQVNxQix1QkFBdUIsQ0FBQyxJQUFJLEVBQUVELFVBQVViO0lBQ2hFO0lB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QUFDLENBQUNDLGlCQUFpQixDQUFDaUMsSUFBSTtJQUN2QztBQUNKO0FBQ0E7Ozs7Ozs7Q0FPQyxHQUNEckQsYUFBYXNELEtBQUssR0FBRztBQUNyQnhELG9CQUFvQixHQUFHRSxjQUN2QixpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZ3JpZGZzL2luZGV4LmpzPzcxMGIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkdyaWRGU0J1Y2tldCA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBtb25nb190eXBlc18xID0gcmVxdWlyZShcIi4uL21vbmdvX3R5cGVzXCIpO1xuY29uc3Qgd3JpdGVfY29uY2Vybl8xID0gcmVxdWlyZShcIi4uL3dyaXRlX2NvbmNlcm5cIik7XG5jb25zdCBkb3dubG9hZF8xID0gcmVxdWlyZShcIi4vZG93bmxvYWRcIik7XG5jb25zdCB1cGxvYWRfMSA9IHJlcXVpcmUoXCIuL3VwbG9hZFwiKTtcbmNvbnN0IERFRkFVTFRfR1JJREZTX0JVQ0tFVF9PUFRJT05TID0ge1xuICAgIGJ1Y2tldE5hbWU6ICdmcycsXG4gICAgY2h1bmtTaXplQnl0ZXM6IDI1NSAqIDEwMjRcbn07XG4vKipcbiAqIENvbnN0cnVjdG9yIGZvciBhIHN0cmVhbWluZyBHcmlkRlMgaW50ZXJmYWNlXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIEdyaWRGU0J1Y2tldCBleHRlbmRzIG1vbmdvX3R5cGVzXzEuVHlwZWRFdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGRiLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2V0TWF4TGlzdGVuZXJzKDApO1xuICAgICAgICBjb25zdCBwcml2YXRlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLkRFRkFVTFRfR1JJREZTX0JVQ0tFVF9PUFRJT05TLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIHdyaXRlQ29uY2Vybjogd3JpdGVfY29uY2Vybl8xLldyaXRlQ29uY2Vybi5mcm9tT3B0aW9ucyhvcHRpb25zKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnMgPSB7XG4gICAgICAgICAgICBkYixcbiAgICAgICAgICAgIG9wdGlvbnM6IHByaXZhdGVPcHRpb25zLFxuICAgICAgICAgICAgX2NodW5rc0NvbGxlY3Rpb246IGRiLmNvbGxlY3Rpb24ocHJpdmF0ZU9wdGlvbnMuYnVja2V0TmFtZSArICcuY2h1bmtzJyksXG4gICAgICAgICAgICBfZmlsZXNDb2xsZWN0aW9uOiBkYi5jb2xsZWN0aW9uKHByaXZhdGVPcHRpb25zLmJ1Y2tldE5hbWUgKyAnLmZpbGVzJyksXG4gICAgICAgICAgICBjaGVja2VkSW5kZXhlczogZmFsc2UsXG4gICAgICAgICAgICBjYWxsZWRPcGVuVXBsb2FkU3RyZWFtOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgd3JpdGFibGUgc3RyZWFtIChHcmlkRlNCdWNrZXRXcml0ZVN0cmVhbSkgZm9yIHdyaXRpbmdcbiAgICAgKiBidWZmZXJzIHRvIEdyaWRGUy4gVGhlIHN0cmVhbSdzICdpZCcgcHJvcGVydHkgY29udGFpbnMgdGhlIHJlc3VsdGluZ1xuICAgICAqIGZpbGUncyBpZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWxlbmFtZSAtIFRoZSB2YWx1ZSBvZiB0aGUgJ2ZpbGVuYW1lJyBrZXkgaW4gdGhlIGZpbGVzIGRvY1xuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MuXG4gICAgICovXG4gICAgb3BlblVwbG9hZFN0cmVhbShmaWxlbmFtZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IHVwbG9hZF8xLkdyaWRGU0J1Y2tldFdyaXRlU3RyZWFtKHRoaXMsIGZpbGVuYW1lLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHdyaXRhYmxlIHN0cmVhbSAoR3JpZEZTQnVja2V0V3JpdGVTdHJlYW0pIGZvciB3cml0aW5nXG4gICAgICogYnVmZmVycyB0byBHcmlkRlMgZm9yIGEgY3VzdG9tIGZpbGUgaWQuIFRoZSBzdHJlYW0ncyAnaWQnIHByb3BlcnR5IGNvbnRhaW5zIHRoZSByZXN1bHRpbmdcbiAgICAgKiBmaWxlJ3MgaWQuXG4gICAgICovXG4gICAgb3BlblVwbG9hZFN0cmVhbVdpdGhJZChpZCwgZmlsZW5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB1cGxvYWRfMS5HcmlkRlNCdWNrZXRXcml0ZVN0cmVhbSh0aGlzLCBmaWxlbmFtZSwgeyAuLi5vcHRpb25zLCBpZCB9KTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSByZWFkYWJsZSBzdHJlYW0gKEdyaWRGU0J1Y2tldFJlYWRTdHJlYW0pIGZvciBzdHJlYW1pbmcgZmlsZSBkYXRhIGZyb20gR3JpZEZTLiAqL1xuICAgIG9wZW5Eb3dubG9hZFN0cmVhbShpZCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IGRvd25sb2FkXzEuR3JpZEZTQnVja2V0UmVhZFN0cmVhbSh0aGlzLnMuX2NodW5rc0NvbGxlY3Rpb24sIHRoaXMucy5fZmlsZXNDb2xsZWN0aW9uLCB0aGlzLnMub3B0aW9ucy5yZWFkUHJlZmVyZW5jZSwgeyBfaWQ6IGlkIH0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIGEgZmlsZSB3aXRoIHRoZSBnaXZlbiBpZFxuICAgICAqXG4gICAgICogQHBhcmFtIGlkIC0gVGhlIGlkIG9mIHRoZSBmaWxlIGRvY1xuICAgICAqL1xuICAgIGFzeW5jIGRlbGV0ZShpZCkge1xuICAgICAgICBjb25zdCB7IGRlbGV0ZWRDb3VudCB9ID0gYXdhaXQgdGhpcy5zLl9maWxlc0NvbGxlY3Rpb24uZGVsZXRlT25lKHsgX2lkOiBpZCB9KTtcbiAgICAgICAgLy8gRGVsZXRlIG9ycGhhbmVkIGNodW5rcyBiZWZvcmUgcmV0dXJuaW5nIEZpbGVOb3RGb3VuZFxuICAgICAgICBhd2FpdCB0aGlzLnMuX2NodW5rc0NvbGxlY3Rpb24uZGVsZXRlTWFueSh7IGZpbGVzX2lkOiBpZCB9KTtcbiAgICAgICAgaWYgKGRlbGV0ZWRDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODMpOiBSZXBsYWNlIHdpdGggbW9yZSBhcHByb3ByaWF0ZSBlcnJvclxuICAgICAgICAgICAgLy8gQ29uc2lkZXIgY3JlYXRpbmcgbmV3IGVycm9yIE1vbmdvR3JpZEZTRmlsZU5vdEZvdW5kRXJyb3JcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBGaWxlIG5vdCBmb3VuZCBmb3IgaWQgJHtpZH1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQ29udmVuaWVuY2Ugd3JhcHBlciBhcm91bmQgZmluZCBvbiB0aGUgZmlsZXMgY29sbGVjdGlvbiAqL1xuICAgIGZpbmQoZmlsdGVyID0ge30sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLl9maWxlc0NvbGxlY3Rpb24uZmluZChmaWx0ZXIsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcmVhZGFibGUgc3RyZWFtIChHcmlkRlNCdWNrZXRSZWFkU3RyZWFtKSBmb3Igc3RyZWFtaW5nIHRoZVxuICAgICAqIGZpbGUgd2l0aCB0aGUgZ2l2ZW4gbmFtZSBmcm9tIEdyaWRGUy4gSWYgdGhlcmUgYXJlIG11bHRpcGxlIGZpbGVzIHdpdGhcbiAgICAgKiB0aGUgc2FtZSBuYW1lLCB0aGlzIHdpbGwgc3RyZWFtIHRoZSBtb3N0IHJlY2VudCBmaWxlIHdpdGggdGhlIGdpdmVuIG5hbWVcbiAgICAgKiAoYXMgZGV0ZXJtaW5lZCBieSB0aGUgYHVwbG9hZERhdGVgIGZpZWxkKS4gWW91IGNhbiBzZXQgdGhlIGByZXZpc2lvbmBcbiAgICAgKiBvcHRpb24gdG8gY2hhbmdlIHRoaXMgYmVoYXZpb3IuXG4gICAgICovXG4gICAgb3BlbkRvd25sb2FkU3RyZWFtQnlOYW1lKGZpbGVuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBzb3J0ID0geyB1cGxvYWREYXRlOiAtMSB9O1xuICAgICAgICBsZXQgc2tpcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5yZXZpc2lvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yZXZpc2lvbiA+PSAwKSB7XG4gICAgICAgICAgICAgICAgc29ydCA9IHsgdXBsb2FkRGF0ZTogMSB9O1xuICAgICAgICAgICAgICAgIHNraXAgPSBvcHRpb25zLnJldmlzaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2tpcCA9IC1vcHRpb25zLnJldmlzaW9uIC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IGRvd25sb2FkXzEuR3JpZEZTQnVja2V0UmVhZFN0cmVhbSh0aGlzLnMuX2NodW5rc0NvbGxlY3Rpb24sIHRoaXMucy5fZmlsZXNDb2xsZWN0aW9uLCB0aGlzLnMub3B0aW9ucy5yZWFkUHJlZmVyZW5jZSwgeyBmaWxlbmFtZSB9LCB7IC4uLm9wdGlvbnMsIHNvcnQsIHNraXAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbmFtZXMgdGhlIGZpbGUgd2l0aCB0aGUgZ2l2ZW4gX2lkIHRvIHRoZSBnaXZlbiBzdHJpbmdcbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZCAtIHRoZSBpZCBvZiB0aGUgZmlsZSB0byByZW5hbWVcbiAgICAgKiBAcGFyYW0gZmlsZW5hbWUgLSBuZXcgbmFtZSBmb3IgdGhlIGZpbGVcbiAgICAgKi9cbiAgICBhc3luYyByZW5hbWUoaWQsIGZpbGVuYW1lKSB7XG4gICAgICAgIGNvbnN0IGZpbHRlciA9IHsgX2lkOiBpZCB9O1xuICAgICAgICBjb25zdCB1cGRhdGUgPSB7ICRzZXQ6IHsgZmlsZW5hbWUgfSB9O1xuICAgICAgICBjb25zdCB7IG1hdGNoZWRDb3VudCB9ID0gYXdhaXQgdGhpcy5zLl9maWxlc0NvbGxlY3Rpb24udXBkYXRlT25lKGZpbHRlciwgdXBkYXRlKTtcbiAgICAgICAgaWYgKG1hdGNoZWRDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoYEZpbGUgd2l0aCBpZCAke2lkfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogUmVtb3ZlcyB0aGlzIGJ1Y2tldCdzIGZpbGVzIGNvbGxlY3Rpb24sIGZvbGxvd2VkIGJ5IGl0cyBjaHVua3MgY29sbGVjdGlvbi4gKi9cbiAgICBhc3luYyBkcm9wKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnMuX2ZpbGVzQ29sbGVjdGlvbi5kcm9wKCk7XG4gICAgICAgIGF3YWl0IHRoaXMucy5fY2h1bmtzQ29sbGVjdGlvbi5kcm9wKCk7XG4gICAgfVxufVxuLyoqXG4gKiBXaGVuIHRoZSBmaXJzdCBjYWxsIHRvIG9wZW5VcGxvYWRTdHJlYW0gaXMgbWFkZSwgdGhlIHVwbG9hZCBzdHJlYW0gd2lsbFxuICogY2hlY2sgdG8gc2VlIGlmIGl0IG5lZWRzIHRvIGNyZWF0ZSB0aGUgcHJvcGVyIGluZGV4ZXMgb24gdGhlIGNodW5rcyBhbmRcbiAqIGZpbGVzIGNvbGxlY3Rpb25zLiBUaGlzIGV2ZW50IGlzIGZpcmVkIGVpdGhlciB3aGVuIDEpIGl0IGRldGVybWluZXMgdGhhdFxuICogbm8gaW5kZXggY3JlYXRpb24gaXMgbmVjZXNzYXJ5LCAyKSB3aGVuIGl0IHN1Y2Nlc3NmdWxseSBjcmVhdGVzIHRoZVxuICogbmVjZXNzYXJ5IGluZGV4ZXMuXG4gKiBAZXZlbnRcbiAqL1xuR3JpZEZTQnVja2V0LklOREVYID0gJ2luZGV4JztcbmV4cG9ydHMuR3JpZEZTQnVja2V0ID0gR3JpZEZTQnVja2V0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiR3JpZEZTQnVja2V0IiwiZXJyb3JfMSIsInJlcXVpcmUiLCJtb25nb190eXBlc18xIiwid3JpdGVfY29uY2Vybl8xIiwiZG93bmxvYWRfMSIsInVwbG9hZF8xIiwiREVGQVVMVF9HUklERlNfQlVDS0VUX09QVElPTlMiLCJidWNrZXROYW1lIiwiY2h1bmtTaXplQnl0ZXMiLCJUeXBlZEV2ZW50RW1pdHRlciIsImNvbnN0cnVjdG9yIiwiZGIiLCJvcHRpb25zIiwic2V0TWF4TGlzdGVuZXJzIiwicHJpdmF0ZU9wdGlvbnMiLCJ3cml0ZUNvbmNlcm4iLCJXcml0ZUNvbmNlcm4iLCJmcm9tT3B0aW9ucyIsInMiLCJfY2h1bmtzQ29sbGVjdGlvbiIsImNvbGxlY3Rpb24iLCJfZmlsZXNDb2xsZWN0aW9uIiwiY2hlY2tlZEluZGV4ZXMiLCJjYWxsZWRPcGVuVXBsb2FkU3RyZWFtIiwib3BlblVwbG9hZFN0cmVhbSIsImZpbGVuYW1lIiwiR3JpZEZTQnVja2V0V3JpdGVTdHJlYW0iLCJvcGVuVXBsb2FkU3RyZWFtV2l0aElkIiwiaWQiLCJvcGVuRG93bmxvYWRTdHJlYW0iLCJHcmlkRlNCdWNrZXRSZWFkU3RyZWFtIiwicmVhZFByZWZlcmVuY2UiLCJfaWQiLCJkZWxldGUiLCJkZWxldGVkQ291bnQiLCJkZWxldGVPbmUiLCJkZWxldGVNYW55IiwiZmlsZXNfaWQiLCJNb25nb1J1bnRpbWVFcnJvciIsImZpbmQiLCJmaWx0ZXIiLCJvcGVuRG93bmxvYWRTdHJlYW1CeU5hbWUiLCJzb3J0IiwidXBsb2FkRGF0ZSIsInNraXAiLCJ1bmRlZmluZWQiLCJyZXZpc2lvbiIsInJlbmFtZSIsInVwZGF0ZSIsIiRzZXQiLCJtYXRjaGVkQ291bnQiLCJ1cGRhdGVPbmUiLCJkcm9wIiwiSU5ERVgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/gridfs/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/gridfs/upload.js":
/*!***************************************************!*\
  !*** ./node_modules/mongodb/lib/gridfs/upload.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.GridFSBucketWriteStream = void 0;\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst write_concern_1 = __webpack_require__(/*! ./../write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\n/**\n * A writable stream that enables you to write buffers to GridFS.\n *\n * Do not instantiate this class directly. Use `openUploadStream()` instead.\n * @public\n */ class GridFSBucketWriteStream extends stream_1.Writable {\n    /**\n     * @param bucket - Handle for this stream's corresponding bucket\n     * @param filename - The value of the 'filename' key in the files doc\n     * @param options - Optional settings.\n     * @internal\n     */ constructor(bucket, filename, options){\n        super();\n        options = options ?? {};\n        this.bucket = bucket;\n        this.chunks = bucket.s._chunksCollection;\n        this.filename = filename;\n        this.files = bucket.s._filesCollection;\n        this.options = options;\n        this.writeConcern = write_concern_1.WriteConcern.fromOptions(options) || bucket.s.options.writeConcern;\n        // Signals the write is all done\n        this.done = false;\n        this.id = options.id ? options.id : new bson_1.ObjectId();\n        // properly inherit the default chunksize from parent\n        this.chunkSizeBytes = options.chunkSizeBytes || this.bucket.s.options.chunkSizeBytes;\n        this.bufToStore = Buffer.alloc(this.chunkSizeBytes);\n        this.length = 0;\n        this.n = 0;\n        this.pos = 0;\n        this.state = {\n            streamEnd: false,\n            outstandingRequests: 0,\n            errored: false,\n            aborted: false\n        };\n        if (!this.bucket.s.calledOpenUploadStream) {\n            this.bucket.s.calledOpenUploadStream = true;\n            checkIndexes(this).then(()=>{\n                this.bucket.s.checkedIndexes = true;\n                this.bucket.emit(\"index\");\n            }, ()=>null);\n        }\n    }\n    write(chunk, encodingOrCallback, callback) {\n        const encoding = typeof encodingOrCallback === \"function\" ? undefined : encodingOrCallback;\n        callback = typeof encodingOrCallback === \"function\" ? encodingOrCallback : callback;\n        return waitForIndexes(this, ()=>doWrite(this, chunk, encoding, callback));\n    }\n    /**\n     * Places this write stream into an aborted state (all future writes fail)\n     * and deletes all chunks that have already been written.\n     */ async abort() {\n        if (this.state.streamEnd) {\n            // TODO(NODE-3485): Replace with MongoGridFSStreamClosed\n            throw new error_1.MongoAPIError(\"Cannot abort a stream that has already completed\");\n        }\n        if (this.state.aborted) {\n            // TODO(NODE-3485): Replace with MongoGridFSStreamClosed\n            throw new error_1.MongoAPIError(\"Cannot call abort() on a stream twice\");\n        }\n        this.state.aborted = true;\n        await this.chunks.deleteMany({\n            files_id: this.id\n        });\n    }\n    end(chunkOrCallback, encodingOrCallback, callback) {\n        const chunk = typeof chunkOrCallback === \"function\" ? undefined : chunkOrCallback;\n        const encoding = typeof encodingOrCallback === \"function\" ? undefined : encodingOrCallback;\n        callback = typeof chunkOrCallback === \"function\" ? chunkOrCallback : typeof encodingOrCallback === \"function\" ? encodingOrCallback : callback;\n        if (this.state.streamEnd || checkAborted(this, callback)) return this;\n        this.state.streamEnd = true;\n        if (callback) {\n            this.once(GridFSBucketWriteStream.FINISH, (result)=>{\n                if (callback) callback(undefined, result);\n            });\n        }\n        if (!chunk) {\n            waitForIndexes(this, ()=>!!writeRemnant(this));\n            return this;\n        }\n        this.write(chunk, encoding, ()=>{\n            writeRemnant(this);\n        });\n        return this;\n    }\n}\n/** @event */ GridFSBucketWriteStream.CLOSE = \"close\";\n/** @event */ GridFSBucketWriteStream.ERROR = \"error\";\n/**\n * `end()` was called and the write stream successfully wrote the file metadata and all the chunks to MongoDB.\n * @event\n */ GridFSBucketWriteStream.FINISH = \"finish\";\nexports.GridFSBucketWriteStream = GridFSBucketWriteStream;\nfunction __handleError(stream, error, callback) {\n    if (stream.state.errored) {\n        return;\n    }\n    stream.state.errored = true;\n    if (callback) {\n        return callback(error);\n    }\n    stream.emit(GridFSBucketWriteStream.ERROR, error);\n}\nfunction createChunkDoc(filesId, n, data) {\n    return {\n        _id: new bson_1.ObjectId(),\n        files_id: filesId,\n        n,\n        data\n    };\n}\nasync function checkChunksIndex(stream) {\n    const index = {\n        files_id: 1,\n        n: 1\n    };\n    let indexes;\n    try {\n        indexes = await stream.chunks.listIndexes().toArray();\n    } catch (error) {\n        if (error instanceof error_1.MongoError && error.code === error_1.MONGODB_ERROR_CODES.NamespaceNotFound) {\n            indexes = [];\n        } else {\n            throw error;\n        }\n    }\n    const hasChunksIndex = !!indexes.find((index)=>{\n        const keys = Object.keys(index.key);\n        if (keys.length === 2 && index.key.files_id === 1 && index.key.n === 1) {\n            return true;\n        }\n        return false;\n    });\n    if (!hasChunksIndex) {\n        await stream.chunks.createIndex(index, {\n            ...stream.writeConcern,\n            background: true,\n            unique: true\n        });\n    }\n}\nfunction checkDone(stream, callback) {\n    if (stream.done) return true;\n    if (stream.state.streamEnd && stream.state.outstandingRequests === 0 && !stream.state.errored) {\n        // Set done so we do not trigger duplicate createFilesDoc\n        stream.done = true;\n        // Create a new files doc\n        const filesDoc = createFilesDoc(stream.id, stream.length, stream.chunkSizeBytes, stream.filename, stream.options.contentType, stream.options.aliases, stream.options.metadata);\n        if (checkAborted(stream, callback)) {\n            return false;\n        }\n        stream.files.insertOne(filesDoc, {\n            writeConcern: stream.writeConcern\n        }).then(()=>{\n            stream.emit(GridFSBucketWriteStream.FINISH, filesDoc);\n            stream.emit(GridFSBucketWriteStream.CLOSE);\n        }, (error)=>{\n            return __handleError(stream, error, callback);\n        });\n        return true;\n    }\n    return false;\n}\nasync function checkIndexes(stream) {\n    const doc = await stream.files.findOne({}, {\n        projection: {\n            _id: 1\n        }\n    });\n    if (doc != null) {\n        // If at least one document exists assume the collection has the required index\n        return;\n    }\n    const index = {\n        filename: 1,\n        uploadDate: 1\n    };\n    let indexes;\n    try {\n        indexes = await stream.files.listIndexes().toArray();\n    } catch (error) {\n        if (error instanceof error_1.MongoError && error.code === error_1.MONGODB_ERROR_CODES.NamespaceNotFound) {\n            indexes = [];\n        } else {\n            throw error;\n        }\n    }\n    const hasFileIndex = !!indexes.find((index)=>{\n        const keys = Object.keys(index.key);\n        if (keys.length === 2 && index.key.filename === 1 && index.key.uploadDate === 1) {\n            return true;\n        }\n        return false;\n    });\n    if (!hasFileIndex) {\n        await stream.files.createIndex(index, {\n            background: false\n        });\n    }\n    await checkChunksIndex(stream);\n}\nfunction createFilesDoc(_id, length, chunkSize, filename, contentType, aliases, metadata) {\n    const ret = {\n        _id,\n        length,\n        chunkSize,\n        uploadDate: new Date(),\n        filename\n    };\n    if (contentType) {\n        ret.contentType = contentType;\n    }\n    if (aliases) {\n        ret.aliases = aliases;\n    }\n    if (metadata) {\n        ret.metadata = metadata;\n    }\n    return ret;\n}\nfunction doWrite(stream, chunk, encoding, callback) {\n    if (checkAborted(stream, callback)) {\n        return false;\n    }\n    const inputBuf = Buffer.isBuffer(chunk) ? chunk : Buffer.from(chunk, encoding);\n    stream.length += inputBuf.length;\n    // Input is small enough to fit in our buffer\n    if (stream.pos + inputBuf.length < stream.chunkSizeBytes) {\n        inputBuf.copy(stream.bufToStore, stream.pos);\n        stream.pos += inputBuf.length;\n        callback && callback();\n        // Note that we reverse the typical semantics of write's return value\n        // to be compatible with node's `.pipe()` function.\n        // True means client can keep writing.\n        return true;\n    }\n    // Otherwise, buffer is too big for current chunk, so we need to flush\n    // to MongoDB.\n    let inputBufRemaining = inputBuf.length;\n    let spaceRemaining = stream.chunkSizeBytes - stream.pos;\n    let numToCopy = Math.min(spaceRemaining, inputBuf.length);\n    let outstandingRequests = 0;\n    while(inputBufRemaining > 0){\n        const inputBufPos = inputBuf.length - inputBufRemaining;\n        inputBuf.copy(stream.bufToStore, stream.pos, inputBufPos, inputBufPos + numToCopy);\n        stream.pos += numToCopy;\n        spaceRemaining -= numToCopy;\n        let doc;\n        if (spaceRemaining === 0) {\n            doc = createChunkDoc(stream.id, stream.n, Buffer.from(stream.bufToStore));\n            ++stream.state.outstandingRequests;\n            ++outstandingRequests;\n            if (checkAborted(stream, callback)) {\n                return false;\n            }\n            stream.chunks.insertOne(doc, {\n                writeConcern: stream.writeConcern\n            }).then(()=>{\n                --stream.state.outstandingRequests;\n                --outstandingRequests;\n                if (!outstandingRequests) {\n                    stream.emit(\"drain\", doc);\n                    callback && callback();\n                    checkDone(stream);\n                }\n            }, (error)=>{\n                return __handleError(stream, error);\n            });\n            spaceRemaining = stream.chunkSizeBytes;\n            stream.pos = 0;\n            ++stream.n;\n        }\n        inputBufRemaining -= numToCopy;\n        numToCopy = Math.min(spaceRemaining, inputBufRemaining);\n    }\n    // Note that we reverse the typical semantics of write's return value\n    // to be compatible with node's `.pipe()` function.\n    // False means the client should wait for the 'drain' event.\n    return false;\n}\nfunction waitForIndexes(stream, callback) {\n    if (stream.bucket.s.checkedIndexes) {\n        return callback(false);\n    }\n    stream.bucket.once(\"index\", ()=>{\n        callback(true);\n    });\n    return true;\n}\nfunction writeRemnant(stream, callback) {\n    // Buffer is empty, so don't bother to insert\n    if (stream.pos === 0) {\n        return checkDone(stream, callback);\n    }\n    ++stream.state.outstandingRequests;\n    // Create a new buffer to make sure the buffer isn't bigger than it needs\n    // to be.\n    const remnant = Buffer.alloc(stream.pos);\n    stream.bufToStore.copy(remnant, 0, 0, stream.pos);\n    const doc = createChunkDoc(stream.id, stream.n, remnant);\n    // If the stream was aborted, do not write remnant\n    if (checkAborted(stream, callback)) {\n        return false;\n    }\n    stream.chunks.insertOne(doc, {\n        writeConcern: stream.writeConcern\n    }).then(()=>{\n        --stream.state.outstandingRequests;\n        checkDone(stream);\n    }, (error)=>{\n        return __handleError(stream, error);\n    });\n    return true;\n}\nfunction checkAborted(stream, callback) {\n    if (stream.state.aborted) {\n        if (typeof callback === \"function\") {\n            // TODO(NODE-3485): Replace with MongoGridFSStreamClosedError\n            callback(new error_1.MongoAPIError(\"Stream has been aborted\"));\n        }\n        return true;\n    }\n    return false;\n} //# sourceMappingURL=upload.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZ3JpZGZzL3VwbG9hZC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsK0JBQStCLEdBQUcsS0FBSztBQUN2QyxNQUFNRyxXQUFXQyxtQkFBT0EsQ0FBQyxzQkFBUTtBQUNqQyxNQUFNQyxTQUFTRCxtQkFBT0EsQ0FBQyx5REFBUztBQUNoQyxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRyxrQkFBa0JILG1CQUFPQSxDQUFDLDZFQUFvQjtBQUNwRDs7Ozs7Q0FLQyxHQUNELE1BQU1GLGdDQUFnQ0MsU0FBU0ssUUFBUTtJQUNuRDs7Ozs7S0FLQyxHQUNEQyxZQUFZQyxNQUFNLEVBQUVDLFFBQVEsRUFBRUMsT0FBTyxDQUFFO1FBQ25DLEtBQUs7UUFDTEEsVUFBVUEsV0FBVyxDQUFDO1FBQ3RCLElBQUksQ0FBQ0YsTUFBTSxHQUFHQTtRQUNkLElBQUksQ0FBQ0csTUFBTSxHQUFHSCxPQUFPSSxDQUFDLENBQUNDLGlCQUFpQjtRQUN4QyxJQUFJLENBQUNKLFFBQVEsR0FBR0E7UUFDaEIsSUFBSSxDQUFDSyxLQUFLLEdBQUdOLE9BQU9JLENBQUMsQ0FBQ0csZ0JBQWdCO1FBQ3RDLElBQUksQ0FBQ0wsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ00sWUFBWSxHQUFHWCxnQkFBZ0JZLFlBQVksQ0FBQ0MsV0FBVyxDQUFDUixZQUFZRixPQUFPSSxDQUFDLENBQUNGLE9BQU8sQ0FBQ00sWUFBWTtRQUN0RyxnQ0FBZ0M7UUFDaEMsSUFBSSxDQUFDRyxJQUFJLEdBQUc7UUFDWixJQUFJLENBQUNDLEVBQUUsR0FBR1YsUUFBUVUsRUFBRSxHQUFHVixRQUFRVSxFQUFFLEdBQUcsSUFBSWpCLE9BQU9rQixRQUFRO1FBQ3ZELHFEQUFxRDtRQUNyRCxJQUFJLENBQUNDLGNBQWMsR0FBR1osUUFBUVksY0FBYyxJQUFJLElBQUks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ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2dyaWRmcy91cGxvYWQuanM/YmYzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuR3JpZEZTQnVja2V0V3JpdGVTdHJlYW0gPSB2b2lkIDA7XG5jb25zdCBzdHJlYW1fMSA9IHJlcXVpcmUoXCJzdHJlYW1cIik7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi4vYnNvblwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCB3cml0ZV9jb25jZXJuXzEgPSByZXF1aXJlKFwiLi8uLi93cml0ZV9jb25jZXJuXCIpO1xuLyoqXG4gKiBBIHdyaXRhYmxlIHN0cmVhbSB0aGF0IGVuYWJsZXMgeW91IHRvIHdyaXRlIGJ1ZmZlcnMgdG8gR3JpZEZTLlxuICpcbiAqIERvIG5vdCBpbnN0YW50aWF0ZSB0aGlzIGNsYXNzIGRpcmVjdGx5LiBVc2UgYG9wZW5VcGxvYWRTdHJlYW0oKWAgaW5zdGVhZC5cbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgR3JpZEZTQnVja2V0V3JpdGVTdHJlYW0gZXh0ZW5kcyBzdHJlYW1fMS5Xcml0YWJsZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGJ1Y2tldCAtIEhhbmRsZSBmb3IgdGhpcyBzdHJlYW0ncyBjb3JyZXNwb25kaW5nIGJ1Y2tldFxuICAgICAqIEBwYXJhbSBmaWxlbmFtZSAtIFRoZSB2YWx1ZSBvZiB0aGUgJ2ZpbGVuYW1lJyBrZXkgaW4gdGhlIGZpbGVzIGRvY1xuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYnVja2V0LCBmaWxlbmFtZSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgdGhpcy5idWNrZXQgPSBidWNrZXQ7XG4gICAgICAgIHRoaXMuY2h1bmtzID0gYnVja2V0LnMuX2NodW5rc0NvbGxlY3Rpb247XG4gICAgICAgIHRoaXMuZmlsZW5hbWUgPSBmaWxlbmFtZTtcbiAgICAgICAgdGhpcy5maWxlcyA9IGJ1Y2tldC5zLl9maWxlc0NvbGxlY3Rpb247XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMud3JpdGVDb25jZXJuID0gd3JpdGVfY29uY2Vybl8xLldyaXRlQ29uY2Vybi5mcm9tT3B0aW9ucyhvcHRpb25zKSB8fCBidWNrZXQucy5vcHRpb25zLndyaXRlQ29uY2VybjtcbiAgICAgICAgLy8gU2lnbmFscyB0aGUgd3JpdGUgaXMgYWxsIGRvbmVcbiAgICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaWQgPSBvcHRpb25zLmlkID8gb3B0aW9ucy5pZCA6IG5ldyBic29uXzEuT2JqZWN0SWQoKTtcbiAgICAgICAgLy8gcHJvcGVybHkgaW5oZXJpdCB0aGUgZGVmYXVsdCBjaHVua3NpemUgZnJvbSBwYXJlbnRcbiAgICAgICAgdGhpcy5jaHVua1NpemVCeXRlcyA9IG9wdGlvbnMuY2h1bmtTaXplQnl0ZXMgfHwgdGhpcy5idWNrZXQucy5vcHRpb25zLmNodW5rU2l6ZUJ5dGVzO1xuICAgICAgICB0aGlzLmJ1ZlRvU3RvcmUgPSBCdWZmZXIuYWxsb2ModGhpcy5jaHVua1NpemVCeXRlcyk7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5uID0gMDtcbiAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc3RyZWFtRW5kOiBmYWxzZSxcbiAgICAgICAgICAgIG91dHN0YW5kaW5nUmVxdWVzdHM6IDAsXG4gICAgICAgICAgICBlcnJvcmVkOiBmYWxzZSxcbiAgICAgICAgICAgIGFib3J0ZWQ6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpcy5idWNrZXQucy5jYWxsZWRPcGVuVXBsb2FkU3RyZWFtKSB7XG4gICAgICAgICAgICB0aGlzLmJ1Y2tldC5zLmNhbGxlZE9wZW5VcGxvYWRTdHJlYW0gPSB0cnVlO1xuICAgICAgICAgICAgY2hlY2tJbmRleGVzKHRoaXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYnVja2V0LnMuY2hlY2tlZEluZGV4ZXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuYnVja2V0LmVtaXQoJ2luZGV4Jyk7XG4gICAgICAgICAgICB9LCAoKSA9PiBudWxsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cml0ZShjaHVuaywgZW5jb2RpbmdPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBlbmNvZGluZyA9IHR5cGVvZiBlbmNvZGluZ09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgPyB1bmRlZmluZWQgOiBlbmNvZGluZ09yQ2FsbGJhY2s7XG4gICAgICAgIGNhbGxiYWNrID0gdHlwZW9mIGVuY29kaW5nT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyA/IGVuY29kaW5nT3JDYWxsYmFjayA6IGNhbGxiYWNrO1xuICAgICAgICByZXR1cm4gd2FpdEZvckluZGV4ZXModGhpcywgKCkgPT4gZG9Xcml0ZSh0aGlzLCBjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBsYWNlcyB0aGlzIHdyaXRlIHN0cmVhbSBpbnRvIGFuIGFib3J0ZWQgc3RhdGUgKGFsbCBmdXR1cmUgd3JpdGVzIGZhaWwpXG4gICAgICogYW5kIGRlbGV0ZXMgYWxsIGNodW5rcyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHdyaXR0ZW4uXG4gICAgICovXG4gICAgYXN5bmMgYWJvcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnN0cmVhbUVuZCkge1xuICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODUpOiBSZXBsYWNlIHdpdGggTW9uZ29HcmlkRlNTdHJlYW1DbG9zZWRcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoJ0Nhbm5vdCBhYm9ydCBhIHN0cmVhbSB0aGF0IGhhcyBhbHJlYWR5IGNvbXBsZXRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmFib3J0ZWQpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDg1KTogUmVwbGFjZSB3aXRoIE1vbmdvR3JpZEZTU3RyZWFtQ2xvc2VkXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKCdDYW5ub3QgY2FsbCBhYm9ydCgpIG9uIGEgc3RyZWFtIHR3aWNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZS5hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgYXdhaXQgdGhpcy5jaHVua3MuZGVsZXRlTWFueSh7IGZpbGVzX2lkOiB0aGlzLmlkIH0pO1xuICAgIH1cbiAgICBlbmQoY2h1bmtPckNhbGxiYWNrLCBlbmNvZGluZ09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGNodW5rID0gdHlwZW9mIGNodW5rT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyA/IHVuZGVmaW5lZCA6IGNodW5rT3JDYWxsYmFjaztcbiAgICAgICAgY29uc3QgZW5jb2RpbmcgPSB0eXBlb2YgZW5jb2RpbmdPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nID8gdW5kZWZpbmVkIDogZW5jb2RpbmdPckNhbGxiYWNrO1xuICAgICAgICBjYWxsYmFjayA9XG4gICAgICAgICAgICB0eXBlb2YgY2h1bmtPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgPyBjaHVua09yQ2FsbGJhY2tcbiAgICAgICAgICAgICAgICA6IHR5cGVvZiBlbmNvZGluZ09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICAgICAgPyBlbmNvZGluZ09yQ2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgOiBjYWxsYmFjaztcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc3RyZWFtRW5kIHx8IGNoZWNrQWJvcnRlZCh0aGlzLCBjYWxsYmFjaykpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgdGhpcy5zdGF0ZS5zdHJlYW1FbmQgPSB0cnVlO1xuICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRoaXMub25jZShHcmlkRlNCdWNrZXRXcml0ZVN0cmVhbS5GSU5JU0gsIChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwgcmVzdWx0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY2h1bmspIHtcbiAgICAgICAgICAgIHdhaXRGb3JJbmRleGVzKHRoaXMsICgpID0+ICEhd3JpdGVSZW1uYW50KHRoaXMpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud3JpdGUoY2h1bmssIGVuY29kaW5nLCAoKSA9PiB7XG4gICAgICAgICAgICB3cml0ZVJlbW5hbnQodGhpcyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG4vKiogQGV2ZW50ICovXG5HcmlkRlNCdWNrZXRXcml0ZVN0cmVhbS5DTE9TRSA9ICdjbG9zZSc7XG4vKiogQGV2ZW50ICovXG5HcmlkRlNCdWNrZXRXcml0ZVN0cmVhbS5FUlJPUiA9ICdlcnJvcic7XG4vKipcbiAqIGBlbmQoKWAgd2FzIGNhbGxlZCBhbmQgdGhlIHdyaXRlIHN0cmVhbSBzdWNjZXNzZnVsbHkgd3JvdGUgdGhlIGZpbGUgbWV0YWRhdGEgYW5kIGFsbCB0aGUgY2h1bmtzIHRvIE1vbmdvREIuXG4gKiBAZXZlbnRcbiAqL1xuR3JpZEZTQnVja2V0V3JpdGVTdHJlYW0uRklOSVNIID0gJ2ZpbmlzaCc7XG5leHBvcnRzLkdyaWRGU0J1Y2tldFdyaXRlU3RyZWFtID0gR3JpZEZTQnVja2V0V3JpdGVTdHJlYW07XG5mdW5jdGlvbiBfX2hhbmRsZUVycm9yKHN0cmVhbSwgZXJyb3IsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHN0cmVhbS5zdGF0ZS5lcnJvcmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3RyZWFtLnN0YXRlLmVycm9yZWQgPSB0cnVlO1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuICAgIH1cbiAgICBzdHJlYW0uZW1pdChHcmlkRlNCdWNrZXRXcml0ZVN0cmVhbS5FUlJPUiwgZXJyb3IpO1xufVxuZnVuY3Rpb24gY3JlYXRlQ2h1bmtEb2MoZmlsZXNJZCwgbiwgZGF0YSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIF9pZDogbmV3IGJzb25fMS5PYmplY3RJZCgpLFxuICAgICAgICBmaWxlc19pZDogZmlsZXNJZCxcbiAgICAgICAgbixcbiAgICAgICAgZGF0YVxuICAgIH07XG59XG5hc3luYyBmdW5jdGlvbiBjaGVja0NodW5rc0luZGV4KHN0cmVhbSkge1xuICAgIGNvbnN0IGluZGV4ID0geyBmaWxlc19pZDogMSwgbjogMSB9O1xuICAgIGxldCBpbmRleGVzO1xuICAgIHRyeSB7XG4gICAgICAgIGluZGV4ZXMgPSBhd2FpdCBzdHJlYW0uY2h1bmtzLmxpc3RJbmRleGVzKCkudG9BcnJheSgpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb0Vycm9yICYmIGVycm9yLmNvZGUgPT09IGVycm9yXzEuTU9OR09EQl9FUlJPUl9DT0RFUy5OYW1lc3BhY2VOb3RGb3VuZCkge1xuICAgICAgICAgICAgaW5kZXhlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaGFzQ2h1bmtzSW5kZXggPSAhIWluZGV4ZXMuZmluZChpbmRleCA9PiB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhpbmRleC5rZXkpO1xuICAgICAgICBpZiAoa2V5cy5sZW5ndGggPT09IDIgJiYgaW5kZXgua2V5LmZpbGVzX2lkID09PSAxICYmIGluZGV4LmtleS5uID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgaWYgKCFoYXNDaHVua3NJbmRleCkge1xuICAgICAgICBhd2FpdCBzdHJlYW0uY2h1bmtzLmNyZWF0ZUluZGV4KGluZGV4LCB7XG4gICAgICAgICAgICAuLi5zdHJlYW0ud3JpdGVDb25jZXJuLFxuICAgICAgICAgICAgYmFja2dyb3VuZDogdHJ1ZSxcbiAgICAgICAgICAgIHVuaXF1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBjaGVja0RvbmUoc3RyZWFtLCBjYWxsYmFjaykge1xuICAgIGlmIChzdHJlYW0uZG9uZSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKHN0cmVhbS5zdGF0ZS5zdHJlYW1FbmQgJiYgc3RyZWFtLnN0YXRlLm91dHN0YW5kaW5nUmVxdWVzdHMgPT09IDAgJiYgIXN0cmVhbS5zdGF0ZS5lcnJvcmVkKSB7XG4gICAgICAgIC8vIFNldCBkb25lIHNvIHdlIGRvIG5vdCB0cmlnZ2VyIGR1cGxpY2F0ZSBjcmVhdGVGaWxlc0RvY1xuICAgICAgICBzdHJlYW0uZG9uZSA9IHRydWU7XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBmaWxlcyBkb2NcbiAgICAgICAgY29uc3QgZmlsZXNEb2MgPSBjcmVhdGVGaWxlc0RvYyhzdHJlYW0uaWQsIHN0cmVhbS5sZW5ndGgsIHN0cmVhbS5jaHVua1NpemVCeXRlcywgc3RyZWFtLmZpbGVuYW1lLCBzdHJlYW0ub3B0aW9ucy5jb250ZW50VHlwZSwgc3RyZWFtLm9wdGlvbnMuYWxpYXNlcywgc3RyZWFtLm9wdGlvbnMubWV0YWRhdGEpO1xuICAgICAgICBpZiAoY2hlY2tBYm9ydGVkKHN0cmVhbSwgY2FsbGJhY2spKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgc3RyZWFtLmZpbGVzLmluc2VydE9uZShmaWxlc0RvYywgeyB3cml0ZUNvbmNlcm46IHN0cmVhbS53cml0ZUNvbmNlcm4gfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBzdHJlYW0uZW1pdChHcmlkRlNCdWNrZXRXcml0ZVN0cmVhbS5GSU5JU0gsIGZpbGVzRG9jKTtcbiAgICAgICAgICAgIHN0cmVhbS5lbWl0KEdyaWRGU0J1Y2tldFdyaXRlU3RyZWFtLkNMT1NFKTtcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIF9faGFuZGxlRXJyb3Ioc3RyZWFtLCBlcnJvciwgY2FsbGJhY2spO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNoZWNrSW5kZXhlcyhzdHJlYW0pIHtcbiAgICBjb25zdCBkb2MgPSBhd2FpdCBzdHJlYW0uZmlsZXMuZmluZE9uZSh7fSwgeyBwcm9qZWN0aW9uOiB7IF9pZDogMSB9IH0pO1xuICAgIGlmIChkb2MgIT0gbnVsbCkge1xuICAgICAgICAvLyBJZiBhdCBsZWFzdCBvbmUgZG9jdW1lbnQgZXhpc3RzIGFzc3VtZSB0aGUgY29sbGVjdGlvbiBoYXMgdGhlIHJlcXVpcmVkIGluZGV4XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaW5kZXggPSB7IGZpbGVuYW1lOiAxLCB1cGxvYWREYXRlOiAxIH07XG4gICAgbGV0IGluZGV4ZXM7XG4gICAgdHJ5IHtcbiAgICAgICAgaW5kZXhlcyA9IGF3YWl0IHN0cmVhbS5maWxlcy5saXN0SW5kZXhlcygpLnRvQXJyYXkoKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29FcnJvciAmJiBlcnJvci5jb2RlID09PSBlcnJvcl8xLk1PTkdPREJfRVJST1JfQ09ERVMuTmFtZXNwYWNlTm90Rm91bmQpIHtcbiAgICAgICAgICAgIGluZGV4ZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGhhc0ZpbGVJbmRleCA9ICEhaW5kZXhlcy5maW5kKGluZGV4ID0+IHtcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGluZGV4LmtleSk7XG4gICAgICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMiAmJiBpbmRleC5rZXkuZmlsZW5hbWUgPT09IDEgJiYgaW5kZXgua2V5LnVwbG9hZERhdGUgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICBpZiAoIWhhc0ZpbGVJbmRleCkge1xuICAgICAgICBhd2FpdCBzdHJlYW0uZmlsZXMuY3JlYXRlSW5kZXgoaW5kZXgsIHsgYmFja2dyb3VuZDogZmFsc2UgfSk7XG4gICAgfVxuICAgIGF3YWl0IGNoZWNrQ2h1bmtzSW5kZXgoc3RyZWFtKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUZpbGVzRG9jKF9pZCwgbGVuZ3RoLCBjaHVua1NpemUsIGZpbGVuYW1lLCBjb250ZW50VHlwZSwgYWxpYXNlcywgbWV0YWRhdGEpIHtcbiAgICBjb25zdCByZXQgPSB7XG4gICAgICAgIF9pZCxcbiAgICAgICAgbGVuZ3RoLFxuICAgICAgICBjaHVua1NpemUsXG4gICAgICAgIHVwbG9hZERhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgIGZpbGVuYW1lXG4gICAgfTtcbiAgICBpZiAoY29udGVudFR5cGUpIHtcbiAgICAgICAgcmV0LmNvbnRlbnRUeXBlID0gY29udGVudFR5cGU7XG4gICAgfVxuICAgIGlmIChhbGlhc2VzKSB7XG4gICAgICAgIHJldC5hbGlhc2VzID0gYWxpYXNlcztcbiAgICB9XG4gICAgaWYgKG1ldGFkYXRhKSB7XG4gICAgICAgIHJldC5tZXRhZGF0YSA9IG1ldGFkYXRhO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gZG9Xcml0ZShzdHJlYW0sIGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spIHtcbiAgICBpZiAoY2hlY2tBYm9ydGVkKHN0cmVhbSwgY2FsbGJhY2spKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRCdWYgPSBCdWZmZXIuaXNCdWZmZXIoY2h1bmspID8gY2h1bmsgOiBCdWZmZXIuZnJvbShjaHVuaywgZW5jb2RpbmcpO1xuICAgIHN0cmVhbS5sZW5ndGggKz0gaW5wdXRCdWYubGVuZ3RoO1xuICAgIC8vIElucHV0IGlzIHNtYWxsIGVub3VnaCB0byBmaXQgaW4gb3VyIGJ1ZmZlclxuICAgIGlmIChzdHJlYW0ucG9zICsgaW5wdXRCdWYubGVuZ3RoIDwgc3RyZWFtLmNodW5rU2l6ZUJ5dGVzKSB7XG4gICAgICAgIGlucHV0QnVmLmNvcHkoc3RyZWFtLmJ1ZlRvU3RvcmUsIHN0cmVhbS5wb3MpO1xuICAgICAgICBzdHJlYW0ucG9zICs9IGlucHV0QnVmLmxlbmd0aDtcbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICAgICAgLy8gTm90ZSB0aGF0IHdlIHJldmVyc2UgdGhlIHR5cGljYWwgc2VtYW50aWNzIG9mIHdyaXRlJ3MgcmV0dXJuIHZhbHVlXG4gICAgICAgIC8vIHRvIGJlIGNvbXBhdGlibGUgd2l0aCBub2RlJ3MgYC5waXBlKClgIGZ1bmN0aW9uLlxuICAgICAgICAvLyBUcnVlIG1lYW5zIGNsaWVudCBjYW4ga2VlcCB3cml0aW5nLlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gT3RoZXJ3aXNlLCBidWZmZXIgaXMgdG9vIGJpZyBmb3IgY3VycmVudCBjaHVuaywgc28gd2UgbmVlZCB0byBmbHVzaFxuICAgIC8vIHRvIE1vbmdvREIuXG4gICAgbGV0IGlucHV0QnVmUmVtYWluaW5nID0gaW5wdXRCdWYubGVuZ3RoO1xuICAgIGxldCBzcGFjZVJlbWFpbmluZyA9IHN0cmVhbS5jaHVua1NpemVCeXRlcyAtIHN0cmVhbS5wb3M7XG4gICAgbGV0IG51bVRvQ29weSA9IE1hdGgubWluKHNwYWNlUmVtYWluaW5nLCBpbnB1dEJ1Zi5sZW5ndGgpO1xuICAgIGxldCBvdXRzdGFuZGluZ1JlcXVlc3RzID0gMDtcbiAgICB3aGlsZSAoaW5wdXRCdWZSZW1haW5pbmcgPiAwKSB7XG4gICAgICAgIGNvbnN0IGlucHV0QnVmUG9zID0gaW5wdXRCdWYubGVuZ3RoIC0gaW5wdXRCdWZSZW1haW5pbmc7XG4gICAgICAgIGlucHV0QnVmLmNvcHkoc3RyZWFtLmJ1ZlRvU3RvcmUsIHN0cmVhbS5wb3MsIGlucHV0QnVmUG9zLCBpbnB1dEJ1ZlBvcyArIG51bVRvQ29weSk7XG4gICAgICAgIHN0cmVhbS5wb3MgKz0gbnVtVG9Db3B5O1xuICAgICAgICBzcGFjZVJlbWFpbmluZyAtPSBudW1Ub0NvcHk7XG4gICAgICAgIGxldCBkb2M7XG4gICAgICAgIGlmIChzcGFjZVJlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICAgICAgZG9jID0gY3JlYXRlQ2h1bmtEb2Moc3RyZWFtLmlkLCBzdHJlYW0ubiwgQnVmZmVyLmZyb20oc3RyZWFtLmJ1ZlRvU3RvcmUpKTtcbiAgICAgICAgICAgICsrc3RyZWFtLnN0YXRlLm91dHN0YW5kaW5nUmVxdWVzdHM7XG4gICAgICAgICAgICArK291dHN0YW5kaW5nUmVxdWVzdHM7XG4gICAgICAgICAgICBpZiAoY2hlY2tBYm9ydGVkKHN0cmVhbSwgY2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RyZWFtLmNodW5rcy5pbnNlcnRPbmUoZG9jLCB7IHdyaXRlQ29uY2Vybjogc3RyZWFtLndyaXRlQ29uY2VybiB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAtLXN0cmVhbS5zdGF0ZS5vdXRzdGFuZGluZ1JlcXVlc3RzO1xuICAgICAgICAgICAgICAgIC0tb3V0c3RhbmRpbmdSZXF1ZXN0cztcbiAgICAgICAgICAgICAgICBpZiAoIW91dHN0YW5kaW5nUmVxdWVzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmVtaXQoJ2RyYWluJywgZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tEb25lKHN0cmVhbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBfX2hhbmRsZUVycm9yKHN0cmVhbSwgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzcGFjZVJlbWFpbmluZyA9IHN0cmVhbS5jaHVua1NpemVCeXRlcztcbiAgICAgICAgICAgIHN0cmVhbS5wb3MgPSAwO1xuICAgICAgICAgICAgKytzdHJlYW0ubjtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dEJ1ZlJlbWFpbmluZyAtPSBudW1Ub0NvcHk7XG4gICAgICAgIG51bVRvQ29weSA9IE1hdGgubWluKHNwYWNlUmVtYWluaW5nLCBpbnB1dEJ1ZlJlbWFpbmluZyk7XG4gICAgfVxuICAgIC8vIE5vdGUgdGhhdCB3ZSByZXZlcnNlIHRoZSB0eXBpY2FsIHNlbWFudGljcyBvZiB3cml0ZSdzIHJldHVybiB2YWx1ZVxuICAgIC8vIHRvIGJlIGNvbXBhdGlibGUgd2l0aCBub2RlJ3MgYC5waXBlKClgIGZ1bmN0aW9uLlxuICAgIC8vIEZhbHNlIG1lYW5zIHRoZSBjbGllbnQgc2hvdWxkIHdhaXQgZm9yIHRoZSAnZHJhaW4nIGV2ZW50LlxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHdhaXRGb3JJbmRleGVzKHN0cmVhbSwgY2FsbGJhY2spIHtcbiAgICBpZiAoc3RyZWFtLmJ1Y2tldC5zLmNoZWNrZWRJbmRleGVzKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhmYWxzZSk7XG4gICAgfVxuICAgIHN0cmVhbS5idWNrZXQub25jZSgnaW5kZXgnLCAoKSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKHRydWUpO1xuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gd3JpdGVSZW1uYW50KHN0cmVhbSwgY2FsbGJhY2spIHtcbiAgICAvLyBCdWZmZXIgaXMgZW1wdHksIHNvIGRvbid0IGJvdGhlciB0byBpbnNlcnRcbiAgICBpZiAoc3RyZWFtLnBvcyA9PT0gMCkge1xuICAgICAgICByZXR1cm4gY2hlY2tEb25lKHN0cmVhbSwgY2FsbGJhY2spO1xuICAgIH1cbiAgICArK3N0cmVhbS5zdGF0ZS5vdXRzdGFuZGluZ1JlcXVlc3RzO1xuICAgIC8vIENyZWF0ZSBhIG5ldyBidWZmZXIgdG8gbWFrZSBzdXJlIHRoZSBidWZmZXIgaXNuJ3QgYmlnZ2VyIHRoYW4gaXQgbmVlZHNcbiAgICAvLyB0byBiZS5cbiAgICBjb25zdCByZW1uYW50ID0gQnVmZmVyLmFsbG9jKHN0cmVhbS5wb3MpO1xuICAgIHN0cmVhbS5idWZUb1N0b3JlLmNvcHkocmVtbmFudCwgMCwgMCwgc3RyZWFtLnBvcyk7XG4gICAgY29uc3QgZG9jID0gY3JlYXRlQ2h1bmtEb2Moc3RyZWFtLmlkLCBzdHJlYW0ubiwgcmVtbmFudCk7XG4gICAgLy8gSWYgdGhlIHN0cmVhbSB3YXMgYWJvcnRlZCwgZG8gbm90IHdyaXRlIHJlbW5hbnRcbiAgICBpZiAoY2hlY2tBYm9ydGVkKHN0cmVhbSwgY2FsbGJhY2spKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgc3RyZWFtLmNodW5rcy5pbnNlcnRPbmUoZG9jLCB7IHdyaXRlQ29uY2Vybjogc3RyZWFtLndyaXRlQ29uY2VybiB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgLS1zdHJlYW0uc3RhdGUub3V0c3RhbmRpbmdSZXF1ZXN0cztcbiAgICAgICAgY2hlY2tEb25lKHN0cmVhbSk7XG4gICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICByZXR1cm4gX19oYW5kbGVFcnJvcihzdHJlYW0sIGVycm9yKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGNoZWNrQWJvcnRlZChzdHJlYW0sIGNhbGxiYWNrKSB7XG4gICAgaWYgKHN0cmVhbS5zdGF0ZS5hYm9ydGVkKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDg1KTogUmVwbGFjZSB3aXRoIE1vbmdvR3JpZEZTU3RyZWFtQ2xvc2VkRXJyb3JcbiAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoJ1N0cmVhbSBoYXMgYmVlbiBhYm9ydGVkJykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGxvYWQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiR3JpZEZTQnVja2V0V3JpdGVTdHJlYW0iLCJzdHJlYW1fMSIsInJlcXVpcmUiLCJic29uXzEiLCJlcnJvcl8xIiwid3JpdGVfY29uY2Vybl8xIiwiV3JpdGFibGUiLCJjb25zdHJ1Y3RvciIsImJ1Y2tldCIsImZpbGVuYW1lIiwib3B0aW9ucyIsImNodW5rcyIsInMiLCJfY2h1bmtzQ29sbGVjdGlvbiIsImZpbGVzIiwiX2ZpbGVzQ29sbGVjdGlvbiIsIndyaXRlQ29uY2VybiIsIldyaXRlQ29uY2VybiIsImZyb21PcHRpb25zIiwiZG9uZSIsImlkIiwiT2JqZWN0SWQiLCJjaHVua1NpemVCeXRlcyIsImJ1ZlRvU3RvcmUiLCJCdWZmZXIiLCJhbGxvYyIsImxlbmd0aCIsIm4iLCJwb3MiLCJzdGF0ZSIsInN0cmVhbUVuZCIsIm91dHN0YW5kaW5nUmVxdWVzdHMiLCJlcnJvcmVkIiwiYWJvcnRlZCIsImNhbGxlZE9wZW5VcGxvYWRTdHJlYW0iLCJjaGVja0luZGV4ZXMiLCJ0aGVuIiwiY2hlY2tlZEluZGV4ZXMiLCJlbWl0Iiwid3JpdGUiLCJjaHVuayIsImVuY29kaW5nT3JDYWxsYmFjayIsImNhbGxiYWNrIiwiZW5jb2RpbmciLCJ1bmRlZmluZWQiLCJ3YWl0Rm9ySW5kZXhlcyIsImRvV3JpdGUiLCJhYm9ydCIsIk1vbmdvQVBJRXJyb3IiLCJkZWxldGVNYW55IiwiZmlsZXNfaWQiLCJlbmQiLCJjaHVua09yQ2FsbGJhY2siLCJjaGVja0Fib3J0ZWQiLCJvbmNlIiwiRklOSVNIIiwicmVzdWx0Iiwid3JpdGVSZW1uYW50IiwiQ0xPU0UiLCJFUlJPUiIsIl9faGFuZGxlRXJyb3IiLCJzdHJlYW0iLCJlcnJvciIsImNyZWF0ZUNodW5rRG9jIiwiZmlsZXNJZCIsImRhdGEiLCJfaWQiLCJjaGVja0NodW5rc0luZGV4IiwiaW5kZXgiLCJpbmRleGVzIiwibGlzdEluZGV4ZXMiLCJ0b0FycmF5IiwiTW9uZ29FcnJvciIsImNvZGUiLCJNT05HT0RCX0VSUk9SX0NPREVTIiwiTmFtZXNwYWNlTm90Rm91bmQiLCJoYXNDaHVua3NJbmRleCIsImZpbmQiLCJrZXlzIiwia2V5IiwiY3JlYXRlSW5kZXgiLCJiYWNrZ3JvdW5kIiwidW5pcXVlIiwiY2hlY2tEb25lIiwiZmlsZXNEb2MiLCJjcmVhdGVGaWxlc0RvYyIsImNvbnRlbnRUeXBlIiwiYWxpYXNlcyIsIm1ldGFkYXRhIiwiaW5zZXJ0T25lIiwiZG9jIiwiZmluZE9uZSIsInByb2plY3Rpb24iLCJ1cGxvYWREYXRlIiwiaGFzRmlsZUluZGV4IiwiY2h1bmtTaXplIiwicmV0IiwiRGF0ZSIsImlucHV0QnVmIiwiaXNCdWZmZXIiLCJmcm9tIiwiY29weSIsImlucHV0QnVmUmVtYWluaW5nIiwic3BhY2VSZW1haW5pbmciLCJudW1Ub0NvcHkiLCJNYXRoIiwibWluIiwiaW5wdXRCdWZQb3MiLCJyZW1uYW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/gridfs/upload.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/index.js":
/*!*******************************************!*\
  !*** ./node_modules/mongodb/lib/index.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AbstractCursor = exports.MongoWriteConcernError = exports.MongoUnexpectedServerResponseError = exports.MongoTransactionError = exports.MongoTopologyClosedError = exports.MongoTailableCursorError = exports.MongoSystemError = exports.MongoServerSelectionError = exports.MongoServerError = exports.MongoServerClosedError = exports.MongoRuntimeError = exports.MongoParseError = exports.MongoNotConnectedError = exports.MongoNetworkTimeoutError = exports.MongoNetworkError = exports.MongoMissingDependencyError = exports.MongoMissingCredentialsError = exports.MongoKerberosError = exports.MongoInvalidArgumentError = exports.MongoGridFSStreamError = exports.MongoGridFSChunkError = exports.MongoExpiredSessionError = exports.MongoError = exports.MongoDriverError = exports.MongoDecompressionError = exports.MongoCursorInUseError = exports.MongoCursorExhaustedError = exports.MongoCompatibilityError = exports.MongoChangeStreamError = exports.MongoBatchReExecutionError = exports.MongoAzureError = exports.MongoAWSError = exports.MongoAPIError = exports.ChangeStreamCursor = exports.MongoBulkWriteError = exports.Timestamp = exports.ObjectId = exports.MinKey = exports.MaxKey = exports.Long = exports.Int32 = exports.Double = exports.Decimal128 = exports.DBRef = exports.Code = exports.BSONType = exports.BSONSymbol = exports.BSONRegExp = exports.Binary = exports.BSON = void 0;\nexports.ServerClosedEvent = exports.ConnectionReadyEvent = exports.ConnectionPoolReadyEvent = exports.ConnectionPoolMonitoringEvent = exports.ConnectionPoolCreatedEvent = exports.ConnectionPoolClosedEvent = exports.ConnectionPoolClearedEvent = exports.ConnectionCreatedEvent = exports.ConnectionClosedEvent = exports.ConnectionCheckOutStartedEvent = exports.ConnectionCheckOutFailedEvent = exports.ConnectionCheckedOutEvent = exports.ConnectionCheckedInEvent = exports.CommandSucceededEvent = exports.CommandStartedEvent = exports.CommandFailedEvent = exports.WriteConcern = exports.ReadPreference = exports.ReadConcern = exports.TopologyType = exports.ServerType = exports.ReadPreferenceMode = exports.ReadConcernLevel = exports.ProfilingLevel = exports.ReturnDocument = exports.ServerApiVersion = exports.ExplainVerbosity = exports.MongoErrorLabel = exports.AutoEncryptionLoggerLevel = exports.CURSOR_FLAGS = exports.Compressor = exports.AuthMechanism = exports.GSSAPICanonicalizationValue = exports.BatchType = exports.UnorderedBulkOperation = exports.OrderedBulkOperation = exports.MongoClient = exports.ListIndexesCursor = exports.ListCollectionsCursor = exports.GridFSBucketWriteStream = exports.GridFSBucketReadStream = exports.GridFSBucket = exports.FindCursor = exports.Db = exports.Collection = exports.ClientSession = exports.ChangeStream = exports.CancellationToken = exports.AggregationCursor = exports.Admin = void 0;\nexports.SrvPollingEvent = exports.TopologyOpeningEvent = exports.TopologyDescriptionChangedEvent = exports.TopologyClosedEvent = exports.ServerOpeningEvent = exports.ServerHeartbeatSucceededEvent = exports.ServerHeartbeatStartedEvent = exports.ServerHeartbeatFailedEvent = exports.ServerDescriptionChangedEvent = void 0;\nconst admin_1 = __webpack_require__(/*! ./admin */ \"(ssr)/./node_modules/mongodb/lib/admin.js\");\nObject.defineProperty(exports, \"Admin\", ({\n    enumerable: true,\n    get: function() {\n        return admin_1.Admin;\n    }\n}));\nconst ordered_1 = __webpack_require__(/*! ./bulk/ordered */ \"(ssr)/./node_modules/mongodb/lib/bulk/ordered.js\");\nObject.defineProperty(exports, \"OrderedBulkOperation\", ({\n    enumerable: true,\n    get: function() {\n        return ordered_1.OrderedBulkOperation;\n    }\n}));\nconst unordered_1 = __webpack_require__(/*! ./bulk/unordered */ \"(ssr)/./node_modules/mongodb/lib/bulk/unordered.js\");\nObject.defineProperty(exports, \"UnorderedBulkOperation\", ({\n    enumerable: true,\n    get: function() {\n        return unordered_1.UnorderedBulkOperation;\n    }\n}));\nconst change_stream_1 = __webpack_require__(/*! ./change_stream */ \"(ssr)/./node_modules/mongodb/lib/change_stream.js\");\nObject.defineProperty(exports, \"ChangeStream\", ({\n    enumerable: true,\n    get: function() {\n        return change_stream_1.ChangeStream;\n    }\n}));\nconst collection_1 = __webpack_require__(/*! ./collection */ \"(ssr)/./node_modules/mongodb/lib/collection.js\");\nObject.defineProperty(exports, \"Collection\", ({\n    enumerable: true,\n    get: function() {\n        return collection_1.Collection;\n    }\n}));\nconst abstract_cursor_1 = __webpack_require__(/*! ./cursor/abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\nObject.defineProperty(exports, \"AbstractCursor\", ({\n    enumerable: true,\n    get: function() {\n        return abstract_cursor_1.AbstractCursor;\n    }\n}));\nconst aggregation_cursor_1 = __webpack_require__(/*! ./cursor/aggregation_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/aggregation_cursor.js\");\nObject.defineProperty(exports, \"AggregationCursor\", ({\n    enumerable: true,\n    get: function() {\n        return aggregation_cursor_1.AggregationCursor;\n    }\n}));\nconst find_cursor_1 = __webpack_require__(/*! ./cursor/find_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/find_cursor.js\");\nObject.defineProperty(exports, \"FindCursor\", ({\n    enumerable: true,\n    get: function() {\n        return find_cursor_1.FindCursor;\n    }\n}));\nconst list_collections_cursor_1 = __webpack_require__(/*! ./cursor/list_collections_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/list_collections_cursor.js\");\nObject.defineProperty(exports, \"ListCollectionsCursor\", ({\n    enumerable: true,\n    get: function() {\n        return list_collections_cursor_1.ListCollectionsCursor;\n    }\n}));\nconst list_indexes_cursor_1 = __webpack_require__(/*! ./cursor/list_indexes_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/list_indexes_cursor.js\");\nObject.defineProperty(exports, \"ListIndexesCursor\", ({\n    enumerable: true,\n    get: function() {\n        return list_indexes_cursor_1.ListIndexesCursor;\n    }\n}));\nconst db_1 = __webpack_require__(/*! ./db */ \"(ssr)/./node_modules/mongodb/lib/db.js\");\nObject.defineProperty(exports, \"Db\", ({\n    enumerable: true,\n    get: function() {\n        return db_1.Db;\n    }\n}));\nconst gridfs_1 = __webpack_require__(/*! ./gridfs */ \"(ssr)/./node_modules/mongodb/lib/gridfs/index.js\");\nObject.defineProperty(exports, \"GridFSBucket\", ({\n    enumerable: true,\n    get: function() {\n        return gridfs_1.GridFSBucket;\n    }\n}));\nconst download_1 = __webpack_require__(/*! ./gridfs/download */ \"(ssr)/./node_modules/mongodb/lib/gridfs/download.js\");\nObject.defineProperty(exports, \"GridFSBucketReadStream\", ({\n    enumerable: true,\n    get: function() {\n        return download_1.GridFSBucketReadStream;\n    }\n}));\nconst upload_1 = __webpack_require__(/*! ./gridfs/upload */ \"(ssr)/./node_modules/mongodb/lib/gridfs/upload.js\");\nObject.defineProperty(exports, \"GridFSBucketWriteStream\", ({\n    enumerable: true,\n    get: function() {\n        return upload_1.GridFSBucketWriteStream;\n    }\n}));\nconst mongo_client_1 = __webpack_require__(/*! ./mongo_client */ \"(ssr)/./node_modules/mongodb/lib/mongo_client.js\");\nObject.defineProperty(exports, \"MongoClient\", ({\n    enumerable: true,\n    get: function() {\n        return mongo_client_1.MongoClient;\n    }\n}));\nconst mongo_types_1 = __webpack_require__(/*! ./mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nObject.defineProperty(exports, \"CancellationToken\", ({\n    enumerable: true,\n    get: function() {\n        return mongo_types_1.CancellationToken;\n    }\n}));\nconst sessions_1 = __webpack_require__(/*! ./sessions */ \"(ssr)/./node_modules/mongodb/lib/sessions.js\");\nObject.defineProperty(exports, \"ClientSession\", ({\n    enumerable: true,\n    get: function() {\n        return sessions_1.ClientSession;\n    }\n}));\n/** @public */ var bson_1 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nObject.defineProperty(exports, \"BSON\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.BSON;\n    }\n}));\nvar bson_2 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nObject.defineProperty(exports, \"Binary\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.Binary;\n    }\n}));\nObject.defineProperty(exports, \"BSONRegExp\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.BSONRegExp;\n    }\n}));\nObject.defineProperty(exports, \"BSONSymbol\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.BSONSymbol;\n    }\n}));\nObject.defineProperty(exports, \"BSONType\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.BSONType;\n    }\n}));\nObject.defineProperty(exports, \"Code\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.Code;\n    }\n}));\nObject.defineProperty(exports, \"DBRef\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.DBRef;\n    }\n}));\nObject.defineProperty(exports, \"Decimal128\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.Decimal128;\n    }\n}));\nObject.defineProperty(exports, \"Double\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.Double;\n    }\n}));\nObject.defineProperty(exports, \"Int32\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.Int32;\n    }\n}));\nObject.defineProperty(exports, \"Long\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.Long;\n    }\n}));\nObject.defineProperty(exports, \"MaxKey\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.MaxKey;\n    }\n}));\nObject.defineProperty(exports, \"MinKey\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.MinKey;\n    }\n}));\nObject.defineProperty(exports, \"ObjectId\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.ObjectId;\n    }\n}));\nObject.defineProperty(exports, \"Timestamp\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.Timestamp;\n    }\n}));\nvar common_1 = __webpack_require__(/*! ./bulk/common */ \"(ssr)/./node_modules/mongodb/lib/bulk/common.js\");\nObject.defineProperty(exports, \"MongoBulkWriteError\", ({\n    enumerable: true,\n    get: function() {\n        return common_1.MongoBulkWriteError;\n    }\n}));\nvar change_stream_cursor_1 = __webpack_require__(/*! ./cursor/change_stream_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/change_stream_cursor.js\");\nObject.defineProperty(exports, \"ChangeStreamCursor\", ({\n    enumerable: true,\n    get: function() {\n        return change_stream_cursor_1.ChangeStreamCursor;\n    }\n}));\nvar error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nObject.defineProperty(exports, \"MongoAPIError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoAPIError;\n    }\n}));\nObject.defineProperty(exports, \"MongoAWSError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoAWSError;\n    }\n}));\nObject.defineProperty(exports, \"MongoAzureError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoAzureError;\n    }\n}));\nObject.defineProperty(exports, \"MongoBatchReExecutionError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoBatchReExecutionError;\n    }\n}));\nObject.defineProperty(exports, \"MongoChangeStreamError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoChangeStreamError;\n    }\n}));\nObject.defineProperty(exports, \"MongoCompatibilityError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoCompatibilityError;\n    }\n}));\nObject.defineProperty(exports, \"MongoCursorExhaustedError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoCursorExhaustedError;\n    }\n}));\nObject.defineProperty(exports, \"MongoCursorInUseError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoCursorInUseError;\n    }\n}));\nObject.defineProperty(exports, \"MongoDecompressionError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoDecompressionError;\n    }\n}));\nObject.defineProperty(exports, \"MongoDriverError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoDriverError;\n    }\n}));\nObject.defineProperty(exports, \"MongoError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoError;\n    }\n}));\nObject.defineProperty(exports, \"MongoExpiredSessionError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoExpiredSessionError;\n    }\n}));\nObject.defineProperty(exports, \"MongoGridFSChunkError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoGridFSChunkError;\n    }\n}));\nObject.defineProperty(exports, \"MongoGridFSStreamError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoGridFSStreamError;\n    }\n}));\nObject.defineProperty(exports, \"MongoInvalidArgumentError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoInvalidArgumentError;\n    }\n}));\nObject.defineProperty(exports, \"MongoKerberosError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoKerberosError;\n    }\n}));\nObject.defineProperty(exports, \"MongoMissingCredentialsError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoMissingCredentialsError;\n    }\n}));\nObject.defineProperty(exports, \"MongoMissingDependencyError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoMissingDependencyError;\n    }\n}));\nObject.defineProperty(exports, \"MongoNetworkError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoNetworkError;\n    }\n}));\nObject.defineProperty(exports, \"MongoNetworkTimeoutError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoNetworkTimeoutError;\n    }\n}));\nObject.defineProperty(exports, \"MongoNotConnectedError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoNotConnectedError;\n    }\n}));\nObject.defineProperty(exports, \"MongoParseError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoParseError;\n    }\n}));\nObject.defineProperty(exports, \"MongoRuntimeError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoRuntimeError;\n    }\n}));\nObject.defineProperty(exports, \"MongoServerClosedError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoServerClosedError;\n    }\n}));\nObject.defineProperty(exports, \"MongoServerError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoServerError;\n    }\n}));\nObject.defineProperty(exports, \"MongoServerSelectionError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoServerSelectionError;\n    }\n}));\nObject.defineProperty(exports, \"MongoSystemError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoSystemError;\n    }\n}));\nObject.defineProperty(exports, \"MongoTailableCursorError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoTailableCursorError;\n    }\n}));\nObject.defineProperty(exports, \"MongoTopologyClosedError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoTopologyClosedError;\n    }\n}));\nObject.defineProperty(exports, \"MongoTransactionError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoTransactionError;\n    }\n}));\nObject.defineProperty(exports, \"MongoUnexpectedServerResponseError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoUnexpectedServerResponseError;\n    }\n}));\nObject.defineProperty(exports, \"MongoWriteConcernError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoWriteConcernError;\n    }\n}));\n// enums\nvar common_2 = __webpack_require__(/*! ./bulk/common */ \"(ssr)/./node_modules/mongodb/lib/bulk/common.js\");\nObject.defineProperty(exports, \"BatchType\", ({\n    enumerable: true,\n    get: function() {\n        return common_2.BatchType;\n    }\n}));\nvar gssapi_1 = __webpack_require__(/*! ./cmap/auth/gssapi */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/gssapi.js\");\nObject.defineProperty(exports, \"GSSAPICanonicalizationValue\", ({\n    enumerable: true,\n    get: function() {\n        return gssapi_1.GSSAPICanonicalizationValue;\n    }\n}));\nvar providers_1 = __webpack_require__(/*! ./cmap/auth/providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\nObject.defineProperty(exports, \"AuthMechanism\", ({\n    enumerable: true,\n    get: function() {\n        return providers_1.AuthMechanism;\n    }\n}));\nvar compression_1 = __webpack_require__(/*! ./cmap/wire_protocol/compression */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/compression.js\");\nObject.defineProperty(exports, \"Compressor\", ({\n    enumerable: true,\n    get: function() {\n        return compression_1.Compressor;\n    }\n}));\nvar abstract_cursor_2 = __webpack_require__(/*! ./cursor/abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\nObject.defineProperty(exports, \"CURSOR_FLAGS\", ({\n    enumerable: true,\n    get: function() {\n        return abstract_cursor_2.CURSOR_FLAGS;\n    }\n}));\nvar deps_1 = __webpack_require__(/*! ./deps */ \"(ssr)/./node_modules/mongodb/lib/deps.js\");\nObject.defineProperty(exports, \"AutoEncryptionLoggerLevel\", ({\n    enumerable: true,\n    get: function() {\n        return deps_1.AutoEncryptionLoggerLevel;\n    }\n}));\nvar error_2 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nObject.defineProperty(exports, \"MongoErrorLabel\", ({\n    enumerable: true,\n    get: function() {\n        return error_2.MongoErrorLabel;\n    }\n}));\nvar explain_1 = __webpack_require__(/*! ./explain */ \"(ssr)/./node_modules/mongodb/lib/explain.js\");\nObject.defineProperty(exports, \"ExplainVerbosity\", ({\n    enumerable: true,\n    get: function() {\n        return explain_1.ExplainVerbosity;\n    }\n}));\nvar mongo_client_2 = __webpack_require__(/*! ./mongo_client */ \"(ssr)/./node_modules/mongodb/lib/mongo_client.js\");\nObject.defineProperty(exports, \"ServerApiVersion\", ({\n    enumerable: true,\n    get: function() {\n        return mongo_client_2.ServerApiVersion;\n    }\n}));\nvar find_and_modify_1 = __webpack_require__(/*! ./operations/find_and_modify */ \"(ssr)/./node_modules/mongodb/lib/operations/find_and_modify.js\");\nObject.defineProperty(exports, \"ReturnDocument\", ({\n    enumerable: true,\n    get: function() {\n        return find_and_modify_1.ReturnDocument;\n    }\n}));\nvar set_profiling_level_1 = __webpack_require__(/*! ./operations/set_profiling_level */ \"(ssr)/./node_modules/mongodb/lib/operations/set_profiling_level.js\");\nObject.defineProperty(exports, \"ProfilingLevel\", ({\n    enumerable: true,\n    get: function() {\n        return set_profiling_level_1.ProfilingLevel;\n    }\n}));\nvar read_concern_1 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nObject.defineProperty(exports, \"ReadConcernLevel\", ({\n    enumerable: true,\n    get: function() {\n        return read_concern_1.ReadConcernLevel;\n    }\n}));\nvar read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nObject.defineProperty(exports, \"ReadPreferenceMode\", ({\n    enumerable: true,\n    get: function() {\n        return read_preference_1.ReadPreferenceMode;\n    }\n}));\nvar common_3 = __webpack_require__(/*! ./sdam/common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nObject.defineProperty(exports, \"ServerType\", ({\n    enumerable: true,\n    get: function() {\n        return common_3.ServerType;\n    }\n}));\nObject.defineProperty(exports, \"TopologyType\", ({\n    enumerable: true,\n    get: function() {\n        return common_3.TopologyType;\n    }\n}));\n// Helper classes\nvar read_concern_2 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nObject.defineProperty(exports, \"ReadConcern\", ({\n    enumerable: true,\n    get: function() {\n        return read_concern_2.ReadConcern;\n    }\n}));\nvar read_preference_2 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nObject.defineProperty(exports, \"ReadPreference\", ({\n    enumerable: true,\n    get: function() {\n        return read_preference_2.ReadPreference;\n    }\n}));\nvar write_concern_1 = __webpack_require__(/*! ./write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nObject.defineProperty(exports, \"WriteConcern\", ({\n    enumerable: true,\n    get: function() {\n        return write_concern_1.WriteConcern;\n    }\n}));\n// events\nvar command_monitoring_events_1 = __webpack_require__(/*! ./cmap/command_monitoring_events */ \"(ssr)/./node_modules/mongodb/lib/cmap/command_monitoring_events.js\");\nObject.defineProperty(exports, \"CommandFailedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return command_monitoring_events_1.CommandFailedEvent;\n    }\n}));\nObject.defineProperty(exports, \"CommandStartedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return command_monitoring_events_1.CommandStartedEvent;\n    }\n}));\nObject.defineProperty(exports, \"CommandSucceededEvent\", ({\n    enumerable: true,\n    get: function() {\n        return command_monitoring_events_1.CommandSucceededEvent;\n    }\n}));\nvar connection_pool_events_1 = __webpack_require__(/*! ./cmap/connection_pool_events */ \"(ssr)/./node_modules/mongodb/lib/cmap/connection_pool_events.js\");\nObject.defineProperty(exports, \"ConnectionCheckedInEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionCheckedInEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionCheckedOutEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionCheckedOutEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionCheckOutFailedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionCheckOutFailedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionCheckOutStartedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionCheckOutStartedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionClosedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionClosedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionCreatedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionCreatedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionPoolClearedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionPoolClearedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionPoolClosedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionPoolClosedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionPoolCreatedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionPoolCreatedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionPoolMonitoringEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionPoolMonitoringEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionPoolReadyEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionPoolReadyEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionReadyEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionReadyEvent;\n    }\n}));\nvar events_1 = __webpack_require__(/*! ./sdam/events */ \"(ssr)/./node_modules/mongodb/lib/sdam/events.js\");\nObject.defineProperty(exports, \"ServerClosedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.ServerClosedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ServerDescriptionChangedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.ServerDescriptionChangedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ServerHeartbeatFailedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.ServerHeartbeatFailedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ServerHeartbeatStartedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.ServerHeartbeatStartedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ServerHeartbeatSucceededEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.ServerHeartbeatSucceededEvent;\n    }\n}));\nObject.defineProperty(exports, \"ServerOpeningEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.ServerOpeningEvent;\n    }\n}));\nObject.defineProperty(exports, \"TopologyClosedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.TopologyClosedEvent;\n    }\n}));\nObject.defineProperty(exports, \"TopologyDescriptionChangedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.TopologyDescriptionChangedEvent;\n    }\n}));\nObject.defineProperty(exports, \"TopologyOpeningEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.TopologyOpeningEvent;\n    }\n}));\nvar srv_polling_1 = __webpack_require__(/*! ./sdam/srv_polling */ \"(ssr)/./node_modules/mongodb/lib/sdam/srv_polling.js\");\nObject.defineProperty(exports, \"SrvPollingEvent\", ({\n    enumerable: true,\n    get: function() {\n        return srv_polling_1.SrvPollingEvent;\n    }\n})); //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHNCQUFzQixHQUFHQSw4QkFBOEIsR0FBR0EsMENBQTBDLEdBQUdBLDZCQUE2QixHQUFHQSxnQ0FBZ0MsR0FBR0EsZ0NBQWdDLEdBQUdBLHdCQUF3QixHQUFHQSxpQ0FBaUMsR0FBR0Esd0JBQXdCLEdBQUdBLDhCQUE4QixHQUFHQSx5QkFBeUIsR0FBR0EsdUJBQXVCLEdBQUdBLDhCQUE4QixHQUFHQSxnQ0FBZ0MsR0FBR0EseUJBQXlCLEdBQUdBLG1DQUFtQyxHQUFHQSxvQ0FBb0MsR0FBR0EsMEJBQTBCLEdBQUdBLGlDQUFpQyxHQUFHQSw4QkFBOEIsR0FBR0EsNkJBQTZCLEdBQUdBLGdDQUFnQyxHQUFHQSxrQkFBa0IsR0FBR0Esd0JBQXdCLEdBQUdBLCtCQUErQixHQUFHQSw2QkFBNkIsR0FBR0EsaUNBQWlDLEdBQUdBLCtCQUErQixHQUFHQSw4QkFBOEIsR0FBR0Esa0NBQWtDLEdBQUdBLHVCQUF1QixHQUFHQSxxQkFBcUIsR0FBR0EscUJBQXFCLEdBQUdBLDBCQUEwQixHQUFHQSwyQkFBMkIsR0FBR0EsaUJBQWlCLEdBQUdBLGdCQUFnQixHQUFHQSxjQUFjLEdBQUdBLGNBQWMsR0FBR0EsWUFBWSxHQUFHQSxhQUFhLEdBQUdBLGNBQWMsR0FBR0Esa0JBQWtCLEdBQUdBLGFBQWEsR0FBR0EsWUFBWSxHQUFHQSxnQkFBZ0IsR0FBR0Esa0JBQWtCLEdBQUdBLGtCQUFrQixHQUFHQSxjQUFjLEdBQUdBLFlBQVksR0FBRyxLQUFLO0FBQ2wyQ0EseUJBQXlCLEdBQUdBLDRCQUE0QixHQUFHQSxnQ0FBZ0MsR0FBR0EscUNBQXFDLEdBQUdBLGtDQUFrQyxHQUFHQSxpQ0FBaUMsR0FBR0Esa0NBQWtDLEdBQUdBLDhCQUE4QixHQUFHQSw2QkFBNkIsR0FBR0Esc0NBQXNDLEdBQUdB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QU1DLEtBQUs7UUFBYyxPQUFPeUMsU0FBUzlDLDBCQUEwQjtJQUFFO0FBQUUsQ0FBQyxFQUFDO0FBQ3BKL0csK0RBQThEO0lBQUVtSCxZQUFZO0lBQU1DLEtBQUs7UUFBYyxPQUFPeUMsU0FBUy9DLDJCQUEyQjtJQUFFO0FBQUUsQ0FBQyxFQUFDO0FBQ3RKOUcsaUVBQWdFO0lBQUVtSCxZQUFZO0lBQU1DLEtBQUs7UUFBYyxPQUFPeUMsU0FBU2hELDZCQUE2QjtJQUFFO0FBQUUsQ0FBQyxFQUFDO0FBQzFKN0csc0RBQXFEO0lBQUVtSCxZQUFZO0lBQU1DLEtBQUs7UUFBYyxPQUFPeUMsU0FBU2pELGtCQUFrQjtJQUFFO0FBQUUsQ0FBQyxFQUFDO0FBQ3BJNUcsdURBQXNEO0lBQUVtSCxZQUFZO0lBQU1DLEtBQUs7UUFBYyxPQUFPeUMsU0FBU2xELG1CQUFtQjtJQUFFO0FBQUUsQ0FBQyxFQUFDO0FBQ3RJM0csbUVBQWtFO0lBQUVtSCxZQUFZO0lBQU1DLEtBQUs7UUFBYyxPQUFPeUMsU0FBU25ELCtCQUErQjtJQUFFO0FBQUUsQ0FBQyxFQUFDO0FBQzlKMUcsd0RBQXVEO0lBQUVtSCxZQUFZO0lBQU1DLEtBQUs7UUFBYyxPQUFPeUMsU0FBU3BELG9CQUFvQjtJQUFFO0FBQUUsQ0FBQyxFQUFDO0FBQ3hJLElBQUlxRCxnQkFBZ0I1QyxtQkFBT0EsQ0FBQyxnRkFBb0I7QUFDaERsSCxtREFBa0Q7SUFBRW1ILFlBQVk7SUFBTUMsS0FBSztRQUFjLE9BQU8wQyxjQUFjdEQsZUFBZTtJQUFFO0FBQUUsQ0FBQyxFQUFDLEVBQ25JLGlDQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9pbmRleC5qcz82OGIxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BYnN0cmFjdEN1cnNvciA9IGV4cG9ydHMuTW9uZ29Xcml0ZUNvbmNlcm5FcnJvciA9IGV4cG9ydHMuTW9uZ29VbmV4cGVjdGVkU2VydmVyUmVzcG9uc2VFcnJvciA9IGV4cG9ydHMuTW9uZ29UcmFuc2FjdGlvbkVycm9yID0gZXhwb3J0cy5Nb25nb1RvcG9sb2d5Q2xvc2VkRXJyb3IgPSBleHBvcnRzLk1vbmdvVGFpbGFibGVDdXJzb3JFcnJvciA9IGV4cG9ydHMuTW9uZ29TeXN0ZW1FcnJvciA9IGV4cG9ydHMuTW9uZ29TZXJ2ZXJTZWxlY3Rpb25FcnJvciA9IGV4cG9ydHMuTW9uZ29TZXJ2ZXJFcnJvciA9IGV4cG9ydHMuTW9uZ29TZXJ2ZXJDbG9zZWRFcnJvciA9IGV4cG9ydHMuTW9uZ29SdW50aW1lRXJyb3IgPSBleHBvcnRzLk1vbmdvUGFyc2VFcnJvciA9IGV4cG9ydHMuTW9uZ29Ob3RDb25uZWN0ZWRFcnJvciA9IGV4cG9ydHMuTW9uZ29OZXR3b3JrVGltZW91dEVycm9yID0gZXhwb3J0cy5Nb25nb05ldHdvcmtFcnJvciA9IGV4cG9ydHMuTW9uZ29NaXNzaW5nRGVwZW5kZW5jeUVycm9yID0gZXhwb3J0cy5Nb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yID0gZXhwb3J0cy5Nb25nb0tlcmJlcm9zRXJyb3IgPSBleHBvcnRzLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IgPSBleHBvcnRzLk1vbmdvR3JpZEZTU3RyZWFtRXJyb3IgPSBleHBvcnRzLk1vbmdvR3JpZEZTQ2h1bmtFcnJvciA9IGV4cG9ydHMuTW9uZ29FeHBpcmVkU2Vzc2lvbkVycm9yID0gZXhwb3J0cy5Nb25nb0Vycm9yID0gZXhwb3J0cy5Nb25nb0RyaXZlckVycm9yID0gZXhwb3J0cy5Nb25nb0RlY29tcHJlc3Npb25FcnJvciA9IGV4cG9ydHMuTW9uZ29DdXJzb3JJblVzZUVycm9yID0gZXhwb3J0cy5Nb25nb0N1cnNvckV4aGF1c3RlZEVycm9yID0gZXhwb3J0cy5Nb25nb0NvbXBhdGliaWxpdHlFcnJvciA9IGV4cG9ydHMuTW9uZ29DaGFuZ2VTdHJlYW1FcnJvciA9IGV4cG9ydHMuTW9uZ29CYXRjaFJlRXhlY3V0aW9uRXJyb3IgPSBleHBvcnRzLk1vbmdvQXp1cmVFcnJvciA9IGV4cG9ydHMuTW9uZ29BV1NFcnJvciA9IGV4cG9ydHMuTW9uZ29BUElFcnJvciA9IGV4cG9ydHMuQ2hhbmdlU3RyZWFtQ3Vyc29yID0gZXhwb3J0cy5Nb25nb0J1bGtXcml0ZUVycm9yID0gZXhwb3J0cy5UaW1lc3RhbXAgPSBleHBvcnRzLk9iamVjdElkID0gZXhwb3J0cy5NaW5LZXkgPSBleHBvcnRzLk1heEtleSA9IGV4cG9ydHMuTG9uZyA9IGV4cG9ydHMuSW50MzIgPSBleHBvcnRzLkRvdWJsZSA9IGV4cG9ydHMuRGVjaW1hbDEyOCA9IGV4cG9ydHMuREJSZWYgPSBleHBvcnRzLkNvZGUgPSBleHBvcnRzLkJTT05UeXBlID0gZXhwb3J0cy5CU09OU3ltYm9sID0gZXhwb3J0cy5CU09OUmVnRXhwID0gZXhwb3J0cy5CaW5hcnkgPSBleHBvcnRzLkJTT04gPSB2b2lkIDA7XG5leHBvcnRzLlNlcnZlckNsb3NlZEV2ZW50ID0gZXhwb3J0cy5Db25uZWN0aW9uUmVhZHlFdmVudCA9IGV4cG9ydHMuQ29ubmVjdGlvblBvb2xSZWFkeUV2ZW50ID0gZXhwb3J0cy5Db25uZWN0aW9uUG9vbE1vbml0b3JpbmdFdmVudCA9IGV4cG9ydHMuQ29ubmVjdGlvblBvb2xDcmVhdGVkRXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25Qb29sQ2xvc2VkRXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25Qb29sQ2xlYXJlZEV2ZW50ID0gZXhwb3J0cy5Db25uZWN0aW9uQ3JlYXRlZEV2ZW50ID0gZXhwb3J0cy5Db25uZWN0aW9uQ2xvc2VkRXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25DaGVja091dFN0YXJ0ZWRFdmVudCA9IGV4cG9ydHMuQ29ubmVjdGlvbkNoZWNrT3V0RmFpbGVkRXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25DaGVja2VkT3V0RXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25DaGVja2VkSW5FdmVudCA9IGV4cG9ydHMuQ29tbWFuZFN1Y2NlZWRlZEV2ZW50ID0gZXhwb3J0cy5Db21tYW5kU3RhcnRlZEV2ZW50ID0gZXhwb3J0cy5Db21tYW5kRmFpbGVkRXZlbnQgPSBleHBvcnRzLldyaXRlQ29uY2VybiA9IGV4cG9ydHMuUmVhZFByZWZlcmVuY2UgPSBleHBvcnRzLlJlYWRDb25jZXJuID0gZXhwb3J0cy5Ub3BvbG9neVR5cGUgPSBleHBvcnRzLlNlcnZlclR5cGUgPSBleHBvcnRzLlJlYWRQcmVmZXJlbmNlTW9kZSA9IGV4cG9ydHMuUmVhZENvbmNlcm5MZXZlbCA9IGV4cG9ydHMuUHJvZmlsaW5nTGV2ZWwgPSBleHBvcnRzLlJldHVybkRvY3VtZW50ID0gZXhwb3J0cy5TZXJ2ZXJBcGlWZXJzaW9uID0gZXhwb3J0cy5FeHBsYWluVmVyYm9zaXR5ID0gZXhwb3J0cy5Nb25nb0Vycm9yTGFiZWwgPSBleHBvcnRzLkF1dG9FbmNyeXB0aW9uTG9nZ2VyTGV2ZWwgPSBleHBvcnRzLkNVUlNPUl9GTEFHUyA9IGV4cG9ydHMuQ29tcHJlc3NvciA9IGV4cG9ydHMuQXV0aE1lY2hhbmlzbSA9IGV4cG9ydHMuR1NTQVBJQ2Fub25pY2FsaXphdGlvblZhbHVlID0gZXhwb3J0cy5CYXRjaFR5cGUgPSBleHBvcnRzLlVub3JkZXJlZEJ1bGtPcGVyYXRpb24gPSBleHBvcnRzLk9yZGVyZWRCdWxrT3BlcmF0aW9uID0gZXhwb3J0cy5Nb25nb0NsaWVudCA9IGV4cG9ydHMuTGlzdEluZGV4ZXNDdXJzb3IgPSBleHBvcnRzLkxpc3RDb2xsZWN0aW9uc0N1cnNvciA9IGV4cG9ydHMuR3JpZEZTQnVja2V0V3JpdGVTdHJlYW0gPSBleHBvcnRzLkdyaWRGU0J1Y2tldFJlYWRTdHJlYW0gPSBleHBvcnRzLkdyaWRGU0J1Y2tldCA9IGV4cG9ydHMuRmluZEN1cnNvciA9IGV4cG9ydHMuRGIgPSBleHBvcnRzLkNvbGxlY3Rpb24gPSBleHBvcnRzLkNsaWVudFNlc3Npb24gPSBleHBvcnRzLkNoYW5nZVN0cmVhbSA9IGV4cG9ydHMuQ2FuY2VsbGF0aW9uVG9rZW4gPSBleHBvcnRzLkFnZ3JlZ2F0aW9uQ3Vyc29yID0gZXhwb3J0cy5BZG1pbiA9IHZvaWQgMDtcbmV4cG9ydHMuU3J2UG9sbGluZ0V2ZW50ID0gZXhwb3J0cy5Ub3BvbG9neU9wZW5pbmdFdmVudCA9IGV4cG9ydHMuVG9wb2xvZ3lEZXNjcmlwdGlvbkNoYW5nZWRFdmVudCA9IGV4cG9ydHMuVG9wb2xvZ3lDbG9zZWRFdmVudCA9IGV4cG9ydHMuU2VydmVyT3BlbmluZ0V2ZW50ID0gZXhwb3J0cy5TZXJ2ZXJIZWFydGJlYXRTdWNjZWVkZWRFdmVudCA9IGV4cG9ydHMuU2VydmVySGVhcnRiZWF0U3RhcnRlZEV2ZW50ID0gZXhwb3J0cy5TZXJ2ZXJIZWFydGJlYXRGYWlsZWRFdmVudCA9IGV4cG9ydHMuU2VydmVyRGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQgPSB2b2lkIDA7XG5jb25zdCBhZG1pbl8xID0gcmVxdWlyZShcIi4vYWRtaW5cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJBZG1pblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYWRtaW5fMS5BZG1pbjsgfSB9KTtcbmNvbnN0IG9yZGVyZWRfMSA9IHJlcXVpcmUoXCIuL2J1bGsvb3JkZXJlZFwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk9yZGVyZWRCdWxrT3BlcmF0aW9uXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBvcmRlcmVkXzEuT3JkZXJlZEJ1bGtPcGVyYXRpb247IH0gfSk7XG5jb25zdCB1bm9yZGVyZWRfMSA9IHJlcXVpcmUoXCIuL2J1bGsvdW5vcmRlcmVkXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVW5vcmRlcmVkQnVsa09wZXJhdGlvblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdW5vcmRlcmVkXzEuVW5vcmRlcmVkQnVsa09wZXJhdGlvbjsgfSB9KTtcbmNvbnN0IGNoYW5nZV9zdHJlYW1fMSA9IHJlcXVpcmUoXCIuL2NoYW5nZV9zdHJlYW1cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDaGFuZ2VTdHJlYW1cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNoYW5nZV9zdHJlYW1fMS5DaGFuZ2VTdHJlYW07IH0gfSk7XG5jb25zdCBjb2xsZWN0aW9uXzEgPSByZXF1aXJlKFwiLi9jb2xsZWN0aW9uXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ29sbGVjdGlvblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gY29sbGVjdGlvbl8xLkNvbGxlY3Rpb247IH0gfSk7XG5jb25zdCBhYnN0cmFjdF9jdXJzb3JfMSA9IHJlcXVpcmUoXCIuL2N1cnNvci9hYnN0cmFjdF9jdXJzb3JcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJBYnN0cmFjdEN1cnNvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYWJzdHJhY3RfY3Vyc29yXzEuQWJzdHJhY3RDdXJzb3I7IH0gfSk7XG5jb25zdCBhZ2dyZWdhdGlvbl9jdXJzb3JfMSA9IHJlcXVpcmUoXCIuL2N1cnNvci9hZ2dyZWdhdGlvbl9jdXJzb3JcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJBZ2dyZWdhdGlvbkN1cnNvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYWdncmVnYXRpb25fY3Vyc29yXzEuQWdncmVnYXRpb25DdXJzb3I7IH0gfSk7XG5jb25zdCBmaW5kX2N1cnNvcl8xID0gcmVxdWlyZShcIi4vY3Vyc29yL2ZpbmRfY3Vyc29yXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRmluZEN1cnNvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZmluZF9jdXJzb3JfMS5GaW5kQ3Vyc29yOyB9IH0pO1xuY29uc3QgbGlzdF9jb2xsZWN0aW9uc19jdXJzb3JfMSA9IHJlcXVpcmUoXCIuL2N1cnNvci9saXN0X2NvbGxlY3Rpb25zX2N1cnNvclwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkxpc3RDb2xsZWN0aW9uc0N1cnNvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGlzdF9jb2xsZWN0aW9uc19jdXJzb3JfMS5MaXN0Q29sbGVjdGlvbnNDdXJzb3I7IH0gfSk7XG5jb25zdCBsaXN0X2luZGV4ZXNfY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9jdXJzb3IvbGlzdF9pbmRleGVzX2N1cnNvclwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkxpc3RJbmRleGVzQ3Vyc29yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXN0X2luZGV4ZXNfY3Vyc29yXzEuTGlzdEluZGV4ZXNDdXJzb3I7IH0gfSk7XG5jb25zdCBkYl8xID0gcmVxdWlyZShcIi4vZGJcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJEYlwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZGJfMS5EYjsgfSB9KTtcbmNvbnN0IGdyaWRmc18xID0gcmVxdWlyZShcIi4vZ3JpZGZzXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiR3JpZEZTQnVja2V0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBncmlkZnNfMS5HcmlkRlNCdWNrZXQ7IH0gfSk7XG5jb25zdCBkb3dubG9hZF8xID0gcmVxdWlyZShcIi4vZ3JpZGZzL2Rvd25sb2FkXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiR3JpZEZTQnVja2V0UmVhZFN0cmVhbVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZG93bmxvYWRfMS5HcmlkRlNCdWNrZXRSZWFkU3RyZWFtOyB9IH0pO1xuY29uc3QgdXBsb2FkXzEgPSByZXF1aXJlKFwiLi9ncmlkZnMvdXBsb2FkXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiR3JpZEZTQnVja2V0V3JpdGVTdHJlYW1cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVwbG9hZF8xLkdyaWRGU0J1Y2tldFdyaXRlU3RyZWFtOyB9IH0pO1xuY29uc3QgbW9uZ29fY2xpZW50XzEgPSByZXF1aXJlKFwiLi9tb25nb19jbGllbnRcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0NsaWVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbW9uZ29fY2xpZW50XzEuTW9uZ29DbGllbnQ7IH0gfSk7XG5jb25zdCBtb25nb190eXBlc18xID0gcmVxdWlyZShcIi4vbW9uZ29fdHlwZXNcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDYW5jZWxsYXRpb25Ub2tlblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbW9uZ29fdHlwZXNfMS5DYW5jZWxsYXRpb25Ub2tlbjsgfSB9KTtcbmNvbnN0IHNlc3Npb25zXzEgPSByZXF1aXJlKFwiLi9zZXNzaW9uc1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNsaWVudFNlc3Npb25cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlc3Npb25zXzEuQ2xpZW50U2Vzc2lvbjsgfSB9KTtcbi8qKiBAcHVibGljICovXG52YXIgYnNvbl8xID0gcmVxdWlyZShcIi4vYnNvblwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkJTT05cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5CU09OOyB9IH0pO1xudmFyIGJzb25fMiA9IHJlcXVpcmUoXCIuL2Jzb25cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJCaW5hcnlcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5CaW5hcnk7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJCU09OUmVnRXhwXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzIuQlNPTlJlZ0V4cDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkJTT05TeW1ib2xcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5CU09OU3ltYm9sOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQlNPTlR5cGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5CU09OVHlwZTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvZGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5Db2RlOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiREJSZWZcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5EQlJlZjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkRlY2ltYWwxMjhcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5EZWNpbWFsMTI4OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRG91YmxlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzIuRG91YmxlOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiSW50MzJcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5JbnQzMjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkxvbmdcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5Mb25nOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTWF4S2V5XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzIuTWF4S2V5OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTWluS2V5XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzIuTWluS2V5OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiT2JqZWN0SWRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5PYmplY3RJZDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlRpbWVzdGFtcFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYnNvbl8yLlRpbWVzdGFtcDsgfSB9KTtcbnZhciBjb21tb25fMSA9IHJlcXVpcmUoXCIuL2J1bGsvY29tbW9uXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29CdWxrV3JpdGVFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gY29tbW9uXzEuTW9uZ29CdWxrV3JpdGVFcnJvcjsgfSB9KTtcbnZhciBjaGFuZ2Vfc3RyZWFtX2N1cnNvcl8xID0gcmVxdWlyZShcIi4vY3Vyc29yL2NoYW5nZV9zdHJlYW1fY3Vyc29yXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ2hhbmdlU3RyZWFtQ3Vyc29yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjaGFuZ2Vfc3RyZWFtX2N1cnNvcl8xLkNoYW5nZVN0cmVhbUN1cnNvcjsgfSB9KTtcbnZhciBlcnJvcl8xID0gcmVxdWlyZShcIi4vZXJyb3JcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0FQSUVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvQVBJRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0FXU0Vycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvQVdTRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0F6dXJlRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29BenVyZUVycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29CYXRjaFJlRXhlY3V0aW9uRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29CYXRjaFJlRXhlY3V0aW9uRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0NoYW5nZVN0cmVhbUVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvQ2hhbmdlU3RyZWFtRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0NvbXBhdGliaWxpdHlFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb0NvbXBhdGliaWxpdHlFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvQ3Vyc29yRXhoYXVzdGVkRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29DdXJzb3JFeGhhdXN0ZWRFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvQ3Vyc29ySW5Vc2VFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb0N1cnNvckluVXNlRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0RlY29tcHJlc3Npb25FcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb0RlY29tcHJlc3Npb25FcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvRHJpdmVyRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29Ecml2ZXJFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29FcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvRXhwaXJlZFNlc3Npb25FcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb0V4cGlyZWRTZXNzaW9uRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0dyaWRGU0NodW5rRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29HcmlkRlNDaHVua0Vycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29HcmlkRlNTdHJlYW1FcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb0dyaWRGU1N0cmVhbUVycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29LZXJiZXJvc0Vycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvS2VyYmVyb3NFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb01pc3NpbmdEZXBlbmRlbmN5RXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb05ldHdvcmtFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb05ldHdvcmtFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvTmV0d29ya1RpbWVvdXRFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb05ldHdvcmtUaW1lb3V0RXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb05vdENvbm5lY3RlZEVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvTm90Q29ubmVjdGVkRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb1BhcnNlRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29QYXJzZUVycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29SdW50aW1lRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb1NlcnZlckNsb3NlZEVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvU2VydmVyQ2xvc2VkRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb1NlcnZlckVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvU2VydmVyRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb1NlcnZlclNlbGVjdGlvbkVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvU2VydmVyU2VsZWN0aW9uRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb1N5c3RlbUVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvU3lzdGVtRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29UYWlsYWJsZUN1cnNvckVycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29Ub3BvbG9neUNsb3NlZEVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvVG9wb2xvZ3lDbG9zZWRFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvVHJhbnNhY3Rpb25FcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb1RyYW5zYWN0aW9uRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb1VuZXhwZWN0ZWRTZXJ2ZXJSZXNwb25zZUVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb1dyaXRlQ29uY2VybkVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvV3JpdGVDb25jZXJuRXJyb3I7IH0gfSk7XG4vLyBlbnVtc1xudmFyIGNvbW1vbl8yID0gcmVxdWlyZShcIi4vYnVsay9jb21tb25cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJCYXRjaFR5cGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbW1vbl8yLkJhdGNoVHlwZTsgfSB9KTtcbnZhciBnc3NhcGlfMSA9IHJlcXVpcmUoXCIuL2NtYXAvYXV0aC9nc3NhcGlcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJHU1NBUElDYW5vbmljYWxpemF0aW9uVmFsdWVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdzc2FwaV8xLkdTU0FQSUNhbm9uaWNhbGl6YXRpb25WYWx1ZTsgfSB9KTtcbnZhciBwcm92aWRlcnNfMSA9IHJlcXVpcmUoXCIuL2NtYXAvYXV0aC9wcm92aWRlcnNcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJBdXRoTWVjaGFuaXNtXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtOyB9IH0pO1xudmFyIGNvbXByZXNzaW9uXzEgPSByZXF1aXJlKFwiLi9jbWFwL3dpcmVfcHJvdG9jb2wvY29tcHJlc3Npb25cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDb21wcmVzc29yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb21wcmVzc2lvbl8xLkNvbXByZXNzb3I7IH0gfSk7XG52YXIgYWJzdHJhY3RfY3Vyc29yXzIgPSByZXF1aXJlKFwiLi9jdXJzb3IvYWJzdHJhY3RfY3Vyc29yXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ1VSU09SX0ZMQUdTXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBhYnN0cmFjdF9jdXJzb3JfMi5DVVJTT1JfRkxBR1M7IH0gfSk7XG52YXIgZGVwc18xID0gcmVxdWlyZShcIi4vZGVwc1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkF1dG9FbmNyeXB0aW9uTG9nZ2VyTGV2ZWxcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRlcHNfMS5BdXRvRW5jcnlwdGlvbkxvZ2dlckxldmVsOyB9IH0pO1xudmFyIGVycm9yXzIgPSByZXF1aXJlKFwiLi9lcnJvclwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvRXJyb3JMYWJlbFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMi5Nb25nb0Vycm9yTGFiZWw7IH0gfSk7XG52YXIgZXhwbGFpbl8xID0gcmVxdWlyZShcIi4vZXhwbGFpblwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkV4cGxhaW5WZXJib3NpdHlcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV4cGxhaW5fMS5FeHBsYWluVmVyYm9zaXR5OyB9IH0pO1xudmFyIG1vbmdvX2NsaWVudF8yID0gcmVxdWlyZShcIi4vbW9uZ29fY2xpZW50XCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiU2VydmVyQXBpVmVyc2lvblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbW9uZ29fY2xpZW50XzIuU2VydmVyQXBpVmVyc2lvbjsgfSB9KTtcbnZhciBmaW5kX2FuZF9tb2RpZnlfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvZmluZF9hbmRfbW9kaWZ5XCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUmV0dXJuRG9jdW1lbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZpbmRfYW5kX21vZGlmeV8xLlJldHVybkRvY3VtZW50OyB9IH0pO1xudmFyIHNldF9wcm9maWxpbmdfbGV2ZWxfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvc2V0X3Byb2ZpbGluZ19sZXZlbFwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlByb2ZpbGluZ0xldmVsXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZXRfcHJvZmlsaW5nX2xldmVsXzEuUHJvZmlsaW5nTGV2ZWw7IH0gfSk7XG52YXIgcmVhZF9jb25jZXJuXzEgPSByZXF1aXJlKFwiLi9yZWFkX2NvbmNlcm5cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJSZWFkQ29uY2VybkxldmVsXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiByZWFkX2NvbmNlcm5fMS5SZWFkQ29uY2VybkxldmVsOyB9IH0pO1xudmFyIHJlYWRfcHJlZmVyZW5jZV8xID0gcmVxdWlyZShcIi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUmVhZFByZWZlcmVuY2VNb2RlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZU1vZGU7IH0gfSk7XG52YXIgY29tbW9uXzMgPSByZXF1aXJlKFwiLi9zZGFtL2NvbW1vblwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlNlcnZlclR5cGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbW1vbl8zLlNlcnZlclR5cGU7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJUb3BvbG9neVR5cGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbW1vbl8zLlRvcG9sb2d5VHlwZTsgfSB9KTtcbi8vIEhlbHBlciBjbGFzc2VzXG52YXIgcmVhZF9jb25jZXJuXzIgPSByZXF1aXJlKFwiLi9yZWFkX2NvbmNlcm5cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJSZWFkQ29uY2VyblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVhZF9jb25jZXJuXzIuUmVhZENvbmNlcm47IH0gfSk7XG52YXIgcmVhZF9wcmVmZXJlbmNlXzIgPSByZXF1aXJlKFwiLi9yZWFkX3ByZWZlcmVuY2VcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJSZWFkUHJlZmVyZW5jZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVhZF9wcmVmZXJlbmNlXzIuUmVhZFByZWZlcmVuY2U7IH0gfSk7XG52YXIgd3JpdGVfY29uY2Vybl8xID0gcmVxdWlyZShcIi4vd3JpdGVfY29uY2VyblwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIldyaXRlQ29uY2VyblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gd3JpdGVfY29uY2Vybl8xLldyaXRlQ29uY2VybjsgfSB9KTtcbi8vIGV2ZW50c1xudmFyIGNvbW1hbmRfbW9uaXRvcmluZ19ldmVudHNfMSA9IHJlcXVpcmUoXCIuL2NtYXAvY29tbWFuZF9tb25pdG9yaW5nX2V2ZW50c1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvbW1hbmRGYWlsZWRFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gY29tbWFuZF9tb25pdG9yaW5nX2V2ZW50c18xLkNvbW1hbmRGYWlsZWRFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvbW1hbmRTdGFydGVkRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbW1hbmRfbW9uaXRvcmluZ19ldmVudHNfMS5Db21tYW5kU3RhcnRlZEV2ZW50OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ29tbWFuZFN1Y2NlZWRlZEV2ZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb21tYW5kX21vbml0b3JpbmdfZXZlbnRzXzEuQ29tbWFuZFN1Y2NlZWRlZEV2ZW50OyB9IH0pO1xudmFyIGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMSA9IHJlcXVpcmUoXCIuL2NtYXAvY29ubmVjdGlvbl9wb29sX2V2ZW50c1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvbm5lY3Rpb25DaGVja2VkSW5FdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25DaGVja2VkSW5FdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvbm5lY3Rpb25DaGVja2VkT3V0RXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uQ2hlY2tlZE91dEV2ZW50OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ29ubmVjdGlvbkNoZWNrT3V0RmFpbGVkRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uQ2hlY2tPdXRGYWlsZWRFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvbm5lY3Rpb25DaGVja091dFN0YXJ0ZWRFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25DaGVja091dFN0YXJ0ZWRFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvbm5lY3Rpb25DbG9zZWRFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25DbG9zZWRFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvbm5lY3Rpb25DcmVhdGVkRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uQ3JlYXRlZEV2ZW50OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ29ubmVjdGlvblBvb2xDbGVhcmVkRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uUG9vbENsZWFyZWRFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvbm5lY3Rpb25Qb29sQ2xvc2VkRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uUG9vbENsb3NlZEV2ZW50OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ29ubmVjdGlvblBvb2xDcmVhdGVkRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uUG9vbENyZWF0ZWRFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvbm5lY3Rpb25Qb29sTW9uaXRvcmluZ0V2ZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvblBvb2xNb25pdG9yaW5nRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDb25uZWN0aW9uUG9vbFJlYWR5RXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uUG9vbFJlYWR5RXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDb25uZWN0aW9uUmVhZHlFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25SZWFkeUV2ZW50OyB9IH0pO1xudmFyIGV2ZW50c18xID0gcmVxdWlyZShcIi4vc2RhbS9ldmVudHNcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTZXJ2ZXJDbG9zZWRFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXZlbnRzXzEuU2VydmVyQ2xvc2VkRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTZXJ2ZXJEZXNjcmlwdGlvbkNoYW5nZWRFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXZlbnRzXzEuU2VydmVyRGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTZXJ2ZXJIZWFydGJlYXRGYWlsZWRFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXZlbnRzXzEuU2VydmVySGVhcnRiZWF0RmFpbGVkRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTZXJ2ZXJIZWFydGJlYXRTdGFydGVkRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV2ZW50c18xLlNlcnZlckhlYXJ0YmVhdFN0YXJ0ZWRFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlNlcnZlckhlYXJ0YmVhdFN1Y2NlZWRlZEV2ZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBldmVudHNfMS5TZXJ2ZXJIZWFydGJlYXRTdWNjZWVkZWRFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlNlcnZlck9wZW5pbmdFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXZlbnRzXzEuU2VydmVyT3BlbmluZ0V2ZW50OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVG9wb2xvZ3lDbG9zZWRFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXZlbnRzXzEuVG9wb2xvZ3lDbG9zZWRFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlRvcG9sb2d5RGVzY3JpcHRpb25DaGFuZ2VkRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV2ZW50c18xLlRvcG9sb2d5RGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJUb3BvbG9neU9wZW5pbmdFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXZlbnRzXzEuVG9wb2xvZ3lPcGVuaW5nRXZlbnQ7IH0gfSk7XG52YXIgc3J2X3BvbGxpbmdfMSA9IHJlcXVpcmUoXCIuL3NkYW0vc3J2X3BvbGxpbmdcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTcnZQb2xsaW5nRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNydl9wb2xsaW5nXzEuU3J2UG9sbGluZ0V2ZW50OyB9IH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQWJzdHJhY3RDdXJzb3IiLCJNb25nb1dyaXRlQ29uY2VybkVycm9yIiwiTW9uZ29VbmV4cGVjdGVkU2VydmVyUmVzcG9uc2VFcnJvciIsIk1vbmdvVHJhbnNhY3Rpb25FcnJvciIsIk1vbmdvVG9wb2xvZ3lDbG9zZWRFcnJvciIsIk1vbmdvVGFpbGFibGVDdXJzb3JFcnJvciIsIk1vbmdvU3lzdGVtRXJyb3IiLCJNb25nb1NlcnZlclNlbGVjdGlvbkVycm9yIiwiTW9uZ29TZXJ2ZXJFcnJvciIsIk1vbmdvU2VydmVyQ2xvc2VkRXJyb3IiLCJNb25nb1J1bnRpbWVFcnJvciIsIk1vbmdvUGFyc2VFcnJvciIsIk1vbmdvTm90Q29ubmVjdGVkRXJyb3IiLCJNb25nb05ldHdvcmtUaW1lb3V0RXJyb3IiLCJNb25nb05ldHdvcmtFcnJvciIsIk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvciIsIk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IiLCJNb25nb0tlcmJlcm9zRXJyb3IiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiTW9uZ29HcmlkRlNTdHJlYW1FcnJvciIsIk1vbmdvR3JpZEZTQ2h1bmtFcnJvciIsIk1vbmdvRXhwaXJlZFNlc3Npb25FcnJvciIsIk1vbmdvRXJyb3IiLCJNb25nb0RyaXZlckVycm9yIiwiTW9uZ29EZWNvbXByZXNzaW9uRXJyb3IiLCJNb25nb0N1cnNvckluVXNlRXJyb3IiLCJNb25nb0N1cnNvckV4aGF1c3RlZEVycm9yIiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCJNb25nb0NoYW5nZVN0cmVhbUVycm9yIiwiTW9uZ29CYXRjaFJlRXhlY3V0aW9uRXJyb3IiLCJNb25nb0F6dXJlRXJyb3IiLCJNb25nb0FXU0Vycm9yIiwiTW9uZ29BUElFcnJvciIsIkNoYW5nZVN0cmVhbUN1cnNvciIsIk1vbmdvQnVsa1dyaXRlRXJyb3IiLCJUaW1lc3RhbXAiLCJPYmplY3RJZCIsIk1pbktleSIsIk1heEtleSIsIkxvbmciLCJJbnQzMiIsIkRvdWJsZSIsIkRlY2ltYWwxMjgiLCJEQlJlZiIsIkNvZGUiLCJCU09OVHlwZSIsIkJTT05TeW1ib2wiLCJCU09OUmVnRXhwIiwiQmluYXJ5IiwiQlNPTiIsIlNlcnZlckNsb3NlZEV2ZW50IiwiQ29ubmVjdGlvblJlYWR5RXZlbnQiLCJDb25uZWN0aW9uUG9vbFJlYWR5RXZlbnQiLCJDb25uZWN0aW9uUG9vbE1vbml0b3JpbmdFdmVudCIsIkNvbm5lY3Rpb25Qb29sQ3JlYXRlZEV2ZW50IiwiQ29ubmVjdGlvblBvb2xDbG9zZWRFdmVudCIsIkNvbm5lY3Rpb25Qb29sQ2xlYXJlZEV2ZW50IiwiQ29ubmVjdGlvbkNyZWF0ZWRFdmVudCIsIkNvbm5lY3Rpb25DbG9zZWRFdmVudCIsIkNvbm5lY3Rpb25DaGVja091dFN0YXJ0ZWRFdmVudCIsIkNvbm5lY3Rpb25DaGVja091dEZhaWxlZEV2ZW50IiwiQ29ubmVjdGlvbkNoZWNrZWRPdXRFdmVudCIsIkNvbm5lY3Rpb25DaGVja2VkSW5FdmVudCIsIkNvbW1hbmRTdWNjZWVkZWRFdmVudCIsIkNvbW1hbmRTdGFydGVkRXZlbnQiLCJDb21tYW5kRmFpbGVkRXZlbnQiLCJXcml0ZUNvbmNlcm4iLCJSZWFkUHJlZmVyZW5jZSIsIlJlYWRDb25jZXJuIiwiVG9wb2xvZ3lUeXBlIiwiU2VydmVyVHlwZSIsIlJlYWRQcmVmZXJlbmNlTW9kZSIsIlJlYWRDb25jZXJuTGV2ZWwiLCJQcm9maWxpbmdMZXZlbCIsIlJldHVybkRvY3VtZW50IiwiU2VydmVyQXBpVmVyc2lvbiIsIkV4cGxhaW5WZXJib3NpdHkiLCJNb25nb0Vycm9yTGFiZWwiLCJBdXRvRW5jcnlwdGlvbkxvZ2dlckxldmVsIiwiQ1VSU09SX0ZMQUdTIiwiQ29tcHJlc3NvciIsIkF1dGhNZWNoYW5pc20iLCJHU1NBUElDYW5vbmljYWxpemF0aW9uVmFsdWUiLCJCYXRjaFR5cGUiLCJVbm9yZGVyZWRCdWxrT3BlcmF0aW9uIiwiT3JkZXJlZEJ1bGtPcGVyYXRpb24iLCJNb25nb0NsaWVudCIsIkxpc3RJbmRleGVzQ3Vyc29yIiwiTGlzdENvbGxlY3Rpb25zQ3Vyc29yIiwiR3JpZEZTQnVja2V0V3JpdGVTdHJlYW0iLCJHcmlkRlNCdWNrZXRSZWFkU3RyZWFtIiwiR3JpZEZTQnVja2V0IiwiRmluZEN1cnNvciIsIkRiIiwiQ29sbGVjdGlvbiIsIkNsaWVudFNlc3Npb24iLCJDaGFuZ2VTdHJlYW0iLCJDYW5jZWxsYXRpb25Ub2tlbiIsIkFnZ3JlZ2F0aW9uQ3Vyc29yIiwiQWRtaW4iLCJTcnZQb2xsaW5nRXZlbnQiLCJUb3BvbG9neU9wZW5pbmdFdmVudCIsIlRvcG9sb2d5RGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQiLCJUb3BvbG9neUNsb3NlZEV2ZW50IiwiU2VydmVyT3BlbmluZ0V2ZW50IiwiU2VydmVySGVhcnRiZWF0U3VjY2VlZGVkRXZlbnQiLCJTZXJ2ZXJIZWFydGJlYXRTdGFydGVkRXZlbnQiLCJTZXJ2ZXJIZWFydGJlYXRGYWlsZWRFdmVudCIsIlNlcnZlckRlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50IiwiYWRtaW5fMSIsInJlcXVpcmUiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib3JkZXJlZF8xIiwidW5vcmRlcmVkXzEiLCJjaGFuZ2Vfc3RyZWFtXzEiLCJjb2xsZWN0aW9uXzEiLCJhYnN0cmFjdF9jdXJzb3JfMSIsImFnZ3JlZ2F0aW9uX2N1cnNvcl8xIiwiZmluZF9jdXJzb3JfMSIsImxpc3RfY29sbGVjdGlvbnNfY3Vyc29yXzEiLCJsaXN0X2luZGV4ZXNfY3Vyc29yXzEiLCJkYl8xIiwiZ3JpZGZzXzEiLCJkb3dubG9hZF8xIiwidXBsb2FkXzEiLCJtb25nb19jbGllbnRfMSIsIm1vbmdvX3R5cGVzXzEiLCJzZXNzaW9uc18xIiwiYnNvbl8xIiwiYnNvbl8yIiwiY29tbW9uXzEiLCJjaGFuZ2Vfc3RyZWFtX2N1cnNvcl8xIiwiZXJyb3JfMSIsImNvbW1vbl8yIiwiZ3NzYXBpXzEiLCJwcm92aWRlcnNfMSIsImNvbXByZXNzaW9uXzEiLCJhYnN0cmFjdF9jdXJzb3JfMiIsImRlcHNfMSIsImVycm9yXzIiLCJleHBsYWluXzEiLCJtb25nb19jbGllbnRfMiIsImZpbmRfYW5kX21vZGlmeV8xIiwic2V0X3Byb2ZpbGluZ19sZXZlbF8xIiwicmVhZF9jb25jZXJuXzEiLCJyZWFkX3ByZWZlcmVuY2VfMSIsImNvbW1vbl8zIiwicmVhZF9jb25jZXJuXzIiLCJyZWFkX3ByZWZlcmVuY2VfMiIsIndyaXRlX2NvbmNlcm5fMSIsImNvbW1hbmRfbW9uaXRvcmluZ19ldmVudHNfMSIsImNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMSIsImV2ZW50c18xIiwic3J2X3BvbGxpbmdfMSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/mongo_client.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/mongo_client.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongoClient = exports.ServerApiVersion = void 0;\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst bson_1 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst change_stream_1 = __webpack_require__(/*! ./change_stream */ \"(ssr)/./node_modules/mongodb/lib/change_stream.js\");\nconst mongo_credentials_1 = __webpack_require__(/*! ./cmap/auth/mongo_credentials */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongo_credentials.js\");\nconst providers_1 = __webpack_require__(/*! ./cmap/auth/providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\nconst connection_string_1 = __webpack_require__(/*! ./connection_string */ \"(ssr)/./node_modules/mongodb/lib/connection_string.js\");\nconst constants_1 = __webpack_require__(/*! ./constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst db_1 = __webpack_require__(/*! ./db */ \"(ssr)/./node_modules/mongodb/lib/db.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_logger_1 = __webpack_require__(/*! ./mongo_logger */ \"(ssr)/./node_modules/mongodb/lib/mongo_logger.js\");\nconst mongo_types_1 = __webpack_require__(/*! ./mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst server_selection_1 = __webpack_require__(/*! ./sdam/server_selection */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_selection.js\");\nconst topology_1 = __webpack_require__(/*! ./sdam/topology */ \"(ssr)/./node_modules/mongodb/lib/sdam/topology.js\");\nconst sessions_1 = __webpack_require__(/*! ./sessions */ \"(ssr)/./node_modules/mongodb/lib/sessions.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\n/** @public */ exports.ServerApiVersion = Object.freeze({\n    v1: \"1\"\n});\n/** @internal */ const kOptions = Symbol(\"options\");\n/**\n * The **MongoClient** class is a class that allows for making Connections to MongoDB.\n * @public\n *\n * @remarks\n * The programmatically provided options take precedence over the URI options.\n *\n * @example\n * ```ts\n * import { MongoClient } from 'mongodb';\n *\n * // Enable command monitoring for debugging\n * const client = new MongoClient('mongodb://localhost:27017', { monitorCommands: true });\n *\n * client.on('commandStarted', started => console.log(started));\n * client.db().collection('pets');\n * await client.insertOne({ name: 'spot', kind: 'dog' });\n * ```\n */ class MongoClient extends mongo_types_1.TypedEventEmitter {\n    constructor(url, options){\n        super();\n        this[kOptions] = (0, connection_string_1.parseOptions)(url, this, options);\n        this.mongoLogger = new mongo_logger_1.MongoLogger(this[kOptions].mongoLoggerOptions);\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const client = this;\n        // The internal state\n        this.s = {\n            url,\n            bsonOptions: (0, bson_1.resolveBSONOptions)(this[kOptions]),\n            namespace: (0, utils_1.ns)(\"admin\"),\n            hasBeenClosed: false,\n            sessionPool: new sessions_1.ServerSessionPool(this),\n            activeSessions: new Set(),\n            get options () {\n                return client[kOptions];\n            },\n            get readConcern () {\n                return client[kOptions].readConcern;\n            },\n            get writeConcern () {\n                return client[kOptions].writeConcern;\n            },\n            get readPreference () {\n                return client[kOptions].readPreference;\n            },\n            get isMongoClient () {\n                return true;\n            }\n        };\n    }\n    /** @see MongoOptions */ get options() {\n        return Object.freeze({\n            ...this[kOptions]\n        });\n    }\n    get serverApi() {\n        return this[kOptions].serverApi && Object.freeze({\n            ...this[kOptions].serverApi\n        });\n    }\n    /**\n     * Intended for APM use only\n     * @internal\n     */ get monitorCommands() {\n        return this[kOptions].monitorCommands;\n    }\n    set monitorCommands(value) {\n        this[kOptions].monitorCommands = value;\n    }\n    /**\n     * @deprecated This method will be removed in the next major version.\n     */ get autoEncrypter() {\n        return this[kOptions].autoEncrypter;\n    }\n    get readConcern() {\n        return this.s.readConcern;\n    }\n    get writeConcern() {\n        return this.s.writeConcern;\n    }\n    get readPreference() {\n        return this.s.readPreference;\n    }\n    get bsonOptions() {\n        return this.s.bsonOptions;\n    }\n    /**\n     * Connect to MongoDB using a url\n     *\n     * @see docs.mongodb.org/manual/reference/connection-string/\n     */ async connect() {\n        if (this.connectionLock) {\n            return this.connectionLock;\n        }\n        try {\n            this.connectionLock = this._connect();\n            await this.connectionLock;\n        } finally{\n            // release\n            this.connectionLock = undefined;\n        }\n        return this;\n    }\n    /**\n     * Create a topology to open the connection, must be locked to avoid topology leaks in concurrency scenario.\n     * Locking is enforced by the connect method.\n     *\n     * @internal\n     */ async _connect() {\n        if (this.topology && this.topology.isConnected()) {\n            return this;\n        }\n        const options = this[kOptions];\n        if (typeof options.srvHost === \"string\") {\n            const hosts = await (0, connection_string_1.resolveSRVRecord)(options);\n            for (const [index, host] of hosts.entries()){\n                options.hosts[index] = host;\n            }\n        }\n        // It is important to perform validation of hosts AFTER SRV resolution, to check the real hostname,\n        // but BEFORE we even attempt connecting with a potentially not allowed hostname\n        if (options.credentials?.mechanism === providers_1.AuthMechanism.MONGODB_OIDC) {\n            const allowedHosts = options.credentials?.mechanismProperties?.ALLOWED_HOSTS || mongo_credentials_1.DEFAULT_ALLOWED_HOSTS;\n            const isServiceAuth = !!options.credentials?.mechanismProperties?.PROVIDER_NAME;\n            if (!isServiceAuth) {\n                for (const host of options.hosts){\n                    if (!(0, utils_1.hostMatchesWildcards)(host.toHostPort().host, allowedHosts)) {\n                        throw new error_1.MongoInvalidArgumentError(`Host '${host}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${allowedHosts.join(\",\")}'`);\n                    }\n                }\n            }\n        }\n        this.topology = new topology_1.Topology(this, options.hosts, options);\n        // Events can be emitted before initialization is complete so we have to\n        // save the reference to the topology on the client ASAP if the event handlers need to access it\n        this.topology.once(topology_1.Topology.OPEN, ()=>this.emit(\"open\", this));\n        for (const event of constants_1.MONGO_CLIENT_EVENTS){\n            this.topology.on(event, (...args)=>this.emit(event, ...args));\n        }\n        const topologyConnect = async ()=>{\n            try {\n                await (0, util_1.promisify)((callback)=>this.topology?.connect(options, callback))();\n            } catch (error) {\n                this.topology?.close({\n                    force: true\n                });\n                throw error;\n            }\n        };\n        if (this.autoEncrypter) {\n            const initAutoEncrypter = (0, util_1.promisify)((callback)=>this.autoEncrypter?.init(callback));\n            await initAutoEncrypter();\n            await topologyConnect();\n            await options.encrypter.connectInternalClient();\n        } else {\n            await topologyConnect();\n        }\n        return this;\n    }\n    /**\n     * Close the client and its underlying connections\n     *\n     * @param force - Force close, emitting no events\n     */ async close(force = false) {\n        // There's no way to set hasBeenClosed back to false\n        Object.defineProperty(this.s, \"hasBeenClosed\", {\n            value: true,\n            enumerable: true,\n            configurable: false,\n            writable: false\n        });\n        const activeSessionEnds = Array.from(this.s.activeSessions, (session)=>session.endSession());\n        this.s.activeSessions.clear();\n        await Promise.all(activeSessionEnds);\n        if (this.topology == null) {\n            return;\n        }\n        // If we would attempt to select a server and get nothing back we short circuit\n        // to avoid the server selection timeout.\n        const selector = (0, server_selection_1.readPreferenceServerSelector)(read_preference_1.ReadPreference.primaryPreferred);\n        const topologyDescription = this.topology.description;\n        const serverDescriptions = Array.from(topologyDescription.servers.values());\n        const servers = selector(topologyDescription, serverDescriptions);\n        if (servers.length !== 0) {\n            const endSessions = Array.from(this.s.sessionPool.sessions, ({ id })=>id);\n            if (endSessions.length !== 0) {\n                await this.db(\"admin\").command({\n                    endSessions\n                }, {\n                    readPreference: read_preference_1.ReadPreference.primaryPreferred,\n                    noResponse: true\n                }).catch(()=>null); // outcome does not matter\n            }\n        }\n        // clear out references to old topology\n        const topology = this.topology;\n        this.topology = undefined;\n        await new Promise((resolve, reject)=>{\n            topology.close({\n                force\n            }, (error)=>{\n                if (error) return reject(error);\n                const { encrypter } = this[kOptions];\n                if (encrypter) {\n                    return encrypter.close(this, force, (error)=>{\n                        if (error) return reject(error);\n                        resolve();\n                    });\n                }\n                resolve();\n            });\n        });\n    }\n    /**\n     * Create a new Db instance sharing the current socket connections.\n     *\n     * @param dbName - The name of the database we want to use. If not provided, use database name from connection string.\n     * @param options - Optional settings for Db construction\n     */ db(dbName, options) {\n        options = options ?? {};\n        // Default to db from connection string if not provided\n        if (!dbName) {\n            dbName = this.options.dbName;\n        }\n        // Copy the options and add out internal override of the not shared flag\n        const finalOptions = Object.assign({}, this[kOptions], options);\n        // Return the db object\n        const db = new db_1.Db(this, dbName, finalOptions);\n        // Return the database\n        return db;\n    }\n    /**\n     * Connect to MongoDB using a url\n     *\n     * @remarks\n     * The programmatically provided options take precedence over the URI options.\n     *\n     * @see https://www.mongodb.com/docs/manual/reference/connection-string/\n     */ static async connect(url, options) {\n        const client = new this(url, options);\n        return client.connect();\n    }\n    /** Starts a new session on the server */ startSession(options) {\n        const session = new sessions_1.ClientSession(this, this.s.sessionPool, {\n            explicit: true,\n            ...options\n        }, this[kOptions]);\n        this.s.activeSessions.add(session);\n        session.once(\"ended\", ()=>{\n            this.s.activeSessions.delete(session);\n        });\n        return session;\n    }\n    async withSession(optionsOrOperation, callback) {\n        const options = {\n            // Always define an owner\n            owner: Symbol(),\n            // If it's an object inherit the options\n            ...typeof optionsOrOperation === \"object\" ? optionsOrOperation : {}\n        };\n        const withSessionCallback = typeof optionsOrOperation === \"function\" ? optionsOrOperation : callback;\n        if (withSessionCallback == null) {\n            throw new error_1.MongoInvalidArgumentError(\"Missing required callback parameter\");\n        }\n        const session = this.startSession(options);\n        try {\n            await withSessionCallback(session);\n        } finally{\n            try {\n                await session.endSession();\n            } catch  {\n            // We are not concerned with errors from endSession()\n            }\n        }\n    }\n    /**\n     * Create a new Change Stream, watching for new changes (insertions, updates,\n     * replacements, deletions, and invalidations) in this cluster. Will ignore all\n     * changes to system collections, as well as the local, admin, and config databases.\n     *\n     * @remarks\n     * watch() accepts two generic arguments for distinct use cases:\n     * - The first is to provide the schema that may be defined for all the data within the current cluster\n     * - The second is to override the shape of the change stream document entirely, if it is not provided the type will default to ChangeStreamDocument of the first argument\n     *\n     * @param pipeline - An array of {@link https://www.mongodb.com/docs/manual/reference/operator/aggregation-pipeline/|aggregation pipeline stages} through which to pass change stream documents. This allows for filtering (using $match) and manipulating the change stream documents.\n     * @param options - Optional settings for the command\n     * @typeParam TSchema - Type of the data being detected by the change stream\n     * @typeParam TChange - Type of the whole change stream document emitted\n     */ watch(pipeline = [], options = {}) {\n        // Allow optionally not specifying a pipeline\n        if (!Array.isArray(pipeline)) {\n            options = pipeline;\n            pipeline = [];\n        }\n        return new change_stream_1.ChangeStream(this, pipeline, (0, utils_1.resolveOptions)(this, options));\n    }\n}\nexports.MongoClient = MongoClient; //# sourceMappingURL=mongo_client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvbW9uZ29fY2xpZW50LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxtQkFBbUIsR0FBR0Esd0JBQXdCLEdBQUcsS0FBSztBQUN0RCxNQUFNSSxTQUFTQyxtQkFBT0EsQ0FBQyxrQkFBTTtBQUM3QixNQUFNQyxTQUFTRCxtQkFBT0EsQ0FBQyx3REFBUTtBQUMvQixNQUFNRSxrQkFBa0JGLG1CQUFPQSxDQUFDLDBFQUFpQjtBQUNqRCxNQUFNRyxzQkFBc0JILG1CQUFPQSxDQUFDLHNHQUErQjtBQUNuRSxNQUFNSSxjQUFjSixtQkFBT0EsQ0FBQyxzRkFBdUI7QUFDbkQsTUFBTUssc0JBQXNCTCxtQkFBT0EsQ0FBQyxrRkFBcUI7QUFDekQsTUFBTU0sY0FBY04sbUJBQU9BLENBQUMsa0VBQWE7QUFDekMsTUFBTU8sT0FBT1AsbUJBQU9BLENBQUMsb0RBQU07QUFDM0IsTUFBTVEsVUFBVVIsbUJBQU9BLENBQUMsMERBQVM7QUFDakMsTUFBTVMsaUJBQWlCVCxtQkFBT0EsQ0FBQyx3RUFBZ0I7QUFDL0MsTUFBTVUsZ0JBQWdCVixtQkFBT0EsQ0FBQyxzRUFBZTtBQUM3QyxNQUFNVyxvQkFBb0JYLG1CQUFPQSxDQUFDLDhFQUFtQjtBQUNyRCxNQUFNWSxxQkFBcUJaLG1CQUFPQSxDQUFDLDBGQUF5QjtBQUM1RCxNQUFNYSxhQUFhYixtQkFBT0EsQ0FBQywwRUFBaUI7QUFDNUMsTUFBTWMsYUFBYWQsbUJBQU9BLENBQUMsZ0VBQVk7QUFDdkMsTUFBTWUsVUFBVWYsbUJBQU9BLENBQUMsMERBQVM7QUFDakMsWUFBWSxHQUNaTCx3QkFBd0IsR0FBR0YsT0FBT3VCLE1BQU0sQ0FBQztJQUNyQ0MsSUFBSTtBQUNSO0FBQ0EsY0FBYyxHQUNkLE1BQU1DLFdBQVdDLE9BQU87QUFDeEI7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQWtCQyxHQUNELE1BQU10Qixv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SUFBSSxDQUFDLFNBQVM7WUFDbEIsSUFBSSxDQUFDNUMsQ0FBQyxDQUFDUSxjQUFjLENBQUMyRixNQUFNLENBQUNoQztRQUNqQztRQUNBLE9BQU9BO0lBQ1g7SUFDQSxNQUFNaUMsWUFBWUMsa0JBQWtCLEVBQUVoRCxRQUFRLEVBQUU7UUFDNUMsTUFBTTNELFVBQVU7WUFDWix5QkFBeUI7WUFDekI0RyxPQUFPaEg7WUFDUCx3Q0FBd0M7WUFDeEMsR0FBSSxPQUFPK0csdUJBQXVCLFdBQVdBLHFCQUFxQixDQUFDLENBQUM7UUFDeEU7UUFDQSxNQUFNRSxzQkFBc0IsT0FBT0YsdUJBQXVCLGFBQWFBLHFCQUFxQmhEO1FBQzVGLElBQUlrRCx1QkFBdUIsTUFBTTtZQUM3QixNQUFNLElBQUk1SCxRQUFROEQseUJBQXlCLENBQUM7UUFDaEQ7UUFDQSxNQUFNMEIsVUFBVSxJQUFJLENBQUM0QixZQUFZLENBQUNyRztRQUNsQyxJQUFJO1lBQ0EsTUFBTTZHLG9CQUFvQnBDO1FBQzlCLFNBQ1E7WUFDSixJQUFJO2dCQUNBLE1BQU1BLFFBQVFDLFVBQVU7WUFDNUIsRUFDQSxPQUFNO1lBQ0YscURBQXFEO1lBQ3pEO1FBQ0o7SUFDSjtJQUNBOzs7Ozs7Ozs7Ozs7OztLQWNDLEdBQ0RvQyxNQUFNQyxXQUFXLEVBQUUsRUFBRS9HLFVBQVUsQ0FBQyxDQUFDLEVBQUU7UUFDL0IsNkNBQTZDO1FBQzdDLElBQUksQ0FBQ3VFLE1BQU15QyxPQUFPLENBQUNELFdBQVc7WUFDMUIvRyxVQUFVK0c7WUFDVkEsV0FBVyxFQUFFO1FBQ2pCO1FBQ0EsT0FBTyxJQUFJcEksZ0JBQWdCc0ksWUFBWSxDQUFDLElBQUksRUFBRUYsVUFBVSxDQUFDLEdBQUd2SCxRQUFRMEgsY0FBYyxFQUFFLElBQUksRUFBRWxIO0lBQzlGO0FBQ0o7QUFDQTVCLG1CQUFtQixHQUFHRSxhQUN0Qix3Q0FBd0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvbW9uZ29fY2xpZW50LmpzPzZkN2YiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk1vbmdvQ2xpZW50ID0gZXhwb3J0cy5TZXJ2ZXJBcGlWZXJzaW9uID0gdm9pZCAwO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcInV0aWxcIik7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi9ic29uXCIpO1xuY29uc3QgY2hhbmdlX3N0cmVhbV8xID0gcmVxdWlyZShcIi4vY2hhbmdlX3N0cmVhbVwiKTtcbmNvbnN0IG1vbmdvX2NyZWRlbnRpYWxzXzEgPSByZXF1aXJlKFwiLi9jbWFwL2F1dGgvbW9uZ29fY3JlZGVudGlhbHNcIik7XG5jb25zdCBwcm92aWRlcnNfMSA9IHJlcXVpcmUoXCIuL2NtYXAvYXV0aC9wcm92aWRlcnNcIik7XG5jb25zdCBjb25uZWN0aW9uX3N0cmluZ18xID0gcmVxdWlyZShcIi4vY29ubmVjdGlvbl9zdHJpbmdcIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbmNvbnN0IGRiXzEgPSByZXF1aXJlKFwiLi9kYlwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi9lcnJvclwiKTtcbmNvbnN0IG1vbmdvX2xvZ2dlcl8xID0gcmVxdWlyZShcIi4vbW9uZ29fbG9nZ2VyXCIpO1xuY29uc3QgbW9uZ29fdHlwZXNfMSA9IHJlcXVpcmUoXCIuL21vbmdvX3R5cGVzXCIpO1xuY29uc3QgcmVhZF9wcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi9yZWFkX3ByZWZlcmVuY2VcIik7XG5jb25zdCBzZXJ2ZXJfc2VsZWN0aW9uXzEgPSByZXF1aXJlKFwiLi9zZGFtL3NlcnZlcl9zZWxlY3Rpb25cIik7XG5jb25zdCB0b3BvbG9neV8xID0gcmVxdWlyZShcIi4vc2RhbS90b3BvbG9neVwiKTtcbmNvbnN0IHNlc3Npb25zXzEgPSByZXF1aXJlKFwiLi9zZXNzaW9uc1wiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi91dGlsc1wiKTtcbi8qKiBAcHVibGljICovXG5leHBvcnRzLlNlcnZlckFwaVZlcnNpb24gPSBPYmplY3QuZnJlZXplKHtcbiAgICB2MTogJzEnXG59KTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtPcHRpb25zID0gU3ltYm9sKCdvcHRpb25zJyk7XG4vKipcbiAqIFRoZSAqKk1vbmdvQ2xpZW50KiogY2xhc3MgaXMgYSBjbGFzcyB0aGF0IGFsbG93cyBmb3IgbWFraW5nIENvbm5lY3Rpb25zIHRvIE1vbmdvREIuXG4gKiBAcHVibGljXG4gKlxuICogQHJlbWFya3NcbiAqIFRoZSBwcm9ncmFtbWF0aWNhbGx5IHByb3ZpZGVkIG9wdGlvbnMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgdGhlIFVSSSBvcHRpb25zLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tICdtb25nb2RiJztcbiAqXG4gKiAvLyBFbmFibGUgY29tbWFuZCBtb25pdG9yaW5nIGZvciBkZWJ1Z2dpbmdcbiAqIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCgnbW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNycsIHsgbW9uaXRvckNvbW1hbmRzOiB0cnVlIH0pO1xuICpcbiAqIGNsaWVudC5vbignY29tbWFuZFN0YXJ0ZWQnLCBzdGFydGVkID0+IGNvbnNvbGUubG9nKHN0YXJ0ZWQpKTtcbiAqIGNsaWVudC5kYigpLmNvbGxlY3Rpb24oJ3BldHMnKTtcbiAqIGF3YWl0IGNsaWVudC5pbnNlcnRPbmUoeyBuYW1lOiAnc3BvdCcsIGtpbmQ6ICdkb2cnIH0pO1xuICogYGBgXG4gKi9cbmNsYXNzIE1vbmdvQ2xpZW50IGV4dGVuZHMgbW9uZ29fdHlwZXNfMS5UeXBlZEV2ZW50RW1pdHRlciB7XG4gICAgY29uc3RydWN0b3IodXJsLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXNba09wdGlvbnNdID0gKDAsIGNvbm5lY3Rpb25fc3RyaW5nXzEucGFyc2VPcHRpb25zKSh1cmwsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm1vbmdvTG9nZ2VyID0gbmV3IG1vbmdvX2xvZ2dlcl8xLk1vbmdvTG9nZ2VyKHRoaXNba09wdGlvbnNdLm1vbmdvTG9nZ2VyT3B0aW9ucyk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICBjb25zdCBjbGllbnQgPSB0aGlzO1xuICAgICAgICAvLyBUaGUgaW50ZXJuYWwgc3RhdGVcbiAgICAgICAgdGhpcy5zID0ge1xuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgYnNvbk9wdGlvbnM6ICgwLCBic29uXzEucmVzb2x2ZUJTT05PcHRpb25zKSh0aGlzW2tPcHRpb25zXSksXG4gICAgICAgICAgICBuYW1lc3BhY2U6ICgwLCB1dGlsc18xLm5zKSgnYWRtaW4nKSxcbiAgICAgICAgICAgIGhhc0JlZW5DbG9zZWQ6IGZhbHNlLFxuICAgICAgICAgICAgc2Vzc2lvblBvb2w6IG5ldyBzZXNzaW9uc18xLlNlcnZlclNlc3Npb25Qb29sKHRoaXMpLFxuICAgICAgICAgICAgYWN0aXZlU2Vzc2lvbnM6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGllbnRba09wdGlvbnNdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldCByZWFkQ29uY2VybigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xpZW50W2tPcHRpb25zXS5yZWFkQ29uY2VybjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXQgd3JpdGVDb25jZXJuKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGllbnRba09wdGlvbnNdLndyaXRlQ29uY2VybjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXQgcmVhZFByZWZlcmVuY2UoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsaWVudFtrT3B0aW9uc10ucmVhZFByZWZlcmVuY2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IGlzTW9uZ29DbGllbnQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKiBAc2VlIE1vbmdvT3B0aW9ucyAqL1xuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZSh7IC4uLnRoaXNba09wdGlvbnNdIH0pO1xuICAgIH1cbiAgICBnZXQgc2VydmVyQXBpKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trT3B0aW9uc10uc2VydmVyQXBpICYmIE9iamVjdC5mcmVlemUoeyAuLi50aGlzW2tPcHRpb25zXS5zZXJ2ZXJBcGkgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVuZGVkIGZvciBBUE0gdXNlIG9ubHlcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgbW9uaXRvckNvbW1hbmRzKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trT3B0aW9uc10ubW9uaXRvckNvbW1hbmRzO1xuICAgIH1cbiAgICBzZXQgbW9uaXRvckNvbW1hbmRzKHZhbHVlKSB7XG4gICAgICAgIHRoaXNba09wdGlvbnNdLm1vbml0b3JDb21tYW5kcyA9IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBUaGlzIG1ldGhvZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgYXV0b0VuY3J5cHRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba09wdGlvbnNdLmF1dG9FbmNyeXB0ZXI7XG4gICAgfVxuICAgIGdldCByZWFkQ29uY2VybigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5yZWFkQ29uY2VybjtcbiAgICB9XG4gICAgZ2V0IHdyaXRlQ29uY2VybigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy53cml0ZUNvbmNlcm47XG4gICAgfVxuICAgIGdldCByZWFkUHJlZmVyZW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5yZWFkUHJlZmVyZW5jZTtcbiAgICB9XG4gICAgZ2V0IGJzb25PcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLmJzb25PcHRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25uZWN0IHRvIE1vbmdvREIgdXNpbmcgYSB1cmxcbiAgICAgKlxuICAgICAqIEBzZWUgZG9jcy5tb25nb2RiLm9yZy9tYW51YWwvcmVmZXJlbmNlL2Nvbm5lY3Rpb24tc3RyaW5nL1xuICAgICAqL1xuICAgIGFzeW5jIGNvbm5lY3QoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25Mb2NrKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uTG9jaztcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uTG9jayA9IHRoaXMuX2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY29ubmVjdGlvbkxvY2s7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAvLyByZWxlYXNlXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25Mb2NrID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSB0b3BvbG9neSB0byBvcGVuIHRoZSBjb25uZWN0aW9uLCBtdXN0IGJlIGxvY2tlZCB0byBhdm9pZCB0b3BvbG9neSBsZWFrcyBpbiBjb25jdXJyZW5jeSBzY2VuYXJpby5cbiAgICAgKiBMb2NraW5nIGlzIGVuZm9yY2VkIGJ5IHRoZSBjb25uZWN0IG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFzeW5jIF9jb25uZWN0KCkge1xuICAgICAgICBpZiAodGhpcy50b3BvbG9neSAmJiB0aGlzLnRvcG9sb2d5LmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzW2tPcHRpb25zXTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnNydkhvc3QgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjb25zdCBob3N0cyA9IGF3YWl0ICgwLCBjb25uZWN0aW9uX3N0cmluZ18xLnJlc29sdmVTUlZSZWNvcmQpKG9wdGlvbnMpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBbaW5kZXgsIGhvc3RdIG9mIGhvc3RzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuaG9zdHNbaW5kZXhdID0gaG9zdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJdCBpcyBpbXBvcnRhbnQgdG8gcGVyZm9ybSB2YWxpZGF0aW9uIG9mIGhvc3RzIEFGVEVSIFNSViByZXNvbHV0aW9uLCB0byBjaGVjayB0aGUgcmVhbCBob3N0bmFtZSxcbiAgICAgICAgLy8gYnV0IEJFRk9SRSB3ZSBldmVuIGF0dGVtcHQgY29ubmVjdGluZyB3aXRoIGEgcG90ZW50aWFsbHkgbm90IGFsbG93ZWQgaG9zdG5hbWVcbiAgICAgICAgaWYgKG9wdGlvbnMuY3JlZGVudGlhbHM/Lm1lY2hhbmlzbSA9PT0gcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX09JREMpIHtcbiAgICAgICAgICAgIGNvbnN0IGFsbG93ZWRIb3N0cyA9IG9wdGlvbnMuY3JlZGVudGlhbHM/Lm1lY2hhbmlzbVByb3BlcnRpZXM/LkFMTE9XRURfSE9TVFMgfHwgbW9uZ29fY3JlZGVudGlhbHNfMS5ERUZBVUxUX0FMTE9XRURfSE9TVFM7XG4gICAgICAgICAgICBjb25zdCBpc1NlcnZpY2VBdXRoID0gISFvcHRpb25zLmNyZWRlbnRpYWxzPy5tZWNoYW5pc21Qcm9wZXJ0aWVzPy5QUk9WSURFUl9OQU1FO1xuICAgICAgICAgICAgaWYgKCFpc1NlcnZpY2VBdXRoKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBob3N0IG9mIG9wdGlvbnMuaG9zdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoMCwgdXRpbHNfMS5ob3N0TWF0Y2hlc1dpbGRjYXJkcykoaG9zdC50b0hvc3RQb3J0KCkuaG9zdCwgYWxsb3dlZEhvc3RzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgSG9zdCAnJHtob3N0fScgaXMgbm90IHZhbGlkIGZvciBPSURDIGF1dGhlbnRpY2F0aW9uIHdpdGggQUxMT1dFRF9IT1NUUyBvZiAnJHthbGxvd2VkSG9zdHMuam9pbignLCcpfSdgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvcG9sb2d5ID0gbmV3IHRvcG9sb2d5XzEuVG9wb2xvZ3kodGhpcywgb3B0aW9ucy5ob3N0cywgb3B0aW9ucyk7XG4gICAgICAgIC8vIEV2ZW50cyBjYW4gYmUgZW1pdHRlZCBiZWZvcmUgaW5pdGlhbGl6YXRpb24gaXMgY29tcGxldGUgc28gd2UgaGF2ZSB0b1xuICAgICAgICAvLyBzYXZlIHRoZSByZWZlcmVuY2UgdG8gdGhlIHRvcG9sb2d5IG9uIHRoZSBjbGllbnQgQVNBUCBpZiB0aGUgZXZlbnQgaGFuZGxlcnMgbmVlZCB0byBhY2Nlc3MgaXRcbiAgICAgICAgdGhpcy50b3BvbG9neS5vbmNlKHRvcG9sb2d5XzEuVG9wb2xvZ3kuT1BFTiwgKCkgPT4gdGhpcy5lbWl0KCdvcGVuJywgdGhpcykpO1xuICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIGNvbnN0YW50c18xLk1PTkdPX0NMSUVOVF9FVkVOVFMpIHtcbiAgICAgICAgICAgIHRoaXMudG9wb2xvZ3kub24oZXZlbnQsICguLi5hcmdzKSA9PiB0aGlzLmVtaXQoZXZlbnQsIC4uLmFyZ3MpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b3BvbG9neUNvbm5lY3QgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0ICgwLCB1dGlsXzEucHJvbWlzaWZ5KShjYWxsYmFjayA9PiB0aGlzLnRvcG9sb2d5Py5jb25uZWN0KG9wdGlvbnMsIGNhbGxiYWNrKSkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMudG9wb2xvZ3k/LmNsb3NlKHsgZm9yY2U6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmF1dG9FbmNyeXB0ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGluaXRBdXRvRW5jcnlwdGVyID0gKDAsIHV0aWxfMS5wcm9taXNpZnkpKGNhbGxiYWNrID0+IHRoaXMuYXV0b0VuY3J5cHRlcj8uaW5pdChjYWxsYmFjaykpO1xuICAgICAgICAgICAgYXdhaXQgaW5pdEF1dG9FbmNyeXB0ZXIoKTtcbiAgICAgICAgICAgIGF3YWl0IHRvcG9sb2d5Q29ubmVjdCgpO1xuICAgICAgICAgICAgYXdhaXQgb3B0aW9ucy5lbmNyeXB0ZXIuY29ubmVjdEludGVybmFsQ2xpZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0b3BvbG9neUNvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIGNsaWVudCBhbmQgaXRzIHVuZGVybHlpbmcgY29ubmVjdGlvbnNcbiAgICAgKlxuICAgICAqIEBwYXJhbSBmb3JjZSAtIEZvcmNlIGNsb3NlLCBlbWl0dGluZyBubyBldmVudHNcbiAgICAgKi9cbiAgICBhc3luYyBjbG9zZShmb3JjZSA9IGZhbHNlKSB7XG4gICAgICAgIC8vIFRoZXJlJ3Mgbm8gd2F5IHRvIHNldCBoYXNCZWVuQ2xvc2VkIGJhY2sgdG8gZmFsc2VcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMucywgJ2hhc0JlZW5DbG9zZWQnLCB7XG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgd3JpdGFibGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBhY3RpdmVTZXNzaW9uRW5kcyA9IEFycmF5LmZyb20odGhpcy5zLmFjdGl2ZVNlc3Npb25zLCBzZXNzaW9uID0+IHNlc3Npb24uZW5kU2Vzc2lvbigpKTtcbiAgICAgICAgdGhpcy5zLmFjdGl2ZVNlc3Npb25zLmNsZWFyKCk7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFjdGl2ZVNlc3Npb25FbmRzKTtcbiAgICAgICAgaWYgKHRoaXMudG9wb2xvZ3kgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHdlIHdvdWxkIGF0dGVtcHQgdG8gc2VsZWN0IGEgc2VydmVyIGFuZCBnZXQgbm90aGluZyBiYWNrIHdlIHNob3J0IGNpcmN1aXRcbiAgICAgICAgLy8gdG8gYXZvaWQgdGhlIHNlcnZlciBzZWxlY3Rpb24gdGltZW91dC5cbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSAoMCwgc2VydmVyX3NlbGVjdGlvbl8xLnJlYWRQcmVmZXJlbmNlU2VydmVyU2VsZWN0b3IpKHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLnByaW1hcnlQcmVmZXJyZWQpO1xuICAgICAgICBjb25zdCB0b3BvbG9neURlc2NyaXB0aW9uID0gdGhpcy50b3BvbG9neS5kZXNjcmlwdGlvbjtcbiAgICAgICAgY29uc3Qgc2VydmVyRGVzY3JpcHRpb25zID0gQXJyYXkuZnJvbSh0b3BvbG9neURlc2NyaXB0aW9uLnNlcnZlcnMudmFsdWVzKCkpO1xuICAgICAgICBjb25zdCBzZXJ2ZXJzID0gc2VsZWN0b3IodG9wb2xvZ3lEZXNjcmlwdGlvbiwgc2VydmVyRGVzY3JpcHRpb25zKTtcbiAgICAgICAgaWYgKHNlcnZlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBlbmRTZXNzaW9ucyA9IEFycmF5LmZyb20odGhpcy5zLnNlc3Npb25Qb29sLnNlc3Npb25zLCAoeyBpZCB9KSA9PiBpZCk7XG4gICAgICAgICAgICBpZiAoZW5kU2Vzc2lvbnMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kYignYWRtaW4nKVxuICAgICAgICAgICAgICAgICAgICAuY29tbWFuZCh7IGVuZFNlc3Npb25zIH0sIHsgcmVhZFByZWZlcmVuY2U6IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLnByaW1hcnlQcmVmZXJyZWQsIG5vUmVzcG9uc2U6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IG51bGwpOyAvLyBvdXRjb21lIGRvZXMgbm90IG1hdHRlclxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGNsZWFyIG91dCByZWZlcmVuY2VzIHRvIG9sZCB0b3BvbG9neVxuICAgICAgICBjb25zdCB0b3BvbG9neSA9IHRoaXMudG9wb2xvZ3k7XG4gICAgICAgIHRoaXMudG9wb2xvZ3kgPSB1bmRlZmluZWQ7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRvcG9sb2d5LmNsb3NlKHsgZm9yY2UgfSwgZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBlbmNyeXB0ZXIgfSA9IHRoaXNba09wdGlvbnNdO1xuICAgICAgICAgICAgICAgIGlmIChlbmNyeXB0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVuY3J5cHRlci5jbG9zZSh0aGlzLCBmb3JjZSwgZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgRGIgaW5zdGFuY2Ugc2hhcmluZyB0aGUgY3VycmVudCBzb2NrZXQgY29ubmVjdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGJOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGRhdGFiYXNlIHdlIHdhbnQgdG8gdXNlLiBJZiBub3QgcHJvdmlkZWQsIHVzZSBkYXRhYmFzZSBuYW1lIGZyb20gY29ubmVjdGlvbiBzdHJpbmcuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgRGIgY29uc3RydWN0aW9uXG4gICAgICovXG4gICAgZGIoZGJOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8/IHt9O1xuICAgICAgICAvLyBEZWZhdWx0IHRvIGRiIGZyb20gY29ubmVjdGlvbiBzdHJpbmcgaWYgbm90IHByb3ZpZGVkXG4gICAgICAgIGlmICghZGJOYW1lKSB7XG4gICAgICAgICAgICBkYk5hbWUgPSB0aGlzLm9wdGlvbnMuZGJOYW1lO1xuICAgICAgICB9XG4gICAgICAgIC8vIENvcHkgdGhlIG9wdGlvbnMgYW5kIGFkZCBvdXQgaW50ZXJuYWwgb3ZlcnJpZGUgb2YgdGhlIG5vdCBzaGFyZWQgZmxhZ1xuICAgICAgICBjb25zdCBmaW5hbE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzW2tPcHRpb25zXSwgb3B0aW9ucyk7XG4gICAgICAgIC8vIFJldHVybiB0aGUgZGIgb2JqZWN0XG4gICAgICAgIGNvbnN0IGRiID0gbmV3IGRiXzEuRGIodGhpcywgZGJOYW1lLCBmaW5hbE9wdGlvbnMpO1xuICAgICAgICAvLyBSZXR1cm4gdGhlIGRhdGFiYXNlXG4gICAgICAgIHJldHVybiBkYjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29ubmVjdCB0byBNb25nb0RCIHVzaW5nIGEgdXJsXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoZSBwcm9ncmFtbWF0aWNhbGx5IHByb3ZpZGVkIG9wdGlvbnMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgdGhlIFVSSSBvcHRpb25zLlxuICAgICAqXG4gICAgICogQHNlZSBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kb2NzL21hbnVhbC9yZWZlcmVuY2UvY29ubmVjdGlvbi1zdHJpbmcvXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGNvbm5lY3QodXJsLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IG5ldyB0aGlzKHVybCwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBjbGllbnQuY29ubmVjdCgpO1xuICAgIH1cbiAgICAvKiogU3RhcnRzIGEgbmV3IHNlc3Npb24gb24gdGhlIHNlcnZlciAqL1xuICAgIHN0YXJ0U2Vzc2lvbihvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBuZXcgc2Vzc2lvbnNfMS5DbGllbnRTZXNzaW9uKHRoaXMsIHRoaXMucy5zZXNzaW9uUG9vbCwgeyBleHBsaWNpdDogdHJ1ZSwgLi4ub3B0aW9ucyB9LCB0aGlzW2tPcHRpb25zXSk7XG4gICAgICAgIHRoaXMucy5hY3RpdmVTZXNzaW9ucy5hZGQoc2Vzc2lvbik7XG4gICAgICAgIHNlc3Npb24ub25jZSgnZW5kZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnMuYWN0aXZlU2Vzc2lvbnMuZGVsZXRlKHNlc3Npb24pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfVxuICAgIGFzeW5jIHdpdGhTZXNzaW9uKG9wdGlvbnNPck9wZXJhdGlvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC8vIEFsd2F5cyBkZWZpbmUgYW4gb3duZXJcbiAgICAgICAgICAgIG93bmVyOiBTeW1ib2woKSxcbiAgICAgICAgICAgIC8vIElmIGl0J3MgYW4gb2JqZWN0IGluaGVyaXQgdGhlIG9wdGlvbnNcbiAgICAgICAgICAgIC4uLih0eXBlb2Ygb3B0aW9uc09yT3BlcmF0aW9uID09PSAnb2JqZWN0JyA/IG9wdGlvbnNPck9wZXJhdGlvbiA6IHt9KVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCB3aXRoU2Vzc2lvbkNhbGxiYWNrID0gdHlwZW9mIG9wdGlvbnNPck9wZXJhdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IG9wdGlvbnNPck9wZXJhdGlvbiA6IGNhbGxiYWNrO1xuICAgICAgICBpZiAod2l0aFNlc3Npb25DYWxsYmFjayA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkIGNhbGxiYWNrIHBhcmFtZXRlcicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnN0YXJ0U2Vzc2lvbihvcHRpb25zKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHdpdGhTZXNzaW9uQ2FsbGJhY2soc2Vzc2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHNlc3Npb24uZW5kU2Vzc2lvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIC8vIFdlIGFyZSBub3QgY29uY2VybmVkIHdpdGggZXJyb3JzIGZyb20gZW5kU2Vzc2lvbigpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IENoYW5nZSBTdHJlYW0sIHdhdGNoaW5nIGZvciBuZXcgY2hhbmdlcyAoaW5zZXJ0aW9ucywgdXBkYXRlcyxcbiAgICAgKiByZXBsYWNlbWVudHMsIGRlbGV0aW9ucywgYW5kIGludmFsaWRhdGlvbnMpIGluIHRoaXMgY2x1c3Rlci4gV2lsbCBpZ25vcmUgYWxsXG4gICAgICogY2hhbmdlcyB0byBzeXN0ZW0gY29sbGVjdGlvbnMsIGFzIHdlbGwgYXMgdGhlIGxvY2FsLCBhZG1pbiwgYW5kIGNvbmZpZyBkYXRhYmFzZXMuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIHdhdGNoKCkgYWNjZXB0cyB0d28gZ2VuZXJpYyBhcmd1bWVudHMgZm9yIGRpc3RpbmN0IHVzZSBjYXNlczpcbiAgICAgKiAtIFRoZSBmaXJzdCBpcyB0byBwcm92aWRlIHRoZSBzY2hlbWEgdGhhdCBtYXkgYmUgZGVmaW5lZCBmb3IgYWxsIHRoZSBkYXRhIHdpdGhpbiB0aGUgY3VycmVudCBjbHVzdGVyXG4gICAgICogLSBUaGUgc2Vjb25kIGlzIHRvIG92ZXJyaWRlIHRoZSBzaGFwZSBvZiB0aGUgY2hhbmdlIHN0cmVhbSBkb2N1bWVudCBlbnRpcmVseSwgaWYgaXQgaXMgbm90IHByb3ZpZGVkIHRoZSB0eXBlIHdpbGwgZGVmYXVsdCB0byBDaGFuZ2VTdHJlYW1Eb2N1bWVudCBvZiB0aGUgZmlyc3QgYXJndW1lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwaXBlbGluZSAtIEFuIGFycmF5IG9mIHtAbGluayBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kb2NzL21hbnVhbC9yZWZlcmVuY2Uvb3BlcmF0b3IvYWdncmVnYXRpb24tcGlwZWxpbmUvfGFnZ3JlZ2F0aW9uIHBpcGVsaW5lIHN0YWdlc30gdGhyb3VnaCB3aGljaCB0byBwYXNzIGNoYW5nZSBzdHJlYW0gZG9jdW1lbnRzLiBUaGlzIGFsbG93cyBmb3IgZmlsdGVyaW5nICh1c2luZyAkbWF0Y2gpIGFuZCBtYW5pcHVsYXRpbmcgdGhlIGNoYW5nZSBzdHJlYW0gZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICogQHR5cGVQYXJhbSBUU2NoZW1hIC0gVHlwZSBvZiB0aGUgZGF0YSBiZWluZyBkZXRlY3RlZCBieSB0aGUgY2hhbmdlIHN0cmVhbVxuICAgICAqIEB0eXBlUGFyYW0gVENoYW5nZSAtIFR5cGUgb2YgdGhlIHdob2xlIGNoYW5nZSBzdHJlYW0gZG9jdW1lbnQgZW1pdHRlZFxuICAgICAqL1xuICAgIHdhdGNoKHBpcGVsaW5lID0gW10sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAvLyBBbGxvdyBvcHRpb25hbGx5IG5vdCBzcGVjaWZ5aW5nIGEgcGlwZWxpbmVcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHBpcGVsaW5lKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHBpcGVsaW5lO1xuICAgICAgICAgICAgcGlwZWxpbmUgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IGNoYW5nZV9zdHJlYW1fMS5DaGFuZ2VTdHJlYW0odGhpcywgcGlwZWxpbmUsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSk7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0NsaWVudCA9IE1vbmdvQ2xpZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9uZ29fY2xpZW50LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk1vbmdvQ2xpZW50IiwiU2VydmVyQXBpVmVyc2lvbiIsInV0aWxfMSIsInJlcXVpcmUiLCJic29uXzEiLCJjaGFuZ2Vfc3RyZWFtXzEiLCJtb25nb19jcmVkZW50aWFsc18xIiwicHJvdmlkZXJzXzEiLCJjb25uZWN0aW9uX3N0cmluZ18xIiwiY29uc3RhbnRzXzEiLCJkYl8xIiwiZXJyb3JfMSIsIm1vbmdvX2xvZ2dlcl8xIiwibW9uZ29fdHlwZXNfMSIsInJlYWRfcHJlZmVyZW5jZV8xIiwic2VydmVyX3NlbGVjdGlvbl8xIiwidG9wb2xvZ3lfMSIsInNlc3Npb25zXzEiLCJ1dGlsc18xIiwiZnJlZXplIiwidjEiLCJrT3B0aW9ucyIsIlN5bWJvbCIsIlR5cGVkRXZlbnRFbWl0dGVyIiwiY29uc3RydWN0b3IiLCJ1cmwiLCJvcHRpb25zIiwicGFyc2VPcHRpb25zIiwibW9uZ29Mb2dnZXIiLCJNb25nb0xvZ2dlciIsIm1vbmdvTG9nZ2VyT3B0aW9ucyIsImNsaWVudCIsInMiLCJic29uT3B0aW9ucyIsInJlc29sdmVCU09OT3B0aW9ucyIsIm5hbWVzcGFjZSIsIm5zIiwiaGFzQmVlbkNsb3NlZCIsInNlc3Npb25Qb29sIiwiU2VydmVyU2Vzc2lvblBvb2wiLCJhY3RpdmVTZXNzaW9ucyIsIlNldCIsInJlYWRDb25jZXJuIiwid3JpdGVDb25jZXJuIiwicmVhZFByZWZlcmVuY2UiLCJpc01vbmdvQ2xpZW50Iiwic2VydmVyQXBpIiwibW9uaXRvckNvbW1hbmRzIiwiYXV0b0VuY3J5cHRlciIsImNvbm5lY3QiLCJjb25uZWN0aW9uTG9jayIsIl9jb25uZWN0IiwidW5kZWZpbmVkIiwidG9wb2xvZ3kiLCJpc0Nvbm5lY3RlZCIsInNydkhvc3QiLCJob3N0cyIsInJlc29sdmVTUlZSZWNvcmQiLCJpbmRleCIsImhvc3QiLCJlbnRyaWVzIiwiY3JlZGVudGlhbHMiLCJtZWNoYW5pc20iLCJBdXRoTWVjaGFuaXNtIiwiTU9OR09EQl9PSURDIiwiYWxsb3dlZEhvc3RzIiwibWVjaGFuaXNtUHJvcGVydGllcyIsIkFMTE9XRURfSE9TVFMiLCJERUZBVUxUX0FMTE9XRURfSE9TVFMiLCJpc1NlcnZpY2VBdXRoIiwiUFJPVklERVJfTkFNRSIsImhvc3RNYXRjaGVzV2lsZGNhcmRzIiwidG9Ib3N0UG9ydCIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJqb2luIiwiVG9wb2xvZ3kiLCJvbmNlIiwiT1BFTiIsImVtaXQiLCJldmVudCIsIk1PTkdPX0NMSUVOVF9FVkVOVFMiLCJvbiIsImFyZ3MiLCJ0b3BvbG9neUNvbm5lY3QiLCJwcm9taXNpZnkiLCJjYWxsYmFjayIsImVycm9yIiwiY2xvc2UiLCJmb3JjZSIsImluaXRBdXRvRW5jcnlwdGVyIiwiaW5pdCIsImVuY3J5cHRlciIsImNvbm5lY3RJbnRlcm5hbENsaWVudCIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImFjdGl2ZVNlc3Npb25FbmRzIiwiQXJyYXkiLCJmcm9tIiwic2Vzc2lvbiIsImVuZFNlc3Npb24iLCJjbGVhciIsIlByb21pc2UiLCJhbGwiLCJzZWxlY3RvciIsInJlYWRQcmVmZXJlbmNlU2VydmVyU2VsZWN0b3IiLCJSZWFkUHJlZmVyZW5jZSIsInByaW1hcnlQcmVmZXJyZWQiLCJ0b3BvbG9neURlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb24iLCJzZXJ2ZXJEZXNjcmlwdGlvbnMiLCJzZXJ2ZXJzIiwidmFsdWVzIiwibGVuZ3RoIiwiZW5kU2Vzc2lvbnMiLCJzZXNzaW9ucyIsImlkIiwiZGIiLCJjb21tYW5kIiwibm9SZXNwb25zZSIsImNhdGNoIiwicmVzb2x2ZSIsInJlamVjdCIsImRiTmFtZSIsImZpbmFsT3B0aW9ucyIsImFzc2lnbiIsIkRiIiwic3RhcnRTZXNzaW9uIiwiQ2xpZW50U2Vzc2lvbiIsImV4cGxpY2l0IiwiYWRkIiwiZGVsZXRlIiwid2l0aFNlc3Npb24iLCJvcHRpb25zT3JPcGVyYXRpb24iLCJvd25lciIsIndpdGhTZXNzaW9uQ2FsbGJhY2siLCJ3YXRjaCIsInBpcGVsaW5lIiwiaXNBcnJheSIsIkNoYW5nZVN0cmVhbSIsInJlc29sdmVPcHRpb25zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/mongo_client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/mongo_logger.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/mongo_logger.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongoLogger = exports.stringifyWithMaxLen = exports.createStdioLogger = exports.MongoLoggableComponent = exports.SEVERITY_LEVEL_MAP = exports.DEFAULT_MAX_DOCUMENT_LENGTH = exports.SeverityLevel = void 0;\nconst bson_1 = __webpack_require__(/*! bson */ \"(ssr)/./node_modules/bson/lib/bson.cjs\");\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst constants_1 = __webpack_require__(/*! ./constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\n/** @internal */ exports.SeverityLevel = Object.freeze({\n    EMERGENCY: \"emergency\",\n    ALERT: \"alert\",\n    CRITICAL: \"critical\",\n    ERROR: \"error\",\n    WARNING: \"warn\",\n    NOTICE: \"notice\",\n    INFORMATIONAL: \"info\",\n    DEBUG: \"debug\",\n    TRACE: \"trace\",\n    OFF: \"off\"\n});\n/** @internal */ exports.DEFAULT_MAX_DOCUMENT_LENGTH = 1000;\n/** @internal */ class SeverityLevelMap extends Map {\n    constructor(entries){\n        const newEntries = [];\n        for (const [level, value] of entries){\n            newEntries.push([\n                value,\n                level\n            ]);\n        }\n        newEntries.push(...entries);\n        super(newEntries);\n    }\n    getNumericSeverityLevel(severity) {\n        return this.get(severity);\n    }\n    getSeverityLevelName(level) {\n        return this.get(level);\n    }\n}\n/** @internal */ exports.SEVERITY_LEVEL_MAP = new SeverityLevelMap([\n    [\n        exports.SeverityLevel.OFF,\n        -Infinity\n    ],\n    [\n        exports.SeverityLevel.EMERGENCY,\n        0\n    ],\n    [\n        exports.SeverityLevel.ALERT,\n        1\n    ],\n    [\n        exports.SeverityLevel.CRITICAL,\n        2\n    ],\n    [\n        exports.SeverityLevel.ERROR,\n        3\n    ],\n    [\n        exports.SeverityLevel.WARNING,\n        4\n    ],\n    [\n        exports.SeverityLevel.NOTICE,\n        5\n    ],\n    [\n        exports.SeverityLevel.INFORMATIONAL,\n        6\n    ],\n    [\n        exports.SeverityLevel.DEBUG,\n        7\n    ],\n    [\n        exports.SeverityLevel.TRACE,\n        8\n    ]\n]);\n/** @internal */ exports.MongoLoggableComponent = Object.freeze({\n    COMMAND: \"command\",\n    TOPOLOGY: \"topology\",\n    SERVER_SELECTION: \"serverSelection\",\n    CONNECTION: \"connection\"\n});\n/**\n * Parses a string as one of SeverityLevel\n *\n * @param s - the value to be parsed\n * @returns one of SeverityLevel if value can be parsed as such, otherwise null\n */ function parseSeverityFromString(s) {\n    const validSeverities = Object.values(exports.SeverityLevel);\n    const lowerSeverity = s?.toLowerCase();\n    if (lowerSeverity != null && validSeverities.includes(lowerSeverity)) {\n        return lowerSeverity;\n    }\n    return null;\n}\n/** @internal */ function createStdioLogger(stream) {\n    return {\n        write: (log)=>{\n            stream.write((0, util_1.inspect)(log, {\n                compact: true,\n                breakLength: Infinity\n            }), \"utf-8\");\n            return;\n        }\n    };\n}\nexports.createStdioLogger = createStdioLogger;\n/**\n * resolves the MONGODB_LOG_PATH and mongodbLogPath options from the environment and the\n * mongo client options respectively. The mongodbLogPath can be either 'stdout', 'stderr', a NodeJS\n * Writable or an object which has a `write` method with the signature:\n * ```ts\n * write(log: Log): void\n * ```\n *\n * @returns the MongoDBLogWritable object to write logs to\n */ function resolveLogPath({ MONGODB_LOG_PATH }, { mongodbLogPath }) {\n    if (typeof mongodbLogPath === \"string\" && /^stderr$/i.test(mongodbLogPath)) {\n        return createStdioLogger(process.stderr);\n    }\n    if (typeof mongodbLogPath === \"string\" && /^stdout$/i.test(mongodbLogPath)) {\n        return createStdioLogger(process.stdout);\n    }\n    if (typeof mongodbLogPath === \"object\" && typeof mongodbLogPath?.write === \"function\") {\n        return mongodbLogPath;\n    }\n    if (MONGODB_LOG_PATH && /^stderr$/i.test(MONGODB_LOG_PATH)) {\n        return createStdioLogger(process.stderr);\n    }\n    if (MONGODB_LOG_PATH && /^stdout$/i.test(MONGODB_LOG_PATH)) {\n        return createStdioLogger(process.stdout);\n    }\n    return createStdioLogger(process.stderr);\n}\nfunction compareSeverity(s0, s1) {\n    const s0Num = exports.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(s0);\n    const s1Num = exports.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(s1);\n    return s0Num < s1Num ? -1 : s0Num > s1Num ? 1 : 0;\n}\n/** @internal */ function stringifyWithMaxLen(value, maxDocumentLength) {\n    const ejson = bson_1.EJSON.stringify(value);\n    return maxDocumentLength !== 0 && ejson.length > maxDocumentLength ? `${ejson.slice(0, maxDocumentLength)}...` : ejson;\n}\nexports.stringifyWithMaxLen = stringifyWithMaxLen;\nfunction isLogConvertible(obj) {\n    const objAsLogConvertible = obj;\n    // eslint-disable-next-line no-restricted-syntax\n    return objAsLogConvertible.toLog !== undefined && typeof objAsLogConvertible.toLog === \"function\";\n}\nfunction attachCommandFields(log, commandEvent) {\n    log.commandName = commandEvent.commandName;\n    log.requestId = commandEvent.requestId;\n    log.driverConnectionId = commandEvent?.connectionId;\n    const { host, port } = utils_1.HostAddress.fromString(commandEvent.address).toHostPort();\n    log.serverHost = host;\n    log.serverPort = port;\n    if (commandEvent?.serviceId) {\n        log.serviceId = commandEvent.serviceId.toHexString();\n    }\n    return log;\n}\nfunction attachConnectionFields(log, connectionPoolEvent) {\n    const { host, port } = utils_1.HostAddress.fromString(connectionPoolEvent.address).toHostPort();\n    log.serverHost = host;\n    log.serverPort = port;\n    return log;\n}\nfunction defaultLogTransform(logObject, maxDocumentLength = exports.DEFAULT_MAX_DOCUMENT_LENGTH) {\n    let log = Object.create(null);\n    switch(logObject.name){\n        case constants_1.COMMAND_STARTED:\n            log = attachCommandFields(log, logObject);\n            log.message = \"Command started\";\n            log.command = stringifyWithMaxLen(logObject.command, maxDocumentLength);\n            log.databaseName = logObject.databaseName;\n            return log;\n        case constants_1.COMMAND_SUCCEEDED:\n            log = attachCommandFields(log, logObject);\n            log.message = \"Command succeeded\";\n            log.durationMS = logObject.duration;\n            log.reply = stringifyWithMaxLen(logObject.reply, maxDocumentLength);\n            return log;\n        case constants_1.COMMAND_FAILED:\n            log = attachCommandFields(log, logObject);\n            log.message = \"Command failed\";\n            log.durationMS = logObject.duration;\n            log.failure = logObject.failure;\n            return log;\n        case constants_1.CONNECTION_POOL_CREATED:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection pool created\";\n            if (logObject.options) {\n                const { maxIdleTimeMS, minPoolSize, maxPoolSize, maxConnecting, waitQueueTimeoutMS } = logObject.options;\n                log = {\n                    ...log,\n                    maxIdleTimeMS,\n                    minPoolSize,\n                    maxPoolSize,\n                    maxConnecting,\n                    waitQueueTimeoutMS\n                };\n            }\n            return log;\n        case constants_1.CONNECTION_POOL_READY:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection pool ready\";\n            return log;\n        case constants_1.CONNECTION_POOL_CLEARED:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection pool cleared\";\n            if (logObject.serviceId?._bsontype === \"ObjectId\") {\n                log.serviceId = logObject.serviceId.toHexString();\n            }\n            return log;\n        case constants_1.CONNECTION_POOL_CLOSED:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection pool closed\";\n            return log;\n        case constants_1.CONNECTION_CREATED:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection created\";\n            log.driverConnectionId = logObject.connectionId;\n            return log;\n        case constants_1.CONNECTION_READY:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection ready\";\n            log.driverConnectionId = logObject.connectionId;\n            return log;\n        case constants_1.CONNECTION_CLOSED:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection closed\";\n            log.driverConnectionId = logObject.connectionId;\n            switch(logObject.reason){\n                case \"stale\":\n                    log.reason = \"Connection became stale because the pool was cleared\";\n                    break;\n                case \"idle\":\n                    log.reason = \"Connection has been available but unused for longer than the configured max idle time\";\n                    break;\n                case \"error\":\n                    log.reason = \"An error occurred while using the connection\";\n                    if (logObject.error) {\n                        log.error = logObject.error;\n                    }\n                    break;\n                case \"poolClosed\":\n                    log.reason = \"Connection pool was closed\";\n                    break;\n                default:\n                    log.reason = `Unknown close reason: ${logObject.reason}`;\n            }\n            return log;\n        case constants_1.CONNECTION_CHECK_OUT_STARTED:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection checkout started\";\n            return log;\n        case constants_1.CONNECTION_CHECK_OUT_FAILED:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection checkout failed\";\n            switch(logObject.reason){\n                case \"poolClosed\":\n                    log.reason = \"Connection pool was closed\";\n                    break;\n                case \"timeout\":\n                    log.reason = \"Wait queue timeout elapsed without a connection becoming available\";\n                    break;\n                case \"connectionError\":\n                    log.reason = \"An error occurred while trying to establish a new connection\";\n                    if (logObject.error) {\n                        log.error = logObject.error;\n                    }\n                    break;\n                default:\n                    log.reason = `Unknown close reason: ${logObject.reason}`;\n            }\n            return log;\n        case constants_1.CONNECTION_CHECKED_OUT:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection checked out\";\n            log.driverConnectionId = logObject.connectionId;\n            return log;\n        case constants_1.CONNECTION_CHECKED_IN:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection checked in\";\n            log.driverConnectionId = logObject.connectionId;\n            return log;\n        default:\n            for (const [key, value] of Object.entries(logObject)){\n                if (value != null) log[key] = value;\n            }\n    }\n    return log;\n}\n/** @internal */ class MongoLogger {\n    constructor(options){\n        /**\n         * This method should be used when logging errors that do not have a public driver API for\n         * reporting errors.\n         */ this.error = this.log.bind(this, \"error\");\n        /**\n         * This method should be used to log situations where undesirable application behaviour might\n         * occur. For example, failing to end sessions on `MongoClient.close`.\n         */ this.warn = this.log.bind(this, \"warn\");\n        /**\n         * This method should be used to report high-level information about normal driver behaviour.\n         * For example, the creation of a `MongoClient`.\n         */ this.info = this.log.bind(this, \"info\");\n        /**\n         * This method should be used to report information that would be helpful when debugging an\n         * application. For example, a command starting, succeeding or failing.\n         */ this.debug = this.log.bind(this, \"debug\");\n        /**\n         * This method should be used to report fine-grained details related to logic flow. For example,\n         * entering and exiting a function body.\n         */ this.trace = this.log.bind(this, \"trace\");\n        this.componentSeverities = options.componentSeverities;\n        this.maxDocumentLength = options.maxDocumentLength;\n        this.logDestination = options.logDestination;\n    }\n    log(severity, component, message) {\n        if (compareSeverity(severity, this.componentSeverities[component]) > 0) return;\n        let logMessage = {\n            t: new Date(),\n            c: component,\n            s: severity\n        };\n        if (typeof message === \"string\") {\n            logMessage.message = message;\n        } else if (typeof message === \"object\") {\n            if (isLogConvertible(message)) {\n                logMessage = {\n                    ...logMessage,\n                    ...message.toLog()\n                };\n            } else {\n                logMessage = {\n                    ...logMessage,\n                    ...defaultLogTransform(message, this.maxDocumentLength)\n                };\n            }\n        }\n        this.logDestination.write(logMessage);\n    }\n    /**\n     * Merges options set through environment variables and the MongoClient, preferring environment\n     * variables when both are set, and substituting defaults for values not set. Options set in\n     * constructor take precedence over both environment variables and MongoClient options.\n     *\n     * @remarks\n     * When parsing component severity levels, invalid values are treated as unset and replaced with\n     * the default severity.\n     *\n     * @param envOptions - options set for the logger from the environment\n     * @param clientOptions - options set for the logger in the MongoClient options\n     * @returns a MongoLoggerOptions object to be used when instantiating a new MongoLogger\n     */ static resolveOptions(envOptions, clientOptions) {\n        // client options take precedence over env options\n        const combinedOptions = {\n            ...envOptions,\n            ...clientOptions,\n            mongodbLogPath: resolveLogPath(envOptions, clientOptions)\n        };\n        const defaultSeverity = parseSeverityFromString(combinedOptions.MONGODB_LOG_ALL) ?? exports.SeverityLevel.OFF;\n        return {\n            componentSeverities: {\n                command: parseSeverityFromString(combinedOptions.MONGODB_LOG_COMMAND) ?? defaultSeverity,\n                topology: parseSeverityFromString(combinedOptions.MONGODB_LOG_TOPOLOGY) ?? defaultSeverity,\n                serverSelection: parseSeverityFromString(combinedOptions.MONGODB_LOG_SERVER_SELECTION) ?? defaultSeverity,\n                connection: parseSeverityFromString(combinedOptions.MONGODB_LOG_CONNECTION) ?? defaultSeverity,\n                default: defaultSeverity\n            },\n            maxDocumentLength: (0, utils_1.parseUnsignedInteger)(combinedOptions.MONGODB_LOG_MAX_DOCUMENT_LENGTH) ?? 1000,\n            logDestination: combinedOptions.mongodbLogPath\n        };\n    }\n}\nexports.MongoLogger = MongoLogger; //# sourceMappingURL=mongo_logger.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvbW9uZ29fbG9nZ2VyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxtQkFBbUIsR0FBR0EsMkJBQTJCLEdBQUdBLHlCQUF5QixHQUFHQSw4QkFBOEIsR0FBR0EsMEJBQTBCLEdBQUdBLG1DQUFtQyxHQUFHQSxxQkFBcUIsR0FBRyxLQUFLO0FBQ2pOLE1BQU1TLFNBQVNDLG1CQUFPQSxDQUFDLG9EQUFNO0FBQzdCLE1BQU1DLFNBQVNELG1CQUFPQSxDQUFDLGtCQUFNO0FBQzdCLE1BQU1FLGNBQWNGLG1CQUFPQSxDQUFDLGtFQUFhO0FBQ3pDLE1BQU1HLFVBQVVILG1CQUFPQSxDQUFDLDBEQUFTO0FBQ2pDLGNBQWMsR0FDZFYscUJBQXFCLEdBQUdGLE9BQU9nQixNQUFNLENBQUM7SUFDbENDLFdBQVc7SUFDWEMsT0FBTztJQUNQQyxVQUFVO0lBQ1ZDLE9BQU87SUFDUEMsU0FBUztJQUNUQyxRQUFRO0lBQ1JDLGVBQWU7SUFDZkMsT0FBTztJQUNQQyxPQUFPO0lBQ1BDLEtBQUs7QUFDVDtBQUNBLGNBQWMsR0FDZHhCLG1DQUFtQyxHQUFHO0FBQ3RDLGNBQWMsR0FDZCxNQUFNeUIseUJBQXlCQztJQUMzQkMsWUFBWUMsT0FBTyxDQUFFO1FBQ2pCLE1BQU1DLGFBQWEsRUFBRTtRQUNyQixLQUFLLE1BQU0sQ0FBQ0MsT0FBTzdCLE1BQU0sSUFBSTJCLFFBQVM7WUFDbENDLFdBQVdFLElBQUksQ0FBQztnQkFBQzlCO2dCQUFPNkI7YUFBTTtRQUNsQztRQUNBRCxXQUFXRSxJQUFJLElBQUlIO1FBQ25CLEtBQUssQ0FBQ0M7SUFDVjtJQUNBRyx3QkFBd0JDLFFBQVEsRUFBRTtRQUM5QixPQUFPLElBQUksQ0FBQ0MsR0FBRyxDQUFDRDtJQUNwQjtJQUNBRSxxQkFBcUJMLEtBQUssRUFBRTtRQUN4QixPQUFPLElBQUksQ0FBQ0ksR0FBRyxDQUFD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QkFBc0IsS0FBS1I7Z0JBQy9FUyxTQUFTVDtZQUNiO1lBQ0FoRixtQkFBbUIsQ0FBQyxHQUFHckQsUUFBUStJLG9CQUFvQixFQUFFWCxnQkFBZ0JZLCtCQUErQixLQUFLO1lBQ3pHckIsZ0JBQWdCUyxnQkFBZ0J6RixjQUFjO1FBQ2xEO0lBQ0o7QUFDSjtBQUNBeEQsbUJBQW1CLEdBQUdFLGFBQ3RCLHdDQUF3QyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9tb25nb19sb2dnZXIuanM/OTBmOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTW9uZ29Mb2dnZXIgPSBleHBvcnRzLnN0cmluZ2lmeVdpdGhNYXhMZW4gPSBleHBvcnRzLmNyZWF0ZVN0ZGlvTG9nZ2VyID0gZXhwb3J0cy5Nb25nb0xvZ2dhYmxlQ29tcG9uZW50ID0gZXhwb3J0cy5TRVZFUklUWV9MRVZFTF9NQVAgPSBleHBvcnRzLkRFRkFVTFRfTUFYX0RPQ1VNRU5UX0xFTkdUSCA9IGV4cG9ydHMuU2V2ZXJpdHlMZXZlbCA9IHZvaWQgMDtcbmNvbnN0IGJzb25fMSA9IHJlcXVpcmUoXCJic29uXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcInV0aWxcIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi91dGlsc1wiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuU2V2ZXJpdHlMZXZlbCA9IE9iamVjdC5mcmVlemUoe1xuICAgIEVNRVJHRU5DWTogJ2VtZXJnZW5jeScsXG4gICAgQUxFUlQ6ICdhbGVydCcsXG4gICAgQ1JJVElDQUw6ICdjcml0aWNhbCcsXG4gICAgRVJST1I6ICdlcnJvcicsXG4gICAgV0FSTklORzogJ3dhcm4nLFxuICAgIE5PVElDRTogJ25vdGljZScsXG4gICAgSU5GT1JNQVRJT05BTDogJ2luZm8nLFxuICAgIERFQlVHOiAnZGVidWcnLFxuICAgIFRSQUNFOiAndHJhY2UnLFxuICAgIE9GRjogJ29mZidcbn0pO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5ERUZBVUxUX01BWF9ET0NVTUVOVF9MRU5HVEggPSAxMDAwO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgU2V2ZXJpdHlMZXZlbE1hcCBleHRlbmRzIE1hcCB7XG4gICAgY29uc3RydWN0b3IoZW50cmllcykge1xuICAgICAgICBjb25zdCBuZXdFbnRyaWVzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgW2xldmVsLCB2YWx1ZV0gb2YgZW50cmllcykge1xuICAgICAgICAgICAgbmV3RW50cmllcy5wdXNoKFt2YWx1ZSwgbGV2ZWxdKTtcbiAgICAgICAgfVxuICAgICAgICBuZXdFbnRyaWVzLnB1c2goLi4uZW50cmllcyk7XG4gICAgICAgIHN1cGVyKG5ld0VudHJpZXMpO1xuICAgIH1cbiAgICBnZXROdW1lcmljU2V2ZXJpdHlMZXZlbChzZXZlcml0eSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoc2V2ZXJpdHkpO1xuICAgIH1cbiAgICBnZXRTZXZlcml0eUxldmVsTmFtZShsZXZlbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQobGV2ZWwpO1xuICAgIH1cbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuU0VWRVJJVFlfTEVWRUxfTUFQID0gbmV3IFNldmVyaXR5TGV2ZWxNYXAoW1xuICAgIFtleHBvcnRzLlNldmVyaXR5TGV2ZWwuT0ZGLCAtSW5maW5pdHldLFxuICAgIFtleHBvcnRzLlNldmVyaXR5TGV2ZWwuRU1FUkdFTkNZLCAwXSxcbiAgICBbZXhwb3J0cy5TZXZlcml0eUxldmVsLkFMRVJULCAxXSxcbiAgICBbZXhwb3J0cy5TZXZlcml0eUxldmVsLkNSSVRJQ0FMLCAyXSxcbiAgICBbZXhwb3J0cy5TZXZlcml0eUxldmVsLkVSUk9SLCAzXSxcbiAgICBbZXhwb3J0cy5TZXZlcml0eUxldmVsLldBUk5JTkcsIDRdLFxuICAgIFtleHBvcnRzLlNldmVyaXR5TGV2ZWwuTk9USUNFLCA1XSxcbiAgICBbZXhwb3J0cy5TZXZlcml0eUxldmVsLklORk9STUFUSU9OQUwsIDZdLFxuICAgIFtleHBvcnRzLlNldmVyaXR5TGV2ZWwuREVCVUcsIDddLFxuICAgIFtleHBvcnRzLlNldmVyaXR5TGV2ZWwuVFJBQ0UsIDhdXG5dKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuTW9uZ29Mb2dnYWJsZUNvbXBvbmVudCA9IE9iamVjdC5mcmVlemUoe1xuICAgIENPTU1BTkQ6ICdjb21tYW5kJyxcbiAgICBUT1BPTE9HWTogJ3RvcG9sb2d5JyxcbiAgICBTRVJWRVJfU0VMRUNUSU9OOiAnc2VydmVyU2VsZWN0aW9uJyxcbiAgICBDT05ORUNUSU9OOiAnY29ubmVjdGlvbidcbn0pO1xuLyoqXG4gKiBQYXJzZXMgYSBzdHJpbmcgYXMgb25lIG9mIFNldmVyaXR5TGV2ZWxcbiAqXG4gKiBAcGFyYW0gcyAtIHRoZSB2YWx1ZSB0byBiZSBwYXJzZWRcbiAqIEByZXR1cm5zIG9uZSBvZiBTZXZlcml0eUxldmVsIGlmIHZhbHVlIGNhbiBiZSBwYXJzZWQgYXMgc3VjaCwgb3RoZXJ3aXNlIG51bGxcbiAqL1xuZnVuY3Rpb24gcGFyc2VTZXZlcml0eUZyb21TdHJpbmcocykge1xuICAgIGNvbnN0IHZhbGlkU2V2ZXJpdGllcyA9IE9iamVjdC52YWx1ZXMoZXhwb3J0cy5TZXZlcml0eUxldmVsKTtcbiAgICBjb25zdCBsb3dlclNldmVyaXR5ID0gcz8udG9Mb3dlckNhc2UoKTtcbiAgICBpZiAobG93ZXJTZXZlcml0eSAhPSBudWxsICYmIHZhbGlkU2V2ZXJpdGllcy5pbmNsdWRlcyhsb3dlclNldmVyaXR5KSkge1xuICAgICAgICByZXR1cm4gbG93ZXJTZXZlcml0eTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBjcmVhdGVTdGRpb0xvZ2dlcihzdHJlYW0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB3cml0ZTogKGxvZykgPT4ge1xuICAgICAgICAgICAgc3RyZWFtLndyaXRlKCgwLCB1dGlsXzEuaW5zcGVjdCkobG9nLCB7IGNvbXBhY3Q6IHRydWUsIGJyZWFrTGVuZ3RoOiBJbmZpbml0eSB9KSwgJ3V0Zi04Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9O1xufVxuZXhwb3J0cy5jcmVhdGVTdGRpb0xvZ2dlciA9IGNyZWF0ZVN0ZGlvTG9nZ2VyO1xuLyoqXG4gKiByZXNvbHZlcyB0aGUgTU9OR09EQl9MT0dfUEFUSCBhbmQgbW9uZ29kYkxvZ1BhdGggb3B0aW9ucyBmcm9tIHRoZSBlbnZpcm9ubWVudCBhbmQgdGhlXG4gKiBtb25nbyBjbGllbnQgb3B0aW9ucyByZXNwZWN0aXZlbHkuIFRoZSBtb25nb2RiTG9nUGF0aCBjYW4gYmUgZWl0aGVyICdzdGRvdXQnLCAnc3RkZXJyJywgYSBOb2RlSlNcbiAqIFdyaXRhYmxlIG9yIGFuIG9iamVjdCB3aGljaCBoYXMgYSBgd3JpdGVgIG1ldGhvZCB3aXRoIHRoZSBzaWduYXR1cmU6XG4gKiBgYGB0c1xuICogd3JpdGUobG9nOiBMb2cpOiB2b2lkXG4gKiBgYGBcbiAqXG4gKiBAcmV0dXJucyB0aGUgTW9uZ29EQkxvZ1dyaXRhYmxlIG9iamVjdCB0byB3cml0ZSBsb2dzIHRvXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVMb2dQYXRoKHsgTU9OR09EQl9MT0dfUEFUSCB9LCB7IG1vbmdvZGJMb2dQYXRoIH0pIHtcbiAgICBpZiAodHlwZW9mIG1vbmdvZGJMb2dQYXRoID09PSAnc3RyaW5nJyAmJiAvXnN0ZGVyciQvaS50ZXN0KG1vbmdvZGJMb2dQYXRoKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlU3RkaW9Mb2dnZXIocHJvY2Vzcy5zdGRlcnIpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG1vbmdvZGJMb2dQYXRoID09PSAnc3RyaW5nJyAmJiAvXnN0ZG91dCQvaS50ZXN0KG1vbmdvZGJMb2dQYXRoKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlU3RkaW9Mb2dnZXIocHJvY2Vzcy5zdGRvdXQpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG1vbmdvZGJMb2dQYXRoID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9uZ29kYkxvZ1BhdGg/LndyaXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBtb25nb2RiTG9nUGF0aDtcbiAgICB9XG4gICAgaWYgKE1PTkdPREJfTE9HX1BBVEggJiYgL15zdGRlcnIkL2kudGVzdChNT05HT0RCX0xPR19QQVRIKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlU3RkaW9Mb2dnZXIocHJvY2Vzcy5zdGRlcnIpO1xuICAgIH1cbiAgICBpZiAoTU9OR09EQl9MT0dfUEFUSCAmJiAvXnN0ZG91dCQvaS50ZXN0KE1PTkdPREJfTE9HX1BBVEgpKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVTdGRpb0xvZ2dlcihwcm9jZXNzLnN0ZG91dCk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVTdGRpb0xvZ2dlcihwcm9jZXNzLnN0ZGVycik7XG59XG5mdW5jdGlvbiBjb21wYXJlU2V2ZXJpdHkoczAsIHMxKSB7XG4gICAgY29uc3QgczBOdW0gPSBleHBvcnRzLlNFVkVSSVRZX0xFVkVMX01BUC5nZXROdW1lcmljU2V2ZXJpdHlMZXZlbChzMCk7XG4gICAgY29uc3QgczFOdW0gPSBleHBvcnRzLlNFVkVSSVRZX0xFVkVMX01BUC5nZXROdW1lcmljU2V2ZXJpdHlMZXZlbChzMSk7XG4gICAgcmV0dXJuIHMwTnVtIDwgczFOdW0gPyAtMSA6IHMwTnVtID4gczFOdW0gPyAxIDogMDtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeVdpdGhNYXhMZW4odmFsdWUsIG1heERvY3VtZW50TGVuZ3RoKSB7XG4gICAgY29uc3QgZWpzb24gPSBic29uXzEuRUpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICByZXR1cm4gbWF4RG9jdW1lbnRMZW5ndGggIT09IDAgJiYgZWpzb24ubGVuZ3RoID4gbWF4RG9jdW1lbnRMZW5ndGhcbiAgICAgICAgPyBgJHtlanNvbi5zbGljZSgwLCBtYXhEb2N1bWVudExlbmd0aCl9Li4uYFxuICAgICAgICA6IGVqc29uO1xufVxuZXhwb3J0cy5zdHJpbmdpZnlXaXRoTWF4TGVuID0gc3RyaW5naWZ5V2l0aE1heExlbjtcbmZ1bmN0aW9uIGlzTG9nQ29udmVydGlibGUob2JqKSB7XG4gICAgY29uc3Qgb2JqQXNMb2dDb252ZXJ0aWJsZSA9IG9iajtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICByZXR1cm4gb2JqQXNMb2dDb252ZXJ0aWJsZS50b0xvZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvYmpBc0xvZ0NvbnZlcnRpYmxlLnRvTG9nID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gYXR0YWNoQ29tbWFuZEZpZWxkcyhsb2csIGNvbW1hbmRFdmVudCkge1xuICAgIGxvZy5jb21tYW5kTmFtZSA9IGNvbW1hbmRFdmVudC5jb21tYW5kTmFtZTtcbiAgICBsb2cucmVxdWVzdElkID0gY29tbWFuZEV2ZW50LnJlcXVlc3RJZDtcbiAgICBsb2cuZHJpdmVyQ29ubmVjdGlvbklkID0gY29tbWFuZEV2ZW50Py5jb25uZWN0aW9uSWQ7XG4gICAgY29uc3QgeyBob3N0LCBwb3J0IH0gPSB1dGlsc18xLkhvc3RBZGRyZXNzLmZyb21TdHJpbmcoY29tbWFuZEV2ZW50LmFkZHJlc3MpLnRvSG9zdFBvcnQoKTtcbiAgICBsb2cuc2VydmVySG9zdCA9IGhvc3Q7XG4gICAgbG9nLnNlcnZlclBvcnQgPSBwb3J0O1xuICAgIGlmIChjb21tYW5kRXZlbnQ/LnNlcnZpY2VJZCkge1xuICAgICAgICBsb2cuc2VydmljZUlkID0gY29tbWFuZEV2ZW50LnNlcnZpY2VJZC50b0hleFN0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gbG9nO1xufVxuZnVuY3Rpb24gYXR0YWNoQ29ubmVjdGlvbkZpZWxkcyhsb2csIGNvbm5lY3Rpb25Qb29sRXZlbnQpIHtcbiAgICBjb25zdCB7IGhvc3QsIHBvcnQgfSA9IHV0aWxzXzEuSG9zdEFkZHJlc3MuZnJvbVN0cmluZyhjb25uZWN0aW9uUG9vbEV2ZW50LmFkZHJlc3MpLnRvSG9zdFBvcnQoKTtcbiAgICBsb2cuc2VydmVySG9zdCA9IGhvc3Q7XG4gICAgbG9nLnNlcnZlclBvcnQgPSBwb3J0O1xuICAgIHJldHVybiBsb2c7XG59XG5mdW5jdGlvbiBkZWZhdWx0TG9nVHJhbnNmb3JtKGxvZ09iamVjdCwgbWF4RG9jdW1lbnRMZW5ndGggPSBleHBvcnRzLkRFRkFVTFRfTUFYX0RPQ1VNRU5UX0xFTkdUSCkge1xuICAgIGxldCBsb2cgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHN3aXRjaCAobG9nT2JqZWN0Lm5hbWUpIHtcbiAgICAgICAgY2FzZSBjb25zdGFudHNfMS5DT01NQU5EX1NUQVJURUQ6XG4gICAgICAgICAgICBsb2cgPSBhdHRhY2hDb21tYW5kRmllbGRzKGxvZywgbG9nT2JqZWN0KTtcbiAgICAgICAgICAgIGxvZy5tZXNzYWdlID0gJ0NvbW1hbmQgc3RhcnRlZCc7XG4gICAgICAgICAgICBsb2cuY29tbWFuZCA9IHN0cmluZ2lmeVdpdGhNYXhMZW4obG9nT2JqZWN0LmNvbW1hbmQsIG1heERvY3VtZW50TGVuZ3RoKTtcbiAgICAgICAgICAgIGxvZy5kYXRhYmFzZU5hbWUgPSBsb2dPYmplY3QuZGF0YWJhc2VOYW1lO1xuICAgICAgICAgICAgcmV0dXJuIGxvZztcbiAgICAgICAgY2FzZSBjb25zdGFudHNfMS5DT01NQU5EX1NVQ0NFRURFRDpcbiAgICAgICAgICAgIGxvZyA9IGF0dGFjaENvbW1hbmRGaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nLm1lc3NhZ2UgPSAnQ29tbWFuZCBzdWNjZWVkZWQnO1xuICAgICAgICAgICAgbG9nLmR1cmF0aW9uTVMgPSBsb2dPYmplY3QuZHVyYXRpb247XG4gICAgICAgICAgICBsb2cucmVwbHkgPSBzdHJpbmdpZnlXaXRoTWF4TGVuKGxvZ09iamVjdC5yZXBseSwgbWF4RG9jdW1lbnRMZW5ndGgpO1xuICAgICAgICAgICAgcmV0dXJuIGxvZztcbiAgICAgICAgY2FzZSBjb25zdGFudHNfMS5DT01NQU5EX0ZBSUxFRDpcbiAgICAgICAgICAgIGxvZyA9IGF0dGFjaENvbW1hbmRGaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nLm1lc3NhZ2UgPSAnQ29tbWFuZCBmYWlsZWQnO1xuICAgICAgICAgICAgbG9nLmR1cmF0aW9uTVMgPSBsb2dPYmplY3QuZHVyYXRpb247XG4gICAgICAgICAgICBsb2cuZmFpbHVyZSA9IGxvZ09iamVjdC5mYWlsdXJlO1xuICAgICAgICAgICAgcmV0dXJuIGxvZztcbiAgICAgICAgY2FzZSBjb25zdGFudHNfMS5DT05ORUNUSU9OX1BPT0xfQ1JFQVRFRDpcbiAgICAgICAgICAgIGxvZyA9IGF0dGFjaENvbm5lY3Rpb25GaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nLm1lc3NhZ2UgPSAnQ29ubmVjdGlvbiBwb29sIGNyZWF0ZWQnO1xuICAgICAgICAgICAgaWYgKGxvZ09iamVjdC5vcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBtYXhJZGxlVGltZU1TLCBtaW5Qb29sU2l6ZSwgbWF4UG9vbFNpemUsIG1heENvbm5lY3RpbmcsIHdhaXRRdWV1ZVRpbWVvdXRNUyB9ID0gbG9nT2JqZWN0Lm9wdGlvbnM7XG4gICAgICAgICAgICAgICAgbG9nID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5sb2csXG4gICAgICAgICAgICAgICAgICAgIG1heElkbGVUaW1lTVMsXG4gICAgICAgICAgICAgICAgICAgIG1pblBvb2xTaXplLFxuICAgICAgICAgICAgICAgICAgICBtYXhQb29sU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgbWF4Q29ubmVjdGluZyxcbiAgICAgICAgICAgICAgICAgICAgd2FpdFF1ZXVlVGltZW91dE1TXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGNhc2UgY29uc3RhbnRzXzEuQ09OTkVDVElPTl9QT09MX1JFQURZOlxuICAgICAgICAgICAgbG9nID0gYXR0YWNoQ29ubmVjdGlvbkZpZWxkcyhsb2csIGxvZ09iamVjdCk7XG4gICAgICAgICAgICBsb2cubWVzc2FnZSA9ICdDb25uZWN0aW9uIHBvb2wgcmVhZHknO1xuICAgICAgICAgICAgcmV0dXJuIGxvZztcbiAgICAgICAgY2FzZSBjb25zdGFudHNfMS5DT05ORUNUSU9OX1BPT0xfQ0xFQVJFRDpcbiAgICAgICAgICAgIGxvZyA9IGF0dGFjaENvbm5lY3Rpb25GaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nLm1lc3NhZ2UgPSAnQ29ubmVjdGlvbiBwb29sIGNsZWFyZWQnO1xuICAgICAgICAgICAgaWYgKGxvZ09iamVjdC5zZXJ2aWNlSWQ/Ll9ic29udHlwZSA9PT0gJ09iamVjdElkJykge1xuICAgICAgICAgICAgICAgIGxvZy5zZXJ2aWNlSWQgPSBsb2dPYmplY3Quc2VydmljZUlkLnRvSGV4U3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbG9nO1xuICAgICAgICBjYXNlIGNvbnN0YW50c18xLkNPTk5FQ1RJT05fUE9PTF9DTE9TRUQ6XG4gICAgICAgICAgICBsb2cgPSBhdHRhY2hDb25uZWN0aW9uRmllbGRzKGxvZywgbG9nT2JqZWN0KTtcbiAgICAgICAgICAgIGxvZy5tZXNzYWdlID0gJ0Nvbm5lY3Rpb24gcG9vbCBjbG9zZWQnO1xuICAgICAgICAgICAgcmV0dXJuIGxvZztcbiAgICAgICAgY2FzZSBjb25zdGFudHNfMS5DT05ORUNUSU9OX0NSRUFURUQ6XG4gICAgICAgICAgICBsb2cgPSBhdHRhY2hDb25uZWN0aW9uRmllbGRzKGxvZywgbG9nT2JqZWN0KTtcbiAgICAgICAgICAgIGxvZy5tZXNzYWdlID0gJ0Nvbm5lY3Rpb24gY3JlYXRlZCc7XG4gICAgICAgICAgICBsb2cuZHJpdmVyQ29ubmVjdGlvbklkID0gbG9nT2JqZWN0LmNvbm5lY3Rpb25JZDtcbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGNhc2UgY29uc3RhbnRzXzEuQ09OTkVDVElPTl9SRUFEWTpcbiAgICAgICAgICAgIGxvZyA9IGF0dGFjaENvbm5lY3Rpb25GaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nLm1lc3NhZ2UgPSAnQ29ubmVjdGlvbiByZWFkeSc7XG4gICAgICAgICAgICBsb2cuZHJpdmVyQ29ubmVjdGlvbklkID0gbG9nT2JqZWN0LmNvbm5lY3Rpb25JZDtcbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGNhc2UgY29uc3RhbnRzXzEuQ09OTkVDVElPTl9DTE9TRUQ6XG4gICAgICAgICAgICBsb2cgPSBhdHRhY2hDb25uZWN0aW9uRmllbGRzKGxvZywgbG9nT2JqZWN0KTtcbiAgICAgICAgICAgIGxvZy5tZXNzYWdlID0gJ0Nvbm5lY3Rpb24gY2xvc2VkJztcbiAgICAgICAgICAgIGxvZy5kcml2ZXJDb25uZWN0aW9uSWQgPSBsb2dPYmplY3QuY29ubmVjdGlvbklkO1xuICAgICAgICAgICAgc3dpdGNoIChsb2dPYmplY3QucmVhc29uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RhbGUnOlxuICAgICAgICAgICAgICAgICAgICBsb2cucmVhc29uID0gJ0Nvbm5lY3Rpb24gYmVjYW1lIHN0YWxlIGJlY2F1c2UgdGhlIHBvb2wgd2FzIGNsZWFyZWQnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdpZGxlJzpcbiAgICAgICAgICAgICAgICAgICAgbG9nLnJlYXNvbiA9XG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29ubmVjdGlvbiBoYXMgYmVlbiBhdmFpbGFibGUgYnV0IHVudXNlZCBmb3IgbG9uZ2VyIHRoYW4gdGhlIGNvbmZpZ3VyZWQgbWF4IGlkbGUgdGltZSc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgICAgICAgICAgICAgbG9nLnJlYXNvbiA9ICdBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB1c2luZyB0aGUgY29ubmVjdGlvbic7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2dPYmplY3QuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5lcnJvciA9IGxvZ09iamVjdC5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdwb29sQ2xvc2VkJzpcbiAgICAgICAgICAgICAgICAgICAgbG9nLnJlYXNvbiA9ICdDb25uZWN0aW9uIHBvb2wgd2FzIGNsb3NlZCc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGxvZy5yZWFzb24gPSBgVW5rbm93biBjbG9zZSByZWFzb246ICR7bG9nT2JqZWN0LnJlYXNvbn1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxvZztcbiAgICAgICAgY2FzZSBjb25zdGFudHNfMS5DT05ORUNUSU9OX0NIRUNLX09VVF9TVEFSVEVEOlxuICAgICAgICAgICAgbG9nID0gYXR0YWNoQ29ubmVjdGlvbkZpZWxkcyhsb2csIGxvZ09iamVjdCk7XG4gICAgICAgICAgICBsb2cubWVzc2FnZSA9ICdDb25uZWN0aW9uIGNoZWNrb3V0IHN0YXJ0ZWQnO1xuICAgICAgICAgICAgcmV0dXJuIGxvZztcbiAgICAgICAgY2FzZSBjb25zdGFudHNfMS5DT05ORUNUSU9OX0NIRUNLX09VVF9GQUlMRUQ6XG4gICAgICAgICAgICBsb2cgPSBhdHRhY2hDb25uZWN0aW9uRmllbGRzKGxvZywgbG9nT2JqZWN0KTtcbiAgICAgICAgICAgIGxvZy5tZXNzYWdlID0gJ0Nvbm5lY3Rpb24gY2hlY2tvdXQgZmFpbGVkJztcbiAgICAgICAgICAgIHN3aXRjaCAobG9nT2JqZWN0LnJlYXNvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3Bvb2xDbG9zZWQnOlxuICAgICAgICAgICAgICAgICAgICBsb2cucmVhc29uID0gJ0Nvbm5lY3Rpb24gcG9vbCB3YXMgY2xvc2VkJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGltZW91dCc6XG4gICAgICAgICAgICAgICAgICAgIGxvZy5yZWFzb24gPSAnV2FpdCBxdWV1ZSB0aW1lb3V0IGVsYXBzZWQgd2l0aG91dCBhIGNvbm5lY3Rpb24gYmVjb21pbmcgYXZhaWxhYmxlJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY29ubmVjdGlvbkVycm9yJzpcbiAgICAgICAgICAgICAgICAgICAgbG9nLnJlYXNvbiA9ICdBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gZXN0YWJsaXNoIGEgbmV3IGNvbm5lY3Rpb24nO1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9nT2JqZWN0LmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IgPSBsb2dPYmplY3QuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgbG9nLnJlYXNvbiA9IGBVbmtub3duIGNsb3NlIHJlYXNvbjogJHtsb2dPYmplY3QucmVhc29ufWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbG9nO1xuICAgICAgICBjYXNlIGNvbnN0YW50c18xLkNPTk5FQ1RJT05fQ0hFQ0tFRF9PVVQ6XG4gICAgICAgICAgICBsb2cgPSBhdHRhY2hDb25uZWN0aW9uRmllbGRzKGxvZywgbG9nT2JqZWN0KTtcbiAgICAgICAgICAgIGxvZy5tZXNzYWdlID0gJ0Nvbm5lY3Rpb24gY2hlY2tlZCBvdXQnO1xuICAgICAgICAgICAgbG9nLmRyaXZlckNvbm5lY3Rpb25JZCA9IGxvZ09iamVjdC5jb25uZWN0aW9uSWQ7XG4gICAgICAgICAgICByZXR1cm4gbG9nO1xuICAgICAgICBjYXNlIGNvbnN0YW50c18xLkNPTk5FQ1RJT05fQ0hFQ0tFRF9JTjpcbiAgICAgICAgICAgIGxvZyA9IGF0dGFjaENvbm5lY3Rpb25GaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nLm1lc3NhZ2UgPSAnQ29ubmVjdGlvbiBjaGVja2VkIGluJztcbiAgICAgICAgICAgIGxvZy5kcml2ZXJDb25uZWN0aW9uSWQgPSBsb2dPYmplY3QuY29ubmVjdGlvbklkO1xuICAgICAgICAgICAgcmV0dXJuIGxvZztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGxvZ09iamVjdCkpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgbG9nW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxvZztcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIE1vbmdvTG9nZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBzaG91bGQgYmUgdXNlZCB3aGVuIGxvZ2dpbmcgZXJyb3JzIHRoYXQgZG8gbm90IGhhdmUgYSBwdWJsaWMgZHJpdmVyIEFQSSBmb3JcbiAgICAgICAgICogcmVwb3J0aW5nIGVycm9ycy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZXJyb3IgPSB0aGlzLmxvZy5iaW5kKHRoaXMsICdlcnJvcicpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2Qgc2hvdWxkIGJlIHVzZWQgdG8gbG9nIHNpdHVhdGlvbnMgd2hlcmUgdW5kZXNpcmFibGUgYXBwbGljYXRpb24gYmVoYXZpb3VyIG1pZ2h0XG4gICAgICAgICAqIG9jY3VyLiBGb3IgZXhhbXBsZSwgZmFpbGluZyB0byBlbmQgc2Vzc2lvbnMgb24gYE1vbmdvQ2xpZW50LmNsb3NlYC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud2FybiA9IHRoaXMubG9nLmJpbmQodGhpcywgJ3dhcm4nKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSB1c2VkIHRvIHJlcG9ydCBoaWdoLWxldmVsIGluZm9ybWF0aW9uIGFib3V0IG5vcm1hbCBkcml2ZXIgYmVoYXZpb3VyLlxuICAgICAgICAgKiBGb3IgZXhhbXBsZSwgdGhlIGNyZWF0aW9uIG9mIGEgYE1vbmdvQ2xpZW50YC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5mbyA9IHRoaXMubG9nLmJpbmQodGhpcywgJ2luZm8nKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSB1c2VkIHRvIHJlcG9ydCBpbmZvcm1hdGlvbiB0aGF0IHdvdWxkIGJlIGhlbHBmdWwgd2hlbiBkZWJ1Z2dpbmcgYW5cbiAgICAgICAgICogYXBwbGljYXRpb24uIEZvciBleGFtcGxlLCBhIGNvbW1hbmQgc3RhcnRpbmcsIHN1Y2NlZWRpbmcgb3IgZmFpbGluZy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVidWcgPSB0aGlzLmxvZy5iaW5kKHRoaXMsICdkZWJ1ZycpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2Qgc2hvdWxkIGJlIHVzZWQgdG8gcmVwb3J0IGZpbmUtZ3JhaW5lZCBkZXRhaWxzIHJlbGF0ZWQgdG8gbG9naWMgZmxvdy4gRm9yIGV4YW1wbGUsXG4gICAgICAgICAqIGVudGVyaW5nIGFuZCBleGl0aW5nIGEgZnVuY3Rpb24gYm9keS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJhY2UgPSB0aGlzLmxvZy5iaW5kKHRoaXMsICd0cmFjZScpO1xuICAgICAgICB0aGlzLmNvbXBvbmVudFNldmVyaXRpZXMgPSBvcHRpb25zLmNvbXBvbmVudFNldmVyaXRpZXM7XG4gICAgICAgIHRoaXMubWF4RG9jdW1lbnRMZW5ndGggPSBvcHRpb25zLm1heERvY3VtZW50TGVuZ3RoO1xuICAgICAgICB0aGlzLmxvZ0Rlc3RpbmF0aW9uID0gb3B0aW9ucy5sb2dEZXN0aW5hdGlvbjtcbiAgICB9XG4gICAgbG9nKHNldmVyaXR5LCBjb21wb25lbnQsIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGNvbXBhcmVTZXZlcml0eShzZXZlcml0eSwgdGhpcy5jb21wb25lbnRTZXZlcml0aWVzW2NvbXBvbmVudF0pID4gMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGxvZ01lc3NhZ2UgPSB7IHQ6IG5ldyBEYXRlKCksIGM6IGNvbXBvbmVudCwgczogc2V2ZXJpdHkgfTtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbG9nTWVzc2FnZS5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGlmIChpc0xvZ0NvbnZlcnRpYmxlKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAgICAgbG9nTWVzc2FnZSA9IHsgLi4ubG9nTWVzc2FnZSwgLi4ubWVzc2FnZS50b0xvZygpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2dNZXNzYWdlID0geyAuLi5sb2dNZXNzYWdlLCAuLi5kZWZhdWx0TG9nVHJhbnNmb3JtKG1lc3NhZ2UsIHRoaXMubWF4RG9jdW1lbnRMZW5ndGgpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2dEZXN0aW5hdGlvbi53cml0ZShsb2dNZXNzYWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWVyZ2VzIG9wdGlvbnMgc2V0IHRocm91Z2ggZW52aXJvbm1lbnQgdmFyaWFibGVzIGFuZCB0aGUgTW9uZ29DbGllbnQsIHByZWZlcnJpbmcgZW52aXJvbm1lbnRcbiAgICAgKiB2YXJpYWJsZXMgd2hlbiBib3RoIGFyZSBzZXQsIGFuZCBzdWJzdGl0dXRpbmcgZGVmYXVsdHMgZm9yIHZhbHVlcyBub3Qgc2V0LiBPcHRpb25zIHNldCBpblxuICAgICAqIGNvbnN0cnVjdG9yIHRha2UgcHJlY2VkZW5jZSBvdmVyIGJvdGggZW52aXJvbm1lbnQgdmFyaWFibGVzIGFuZCBNb25nb0NsaWVudCBvcHRpb25zLlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBXaGVuIHBhcnNpbmcgY29tcG9uZW50IHNldmVyaXR5IGxldmVscywgaW52YWxpZCB2YWx1ZXMgYXJlIHRyZWF0ZWQgYXMgdW5zZXQgYW5kIHJlcGxhY2VkIHdpdGhcbiAgICAgKiB0aGUgZGVmYXVsdCBzZXZlcml0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbnZPcHRpb25zIC0gb3B0aW9ucyBzZXQgZm9yIHRoZSBsb2dnZXIgZnJvbSB0aGUgZW52aXJvbm1lbnRcbiAgICAgKiBAcGFyYW0gY2xpZW50T3B0aW9ucyAtIG9wdGlvbnMgc2V0IGZvciB0aGUgbG9nZ2VyIGluIHRoZSBNb25nb0NsaWVudCBvcHRpb25zXG4gICAgICogQHJldHVybnMgYSBNb25nb0xvZ2dlck9wdGlvbnMgb2JqZWN0IHRvIGJlIHVzZWQgd2hlbiBpbnN0YW50aWF0aW5nIGEgbmV3IE1vbmdvTG9nZ2VyXG4gICAgICovXG4gICAgc3RhdGljIHJlc29sdmVPcHRpb25zKGVudk9wdGlvbnMsIGNsaWVudE9wdGlvbnMpIHtcbiAgICAgICAgLy8gY2xpZW50IG9wdGlvbnMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgZW52IG9wdGlvbnNcbiAgICAgICAgY29uc3QgY29tYmluZWRPcHRpb25zID0ge1xuICAgICAgICAgICAgLi4uZW52T3B0aW9ucyxcbiAgICAgICAgICAgIC4uLmNsaWVudE9wdGlvbnMsXG4gICAgICAgICAgICBtb25nb2RiTG9nUGF0aDogcmVzb2x2ZUxvZ1BhdGgoZW52T3B0aW9ucywgY2xpZW50T3B0aW9ucylcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZGVmYXVsdFNldmVyaXR5ID0gcGFyc2VTZXZlcml0eUZyb21TdHJpbmcoY29tYmluZWRPcHRpb25zLk1PTkdPREJfTE9HX0FMTCkgPz8gZXhwb3J0cy5TZXZlcml0eUxldmVsLk9GRjtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbXBvbmVudFNldmVyaXRpZXM6IHtcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBwYXJzZVNldmVyaXR5RnJvbVN0cmluZyhjb21iaW5lZE9wdGlvbnMuTU9OR09EQl9MT0dfQ09NTUFORCkgPz8gZGVmYXVsdFNldmVyaXR5LFxuICAgICAgICAgICAgICAgIHRvcG9sb2d5OiBwYXJzZVNldmVyaXR5RnJvbVN0cmluZyhjb21iaW5lZE9wdGlvbnMuTU9OR09EQl9MT0dfVE9QT0xPR1kpID8/IGRlZmF1bHRTZXZlcml0eSxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJTZWxlY3Rpb246IHBhcnNlU2V2ZXJpdHlGcm9tU3RyaW5nKGNvbWJpbmVkT3B0aW9ucy5NT05HT0RCX0xPR19TRVJWRVJfU0VMRUNUSU9OKSA/PyBkZWZhdWx0U2V2ZXJpdHksXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbjogcGFyc2VTZXZlcml0eUZyb21TdHJpbmcoY29tYmluZWRPcHRpb25zLk1PTkdPREJfTE9HX0NPTk5FQ1RJT04pID8/IGRlZmF1bHRTZXZlcml0eSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiBkZWZhdWx0U2V2ZXJpdHlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYXhEb2N1bWVudExlbmd0aDogKDAsIHV0aWxzXzEucGFyc2VVbnNpZ25lZEludGVnZXIpKGNvbWJpbmVkT3B0aW9ucy5NT05HT0RCX0xPR19NQVhfRE9DVU1FTlRfTEVOR1RIKSA/PyAxMDAwLFxuICAgICAgICAgICAgbG9nRGVzdGluYXRpb246IGNvbWJpbmVkT3B0aW9ucy5tb25nb2RiTG9nUGF0aFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29Mb2dnZXIgPSBNb25nb0xvZ2dlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vbmdvX2xvZ2dlci5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJNb25nb0xvZ2dlciIsInN0cmluZ2lmeVdpdGhNYXhMZW4iLCJjcmVhdGVTdGRpb0xvZ2dlciIsIk1vbmdvTG9nZ2FibGVDb21wb25lbnQiLCJTRVZFUklUWV9MRVZFTF9NQVAiLCJERUZBVUxUX01BWF9ET0NVTUVOVF9MRU5HVEgiLCJTZXZlcml0eUxldmVsIiwiYnNvbl8xIiwicmVxdWlyZSIsInV0aWxfMSIsImNvbnN0YW50c18xIiwidXRpbHNfMSIsImZyZWV6ZSIsIkVNRVJHRU5DWSIsIkFMRVJUIiwiQ1JJVElDQUwiLCJFUlJPUiIsIldBUk5JTkciLCJOT1RJQ0UiLCJJTkZPUk1BVElPTkFMIiwiREVCVUciLCJUUkFDRSIsIk9GRiIsIlNldmVyaXR5TGV2ZWxNYXAiLCJNYXAiLCJjb25zdHJ1Y3RvciIsImVudHJpZXMiLCJuZXdFbnRyaWVzIiwibGV2ZWwiLCJwdXNoIiwiZ2V0TnVtZXJpY1NldmVyaXR5TGV2ZWwiLCJzZXZlcml0eSIsImdldCIsImdldFNldmVyaXR5TGV2ZWxOYW1lIiwiSW5maW5pdHkiLCJDT01NQU5EIiwiVE9QT0xPR1kiLCJTRVJWRVJfU0VMRUNUSU9OIiwiQ09OTkVDVElPTiIsInBhcnNlU2V2ZXJpdHlGcm9tU3RyaW5nIiwicyIsInZhbGlkU2V2ZXJpdGllcyIsInZhbHVlcyIsImxvd2VyU2V2ZXJpdHkiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwic3RyZWFtIiwid3JpdGUiLCJsb2ciLCJpbnNwZWN0IiwiY29tcGFjdCIsImJyZWFrTGVuZ3RoIiwicmVzb2x2ZUxvZ1BhdGgiLCJNT05HT0RCX0xPR19QQVRIIiwibW9uZ29kYkxvZ1BhdGgiLCJ0ZXN0IiwicHJvY2VzcyIsInN0ZGVyciIsInN0ZG91dCIsImNvbXBhcmVTZXZlcml0eSIsInMwIiwiczEiLCJzME51bSIsInMxTnVtIiwibWF4RG9jdW1lbnRMZW5ndGgiLCJlanNvbiIsIkVKU09OIiwic3RyaW5naWZ5IiwibGVuZ3RoIiwic2xpY2UiLCJpc0xvZ0NvbnZlcnRpYmxlIiwib2JqIiwib2JqQXNMb2dDb252ZXJ0aWJsZSIsInRvTG9nIiwidW5kZWZpbmVkIiwiYXR0YWNoQ29tbWFuZEZpZWxkcyIsImNvbW1hbmRFdmVudCIsImNvbW1hbmROYW1lIiwicmVxdWVzdElkIiwiZHJpdmVyQ29ubmVjdGlvbklkIiwiY29ubmVjdGlvbklkIiwiaG9zdCIsInBvcnQiLCJIb3N0QWRkcmVzcyIsImZyb21TdHJpbmciLCJhZGRyZXNzIiwidG9Ib3N0UG9ydCIsInNlcnZlckhvc3QiLCJzZXJ2ZXJQb3J0Iiwic2VydmljZUlkIiwidG9IZXhTdHJpbmciLCJhdHRhY2hDb25uZWN0aW9uRmllbGRzIiwiY29ubmVjdGlvblBvb2xFdmVudCIsImRlZmF1bHRMb2dUcmFuc2Zvcm0iLCJsb2dPYmplY3QiLCJjcmVhdGUiLCJuYW1lIiwiQ09NTUFORF9TVEFSVEVEIiwibWVzc2FnZSIsImNvbW1hbmQiLCJkYXRhYmFzZU5hbWUiLCJDT01NQU5EX1NVQ0NFRURFRCIsImR1cmF0aW9uTVMiLCJkdXJhdGlvbiIsInJlcGx5IiwiQ09NTUFORF9GQUlMRUQiLCJmYWlsdXJlIiwiQ09OTkVDVElPTl9QT09MX0NSRUFURUQiLCJvcHRpb25zIiwibWF4SWRsZVRpbWVNUyIsIm1pblBvb2xTaXplIiwibWF4UG9vbFNpemUiLCJtYXhDb25uZWN0aW5nIiwid2FpdFF1ZXVlVGltZW91dE1TIiwiQ09OTkVDVElPTl9QT09MX1JFQURZIiwiQ09OTkVDVElPTl9QT09MX0NMRUFSRUQiLCJfYnNvbnR5cGUiLCJDT05ORUNUSU9OX1BPT0xfQ0xPU0VEIiwiQ09OTkVDVElPTl9DUkVBVEVEIiwiQ09OTkVDVElPTl9SRUFEWSIsIkNPTk5FQ1RJT05fQ0xPU0VEIiwicmVhc29uIiwiZXJyb3IiLCJDT05ORUNUSU9OX0NIRUNLX09VVF9TVEFSVEVEIiwiQ09OTkVDVElPTl9DSEVDS19PVVRfRkFJTEVEIiwiQ09OTkVDVElPTl9DSEVDS0VEX09VVCIsIkNPTk5FQ1RJT05fQ0hFQ0tFRF9JTiIsImtleSIsImJpbmQiLCJ3YXJuIiwiaW5mbyIsImRlYnVnIiwidHJhY2UiLCJjb21wb25lbnRTZXZlcml0aWVzIiwibG9nRGVzdGluYXRpb24iLCJjb21wb25lbnQiLCJsb2dNZXNzYWdlIiwidCIsIkRhdGUiLCJjIiwicmVzb2x2ZU9wdGlvbnMiLCJlbnZPcHRpb25zIiwiY2xpZW50T3B0aW9ucyIsImNvbWJpbmVkT3B0aW9ucyIsImRlZmF1bHRTZXZlcml0eSIsIk1PTkdPREJfTE9HX0FMTCIsIk1PTkdPREJfTE9HX0NPTU1BTkQiLCJ0b3BvbG9neSIsIk1PTkdPREJfTE9HX1RPUE9MT0dZIiwic2VydmVyU2VsZWN0aW9uIiwiTU9OR09EQl9MT0dfU0VSVkVSX1NFTEVDVElPTiIsImNvbm5lY3Rpb24iLCJNT05HT0RCX0xPR19DT05ORUNUSU9OIiwiZGVmYXVsdCIsInBhcnNlVW5zaWduZWRJbnRlZ2VyIiwiTU9OR09EQl9MT0dfTUFYX0RPQ1VNRU5UX0xFTkdUSCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/mongo_logger.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/mongo_types.js":
/*!*************************************************!*\
  !*** ./node_modules/mongodb/lib/mongo_types.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CancellationToken = exports.TypedEventEmitter = void 0;\nconst events_1 = __webpack_require__(/*! events */ \"events\");\n/**\n * Typescript type safe event emitter\n * @public\n */ class TypedEventEmitter extends events_1.EventEmitter {\n    /** @internal */ emitAndLog(event, ...args) {\n        this.emit(event, ...args);\n        if (this.component) this.mongoLogger?.debug(this.component, args[0]);\n    }\n}\nexports.TypedEventEmitter = TypedEventEmitter;\n/** @public */ class CancellationToken extends TypedEventEmitter {\n}\nexports.CancellationToken = CancellationToken; //# sourceMappingURL=mongo_types.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvbW9uZ29fdHlwZXMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHlCQUF5QixHQUFHQSx5QkFBeUIsR0FBRyxLQUFLO0FBQzdELE1BQU1JLFdBQVdDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDOzs7Q0FHQyxHQUNELE1BQU1GLDBCQUEwQkMsU0FBU0UsWUFBWTtJQUNqRCxjQUFjLEdBQ2RDLFdBQVdDLEtBQUssRUFBRSxHQUFHQyxJQUFJLEVBQUU7UUFDdkIsSUFBSSxDQUFDQyxJQUFJLENBQUNGLFVBQVVDO1FBQ3BCLElBQUksSUFBSSxDQUFDRSxTQUFTLEVBQ2QsSUFBSSxDQUFDQyxXQUFXLEVBQUVDLE1BQU0sSUFBSSxDQUFDRixTQUFTLEVBQUVGLElBQUksQ0FBQyxFQUFFO0lBQ3ZEO0FBQ0o7QUFDQVQseUJBQXlCLEdBQUdHO0FBQzVCLFlBQVksR0FDWixNQUFNRCwwQkFBMEJDO0FBQ2hDO0FBQ0FILHlCQUF5QixHQUFHRSxtQkFDNUIsdUNBQXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL21vbmdvX3R5cGVzLmpzPzE0NDUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNhbmNlbGxhdGlvblRva2VuID0gZXhwb3J0cy5UeXBlZEV2ZW50RW1pdHRlciA9IHZvaWQgMDtcbmNvbnN0IGV2ZW50c18xID0gcmVxdWlyZShcImV2ZW50c1wiKTtcbi8qKlxuICogVHlwZXNjcmlwdCB0eXBlIHNhZmUgZXZlbnQgZW1pdHRlclxuICogQHB1YmxpY1xuICovXG5jbGFzcyBUeXBlZEV2ZW50RW1pdHRlciBleHRlbmRzIGV2ZW50c18xLkV2ZW50RW1pdHRlciB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGVtaXRBbmRMb2coZXZlbnQsIC4uLmFyZ3MpIHtcbiAgICAgICAgdGhpcy5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KVxuICAgICAgICAgICAgdGhpcy5tb25nb0xvZ2dlcj8uZGVidWcodGhpcy5jb21wb25lbnQsIGFyZ3NbMF0pO1xuICAgIH1cbn1cbmV4cG9ydHMuVHlwZWRFdmVudEVtaXR0ZXIgPSBUeXBlZEV2ZW50RW1pdHRlcjtcbi8qKiBAcHVibGljICovXG5jbGFzcyBDYW5jZWxsYXRpb25Ub2tlbiBleHRlbmRzIFR5cGVkRXZlbnRFbWl0dGVyIHtcbn1cbmV4cG9ydHMuQ2FuY2VsbGF0aW9uVG9rZW4gPSBDYW5jZWxsYXRpb25Ub2tlbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vbmdvX3R5cGVzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkNhbmNlbGxhdGlvblRva2VuIiwiVHlwZWRFdmVudEVtaXR0ZXIiLCJldmVudHNfMSIsInJlcXVpcmUiLCJFdmVudEVtaXR0ZXIiLCJlbWl0QW5kTG9nIiwiZXZlbnQiLCJhcmdzIiwiZW1pdCIsImNvbXBvbmVudCIsIm1vbmdvTG9nZ2VyIiwiZGVidWciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/mongo_types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/add_user.js":
/*!*********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/add_user.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AddUserOperation = void 0;\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class AddUserOperation extends command_1.CommandCallbackOperation {\n    constructor(db, username, password, options){\n        super(db, options);\n        this.db = db;\n        this.username = username;\n        this.password = password;\n        this.options = options ?? {};\n    }\n    executeCallback(server, session, callback) {\n        const db = this.db;\n        const username = this.username;\n        const password = this.password;\n        const options = this.options;\n        // Error out if digestPassword set\n        // v5 removed the digestPassword option from AddUserOptions but we still want to throw\n        // an error when digestPassword is provided.\n        if (\"digestPassword\" in options && options.digestPassword != null) {\n            return callback(new error_1.MongoInvalidArgumentError('Option \"digestPassword\" not supported via addUser, use db.command(...) instead'));\n        }\n        let roles;\n        if (!options.roles || Array.isArray(options.roles) && options.roles.length === 0) {\n            (0, utils_1.emitWarningOnce)('Creating a user without roles is deprecated. Defaults to \"root\" if db is \"admin\" or \"dbOwner\" otherwise');\n            if (db.databaseName.toLowerCase() === \"admin\") {\n                roles = [\n                    \"root\"\n                ];\n            } else {\n                roles = [\n                    \"dbOwner\"\n                ];\n            }\n        } else {\n            roles = Array.isArray(options.roles) ? options.roles : [\n                options.roles\n            ];\n        }\n        let topology;\n        try {\n            topology = (0, utils_1.getTopology)(db);\n        } catch (error) {\n            return callback(error);\n        }\n        const digestPassword = topology.lastHello().maxWireVersion >= 7;\n        let userPassword = password;\n        if (!digestPassword) {\n            // Use node md5 generator\n            const md5 = crypto.createHash(\"md5\");\n            // Generate keys used for authentication\n            md5.update(`${username}:mongo:${password}`);\n            userPassword = md5.digest(\"hex\");\n        }\n        // Build the command to execute\n        const command = {\n            createUser: username,\n            customData: options.customData || {},\n            roles: roles,\n            digestPassword\n        };\n        // No password\n        if (typeof password === \"string\") {\n            command.pwd = userPassword;\n        }\n        super.executeCommandCallback(server, session, command, callback);\n    }\n}\nexports.AddUserOperation = AddUserOperation;\n(0, operation_1.defineAspects)(AddUserOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]); //# sourceMappingURL=add_user.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9hZGRfdXNlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsd0JBQXdCLEdBQUcsS0FBSztBQUNoQyxNQUFNRyxTQUFTQyxtQkFBT0EsQ0FBQyxzQkFBUTtBQUMvQixNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRyxZQUFZSCxtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNSSxjQUFjSixtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYseUJBQXlCSyxVQUFVRSx3QkFBd0I7SUFDN0RDLFlBQVlDLEVBQUUsRUFBRUMsUUFBUSxFQUFFQyxRQUFRLEVBQUVDLE9BQU8sQ0FBRTtRQUN6QyxLQUFLLENBQUNILElBQUlHO1FBQ1YsSUFBSSxDQUFDSCxFQUFFLEdBQUdBO1FBQ1YsSUFBSSxDQUFDQyxRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0MsUUFBUSxHQUFHQTtRQUNoQixJQUFJLENBQUNDLE9BQU8sR0FBR0EsV0FBVyxDQUFDO0lBQy9CO0lBQ0FDLGdCQUFnQkMsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLFFBQVEsRUFBRTtRQUN2QyxNQUFNUCxLQUFLLElBQUksQ0FBQ0EsRUFBRTtRQUNsQixNQUFNQyxXQUFXLElBQUksQ0FBQ0EsUUFBUTtRQUM5QixNQUFNQyxXQUFXLElBQUksQ0FBQ0EsUUFBUTtRQUM5QixNQUFNQyxVQUFVLElBQUksQ0FBQ0EsT0FBTztRQUM1QixrQ0FBa0M7UUFDbEMsc0ZBQXNGO1FBQ3RGLDRDQUE0QztRQUM1QyxJQUFJLG9CQUFvQkEsV0FBV0EsUUFBUUssY0FBYyxJQUFJLE1BQU07WUFDL0QsT0FBT0QsU0FBUyxJQUFJYixRQUFRZSx5QkFBeUIsQ0FBQztRQUMxRDtRQUNBLElBQUlDO1FBQ0osSUFBSSxDQUFDUCxRQUFRTyxLQUFLLElBQUtDLE1BQU1DLE9BQU8sQ0FBQ1QsUUFBUU8sS0FBSyxLQUFLUCxRQUFRTyxLQUFLLENBQUNHLE1BQU0sS0FBSyxHQUFJO1lBQy9FLElBQUdsQixRQUFRbUIsZUFBZSxFQUFFO1lBQzdCLElBQUlkLEdBQUdlLFlBQVksQ0FBQ0MsV0FBVyxPQUFPLFNBQVM7Z0JBQzNDTixRQUFRO29CQUFDO2lCQUFPO1lBQ3BCLE9BQ0s7Z0JBQ0RBLFFBQVE7b0JBQUM7aUJBQVU7WUFDdkI7UUFDSixPQUNLO1lBQ0RBLFFBQVFDLE1BQU1DLE9BQU8sQ0FBQ1QsUUFBUU8sS0FBSyxJQUFJUCxRQUFRTyxLQUFLLEdBQUc7Z0JBQUNQLFFBQVFPLEtBQUs7YUFBQztRQUMxRTtRQUNBLElBQUlPO1FBQ0osSUFBSTtZQUNBQSxXQUFXLENBQUMsR0FBR3RCLFFBQVF1QixXQUFXLEVBQUVsQjtRQUN4QyxFQUNBLE9BQU9tQixPQUFPO1lBQ1YsT0FBT1osU0FBU1k7UUFDcEI7UUFDQSxNQUFNWCxpQkFBaUJTLFNBQVNHLFNBQVMsR0FBR0MsY0FBYyxJQUFJO1FBQzlELElBQUlDLGVBQWVwQjtRQUNuQixJQUFJLENBQUNNLGdCQUFnQjtZQUNqQix5QkFBeUI7WUFDekIsTUFBTWUsTUFBTS9CLE9BQU9nQyxVQUFVLENBQUM7WUFDOUIsd0NBQXdDO1lBQ3hDRCxJQUFJRSxNQUFNLENBQUMsQ0FBQyxFQUFFeEIsU0FBUyxPQUFPLEVBQUVDLFNBQVMsQ0FBQztZQUMxQ29CLGVBQWVDLElBQUlHLE1BQU0sQ0FBQztRQUM5QjtRQUNBLCtCQUErQjtRQUMvQixNQUFNQyxVQUFVO1lBQ1pDLFlBQVkzQjtZQUNaNEIsWUFBWTFCLFFBQVEwQixVQUFVLElBQUksQ0FBQztZQUNuQ25CLE9BQU9BO1lBQ1BGO1FBQ0o7UUFDQSxjQUFjO1FBQ2QsSUFBSSxPQUFPTixhQUFhLFVBQVU7WUFDOUJ5QixRQUFRRyxHQUFHLEdBQUdSO1FBQ2xCO1FBQ0EsS0FBSyxDQUFDUyx1QkFBdUIxQixRQUFRQyxTQUFTcUIsU0FBU3BCO0lBQzNEO0FBQ0o7QUFDQWxCLHdCQUF3QixHQUFHRTtBQUMxQixJQUFHTSxZQUFZbUMsYUFBYSxFQUFFekMsa0JBQWtCO0lBQUNNLFlBQVlvQyxNQUFNLENBQUNDLGVBQWU7Q0FBQyxHQUNyRixvQ0FBb0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9hZGRfdXNlci5qcz9iMjEzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BZGRVc2VyT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgY3J5cHRvID0gcmVxdWlyZShcImNyeXB0b1wiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgY29tbWFuZF8xID0gcmVxdWlyZShcIi4vY29tbWFuZFwiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgQWRkVXNlck9wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kQ2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGRiLCB1c2VybmFtZSwgcGFzc3dvcmQsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoZGIsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IHBhc3N3b3JkO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zID8/IHt9O1xuICAgIH1cbiAgICBleGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBkYiA9IHRoaXMuZGI7XG4gICAgICAgIGNvbnN0IHVzZXJuYW1lID0gdGhpcy51c2VybmFtZTtcbiAgICAgICAgY29uc3QgcGFzc3dvcmQgPSB0aGlzLnBhc3N3b3JkO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAvLyBFcnJvciBvdXQgaWYgZGlnZXN0UGFzc3dvcmQgc2V0XG4gICAgICAgIC8vIHY1IHJlbW92ZWQgdGhlIGRpZ2VzdFBhc3N3b3JkIG9wdGlvbiBmcm9tIEFkZFVzZXJPcHRpb25zIGJ1dCB3ZSBzdGlsbCB3YW50IHRvIHRocm93XG4gICAgICAgIC8vIGFuIGVycm9yIHdoZW4gZGlnZXN0UGFzc3dvcmQgaXMgcHJvdmlkZWQuXG4gICAgICAgIGlmICgnZGlnZXN0UGFzc3dvcmQnIGluIG9wdGlvbnMgJiYgb3B0aW9ucy5kaWdlc3RQYXNzd29yZCAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignT3B0aW9uIFwiZGlnZXN0UGFzc3dvcmRcIiBub3Qgc3VwcG9ydGVkIHZpYSBhZGRVc2VyLCB1c2UgZGIuY29tbWFuZCguLi4pIGluc3RlYWQnKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJvbGVzO1xuICAgICAgICBpZiAoIW9wdGlvbnMucm9sZXMgfHwgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5yb2xlcykgJiYgb3B0aW9ucy5yb2xlcy5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgICAoMCwgdXRpbHNfMS5lbWl0V2FybmluZ09uY2UpKCdDcmVhdGluZyBhIHVzZXIgd2l0aG91dCByb2xlcyBpcyBkZXByZWNhdGVkLiBEZWZhdWx0cyB0byBcInJvb3RcIiBpZiBkYiBpcyBcImFkbWluXCIgb3IgXCJkYk93bmVyXCIgb3RoZXJ3aXNlJyk7XG4gICAgICAgICAgICBpZiAoZGIuZGF0YWJhc2VOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhZG1pbicpIHtcbiAgICAgICAgICAgICAgICByb2xlcyA9IFsncm9vdCddO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcm9sZXMgPSBbJ2RiT3duZXInXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJvbGVzID0gQXJyYXkuaXNBcnJheShvcHRpb25zLnJvbGVzKSA/IG9wdGlvbnMucm9sZXMgOiBbb3B0aW9ucy5yb2xlc107XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRvcG9sb2d5O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdG9wb2xvZ3kgPSAoMCwgdXRpbHNfMS5nZXRUb3BvbG9neSkoZGIpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaWdlc3RQYXNzd29yZCA9IHRvcG9sb2d5Lmxhc3RIZWxsbygpLm1heFdpcmVWZXJzaW9uID49IDc7XG4gICAgICAgIGxldCB1c2VyUGFzc3dvcmQgPSBwYXNzd29yZDtcbiAgICAgICAgaWYgKCFkaWdlc3RQYXNzd29yZCkge1xuICAgICAgICAgICAgLy8gVXNlIG5vZGUgbWQ1IGdlbmVyYXRvclxuICAgICAgICAgICAgY29uc3QgbWQ1ID0gY3J5cHRvLmNyZWF0ZUhhc2goJ21kNScpO1xuICAgICAgICAgICAgLy8gR2VuZXJhdGUga2V5cyB1c2VkIGZvciBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgbWQ1LnVwZGF0ZShgJHt1c2VybmFtZX06bW9uZ286JHtwYXNzd29yZH1gKTtcbiAgICAgICAgICAgIHVzZXJQYXNzd29yZCA9IG1kNS5kaWdlc3QoJ2hleCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEJ1aWxkIHRoZSBjb21tYW5kIHRvIGV4ZWN1dGVcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHtcbiAgICAgICAgICAgIGNyZWF0ZVVzZXI6IHVzZXJuYW1lLFxuICAgICAgICAgICAgY3VzdG9tRGF0YTogb3B0aW9ucy5jdXN0b21EYXRhIHx8IHt9LFxuICAgICAgICAgICAgcm9sZXM6IHJvbGVzLFxuICAgICAgICAgICAgZGlnZXN0UGFzc3dvcmRcbiAgICAgICAgfTtcbiAgICAgICAgLy8gTm8gcGFzc3dvcmRcbiAgICAgICAgaWYgKHR5cGVvZiBwYXNzd29yZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNvbW1hbmQucHdkID0gdXNlclBhc3N3b3JkO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmV4ZWN1dGVDb21tYW5kQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjb21tYW5kLCBjYWxsYmFjayk7XG4gICAgfVxufVxuZXhwb3J0cy5BZGRVc2VyT3BlcmF0aW9uID0gQWRkVXNlck9wZXJhdGlvbjtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShBZGRVc2VyT3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRkX3VzZXIuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQWRkVXNlck9wZXJhdGlvbiIsImNyeXB0byIsInJlcXVpcmUiLCJlcnJvcl8xIiwidXRpbHNfMSIsImNvbW1hbmRfMSIsIm9wZXJhdGlvbl8xIiwiQ29tbWFuZENhbGxiYWNrT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJkYiIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJvcHRpb25zIiwiZXhlY3V0ZUNhbGxiYWNrIiwic2VydmVyIiwic2Vzc2lvbiIsImNhbGxiYWNrIiwiZGlnZXN0UGFzc3dvcmQiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwicm9sZXMiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJlbWl0V2FybmluZ09uY2UiLCJkYXRhYmFzZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsInRvcG9sb2d5IiwiZ2V0VG9wb2xvZ3kiLCJlcnJvciIsImxhc3RIZWxsbyIsIm1heFdpcmVWZXJzaW9uIiwidXNlclBhc3N3b3JkIiwibWQ1IiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsImNvbW1hbmQiLCJjcmVhdGVVc2VyIiwiY3VzdG9tRGF0YSIsInB3ZCIsImV4ZWN1dGVDb21tYW5kQ2FsbGJhY2siLCJkZWZpbmVBc3BlY3RzIiwiQXNwZWN0IiwiV1JJVEVfT1BFUkFUSU9OIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/add_user.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/aggregate.js":
/*!**********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/aggregate.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AggregateOperation = exports.DB_AGGREGATE_COLLECTION = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst write_concern_1 = __webpack_require__(/*! ../write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ exports.DB_AGGREGATE_COLLECTION = 1;\nconst MIN_WIRE_VERSION_$OUT_READ_CONCERN_SUPPORT = 8;\n/** @internal */ class AggregateOperation extends command_1.CommandCallbackOperation {\n    constructor(ns, pipeline, options){\n        super(undefined, {\n            ...options,\n            dbName: ns.db\n        });\n        this.options = {\n            ...options\n        };\n        // Covers when ns.collection is null, undefined or the empty string, use DB_AGGREGATE_COLLECTION\n        this.target = ns.collection || exports.DB_AGGREGATE_COLLECTION;\n        this.pipeline = pipeline;\n        // determine if we have a write stage, override read preference if so\n        this.hasWriteStage = false;\n        if (typeof options?.out === \"string\") {\n            this.pipeline = this.pipeline.concat({\n                $out: options.out\n            });\n            this.hasWriteStage = true;\n        } else if (pipeline.length > 0) {\n            const finalStage = pipeline[pipeline.length - 1];\n            if (finalStage.$out || finalStage.$merge) {\n                this.hasWriteStage = true;\n            }\n        }\n        if (this.hasWriteStage) {\n            this.trySecondaryWrite = true;\n        } else {\n            delete this.options.writeConcern;\n        }\n        if (this.explain && this.writeConcern) {\n            throw new error_1.MongoInvalidArgumentError('Option \"explain\" cannot be used on an aggregate call with writeConcern');\n        }\n        if (options?.cursor != null && typeof options.cursor !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError(\"Cursor options must be an object\");\n        }\n    }\n    get canRetryRead() {\n        return !this.hasWriteStage;\n    }\n    addToPipeline(stage) {\n        this.pipeline.push(stage);\n    }\n    executeCallback(server, session, callback) {\n        const options = this.options;\n        const serverWireVersion = (0, utils_1.maxWireVersion)(server);\n        const command = {\n            aggregate: this.target,\n            pipeline: this.pipeline\n        };\n        if (this.hasWriteStage && serverWireVersion < MIN_WIRE_VERSION_$OUT_READ_CONCERN_SUPPORT) {\n            this.readConcern = undefined;\n        }\n        if (this.hasWriteStage && this.writeConcern) {\n            write_concern_1.WriteConcern.apply(command, this.writeConcern);\n        }\n        if (options.bypassDocumentValidation === true) {\n            command.bypassDocumentValidation = options.bypassDocumentValidation;\n        }\n        if (typeof options.allowDiskUse === \"boolean\") {\n            command.allowDiskUse = options.allowDiskUse;\n        }\n        if (options.hint) {\n            command.hint = options.hint;\n        }\n        if (options.let) {\n            command.let = options.let;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (options.comment !== undefined) {\n            command.comment = options.comment;\n        }\n        command.cursor = options.cursor || {};\n        if (options.batchSize && !this.hasWriteStage) {\n            command.cursor.batchSize = options.batchSize;\n        }\n        super.executeCommandCallback(server, session, command, callback);\n    }\n}\nexports.AggregateOperation = AggregateOperation;\n(0, operation_1.defineAspects)(AggregateOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.EXPLAINABLE,\n    operation_1.Aspect.CURSOR_CREATING\n]); //# sourceMappingURL=aggregate.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9hZ2dyZWdhdGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDBCQUEwQixHQUFHQSwrQkFBK0IsR0FBRyxLQUFLO0FBQ3BFLE1BQU1JLFVBQVVDLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1FLGtCQUFrQkYsbUJBQU9BLENBQUMsMkVBQWtCO0FBQ2xELE1BQU1HLFlBQVlILG1CQUFPQSxDQUFDLHlFQUFXO0FBQ3JDLE1BQU1JLGNBQWNKLG1CQUFPQSxDQUFDLDZFQUFhO0FBQ3pDLGNBQWMsR0FDZEwsK0JBQStCLEdBQUc7QUFDbEMsTUFBTVUsNkNBQTZDO0FBQ25ELGNBQWMsR0FDZCxNQUFNUiwyQkFBMkJNLFVBQVVHLHdCQUF3QjtJQUMvREMsWUFBWUMsRUFBRSxFQUFFQyxRQUFRLEVBQUVDLE9BQU8sQ0FBRTtRQUMvQixLQUFLLENBQUNDLFdBQVc7WUFBRSxHQUFHRCxPQUFPO1lBQUVFLFFBQVFKLEdBQUdLLEVBQUU7UUFBQztRQUM3QyxJQUFJLENBQUNILE9BQU8sR0FBRztZQUFFLEdBQUdBLE9BQU87UUFBQztRQUM1QixnR0FBZ0c7UUFDaEcsSUFBSSxDQUFDSSxNQUFNLEdBQUdOLEdBQUdPLFVBQVUsSUFBSXBCLFFBQVFHLHVCQUF1QjtRQUM5RCxJQUFJLENBQUNXLFFBQVEsR0FBR0E7UUFDaEIscUVBQXFFO1FBQ3JFLElBQUksQ0FBQ08sYUFBYSxHQUFHO1FBQ3JCLElBQUksT0FBT04sU0FBU08sUUFBUSxVQUFVO1lBQ2xDLElBQUksQ0FBQ1IsUUFBUSxHQUFHLElBQUksQ0FBQ0EsUUFBUSxDQUFDUyxNQUFNLENBQUM7Z0JBQUVDLE1BQU1ULFFBQVFPLEdBQUc7WUFBQztZQUN6RCxJQUFJLENBQUNELGFBQWEsR0FBRztRQUN6QixPQUNLLElBQUlQLFNBQVNXLE1BQU0sR0FBRyxHQUFHO1lBQzFCLE1BQU1DLGFBQWFaLFFBQVEsQ0FBQ0EsU0FBU1csTUFBTSxHQUFHLEVBQUU7WUFDaEQsSUFBSUMsV0FBV0YsSUFBSSxJQUFJRSxXQUFXQyxNQUFNLEVBQUU7Z0JBQ3RDLElBQUksQ0FBQ04sYUFBYSxHQUFHO1lBQ3pCO1FBQ0o7UUFDQSxJQUFJLElBQUksQ0FBQ0EsYUFBYSxFQUFFO1lBQ3BCLElBQUksQ0FBQ08saUJBQWlCLEdBQUc7UUFDN0IsT0FDSztZQUNELE9BQU8sSUFBSSxDQUFDYixPQUFPLENBQUNjLFlBQVk7UUFDcEM7UUFDQSxJQUFJLElBQUksQ0FBQ0MsT0FBTyxJQUFJLElBQUksQ0FBQ0QsWUFBWSxFQUFFO1lBQ25DLE1BQU0sSUFBSXpCLFFBQVEyQix5QkFBeUIsQ0FBQztRQUNoRDtRQUNBLElBQUloQixTQUFTaUIsVUFBVSxRQUFRLE9BQU9qQixRQUFRaUIsTUFBTSxLQUFLLFVBQVU7WUFDL0QsTUFBTSxJQUFJNUIsUUFBUTJCLHlCQUF5QixDQUFDO1FBQ2hEO0lBQ0o7SUFDQSxJQUFJRSxlQUFlO1FBQ2YsT0FBTyxDQUFDLElBQUksQ0FBQ1osYUFBYTtJQUM5QjtJQUNBYSxjQUFjQyxLQUFLLEVBQUU7UUFDakIsSUFBSSxDQUFDckIsUUFBUSxDQUFDc0IsSUFBSSxDQUFDRDtJQUN2QjtJQUNBRSxnQkFBZ0JDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDdkMsTUFBTXpCLFVBQVUsSUFBSSxDQUFDQSxPQUFPO1FBQzVCLE1BQU0wQixvQkFBb0IsQ0FBQyxHQUFHbkMsUUFBUW9DLGNBQWMsRUFBRUo7UUFDdEQsTUFBTUssVUFBVTtZQUFFQyxXQUFXLElBQUksQ0FBQ3pCLE1BQU07WUFBRUwsVUFBVSxJQUFJLENBQUNBLFFBQVE7UUFBQztRQUNsRSxJQUFJLElBQUksQ0FBQ08sYUFBYSxJQUFJb0Isb0JBQW9CL0IsNENBQTRDO1lBQ3RGLElBQUksQ0FBQ21DLFdBQVcsR0FBRzdCO1FBQ3ZCO1FBQ0EsSUFBSSxJQUFJLENBQUNLLGFBQWEsSUFBSSxJQUFJLENBQUNRLFlBQVksRUFBRTtZQUN6Q3RCLGdCQUFnQnVDLFlBQVksQ0FBQ0MsS0FBSyxDQUFDSixTQUFTLElBQUksQ0FBQ2QsWUFBWTtRQUNqRTtRQUNBLElBQUlkLFFBQVFpQyx3QkFBd0IsS0FBSyxNQUFNO1lBQzNDTCxRQUFRSyx3QkFBd0IsR0FBR2pDLFFBQVFpQyx3QkFBd0I7UUFDdkU7UUFDQSxJQUFJLE9BQU9qQyxRQUFRa0MsWUFBWSxLQUFLLFdBQVc7WUFDM0NOLFFBQVFNLFlBQVksR0FBR2xDLFFBQVFrQyxZQUFZO1FBQy9DO1FBQ0EsSUFBSWxDLFFBQVFtQyxJQUFJLEVBQUU7WUFDZFAsUUFBUU8sSUFBSSxHQUFHbkMsUUFBUW1DLElBQUk7UUFDL0I7UUFDQSxJQUFJbkMsUUFBUW9DLEdBQUcsRUFBRTtZQUNiUixRQUFRUSxHQUFHLEdBQUdwQyxRQUFRb0MsR0FBRztRQUM3QjtRQUNBLGlFQUFpRTtRQUNqRSxnREFBZ0Q7UUFDaEQsSUFBSXBDLFFBQVFxQyxPQUFPLEtBQUtwQyxXQUFXO1lBQy9CMkIsUUFBUVMsT0FBTyxHQUFHckMsUUFBUXFDLE9BQU87UUFDckM7UUFDQVQsUUFBUVgsTUFBTSxHQUFHakIsUUFBUWlCLE1BQU0sSUFBSSxDQUFDO1FBQ3BDLElBQUlqQixRQUFRc0MsU0FBUyxJQUFJLENBQUMsSUFBSSxDQUFDaEMsYUFBYSxFQUFFO1lBQzFDc0IsUUFBUVgsTUFBTSxDQUFDcUIsU0FBUyxHQUFHdEMsUUFBUXNDLFNBQVM7UUFDaEQ7UUFDQSxLQUFLLENBQUNDLHVCQUF1QmhCLFFBQVFDLFNBQVNJLFNBQVNIO0lBQzNEO0FBQ0o7QUFDQXhDLDBCQUEwQixHQUFHRTtBQUM1QixJQUFHTyxZQUFZOEMsYUFBYSxFQUFFckQsb0JBQW9CO0lBQy9DTyxZQUFZK0MsTUFBTSxDQUFDQyxjQUFjO0lBQ2pDaEQsWUFBWStDLE1BQU0sQ0FBQ0UsU0FBUztJQUM1QmpELFlBQVkrQyxNQUFNLENBQUNHLFdBQVc7SUFDOUJsRCxZQUFZK0MsTUFBTSxDQUFDSSxlQUFlO0NBQ3JDLEdBQ0QscUNBQXFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvYWdncmVnYXRlLmpzPzc4ZmYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkFnZ3JlZ2F0ZU9wZXJhdGlvbiA9IGV4cG9ydHMuREJfQUdHUkVHQVRFX0NPTExFQ1RJT04gPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IHdyaXRlX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuLi93cml0ZV9jb25jZXJuXCIpO1xuY29uc3QgY29tbWFuZF8xID0gcmVxdWlyZShcIi4vY29tbWFuZFwiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5EQl9BR0dSRUdBVEVfQ09MTEVDVElPTiA9IDE7XG5jb25zdCBNSU5fV0lSRV9WRVJTSU9OXyRPVVRfUkVBRF9DT05DRVJOX1NVUFBPUlQgPSA4O1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgQWdncmVnYXRlT3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRDYWxsYmFja09wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IobnMsIHBpcGVsaW5lLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKHVuZGVmaW5lZCwgeyAuLi5vcHRpb25zLCBkYk5hbWU6IG5zLmRiIH0pO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcbiAgICAgICAgLy8gQ292ZXJzIHdoZW4gbnMuY29sbGVjdGlvbiBpcyBudWxsLCB1bmRlZmluZWQgb3IgdGhlIGVtcHR5IHN0cmluZywgdXNlIERCX0FHR1JFR0FURV9DT0xMRUNUSU9OXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbnMuY29sbGVjdGlvbiB8fCBleHBvcnRzLkRCX0FHR1JFR0FURV9DT0xMRUNUSU9OO1xuICAgICAgICB0aGlzLnBpcGVsaW5lID0gcGlwZWxpbmU7XG4gICAgICAgIC8vIGRldGVybWluZSBpZiB3ZSBoYXZlIGEgd3JpdGUgc3RhZ2UsIG92ZXJyaWRlIHJlYWQgcHJlZmVyZW5jZSBpZiBzb1xuICAgICAgICB0aGlzLmhhc1dyaXRlU3RhZ2UgPSBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zPy5vdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLnBpcGVsaW5lID0gdGhpcy5waXBlbGluZS5jb25jYXQoeyAkb3V0OiBvcHRpb25zLm91dCB9KTtcbiAgICAgICAgICAgIHRoaXMuaGFzV3JpdGVTdGFnZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGlwZWxpbmUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZmluYWxTdGFnZSA9IHBpcGVsaW5lW3BpcGVsaW5lLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgaWYgKGZpbmFsU3RhZ2UuJG91dCB8fCBmaW5hbFN0YWdlLiRtZXJnZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFzV3JpdGVTdGFnZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGFzV3JpdGVTdGFnZSkge1xuICAgICAgICAgICAgdGhpcy50cnlTZWNvbmRhcnlXcml0ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5vcHRpb25zLndyaXRlQ29uY2VybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leHBsYWluICYmIHRoaXMud3JpdGVDb25jZXJuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdPcHRpb24gXCJleHBsYWluXCIgY2Fubm90IGJlIHVzZWQgb24gYW4gYWdncmVnYXRlIGNhbGwgd2l0aCB3cml0ZUNvbmNlcm4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucz8uY3Vyc29yICE9IG51bGwgJiYgdHlwZW9mIG9wdGlvbnMuY3Vyc29yICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignQ3Vyc29yIG9wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgY2FuUmV0cnlSZWFkKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuaGFzV3JpdGVTdGFnZTtcbiAgICB9XG4gICAgYWRkVG9QaXBlbGluZShzdGFnZSkge1xuICAgICAgICB0aGlzLnBpcGVsaW5lLnB1c2goc3RhZ2UpO1xuICAgIH1cbiAgICBleGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBzZXJ2ZXJXaXJlVmVyc2lvbiA9ICgwLCB1dGlsc18xLm1heFdpcmVWZXJzaW9uKShzZXJ2ZXIpO1xuICAgICAgICBjb25zdCBjb21tYW5kID0geyBhZ2dyZWdhdGU6IHRoaXMudGFyZ2V0LCBwaXBlbGluZTogdGhpcy5waXBlbGluZSB9O1xuICAgICAgICBpZiAodGhpcy5oYXNXcml0ZVN0YWdlICYmIHNlcnZlcldpcmVWZXJzaW9uIDwgTUlOX1dJUkVfVkVSU0lPTl8kT1VUX1JFQURfQ09OQ0VSTl9TVVBQT1JUKSB7XG4gICAgICAgICAgICB0aGlzLnJlYWRDb25jZXJuID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhc1dyaXRlU3RhZ2UgJiYgdGhpcy53cml0ZUNvbmNlcm4pIHtcbiAgICAgICAgICAgIHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uYXBwbHkoY29tbWFuZCwgdGhpcy53cml0ZUNvbmNlcm4pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmJ5cGFzc0RvY3VtZW50VmFsaWRhdGlvbiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29tbWFuZC5ieXBhc3NEb2N1bWVudFZhbGlkYXRpb24gPSBvcHRpb25zLmJ5cGFzc0RvY3VtZW50VmFsaWRhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuYWxsb3dEaXNrVXNlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuYWxsb3dEaXNrVXNlID0gb3B0aW9ucy5hbGxvd0Rpc2tVc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaGludCkge1xuICAgICAgICAgICAgY29tbWFuZC5oaW50ID0gb3B0aW9ucy5oaW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmxldCkge1xuICAgICAgICAgICAgY29tbWFuZC5sZXQgPSBvcHRpb25zLmxldDtcbiAgICAgICAgfVxuICAgICAgICAvLyB3ZSBjaGVjayBmb3IgdW5kZWZpbmVkIHNwZWNpZmljYWxseSBoZXJlIHRvIGFsbG93IGZhbHN5IHZhbHVlc1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgaWYgKG9wdGlvbnMuY29tbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb21tYW5kLmNvbW1lbnQgPSBvcHRpb25zLmNvbW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY29tbWFuZC5jdXJzb3IgPSBvcHRpb25zLmN1cnNvciB8fCB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYmF0Y2hTaXplICYmICF0aGlzLmhhc1dyaXRlU3RhZ2UpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuY3Vyc29yLmJhdGNoU2l6ZSA9IG9wdGlvbnMuYmF0Y2hTaXplO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmV4ZWN1dGVDb21tYW5kQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjb21tYW5kLCBjYWxsYmFjayk7XG4gICAgfVxufVxuZXhwb3J0cy5BZ2dyZWdhdGVPcGVyYXRpb24gPSBBZ2dyZWdhdGVPcGVyYXRpb247XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoQWdncmVnYXRlT3BlcmF0aW9uLCBbXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LlJFQURfT1BFUkFUSU9OLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5SRVRSWUFCTEUsXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LkVYUExBSU5BQkxFLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5DVVJTT1JfQ1JFQVRJTkdcbl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWdncmVnYXRlLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkFnZ3JlZ2F0ZU9wZXJhdGlvbiIsIkRCX0FHR1JFR0FURV9DT0xMRUNUSU9OIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJ1dGlsc18xIiwid3JpdGVfY29uY2Vybl8xIiwiY29tbWFuZF8xIiwib3BlcmF0aW9uXzEiLCJNSU5fV0lSRV9WRVJTSU9OXyRPVVRfUkVBRF9DT05DRVJOX1NVUFBPUlQiLCJDb21tYW5kQ2FsbGJhY2tPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsIm5zIiwicGlwZWxpbmUiLCJvcHRpb25zIiwidW5kZWZpbmVkIiwiZGJOYW1lIiwiZGIiLCJ0YXJnZXQiLCJjb2xsZWN0aW9uIiwiaGFzV3JpdGVTdGFnZSIsIm91dCIsImNvbmNhdCIsIiRvdXQiLCJsZW5ndGgiLCJmaW5hbFN0YWdlIiwiJG1lcmdlIiwidHJ5U2Vjb25kYXJ5V3JpdGUiLCJ3cml0ZUNvbmNlcm4iLCJleHBsYWluIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsImN1cnNvciIsImNhblJldHJ5UmVhZCIsImFkZFRvUGlwZWxpbmUiLCJzdGFnZSIsInB1c2giLCJleGVjdXRlQ2FsbGJhY2siLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJzZXJ2ZXJXaXJlVmVyc2lvbiIsIm1heFdpcmVWZXJzaW9uIiwiY29tbWFuZCIsImFnZ3JlZ2F0ZSIsInJlYWRDb25jZXJuIiwiV3JpdGVDb25jZXJuIiwiYXBwbHkiLCJieXBhc3NEb2N1bWVudFZhbGlkYXRpb24iLCJhbGxvd0Rpc2tVc2UiLCJoaW50IiwibGV0IiwiY29tbWVudCIsImJhdGNoU2l6ZSIsImV4ZWN1dGVDb21tYW5kQ2FsbGJhY2siLCJkZWZpbmVBc3BlY3RzIiwiQXNwZWN0IiwiUkVBRF9PUEVSQVRJT04iLCJSRVRSWUFCTEUiLCJFWFBMQUlOQUJMRSIsIkNVUlNPUl9DUkVBVElORyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/aggregate.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/bulk_write.js":
/*!***********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/bulk_write.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.BulkWriteOperation = void 0;\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class BulkWriteOperation extends operation_1.AbstractCallbackOperation {\n    constructor(collection, operations, options){\n        super(options);\n        this.options = options;\n        this.collection = collection;\n        this.operations = operations;\n    }\n    executeCallback(server, session, callback) {\n        const coll = this.collection;\n        const operations = this.operations;\n        const options = {\n            ...this.options,\n            ...this.bsonOptions,\n            readPreference: this.readPreference\n        };\n        // Create the bulk operation\n        const bulk = options.ordered === false ? coll.initializeUnorderedBulkOp(options) : coll.initializeOrderedBulkOp(options);\n        // for each op go through and add to the bulk\n        try {\n            for(let i = 0; i < operations.length; i++){\n                bulk.raw(operations[i]);\n            }\n        } catch (err) {\n            return callback(err);\n        }\n        // Execute the bulk\n        bulk.execute({\n            ...options,\n            session\n        }).then((result)=>callback(undefined, result), (error)=>callback(error));\n    }\n}\nexports.BulkWriteOperation = BulkWriteOperation;\n(0, operation_1.defineAspects)(BulkWriteOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]); //# sourceMappingURL=bulk_write.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9idWxrX3dyaXRlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwwQkFBMEIsR0FBRyxLQUFLO0FBQ2xDLE1BQU1HLGNBQWNDLG1CQUFPQSxDQUFDLDZFQUFhO0FBQ3pDLGNBQWMsR0FDZCxNQUFNRiwyQkFBMkJDLFlBQVlFLHlCQUF5QjtJQUNsRUMsWUFBWUMsVUFBVSxFQUFFQyxVQUFVLEVBQUVDLE9BQU8sQ0FBRTtRQUN6QyxLQUFLLENBQUNBO1FBQ04sSUFBSSxDQUFDQSxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDRixVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsVUFBVSxHQUFHQTtJQUN0QjtJQUNBRSxnQkFBZ0JDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDdkMsTUFBTUMsT0FBTyxJQUFJLENBQUNQLFVBQVU7UUFDNUIsTUFBTUMsYUFBYSxJQUFJLENBQUNBLFVBQVU7UUFDbEMsTUFBTUMsVUFBVTtZQUFFLEdBQUcsSUFBSSxDQUFDQSxPQUFPO1lBQUUsR0FBRyxJQUFJLENBQUNNLFdBQVc7WUFBRUMsZ0JBQWdCLElBQUksQ0FBQ0EsY0FBYztRQUFDO1FBQzVGLDRCQUE0QjtRQUM1QixNQUFNQyxPQUFPUixRQUFRUyxPQUFPLEtBQUssUUFDM0JKLEtBQUtLLHlCQUF5QixDQUFDVixXQUMvQkssS0FBS00sdUJBQXVCLENBQUNYO1FBQ25DLDZDQUE2QztRQUM3QyxJQUFJO1lBQ0EsSUFBSyxJQUFJWSxJQUFJLEdBQUdBLElBQUliLFdBQVdjLE1BQU0sRUFBRUQsSUFBSztnQkFDeENKLEtBQUtNLEdBQUcsQ0FBQ2YsVUFBVSxDQUFDYSxFQUFFO1lBQzFCO1FBQ0osRUFDQSxPQUFPRyxLQUFLO1lBQ1IsT0FBT1gsU0FBU1c7UUFDcEI7UUFDQSxtQkFBbUI7UUFDbkJQLEtBQUtRLE9BQU8sQ0FBQztZQUFFLEdBQUdoQixPQUFPO1lBQUVHO1FBQVEsR0FBR2MsSUFBSSxDQUFDQyxDQUFBQSxTQUFVZCxTQUFTZSxXQUFXRCxTQUFTRSxDQUFBQSxRQUFTaEIsU0FBU2dCO0lBQ3hHO0FBQ0o7QUFDQTdCLDBCQUEwQixHQUFHRTtBQUM1QixJQUFHQyxZQUFZMkIsYUFBYSxFQUFFNUIsb0JBQW9CO0lBQUNDLFlBQVk0QixNQUFNLENBQUNDLGVBQWU7Q0FBQyxHQUN2RixzQ0FBc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9idWxrX3dyaXRlLmpzP2UyYWYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkJ1bGtXcml0ZU9wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgQnVsa1dyaXRlT3BlcmF0aW9uIGV4dGVuZHMgb3BlcmF0aW9uXzEuQWJzdHJhY3RDYWxsYmFja09wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgb3BlcmF0aW9ucywgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zID0gb3BlcmF0aW9ucztcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgY29sbCA9IHRoaXMuY29sbGVjdGlvbjtcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9ucyA9IHRoaXMub3BlcmF0aW9ucztcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHsgLi4udGhpcy5vcHRpb25zLCAuLi50aGlzLmJzb25PcHRpb25zLCByZWFkUHJlZmVyZW5jZTogdGhpcy5yZWFkUHJlZmVyZW5jZSB9O1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGJ1bGsgb3BlcmF0aW9uXG4gICAgICAgIGNvbnN0IGJ1bGsgPSBvcHRpb25zLm9yZGVyZWQgPT09IGZhbHNlXG4gICAgICAgICAgICA/IGNvbGwuaW5pdGlhbGl6ZVVub3JkZXJlZEJ1bGtPcChvcHRpb25zKVxuICAgICAgICAgICAgOiBjb2xsLmluaXRpYWxpemVPcmRlcmVkQnVsa09wKG9wdGlvbnMpO1xuICAgICAgICAvLyBmb3IgZWFjaCBvcCBnbyB0aHJvdWdoIGFuZCBhZGQgdG8gdGhlIGJ1bGtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3BlcmF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGJ1bGsucmF3KG9wZXJhdGlvbnNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIGJ1bGtcbiAgICAgICAgYnVsay5leGVjdXRlKHsgLi4ub3B0aW9ucywgc2Vzc2lvbiB9KS50aGVuKHJlc3VsdCA9PiBjYWxsYmFjayh1bmRlZmluZWQsIHJlc3VsdCksIGVycm9yID0+IGNhbGxiYWNrKGVycm9yKSk7XG4gICAgfVxufVxuZXhwb3J0cy5CdWxrV3JpdGVPcGVyYXRpb24gPSBCdWxrV3JpdGVPcGVyYXRpb247XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoQnVsa1dyaXRlT3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVsa193cml0ZS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJCdWxrV3JpdGVPcGVyYXRpb24iLCJvcGVyYXRpb25fMSIsInJlcXVpcmUiLCJBYnN0cmFjdENhbGxiYWNrT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJjb2xsZWN0aW9uIiwib3BlcmF0aW9ucyIsIm9wdGlvbnMiLCJleGVjdXRlQ2FsbGJhY2siLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJjb2xsIiwiYnNvbk9wdGlvbnMiLCJyZWFkUHJlZmVyZW5jZSIsImJ1bGsiLCJvcmRlcmVkIiwiaW5pdGlhbGl6ZVVub3JkZXJlZEJ1bGtPcCIsImluaXRpYWxpemVPcmRlcmVkQnVsa09wIiwiaSIsImxlbmd0aCIsInJhdyIsImVyciIsImV4ZWN1dGUiLCJ0aGVuIiwicmVzdWx0IiwidW5kZWZpbmVkIiwiZXJyb3IiLCJkZWZpbmVBc3BlY3RzIiwiQXNwZWN0IiwiV1JJVEVfT1BFUkFUSU9OIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/bulk_write.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/collections.js":
/*!************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/collections.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CollectionsOperation = void 0;\nconst collection_1 = __webpack_require__(/*! ../collection */ \"(ssr)/./node_modules/mongodb/lib/collection.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class CollectionsOperation extends operation_1.AbstractCallbackOperation {\n    constructor(db, options){\n        super(options);\n        this.options = options;\n        this.db = db;\n    }\n    executeCallback(server, session, callback) {\n        // Let's get the collection names\n        this.db.listCollections({}, {\n            ...this.options,\n            nameOnly: true,\n            readPreference: this.readPreference,\n            session\n        }).toArray().then((documents)=>{\n            const collections = [];\n            for (const { name } of documents){\n                if (!name.includes(\"$\")) {\n                    // Filter collections removing any illegal ones\n                    collections.push(new collection_1.Collection(this.db, name, this.db.s.options));\n                }\n            }\n            // Return the collection objects\n            callback(undefined, collections);\n        }, (error)=>callback(error));\n    }\n}\nexports.CollectionsOperation = CollectionsOperation; //# sourceMappingURL=collections.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9jb2xsZWN0aW9ucy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsNEJBQTRCLEdBQUcsS0FBSztBQUNwQyxNQUFNRyxlQUFlQyxtQkFBT0EsQ0FBQyxxRUFBZTtBQUM1QyxNQUFNQyxjQUFjRCxtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYsNkJBQTZCRyxZQUFZQyx5QkFBeUI7SUFDcEVDLFlBQVlDLEVBQUUsRUFBRUMsT0FBTyxDQUFFO1FBQ3JCLEtBQUssQ0FBQ0E7UUFDTixJQUFJLENBQUNBLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNELEVBQUUsR0FBR0E7SUFDZDtJQUNBRSxnQkFBZ0JDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDdkMsaUNBQWlDO1FBQ2pDLElBQUksQ0FBQ0wsRUFBRSxDQUNGTSxlQUFlLENBQUMsQ0FBQyxHQUFHO1lBQUUsR0FBRyxJQUFJLENBQUNMLE9BQU87WUFBRU0sVUFBVTtZQUFNQyxnQkFBZ0IsSUFBSSxDQUFDQSxjQUFjO1lBQUVKO1FBQVEsR0FDcEdLLE9BQU8sR0FDUEMsSUFBSSxDQUFDQyxDQUFBQTtZQUNOLE1BQU1DLGNBQWMsRUFBRTtZQUN0QixLQUFLLE1BQU0sRUFBRUMsSUFBSSxFQUFFLElBQUlGLFVBQVc7Z0JBQzlCLElBQUksQ0FBQ0UsS0FBS0MsUUFBUSxDQUFDLE1BQU07b0JBQ3JCLCtDQUErQztvQkFDL0NGLFlBQVlHLElBQUksQ0FBQyxJQUFJcEIsYUFBYXFCLFVBQVUsQ0FBQyxJQUFJLENBQUNoQixFQUFFLEVBQUVhLE1BQU0sSUFBSSxDQUFDYixFQUFFLENBQUNpQixDQUFDLENBQUNoQixPQUFPO2dCQUNqRjtZQUNKO1lBQ0EsZ0NBQWdDO1lBQ2hDSSxTQUFTYSxXQUFXTjtRQUN4QixHQUFHTyxDQUFBQSxRQUFTZCxTQUFTYztJQUN6QjtBQUNKO0FBQ0EzQiw0QkFBNEIsR0FBR0Usc0JBQy9CLHVDQUF1QyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL2NvbGxlY3Rpb25zLmpzPzFiN2QiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNvbGxlY3Rpb25zT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgY29sbGVjdGlvbl8xID0gcmVxdWlyZShcIi4uL2NvbGxlY3Rpb25cIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIENvbGxlY3Rpb25zT3BlcmF0aW9uIGV4dGVuZHMgb3BlcmF0aW9uXzEuQWJzdHJhY3RDYWxsYmFja09wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZGIsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuZGIgPSBkYjtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgLy8gTGV0J3MgZ2V0IHRoZSBjb2xsZWN0aW9uIG5hbWVzXG4gICAgICAgIHRoaXMuZGJcbiAgICAgICAgICAgIC5saXN0Q29sbGVjdGlvbnMoe30sIHsgLi4udGhpcy5vcHRpb25zLCBuYW1lT25seTogdHJ1ZSwgcmVhZFByZWZlcmVuY2U6IHRoaXMucmVhZFByZWZlcmVuY2UsIHNlc3Npb24gfSlcbiAgICAgICAgICAgIC50b0FycmF5KClcbiAgICAgICAgICAgIC50aGVuKGRvY3VtZW50cyA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb2xsZWN0aW9ucyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCB7IG5hbWUgfSBvZiBkb2N1bWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5hbWUuaW5jbHVkZXMoJyQnKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgY29sbGVjdGlvbnMgcmVtb3ZpbmcgYW55IGlsbGVnYWwgb25lc1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9ucy5wdXNoKG5ldyBjb2xsZWN0aW9uXzEuQ29sbGVjdGlvbih0aGlzLmRiLCBuYW1lLCB0aGlzLmRiLnMub3B0aW9ucykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgY29sbGVjdGlvbiBvYmplY3RzXG4gICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIGNvbGxlY3Rpb25zKTtcbiAgICAgICAgfSwgZXJyb3IgPT4gY2FsbGJhY2soZXJyb3IpKTtcbiAgICB9XG59XG5leHBvcnRzLkNvbGxlY3Rpb25zT3BlcmF0aW9uID0gQ29sbGVjdGlvbnNPcGVyYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2xsZWN0aW9ucy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJDb2xsZWN0aW9uc09wZXJhdGlvbiIsImNvbGxlY3Rpb25fMSIsInJlcXVpcmUiLCJvcGVyYXRpb25fMSIsIkFic3RyYWN0Q2FsbGJhY2tPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImRiIiwib3B0aW9ucyIsImV4ZWN1dGVDYWxsYmFjayIsInNlcnZlciIsInNlc3Npb24iLCJjYWxsYmFjayIsImxpc3RDb2xsZWN0aW9ucyIsIm5hbWVPbmx5IiwicmVhZFByZWZlcmVuY2UiLCJ0b0FycmF5IiwidGhlbiIsImRvY3VtZW50cyIsImNvbGxlY3Rpb25zIiwibmFtZSIsImluY2x1ZGVzIiwicHVzaCIsIkNvbGxlY3Rpb24iLCJzIiwidW5kZWZpbmVkIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/collections.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/command.js":
/*!********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/command.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CommandCallbackOperation = exports.CommandOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst explain_1 = __webpack_require__(/*! ../explain */ \"(ssr)/./node_modules/mongodb/lib/explain.js\");\nconst read_concern_1 = __webpack_require__(/*! ../read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst server_selection_1 = __webpack_require__(/*! ../sdam/server_selection */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_selection.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst write_concern_1 = __webpack_require__(/*! ../write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class CommandOperation extends operation_1.AbstractCallbackOperation {\n    constructor(parent, options){\n        super(options);\n        this.options = options ?? {};\n        // NOTE: this was explicitly added for the add/remove user operations, it's likely\n        //       something we'd want to reconsider. Perhaps those commands can use `Admin`\n        //       as a parent?\n        const dbNameOverride = options?.dbName || options?.authdb;\n        if (dbNameOverride) {\n            this.ns = new utils_1.MongoDBNamespace(dbNameOverride, \"$cmd\");\n        } else {\n            this.ns = parent ? parent.s.namespace.withCollection(\"$cmd\") : new utils_1.MongoDBNamespace(\"admin\", \"$cmd\");\n        }\n        this.readConcern = read_concern_1.ReadConcern.fromOptions(options);\n        this.writeConcern = write_concern_1.WriteConcern.fromOptions(options);\n        if (this.hasAspect(operation_1.Aspect.EXPLAINABLE)) {\n            this.explain = explain_1.Explain.fromOptions(options);\n        } else if (options?.explain != null) {\n            throw new error_1.MongoInvalidArgumentError(`Option \"explain\" is not supported on this command`);\n        }\n    }\n    get canRetryWrite() {\n        if (this.hasAspect(operation_1.Aspect.EXPLAINABLE)) {\n            return this.explain == null;\n        }\n        return true;\n    }\n    async executeCommand(server, session, cmd) {\n        // TODO: consider making this a non-enumerable property\n        this.server = server;\n        const options = {\n            ...this.options,\n            ...this.bsonOptions,\n            readPreference: this.readPreference,\n            session\n        };\n        const serverWireVersion = (0, utils_1.maxWireVersion)(server);\n        const inTransaction = this.session && this.session.inTransaction();\n        if (this.readConcern && (0, utils_1.commandSupportsReadConcern)(cmd) && !inTransaction) {\n            Object.assign(cmd, {\n                readConcern: this.readConcern\n            });\n        }\n        if (this.trySecondaryWrite && serverWireVersion < server_selection_1.MIN_SECONDARY_WRITE_WIRE_VERSION) {\n            options.omitReadPreference = true;\n        }\n        if (this.writeConcern && this.hasAspect(operation_1.Aspect.WRITE_OPERATION) && !inTransaction) {\n            write_concern_1.WriteConcern.apply(cmd, this.writeConcern);\n        }\n        if (options.collation && typeof options.collation === \"object\" && !this.hasAspect(operation_1.Aspect.SKIP_COLLATION)) {\n            Object.assign(cmd, {\n                collation: options.collation\n            });\n        }\n        if (typeof options.maxTimeMS === \"number\") {\n            cmd.maxTimeMS = options.maxTimeMS;\n        }\n        if (this.hasAspect(operation_1.Aspect.EXPLAINABLE) && this.explain) {\n            cmd = (0, utils_1.decorateWithExplain)(cmd, this.explain);\n        }\n        return server.commandAsync(this.ns, cmd, options);\n    }\n}\nexports.CommandOperation = CommandOperation;\n/** @internal */ class CommandCallbackOperation extends CommandOperation {\n    constructor(parent, options){\n        super(parent, options);\n    }\n    executeCommandCallback(server, session, cmd, callback) {\n        super.executeCommand(server, session, cmd).then((res)=>callback(undefined, res), (err)=>callback(err, undefined));\n    }\n}\nexports.CommandCallbackOperation = CommandCallbackOperation; //# sourceMappingURL=command.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9jb21tYW5kLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxnQ0FBZ0MsR0FBR0Esd0JBQXdCLEdBQUcsS0FBSztBQUNuRSxNQUFNSSxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxZQUFZRCxtQkFBT0EsQ0FBQywrREFBWTtBQUN0QyxNQUFNRSxpQkFBaUJGLG1CQUFPQSxDQUFDLHlFQUFpQjtBQUNoRCxNQUFNRyxxQkFBcUJILG1CQUFPQSxDQUFDLDJGQUEwQjtBQUM3RCxNQUFNSSxVQUFVSixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNSyxrQkFBa0JMLG1CQUFPQSxDQUFDLDJFQUFrQjtBQUNsRCxNQUFNTSxjQUFjTixtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYseUJBQXlCUSxZQUFZQyx5QkFBeUI7SUFDaEVDLFlBQVlDLE1BQU0sRUFBRUMsT0FBTyxDQUFFO1FBQ3pCLEtBQUssQ0FBQ0E7UUFDTixJQUFJLENBQUNBLE9BQU8sR0FBR0EsV0FBVyxDQUFDO1FBQzNCLGtGQUFrRjtRQUNsRixrRkFBa0Y7UUFDbEYscUJBQXFCO1FBQ3JCLE1BQU1DLGlCQUFpQkQsU0FBU0UsVUFBVUYsU0FBU0c7UUFDbkQsSUFBSUYsZ0JBQWdCO1lBQ2hCLElBQUksQ0FBQ0csRUFBRSxHQUFHLElBQUlWLFFBQVFXLGdCQUFnQixDQUFDSixnQkFBZ0I7UUFDM0QsT0FDSztZQUNELElBQUksQ0FBQ0csRUFBRSxHQUFHTCxTQUNKQSxPQUFPTyxDQUFDLENBQUNDLFNBQVMsQ0FBQ0MsY0FBYyxDQUFDLFVBQ2xDLElBQUlkLFFBQVFXLGdCQUFnQixDQUFDLFNBQVM7UUFDaEQ7UUFDQSxJQUFJLENBQUNJLFdBQVcsR0FBR2pCLGVBQWVrQixXQUFXLENBQUNDLFdBQVcsQ0FBQ1g7UUFDMUQsSUFBSSxDQUFDWSxZQUFZLEdBQUdqQixnQkFBZ0JrQixZQUFZLENBQUNGLFdBQVcsQ0FBQ1g7UUFDN0QsSUFBSSxJQUFJLENBQUNjLFNBQVMsQ0FBQ2xCLFlBQVltQixNQUFNLENBQUNDLFdBQVcsR0FBRztZQUNoRCxJQUFJLENBQUNDLE9BQU8sR0FBRzFCLFVBQVUyQixPQUFPLENBQUNQLFdBQVcsQ0FBQ1g7UUFDakQsT0FDSyxJQUFJQSxTQUFTaUIsV0FBVyxNQUFNO1lBQy9CLE1BQU0sSUFBSTVCLFFBQVE4Qix5QkFBeUIsQ0FBQyxDQUFDLGlEQUFpRCxDQUFDO1FBQ25HO0lBQ0o7SUFDQSxJQUFJQyxnQkFBZ0I7UUFDaEIsSUFBSSxJQUFJLENBQUNOLFNBQVMsQ0FBQ2xCLFlBQVltQixNQUFNLENBQUNDLFdBQVcsR0FBRztZQUNoRCxPQUFPLElBQUksQ0FBQ0MsT0FBTyxJQUFJO1FBQzNCO1FBQ0EsT0FBTztJQUNYO0lBQ0EsTUFBTUksZUFBZUMsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLEdBQUcsRUFBRTtRQUN2Qyx1REFBdUQ7UUFDdkQsSUFBSSxDQUFDRixNQUFNLEdBQUdBO1FBQ2QsTUFBTXRCLFVBQVU7WUFDWixHQUFHLElBQUksQ0FBQ0EsT0FBTztZQUNmLEdBQUcsSUFBSSxDQUFDeUIsV0FBVztZQUNuQkMsZ0JBQWdCLElBQUksQ0FBQ0EsY0FBYztZQUNuQ0g7UUFDSjtRQUNBLE1BQU1JLG9CQUFvQixDQUFDLEdBQUdqQyxRQUFRa0MsY0FBYyxFQUFFTjtRQUN0RCxNQUFNTyxnQkFBZ0IsSUFBSSxDQUFDTixPQUFPLElBQUksSUFBSSxDQUFDQSxPQUFPLENBQUNNLGFBQWE7UUFDaEUsSUFBSSxJQUFJLENBQUNwQixXQUFXLElBQUksQ0FBQyxHQUFHZixRQUFRb0MsMEJBQTBCLEVBQUVOLFFBQVEsQ0FBQ0ssZUFBZTtZQUNwRjlDLE9BQU9nRCxNQUFNLENBQUNQLEtBQUs7Z0JBQUVmLGFBQWEsSUFBSSxDQUFDQSxXQUFXO1lBQUM7UUFDdkQ7UUFDQSxJQUFJLElBQUksQ0FBQ3VCLGlCQUFpQixJQUFJTCxvQkFBb0JsQyxtQkFBbUJ3QyxnQ0FBZ0MsRUFBRTtZQUNuR2pDLFFBQVFrQyxrQkFBa0IsR0FBRztRQUNqQztRQUNBLElBQUksSUFBSSxDQUFDdEIsWUFBWSxJQUFJLElBQUksQ0FBQ0UsU0FBUyxDQUFDbEIsWUFBWW1CLE1BQU0sQ0FBQ29CLGVBQWUsS0FBSyxDQUFDTixlQUFlO1lBQzNGbEMsZ0JBQWdCa0IsWUFBWSxDQUFDdUIsS0FBSyxDQUFDWixLQUFLLElBQUksQ0FBQ1osWUFBWTtRQUM3RDtRQUNBLElBQUlaLFFBQVFxQyxTQUFTLElBQ2pCLE9BQU9yQyxRQUFRcUMsU0FBUyxLQUFLLFlBQzdCLENBQUMsSUFBSSxDQUFDdkIsU0FBUyxDQUFDbEIsWUFBWW1CLE1BQU0sQ0FBQ3VCLGNBQWMsR0FBRztZQUNwRHZELE9BQU9nRCxNQUFNLENBQUNQLEtBQUs7Z0JBQUVhLFdBQVdyQyxRQUFRcUMsU0FBUztZQUFDO1FBQ3REO1FBQ0EsSUFBSSxPQUFPckMsUUFBUXVDLFNBQVMsS0FBSyxVQUFVO1lBQ3ZDZixJQUFJZSxTQUFTLEdBQUd2QyxRQUFRdUMsU0FBUztRQUNyQztRQUNBLElBQUksSUFBSSxDQUFDekIsU0FBUyxDQUFDbEIsWUFBWW1CLE1BQU0sQ0FBQ0MsV0FBVyxLQUFLLElBQUksQ0FBQ0MsT0FBTyxFQUFFO1lBQ2hFTyxNQUFNLENBQUMsR0FBRzlCLFFBQVE4QyxtQkFBbUIsRUFBRWhCLEtBQUssSUFBSSxDQUFDUCxPQUFPO1FBQzVEO1FBQ0EsT0FBT0ssT0FBT21CLFlBQVksQ0FBQyxJQUFJLENBQUNyQyxFQUFFLEVBQUVvQixLQUFLeEI7SUFDN0M7QUFDSjtBQUNBZix3QkFBd0IsR0FBR0c7QUFDM0IsY0FBYyxHQUNkLE1BQU1ELGlDQUFpQ0M7SUFDbkNVLFlBQVlDLE1BQU0sRUFBRUMsT0FBTyxDQUFFO1FBQ3pCLEtBQUssQ0FBQ0QsUUFBUUM7SUFDbEI7SUFDQTBDLHVCQUF1QnBCLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxHQUFHLEVBQUVtQixRQUFRLEVBQUU7UUFDbkQsS0FBSyxDQUFDdEIsZUFBZUMsUUFBUUMsU0FBU0MsS0FBS29CLElBQUksQ0FBQ0MsQ0FBQUEsTUFBT0YsU0FBU0csV0FBV0QsTUFBTUUsQ0FBQUEsTUFBT0osU0FBU0ksS0FBS0Q7SUFDMUc7QUFDSjtBQUNBN0QsZ0NBQWdDLEdBQUdFLDBCQUNuQyxtQ0FBbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9jb21tYW5kLmpzPzc2ODUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNvbW1hbmRDYWxsYmFja09wZXJhdGlvbiA9IGV4cG9ydHMuQ29tbWFuZE9wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBleHBsYWluXzEgPSByZXF1aXJlKFwiLi4vZXhwbGFpblwiKTtcbmNvbnN0IHJlYWRfY29uY2Vybl8xID0gcmVxdWlyZShcIi4uL3JlYWRfY29uY2VyblwiKTtcbmNvbnN0IHNlcnZlcl9zZWxlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi9zZGFtL3NlcnZlcl9zZWxlY3Rpb25cIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3Qgd3JpdGVfY29uY2Vybl8xID0gcmVxdWlyZShcIi4uL3dyaXRlX2NvbmNlcm5cIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIENvbW1hbmRPcGVyYXRpb24gZXh0ZW5kcyBvcGVyYXRpb25fMS5BYnN0cmFjdENhbGxiYWNrT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIC8vIE5PVEU6IHRoaXMgd2FzIGV4cGxpY2l0bHkgYWRkZWQgZm9yIHRoZSBhZGQvcmVtb3ZlIHVzZXIgb3BlcmF0aW9ucywgaXQncyBsaWtlbHlcbiAgICAgICAgLy8gICAgICAgc29tZXRoaW5nIHdlJ2Qgd2FudCB0byByZWNvbnNpZGVyLiBQZXJoYXBzIHRob3NlIGNvbW1hbmRzIGNhbiB1c2UgYEFkbWluYFxuICAgICAgICAvLyAgICAgICBhcyBhIHBhcmVudD9cbiAgICAgICAgY29uc3QgZGJOYW1lT3ZlcnJpZGUgPSBvcHRpb25zPy5kYk5hbWUgfHwgb3B0aW9ucz8uYXV0aGRiO1xuICAgICAgICBpZiAoZGJOYW1lT3ZlcnJpZGUpIHtcbiAgICAgICAgICAgIHRoaXMubnMgPSBuZXcgdXRpbHNfMS5Nb25nb0RCTmFtZXNwYWNlKGRiTmFtZU92ZXJyaWRlLCAnJGNtZCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5ucyA9IHBhcmVudFxuICAgICAgICAgICAgICAgID8gcGFyZW50LnMubmFtZXNwYWNlLndpdGhDb2xsZWN0aW9uKCckY21kJylcbiAgICAgICAgICAgICAgICA6IG5ldyB1dGlsc18xLk1vbmdvREJOYW1lc3BhY2UoJ2FkbWluJywgJyRjbWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlYWRDb25jZXJuID0gcmVhZF9jb25jZXJuXzEuUmVhZENvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIHRoaXMud3JpdGVDb25jZXJuID0gd3JpdGVfY29uY2Vybl8xLldyaXRlQ29uY2Vybi5mcm9tT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgaWYgKHRoaXMuaGFzQXNwZWN0KG9wZXJhdGlvbl8xLkFzcGVjdC5FWFBMQUlOQUJMRSkpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwbGFpbiA9IGV4cGxhaW5fMS5FeHBsYWluLmZyb21PcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnM/LmV4cGxhaW4gIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgT3B0aW9uIFwiZXhwbGFpblwiIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBjb21tYW5kYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGNhblJldHJ5V3JpdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc0FzcGVjdChvcGVyYXRpb25fMS5Bc3BlY3QuRVhQTEFJTkFCTEUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leHBsYWluID09IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFzeW5jIGV4ZWN1dGVDb21tYW5kKHNlcnZlciwgc2Vzc2lvbiwgY21kKSB7XG4gICAgICAgIC8vIFRPRE86IGNvbnNpZGVyIG1ha2luZyB0aGlzIGEgbm9uLWVudW1lcmFibGUgcHJvcGVydHlcbiAgICAgICAgdGhpcy5zZXJ2ZXIgPSBzZXJ2ZXI7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICAuLi50aGlzLmJzb25PcHRpb25zLFxuICAgICAgICAgICAgcmVhZFByZWZlcmVuY2U6IHRoaXMucmVhZFByZWZlcmVuY2UsXG4gICAgICAgICAgICBzZXNzaW9uXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNlcnZlcldpcmVWZXJzaW9uID0gKDAsIHV0aWxzXzEubWF4V2lyZVZlcnNpb24pKHNlcnZlcik7XG4gICAgICAgIGNvbnN0IGluVHJhbnNhY3Rpb24gPSB0aGlzLnNlc3Npb24gJiYgdGhpcy5zZXNzaW9uLmluVHJhbnNhY3Rpb24oKTtcbiAgICAgICAgaWYgKHRoaXMucmVhZENvbmNlcm4gJiYgKDAsIHV0aWxzXzEuY29tbWFuZFN1cHBvcnRzUmVhZENvbmNlcm4pKGNtZCkgJiYgIWluVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY21kLCB7IHJlYWRDb25jZXJuOiB0aGlzLnJlYWRDb25jZXJuIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRyeVNlY29uZGFyeVdyaXRlICYmIHNlcnZlcldpcmVWZXJzaW9uIDwgc2VydmVyX3NlbGVjdGlvbl8xLk1JTl9TRUNPTkRBUllfV1JJVEVfV0lSRV9WRVJTSU9OKSB7XG4gICAgICAgICAgICBvcHRpb25zLm9taXRSZWFkUHJlZmVyZW5jZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMud3JpdGVDb25jZXJuICYmIHRoaXMuaGFzQXNwZWN0KG9wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT04pICYmICFpblRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICB3cml0ZV9jb25jZXJuXzEuV3JpdGVDb25jZXJuLmFwcGx5KGNtZCwgdGhpcy53cml0ZUNvbmNlcm4pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmNvbGxhdGlvbiAmJlxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMuY29sbGF0aW9uID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgIXRoaXMuaGFzQXNwZWN0KG9wZXJhdGlvbl8xLkFzcGVjdC5TS0lQX0NPTExBVElPTikpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY21kLCB7IGNvbGxhdGlvbjogb3B0aW9ucy5jb2xsYXRpb24gfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLm1heFRpbWVNUyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGNtZC5tYXhUaW1lTVMgPSBvcHRpb25zLm1heFRpbWVNUztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYXNBc3BlY3Qob3BlcmF0aW9uXzEuQXNwZWN0LkVYUExBSU5BQkxFKSAmJiB0aGlzLmV4cGxhaW4pIHtcbiAgICAgICAgICAgIGNtZCA9ICgwLCB1dGlsc18xLmRlY29yYXRlV2l0aEV4cGxhaW4pKGNtZCwgdGhpcy5leHBsYWluKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VydmVyLmNvbW1hbmRBc3luYyh0aGlzLm5zLCBjbWQsIG9wdGlvbnMpO1xuICAgIH1cbn1cbmV4cG9ydHMuQ29tbWFuZE9wZXJhdGlvbiA9IENvbW1hbmRPcGVyYXRpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBDb21tYW5kQ2FsbGJhY2tPcGVyYXRpb24gZXh0ZW5kcyBDb21tYW5kT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIocGFyZW50LCBvcHRpb25zKTtcbiAgICB9XG4gICAgZXhlY3V0ZUNvbW1hbmRDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNtZCwgY2FsbGJhY2spIHtcbiAgICAgICAgc3VwZXIuZXhlY3V0ZUNvbW1hbmQoc2VydmVyLCBzZXNzaW9uLCBjbWQpLnRoZW4ocmVzID0+IGNhbGxiYWNrKHVuZGVmaW5lZCwgcmVzKSwgZXJyID0+IGNhbGxiYWNrKGVyciwgdW5kZWZpbmVkKSk7XG4gICAgfVxufVxuZXhwb3J0cy5Db21tYW5kQ2FsbGJhY2tPcGVyYXRpb24gPSBDb21tYW5kQ2FsbGJhY2tPcGVyYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tYW5kLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkNvbW1hbmRDYWxsYmFja09wZXJhdGlvbiIsIkNvbW1hbmRPcGVyYXRpb24iLCJlcnJvcl8xIiwicmVxdWlyZSIsImV4cGxhaW5fMSIsInJlYWRfY29uY2Vybl8xIiwic2VydmVyX3NlbGVjdGlvbl8xIiwidXRpbHNfMSIsIndyaXRlX2NvbmNlcm5fMSIsIm9wZXJhdGlvbl8xIiwiQWJzdHJhY3RDYWxsYmFja09wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwicGFyZW50Iiwib3B0aW9ucyIsImRiTmFtZU92ZXJyaWRlIiwiZGJOYW1lIiwiYXV0aGRiIiwibnMiLCJNb25nb0RCTmFtZXNwYWNlIiwicyIsIm5hbWVzcGFjZSIsIndpdGhDb2xsZWN0aW9uIiwicmVhZENvbmNlcm4iLCJSZWFkQ29uY2VybiIsImZyb21PcHRpb25zIiwid3JpdGVDb25jZXJuIiwiV3JpdGVDb25jZXJuIiwiaGFzQXNwZWN0IiwiQXNwZWN0IiwiRVhQTEFJTkFCTEUiLCJleHBsYWluIiwiRXhwbGFpbiIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJjYW5SZXRyeVdyaXRlIiwiZXhlY3V0ZUNvbW1hbmQiLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY21kIiwiYnNvbk9wdGlvbnMiLCJyZWFkUHJlZmVyZW5jZSIsInNlcnZlcldpcmVWZXJzaW9uIiwibWF4V2lyZVZlcnNpb24iLCJpblRyYW5zYWN0aW9uIiwiY29tbWFuZFN1cHBvcnRzUmVhZENvbmNlcm4iLCJhc3NpZ24iLCJ0cnlTZWNvbmRhcnlXcml0ZSIsIk1JTl9TRUNPTkRBUllfV1JJVEVfV0lSRV9WRVJTSU9OIiwib21pdFJlYWRQcmVmZXJlbmNlIiwiV1JJVEVfT1BFUkFUSU9OIiwiYXBwbHkiLCJjb2xsYXRpb24iLCJTS0lQX0NPTExBVElPTiIsIm1heFRpbWVNUyIsImRlY29yYXRlV2l0aEV4cGxhaW4iLCJjb21tYW5kQXN5bmMiLCJleGVjdXRlQ29tbWFuZENhbGxiYWNrIiwiY2FsbGJhY2siLCJ0aGVuIiwicmVzIiwidW5kZWZpbmVkIiwiZXJyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/command.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/common_functions.js":
/*!*****************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/common_functions.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.prepareDocs = exports.indexInformation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nfunction indexInformation(db, name, _optionsOrCallback, _callback) {\n    let options = _optionsOrCallback;\n    let callback = _callback;\n    if (\"function\" === typeof _optionsOrCallback) {\n        callback = _optionsOrCallback;\n        options = {};\n    }\n    // If we specified full information\n    const full = options.full == null ? false : options.full;\n    let topology;\n    try {\n        topology = (0, utils_1.getTopology)(db);\n    } catch (error) {\n        return callback(error);\n    }\n    // Did the user destroy the topology\n    if (topology.isDestroyed()) return callback(new error_1.MongoTopologyClosedError());\n    // Process all the results from the index command and collection\n    function processResults(indexes) {\n        // Contains all the information\n        const info = {};\n        // Process all the indexes\n        for(let i = 0; i < indexes.length; i++){\n            const index = indexes[i];\n            // Let's unpack the object\n            info[index.name] = [];\n            for(const name in index.key){\n                info[index.name].push([\n                    name,\n                    index.key[name]\n                ]);\n            }\n        }\n        return info;\n    }\n    // Get the list of indexes of the specified collection\n    db.collection(name).listIndexes(options).toArray().then((indexes)=>{\n        if (!Array.isArray(indexes)) return callback(undefined, []);\n        if (full) return callback(undefined, indexes);\n        callback(undefined, processResults(indexes));\n    }, (error)=>callback(error));\n}\nexports.indexInformation = indexInformation;\nfunction prepareDocs(coll, docs, options) {\n    const forceServerObjectId = typeof options.forceServerObjectId === \"boolean\" ? options.forceServerObjectId : coll.s.db.options?.forceServerObjectId;\n    // no need to modify the docs if server sets the ObjectId\n    if (forceServerObjectId === true) {\n        return docs;\n    }\n    return docs.map((doc)=>{\n        if (doc._id == null) {\n            doc._id = coll.s.pkFactory.createPk();\n        }\n        return doc;\n    });\n}\nexports.prepareDocs = prepareDocs; //# sourceMappingURL=common_functions.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9jb21tb25fZnVuY3Rpb25zLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxtQkFBbUIsR0FBR0Esd0JBQXdCLEdBQUcsS0FBSztBQUN0RCxNQUFNSSxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxTQUFTRixpQkFBaUJJLEVBQUUsRUFBRUMsSUFBSSxFQUFFQyxrQkFBa0IsRUFBRUMsU0FBUztJQUM3RCxJQUFJQyxVQUFVRjtJQUNkLElBQUlHLFdBQVdGO0lBQ2YsSUFBSSxlQUFlLE9BQU9ELG9CQUFvQjtRQUMxQ0csV0FBV0g7UUFDWEUsVUFBVSxDQUFDO0lBQ2Y7SUFDQSxtQ0FBbUM7SUFDbkMsTUFBTUUsT0FBT0YsUUFBUUUsSUFBSSxJQUFJLE9BQU8sUUFBUUYsUUFBUUUsSUFBSTtJQUN4RCxJQUFJQztJQUNKLElBQUk7UUFDQUEsV0FBVyxDQUFDLEdBQUdSLFFBQVFTLFdBQVcsRUFBRVI7SUFDeEMsRUFDQSxPQUFPUyxPQUFPO1FBQ1YsT0FBT0osU0FBU0k7SUFDcEI7SUFDQSxvQ0FBb0M7SUFDcEMsSUFBSUYsU0FBU0csV0FBVyxJQUNwQixPQUFPTCxTQUFTLElBQUlSLFFBQVFjLHdCQUF3QjtJQUN4RCxnRUFBZ0U7SUFDaEUsU0FBU0MsZUFBZUMsT0FBTztRQUMzQiwrQkFBK0I7UUFDL0IsTUFBTUMsT0FBTyxDQUFDO1FBQ2QsMEJBQTBCO1FBQzFCLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJRixRQUFRRyxNQUFNLEVBQUVELElBQUs7WUFDckMsTUFBTUUsUUFBUUosT0FBTyxDQUFDRSxFQUFFO1lBQ3hCLDBCQUEwQjtZQUMxQkQsSUFBSSxDQUFDRyxNQUFNaEIsSUFBSSxDQUFDLEdBQUcsRUFBRTtZQUNyQixJQUFLLE1BQU1BLFFBQVFnQixNQUFNQyxHQUFHLENBQUU7Z0JBQzFCSixJQUFJLENBQUNHLE1BQU1oQixJQUFJLENBQUMsQ0FBQ2tCLElBQUksQ0FBQztvQkFBQ2xCO29CQUFNZ0IsTUFBTUMsR0FBRyxDQUFDakIsS0FBSztpQkFBQztZQUNqRDtRQUNKO1FBQ0EsT0FBT2E7SUFDWDtJQUNBLHNEQUFzRDtJQUN0RGQsR0FBR29CLFVBQVUsQ0FBQ25CLE1BQ1RvQixXQUFXLENBQUNqQixTQUNaa0IsT0FBTyxHQUNQQyxJQUFJLENBQUNWLENBQUFBO1FBQ04sSUFBSSxDQUFDVyxNQUFNQyxPQUFPLENBQUNaLFVBQ2YsT0FBT1IsU0FBU3FCLFdBQVcsRUFBRTtRQUNqQyxJQUFJcEIsTUFDQSxPQUFPRCxTQUFTcUIsV0FBV2I7UUFDL0JSLFNBQVNxQixXQUFXZCxlQUFlQztJQUN2QyxHQUFHSixDQUFBQSxRQUFTSixTQUFTSTtBQUN6QjtBQUNBaEIsd0JBQXdCLEdBQUdHO0FBQzNCLFNBQVNELFlBQVlnQyxJQUFJLEVBQUVDLElBQUksRUFBRXhCLE9BQU87SUFDcEMsTUFBTXlCLHNCQUFzQixPQUFPekIsUUFBUXlCLG1CQUFtQixLQUFLLFlBQzdEekIsUUFBUXlCLG1CQUFtQixHQUMzQkYsS0FBS0csQ0FBQyxDQUFDOUIsRUFBRSxDQUFDSSxPQUFPLEVBQUV5QjtJQUN6Qix5REFBeUQ7SUFDekQsSUFBSUEsd0JBQXdCLE1BQU07UUFDOUIsT0FBT0Q7SUFDWDtJQUNBLE9BQU9BLEtBQUtHLEdBQUcsQ0FBQ0MsQ0FBQUE7UUFDWixJQUFJQSxJQUFJQyxHQUFHLElBQUksTUFBTTtZQUNqQkQsSUFBSUMsR0FBRyxHQUFHTixLQUFLRyxDQUFDLENBQUNJLFNBQVMsQ0FBQ0MsUUFBUTtRQUN2QztRQUNBLE9BQU9IO0lBQ1g7QUFDSjtBQUNBdkMsbUJBQW1CLEdBQUdFLGFBQ3RCLDRDQUE0QyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL2NvbW1vbl9mdW5jdGlvbnMuanM/NDk4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucHJlcGFyZURvY3MgPSBleHBvcnRzLmluZGV4SW5mb3JtYXRpb24gPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmZ1bmN0aW9uIGluZGV4SW5mb3JtYXRpb24oZGIsIG5hbWUsIF9vcHRpb25zT3JDYWxsYmFjaywgX2NhbGxiYWNrKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBfb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgbGV0IGNhbGxiYWNrID0gX2NhbGxiYWNrO1xuICAgIGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2YgX29wdGlvbnNPckNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrID0gX29wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIC8vIElmIHdlIHNwZWNpZmllZCBmdWxsIGluZm9ybWF0aW9uXG4gICAgY29uc3QgZnVsbCA9IG9wdGlvbnMuZnVsbCA9PSBudWxsID8gZmFsc2UgOiBvcHRpb25zLmZ1bGw7XG4gICAgbGV0IHRvcG9sb2d5O1xuICAgIHRyeSB7XG4gICAgICAgIHRvcG9sb2d5ID0gKDAsIHV0aWxzXzEuZ2V0VG9wb2xvZ3kpKGRiKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhlcnJvcik7XG4gICAgfVxuICAgIC8vIERpZCB0aGUgdXNlciBkZXN0cm95IHRoZSB0b3BvbG9neVxuICAgIGlmICh0b3BvbG9neS5pc0Rlc3Ryb3llZCgpKVxuICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29Ub3BvbG9neUNsb3NlZEVycm9yKCkpO1xuICAgIC8vIFByb2Nlc3MgYWxsIHRoZSByZXN1bHRzIGZyb20gdGhlIGluZGV4IGNvbW1hbmQgYW5kIGNvbGxlY3Rpb25cbiAgICBmdW5jdGlvbiBwcm9jZXNzUmVzdWx0cyhpbmRleGVzKSB7XG4gICAgICAgIC8vIENvbnRhaW5zIGFsbCB0aGUgaW5mb3JtYXRpb25cbiAgICAgICAgY29uc3QgaW5mbyA9IHt9O1xuICAgICAgICAvLyBQcm9jZXNzIGFsbCB0aGUgaW5kZXhlc1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluZGV4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gaW5kZXhlc1tpXTtcbiAgICAgICAgICAgIC8vIExldCdzIHVucGFjayB0aGUgb2JqZWN0XG4gICAgICAgICAgICBpbmZvW2luZGV4Lm5hbWVdID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gaW5kZXgua2V5KSB7XG4gICAgICAgICAgICAgICAgaW5mb1tpbmRleC5uYW1lXS5wdXNoKFtuYW1lLCBpbmRleC5rZXlbbmFtZV1dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5mbztcbiAgICB9XG4gICAgLy8gR2V0IHRoZSBsaXN0IG9mIGluZGV4ZXMgb2YgdGhlIHNwZWNpZmllZCBjb2xsZWN0aW9uXG4gICAgZGIuY29sbGVjdGlvbihuYW1lKVxuICAgICAgICAubGlzdEluZGV4ZXMob3B0aW9ucylcbiAgICAgICAgLnRvQXJyYXkoKVxuICAgICAgICAudGhlbihpbmRleGVzID0+IHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGluZGV4ZXMpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHVuZGVmaW5lZCwgW10pO1xuICAgICAgICBpZiAoZnVsbClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh1bmRlZmluZWQsIGluZGV4ZXMpO1xuICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIHByb2Nlc3NSZXN1bHRzKGluZGV4ZXMpKTtcbiAgICB9LCBlcnJvciA9PiBjYWxsYmFjayhlcnJvcikpO1xufVxuZXhwb3J0cy5pbmRleEluZm9ybWF0aW9uID0gaW5kZXhJbmZvcm1hdGlvbjtcbmZ1bmN0aW9uIHByZXBhcmVEb2NzKGNvbGwsIGRvY3MsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBmb3JjZVNlcnZlck9iamVjdElkID0gdHlwZW9mIG9wdGlvbnMuZm9yY2VTZXJ2ZXJPYmplY3RJZCA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgID8gb3B0aW9ucy5mb3JjZVNlcnZlck9iamVjdElkXG4gICAgICAgIDogY29sbC5zLmRiLm9wdGlvbnM/LmZvcmNlU2VydmVyT2JqZWN0SWQ7XG4gICAgLy8gbm8gbmVlZCB0byBtb2RpZnkgdGhlIGRvY3MgaWYgc2VydmVyIHNldHMgdGhlIE9iamVjdElkXG4gICAgaWYgKGZvcmNlU2VydmVyT2JqZWN0SWQgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIGRvY3M7XG4gICAgfVxuICAgIHJldHVybiBkb2NzLm1hcChkb2MgPT4ge1xuICAgICAgICBpZiAoZG9jLl9pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICBkb2MuX2lkID0gY29sbC5zLnBrRmFjdG9yeS5jcmVhdGVQaygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkb2M7XG4gICAgfSk7XG59XG5leHBvcnRzLnByZXBhcmVEb2NzID0gcHJlcGFyZURvY3M7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tb25fZnVuY3Rpb25zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInByZXBhcmVEb2NzIiwiaW5kZXhJbmZvcm1hdGlvbiIsImVycm9yXzEiLCJyZXF1aXJlIiwidXRpbHNfMSIsImRiIiwibmFtZSIsIl9vcHRpb25zT3JDYWxsYmFjayIsIl9jYWxsYmFjayIsIm9wdGlvbnMiLCJjYWxsYmFjayIsImZ1bGwiLCJ0b3BvbG9neSIsImdldFRvcG9sb2d5IiwiZXJyb3IiLCJpc0Rlc3Ryb3llZCIsIk1vbmdvVG9wb2xvZ3lDbG9zZWRFcnJvciIsInByb2Nlc3NSZXN1bHRzIiwiaW5kZXhlcyIsImluZm8iLCJpIiwibGVuZ3RoIiwiaW5kZXgiLCJrZXkiLCJwdXNoIiwiY29sbGVjdGlvbiIsImxpc3RJbmRleGVzIiwidG9BcnJheSIsInRoZW4iLCJBcnJheSIsImlzQXJyYXkiLCJ1bmRlZmluZWQiLCJjb2xsIiwiZG9jcyIsImZvcmNlU2VydmVyT2JqZWN0SWQiLCJzIiwibWFwIiwiZG9jIiwiX2lkIiwicGtGYWN0b3J5IiwiY3JlYXRlUGsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/common_functions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/count.js":
/*!******************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/count.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CountOperation = void 0;\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class CountOperation extends command_1.CommandCallbackOperation {\n    constructor(namespace, filter, options){\n        super({\n            s: {\n                namespace: namespace\n            }\n        }, options);\n        this.options = options;\n        this.collectionName = namespace.collection;\n        this.query = filter;\n    }\n    executeCallback(server, session, callback) {\n        const options = this.options;\n        const cmd = {\n            count: this.collectionName,\n            query: this.query\n        };\n        if (typeof options.limit === \"number\") {\n            cmd.limit = options.limit;\n        }\n        if (typeof options.skip === \"number\") {\n            cmd.skip = options.skip;\n        }\n        if (options.hint != null) {\n            cmd.hint = options.hint;\n        }\n        if (typeof options.maxTimeMS === \"number\") {\n            cmd.maxTimeMS = options.maxTimeMS;\n        }\n        super.executeCommandCallback(server, session, cmd, (err, result)=>{\n            callback(err, result ? result.n : 0);\n        });\n    }\n}\nexports.CountOperation = CountOperation;\n(0, operation_1.defineAspects)(CountOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE\n]); //# sourceMappingURL=count.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9jb3VudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsc0JBQXNCLEdBQUcsS0FBSztBQUM5QixNQUFNRyxZQUFZQyxtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNQyxjQUFjRCxtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYsdUJBQXVCQyxVQUFVRyx3QkFBd0I7SUFDM0RDLFlBQVlDLFNBQVMsRUFBRUMsTUFBTSxFQUFFQyxPQUFPLENBQUU7UUFDcEMsS0FBSyxDQUFDO1lBQUVDLEdBQUc7Z0JBQUVILFdBQVdBO1lBQVU7UUFBRSxHQUFHRTtRQUN2QyxJQUFJLENBQUNBLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNFLGNBQWMsR0FBR0osVUFBVUssVUFBVTtRQUMxQyxJQUFJLENBQUNDLEtBQUssR0FBR0w7SUFDakI7SUFDQU0sZ0JBQWdCQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFO1FBQ3ZDLE1BQU1SLFVBQVUsSUFBSSxDQUFDQSxPQUFPO1FBQzVCLE1BQU1TLE1BQU07WUFDUkMsT0FBTyxJQUFJLENBQUNSLGNBQWM7WUFDMUJFLE9BQU8sSUFBSSxDQUFDQSxLQUFLO1FBQ3JCO1FBQ0EsSUFBSSxPQUFPSixRQUFRVyxLQUFLLEtBQUssVUFBVTtZQUNuQ0YsSUFBSUUsS0FBSyxHQUFHWCxRQUFRVyxLQUFLO1FBQzdCO1FBQ0EsSUFBSSxPQUFPWCxRQUFRWSxJQUFJLEtBQUssVUFBVTtZQUNsQ0gsSUFBSUcsSUFBSSxHQUFHWixRQUFRWSxJQUFJO1FBQzNCO1FBQ0EsSUFBSVosUUFBUWEsSUFBSSxJQUFJLE1BQU07WUFDdEJKLElBQUlJLElBQUksR0FBR2IsUUFBUWEsSUFBSTtRQUMzQjtRQUNBLElBQUksT0FBT2IsUUFBUWMsU0FBUyxLQUFLLFVBQVU7WUFDdkNMLElBQUlLLFNBQVMsR0FBR2QsUUFBUWMsU0FBUztRQUNyQztRQUNBLEtBQUssQ0FBQ0MsdUJBQXVCVCxRQUFRQyxTQUFTRSxLQUFLLENBQUNPLEtBQUtDO1lBQ3JEVCxTQUFTUSxLQUFLQyxTQUFTQSxPQUFPQyxDQUFDLEdBQUc7UUFDdEM7SUFDSjtBQUNKO0FBQ0E1QixzQkFBc0IsR0FBR0U7QUFDeEIsSUFBR0csWUFBWXdCLGFBQWEsRUFBRTNCLGdCQUFnQjtJQUFDRyxZQUFZeUIsTUFBTSxDQUFDQyxjQUFjO0lBQUUxQixZQUFZeUIsTUFBTSxDQUFDRSxTQUFTO0NBQUMsR0FDaEgsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvY291bnQuanM/NzIyZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ291bnRPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBjb21tYW5kXzEgPSByZXF1aXJlKFwiLi9jb21tYW5kXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBDb3VudE9wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kQ2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKG5hbWVzcGFjZSwgZmlsdGVyLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKHsgczogeyBuYW1lc3BhY2U6IG5hbWVzcGFjZSB9IH0sIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25OYW1lID0gbmFtZXNwYWNlLmNvbGxlY3Rpb247XG4gICAgICAgIHRoaXMucXVlcnkgPSBmaWx0ZXI7XG4gICAgfVxuICAgIGV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGNtZCA9IHtcbiAgICAgICAgICAgIGNvdW50OiB0aGlzLmNvbGxlY3Rpb25OYW1lLFxuICAgICAgICAgICAgcXVlcnk6IHRoaXMucXVlcnlcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmxpbWl0ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgY21kLmxpbWl0ID0gb3B0aW9ucy5saW1pdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2tpcCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGNtZC5za2lwID0gb3B0aW9ucy5za2lwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmhpbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgY21kLmhpbnQgPSBvcHRpb25zLmhpbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLm1heFRpbWVNUyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGNtZC5tYXhUaW1lTVMgPSBvcHRpb25zLm1heFRpbWVNUztcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5leGVjdXRlQ29tbWFuZENhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY21kLCAoZXJyLCByZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGVyciwgcmVzdWx0ID8gcmVzdWx0Lm4gOiAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5Db3VudE9wZXJhdGlvbiA9IENvdW50T3BlcmF0aW9uO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKENvdW50T3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LlJFQURfT1BFUkFUSU9OLCBvcGVyYXRpb25fMS5Bc3BlY3QuUkVUUllBQkxFXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3VudC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJDb3VudE9wZXJhdGlvbiIsImNvbW1hbmRfMSIsInJlcXVpcmUiLCJvcGVyYXRpb25fMSIsIkNvbW1hbmRDYWxsYmFja09wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwibmFtZXNwYWNlIiwiZmlsdGVyIiwib3B0aW9ucyIsInMiLCJjb2xsZWN0aW9uTmFtZSIsImNvbGxlY3Rpb24iLCJxdWVyeSIsImV4ZWN1dGVDYWxsYmFjayIsInNlcnZlciIsInNlc3Npb24iLCJjYWxsYmFjayIsImNtZCIsImNvdW50IiwibGltaXQiLCJza2lwIiwiaGludCIsIm1heFRpbWVNUyIsImV4ZWN1dGVDb21tYW5kQ2FsbGJhY2siLCJlcnIiLCJyZXN1bHQiLCJuIiwiZGVmaW5lQXNwZWN0cyIsIkFzcGVjdCIsIlJFQURfT1BFUkFUSU9OIiwiUkVUUllBQkxFIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/count.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/count_documents.js":
/*!****************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/count_documents.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CountDocumentsOperation = void 0;\nconst aggregate_1 = __webpack_require__(/*! ./aggregate */ \"(ssr)/./node_modules/mongodb/lib/operations/aggregate.js\");\n/** @internal */ class CountDocumentsOperation extends aggregate_1.AggregateOperation {\n    constructor(collection, query, options){\n        const pipeline = [];\n        pipeline.push({\n            $match: query\n        });\n        if (typeof options.skip === \"number\") {\n            pipeline.push({\n                $skip: options.skip\n            });\n        }\n        if (typeof options.limit === \"number\") {\n            pipeline.push({\n                $limit: options.limit\n            });\n        }\n        pipeline.push({\n            $group: {\n                _id: 1,\n                n: {\n                    $sum: 1\n                }\n            }\n        });\n        super(collection.s.namespace, pipeline, options);\n    }\n    executeCallback(server, session, callback) {\n        super.executeCallback(server, session, (err, result)=>{\n            if (err || !result) {\n                callback(err);\n                return;\n            }\n            // NOTE: We're avoiding creating a cursor here to reduce the callstack.\n            const response = result;\n            if (response.cursor == null || response.cursor.firstBatch == null) {\n                callback(undefined, 0);\n                return;\n            }\n            const docs = response.cursor.firstBatch;\n            callback(undefined, docs.length ? docs[0].n : 0);\n        });\n    }\n}\nexports.CountDocumentsOperation = CountDocumentsOperation; //# sourceMappingURL=count_documents.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9jb3VudF9kb2N1bWVudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELCtCQUErQixHQUFHLEtBQUs7QUFDdkMsTUFBTUcsY0FBY0MsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsY0FBYyxHQUNkLE1BQU1GLGdDQUFnQ0MsWUFBWUUsa0JBQWtCO0lBQ2hFQyxZQUFZQyxVQUFVLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxDQUFFO1FBQ3BDLE1BQU1DLFdBQVcsRUFBRTtRQUNuQkEsU0FBU0MsSUFBSSxDQUFDO1lBQUVDLFFBQVFKO1FBQU07UUFDOUIsSUFBSSxPQUFPQyxRQUFRSSxJQUFJLEtBQUssVUFBVTtZQUNsQ0gsU0FBU0MsSUFBSSxDQUFDO2dCQUFFRyxPQUFPTCxRQUFRSSxJQUFJO1lBQUM7UUFDeEM7UUFDQSxJQUFJLE9BQU9KLFFBQVFNLEtBQUssS0FBSyxVQUFVO1lBQ25DTCxTQUFTQyxJQUFJLENBQUM7Z0JBQUVLLFFBQVFQLFFBQVFNLEtBQUs7WUFBQztRQUMxQztRQUNBTCxTQUFTQyxJQUFJLENBQUM7WUFBRU0sUUFBUTtnQkFBRUMsS0FBSztnQkFBR0MsR0FBRztvQkFBRUMsTUFBTTtnQkFBRTtZQUFFO1FBQUU7UUFDbkQsS0FBSyxDQUFDYixXQUFXYyxDQUFDLENBQUNDLFNBQVMsRUFBRVosVUFBVUQ7SUFDNUM7SUFDQWMsZ0JBQWdCQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFO1FBQ3ZDLEtBQUssQ0FBQ0gsZ0JBQWdCQyxRQUFRQyxTQUFTLENBQUNFLEtBQUtDO1lBQ3pDLElBQUlELE9BQU8sQ0FBQ0MsUUFBUTtnQkFDaEJGLFNBQVNDO2dCQUNUO1lBQ0o7WUFDQSx1RUFBdUU7WUFDdkUsTUFBTUUsV0FBV0Q7WUFDakIsSUFBSUMsU0FBU0MsTUFBTSxJQUFJLFFBQVFELFNBQVNDLE1BQU0sQ0FBQ0MsVUFBVSxJQUFJLE1BQU07Z0JBQy9ETCxTQUFTTSxXQUFXO2dCQUNwQjtZQUNKO1lBQ0EsTUFBTUMsT0FBT0osU0FBU0MsTUFBTSxDQUFDQyxVQUFVO1lBQ3ZDTCxTQUFTTSxXQUFXQyxLQUFLQyxNQUFNLEdBQUdELElBQUksQ0FBQyxFQUFFLENBQUNkLENBQUMsR0FBRztRQUNsRDtJQUNKO0FBQ0o7QUFDQW5CLCtCQUErQixHQUFHRSx5QkFDbEMsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvY291bnRfZG9jdW1lbnRzLmpzPzAyNTYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNvdW50RG9jdW1lbnRzT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgYWdncmVnYXRlXzEgPSByZXF1aXJlKFwiLi9hZ2dyZWdhdGVcIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBDb3VudERvY3VtZW50c09wZXJhdGlvbiBleHRlbmRzIGFnZ3JlZ2F0ZV8xLkFnZ3JlZ2F0ZU9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgcXVlcnksIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGlwZWxpbmUgPSBbXTtcbiAgICAgICAgcGlwZWxpbmUucHVzaCh7ICRtYXRjaDogcXVlcnkgfSk7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5za2lwID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcGlwZWxpbmUucHVzaCh7ICRza2lwOiBvcHRpb25zLnNraXAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmxpbWl0ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcGlwZWxpbmUucHVzaCh7ICRsaW1pdDogb3B0aW9ucy5saW1pdCB9KTtcbiAgICAgICAgfVxuICAgICAgICBwaXBlbGluZS5wdXNoKHsgJGdyb3VwOiB7IF9pZDogMSwgbjogeyAkc3VtOiAxIH0gfSB9KTtcbiAgICAgICAgc3VwZXIoY29sbGVjdGlvbi5zLm5hbWVzcGFjZSwgcGlwZWxpbmUsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBleGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBzdXBlci5leGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCAoZXJyLCByZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIgfHwgIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTk9URTogV2UncmUgYXZvaWRpbmcgY3JlYXRpbmcgYSBjdXJzb3IgaGVyZSB0byByZWR1Y2UgdGhlIGNhbGxzdGFjay5cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzdWx0O1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmN1cnNvciA9PSBudWxsIHx8IHJlc3BvbnNlLmN1cnNvci5maXJzdEJhdGNoID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIDApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRvY3MgPSByZXNwb25zZS5jdXJzb3IuZmlyc3RCYXRjaDtcbiAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwgZG9jcy5sZW5ndGggPyBkb2NzWzBdLm4gOiAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5Db3VudERvY3VtZW50c09wZXJhdGlvbiA9IENvdW50RG9jdW1lbnRzT3BlcmF0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y291bnRfZG9jdW1lbnRzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkNvdW50RG9jdW1lbnRzT3BlcmF0aW9uIiwiYWdncmVnYXRlXzEiLCJyZXF1aXJlIiwiQWdncmVnYXRlT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJjb2xsZWN0aW9uIiwicXVlcnkiLCJvcHRpb25zIiwicGlwZWxpbmUiLCJwdXNoIiwiJG1hdGNoIiwic2tpcCIsIiRza2lwIiwibGltaXQiLCIkbGltaXQiLCIkZ3JvdXAiLCJfaWQiLCJuIiwiJHN1bSIsInMiLCJuYW1lc3BhY2UiLCJleGVjdXRlQ2FsbGJhY2siLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJlcnIiLCJyZXN1bHQiLCJyZXNwb25zZSIsImN1cnNvciIsImZpcnN0QmF0Y2giLCJ1bmRlZmluZWQiLCJkb2NzIiwibGVuZ3RoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/count_documents.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/create_collection.js":
/*!******************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/create_collection.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CreateCollectionOperation = void 0;\nconst constants_1 = __webpack_require__(/*! ../cmap/wire_protocol/constants */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js\");\nconst collection_1 = __webpack_require__(/*! ../collection */ \"(ssr)/./node_modules/mongodb/lib/collection.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst indexes_1 = __webpack_require__(/*! ./indexes */ \"(ssr)/./node_modules/mongodb/lib/operations/indexes.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\nconst ILLEGAL_COMMAND_FIELDS = new Set([\n    \"w\",\n    \"wtimeout\",\n    \"j\",\n    \"fsync\",\n    \"autoIndexId\",\n    \"pkFactory\",\n    \"raw\",\n    \"readPreference\",\n    \"session\",\n    \"readConcern\",\n    \"writeConcern\",\n    \"raw\",\n    \"fieldsAsRaw\",\n    \"useBigInt64\",\n    \"promoteLongs\",\n    \"promoteValues\",\n    \"promoteBuffers\",\n    \"bsonRegExp\",\n    \"serializeFunctions\",\n    \"ignoreUndefined\",\n    \"enableUtf8Validation\"\n]);\n/* @internal */ const INVALID_QE_VERSION = \"Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.\";\n/** @internal */ class CreateCollectionOperation extends command_1.CommandCallbackOperation {\n    constructor(db, name, options = {}){\n        super(db, options);\n        this.options = options;\n        this.db = db;\n        this.name = name;\n    }\n    executeCallback(server, session, callback) {\n        (async ()=>{\n            const db = this.db;\n            const name = this.name;\n            const options = this.options;\n            const encryptedFields = options.encryptedFields ?? db.client.options.autoEncryption?.encryptedFieldsMap?.[`${db.databaseName}.${name}`];\n            if (encryptedFields) {\n                // Creating a QE collection required min server of 7.0.0\n                // TODO(NODE-5353): Get wire version information from connection.\n                if (!server.loadBalanced && server.description.maxWireVersion < constants_1.MIN_SUPPORTED_QE_WIRE_VERSION) {\n                    throw new error_1.MongoCompatibilityError(`${INVALID_QE_VERSION} The minimum server version required is ${constants_1.MIN_SUPPORTED_QE_SERVER_VERSION}`);\n                }\n                // Create auxilliary collections for queryable encryption support.\n                const escCollection = encryptedFields.escCollection ?? `enxcol_.${name}.esc`;\n                const ecocCollection = encryptedFields.ecocCollection ?? `enxcol_.${name}.ecoc`;\n                for (const collectionName of [\n                    escCollection,\n                    ecocCollection\n                ]){\n                    const createOp = new CreateCollectionOperation(db, collectionName, {\n                        clusteredIndex: {\n                            key: {\n                                _id: 1\n                            },\n                            unique: true\n                        }\n                    });\n                    await createOp.executeWithoutEncryptedFieldsCheck(server, session);\n                }\n                if (!options.encryptedFields) {\n                    this.options = {\n                        ...this.options,\n                        encryptedFields\n                    };\n                }\n            }\n            const coll = await this.executeWithoutEncryptedFieldsCheck(server, session);\n            if (encryptedFields) {\n                // Create the required index for queryable encryption support.\n                const createIndexOp = new indexes_1.CreateIndexOperation(db, name, {\n                    __safeContent__: 1\n                }, {});\n                await createIndexOp.execute(server, session);\n            }\n            return coll;\n        })().then((coll)=>callback(undefined, coll), (err)=>callback(err));\n    }\n    executeWithoutEncryptedFieldsCheck(server, session) {\n        return new Promise((resolve, reject)=>{\n            const db = this.db;\n            const name = this.name;\n            const options = this.options;\n            const done = (err)=>{\n                if (err) {\n                    return reject(err);\n                }\n                resolve(new collection_1.Collection(db, name, options));\n            };\n            const cmd = {\n                create: name\n            };\n            for(const n in options){\n                if (options[n] != null && typeof options[n] !== \"function\" && !ILLEGAL_COMMAND_FIELDS.has(n)) {\n                    cmd[n] = options[n];\n                }\n            }\n            // otherwise just execute the command\n            super.executeCommandCallback(server, session, cmd, done);\n        });\n    }\n}\nexports.CreateCollectionOperation = CreateCollectionOperation;\n(0, operation_1.defineAspects)(CreateCollectionOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]); //# sourceMappingURL=create_collection.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9jcmVhdGVfY29sbGVjdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsaUNBQWlDLEdBQUcsS0FBSztBQUN6QyxNQUFNRyxjQUFjQyxtQkFBT0EsQ0FBQyx5R0FBaUM7QUFDN0QsTUFBTUMsZUFBZUQsbUJBQU9BLENBQUMscUVBQWU7QUFDNUMsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUcsWUFBWUgsbUJBQU9BLENBQUMseUVBQVc7QUFDckMsTUFBTUksWUFBWUosbUJBQU9BLENBQUMseUVBQVc7QUFDckMsTUFBTUssY0FBY0wsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsTUFBTU0seUJBQXlCLElBQUlDLElBQUk7SUFDbkM7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0g7QUFDRCxhQUFhLEdBQ2IsTUFBTUMscUJBQXFCO0FBQzNCLGNBQWMsR0FDZCxNQUFNVixrQ0FBa0NLLFVBQVVNLHdCQUF3QjtJQUN0RUMsWUFBWUMsRUFBRSxFQUFFQyxJQUFJLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLENBQUU7UUFDaEMsS0FBSyxDQUFDRixJQUFJRTtRQUNWLElBQUksQ0FBQ0EsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0YsRUFBRSxHQUFHQTtRQUNWLElBQUksQ0FBQ0MsSUFBSSxHQUFHQTtJQUNoQjtJQUNBRSxnQkFBZ0JDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDdEM7WUFDRyxNQUFNTixLQUFLLElBQUksQ0FBQ0EsRUFBRTtZQUNsQixNQUFNQyxPQUFPLElBQUksQ0FBQ0EsSUFBSTtZQUN0QixNQUFNQyxVQUFVLElBQUks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QUNuQyxJQUFHTyxZQUFZbUQsYUFBYSxFQUFFMUQsMkJBQTJCO0lBQUNPLFlBQVlvRCxNQUFNLENBQUNDLGVBQWU7Q0FBQyxHQUM5Riw2Q0FBNkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9jcmVhdGVfY29sbGVjdGlvbi5qcz9lY2U0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5DcmVhdGVDb2xsZWN0aW9uT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY21hcC93aXJlX3Byb3RvY29sL2NvbnN0YW50c1wiKTtcbmNvbnN0IGNvbGxlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi9jb2xsZWN0aW9uXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IGNvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRcIik7XG5jb25zdCBpbmRleGVzXzEgPSByZXF1aXJlKFwiLi9pbmRleGVzXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG5jb25zdCBJTExFR0FMX0NPTU1BTkRfRklFTERTID0gbmV3IFNldChbXG4gICAgJ3cnLFxuICAgICd3dGltZW91dCcsXG4gICAgJ2onLFxuICAgICdmc3luYycsXG4gICAgJ2F1dG9JbmRleElkJyxcbiAgICAncGtGYWN0b3J5JyxcbiAgICAncmF3JyxcbiAgICAncmVhZFByZWZlcmVuY2UnLFxuICAgICdzZXNzaW9uJyxcbiAgICAncmVhZENvbmNlcm4nLFxuICAgICd3cml0ZUNvbmNlcm4nLFxuICAgICdyYXcnLFxuICAgICdmaWVsZHNBc1JhdycsXG4gICAgJ3VzZUJpZ0ludDY0JyxcbiAgICAncHJvbW90ZUxvbmdzJyxcbiAgICAncHJvbW90ZVZhbHVlcycsXG4gICAgJ3Byb21vdGVCdWZmZXJzJyxcbiAgICAnYnNvblJlZ0V4cCcsXG4gICAgJ3NlcmlhbGl6ZUZ1bmN0aW9ucycsXG4gICAgJ2lnbm9yZVVuZGVmaW5lZCcsXG4gICAgJ2VuYWJsZVV0ZjhWYWxpZGF0aW9uJ1xuXSk7XG4vKiBAaW50ZXJuYWwgKi9cbmNvbnN0IElOVkFMSURfUUVfVkVSU0lPTiA9ICdEcml2ZXIgc3VwcG9ydCBvZiBRdWVyeWFibGUgRW5jcnlwdGlvbiBpcyBpbmNvbXBhdGlibGUgd2l0aCBzZXJ2ZXIuIFVwZ3JhZGUgc2VydmVyIHRvIHVzZSBRdWVyeWFibGUgRW5jcnlwdGlvbi4nO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgQ3JlYXRlQ29sbGVjdGlvbk9wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kQ2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGRiLCBuYW1lLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoZGIsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgfVxuICAgIGV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYiA9IHRoaXMuZGI7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5uYW1lO1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZEZpZWxkcyA9IG9wdGlvbnMuZW5jcnlwdGVkRmllbGRzID8/XG4gICAgICAgICAgICAgICAgZGIuY2xpZW50Lm9wdGlvbnMuYXV0b0VuY3J5cHRpb24/LmVuY3J5cHRlZEZpZWxkc01hcD8uW2Ake2RiLmRhdGFiYXNlTmFtZX0uJHtuYW1lfWBdO1xuICAgICAgICAgICAgaWYgKGVuY3J5cHRlZEZpZWxkcykge1xuICAgICAgICAgICAgICAgIC8vIENyZWF0aW5nIGEgUUUgY29sbGVjdGlvbiByZXF1aXJlZCBtaW4gc2VydmVyIG9mIDcuMC4wXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTUzNTMpOiBHZXQgd2lyZSB2ZXJzaW9uIGluZm9ybWF0aW9uIGZyb20gY29ubmVjdGlvbi5cbiAgICAgICAgICAgICAgICBpZiAoIXNlcnZlci5sb2FkQmFsYW5jZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyLmRlc2NyaXB0aW9uLm1heFdpcmVWZXJzaW9uIDwgY29uc3RhbnRzXzEuTUlOX1NVUFBPUlRFRF9RRV9XSVJFX1ZFUlNJT04pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IoYCR7SU5WQUxJRF9RRV9WRVJTSU9OfSBUaGUgbWluaW11bSBzZXJ2ZXIgdmVyc2lvbiByZXF1aXJlZCBpcyAke2NvbnN0YW50c18xLk1JTl9TVVBQT1JURURfUUVfU0VSVkVSX1ZFUlNJT059YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhdXhpbGxpYXJ5IGNvbGxlY3Rpb25zIGZvciBxdWVyeWFibGUgZW5jcnlwdGlvbiBzdXBwb3J0LlxuICAgICAgICAgICAgICAgIGNvbnN0IGVzY0NvbGxlY3Rpb24gPSBlbmNyeXB0ZWRGaWVsZHMuZXNjQ29sbGVjdGlvbiA/PyBgZW54Y29sXy4ke25hbWV9LmVzY2A7XG4gICAgICAgICAgICAgICAgY29uc3QgZWNvY0NvbGxlY3Rpb24gPSBlbmNyeXB0ZWRGaWVsZHMuZWNvY0NvbGxlY3Rpb24gPz8gYGVueGNvbF8uJHtuYW1lfS5lY29jYDtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvbGxlY3Rpb25OYW1lIG9mIFtlc2NDb2xsZWN0aW9uLCBlY29jQ29sbGVjdGlvbl0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3JlYXRlT3AgPSBuZXcgQ3JlYXRlQ29sbGVjdGlvbk9wZXJhdGlvbihkYiwgY29sbGVjdGlvbk5hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsdXN0ZXJlZEluZGV4OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiB7IF9pZDogMSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY3JlYXRlT3AuZXhlY3V0ZVdpdGhvdXRFbmNyeXB0ZWRGaWVsZHNDaGVjayhzZXJ2ZXIsIHNlc3Npb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMuZW5jcnlwdGVkRmllbGRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IHsgLi4udGhpcy5vcHRpb25zLCBlbmNyeXB0ZWRGaWVsZHMgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb2xsID0gYXdhaXQgdGhpcy5leGVjdXRlV2l0aG91dEVuY3J5cHRlZEZpZWxkc0NoZWNrKHNlcnZlciwgc2Vzc2lvbik7XG4gICAgICAgICAgICBpZiAoZW5jcnlwdGVkRmllbGRzKSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSByZXF1aXJlZCBpbmRleCBmb3IgcXVlcnlhYmxlIGVuY3J5cHRpb24gc3VwcG9ydC5cbiAgICAgICAgICAgICAgICBjb25zdCBjcmVhdGVJbmRleE9wID0gbmV3IGluZGV4ZXNfMS5DcmVhdGVJbmRleE9wZXJhdGlvbihkYiwgbmFtZSwgeyBfX3NhZmVDb250ZW50X186IDEgfSwge30pO1xuICAgICAgICAgICAgICAgIGF3YWl0IGNyZWF0ZUluZGV4T3AuZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbGw7XG4gICAgICAgIH0pKCkudGhlbihjb2xsID0+IGNhbGxiYWNrKHVuZGVmaW5lZCwgY29sbCksIGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG4gICAgZXhlY3V0ZVdpdGhvdXRFbmNyeXB0ZWRGaWVsZHNDaGVjayhzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRiID0gdGhpcy5kYjtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLm5hbWU7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAgICAgY29uc3QgZG9uZSA9IGVyciA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc29sdmUobmV3IGNvbGxlY3Rpb25fMS5Db2xsZWN0aW9uKGRiLCBuYW1lLCBvcHRpb25zKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgY21kID0geyBjcmVhdGU6IG5hbWUgfTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNbbl0gIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygb3B0aW9uc1tuXSAhPT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgICAgICAgICAhSUxMRUdBTF9DT01NQU5EX0ZJRUxEUy5oYXMobikpIHtcbiAgICAgICAgICAgICAgICAgICAgY21kW25dID0gb3B0aW9uc1tuXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UganVzdCBleGVjdXRlIHRoZSBjb21tYW5kXG4gICAgICAgICAgICBzdXBlci5leGVjdXRlQ29tbWFuZENhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY21kLCBkb25lKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5DcmVhdGVDb2xsZWN0aW9uT3BlcmF0aW9uID0gQ3JlYXRlQ29sbGVjdGlvbk9wZXJhdGlvbjtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShDcmVhdGVDb2xsZWN0aW9uT3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlX2NvbGxlY3Rpb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ3JlYXRlQ29sbGVjdGlvbk9wZXJhdGlvbiIsImNvbnN0YW50c18xIiwicmVxdWlyZSIsImNvbGxlY3Rpb25fMSIsImVycm9yXzEiLCJjb21tYW5kXzEiLCJpbmRleGVzXzEiLCJvcGVyYXRpb25fMSIsIklMTEVHQUxfQ09NTUFORF9GSUVMRFMiLCJTZXQiLCJJTlZBTElEX1FFX1ZFUlNJT04iLCJDb21tYW5kQ2FsbGJhY2tPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImRiIiwibmFtZSIsIm9wdGlvbnMiLCJleGVjdXRlQ2FsbGJhY2siLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJlbmNyeXB0ZWRGaWVsZHMiLCJjbGllbnQiLCJhdXRvRW5jcnlwdGlvbiIsImVuY3J5cHRlZEZpZWxkc01hcCIsImRhdGFiYXNlTmFtZSIsImxvYWRCYWxhbmNlZCIsImRlc2NyaXB0aW9uIiwibWF4V2lyZVZlcnNpb24iLCJNSU5fU1VQUE9SVEVEX1FFX1dJUkVfVkVSU0lPTiIsIk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yIiwiTUlOX1NVUFBPUlRFRF9RRV9TRVJWRVJfVkVSU0lPTiIsImVzY0NvbGxlY3Rpb24iLCJlY29jQ29sbGVjdGlvbiIsImNvbGxlY3Rpb25OYW1lIiwiY3JlYXRlT3AiLCJjbHVzdGVyZWRJbmRleCIsImtleSIsIl9pZCIsInVuaXF1ZSIsImV4ZWN1dGVXaXRob3V0RW5jcnlwdGVkRmllbGRzQ2hlY2siLCJjb2xsIiwiY3JlYXRlSW5kZXhPcCIsIkNyZWF0ZUluZGV4T3BlcmF0aW9uIiwiX19zYWZlQ29udGVudF9fIiwiZXhlY3V0ZSIsInRoZW4iLCJ1bmRlZmluZWQiLCJlcnIiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImRvbmUiLCJDb2xsZWN0aW9uIiwiY21kIiwiY3JlYXRlIiwibiIsImhhcyIsImV4ZWN1dGVDb21tYW5kQ2FsbGJhY2siLCJkZWZpbmVBc3BlY3RzIiwiQXNwZWN0IiwiV1JJVEVfT1BFUkFUSU9OIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/create_collection.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/delete.js":
/*!*******************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/delete.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.makeDeleteStatement = exports.DeleteManyOperation = exports.DeleteOneOperation = exports.DeleteOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class DeleteOperation extends command_1.CommandCallbackOperation {\n    constructor(ns, statements, options){\n        super(undefined, options);\n        this.options = options;\n        this.ns = ns;\n        this.statements = statements;\n    }\n    get canRetryWrite() {\n        if (super.canRetryWrite === false) {\n            return false;\n        }\n        return this.statements.every((op)=>op.limit != null ? op.limit > 0 : true);\n    }\n    executeCallback(server, session, callback) {\n        const options = this.options ?? {};\n        const ordered = typeof options.ordered === \"boolean\" ? options.ordered : true;\n        const command = {\n            delete: this.ns.collection,\n            deletes: this.statements,\n            ordered\n        };\n        if (options.let) {\n            command.let = options.let;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (options.comment !== undefined) {\n            command.comment = options.comment;\n        }\n        const unacknowledgedWrite = this.writeConcern && this.writeConcern.w === 0;\n        if (unacknowledgedWrite) {\n            if (this.statements.find((o)=>o.hint)) {\n                // TODO(NODE-3541): fix error for hint with unacknowledged writes\n                callback(new error_1.MongoCompatibilityError(`hint is not supported with unacknowledged writes`));\n                return;\n            }\n        }\n        super.executeCommandCallback(server, session, command, callback);\n    }\n}\nexports.DeleteOperation = DeleteOperation;\nclass DeleteOneOperation extends DeleteOperation {\n    constructor(collection, filter, options){\n        super(collection.s.namespace, [\n            makeDeleteStatement(filter, {\n                ...options,\n                limit: 1\n            })\n        ], options);\n    }\n    executeCallback(server, session, callback) {\n        super.executeCallback(server, session, (err, res)=>{\n            if (err || res == null) return callback(err);\n            if (res.code) return callback(new error_1.MongoServerError(res));\n            if (res.writeErrors) return callback(new error_1.MongoServerError(res.writeErrors[0]));\n            if (this.explain) return callback(undefined, res);\n            callback(undefined, {\n                acknowledged: (this.writeConcern?.w !== 0) ?? true,\n                deletedCount: res.n\n            });\n        });\n    }\n}\nexports.DeleteOneOperation = DeleteOneOperation;\nclass DeleteManyOperation extends DeleteOperation {\n    constructor(collection, filter, options){\n        super(collection.s.namespace, [\n            makeDeleteStatement(filter, options)\n        ], options);\n    }\n    executeCallback(server, session, callback) {\n        super.executeCallback(server, session, (err, res)=>{\n            if (err || res == null) return callback(err);\n            if (res.code) return callback(new error_1.MongoServerError(res));\n            if (res.writeErrors) return callback(new error_1.MongoServerError(res.writeErrors[0]));\n            if (this.explain) return callback(undefined, res);\n            callback(undefined, {\n                acknowledged: (this.writeConcern?.w !== 0) ?? true,\n                deletedCount: res.n\n            });\n        });\n    }\n}\nexports.DeleteManyOperation = DeleteManyOperation;\nfunction makeDeleteStatement(filter, options) {\n    const op = {\n        q: filter,\n        limit: typeof options.limit === \"number\" ? options.limit : 0\n    };\n    if (options.collation) {\n        op.collation = options.collation;\n    }\n    if (options.hint) {\n        op.hint = options.hint;\n    }\n    return op;\n}\nexports.makeDeleteStatement = makeDeleteStatement;\n(0, operation_1.defineAspects)(DeleteOperation, [\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.WRITE_OPERATION\n]);\n(0, operation_1.defineAspects)(DeleteOneOperation, [\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.WRITE_OPERATION,\n    operation_1.Aspect.EXPLAINABLE,\n    operation_1.Aspect.SKIP_COLLATION\n]);\n(0, operation_1.defineAspects)(DeleteManyOperation, [\n    operation_1.Aspect.WRITE_OPERATION,\n    operation_1.Aspect.EXPLAINABLE,\n    operation_1.Aspect.SKIP_COLLATION\n]); //# sourceMappingURL=delete.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9kZWxldGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDJCQUEyQixHQUFHQSwyQkFBMkIsR0FBR0EsMEJBQTBCLEdBQUdBLHVCQUF1QixHQUFHLEtBQUs7QUFDeEgsTUFBTU0sVUFBVUMsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUMsWUFBWUQsbUJBQU9BLENBQUMseUVBQVc7QUFDckMsTUFBTUUsY0FBY0YsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsY0FBYyxHQUNkLE1BQU1GLHdCQUF3QkcsVUFBVUUsd0JBQXdCO0lBQzVEQyxZQUFZQyxFQUFFLEVBQUVDLFVBQVUsRUFBRUMsT0FBTyxDQUFFO1FBQ2pDLEtBQUssQ0FBQ0MsV0FBV0Q7UUFDakIsSUFBSSxDQUFDQSxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDRixFQUFFLEdBQUdBO1FBQ1YsSUFBSSxDQUFDQyxVQUFVLEdBQUdBO0lBQ3RCO0lBQ0EsSUFBSUcsZ0JBQWdCO1FBQ2hCLElBQUksS0FBSyxDQUFDQSxrQkFBa0IsT0FBTztZQUMvQixPQUFPO1FBQ1g7UUFDQSxPQUFPLElBQUksQ0FBQ0gsVUFBVSxDQUFDSSxLQUFLLENBQUNDLENBQUFBLEtBQU9BLEdBQUdDLEtBQUssSUFBSSxPQUFPRCxHQUFHQyxLQUFLLEdBQUcsSUFBSTtJQUMxRTtJQUNBQyxnQkFBZ0JDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDdkMsTUFBTVQsVUFBVSxJQUFJLENBQUNBLE9BQU8sSUFBSSxDQUFDO1FBQ2pDLE1BQU1VLFVBQVUsT0FBT1YsUUFBUVUsT0FBTyxLQUFLLFlBQVlWLFFBQVFVLE9BQU8sR0FBRztRQUN6RSxNQUFNQyxVQUFVO1lBQ1pDLFFBQVEsSUFBSSxDQUFDZCxFQUFFLENBQUNlLFVBQVU7WUFDMUJDLFNBQVMsSUFBSSxDQUFD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RztBQUM5QixTQUFTRCxvQkFBb0JxQyxNQUFNLEVBQUV6QixPQUFPO0lBQ3hDLE1BQU1JLEtBQUs7UUFDUGlDLEdBQUdaO1FBQ0hwQixPQUFPLE9BQU9MLFFBQVFLLEtBQUssS0FBSyxXQUFXTCxRQUFRSyxLQUFLLEdBQUc7SUFDL0Q7SUFDQSxJQUFJTCxRQUFRc0MsU0FBUyxFQUFFO1FBQ25CbEMsR0FBR2tDLFNBQVMsR0FBR3RDLFFBQVFzQyxTQUFTO0lBQ3BDO0lBQ0EsSUFBSXRDLFFBQVFzQixJQUFJLEVBQUU7UUFDZGxCLEdBQUdrQixJQUFJLEdBQUd0QixRQUFRc0IsSUFBSTtJQUMxQjtJQUNBLE9BQU9sQjtBQUNYO0FBQ0FsQiwyQkFBMkIsR0FBR0U7QUFDN0IsSUFBR08sWUFBWTRDLGFBQWEsRUFBRWhELGlCQUFpQjtJQUFDSSxZQUFZNkMsTUFBTSxDQUFDQyxTQUFTO0lBQUU5QyxZQUFZNkMsTUFBTSxDQUFDRSxlQUFlO0NBQUM7QUFDakgsSUFBRy9DLFlBQVk0QyxhQUFhLEVBQUVqRCxvQkFBb0I7SUFDL0NLLFlBQVk2QyxNQUFNLENBQUNDLFNBQVM7SUFDNUI5QyxZQUFZNkMsTUFBTSxDQUFDRSxlQUFlO0lBQ2xDL0MsWUFBWTZDLE1BQU0sQ0FBQ0csV0FBVztJQUM5QmhELFlBQVk2QyxNQUFNLENBQUNJLGNBQWM7Q0FDcEM7QUFDQSxJQUFHakQsWUFBWTRDLGFBQWEsRUFBRWxELHFCQUFxQjtJQUNoRE0sWUFBWTZDLE1BQU0sQ0FBQ0UsZUFBZTtJQUNsQy9DLFlBQVk2QyxNQUFNLENBQUNHLFdBQVc7SUFDOUJoRCxZQUFZNkMsTUFBTSxDQUFDSSxjQUFjO0NBQ3BDLEdBQ0Qsa0NBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvZGVsZXRlLmpzP2QyMzciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm1ha2VEZWxldGVTdGF0ZW1lbnQgPSBleHBvcnRzLkRlbGV0ZU1hbnlPcGVyYXRpb24gPSBleHBvcnRzLkRlbGV0ZU9uZU9wZXJhdGlvbiA9IGV4cG9ydHMuRGVsZXRlT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IGNvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRcIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIERlbGV0ZU9wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kQ2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKG5zLCBzdGF0ZW1lbnRzLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKHVuZGVmaW5lZCwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMubnMgPSBucztcbiAgICAgICAgdGhpcy5zdGF0ZW1lbnRzID0gc3RhdGVtZW50cztcbiAgICB9XG4gICAgZ2V0IGNhblJldHJ5V3JpdGUoKSB7XG4gICAgICAgIGlmIChzdXBlci5jYW5SZXRyeVdyaXRlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlbWVudHMuZXZlcnkob3AgPT4gKG9wLmxpbWl0ICE9IG51bGwgPyBvcC5saW1pdCA+IDAgOiB0cnVlKSk7XG4gICAgfVxuICAgIGV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMgPz8ge307XG4gICAgICAgIGNvbnN0IG9yZGVyZWQgPSB0eXBlb2Ygb3B0aW9ucy5vcmRlcmVkID09PSAnYm9vbGVhbicgPyBvcHRpb25zLm9yZGVyZWQgOiB0cnVlO1xuICAgICAgICBjb25zdCBjb21tYW5kID0ge1xuICAgICAgICAgICAgZGVsZXRlOiB0aGlzLm5zLmNvbGxlY3Rpb24sXG4gICAgICAgICAgICBkZWxldGVzOiB0aGlzLnN0YXRlbWVudHMsXG4gICAgICAgICAgICBvcmRlcmVkXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvcHRpb25zLmxldCkge1xuICAgICAgICAgICAgY29tbWFuZC5sZXQgPSBvcHRpb25zLmxldDtcbiAgICAgICAgfVxuICAgICAgICAvLyB3ZSBjaGVjayBmb3IgdW5kZWZpbmVkIHNwZWNpZmljYWxseSBoZXJlIHRvIGFsbG93IGZhbHN5IHZhbHVlc1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgaWYgKG9wdGlvbnMuY29tbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb21tYW5kLmNvbW1lbnQgPSBvcHRpb25zLmNvbW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdW5hY2tub3dsZWRnZWRXcml0ZSA9IHRoaXMud3JpdGVDb25jZXJuICYmIHRoaXMud3JpdGVDb25jZXJuLncgPT09IDA7XG4gICAgICAgIGlmICh1bmFja25vd2xlZGdlZFdyaXRlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZW1lbnRzLmZpbmQoKG8pID0+IG8uaGludCkpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKE5PREUtMzU0MSk6IGZpeCBlcnJvciBmb3IgaGludCB3aXRoIHVuYWNrbm93bGVkZ2VkIHdyaXRlc1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yKGBoaW50IGlzIG5vdCBzdXBwb3J0ZWQgd2l0aCB1bmFja25vd2xlZGdlZCB3cml0ZXNgKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmV4ZWN1dGVDb21tYW5kQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjb21tYW5kLCBjYWxsYmFjayk7XG4gICAgfVxufVxuZXhwb3J0cy5EZWxldGVPcGVyYXRpb24gPSBEZWxldGVPcGVyYXRpb247XG5jbGFzcyBEZWxldGVPbmVPcGVyYXRpb24gZXh0ZW5kcyBEZWxldGVPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIGZpbHRlciwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihjb2xsZWN0aW9uLnMubmFtZXNwYWNlLCBbbWFrZURlbGV0ZVN0YXRlbWVudChmaWx0ZXIsIHsgLi4ub3B0aW9ucywgbGltaXQ6IDEgfSldLCBvcHRpb25zKTtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgc3VwZXIuZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgKGVyciwgcmVzKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyIHx8IHJlcyA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgaWYgKHJlcy5jb2RlKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yKHJlcykpO1xuICAgICAgICAgICAgaWYgKHJlcy53cml0ZUVycm9ycylcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29TZXJ2ZXJFcnJvcihyZXMud3JpdGVFcnJvcnNbMF0pKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmV4cGxhaW4pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHVuZGVmaW5lZCwgcmVzKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwge1xuICAgICAgICAgICAgICAgIGFja25vd2xlZGdlZDogdGhpcy53cml0ZUNvbmNlcm4/LncgIT09IDAgPz8gdHJ1ZSxcbiAgICAgICAgICAgICAgICBkZWxldGVkQ291bnQ6IHJlcy5uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5EZWxldGVPbmVPcGVyYXRpb24gPSBEZWxldGVPbmVPcGVyYXRpb247XG5jbGFzcyBEZWxldGVNYW55T3BlcmF0aW9uIGV4dGVuZHMgRGVsZXRlT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoY29sbGVjdGlvbi5zLm5hbWVzcGFjZSwgW21ha2VEZWxldGVTdGF0ZW1lbnQoZmlsdGVyLCBvcHRpb25zKV0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICBleGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBzdXBlci5leGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCAoZXJyLCByZXMpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIgfHwgcmVzID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICBpZiAocmVzLmNvZGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvU2VydmVyRXJyb3IocmVzKSk7XG4gICAgICAgICAgICBpZiAocmVzLndyaXRlRXJyb3JzKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yKHJlcy53cml0ZUVycm9yc1swXSkpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZXhwbGFpbilcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodW5kZWZpbmVkLCByZXMpO1xuICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCB7XG4gICAgICAgICAgICAgICAgYWNrbm93bGVkZ2VkOiB0aGlzLndyaXRlQ29uY2Vybj8udyAhPT0gMCA/PyB0cnVlLFxuICAgICAgICAgICAgICAgIGRlbGV0ZWRDb3VudDogcmVzLm5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkRlbGV0ZU1hbnlPcGVyYXRpb24gPSBEZWxldGVNYW55T3BlcmF0aW9uO1xuZnVuY3Rpb24gbWFrZURlbGV0ZVN0YXRlbWVudChmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBvcCA9IHtcbiAgICAgICAgcTogZmlsdGVyLFxuICAgICAgICBsaW1pdDogdHlwZW9mIG9wdGlvbnMubGltaXQgPT09ICdudW1iZXInID8gb3B0aW9ucy5saW1pdCA6IDBcbiAgICB9O1xuICAgIGlmIChvcHRpb25zLmNvbGxhdGlvbikge1xuICAgICAgICBvcC5jb2xsYXRpb24gPSBvcHRpb25zLmNvbGxhdGlvbjtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuaGludCkge1xuICAgICAgICBvcC5oaW50ID0gb3B0aW9ucy5oaW50O1xuICAgIH1cbiAgICByZXR1cm4gb3A7XG59XG5leHBvcnRzLm1ha2VEZWxldGVTdGF0ZW1lbnQgPSBtYWtlRGVsZXRlU3RhdGVtZW50O1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKERlbGV0ZU9wZXJhdGlvbiwgW29wZXJhdGlvbl8xLkFzcGVjdC5SRVRSWUFCTEUsIG9wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT05dKTtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShEZWxldGVPbmVPcGVyYXRpb24sIFtcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuUkVUUllBQkxFLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT04sXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LkVYUExBSU5BQkxFLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5TS0lQX0NPTExBVElPTlxuXSk7XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoRGVsZXRlTWFueU9wZXJhdGlvbiwgW1xuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT04sXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LkVYUExBSU5BQkxFLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5TS0lQX0NPTExBVElPTlxuXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWxldGUuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwibWFrZURlbGV0ZVN0YXRlbWVudCIsIkRlbGV0ZU1hbnlPcGVyYXRpb24iLCJEZWxldGVPbmVPcGVyYXRpb24iLCJEZWxldGVPcGVyYXRpb24iLCJlcnJvcl8xIiwicmVxdWlyZSIsImNvbW1hbmRfMSIsIm9wZXJhdGlvbl8xIiwiQ29tbWFuZENhbGxiYWNrT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJucyIsInN0YXRlbWVudHMiLCJvcHRpb25zIiwidW5kZWZpbmVkIiwiY2FuUmV0cnlXcml0ZSIsImV2ZXJ5Iiwib3AiLCJsaW1pdCIsImV4ZWN1dGVDYWxsYmFjayIsInNlcnZlciIsInNlc3Npb24iLCJjYWxsYmFjayIsIm9yZGVyZWQiLCJjb21tYW5kIiwiZGVsZXRlIiwiY29sbGVjdGlvbiIsImRlbGV0ZXMiLCJsZXQiLCJjb21tZW50IiwidW5hY2tub3dsZWRnZWRXcml0ZSIsIndyaXRlQ29uY2VybiIsInciLCJmaW5kIiwibyIsImhpbnQiLCJNb25nb0NvbXBhdGliaWxpdHlFcnJvciIsImV4ZWN1dGVDb21tYW5kQ2FsbGJhY2siLCJmaWx0ZXIiLCJzIiwibmFtZXNwYWNlIiwiZXJyIiwicmVzIiwiY29kZSIsIk1vbmdvU2VydmVyRXJyb3IiLCJ3cml0ZUVycm9ycyIsImV4cGxhaW4iLCJhY2tub3dsZWRnZWQiLCJkZWxldGVkQ291bnQiLCJuIiwicSIsImNvbGxhdGlvbiIsImRlZmluZUFzcGVjdHMiLCJBc3BlY3QiLCJSRVRSWUFCTEUiLCJXUklURV9PUEVSQVRJT04iLCJFWFBMQUlOQUJMRSIsIlNLSVBfQ09MTEFUSU9OIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/delete.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/distinct.js":
/*!*********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/distinct.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DistinctOperation = void 0;\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/**\n * Return a list of distinct values for the given key across a collection.\n * @internal\n */ class DistinctOperation extends command_1.CommandCallbackOperation {\n    /**\n     * Construct a Distinct operation.\n     *\n     * @param collection - Collection instance.\n     * @param key - Field of the document to find distinct values for.\n     * @param query - The query for filtering the set of documents to which we apply the distinct filter.\n     * @param options - Optional settings. See Collection.prototype.distinct for a list of options.\n     */ constructor(collection, key, query, options){\n        super(collection, options);\n        this.options = options ?? {};\n        this.collection = collection;\n        this.key = key;\n        this.query = query;\n    }\n    executeCallback(server, session, callback) {\n        const coll = this.collection;\n        const key = this.key;\n        const query = this.query;\n        const options = this.options;\n        // Distinct command\n        const cmd = {\n            distinct: coll.collectionName,\n            key: key,\n            query: query\n        };\n        // Add maxTimeMS if defined\n        if (typeof options.maxTimeMS === \"number\") {\n            cmd.maxTimeMS = options.maxTimeMS;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (typeof options.comment !== \"undefined\") {\n            cmd.comment = options.comment;\n        }\n        // Do we have a readConcern specified\n        (0, utils_1.decorateWithReadConcern)(cmd, coll, options);\n        // Have we specified collation\n        try {\n            (0, utils_1.decorateWithCollation)(cmd, coll, options);\n        } catch (err) {\n            return callback(err);\n        }\n        super.executeCommandCallback(server, session, cmd, (err, result)=>{\n            if (err) {\n                callback(err);\n                return;\n            }\n            callback(undefined, this.explain ? result : result.values);\n        });\n    }\n}\nexports.DistinctOperation = DistinctOperation;\n(0, operation_1.defineAspects)(DistinctOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.EXPLAINABLE\n]); //# sourceMappingURL=distinct.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9kaXN0aW5jdC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQseUJBQXlCLEdBQUcsS0FBSztBQUNqQyxNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxZQUFZRCxtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNRSxjQUFjRixtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6Qzs7O0NBR0MsR0FDRCxNQUFNRiwwQkFBMEJHLFVBQVVFLHdCQUF3QjtJQUM5RDs7Ozs7OztLQU9DLEdBQ0RDLFlBQVlDLFVBQVUsRUFBRUMsR0FBRyxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sQ0FBRTtRQUN6QyxLQUFLLENBQUNILFlBQVlHO1FBQ2xCLElBQUksQ0FBQ0EsT0FBTyxHQUFHQSxXQUFXLENBQUM7UUFDM0IsSUFBSSxDQUFDSCxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsR0FBRyxHQUFHQTtRQUNYLElBQUksQ0FBQ0MsS0FBSyxHQUFHQTtJQUNqQjtJQUNBRSxnQkFBZ0JDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDdkMsTUFBTUMsT0FBTyxJQUFJLENBQUNSLFVBQVU7UUFDNUIsTUFBTUMsTUFBTSxJQUFJLENBQUNBLEdBQUc7UUFDcEIsTUFBTUMsUUFBUSxJQUFJLENBQUNBLEtBQUs7UUFDeEIsTUFBTUMsVUFBVSxJQUFJLENBQUNBLE9BQU87UUFDNUIsbUJBQW1CO1FBQ25CLE1BQU1NLE1BQU07WUFDUkMsVUFBVUYsS0FBS0csY0FBYztZQUM3QlYsS0FBS0E7WUFDTEMsT0FBT0E7UUFDWDtRQUNBLDJCQUEyQjtRQUMzQixJQUFJLE9BQU9DLFFBQVFTLFNBQVMsS0FBSyxVQUFVO1lBQ3ZDSCxJQUFJRyxTQUFTLEdBQUdULFFBQVFTLFNBQVM7UUFDckM7UUFDQSxpRUFBaUU7UUFDakUsZ0RBQWdEO1FBQ2hELElBQUksT0FBT1QsUUFBUVUsT0FBTyxLQUFLLGFBQWE7WUFDeENKLElBQUlJLE9BQU8sR0FBR1YsUUFBUVUsT0FBTztRQUNqQztRQUNBLHFDQUFxQztRQUNwQyxJQUFHbkIsUUFBUW9CLHVCQUF1QixFQUFFTCxLQUFLRCxNQUFNTDtRQUNoRCw4QkFBOEI7UUFDOUIsSUFBSTtZQUNDLElBQUdULFFBQVFxQixxQkFBcUIsRUFBRU4sS0FBS0QsTUFBTUw7UUFDbEQsRUFDQSxPQUFPYSxLQUFLO1lBQ1IsT0FBT1QsU0FBU1M7UUFDcEI7UUFDQSxLQUFLLENBQUNDLHVCQUF1QlosUUFBUUMsU0FBU0csS0FBSyxDQUFDTyxLQUFLRTtZQUNyRCxJQUFJRixLQUFLO2dCQUNMVCxTQUFTUztnQkFDVDtZQUNKO1lBQ0FULFNBQVNZLFdBQVcsSUFBSSxDQUFDQyxPQUFPLEdBQUdGLFNBQVNBLE9BQU9HLE1BQU07UUFDN0Q7SUFDSjtBQUNKO0FBQ0E5Qix5QkFBeUIsR0FBR0U7QUFDM0IsSUFBR0ksWUFBWXlCLGFBQWEsRUFBRTdCLG1CQUFtQjtJQUFDSSxZQUFZMEIsTUFBTSxDQUFDQyxjQUFjO0lBQUUzQixZQUFZMEIsTUFBTSxDQUFDRSxTQUFTO0lBQUU1QixZQUFZMEIsTUFBTSxDQUFDRyxXQUFXO0NBQUMsR0FDbkosb0NBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvZGlzdGluY3QuanM/ZDE5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRGlzdGluY3RPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgY29tbWFuZF8xID0gcmVxdWlyZShcIi4vY29tbWFuZFwiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqXG4gKiBSZXR1cm4gYSBsaXN0IG9mIGRpc3RpbmN0IHZhbHVlcyBmb3IgdGhlIGdpdmVuIGtleSBhY3Jvc3MgYSBjb2xsZWN0aW9uLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIERpc3RpbmN0T3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRDYWxsYmFja09wZXJhdGlvbiB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IGEgRGlzdGluY3Qgb3BlcmF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbGxlY3Rpb24gLSBDb2xsZWN0aW9uIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBrZXkgLSBGaWVsZCBvZiB0aGUgZG9jdW1lbnQgdG8gZmluZCBkaXN0aW5jdCB2YWx1ZXMgZm9yLlxuICAgICAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeSBmb3IgZmlsdGVyaW5nIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRvIHdoaWNoIHdlIGFwcGx5IHRoZSBkaXN0aW5jdCBmaWx0ZXIuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncy4gU2VlIENvbGxlY3Rpb24ucHJvdG90eXBlLmRpc3RpbmN0IGZvciBhIGxpc3Qgb2Ygb3B0aW9ucy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBrZXksIHF1ZXJ5LCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24sIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zID8/IHt9O1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xuICAgIH1cbiAgICBleGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBjb2xsID0gdGhpcy5jb2xsZWN0aW9uO1xuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmtleTtcbiAgICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnF1ZXJ5O1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAvLyBEaXN0aW5jdCBjb21tYW5kXG4gICAgICAgIGNvbnN0IGNtZCA9IHtcbiAgICAgICAgICAgIGRpc3RpbmN0OiBjb2xsLmNvbGxlY3Rpb25OYW1lLFxuICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICBxdWVyeTogcXVlcnlcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQWRkIG1heFRpbWVNUyBpZiBkZWZpbmVkXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5tYXhUaW1lTVMgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBjbWQubWF4VGltZU1TID0gb3B0aW9ucy5tYXhUaW1lTVM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gd2UgY2hlY2sgZm9yIHVuZGVmaW5lZCBzcGVjaWZpY2FsbHkgaGVyZSB0byBhbGxvdyBmYWxzeSB2YWx1ZXNcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jb21tZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY21kLmNvbW1lbnQgPSBvcHRpb25zLmNvbW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG8gd2UgaGF2ZSBhIHJlYWRDb25jZXJuIHNwZWNpZmllZFxuICAgICAgICAoMCwgdXRpbHNfMS5kZWNvcmF0ZVdpdGhSZWFkQ29uY2VybikoY21kLCBjb2xsLCBvcHRpb25zKTtcbiAgICAgICAgLy8gSGF2ZSB3ZSBzcGVjaWZpZWQgY29sbGF0aW9uXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAoMCwgdXRpbHNfMS5kZWNvcmF0ZVdpdGhDb2xsYXRpb24pKGNtZCwgY29sbCwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIuZXhlY3V0ZUNvbW1hbmRDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNtZCwgKGVyciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIHRoaXMuZXhwbGFpbiA/IHJlc3VsdCA6IHJlc3VsdC52YWx1ZXMpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkRpc3RpbmN0T3BlcmF0aW9uID0gRGlzdGluY3RPcGVyYXRpb247XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoRGlzdGluY3RPcGVyYXRpb24sIFtvcGVyYXRpb25fMS5Bc3BlY3QuUkVBRF9PUEVSQVRJT04sIG9wZXJhdGlvbl8xLkFzcGVjdC5SRVRSWUFCTEUsIG9wZXJhdGlvbl8xLkFzcGVjdC5FWFBMQUlOQUJMRV0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlzdGluY3QuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRGlzdGluY3RPcGVyYXRpb24iLCJ1dGlsc18xIiwicmVxdWlyZSIsImNvbW1hbmRfMSIsIm9wZXJhdGlvbl8xIiwiQ29tbWFuZENhbGxiYWNrT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJjb2xsZWN0aW9uIiwia2V5IiwicXVlcnkiLCJvcHRpb25zIiwiZXhlY3V0ZUNhbGxiYWNrIiwic2VydmVyIiwic2Vzc2lvbiIsImNhbGxiYWNrIiwiY29sbCIsImNtZCIsImRpc3RpbmN0IiwiY29sbGVjdGlvbk5hbWUiLCJtYXhUaW1lTVMiLCJjb21tZW50IiwiZGVjb3JhdGVXaXRoUmVhZENvbmNlcm4iLCJkZWNvcmF0ZVdpdGhDb2xsYXRpb24iLCJlcnIiLCJleGVjdXRlQ29tbWFuZENhbGxiYWNrIiwicmVzdWx0IiwidW5kZWZpbmVkIiwiZXhwbGFpbiIsInZhbHVlcyIsImRlZmluZUFzcGVjdHMiLCJBc3BlY3QiLCJSRUFEX09QRVJBVElPTiIsIlJFVFJZQUJMRSIsIkVYUExBSU5BQkxFIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/distinct.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/drop.js":
/*!*****************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/drop.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DropDatabaseOperation = exports.DropCollectionOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class DropCollectionOperation extends command_1.CommandCallbackOperation {\n    constructor(db, name, options = {}){\n        super(db, options);\n        this.db = db;\n        this.options = options;\n        this.name = name;\n    }\n    executeCallback(server, session, callback) {\n        (async ()=>{\n            const db = this.db;\n            const options = this.options;\n            const name = this.name;\n            const encryptedFieldsMap = db.client.options.autoEncryption?.encryptedFieldsMap;\n            let encryptedFields = options.encryptedFields ?? encryptedFieldsMap?.[`${db.databaseName}.${name}`];\n            if (!encryptedFields && encryptedFieldsMap) {\n                // If the MongoClient was configured with an encryptedFieldsMap,\n                // and no encryptedFields config was available in it or explicitly\n                // passed as an argument, the spec tells us to look one up using\n                // listCollections().\n                const listCollectionsResult = await db.listCollections({\n                    name\n                }, {\n                    nameOnly: false\n                }).toArray();\n                encryptedFields = listCollectionsResult?.[0]?.options?.encryptedFields;\n            }\n            if (encryptedFields) {\n                const escCollection = encryptedFields.escCollection || `enxcol_.${name}.esc`;\n                const ecocCollection = encryptedFields.ecocCollection || `enxcol_.${name}.ecoc`;\n                for (const collectionName of [\n                    escCollection,\n                    ecocCollection\n                ]){\n                    // Drop auxilliary collections, ignoring potential NamespaceNotFound errors.\n                    const dropOp = new DropCollectionOperation(db, collectionName);\n                    try {\n                        await dropOp.executeWithoutEncryptedFieldsCheck(server, session);\n                    } catch (err) {\n                        if (!(err instanceof error_1.MongoServerError) || err.code !== error_1.MONGODB_ERROR_CODES.NamespaceNotFound) {\n                            throw err;\n                        }\n                    }\n                }\n            }\n            return this.executeWithoutEncryptedFieldsCheck(server, session);\n        })().then((result)=>callback(undefined, result), (err)=>callback(err));\n    }\n    executeWithoutEncryptedFieldsCheck(server, session) {\n        return new Promise((resolve, reject)=>{\n            super.executeCommandCallback(server, session, {\n                drop: this.name\n            }, (err, result)=>{\n                if (err) return reject(err);\n                resolve(!!result.ok);\n            });\n        });\n    }\n}\nexports.DropCollectionOperation = DropCollectionOperation;\n/** @internal */ class DropDatabaseOperation extends command_1.CommandCallbackOperation {\n    constructor(db, options){\n        super(db, options);\n        this.options = options;\n    }\n    executeCallback(server, session, callback) {\n        super.executeCommandCallback(server, session, {\n            dropDatabase: 1\n        }, (err, result)=>{\n            if (err) return callback(err);\n            if (result.ok) return callback(undefined, true);\n            callback(undefined, false);\n        });\n    }\n}\nexports.DropDatabaseOperation = DropDatabaseOperation;\n(0, operation_1.defineAspects)(DropCollectionOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]);\n(0, operation_1.defineAspects)(DropDatabaseOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]); //# sourceMappingURL=drop.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9kcm9wLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw2QkFBNkIsR0FBR0EsK0JBQStCLEdBQUcsS0FBSztBQUN2RSxNQUFNSSxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxZQUFZRCxtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNRSxjQUFjRixtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYsZ0NBQWdDRyxVQUFVRSx3QkFBd0I7SUFDcEVDLFlBQVlDLEVBQUUsRUFBRUMsSUFBSSxFQUFFQyxVQUFVLENBQUMsQ0FBQyxDQUFFO1FBQ2hDLEtBQUssQ0FBQ0YsSUFBSUU7UUFDVixJQUFJLENBQUNGLEVBQUUsR0FBR0E7UUFDVixJQUFJLENBQUNFLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNELElBQUksR0FBR0E7SUFDaEI7SUFDQUUsZ0JBQWdCQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFO1FBQ3RDO1lBQ0csTUFBTU4sS0FBSyxJQUFJLENBQUNBLEVBQUU7WUFDbEIsTUFBTUUsVUFBVSxJQUFJLENBQUNBLE9BQU87WUFDNUIsTUFBTUQsT0FBTyxJQUFJLENBQUNBLElBQUk7WUFDdEIsTUFBTU0scUJBQXFCUCxHQUFHUSxNQUFNLENBQUNOLE9BQU8sQ0FBQ08sY0FBYyxFQUFFRjtZQUM3RCxJQUFJRyxrQkFBa0JSLFFBQVFRLGVBQWUsSUFBSUgsb0JBQW9CLENBQUMsQ0FBQyxFQUFFUCxHQUFHVyxZQUFZLENBQUMsQ0FBQyxFQUFFVixLQUFLLENBQUMsQ0FBQztZQUNuRyxJQUFJLENBQUNTLG1CQUFtQkgsb0JBQW9CO2dCQUN4QyxnRUFBZ0U7Z0JBQ2hFLGtFQUFrRTtnQkFDbEUsZ0VBQWdFO2dCQUNoRSxxQkFBcUI7Z0JBQ3JCLE1BQU1LLHdCQUF3QixNQUFNWixHQUMvQmEsZUFBZSxDQUFDO29CQUFFWjtnQkFBSyxHQUFHO29CQUFFYSxVQUFVO2dCQUFNLEdBQzVDQyxPQUFPO2dCQUNaTCxrQkFBa0JFLHVCQUF1QixDQUFDLEVBQUUsRUFBRVYsU0FBU1E7WUFDM0Q7WUFDQSxJQUFJQSxpQkFBaUI7Z0JBQ2pCLE1BQU1NLGdCQUFnQk4sZ0JBQWdCTSxhQUFhLElBQUksQ0FBQyxRQUFRLEVBQUVmLEtBQUssSUFBSSxDQUFDO2dCQUM1RSxNQUFNZ0IsaUJBQWlCUCxnQkFBZ0JPLGNBQWMsSUFBSSxDQUFDLFFBQVEsRUFBRWhCLEtBQUssS0FBSyxDQUFDO2dCQUMvRSxLQUFLLE1BQU1pQixrQkFBa0I7b0JBQUNGO29CQUFlQztpQkFBZSxDQUFFO29CQUMxRCw0RUFBNEU7b0JBQzVFLE1BQU1FLFNBQVMsSUFBSTFCLHdCQUF3Qk8sSUFBSWtCO29CQUMvQyxJQUFJO3dCQUNBLE1BQU1DLE9BQU9DLGtDQUFrQyxDQUFDaEIsUUFBUUM7b0JBQzVELEVBQ0EsT0FBT2dCLEtBQUs7d0JBQ1IsSUFBSSxDQUFFQSxDQUFBQSxlQUFlM0IsUUFBUTRCLGdCQUFnQixLQUN6Q0QsSUFBSUUsSUFBSSxLQUFLN0IsUUFBUThCLG1CQUFtQixDQUFDQyxpQkFBaUIsRUFBRTs0QkFDNUQsTUFBTUo7d0JBQ1Y7b0JBQ0o7Z0JBQ0o7WUFDSjtZQUNBLE9BQU8sSUFBSSxDQUFDRCxrQ0FBa0MsQ0FBQ2hCLFFBQVFDO1FBQzNELEtBQUtxQixJQUFJLENBQUNDLENBQUFBLFNBQVVyQixTQUFTc0IsV0FBV0QsU0FBU04sQ0FBQUEsTUFBT2YsU0FBU2U7SUFDckU7SUFDQUQsbUNBQW1DaEIsTUFBTSxFQUFFQyxPQUFPLEVBQUU7UUFDaEQsT0FBTyxJQUFJd0IsUUFBUSxDQUFDQyxTQUFTQztZQUN6QixLQUFLLENBQUNDLHVCQUF1QjVCLFFBQVFDLFNBQVM7Z0JBQUU0QixNQUFNLElBQUksQ0FBQ2hDLElBQUk7WUFBQyxHQUFHLENBQUNvQixLQUFLTTtnQkFDckUsSUFBSU4sS0FDQSxPQUFPVSxPQUFPVjtnQkFDbEJTLFFBQVEsQ0FBQyxDQUFDSCxPQUFPTyxFQUFFO1lBQ3ZCO1FBQ0o7SUFDSjtBQUNKO0FBQ0E1QywrQkFBK0IsR0FBR0c7QUFDbEMsY0FBYyxHQUNkLE1BQU1ELDhCQUE4QkksVUFBVUUsd0JBQXdCO0lBQ2xFQyxZQUFZQyxFQUFFLEVBQUVFLE9BQU8sQ0FBRTtRQUNyQixLQUFLLENBQUNGLElBQUlFO1FBQ1YsSUFBSSxDQUFDQSxPQUFPLEdBQUdBO0lBQ25CO0lBQ0FDLGdCQUFnQkMsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLFFBQVEsRUFBRTtRQUN2QyxLQUFLLENBQUMwQix1QkFBdUI1QixRQUFRQyxTQUFTO1lBQUU4QixjQUFjO1FBQUUsR0FBRyxDQUFDZCxLQUFLTTtZQUNyRSxJQUFJTixLQUNBLE9BQU9mLFNBQVNlO1lBQ3BCLElBQUlNLE9BQU9PLEVBQUUsRUFDVCxPQUFPNUIsU0FBU3NCLFdBQVc7WUFDL0J0QixTQUFTc0IsV0FBVztRQUN4QjtJQUNKO0FBQ0o7QUFDQXRDLDZCQUE2QixHQUFHRTtBQUMvQixJQUFHSyxZQUFZdUMsYUFBYSxFQUFFM0MseUJBQXlCO0lBQUNJLFlBQVl3QyxNQUFNLENBQUNDLGVBQWU7Q0FBQztBQUMzRixJQUFHekMsWUFBWXVDLGFBQWEsRUFBRTVDLHVCQUF1QjtJQUFDSyxZQUFZd0MsTUFBTSxDQUFDQyxlQUFlO0NBQUMsR0FDMUYsZ0NBQWdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvZHJvcC5qcz9iYjJlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Ecm9wRGF0YWJhc2VPcGVyYXRpb24gPSBleHBvcnRzLkRyb3BDb2xsZWN0aW9uT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IGNvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRcIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIERyb3BDb2xsZWN0aW9uT3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRDYWxsYmFja09wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZGIsIG5hbWUsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcihkYiwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuZGIgPSBkYjtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRiID0gdGhpcy5kYjtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5uYW1lO1xuICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkRmllbGRzTWFwID0gZGIuY2xpZW50Lm9wdGlvbnMuYXV0b0VuY3J5cHRpb24/LmVuY3J5cHRlZEZpZWxkc01hcDtcbiAgICAgICAgICAgIGxldCBlbmNyeXB0ZWRGaWVsZHMgPSBvcHRpb25zLmVuY3J5cHRlZEZpZWxkcyA/PyBlbmNyeXB0ZWRGaWVsZHNNYXA/LltgJHtkYi5kYXRhYmFzZU5hbWV9LiR7bmFtZX1gXTtcbiAgICAgICAgICAgIGlmICghZW5jcnlwdGVkRmllbGRzICYmIGVuY3J5cHRlZEZpZWxkc01hcCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBNb25nb0NsaWVudCB3YXMgY29uZmlndXJlZCB3aXRoIGFuIGVuY3J5cHRlZEZpZWxkc01hcCxcbiAgICAgICAgICAgICAgICAvLyBhbmQgbm8gZW5jcnlwdGVkRmllbGRzIGNvbmZpZyB3YXMgYXZhaWxhYmxlIGluIGl0IG9yIGV4cGxpY2l0bHlcbiAgICAgICAgICAgICAgICAvLyBwYXNzZWQgYXMgYW4gYXJndW1lbnQsIHRoZSBzcGVjIHRlbGxzIHVzIHRvIGxvb2sgb25lIHVwIHVzaW5nXG4gICAgICAgICAgICAgICAgLy8gbGlzdENvbGxlY3Rpb25zKCkuXG4gICAgICAgICAgICAgICAgY29uc3QgbGlzdENvbGxlY3Rpb25zUmVzdWx0ID0gYXdhaXQgZGJcbiAgICAgICAgICAgICAgICAgICAgLmxpc3RDb2xsZWN0aW9ucyh7IG5hbWUgfSwgeyBuYW1lT25seTogZmFsc2UgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRvQXJyYXkoKTtcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRGaWVsZHMgPSBsaXN0Q29sbGVjdGlvbnNSZXN1bHQ/LlswXT8ub3B0aW9ucz8uZW5jcnlwdGVkRmllbGRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVuY3J5cHRlZEZpZWxkcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVzY0NvbGxlY3Rpb24gPSBlbmNyeXB0ZWRGaWVsZHMuZXNjQ29sbGVjdGlvbiB8fCBgZW54Y29sXy4ke25hbWV9LmVzY2A7XG4gICAgICAgICAgICAgICAgY29uc3QgZWNvY0NvbGxlY3Rpb24gPSBlbmNyeXB0ZWRGaWVsZHMuZWNvY0NvbGxlY3Rpb24gfHwgYGVueGNvbF8uJHtuYW1lfS5lY29jYDtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvbGxlY3Rpb25OYW1lIG9mIFtlc2NDb2xsZWN0aW9uLCBlY29jQ29sbGVjdGlvbl0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRHJvcCBhdXhpbGxpYXJ5IGNvbGxlY3Rpb25zLCBpZ25vcmluZyBwb3RlbnRpYWwgTmFtZXNwYWNlTm90Rm91bmQgZXJyb3JzLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkcm9wT3AgPSBuZXcgRHJvcENvbGxlY3Rpb25PcGVyYXRpb24oZGIsIGNvbGxlY3Rpb25OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGRyb3BPcC5leGVjdXRlV2l0aG91dEVuY3J5cHRlZEZpZWxkc0NoZWNrKHNlcnZlciwgc2Vzc2lvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZXJyIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyci5jb2RlICE9PSBlcnJvcl8xLk1PTkdPREJfRVJST1JfQ09ERVMuTmFtZXNwYWNlTm90Rm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjdXRlV2l0aG91dEVuY3J5cHRlZEZpZWxkc0NoZWNrKHNlcnZlciwgc2Vzc2lvbik7XG4gICAgICAgIH0pKCkudGhlbihyZXN1bHQgPT4gY2FsbGJhY2sodW5kZWZpbmVkLCByZXN1bHQpLCBlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuICAgIGV4ZWN1dGVXaXRob3V0RW5jcnlwdGVkRmllbGRzQ2hlY2soc2VydmVyLCBzZXNzaW9uKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBzdXBlci5leGVjdXRlQ29tbWFuZENhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgeyBkcm9wOiB0aGlzLm5hbWUgfSwgKGVyciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoISFyZXN1bHQub2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuRHJvcENvbGxlY3Rpb25PcGVyYXRpb24gPSBEcm9wQ29sbGVjdGlvbk9wZXJhdGlvbjtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIERyb3BEYXRhYmFzZU9wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kQ2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGRiLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGRiLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgc3VwZXIuZXhlY3V0ZUNvbW1hbmRDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIHsgZHJvcERhdGFiYXNlOiAxIH0sIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycilcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQub2spXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5Ecm9wRGF0YWJhc2VPcGVyYXRpb24gPSBEcm9wRGF0YWJhc2VPcGVyYXRpb247XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoRHJvcENvbGxlY3Rpb25PcGVyYXRpb24sIFtvcGVyYXRpb25fMS5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OXSk7XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoRHJvcERhdGFiYXNlT3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZHJvcC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJEcm9wRGF0YWJhc2VPcGVyYXRpb24iLCJEcm9wQ29sbGVjdGlvbk9wZXJhdGlvbiIsImVycm9yXzEiLCJyZXF1aXJlIiwiY29tbWFuZF8xIiwib3BlcmF0aW9uXzEiLCJDb21tYW5kQ2FsbGJhY2tPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImRiIiwibmFtZSIsIm9wdGlvbnMiLCJleGVjdXRlQ2FsbGJhY2siLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJlbmNyeXB0ZWRGaWVsZHNNYXAiLCJjbGllbnQiLCJhdXRvRW5jcnlwdGlvbiIsImVuY3J5cHRlZEZpZWxkcyIsImRhdGFiYXNlTmFtZSIsImxpc3RDb2xsZWN0aW9uc1Jlc3VsdCIsImxpc3RDb2xsZWN0aW9ucyIsIm5hbWVPbmx5IiwidG9BcnJheSIsImVzY0NvbGxlY3Rpb24iLCJlY29jQ29sbGVjdGlvbiIsImNvbGxlY3Rpb25OYW1lIiwiZHJvcE9wIiwiZXhlY3V0ZVdpdGhvdXRFbmNyeXB0ZWRGaWVsZHNDaGVjayIsImVyciIsIk1vbmdvU2VydmVyRXJyb3IiLCJjb2RlIiwiTU9OR09EQl9FUlJPUl9DT0RFUyIsIk5hbWVzcGFjZU5vdEZvdW5kIiwidGhlbiIsInJlc3VsdCIsInVuZGVmaW5lZCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZXhlY3V0ZUNvbW1hbmRDYWxsYmFjayIsImRyb3AiLCJvayIsImRyb3BEYXRhYmFzZSIsImRlZmluZUFzcGVjdHMiLCJBc3BlY3QiLCJXUklURV9PUEVSQVRJT04iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/drop.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/estimated_document_count.js":
/*!*************************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/estimated_document_count.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.EstimatedDocumentCountOperation = void 0;\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class EstimatedDocumentCountOperation extends command_1.CommandCallbackOperation {\n    constructor(collection, options = {}){\n        super(collection, options);\n        this.options = options;\n        this.collectionName = collection.collectionName;\n    }\n    executeCallback(server, session, callback) {\n        const cmd = {\n            count: this.collectionName\n        };\n        if (typeof this.options.maxTimeMS === \"number\") {\n            cmd.maxTimeMS = this.options.maxTimeMS;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (this.options.comment !== undefined) {\n            cmd.comment = this.options.comment;\n        }\n        super.executeCommandCallback(server, session, cmd, (err, response)=>{\n            if (err) {\n                callback(err);\n                return;\n            }\n            callback(undefined, response?.n || 0);\n        });\n    }\n}\nexports.EstimatedDocumentCountOperation = EstimatedDocumentCountOperation;\n(0, operation_1.defineAspects)(EstimatedDocumentCountOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.CURSOR_CREATING\n]); //# sourceMappingURL=estimated_document_count.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9lc3RpbWF0ZWRfZG9jdW1lbnRfY291bnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHVDQUF1QyxHQUFHLEtBQUs7QUFDL0MsTUFBTUcsWUFBWUMsbUJBQU9BLENBQUMseUVBQVc7QUFDckMsTUFBTUMsY0FBY0QsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsY0FBYyxHQUNkLE1BQU1GLHdDQUF3Q0MsVUFBVUcsd0JBQXdCO0lBQzVFQyxZQUFZQyxVQUFVLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLENBQUU7UUFDbEMsS0FBSyxDQUFDRCxZQUFZQztRQUNsQixJQUFJLENBQUNBLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLGNBQWMsR0FBR0YsV0FBV0UsY0FBYztJQUNuRDtJQUNBQyxnQkFBZ0JDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDdkMsTUFBTUMsTUFBTTtZQUFFQyxPQUFPLElBQUksQ0FBQ04sY0FBYztRQUFDO1FBQ3pDLElBQUksT0FBTyxJQUFJLENBQUNELE9BQU8sQ0FBQ1EsU0FBUyxLQUFLLFVBQVU7WUFDNUNGLElBQUlFLFNBQVMsR0FBRyxJQUFJLENBQUNSLE9BQU8sQ0FBQ1EsU0FBUztRQUMxQztRQUNBLGlFQUFpRTtRQUNqRSxnREFBZ0Q7UUFDaEQsSUFBSSxJQUFJLENBQUNSLE9BQU8sQ0FBQ1MsT0FBTyxLQUFLQyxXQUFXO1lBQ3BDSixJQUFJRyxPQUFPLEdBQUcsSUFBSSxDQUFDVCxPQUFPLENBQUNTLE9BQU87UUFDdEM7UUFDQSxLQUFLLENBQUNFLHVCQUF1QlIsUUFBUUMsU0FBU0UsS0FBSyxDQUFDTSxLQUFLQztZQUNyRCxJQUFJRCxLQUFLO2dCQUNMUCxTQUFTTztnQkFDVDtZQUNKO1lBQ0FQLFNBQVNLLFdBQVdHLFVBQVVDLEtBQUs7UUFDdkM7SUFDSjtBQUNKO0FBQ0F2Qix1Q0FBdUMsR0FBR0U7QUFDekMsSUFBR0csWUFBWW1CLGFBQWEsRUFBRXRCLGlDQUFpQztJQUM1REcsWUFBWW9CLE1BQU0sQ0FBQ0MsY0FBYztJQUNqQ3JCLFlBQVlvQixNQUFNLENBQUNFLFNBQVM7SUFDNUJ0QixZQUFZb0IsTUFBTSxDQUFDRyxlQUFlO0NBQ3JDLEdBQ0Qsb0RBQW9EIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvZXN0aW1hdGVkX2RvY3VtZW50X2NvdW50LmpzPzgyMzAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkVzdGltYXRlZERvY3VtZW50Q291bnRPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBjb21tYW5kXzEgPSByZXF1aXJlKFwiLi9jb21tYW5kXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBFc3RpbWF0ZWREb2N1bWVudENvdW50T3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRDYWxsYmFja09wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24sIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25OYW1lID0gY29sbGVjdGlvbi5jb2xsZWN0aW9uTmFtZTtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgY21kID0geyBjb3VudDogdGhpcy5jb2xsZWN0aW9uTmFtZSB9O1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5tYXhUaW1lTVMgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBjbWQubWF4VGltZU1TID0gdGhpcy5vcHRpb25zLm1heFRpbWVNUztcbiAgICAgICAgfVxuICAgICAgICAvLyB3ZSBjaGVjayBmb3IgdW5kZWZpbmVkIHNwZWNpZmljYWxseSBoZXJlIHRvIGFsbG93IGZhbHN5IHZhbHVlc1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb21tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNtZC5jb21tZW50ID0gdGhpcy5vcHRpb25zLmNvbW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIuZXhlY3V0ZUNvbW1hbmRDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNtZCwgKGVyciwgcmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwgcmVzcG9uc2U/Lm4gfHwgMCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuRXN0aW1hdGVkRG9jdW1lbnRDb3VudE9wZXJhdGlvbiA9IEVzdGltYXRlZERvY3VtZW50Q291bnRPcGVyYXRpb247XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoRXN0aW1hdGVkRG9jdW1lbnRDb3VudE9wZXJhdGlvbiwgW1xuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5SRUFEX09QRVJBVElPTixcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuUkVUUllBQkxFLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5DVVJTT1JfQ1JFQVRJTkdcbl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXN0aW1hdGVkX2RvY3VtZW50X2NvdW50LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkVzdGltYXRlZERvY3VtZW50Q291bnRPcGVyYXRpb24iLCJjb21tYW5kXzEiLCJyZXF1aXJlIiwib3BlcmF0aW9uXzEiLCJDb21tYW5kQ2FsbGJhY2tPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImNvbGxlY3Rpb24iLCJvcHRpb25zIiwiY29sbGVjdGlvbk5hbWUiLCJleGVjdXRlQ2FsbGJhY2siLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJjbWQiLCJjb3VudCIsIm1heFRpbWVNUyIsImNvbW1lbnQiLCJ1bmRlZmluZWQiLCJleGVjdXRlQ29tbWFuZENhbGxiYWNrIiwiZXJyIiwicmVzcG9uc2UiLCJuIiwiZGVmaW5lQXNwZWN0cyIsIkFzcGVjdCIsIlJFQURfT1BFUkFUSU9OIiwiUkVUUllBQkxFIiwiQ1VSU09SX0NSRUFUSU5HIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/estimated_document_count.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js":
/*!******************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/execute_operation.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.executeOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst server_selection_1 = __webpack_require__(/*! ../sdam/server_selection */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_selection.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\nconst MMAPv1_RETRY_WRITES_ERROR_CODE = error_1.MONGODB_ERROR_CODES.IllegalOperation;\nconst MMAPv1_RETRY_WRITES_ERROR_MESSAGE = \"This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.\";\nfunction executeOperation(client, operation, callback) {\n    return (0, utils_1.maybeCallback)(()=>executeOperationAsync(client, operation), callback);\n}\nexports.executeOperation = executeOperation;\nasync function executeOperationAsync(client, operation) {\n    if (!(operation instanceof operation_1.AbstractCallbackOperation)) {\n        // TODO(NODE-3483): Extend MongoRuntimeError\n        throw new error_1.MongoRuntimeError(\"This method requires a valid operation instance\");\n    }\n    if (client.topology == null) {\n        // Auto connect on operation\n        if (client.s.hasBeenClosed) {\n            throw new error_1.MongoNotConnectedError(\"Client must be connected before running operations\");\n        }\n        client.s.options[Symbol.for(\"@@mdb.skipPingOnConnect\")] = true;\n        try {\n            await client.connect();\n        } finally{\n            delete client.s.options[Symbol.for(\"@@mdb.skipPingOnConnect\")];\n        }\n    }\n    const { topology } = client;\n    if (topology == null) {\n        throw new error_1.MongoRuntimeError(\"client.connect did not create a topology but also did not throw\");\n    }\n    // The driver sessions spec mandates that we implicitly create sessions for operations\n    // that are not explicitly provided with a session.\n    let session = operation.session;\n    let owner;\n    if (session == null) {\n        owner = Symbol();\n        session = client.startSession({\n            owner,\n            explicit: false\n        });\n    } else if (session.hasEnded) {\n        throw new error_1.MongoExpiredSessionError(\"Use of expired sessions is not permitted\");\n    } else if (session.snapshotEnabled && !topology.capabilities.supportsSnapshotReads) {\n        throw new error_1.MongoCompatibilityError(\"Snapshot reads require MongoDB 5.0 or later\");\n    }\n    const readPreference = operation.readPreference ?? read_preference_1.ReadPreference.primary;\n    const inTransaction = !!session?.inTransaction();\n    if (inTransaction && !readPreference.equals(read_preference_1.ReadPreference.primary)) {\n        throw new error_1.MongoTransactionError(`Read preference in a transaction must be primary, not: ${readPreference.mode}`);\n    }\n    if (session?.isPinned && session.transaction.isCommitted && !operation.bypassPinningCheck) {\n        session.unpin();\n    }\n    let selector;\n    if (operation.hasAspect(operation_1.Aspect.MUST_SELECT_SAME_SERVER)) {\n        // GetMore and KillCursor operations must always select the same server, but run through\n        // server selection to potentially force monitor checks if the server is\n        // in an unknown state.\n        selector = (0, server_selection_1.sameServerSelector)(operation.server?.description);\n    } else if (operation.trySecondaryWrite) {\n        // If operation should try to write to secondary use the custom server selector\n        // otherwise provide the read preference.\n        selector = (0, server_selection_1.secondaryWritableServerSelector)(topology.commonWireVersion, readPreference);\n    } else {\n        selector = readPreference;\n    }\n    const server = await topology.selectServerAsync(selector, {\n        session\n    });\n    if (session == null) {\n        // No session also means it is not retryable, early exit\n        return operation.execute(server, undefined);\n    }\n    if (!operation.hasAspect(operation_1.Aspect.RETRYABLE)) {\n        // non-retryable operation, early exit\n        try {\n            return await operation.execute(server, session);\n        } finally{\n            if (session?.owner != null && session.owner === owner) {\n                await session.endSession().catch(()=>null);\n            }\n        }\n    }\n    const willRetryRead = topology.s.options.retryReads && !inTransaction && operation.canRetryRead;\n    const willRetryWrite = topology.s.options.retryWrites && !inTransaction && (0, utils_1.supportsRetryableWrites)(server) && operation.canRetryWrite;\n    const hasReadAspect = operation.hasAspect(operation_1.Aspect.READ_OPERATION);\n    const hasWriteAspect = operation.hasAspect(operation_1.Aspect.WRITE_OPERATION);\n    const willRetry = hasReadAspect && willRetryRead || hasWriteAspect && willRetryWrite;\n    if (hasWriteAspect && willRetryWrite) {\n        operation.options.willRetryWrite = true;\n        session.incrementTransactionNumber();\n    }\n    try {\n        return await operation.execute(server, session);\n    } catch (operationError) {\n        if (willRetry && operationError instanceof error_1.MongoError) {\n            return await retryOperation(operation, operationError, {\n                session,\n                topology,\n                selector\n            });\n        }\n        throw operationError;\n    } finally{\n        if (session?.owner != null && session.owner === owner) {\n            await session.endSession().catch(()=>null);\n        }\n    }\n}\nasync function retryOperation(operation, originalError, { session, topology, selector }) {\n    const isWriteOperation = operation.hasAspect(operation_1.Aspect.WRITE_OPERATION);\n    const isReadOperation = operation.hasAspect(operation_1.Aspect.READ_OPERATION);\n    if (isWriteOperation && originalError.code === MMAPv1_RETRY_WRITES_ERROR_CODE) {\n        throw new error_1.MongoServerError({\n            message: MMAPv1_RETRY_WRITES_ERROR_MESSAGE,\n            errmsg: MMAPv1_RETRY_WRITES_ERROR_MESSAGE,\n            originalError\n        });\n    }\n    if (isWriteOperation && !(0, error_1.isRetryableWriteError)(originalError)) {\n        throw originalError;\n    }\n    if (isReadOperation && !(0, error_1.isRetryableReadError)(originalError)) {\n        throw originalError;\n    }\n    if (originalError instanceof error_1.MongoNetworkError && session.isPinned && !session.inTransaction() && operation.hasAspect(operation_1.Aspect.CURSOR_CREATING)) {\n        // If we have a cursor and the initial command fails with a network error,\n        // we can retry it on another connection. So we need to check it back in, clear the\n        // pool for the service id, and retry again.\n        session.unpin({\n            force: true,\n            forceClear: true\n        });\n    }\n    // select a new server, and attempt to retry the operation\n    const server = await topology.selectServerAsync(selector, {\n        session\n    });\n    if (isWriteOperation && !(0, utils_1.supportsRetryableWrites)(server)) {\n        throw new error_1.MongoUnexpectedServerResponseError(\"Selected server does not support retryable writes\");\n    }\n    try {\n        return await operation.execute(server, session);\n    } catch (retryError) {\n        if (retryError instanceof error_1.MongoError && retryError.hasErrorLabel(error_1.MongoErrorLabel.NoWritesPerformed)) {\n            throw originalError;\n        }\n        throw retryError;\n    }\n} //# sourceMappingURL=execute_operation.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9leGVjdXRlX29wZXJhdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsd0JBQXdCLEdBQUcsS0FBSztBQUNoQyxNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxvQkFBb0JELG1CQUFPQSxDQUFDLCtFQUFvQjtBQUN0RCxNQUFNRSxxQkFBcUJGLG1CQUFPQSxDQUFDLDJGQUEwQjtBQUM3RCxNQUFNRyxVQUFVSCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNSSxjQUFjSixtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxNQUFNSyxpQ0FBaUNOLFFBQVFPLG1CQUFtQixDQUFDQyxnQkFBZ0I7QUFDbkYsTUFBTUMsb0NBQW9DO0FBQzFDLFNBQVNWLGlCQUFpQlcsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFFBQVE7SUFDakQsT0FBTyxDQUFDLEdBQUdSLFFBQVFTLGFBQWEsRUFBRSxJQUFNQyxzQkFBc0JKLFFBQVFDLFlBQVlDO0FBQ3RGO0FBQ0FmLHdCQUF3QixHQUFHRTtBQUMzQixlQUFlZSxzQkFBc0JKLE1BQU0sRUFBRUMsU0FBUztJQUNsRCxJQUFJLENBQUVBLENBQUFBLHFCQUFxQk4sWUFBWVUseUJBQXlCLEdBQUc7UUFDL0QsNENBQTRDO1FBQzVDLE1BQU0sSUFBSWYsUUFBUWdCLGlCQUFpQixDQUFDO0lBQ3hDO0lBQ0EsSUFBSU4sT0FBT08sUUFBUSxJQUFJLE1BQU07UUFDekIsNEJBQTRCO1FBQzVCLElBQUlQLE9BQU9RLENBQUMsQ0FBQ0MsYUFBYSxFQUFFO1lBQ3hCLE1BQU0sSUFBSW5CLFFBQVFvQixzQkFBc0IsQ0FBQztRQUM3QztRQUNBVixPQUFPUSxDQUFDLENBQUNHLE9BQU8sQ0FBQ0MsT0FBT0MsR0FBRyxDQUFDLDJCQUEyQixHQUFHO1FBQzFELElBQUk7WUFDQSxN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Yi9saWIvb3BlcmF0aW9ucy9leGVjdXRlX29wZXJhdGlvbi5qcz9lMGI0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5leGVjdXRlT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IHJlYWRfcHJlZmVyZW5jZV8xID0gcmVxdWlyZShcIi4uL3JlYWRfcHJlZmVyZW5jZVwiKTtcbmNvbnN0IHNlcnZlcl9zZWxlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi9zZGFtL3NlcnZlcl9zZWxlY3Rpb25cIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG5jb25zdCBNTUFQdjFfUkVUUllfV1JJVEVTX0VSUk9SX0NPREUgPSBlcnJvcl8xLk1PTkdPREJfRVJST1JfQ09ERVMuSWxsZWdhbE9wZXJhdGlvbjtcbmNvbnN0IE1NQVB2MV9SRVRSWV9XUklURVNfRVJST1JfTUVTU0FHRSA9ICdUaGlzIE1vbmdvREIgZGVwbG95bWVudCBkb2VzIG5vdCBzdXBwb3J0IHJldHJ5YWJsZSB3cml0ZXMuIFBsZWFzZSBhZGQgcmV0cnlXcml0ZXM9ZmFsc2UgdG8geW91ciBjb25uZWN0aW9uIHN0cmluZy4nO1xuZnVuY3Rpb24gZXhlY3V0ZU9wZXJhdGlvbihjbGllbnQsIG9wZXJhdGlvbiwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gKDAsIHV0aWxzXzEubWF5YmVDYWxsYmFjaykoKCkgPT4gZXhlY3V0ZU9wZXJhdGlvbkFzeW5jKGNsaWVudCwgb3BlcmF0aW9uKSwgY2FsbGJhY2spO1xufVxuZXhwb3J0cy5leGVjdXRlT3BlcmF0aW9uID0gZXhlY3V0ZU9wZXJhdGlvbjtcbmFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVPcGVyYXRpb25Bc3luYyhjbGllbnQsIG9wZXJhdGlvbikge1xuICAgIGlmICghKG9wZXJhdGlvbiBpbnN0YW5jZW9mIG9wZXJhdGlvbl8xLkFic3RyYWN0Q2FsbGJhY2tPcGVyYXRpb24pKSB7XG4gICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKTogRXh0ZW5kIE1vbmdvUnVudGltZUVycm9yXG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdUaGlzIG1ldGhvZCByZXF1aXJlcyBhIHZhbGlkIG9wZXJhdGlvbiBpbnN0YW5jZScpO1xuICAgIH1cbiAgICBpZiAoY2xpZW50LnRvcG9sb2d5ID09IG51bGwpIHtcbiAgICAgICAgLy8gQXV0byBjb25uZWN0IG9uIG9wZXJhdGlvblxuICAgICAgICBpZiAoY2xpZW50LnMuaGFzQmVlbkNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29Ob3RDb25uZWN0ZWRFcnJvcignQ2xpZW50IG11c3QgYmUgY29ubmVjdGVkIGJlZm9yZSBydW5uaW5nIG9wZXJhdGlvbnMnKTtcbiAgICAgICAgfVxuICAgICAgICBjbGllbnQucy5vcHRpb25zW1N5bWJvbC5mb3IoJ0BAbWRiLnNraXBQaW5nT25Db25uZWN0JyldID0gdHJ1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGNsaWVudC5jb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBkZWxldGUgY2xpZW50LnMub3B0aW9uc1tTeW1ib2wuZm9yKCdAQG1kYi5za2lwUGluZ09uQ29ubmVjdCcpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB7IHRvcG9sb2d5IH0gPSBjbGllbnQ7XG4gICAgaWYgKHRvcG9sb2d5ID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ2NsaWVudC5jb25uZWN0IGRpZCBub3QgY3JlYXRlIGEgdG9wb2xvZ3kgYnV0IGFsc28gZGlkIG5vdCB0aHJvdycpO1xuICAgIH1cbiAgICAvLyBUaGUgZHJpdmVyIHNlc3Npb25zIHNwZWMgbWFuZGF0ZXMgdGhhdCB3ZSBpbXBsaWNpdGx5IGNyZWF0ZSBzZXNzaW9ucyBmb3Igb3BlcmF0aW9uc1xuICAgIC8vIHRoYXQgYXJlIG5vdCBleHBsaWNpdGx5IHByb3ZpZGVkIHdpdGggYSBzZXNzaW9uLlxuICAgIGxldCBzZXNzaW9uID0gb3BlcmF0aW9uLnNlc3Npb247XG4gICAgbGV0IG93bmVyO1xuICAgIGlmIChzZXNzaW9uID09IG51bGwpIHtcbiAgICAgICAgb3duZXIgPSBTeW1ib2woKTtcbiAgICAgICAgc2Vzc2lvbiA9IGNsaWVudC5zdGFydFNlc3Npb24oeyBvd25lciwgZXhwbGljaXQ6IGZhbHNlIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzZXNzaW9uLmhhc0VuZGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvRXhwaXJlZFNlc3Npb25FcnJvcignVXNlIG9mIGV4cGlyZWQgc2Vzc2lvbnMgaXMgbm90IHBlcm1pdHRlZCcpO1xuICAgIH1cbiAgICBlbHNlIGlmIChzZXNzaW9uLnNuYXBzaG90RW5hYmxlZCAmJiAhdG9wb2xvZ3kuY2FwYWJpbGl0aWVzLnN1cHBvcnRzU25hcHNob3RSZWFkcykge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0NvbXBhdGliaWxpdHlFcnJvcignU25hcHNob3QgcmVhZHMgcmVxdWlyZSBNb25nb0RCIDUuMCBvciBsYXRlcicpO1xuICAgIH1cbiAgICBjb25zdCByZWFkUHJlZmVyZW5jZSA9IG9wZXJhdGlvbi5yZWFkUHJlZmVyZW5jZSA/PyByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5wcmltYXJ5O1xuICAgIGNvbnN0IGluVHJhbnNhY3Rpb24gPSAhIXNlc3Npb24/LmluVHJhbnNhY3Rpb24oKTtcbiAgICBpZiAoaW5UcmFuc2FjdGlvbiAmJiAhcmVhZFByZWZlcmVuY2UuZXF1YWxzKHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLnByaW1hcnkpKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvVHJhbnNhY3Rpb25FcnJvcihgUmVhZCBwcmVmZXJlbmNlIGluIGEgdHJhbnNhY3Rpb24gbXVzdCBiZSBwcmltYXJ5LCBub3Q6ICR7cmVhZFByZWZlcmVuY2UubW9kZX1gKTtcbiAgICB9XG4gICAgaWYgKHNlc3Npb24/LmlzUGlubmVkICYmIHNlc3Npb24udHJhbnNhY3Rpb24uaXNDb21taXR0ZWQgJiYgIW9wZXJhdGlvbi5ieXBhc3NQaW5uaW5nQ2hlY2spIHtcbiAgICAgICAgc2Vzc2lvbi51bnBpbigpO1xuICAgIH1cbiAgICBsZXQgc2VsZWN0b3I7XG4gICAgaWYgKG9wZXJhdGlvbi5oYXNBc3BlY3Qob3BlcmF0aW9uXzEuQXNwZWN0Lk1VU1RfU0VMRUNUX1NBTUVfU0VSVkVSKSkge1xuICAgICAgICAvLyBHZXRNb3JlIGFuZCBLaWxsQ3Vyc29yIG9wZXJhdGlvbnMgbXVzdCBhbHdheXMgc2VsZWN0IHRoZSBzYW1lIHNlcnZlciwgYnV0IHJ1biB0aHJvdWdoXG4gICAgICAgIC8vIHNlcnZlciBzZWxlY3Rpb24gdG8gcG90ZW50aWFsbHkgZm9yY2UgbW9uaXRvciBjaGVja3MgaWYgdGhlIHNlcnZlciBpc1xuICAgICAgICAvLyBpbiBhbiB1bmtub3duIHN0YXRlLlxuICAgICAgICBzZWxlY3RvciA9ICgwLCBzZXJ2ZXJfc2VsZWN0aW9uXzEuc2FtZVNlcnZlclNlbGVjdG9yKShvcGVyYXRpb24uc2VydmVyPy5kZXNjcmlwdGlvbik7XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wZXJhdGlvbi50cnlTZWNvbmRhcnlXcml0ZSkge1xuICAgICAgICAvLyBJZiBvcGVyYXRpb24gc2hvdWxkIHRyeSB0byB3cml0ZSB0byBzZWNvbmRhcnkgdXNlIHRoZSBjdXN0b20gc2VydmVyIHNlbGVjdG9yXG4gICAgICAgIC8vIG90aGVyd2lzZSBwcm92aWRlIHRoZSByZWFkIHByZWZlcmVuY2UuXG4gICAgICAgIHNlbGVjdG9yID0gKDAsIHNlcnZlcl9zZWxlY3Rpb25fMS5zZWNvbmRhcnlXcml0YWJsZVNlcnZlclNlbGVjdG9yKSh0b3BvbG9neS5jb21tb25XaXJlVmVyc2lvbiwgcmVhZFByZWZlcmVuY2UpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2VsZWN0b3IgPSByZWFkUHJlZmVyZW5jZTtcbiAgICB9XG4gICAgY29uc3Qgc2VydmVyID0gYXdhaXQgdG9wb2xvZ3kuc2VsZWN0U2VydmVyQXN5bmMoc2VsZWN0b3IsIHsgc2Vzc2lvbiB9KTtcbiAgICBpZiAoc2Vzc2lvbiA9PSBudWxsKSB7XG4gICAgICAgIC8vIE5vIHNlc3Npb24gYWxzbyBtZWFucyBpdCBpcyBub3QgcmV0cnlhYmxlLCBlYXJseSBleGl0XG4gICAgICAgIHJldHVybiBvcGVyYXRpb24uZXhlY3V0ZShzZXJ2ZXIsIHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGlmICghb3BlcmF0aW9uLmhhc0FzcGVjdChvcGVyYXRpb25fMS5Bc3BlY3QuUkVUUllBQkxFKSkge1xuICAgICAgICAvLyBub24tcmV0cnlhYmxlIG9wZXJhdGlvbiwgZWFybHkgZXhpdFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG9wZXJhdGlvbi5leGVjdXRlKHNlcnZlciwgc2Vzc2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbj8ub3duZXIgIT0gbnVsbCAmJiBzZXNzaW9uLm93bmVyID09PSBvd25lcikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHNlc3Npb24uZW5kU2Vzc2lvbigpLmNhdGNoKCgpID0+IG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHdpbGxSZXRyeVJlYWQgPSB0b3BvbG9neS5zLm9wdGlvbnMucmV0cnlSZWFkcyAmJiAhaW5UcmFuc2FjdGlvbiAmJiBvcGVyYXRpb24uY2FuUmV0cnlSZWFkO1xuICAgIGNvbnN0IHdpbGxSZXRyeVdyaXRlID0gdG9wb2xvZ3kucy5vcHRpb25zLnJldHJ5V3JpdGVzICYmXG4gICAgICAgICFpblRyYW5zYWN0aW9uICYmXG4gICAgICAgICgwLCB1dGlsc18xLnN1cHBvcnRzUmV0cnlhYmxlV3JpdGVzKShzZXJ2ZXIpICYmXG4gICAgICAgIG9wZXJhdGlvbi5jYW5SZXRyeVdyaXRlO1xuICAgIGNvbnN0IGhhc1JlYWRBc3BlY3QgPSBvcGVyYXRpb24uaGFzQXNwZWN0KG9wZXJhdGlvbl8xLkFzcGVjdC5SRUFEX09QRVJBVElPTik7XG4gICAgY29uc3QgaGFzV3JpdGVBc3BlY3QgPSBvcGVyYXRpb24uaGFzQXNwZWN0KG9wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT04pO1xuICAgIGNvbnN0IHdpbGxSZXRyeSA9IChoYXNSZWFkQXNwZWN0ICYmIHdpbGxSZXRyeVJlYWQpIHx8IChoYXNXcml0ZUFzcGVjdCAmJiB3aWxsUmV0cnlXcml0ZSk7XG4gICAgaWYgKGhhc1dyaXRlQXNwZWN0ICYmIHdpbGxSZXRyeVdyaXRlKSB7XG4gICAgICAgIG9wZXJhdGlvbi5vcHRpb25zLndpbGxSZXRyeVdyaXRlID0gdHJ1ZTtcbiAgICAgICAgc2Vzc2lvbi5pbmNyZW1lbnRUcmFuc2FjdGlvbk51bWJlcigpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXdhaXQgb3BlcmF0aW9uLmV4ZWN1dGUoc2VydmVyLCBzZXNzaW9uKTtcbiAgICB9XG4gICAgY2F0Y2ggKG9wZXJhdGlvbkVycm9yKSB7XG4gICAgICAgIGlmICh3aWxsUmV0cnkgJiYgb3BlcmF0aW9uRXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCByZXRyeU9wZXJhdGlvbihvcGVyYXRpb24sIG9wZXJhdGlvbkVycm9yLCB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbixcbiAgICAgICAgICAgICAgICB0b3BvbG9neSxcbiAgICAgICAgICAgICAgICBzZWxlY3RvclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgb3BlcmF0aW9uRXJyb3I7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBpZiAoc2Vzc2lvbj8ub3duZXIgIT0gbnVsbCAmJiBzZXNzaW9uLm93bmVyID09PSBvd25lcikge1xuICAgICAgICAgICAgYXdhaXQgc2Vzc2lvbi5lbmRTZXNzaW9uKCkuY2F0Y2goKCkgPT4gbnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiByZXRyeU9wZXJhdGlvbihvcGVyYXRpb24sIG9yaWdpbmFsRXJyb3IsIHsgc2Vzc2lvbiwgdG9wb2xvZ3ksIHNlbGVjdG9yIH0pIHtcbiAgICBjb25zdCBpc1dyaXRlT3BlcmF0aW9uID0gb3BlcmF0aW9uLmhhc0FzcGVjdChvcGVyYXRpb25fMS5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OKTtcbiAgICBjb25zdCBpc1JlYWRPcGVyYXRpb24gPSBvcGVyYXRpb24uaGFzQXNwZWN0KG9wZXJhdGlvbl8xLkFzcGVjdC5SRUFEX09QRVJBVElPTik7XG4gICAgaWYgKGlzV3JpdGVPcGVyYXRpb24gJiYgb3JpZ2luYWxFcnJvci5jb2RlID09PSBNTUFQdjFfUkVUUllfV1JJVEVTX0VSUk9SX0NPREUpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29TZXJ2ZXJFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiBNTUFQdjFfUkVUUllfV1JJVEVTX0VSUk9SX01FU1NBR0UsXG4gICAgICAgICAgICBlcnJtc2c6IE1NQVB2MV9SRVRSWV9XUklURVNfRVJST1JfTUVTU0FHRSxcbiAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpc1dyaXRlT3BlcmF0aW9uICYmICEoMCwgZXJyb3JfMS5pc1JldHJ5YWJsZVdyaXRlRXJyb3IpKG9yaWdpbmFsRXJyb3IpKSB7XG4gICAgICAgIHRocm93IG9yaWdpbmFsRXJyb3I7XG4gICAgfVxuICAgIGlmIChpc1JlYWRPcGVyYXRpb24gJiYgISgwLCBlcnJvcl8xLmlzUmV0cnlhYmxlUmVhZEVycm9yKShvcmlnaW5hbEVycm9yKSkge1xuICAgICAgICB0aHJvdyBvcmlnaW5hbEVycm9yO1xuICAgIH1cbiAgICBpZiAob3JpZ2luYWxFcnJvciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29OZXR3b3JrRXJyb3IgJiZcbiAgICAgICAgc2Vzc2lvbi5pc1Bpbm5lZCAmJlxuICAgICAgICAhc2Vzc2lvbi5pblRyYW5zYWN0aW9uKCkgJiZcbiAgICAgICAgb3BlcmF0aW9uLmhhc0FzcGVjdChvcGVyYXRpb25fMS5Bc3BlY3QuQ1VSU09SX0NSRUFUSU5HKSkge1xuICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgY3Vyc29yIGFuZCB0aGUgaW5pdGlhbCBjb21tYW5kIGZhaWxzIHdpdGggYSBuZXR3b3JrIGVycm9yLFxuICAgICAgICAvLyB3ZSBjYW4gcmV0cnkgaXQgb24gYW5vdGhlciBjb25uZWN0aW9uLiBTbyB3ZSBuZWVkIHRvIGNoZWNrIGl0IGJhY2sgaW4sIGNsZWFyIHRoZVxuICAgICAgICAvLyBwb29sIGZvciB0aGUgc2VydmljZSBpZCwgYW5kIHJldHJ5IGFnYWluLlxuICAgICAgICBzZXNzaW9uLnVucGluKHsgZm9yY2U6IHRydWUsIGZvcmNlQ2xlYXI6IHRydWUgfSk7XG4gICAgfVxuICAgIC8vIHNlbGVjdCBhIG5ldyBzZXJ2ZXIsIGFuZCBhdHRlbXB0IHRvIHJldHJ5IHRoZSBvcGVyYXRpb25cbiAgICBjb25zdCBzZXJ2ZXIgPSBhd2FpdCB0b3BvbG9neS5zZWxlY3RTZXJ2ZXJBc3luYyhzZWxlY3RvciwgeyBzZXNzaW9uIH0pO1xuICAgIGlmIChpc1dyaXRlT3BlcmF0aW9uICYmICEoMCwgdXRpbHNfMS5zdXBwb3J0c1JldHJ5YWJsZVdyaXRlcykoc2VydmVyKSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1VuZXhwZWN0ZWRTZXJ2ZXJSZXNwb25zZUVycm9yKCdTZWxlY3RlZCBzZXJ2ZXIgZG9lcyBub3Qgc3VwcG9ydCByZXRyeWFibGUgd3JpdGVzJyk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBvcGVyYXRpb24uZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pO1xuICAgIH1cbiAgICBjYXRjaCAocmV0cnlFcnJvcikge1xuICAgICAgICBpZiAocmV0cnlFcnJvciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29FcnJvciAmJlxuICAgICAgICAgICAgcmV0cnlFcnJvci5oYXNFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLk5vV3JpdGVzUGVyZm9ybWVkKSkge1xuICAgICAgICAgICAgdGhyb3cgb3JpZ2luYWxFcnJvcjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyByZXRyeUVycm9yO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4ZWN1dGVfb3BlcmF0aW9uLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImV4ZWN1dGVPcGVyYXRpb24iLCJlcnJvcl8xIiwicmVxdWlyZSIsInJlYWRfcHJlZmVyZW5jZV8xIiwic2VydmVyX3NlbGVjdGlvbl8xIiwidXRpbHNfMSIsIm9wZXJhdGlvbl8xIiwiTU1BUHYxX1JFVFJZX1dSSVRFU19FUlJPUl9DT0RFIiwiTU9OR09EQl9FUlJPUl9DT0RFUyIsIklsbGVnYWxPcGVyYXRpb24iLCJNTUFQdjFfUkVUUllfV1JJVEVTX0VSUk9SX01FU1NBR0UiLCJjbGllbnQiLCJvcGVyYXRpb24iLCJjYWxsYmFjayIsIm1heWJlQ2FsbGJhY2siLCJleGVjdXRlT3BlcmF0aW9uQXN5bmMiLCJBYnN0cmFjdENhbGxiYWNrT3BlcmF0aW9uIiwiTW9uZ29SdW50aW1lRXJyb3IiLCJ0b3BvbG9neSIsInMiLCJoYXNCZWVuQ2xvc2VkIiwiTW9uZ29Ob3RDb25uZWN0ZWRFcnJvciIsIm9wdGlvbnMiLCJTeW1ib2wiLCJmb3IiLCJjb25uZWN0Iiwic2Vzc2lvbiIsIm93bmVyIiwic3RhcnRTZXNzaW9uIiwiZXhwbGljaXQiLCJoYXNFbmRlZCIsIk1vbmdvRXhwaXJlZFNlc3Npb25FcnJvciIsInNuYXBzaG90RW5hYmxlZCIsImNhcGFiaWxpdGllcyIsInN1cHBvcnRzU25hcHNob3RSZWFkcyIsIk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yIiwicmVhZFByZWZlcmVuY2UiLCJSZWFkUHJlZmVyZW5jZSIsInByaW1hcnkiLCJpblRyYW5zYWN0aW9uIiwiZXF1YWxzIiwiTW9uZ29UcmFuc2FjdGlvbkVycm9yIiwibW9kZSIsImlzUGlubmVkIiwidHJhbnNhY3Rpb24iLCJpc0NvbW1pdHRlZCIsImJ5cGFzc1Bpbm5pbmdDaGVjayIsInVucGluIiwic2VsZWN0b3IiLCJoYXNBc3BlY3QiLCJBc3BlY3QiLCJNVVNUX1NFTEVDVF9TQU1FX1NFUlZFUiIsInNhbWVTZXJ2ZXJTZWxlY3RvciIsInNlcnZlciIsImRlc2NyaXB0aW9uIiwidHJ5U2Vjb25kYXJ5V3JpdGUiLCJzZWNvbmRhcnlXcml0YWJsZVNlcnZlclNlbGVjdG9yIiwiY29tbW9uV2lyZVZlcnNpb24iLCJzZWxlY3RTZXJ2ZXJBc3luYyIsImV4ZWN1dGUiLCJ1bmRlZmluZWQiLCJSRVRSWUFCTEUiLCJlbmRTZXNzaW9uIiwiY2F0Y2giLCJ3aWxsUmV0cnlSZWFkIiwicmV0cnlSZWFkcyIsImNhblJldHJ5UmVhZCIsIndpbGxSZXRyeVdyaXRlIiwicmV0cnlXcml0ZXMiLCJzdXBwb3J0c1JldHJ5YWJsZVdyaXRlcyIsImNhblJldHJ5V3JpdGUiLCJoYXNSZWFkQXNwZWN0IiwiUkVBRF9PUEVSQVRJT04iLCJoYXNXcml0ZUFzcGVjdCIsIldSSVRFX09QRVJBVElPTiIsIndpbGxSZXRyeSIsImluY3JlbWVudFRyYW5zYWN0aW9uTnVtYmVyIiwib3BlcmF0aW9uRXJyb3IiLCJNb25nb0Vycm9yIiwicmV0cnlPcGVyYXRpb24iLCJvcmlnaW5hbEVycm9yIiwiaXNXcml0ZU9wZXJhdGlvbiIsImlzUmVhZE9wZXJhdGlvbiIsImNvZGUiLCJNb25nb1NlcnZlckVycm9yIiwibWVzc2FnZSIsImVycm1zZyIsImlzUmV0cnlhYmxlV3JpdGVFcnJvciIsImlzUmV0cnlhYmxlUmVhZEVycm9yIiwiTW9uZ29OZXR3b3JrRXJyb3IiLCJDVVJTT1JfQ1JFQVRJTkciLCJmb3JjZSIsImZvcmNlQ2xlYXIiLCJNb25nb1VuZXhwZWN0ZWRTZXJ2ZXJSZXNwb25zZUVycm9yIiwicmV0cnlFcnJvciIsImhhc0Vycm9yTGFiZWwiLCJNb25nb0Vycm9yTGFiZWwiLCJOb1dyaXRlc1BlcmZvcm1lZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/find.js":
/*!*****************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/find.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.FindOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_concern_1 = __webpack_require__(/*! ../read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst sort_1 = __webpack_require__(/*! ../sort */ \"(ssr)/./node_modules/mongodb/lib/sort.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class FindOperation extends command_1.CommandCallbackOperation {\n    constructor(collection, ns, filter = {}, options = {}){\n        super(collection, options);\n        this.options = {\n            ...options\n        };\n        delete this.options.writeConcern;\n        this.ns = ns;\n        if (typeof filter !== \"object\" || Array.isArray(filter)) {\n            throw new error_1.MongoInvalidArgumentError(\"Query filter must be a plain object or ObjectId\");\n        }\n        // special case passing in an ObjectId as a filter\n        this.filter = filter != null && filter._bsontype === \"ObjectId\" ? {\n            _id: filter\n        } : filter;\n    }\n    executeCallback(server, session, callback) {\n        this.server = server;\n        const options = this.options;\n        let findCommand = makeFindCommand(this.ns, this.filter, options);\n        if (this.explain) {\n            findCommand = (0, utils_1.decorateWithExplain)(findCommand, this.explain);\n        }\n        server.command(this.ns, findCommand, {\n            ...this.options,\n            ...this.bsonOptions,\n            documentsReturnedIn: \"firstBatch\",\n            session\n        }, callback);\n    }\n}\nexports.FindOperation = FindOperation;\nfunction makeFindCommand(ns, filter, options) {\n    const findCommand = {\n        find: ns.collection,\n        filter\n    };\n    if (options.sort) {\n        findCommand.sort = (0, sort_1.formatSort)(options.sort);\n    }\n    if (options.projection) {\n        let projection = options.projection;\n        if (projection && Array.isArray(projection)) {\n            projection = projection.length ? projection.reduce((result, field)=>{\n                result[field] = 1;\n                return result;\n            }, {}) : {\n                _id: 1\n            };\n        }\n        findCommand.projection = projection;\n    }\n    if (options.hint) {\n        findCommand.hint = (0, utils_1.normalizeHintField)(options.hint);\n    }\n    if (typeof options.skip === \"number\") {\n        findCommand.skip = options.skip;\n    }\n    if (typeof options.limit === \"number\") {\n        if (options.limit < 0) {\n            findCommand.limit = -options.limit;\n            findCommand.singleBatch = true;\n        } else {\n            findCommand.limit = options.limit;\n        }\n    }\n    if (typeof options.batchSize === \"number\") {\n        if (options.batchSize < 0) {\n            if (options.limit && options.limit !== 0 && Math.abs(options.batchSize) < Math.abs(options.limit)) {\n                findCommand.limit = -options.batchSize;\n            }\n            findCommand.singleBatch = true;\n        } else {\n            findCommand.batchSize = options.batchSize;\n        }\n    }\n    if (typeof options.singleBatch === \"boolean\") {\n        findCommand.singleBatch = options.singleBatch;\n    }\n    // we check for undefined specifically here to allow falsy values\n    // eslint-disable-next-line no-restricted-syntax\n    if (options.comment !== undefined) {\n        findCommand.comment = options.comment;\n    }\n    if (typeof options.maxTimeMS === \"number\") {\n        findCommand.maxTimeMS = options.maxTimeMS;\n    }\n    const readConcern = read_concern_1.ReadConcern.fromOptions(options);\n    if (readConcern) {\n        findCommand.readConcern = readConcern.toJSON();\n    }\n    if (options.max) {\n        findCommand.max = options.max;\n    }\n    if (options.min) {\n        findCommand.min = options.min;\n    }\n    if (typeof options.returnKey === \"boolean\") {\n        findCommand.returnKey = options.returnKey;\n    }\n    if (typeof options.showRecordId === \"boolean\") {\n        findCommand.showRecordId = options.showRecordId;\n    }\n    if (typeof options.tailable === \"boolean\") {\n        findCommand.tailable = options.tailable;\n    }\n    if (typeof options.oplogReplay === \"boolean\") {\n        findCommand.oplogReplay = options.oplogReplay;\n    }\n    if (typeof options.timeout === \"boolean\") {\n        findCommand.noCursorTimeout = !options.timeout;\n    } else if (typeof options.noCursorTimeout === \"boolean\") {\n        findCommand.noCursorTimeout = options.noCursorTimeout;\n    }\n    if (typeof options.awaitData === \"boolean\") {\n        findCommand.awaitData = options.awaitData;\n    }\n    if (typeof options.allowPartialResults === \"boolean\") {\n        findCommand.allowPartialResults = options.allowPartialResults;\n    }\n    if (options.collation) {\n        findCommand.collation = options.collation;\n    }\n    if (typeof options.allowDiskUse === \"boolean\") {\n        findCommand.allowDiskUse = options.allowDiskUse;\n    }\n    if (options.let) {\n        findCommand.let = options.let;\n    }\n    return findCommand;\n}\n(0, operation_1.defineAspects)(FindOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.EXPLAINABLE,\n    operation_1.Aspect.CURSOR_CREATING\n]); //# sourceMappingURL=find.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9maW5kLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxxQkFBcUIsR0FBRyxLQUFLO0FBQzdCLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1DLGlCQUFpQkQsbUJBQU9BLENBQUMseUVBQWlCO0FBQ2hELE1BQU1FLFNBQVNGLG1CQUFPQSxDQUFDLHlEQUFTO0FBQ2hDLE1BQU1HLFVBQVVILG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1JLFlBQVlKLG1CQUFPQSxDQUFDLHlFQUFXO0FBQ3JDLE1BQU1LLGNBQWNMLG1CQUFPQSxDQUFDLDZFQUFhO0FBQ3pDLGNBQWMsR0FDZCxNQUFNRixzQkFBc0JNLFVBQVVFLHdCQUF3QjtJQUMxREMsWUFBWUMsVUFBVSxFQUFFQyxFQUFFLEVBQUVDLFNBQVMsQ0FBQyxDQUFDLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLENBQUU7UUFDbkQsS0FBSyxDQUFDSCxZQUFZRztRQUNsQixJQUFJLENBQUNBLE9BQU8sR0FBRztZQUFFLEdBQUdBLE9BQU87UUFBQztRQUM1QixPQUFPLElBQUksQ0FBQ0EsT0FBTyxDQUFDQyxZQUFZO1FBQ2hDLElBQUksQ0FBQ0gsRUFBRSxHQUFHQTtRQUNWLElBQUksT0FBT0MsV0FBVyxZQUFZRyxNQUFNQyxPQUFPLENBQUNKLFNBQVM7WUFDckQsTUFBTSxJQUFJWCxRQUFRZ0IseUJBQXlCLENBQUM7UUFDaEQ7UUFDQSxrREFBa0Q7UUFDbEQsSUFBSSxDQUFDTCxNQUFNLEdBQUdBLFVBQVUsUUFBUUEsT0FBT00sU0FBUyxLQUFLLGFBQWE7WUFBRUMsS0FBS1A7UUFBTyxJQUFJQTtJQUN4RjtJQUNBUSxnQkFBZ0JDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDdkMsSUFBSSxDQUFDRixNQUFNLEdBQUdBO1FBQ2Qs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akQsUUFBUWtELG1CQUFtQixLQUFLLFdBQVc7UUFDbER2QyxZQUFZdUMsbUJBQW1CLEdBQUdsRCxRQUFRa0QsbUJBQW1CO0lBQ2pFO0lBQ0EsSUFBSWxELFFBQVFtRCxTQUFTLEVBQUU7UUFDbkJ4QyxZQUFZd0MsU0FBUyxHQUFHbkQsUUFBUW1ELFNBQVM7SUFDN0M7SUFDQSxJQUFJLE9BQU9uRCxRQUFRb0QsWUFBWSxLQUFLLFdBQVc7UUFDM0N6QyxZQUFZeUMsWUFBWSxHQUFHcEQsUUFBUW9ELFlBQVk7SUFDbkQ7SUFDQSxJQUFJcEQsUUFBUXFELEdBQUcsRUFBRTtRQUNiMUMsWUFBWTBDLEdBQUcsR0FBR3JELFFBQVFxRCxHQUFHO0lBQ2pDO0lBQ0EsT0FBTzFDO0FBQ1g7QUFDQyxJQUFHakIsWUFBWTRELGFBQWEsRUFBRW5FLGVBQWU7SUFDMUNPLFlBQVk2RCxNQUFNLENBQUNDLGNBQWM7SUFDakM5RCxZQUFZNkQsTUFBTSxDQUFDRSxTQUFTO0lBQzVCL0QsWUFBWTZELE1BQU0sQ0FBQ0csV0FBVztJQUM5QmhFLFlBQVk2RCxNQUFNLENBQUNJLGVBQWU7Q0FDckMsR0FDRCxnQ0FBZ0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9maW5kLmpzP2VjMzQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZpbmRPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgcmVhZF9jb25jZXJuXzEgPSByZXF1aXJlKFwiLi4vcmVhZF9jb25jZXJuXCIpO1xuY29uc3Qgc29ydF8xID0gcmVxdWlyZShcIi4uL3NvcnRcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgY29tbWFuZF8xID0gcmVxdWlyZShcIi4vY29tbWFuZFwiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgRmluZE9wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kQ2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIG5zLCBmaWx0ZXIgPSB7fSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24sIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcbiAgICAgICAgZGVsZXRlIHRoaXMub3B0aW9ucy53cml0ZUNvbmNlcm47XG4gICAgICAgIHRoaXMubnMgPSBucztcbiAgICAgICAgaWYgKHR5cGVvZiBmaWx0ZXIgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkoZmlsdGVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignUXVlcnkgZmlsdGVyIG11c3QgYmUgYSBwbGFpbiBvYmplY3Qgb3IgT2JqZWN0SWQnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzcGVjaWFsIGNhc2UgcGFzc2luZyBpbiBhbiBPYmplY3RJZCBhcyBhIGZpbHRlclxuICAgICAgICB0aGlzLmZpbHRlciA9IGZpbHRlciAhPSBudWxsICYmIGZpbHRlci5fYnNvbnR5cGUgPT09ICdPYmplY3RJZCcgPyB7IF9pZDogZmlsdGVyIH0gOiBmaWx0ZXI7XG4gICAgfVxuICAgIGV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuc2VydmVyID0gc2VydmVyO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBsZXQgZmluZENvbW1hbmQgPSBtYWtlRmluZENvbW1hbmQodGhpcy5ucywgdGhpcy5maWx0ZXIsIG9wdGlvbnMpO1xuICAgICAgICBpZiAodGhpcy5leHBsYWluKSB7XG4gICAgICAgICAgICBmaW5kQ29tbWFuZCA9ICgwLCB1dGlsc18xLmRlY29yYXRlV2l0aEV4cGxhaW4pKGZpbmRDb21tYW5kLCB0aGlzLmV4cGxhaW4pO1xuICAgICAgICB9XG4gICAgICAgIHNlcnZlci5jb21tYW5kKHRoaXMubnMsIGZpbmRDb21tYW5kLCB7XG4gICAgICAgICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICAuLi50aGlzLmJzb25PcHRpb25zLFxuICAgICAgICAgICAgZG9jdW1lbnRzUmV0dXJuZWRJbjogJ2ZpcnN0QmF0Y2gnLFxuICAgICAgICAgICAgc2Vzc2lvblxuICAgICAgICB9LCBjYWxsYmFjayk7XG4gICAgfVxufVxuZXhwb3J0cy5GaW5kT3BlcmF0aW9uID0gRmluZE9wZXJhdGlvbjtcbmZ1bmN0aW9uIG1ha2VGaW5kQ29tbWFuZChucywgZmlsdGVyLCBvcHRpb25zKSB7XG4gICAgY29uc3QgZmluZENvbW1hbmQgPSB7XG4gICAgICAgIGZpbmQ6IG5zLmNvbGxlY3Rpb24sXG4gICAgICAgIGZpbHRlclxuICAgIH07XG4gICAgaWYgKG9wdGlvbnMuc29ydCkge1xuICAgICAgICBmaW5kQ29tbWFuZC5zb3J0ID0gKDAsIHNvcnRfMS5mb3JtYXRTb3J0KShvcHRpb25zLnNvcnQpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5wcm9qZWN0aW9uKSB7XG4gICAgICAgIGxldCBwcm9qZWN0aW9uID0gb3B0aW9ucy5wcm9qZWN0aW9uO1xuICAgICAgICBpZiAocHJvamVjdGlvbiAmJiBBcnJheS5pc0FycmF5KHByb2plY3Rpb24pKSB7XG4gICAgICAgICAgICBwcm9qZWN0aW9uID0gcHJvamVjdGlvbi5sZW5ndGhcbiAgICAgICAgICAgICAgICA/IHByb2plY3Rpb24ucmVkdWNlKChyZXN1bHQsIGZpZWxkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtmaWVsZF0gPSAxO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0sIHt9KVxuICAgICAgICAgICAgICAgIDogeyBfaWQ6IDEgfTtcbiAgICAgICAgfVxuICAgICAgICBmaW5kQ29tbWFuZC5wcm9qZWN0aW9uID0gcHJvamVjdGlvbjtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuaGludCkge1xuICAgICAgICBmaW5kQ29tbWFuZC5oaW50ID0gKDAsIHV0aWxzXzEubm9ybWFsaXplSGludEZpZWxkKShvcHRpb25zLmhpbnQpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2tpcCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgZmluZENvbW1hbmQuc2tpcCA9IG9wdGlvbnMuc2tpcDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmxpbWl0ID09PSAnbnVtYmVyJykge1xuICAgICAgICBpZiAob3B0aW9ucy5saW1pdCA8IDApIHtcbiAgICAgICAgICAgIGZpbmRDb21tYW5kLmxpbWl0ID0gLW9wdGlvbnMubGltaXQ7XG4gICAgICAgICAgICBmaW5kQ29tbWFuZC5zaW5nbGVCYXRjaCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmaW5kQ29tbWFuZC5saW1pdCA9IG9wdGlvbnMubGltaXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmJhdGNoU2l6ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuYmF0Y2hTaXplIDwgMCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMubGltaXQgJiZcbiAgICAgICAgICAgICAgICBvcHRpb25zLmxpbWl0ICE9PSAwICYmXG4gICAgICAgICAgICAgICAgTWF0aC5hYnMob3B0aW9ucy5iYXRjaFNpemUpIDwgTWF0aC5hYnMob3B0aW9ucy5saW1pdCkpIHtcbiAgICAgICAgICAgICAgICBmaW5kQ29tbWFuZC5saW1pdCA9IC1vcHRpb25zLmJhdGNoU2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmRDb21tYW5kLnNpbmdsZUJhdGNoID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZpbmRDb21tYW5kLmJhdGNoU2l6ZSA9IG9wdGlvbnMuYmF0Y2hTaXplO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5zaW5nbGVCYXRjaCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGZpbmRDb21tYW5kLnNpbmdsZUJhdGNoID0gb3B0aW9ucy5zaW5nbGVCYXRjaDtcbiAgICB9XG4gICAgLy8gd2UgY2hlY2sgZm9yIHVuZGVmaW5lZCBzcGVjaWZpY2FsbHkgaGVyZSB0byBhbGxvdyBmYWxzeSB2YWx1ZXNcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICBpZiAob3B0aW9ucy5jb21tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZmluZENvbW1hbmQuY29tbWVudCA9IG9wdGlvbnMuY29tbWVudDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLm1heFRpbWVNUyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgZmluZENvbW1hbmQubWF4VGltZU1TID0gb3B0aW9ucy5tYXhUaW1lTVM7XG4gICAgfVxuICAgIGNvbnN0IHJlYWRDb25jZXJuID0gcmVhZF9jb25jZXJuXzEuUmVhZENvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucyk7XG4gICAgaWYgKHJlYWRDb25jZXJuKSB7XG4gICAgICAgIGZpbmRDb21tYW5kLnJlYWRDb25jZXJuID0gcmVhZENvbmNlcm4udG9KU09OKCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLm1heCkge1xuICAgICAgICBmaW5kQ29tbWFuZC5tYXggPSBvcHRpb25zLm1heDtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMubWluKSB7XG4gICAgICAgIGZpbmRDb21tYW5kLm1pbiA9IG9wdGlvbnMubWluO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMucmV0dXJuS2V5ID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgZmluZENvbW1hbmQucmV0dXJuS2V5ID0gb3B0aW9ucy5yZXR1cm5LZXk7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5zaG93UmVjb3JkSWQgPT09ICdib29sZWFuJykge1xuICAgICAgICBmaW5kQ29tbWFuZC5zaG93UmVjb3JkSWQgPSBvcHRpb25zLnNob3dSZWNvcmRJZDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnRhaWxhYmxlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgZmluZENvbW1hbmQudGFpbGFibGUgPSBvcHRpb25zLnRhaWxhYmxlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMub3Bsb2dSZXBsYXkgPT09ICdib29sZWFuJykge1xuICAgICAgICBmaW5kQ29tbWFuZC5vcGxvZ1JlcGxheSA9IG9wdGlvbnMub3Bsb2dSZXBsYXk7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50aW1lb3V0ID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgZmluZENvbW1hbmQubm9DdXJzb3JUaW1lb3V0ID0gIW9wdGlvbnMudGltZW91dDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMubm9DdXJzb3JUaW1lb3V0ID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgZmluZENvbW1hbmQubm9DdXJzb3JUaW1lb3V0ID0gb3B0aW9ucy5ub0N1cnNvclRpbWVvdXQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5hd2FpdERhdGEgPT09ICdib29sZWFuJykge1xuICAgICAgICBmaW5kQ29tbWFuZC5hd2FpdERhdGEgPSBvcHRpb25zLmF3YWl0RGF0YTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmFsbG93UGFydGlhbFJlc3VsdHMgPT09ICdib29sZWFuJykge1xuICAgICAgICBmaW5kQ29tbWFuZC5hbGxvd1BhcnRpYWxSZXN1bHRzID0gb3B0aW9ucy5hbGxvd1BhcnRpYWxSZXN1bHRzO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5jb2xsYXRpb24pIHtcbiAgICAgICAgZmluZENvbW1hbmQuY29sbGF0aW9uID0gb3B0aW9ucy5jb2xsYXRpb247XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5hbGxvd0Rpc2tVc2UgPT09ICdib29sZWFuJykge1xuICAgICAgICBmaW5kQ29tbWFuZC5hbGxvd0Rpc2tVc2UgPSBvcHRpb25zLmFsbG93RGlza1VzZTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMubGV0KSB7XG4gICAgICAgIGZpbmRDb21tYW5kLmxldCA9IG9wdGlvbnMubGV0O1xuICAgIH1cbiAgICByZXR1cm4gZmluZENvbW1hbmQ7XG59XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoRmluZE9wZXJhdGlvbiwgW1xuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5SRUFEX09QRVJBVElPTixcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuUkVUUllBQkxFLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5FWFBMQUlOQUJMRSxcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuQ1VSU09SX0NSRUFUSU5HXG5dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbmQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRmluZE9wZXJhdGlvbiIsImVycm9yXzEiLCJyZXF1aXJlIiwicmVhZF9jb25jZXJuXzEiLCJzb3J0XzEiLCJ1dGlsc18xIiwiY29tbWFuZF8xIiwib3BlcmF0aW9uXzEiLCJDb21tYW5kQ2FsbGJhY2tPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImNvbGxlY3Rpb24iLCJucyIsImZpbHRlciIsIm9wdGlvbnMiLCJ3cml0ZUNvbmNlcm4iLCJBcnJheSIsImlzQXJyYXkiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiX2Jzb250eXBlIiwiX2lkIiwiZXhlY3V0ZUNhbGxiYWNrIiwic2VydmVyIiwic2Vzc2lvbiIsImNhbGxiYWNrIiwiZmluZENvbW1hbmQiLCJtYWtlRmluZENvbW1hbmQiLCJleHBsYWluIiwiZGVjb3JhdGVXaXRoRXhwbGFpbiIsImNvbW1hbmQiLCJic29uT3B0aW9ucyIsImRvY3VtZW50c1JldHVybmVkSW4iLCJmaW5kIiwic29ydCIsImZvcm1hdFNvcnQiLCJwcm9qZWN0aW9uIiwibGVuZ3RoIiwicmVkdWNlIiwicmVzdWx0IiwiZmllbGQiLCJoaW50Iiwibm9ybWFsaXplSGludEZpZWxkIiwic2tpcCIsImxpbWl0Iiwic2luZ2xlQmF0Y2giLCJiYXRjaFNpemUiLCJNYXRoIiwiYWJzIiwiY29tbWVudCIsInVuZGVmaW5lZCIsIm1heFRpbWVNUyIsInJlYWRDb25jZXJuIiwiUmVhZENvbmNlcm4iLCJmcm9tT3B0aW9ucyIsInRvSlNPTiIsIm1heCIsIm1pbiIsInJldHVybktleSIsInNob3dSZWNvcmRJZCIsInRhaWxhYmxlIiwib3Bsb2dSZXBsYXkiLCJ0aW1lb3V0Iiwibm9DdXJzb3JUaW1lb3V0IiwiYXdhaXREYXRhIiwiYWxsb3dQYXJ0aWFsUmVzdWx0cyIsImNvbGxhdGlvbiIsImFsbG93RGlza1VzZSIsImxldCIsImRlZmluZUFzcGVjdHMiLCJBc3BlY3QiLCJSRUFEX09QRVJBVElPTiIsIlJFVFJZQUJMRSIsIkVYUExBSU5BQkxFIiwiQ1VSU09SX0NSRUFUSU5HIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/find.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/find_and_modify.js":
/*!****************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/find_and_modify.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.FindOneAndUpdateOperation = exports.FindOneAndReplaceOperation = exports.FindOneAndDeleteOperation = exports.ReturnDocument = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst sort_1 = __webpack_require__(/*! ../sort */ \"(ssr)/./node_modules/mongodb/lib/sort.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @public */ exports.ReturnDocument = Object.freeze({\n    BEFORE: \"before\",\n    AFTER: \"after\"\n});\nfunction configureFindAndModifyCmdBaseUpdateOpts(cmdBase, options) {\n    cmdBase.new = options.returnDocument === exports.ReturnDocument.AFTER;\n    cmdBase.upsert = options.upsert === true;\n    if (options.bypassDocumentValidation === true) {\n        cmdBase.bypassDocumentValidation = options.bypassDocumentValidation;\n    }\n    return cmdBase;\n}\n/** @internal */ class FindAndModifyOperation extends command_1.CommandCallbackOperation {\n    constructor(collection, query, options){\n        super(collection, options);\n        this.options = options ?? {};\n        this.cmdBase = {\n            remove: false,\n            new: false,\n            upsert: false\n        };\n        options.includeResultMetadata ?? (options.includeResultMetadata = true);\n        const sort = (0, sort_1.formatSort)(options.sort);\n        if (sort) {\n            this.cmdBase.sort = sort;\n        }\n        if (options.projection) {\n            this.cmdBase.fields = options.projection;\n        }\n        if (options.maxTimeMS) {\n            this.cmdBase.maxTimeMS = options.maxTimeMS;\n        }\n        // Decorate the findAndModify command with the write Concern\n        if (options.writeConcern) {\n            this.cmdBase.writeConcern = options.writeConcern;\n        }\n        if (options.let) {\n            this.cmdBase.let = options.let;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (options.comment !== undefined) {\n            this.cmdBase.comment = options.comment;\n        }\n        // force primary read preference\n        this.readPreference = read_preference_1.ReadPreference.primary;\n        this.collection = collection;\n        this.query = query;\n    }\n    executeCallback(server, session, callback) {\n        const coll = this.collection;\n        const query = this.query;\n        const options = {\n            ...this.options,\n            ...this.bsonOptions\n        };\n        // Create findAndModify command object\n        const cmd = {\n            findAndModify: coll.collectionName,\n            query: query,\n            ...this.cmdBase\n        };\n        // Have we specified collation\n        try {\n            (0, utils_1.decorateWithCollation)(cmd, coll, options);\n        } catch (err) {\n            return callback(err);\n        }\n        if (options.hint) {\n            // TODO: once this method becomes a CommandOperation we will have the server\n            // in place to check.\n            const unacknowledgedWrite = this.writeConcern?.w === 0;\n            if (unacknowledgedWrite || (0, utils_1.maxWireVersion)(server) < 8) {\n                callback(new error_1.MongoCompatibilityError(\"The current topology does not support a hint on findAndModify commands\"));\n                return;\n            }\n            cmd.hint = options.hint;\n        }\n        // Execute the command\n        super.executeCommandCallback(server, session, cmd, (err, result)=>{\n            if (err) return callback(err);\n            return callback(undefined, options.includeResultMetadata ? result : result.value ?? null);\n        });\n    }\n}\n/** @internal */ class FindOneAndDeleteOperation extends FindAndModifyOperation {\n    constructor(collection, filter, options){\n        // Basic validation\n        if (filter == null || typeof filter !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError('Argument \"filter\" must be an object');\n        }\n        super(collection, filter, options);\n        this.cmdBase.remove = true;\n    }\n}\nexports.FindOneAndDeleteOperation = FindOneAndDeleteOperation;\n/** @internal */ class FindOneAndReplaceOperation extends FindAndModifyOperation {\n    constructor(collection, filter, replacement, options){\n        if (filter == null || typeof filter !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError('Argument \"filter\" must be an object');\n        }\n        if (replacement == null || typeof replacement !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError('Argument \"replacement\" must be an object');\n        }\n        if ((0, utils_1.hasAtomicOperators)(replacement)) {\n            throw new error_1.MongoInvalidArgumentError(\"Replacement document must not contain atomic operators\");\n        }\n        super(collection, filter, options);\n        this.cmdBase.update = replacement;\n        configureFindAndModifyCmdBaseUpdateOpts(this.cmdBase, options);\n    }\n}\nexports.FindOneAndReplaceOperation = FindOneAndReplaceOperation;\n/** @internal */ class FindOneAndUpdateOperation extends FindAndModifyOperation {\n    constructor(collection, filter, update, options){\n        if (filter == null || typeof filter !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError('Argument \"filter\" must be an object');\n        }\n        if (update == null || typeof update !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError('Argument \"update\" must be an object');\n        }\n        if (!(0, utils_1.hasAtomicOperators)(update)) {\n            throw new error_1.MongoInvalidArgumentError(\"Update document requires atomic operators\");\n        }\n        super(collection, filter, options);\n        this.cmdBase.update = update;\n        configureFindAndModifyCmdBaseUpdateOpts(this.cmdBase, options);\n        if (options.arrayFilters) {\n            this.cmdBase.arrayFilters = options.arrayFilters;\n        }\n    }\n}\nexports.FindOneAndUpdateOperation = FindOneAndUpdateOperation;\n(0, operation_1.defineAspects)(FindAndModifyOperation, [\n    operation_1.Aspect.WRITE_OPERATION,\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.EXPLAINABLE\n]); //# sourceMappingURL=find_and_modify.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9maW5kX2FuZF9tb2RpZnkuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGlDQUFpQyxHQUFHQSxrQ0FBa0MsR0FBR0EsaUNBQWlDLEdBQUdBLHNCQUFzQixHQUFHLEtBQUs7QUFDM0ksTUFBTU0sVUFBVUMsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUMsb0JBQW9CRCxtQkFBT0EsQ0FBQywrRUFBb0I7QUFDdEQsTUFBTUUsU0FBU0YsbUJBQU9BLENBQUMseURBQVM7QUFDaEMsTUFBTUcsVUFBVUgsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUksWUFBWUosbUJBQU9BLENBQUMseUVBQVc7QUFDckMsTUFBTUssY0FBY0wsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsWUFBWSxHQUNaUCxzQkFBc0IsR0FBR0YsT0FBT2UsTUFBTSxDQUFDO0lBQ25DQyxRQUFRO0lBQ1JDLE9BQU87QUFDWDtBQUNBLFNBQVNDLHdDQUF3Q0MsT0FBTyxFQUFFQyxPQUFPO0lBQzdERCxRQUFRRSxHQUFHLEdBQUdELFFBQVFFLGNBQWMsS0FBS3BCLFFBQVFLLGNBQWMsQ0FBQ1UsS0FBSztJQUNyRUUsUUFBUUksTUFBTSxHQUFHSCxRQUFRRyxNQUFNLEtBQUs7SUFDcEMsSUFBSUgsUUFBUUksd0JBQXdCLEtBQUssTUFBTTtRQUMzQ0wsUUFBUUssd0JBQXdCLEdBQUdKLFFBQVFJLHdCQUF3QjtJQUN2RTtJQUNBLE9BQU9MO0FBQ1g7QUFDQSxjQUFjLEdBQ2QsTUFBTU0sK0JBQStCWixVQUFVYSx3QkFBd0I7SUFDbkVDLFlBQVlDLFVBQVUsRUFBRUMsS0FBSyxFQUFFVCxPQUFPLENBQUU7UUFDcEMsS0FBSyxDQUFDUSxZQUFZUjtRQUNsQixJQUFJLENBQUNBLE9BQU8sR0FBR0EsV0FBVyxDQUFDO1FBQzNCLElBQUksQ0FBQ0QsT0FB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LGtCQUFrQixFQUFFQyxTQUFTO1lBQzFDLE1BQU0sSUFBSTFELFFBQVF1RCx5QkFBeUIsQ0FBQztRQUNoRDtRQUNBLEtBQUssQ0FBQ25DLFlBQVlrQyxRQUFRMUM7UUFDMUIsSUFBSSxDQUFDRCxPQUFPLENBQUMrQyxNQUFNLEdBQUdBO1FBQ3RCaEQsd0NBQXdDLElBQUksQ0FBQ0MsT0FBTyxFQUFFQztRQUN0RCxJQUFJQSxRQUFRK0MsWUFBWSxFQUFFO1lBQ3RCLElBQUksQ0FBQ2hELE9BQU8sQ0FBQ2dELFlBQVksR0FBRy9DLFFBQVErQyxZQUFZO1FBQ3BEO0lBQ0o7QUFDSjtBQUNBakUsaUNBQWlDLEdBQUdFO0FBQ25DLElBQUdVLFlBQVlzRCxhQUFhLEVBQUUzQyx3QkFBd0I7SUFDbkRYLFlBQVl1RCxNQUFNLENBQUNDLGVBQWU7SUFDbEN4RCxZQUFZdUQsTUFBTSxDQUFDRSxTQUFTO0lBQzVCekQsWUFBWXVELE1BQU0sQ0FBQ0csV0FBVztDQUNqQyxHQUNELDJDQUEyQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL2ZpbmRfYW5kX21vZGlmeS5qcz9kZTYwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5GaW5kT25lQW5kVXBkYXRlT3BlcmF0aW9uID0gZXhwb3J0cy5GaW5kT25lQW5kUmVwbGFjZU9wZXJhdGlvbiA9IGV4cG9ydHMuRmluZE9uZUFuZERlbGV0ZU9wZXJhdGlvbiA9IGV4cG9ydHMuUmV0dXJuRG9jdW1lbnQgPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgcmVhZF9wcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuY29uc3Qgc29ydF8xID0gcmVxdWlyZShcIi4uL3NvcnRcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgY29tbWFuZF8xID0gcmVxdWlyZShcIi4vY29tbWFuZFwiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydHMuUmV0dXJuRG9jdW1lbnQgPSBPYmplY3QuZnJlZXplKHtcbiAgICBCRUZPUkU6ICdiZWZvcmUnLFxuICAgIEFGVEVSOiAnYWZ0ZXInXG59KTtcbmZ1bmN0aW9uIGNvbmZpZ3VyZUZpbmRBbmRNb2RpZnlDbWRCYXNlVXBkYXRlT3B0cyhjbWRCYXNlLCBvcHRpb25zKSB7XG4gICAgY21kQmFzZS5uZXcgPSBvcHRpb25zLnJldHVybkRvY3VtZW50ID09PSBleHBvcnRzLlJldHVybkRvY3VtZW50LkFGVEVSO1xuICAgIGNtZEJhc2UudXBzZXJ0ID0gb3B0aW9ucy51cHNlcnQgPT09IHRydWU7XG4gICAgaWYgKG9wdGlvbnMuYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uID09PSB0cnVlKSB7XG4gICAgICAgIGNtZEJhc2UuYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uID0gb3B0aW9ucy5ieXBhc3NEb2N1bWVudFZhbGlkYXRpb247XG4gICAgfVxuICAgIHJldHVybiBjbWRCYXNlO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgRmluZEFuZE1vZGlmeU9wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kQ2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIHF1ZXJ5LCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24sIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zID8/IHt9O1xuICAgICAgICB0aGlzLmNtZEJhc2UgPSB7XG4gICAgICAgICAgICByZW1vdmU6IGZhbHNlLFxuICAgICAgICAgICAgbmV3OiBmYWxzZSxcbiAgICAgICAgICAgIHVwc2VydDogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgb3B0aW9ucy5pbmNsdWRlUmVzdWx0TWV0YWRhdGEgPz8gKG9wdGlvbnMuaW5jbHVkZVJlc3VsdE1ldGFkYXRhID0gdHJ1ZSk7XG4gICAgICAgIGNvbnN0IHNvcnQgPSAoMCwgc29ydF8xLmZvcm1hdFNvcnQpKG9wdGlvbnMuc29ydCk7XG4gICAgICAgIGlmIChzb3J0KSB7XG4gICAgICAgICAgICB0aGlzLmNtZEJhc2Uuc29ydCA9IHNvcnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMucHJvamVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jbWRCYXNlLmZpZWxkcyA9IG9wdGlvbnMucHJvamVjdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5tYXhUaW1lTVMpIHtcbiAgICAgICAgICAgIHRoaXMuY21kQmFzZS5tYXhUaW1lTVMgPSBvcHRpb25zLm1heFRpbWVNUztcbiAgICAgICAgfVxuICAgICAgICAvLyBEZWNvcmF0ZSB0aGUgZmluZEFuZE1vZGlmeSBjb21tYW5kIHdpdGggdGhlIHdyaXRlIENvbmNlcm5cbiAgICAgICAgaWYgKG9wdGlvbnMud3JpdGVDb25jZXJuKSB7XG4gICAgICAgICAgICB0aGlzLmNtZEJhc2Uud3JpdGVDb25jZXJuID0gb3B0aW9ucy53cml0ZUNvbmNlcm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMubGV0KSB7XG4gICAgICAgICAgICB0aGlzLmNtZEJhc2UubGV0ID0gb3B0aW9ucy5sZXQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gd2UgY2hlY2sgZm9yIHVuZGVmaW5lZCBzcGVjaWZpY2FsbHkgaGVyZSB0byBhbGxvdyBmYWxzeSB2YWx1ZXNcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICAgIGlmIChvcHRpb25zLmNvbW1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jbWRCYXNlLmNvbW1lbnQgPSBvcHRpb25zLmNvbW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZm9yY2UgcHJpbWFyeSByZWFkIHByZWZlcmVuY2VcbiAgICAgICAgdGhpcy5yZWFkUHJlZmVyZW5jZSA9IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLnByaW1hcnk7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IGNvbGxlY3Rpb247XG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgY29sbCA9IHRoaXMuY29sbGVjdGlvbjtcbiAgICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnF1ZXJ5O1xuICAgICAgICBjb25zdCBvcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMsIC4uLnRoaXMuYnNvbk9wdGlvbnMgfTtcbiAgICAgICAgLy8gQ3JlYXRlIGZpbmRBbmRNb2RpZnkgY29tbWFuZCBvYmplY3RcbiAgICAgICAgY29uc3QgY21kID0ge1xuICAgICAgICAgICAgZmluZEFuZE1vZGlmeTogY29sbC5jb2xsZWN0aW9uTmFtZSxcbiAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICAgIC4uLnRoaXMuY21kQmFzZVxuICAgICAgICB9O1xuICAgICAgICAvLyBIYXZlIHdlIHNwZWNpZmllZCBjb2xsYXRpb25cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICgwLCB1dGlsc18xLmRlY29yYXRlV2l0aENvbGxhdGlvbikoY21kLCBjb2xsLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5oaW50KSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBvbmNlIHRoaXMgbWV0aG9kIGJlY29tZXMgYSBDb21tYW5kT3BlcmF0aW9uIHdlIHdpbGwgaGF2ZSB0aGUgc2VydmVyXG4gICAgICAgICAgICAvLyBpbiBwbGFjZSB0byBjaGVjay5cbiAgICAgICAgICAgIGNvbnN0IHVuYWNrbm93bGVkZ2VkV3JpdGUgPSB0aGlzLndyaXRlQ29uY2Vybj8udyA9PT0gMDtcbiAgICAgICAgICAgIGlmICh1bmFja25vd2xlZGdlZFdyaXRlIHx8ICgwLCB1dGlsc18xLm1heFdpcmVWZXJzaW9uKShzZXJ2ZXIpIDwgOCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yKCdUaGUgY3VycmVudCB0b3BvbG9neSBkb2VzIG5vdCBzdXBwb3J0IGEgaGludCBvbiBmaW5kQW5kTW9kaWZ5IGNvbW1hbmRzJykpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNtZC5oaW50ID0gb3B0aW9ucy5oaW50O1xuICAgICAgICB9XG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNvbW1hbmRcbiAgICAgICAgc3VwZXIuZXhlY3V0ZUNvbW1hbmRDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNtZCwgKGVyciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHVuZGVmaW5lZCwgb3B0aW9ucy5pbmNsdWRlUmVzdWx0TWV0YWRhdGEgPyByZXN1bHQgOiByZXN1bHQudmFsdWUgPz8gbnVsbCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIEZpbmRPbmVBbmREZWxldGVPcGVyYXRpb24gZXh0ZW5kcyBGaW5kQW5kTW9kaWZ5T3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gQmFzaWMgdmFsaWRhdGlvblxuICAgICAgICBpZiAoZmlsdGVyID09IG51bGwgfHwgdHlwZW9mIGZpbHRlciAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0FyZ3VtZW50IFwiZmlsdGVyXCIgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihjb2xsZWN0aW9uLCBmaWx0ZXIsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmNtZEJhc2UucmVtb3ZlID0gdHJ1ZTtcbiAgICB9XG59XG5leHBvcnRzLkZpbmRPbmVBbmREZWxldGVPcGVyYXRpb24gPSBGaW5kT25lQW5kRGVsZXRlT3BlcmF0aW9uO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgRmluZE9uZUFuZFJlcGxhY2VPcGVyYXRpb24gZXh0ZW5kcyBGaW5kQW5kTW9kaWZ5T3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBmaWx0ZXIsIHJlcGxhY2VtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChmaWx0ZXIgPT0gbnVsbCB8fCB0eXBlb2YgZmlsdGVyICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignQXJndW1lbnQgXCJmaWx0ZXJcIiBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBsYWNlbWVudCA9PSBudWxsIHx8IHR5cGVvZiByZXBsYWNlbWVudCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0FyZ3VtZW50IFwicmVwbGFjZW1lbnRcIiBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoMCwgdXRpbHNfMS5oYXNBdG9taWNPcGVyYXRvcnMpKHJlcGxhY2VtZW50KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignUmVwbGFjZW1lbnQgZG9jdW1lbnQgbXVzdCBub3QgY29udGFpbiBhdG9taWMgb3BlcmF0b3JzJyk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoY29sbGVjdGlvbiwgZmlsdGVyLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5jbWRCYXNlLnVwZGF0ZSA9IHJlcGxhY2VtZW50O1xuICAgICAgICBjb25maWd1cmVGaW5kQW5kTW9kaWZ5Q21kQmFzZVVwZGF0ZU9wdHModGhpcy5jbWRCYXNlLCBvcHRpb25zKTtcbiAgICB9XG59XG5leHBvcnRzLkZpbmRPbmVBbmRSZXBsYWNlT3BlcmF0aW9uID0gRmluZE9uZUFuZFJlcGxhY2VPcGVyYXRpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBGaW5kT25lQW5kVXBkYXRlT3BlcmF0aW9uIGV4dGVuZHMgRmluZEFuZE1vZGlmeU9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgZmlsdGVyLCB1cGRhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGZpbHRlciA9PSBudWxsIHx8IHR5cGVvZiBmaWx0ZXIgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdBcmd1bWVudCBcImZpbHRlclwiIG11c3QgYmUgYW4gb2JqZWN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwZGF0ZSA9PSBudWxsIHx8IHR5cGVvZiB1cGRhdGUgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdBcmd1bWVudCBcInVwZGF0ZVwiIG11c3QgYmUgYW4gb2JqZWN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoMCwgdXRpbHNfMS5oYXNBdG9taWNPcGVyYXRvcnMpKHVwZGF0ZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1VwZGF0ZSBkb2N1bWVudCByZXF1aXJlcyBhdG9taWMgb3BlcmF0b3JzJyk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoY29sbGVjdGlvbiwgZmlsdGVyLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5jbWRCYXNlLnVwZGF0ZSA9IHVwZGF0ZTtcbiAgICAgICAgY29uZmlndXJlRmluZEFuZE1vZGlmeUNtZEJhc2VVcGRhdGVPcHRzKHRoaXMuY21kQmFzZSwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChvcHRpb25zLmFycmF5RmlsdGVycykge1xuICAgICAgICAgICAgdGhpcy5jbWRCYXNlLmFycmF5RmlsdGVycyA9IG9wdGlvbnMuYXJyYXlGaWx0ZXJzO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5GaW5kT25lQW5kVXBkYXRlT3BlcmF0aW9uID0gRmluZE9uZUFuZFVwZGF0ZU9wZXJhdGlvbjtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShGaW5kQW5kTW9kaWZ5T3BlcmF0aW9uLCBbXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTixcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuUkVUUllBQkxFLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5FWFBMQUlOQUJMRVxuXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maW5kX2FuZF9tb2RpZnkuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRmluZE9uZUFuZFVwZGF0ZU9wZXJhdGlvbiIsIkZpbmRPbmVBbmRSZXBsYWNlT3BlcmF0aW9uIiwiRmluZE9uZUFuZERlbGV0ZU9wZXJhdGlvbiIsIlJldHVybkRvY3VtZW50IiwiZXJyb3JfMSIsInJlcXVpcmUiLCJyZWFkX3ByZWZlcmVuY2VfMSIsInNvcnRfMSIsInV0aWxzXzEiLCJjb21tYW5kXzEiLCJvcGVyYXRpb25fMSIsImZyZWV6ZSIsIkJFRk9SRSIsIkFGVEVSIiwiY29uZmlndXJlRmluZEFuZE1vZGlmeUNtZEJhc2VVcGRhdGVPcHRzIiwiY21kQmFzZSIsIm9wdGlvbnMiLCJuZXciLCJyZXR1cm5Eb2N1bWVudCIsInVwc2VydCIsImJ5cGFzc0RvY3VtZW50VmFsaWRhdGlvbiIsIkZpbmRBbmRNb2RpZnlPcGVyYXRpb24iLCJDb21tYW5kQ2FsbGJhY2tPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImNvbGxlY3Rpb24iLCJxdWVyeSIsInJlbW92ZSIsImluY2x1ZGVSZXN1bHRNZXRhZGF0YSIsInNvcnQiLCJmb3JtYXRTb3J0IiwicHJvamVjdGlvbiIsImZpZWxkcyIsIm1heFRpbWVNUyIsIndyaXRlQ29uY2VybiIsImxldCIsImNvbW1lbnQiLCJ1bmRlZmluZWQiLCJyZWFkUHJlZmVyZW5jZSIsIlJlYWRQcmVmZXJlbmNlIiwicHJpbWFyeSIsImV4ZWN1dGVDYWxsYmFjayIsInNlcnZlciIsInNlc3Npb24iLCJjYWxsYmFjayIsImNvbGwiLCJic29uT3B0aW9ucyIsImNtZCIsImZpbmRBbmRNb2RpZnkiLCJjb2xsZWN0aW9uTmFtZSIsImRlY29yYXRlV2l0aENvbGxhdGlvbiIsImVyciIsImhpbnQiLCJ1bmFja25vd2xlZGdlZFdyaXRlIiwidyIsIm1heFdpcmVWZXJzaW9uIiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCJleGVjdXRlQ29tbWFuZENhbGxiYWNrIiwicmVzdWx0IiwiZmlsdGVyIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsInJlcGxhY2VtZW50IiwiaGFzQXRvbWljT3BlcmF0b3JzIiwidXBkYXRlIiwiYXJyYXlGaWx0ZXJzIiwiZGVmaW5lQXNwZWN0cyIsIkFzcGVjdCIsIldSSVRFX09QRVJBVElPTiIsIlJFVFJZQUJMRSIsIkVYUExBSU5BQkxFIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/find_and_modify.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/get_more.js":
/*!*********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/get_more.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.GetMoreOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class GetMoreOperation extends operation_1.AbstractCallbackOperation {\n    constructor(ns, cursorId, server, options){\n        super(options);\n        this.options = options;\n        this.ns = ns;\n        this.cursorId = cursorId;\n        this.server = server;\n    }\n    /**\n     * Although there is a server already associated with the get more operation, the signature\n     * for execute passes a server so we will just use that one.\n     */ executeCallback(server, session, callback) {\n        if (server !== this.server) {\n            return callback(new error_1.MongoRuntimeError(\"Getmore must run on the same server operation began on\"));\n        }\n        if (this.cursorId == null || this.cursorId.isZero()) {\n            return callback(new error_1.MongoRuntimeError(\"Unable to iterate cursor with no id\"));\n        }\n        const collection = this.ns.collection;\n        if (collection == null) {\n            // Cursors should have adopted the namespace returned by MongoDB\n            // which should always defined a collection name (even a pseudo one, ex. db.aggregate())\n            return callback(new error_1.MongoRuntimeError(\"A collection name must be determined before getMore\"));\n        }\n        const getMoreCmd = {\n            getMore: this.cursorId,\n            collection\n        };\n        if (typeof this.options.batchSize === \"number\") {\n            getMoreCmd.batchSize = Math.abs(this.options.batchSize);\n        }\n        if (typeof this.options.maxAwaitTimeMS === \"number\") {\n            getMoreCmd.maxTimeMS = this.options.maxAwaitTimeMS;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (this.options.comment !== undefined && (0, utils_1.maxWireVersion)(server) >= 9) {\n            getMoreCmd.comment = this.options.comment;\n        }\n        const commandOptions = {\n            returnFieldSelector: null,\n            documentsReturnedIn: \"nextBatch\",\n            ...this.options\n        };\n        server.command(this.ns, getMoreCmd, commandOptions, callback);\n    }\n}\nexports.GetMoreOperation = GetMoreOperation;\n(0, operation_1.defineAspects)(GetMoreOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.MUST_SELECT_SAME_SERVER\n]); //# sourceMappingURL=get_more.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9nZXRfbW9yZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsd0JBQXdCLEdBQUcsS0FBSztBQUNoQyxNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRSxjQUFjRixtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYseUJBQXlCSSxZQUFZQyx5QkFBeUI7SUFDaEVDLFlBQVlDLEVBQUUsRUFBRUMsUUFBUSxFQUFFQyxNQUFNLEVBQUVDLE9BQU8sQ0FBRTtRQUN2QyxLQUFLLENBQUNBO1FBQ04sSUFBSSxDQUFDQSxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDSCxFQUFFLEdBQUdBO1FBQ1YsSUFBSSxDQUFDQyxRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0MsTUFBTSxHQUFHQTtJQUNsQjtJQUNBOzs7S0FHQyxHQUNERSxnQkFBZ0JGLE1BQU0sRUFBRUcsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDdkMsSUFBSUosV0FBVyxJQUFJLENBQUNBLE1BQU0sRUFBRTtZQUN4QixPQUFPSSxTQUFTLElBQUlaLFFBQVFhLGlCQUFpQixDQUFDO1FBQ2xEO1FBQ0EsSUFBSSxJQUFJLENBQUNOLFFBQVEsSUFBSSxRQUFRLElBQUksQ0FBQ0EsUUFBUSxDQUFDTyxNQUFNLElBQUk7WUFDakQsT0FBT0YsU0FBUyxJQUFJWixRQUFRYSxpQkFBaUIsQ0FBQztRQUNsRDtRQUNBLE1BQU1FLGFBQWEsSUFBSSxDQUFDVCxFQUFFLENBQUNTLFVBQVU7UUFDckMsSUFBSUEsY0FBYyxNQUFNO1lBQ3BCLGdFQUFnRTtZQUNoRSx3RkFBd0Y7WUFDeEYsT0FBT0gsU0FBUyxJQUFJWixRQUFRYSxpQkFBaUIsQ0FBQztRQUNsRDtRQUNBLE1BQU1HLGFBQWE7WUFDZkMsU0FBUyxJQUFJLENBQUNWLFFBQVE7WUFDdEJRO1FBQ0o7UUFDQSxJQUFJLE9BQU8sSUFBSSxDQUFDTixPQUFPLENBQUNTLFNBQVMsS0FBSyxVQUFVO1lBQzVDRixXQUFXRSxTQUFTLEdBQUdDLEtBQUtDLEdBQUcsQ0FBQyxJQUFJLENBQUNYLE9BQU8sQ0FBQ1MsU0FBUztRQUMxRDtRQUNBLElBQUksT0FBTyxJQUFJLENBQUNULE9BQU8sQ0FBQ1ksY0FBYyxLQUFLLFVBQVU7WUFDakRMLFdBQVdNLFNBQVMsR0FBRyxJQUFJLENBQUNiLE9BQU8sQ0FBQ1ksY0FBYztRQUN0RDtRQUNBLGlFQUFpRTtRQUNqRSxnREFBZ0Q7UUFDaEQsSUFBSSxJQUFJLENBQUNaLE9BQU8sQ0FBQ2MsT0FBTyxLQUFLQyxhQUFhLENBQUMsR0FBR3RCLFFBQVF1QixjQUFjLEVBQUVqQixXQUFXLEdBQUc7WUFDaEZRLFdBQVdPLE9BQU8sR0FBRyxJQUFJLENBQUNkLE9BQU8sQ0FBQ2MsT0FBTztRQUM3QztRQUNBLE1BQU1HLGlCQUFpQjtZQUNuQkMscUJBQXFCO1lBQ3JCQyxxQkFBcUI7WUFDckIsR0FBRyxJQUFJLENBQUNuQixPQUFPO1FBQ25CO1FBQ0FELE9BQU9xQixPQUFPLENBQUMsSUFBSSxDQUFDdkIsRUFBRSxFQUFFVSxZQUFZVSxnQkFBZ0JkO0lBQ3hEO0FBQ0o7QUFDQWYsd0JBQXdCLEdBQUdFO0FBQzFCLElBQUdJLFlBQVkyQixhQUFhLEVBQUUvQixrQkFBa0I7SUFBQ0ksWUFBWTRCLE1BQU0sQ0FBQ0MsY0FBYztJQUFFN0IsWUFBWTRCLE1BQU0sQ0FBQ0UsdUJBQXVCO0NBQUMsR0FDaEksb0NBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvZ2V0X21vcmUuanM/ZDE5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuR2V0TW9yZU9wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBHZXRNb3JlT3BlcmF0aW9uIGV4dGVuZHMgb3BlcmF0aW9uXzEuQWJzdHJhY3RDYWxsYmFja09wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IobnMsIGN1cnNvcklkLCBzZXJ2ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMubnMgPSBucztcbiAgICAgICAgdGhpcy5jdXJzb3JJZCA9IGN1cnNvcklkO1xuICAgICAgICB0aGlzLnNlcnZlciA9IHNlcnZlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWx0aG91Z2ggdGhlcmUgaXMgYSBzZXJ2ZXIgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggdGhlIGdldCBtb3JlIG9wZXJhdGlvbiwgdGhlIHNpZ25hdHVyZVxuICAgICAqIGZvciBleGVjdXRlIHBhc3NlcyBhIHNlcnZlciBzbyB3ZSB3aWxsIGp1c3QgdXNlIHRoYXQgb25lLlxuICAgICAqL1xuICAgIGV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChzZXJ2ZXIgIT09IHRoaXMuc2VydmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ0dldG1vcmUgbXVzdCBydW4gb24gdGhlIHNhbWUgc2VydmVyIG9wZXJhdGlvbiBiZWdhbiBvbicpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jdXJzb3JJZCA9PSBudWxsIHx8IHRoaXMuY3Vyc29ySWQuaXNaZXJvKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignVW5hYmxlIHRvIGl0ZXJhdGUgY3Vyc29yIHdpdGggbm8gaWQnKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMubnMuY29sbGVjdGlvbjtcbiAgICAgICAgaWYgKGNvbGxlY3Rpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gQ3Vyc29ycyBzaG91bGQgaGF2ZSBhZG9wdGVkIHRoZSBuYW1lc3BhY2UgcmV0dXJuZWQgYnkgTW9uZ29EQlxuICAgICAgICAgICAgLy8gd2hpY2ggc2hvdWxkIGFsd2F5cyBkZWZpbmVkIGEgY29sbGVjdGlvbiBuYW1lIChldmVuIGEgcHNldWRvIG9uZSwgZXguIGRiLmFnZ3JlZ2F0ZSgpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdBIGNvbGxlY3Rpb24gbmFtZSBtdXN0IGJlIGRldGVybWluZWQgYmVmb3JlIGdldE1vcmUnKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ2V0TW9yZUNtZCA9IHtcbiAgICAgICAgICAgIGdldE1vcmU6IHRoaXMuY3Vyc29ySWQsXG4gICAgICAgICAgICBjb2xsZWN0aW9uXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmJhdGNoU2l6ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGdldE1vcmVDbWQuYmF0Y2hTaXplID0gTWF0aC5hYnModGhpcy5vcHRpb25zLmJhdGNoU2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMubWF4QXdhaXRUaW1lTVMgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBnZXRNb3JlQ21kLm1heFRpbWVNUyA9IHRoaXMub3B0aW9ucy5tYXhBd2FpdFRpbWVNUztcbiAgICAgICAgfVxuICAgICAgICAvLyB3ZSBjaGVjayBmb3IgdW5kZWZpbmVkIHNwZWNpZmljYWxseSBoZXJlIHRvIGFsbG93IGZhbHN5IHZhbHVlc1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb21tZW50ICE9PSB1bmRlZmluZWQgJiYgKDAsIHV0aWxzXzEubWF4V2lyZVZlcnNpb24pKHNlcnZlcikgPj0gOSkge1xuICAgICAgICAgICAgZ2V0TW9yZUNtZC5jb21tZW50ID0gdGhpcy5vcHRpb25zLmNvbW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tbWFuZE9wdGlvbnMgPSB7XG4gICAgICAgICAgICByZXR1cm5GaWVsZFNlbGVjdG9yOiBudWxsLFxuICAgICAgICAgICAgZG9jdW1lbnRzUmV0dXJuZWRJbjogJ25leHRCYXRjaCcsXG4gICAgICAgICAgICAuLi50aGlzLm9wdGlvbnNcbiAgICAgICAgfTtcbiAgICAgICAgc2VydmVyLmNvbW1hbmQodGhpcy5ucywgZ2V0TW9yZUNtZCwgY29tbWFuZE9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5leHBvcnRzLkdldE1vcmVPcGVyYXRpb24gPSBHZXRNb3JlT3BlcmF0aW9uO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKEdldE1vcmVPcGVyYXRpb24sIFtvcGVyYXRpb25fMS5Bc3BlY3QuUkVBRF9PUEVSQVRJT04sIG9wZXJhdGlvbl8xLkFzcGVjdC5NVVNUX1NFTEVDVF9TQU1FX1NFUlZFUl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0X21vcmUuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiR2V0TW9yZU9wZXJhdGlvbiIsImVycm9yXzEiLCJyZXF1aXJlIiwidXRpbHNfMSIsIm9wZXJhdGlvbl8xIiwiQWJzdHJhY3RDYWxsYmFja09wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwibnMiLCJjdXJzb3JJZCIsInNlcnZlciIsIm9wdGlvbnMiLCJleGVjdXRlQ2FsbGJhY2siLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJNb25nb1J1bnRpbWVFcnJvciIsImlzWmVybyIsImNvbGxlY3Rpb24iLCJnZXRNb3JlQ21kIiwiZ2V0TW9yZSIsImJhdGNoU2l6ZSIsIk1hdGgiLCJhYnMiLCJtYXhBd2FpdFRpbWVNUyIsIm1heFRpbWVNUyIsImNvbW1lbnQiLCJ1bmRlZmluZWQiLCJtYXhXaXJlVmVyc2lvbiIsImNvbW1hbmRPcHRpb25zIiwicmV0dXJuRmllbGRTZWxlY3RvciIsImRvY3VtZW50c1JldHVybmVkSW4iLCJjb21tYW5kIiwiZGVmaW5lQXNwZWN0cyIsIkFzcGVjdCIsIlJFQURfT1BFUkFUSU9OIiwiTVVTVF9TRUxFQ1RfU0FNRV9TRVJWRVIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/get_more.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/indexes.js":
/*!********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/indexes.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.IndexInformationOperation = exports.IndexExistsOperation = exports.ListIndexesOperation = exports.DropIndexesOperation = exports.DropIndexOperation = exports.EnsureIndexOperation = exports.CreateIndexOperation = exports.CreateIndexesOperation = exports.IndexesOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst common_functions_1 = __webpack_require__(/*! ./common_functions */ \"(ssr)/./node_modules/mongodb/lib/operations/common_functions.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\nconst VALID_INDEX_OPTIONS = new Set([\n    \"background\",\n    \"unique\",\n    \"name\",\n    \"partialFilterExpression\",\n    \"sparse\",\n    \"hidden\",\n    \"expireAfterSeconds\",\n    \"storageEngine\",\n    \"collation\",\n    \"version\",\n    // text indexes\n    \"weights\",\n    \"default_language\",\n    \"language_override\",\n    \"textIndexVersion\",\n    // 2d-sphere indexes\n    \"2dsphereIndexVersion\",\n    // 2d indexes\n    \"bits\",\n    \"min\",\n    \"max\",\n    // geoHaystack Indexes\n    \"bucketSize\",\n    // wildcard indexes\n    \"wildcardProjection\"\n]);\nfunction isIndexDirection(x) {\n    return typeof x === \"number\" || x === \"2d\" || x === \"2dsphere\" || x === \"text\" || x === \"geoHaystack\";\n}\nfunction isSingleIndexTuple(t) {\n    return Array.isArray(t) && t.length === 2 && isIndexDirection(t[1]);\n}\nfunction makeIndexSpec(indexSpec, options) {\n    const key = new Map();\n    const indexSpecs = !Array.isArray(indexSpec) || isSingleIndexTuple(indexSpec) ? [\n        indexSpec\n    ] : indexSpec;\n    // Iterate through array and handle different types\n    for (const spec of indexSpecs){\n        if (typeof spec === \"string\") {\n            key.set(spec, 1);\n        } else if (Array.isArray(spec)) {\n            key.set(spec[0], spec[1] ?? 1);\n        } else if (spec instanceof Map) {\n            for (const [property, value] of spec){\n                key.set(property, value);\n            }\n        } else if ((0, utils_1.isObject)(spec)) {\n            for (const [property, value] of Object.entries(spec)){\n                key.set(property, value);\n            }\n        }\n    }\n    return {\n        ...options,\n        key\n    };\n}\n/** @internal */ class IndexesOperation extends operation_1.AbstractCallbackOperation {\n    constructor(collection, options){\n        super(options);\n        this.options = options;\n        this.collection = collection;\n    }\n    executeCallback(server, session, callback) {\n        const coll = this.collection;\n        const options = this.options;\n        (0, common_functions_1.indexInformation)(coll.s.db, coll.collectionName, {\n            full: true,\n            ...options,\n            readPreference: this.readPreference,\n            session\n        }, callback);\n    }\n}\nexports.IndexesOperation = IndexesOperation;\n/** @internal */ class CreateIndexesOperation extends command_1.CommandCallbackOperation {\n    constructor(parent, collectionName, indexes, options){\n        super(parent, options);\n        this.options = options ?? {};\n        this.collectionName = collectionName;\n        this.indexes = indexes.map((userIndex)=>{\n            // Ensure the key is a Map to preserve index key ordering\n            const key = userIndex.key instanceof Map ? userIndex.key : new Map(Object.entries(userIndex.key));\n            const name = userIndex.name != null ? userIndex.name : Array.from(key).flat().join(\"_\");\n            const validIndexOptions = Object.fromEntries(Object.entries({\n                ...userIndex\n            }).filter(([optionName])=>VALID_INDEX_OPTIONS.has(optionName)));\n            return {\n                ...validIndexOptions,\n                name,\n                key\n            };\n        });\n    }\n    executeCallback(server, session, callback) {\n        const options = this.options;\n        const indexes = this.indexes;\n        const serverWireVersion = (0, utils_1.maxWireVersion)(server);\n        const cmd = {\n            createIndexes: this.collectionName,\n            indexes\n        };\n        if (options.commitQuorum != null) {\n            if (serverWireVersion < 9) {\n                callback(new error_1.MongoCompatibilityError(\"Option `commitQuorum` for `createIndexes` not supported on servers < 4.4\"));\n                return;\n            }\n            cmd.commitQuorum = options.commitQuorum;\n        }\n        // collation is set on each index, it should not be defined at the root\n        this.options.collation = undefined;\n        super.executeCommandCallback(server, session, cmd, (err)=>{\n            if (err) {\n                callback(err);\n                return;\n            }\n            const indexNames = indexes.map((index)=>index.name || \"\");\n            callback(undefined, indexNames);\n        });\n    }\n}\nexports.CreateIndexesOperation = CreateIndexesOperation;\n/** @internal */ class CreateIndexOperation extends CreateIndexesOperation {\n    constructor(parent, collectionName, indexSpec, options){\n        super(parent, collectionName, [\n            makeIndexSpec(indexSpec, options)\n        ], options);\n    }\n    executeCallback(server, session, callback) {\n        super.executeCallback(server, session, (err, indexNames)=>{\n            if (err || !indexNames) return callback(err);\n            return callback(undefined, indexNames[0]);\n        });\n    }\n}\nexports.CreateIndexOperation = CreateIndexOperation;\n/** @internal */ class EnsureIndexOperation extends CreateIndexOperation {\n    constructor(db, collectionName, indexSpec, options){\n        super(db, collectionName, indexSpec, options);\n        this.readPreference = read_preference_1.ReadPreference.primary;\n        this.db = db;\n        this.collectionName = collectionName;\n    }\n    executeCallback(server, session, callback) {\n        const indexName = this.indexes[0].name;\n        const cursor = this.db.collection(this.collectionName).listIndexes({\n            session\n        });\n        cursor.toArray().then((indexes)=>{\n            indexes = Array.isArray(indexes) ? indexes : [\n                indexes\n            ];\n            if (indexes.some((index)=>index.name === indexName)) {\n                callback(undefined, indexName);\n                return;\n            }\n            super.executeCallback(server, session, callback);\n        }, (error)=>{\n            if (error instanceof error_1.MongoError && error.code === error_1.MONGODB_ERROR_CODES.NamespaceNotFound) {\n                // ignore \"NamespaceNotFound\" errors\n                return super.executeCallback(server, session, callback);\n            }\n            return callback(error);\n        });\n    }\n}\nexports.EnsureIndexOperation = EnsureIndexOperation;\n/** @internal */ class DropIndexOperation extends command_1.CommandCallbackOperation {\n    constructor(collection, indexName, options){\n        super(collection, options);\n        this.options = options ?? {};\n        this.collection = collection;\n        this.indexName = indexName;\n    }\n    executeCallback(server, session, callback) {\n        const cmd = {\n            dropIndexes: this.collection.collectionName,\n            index: this.indexName\n        };\n        super.executeCommandCallback(server, session, cmd, callback);\n    }\n}\nexports.DropIndexOperation = DropIndexOperation;\n/** @internal */ class DropIndexesOperation extends DropIndexOperation {\n    constructor(collection, options){\n        super(collection, \"*\", options);\n    }\n    executeCallback(server, session, callback) {\n        super.executeCallback(server, session, (err)=>{\n            if (err) return callback(err, false);\n            callback(undefined, true);\n        });\n    }\n}\nexports.DropIndexesOperation = DropIndexesOperation;\n/** @internal */ class ListIndexesOperation extends command_1.CommandCallbackOperation {\n    constructor(collection, options){\n        super(collection, options);\n        this.options = {\n            ...options\n        };\n        delete this.options.writeConcern;\n        this.collectionNamespace = collection.s.namespace;\n    }\n    executeCallback(server, session, callback) {\n        const serverWireVersion = (0, utils_1.maxWireVersion)(server);\n        const cursor = this.options.batchSize ? {\n            batchSize: this.options.batchSize\n        } : {};\n        const command = {\n            listIndexes: this.collectionNamespace.collection,\n            cursor\n        };\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (serverWireVersion >= 9 && this.options.comment !== undefined) {\n            command.comment = this.options.comment;\n        }\n        super.executeCommandCallback(server, session, command, callback);\n    }\n}\nexports.ListIndexesOperation = ListIndexesOperation;\n/** @internal */ class IndexExistsOperation extends operation_1.AbstractCallbackOperation {\n    constructor(collection, indexes, options){\n        super(options);\n        this.options = options;\n        this.collection = collection;\n        this.indexes = indexes;\n    }\n    executeCallback(server, session, callback) {\n        const coll = this.collection;\n        const indexes = this.indexes;\n        (0, common_functions_1.indexInformation)(coll.s.db, coll.collectionName, {\n            ...this.options,\n            readPreference: this.readPreference,\n            session\n        }, (err, indexInformation)=>{\n            // If we have an error return\n            if (err != null) return callback(err);\n            // Let's check for the index names\n            if (!Array.isArray(indexes)) return callback(undefined, indexInformation[indexes] != null);\n            // Check in list of indexes\n            for(let i = 0; i < indexes.length; i++){\n                if (indexInformation[indexes[i]] == null) {\n                    return callback(undefined, false);\n                }\n            }\n            // All keys found return true\n            return callback(undefined, true);\n        });\n    }\n}\nexports.IndexExistsOperation = IndexExistsOperation;\n/** @internal */ class IndexInformationOperation extends operation_1.AbstractCallbackOperation {\n    constructor(db, name, options){\n        super(options);\n        this.options = options ?? {};\n        this.db = db;\n        this.name = name;\n    }\n    executeCallback(server, session, callback) {\n        const db = this.db;\n        const name = this.name;\n        (0, common_functions_1.indexInformation)(db, name, {\n            ...this.options,\n            readPreference: this.readPreference,\n            session\n        }, callback);\n    }\n}\nexports.IndexInformationOperation = IndexInformationOperation;\n(0, operation_1.defineAspects)(ListIndexesOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.CURSOR_CREATING\n]);\n(0, operation_1.defineAspects)(CreateIndexesOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]);\n(0, operation_1.defineAspects)(CreateIndexOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]);\n(0, operation_1.defineAspects)(EnsureIndexOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]);\n(0, operation_1.defineAspects)(DropIndexOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]);\n(0, operation_1.defineAspects)(DropIndexesOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]); //# sourceMappingURL=indexes.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9pbmRleGVzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxpQ0FBaUMsR0FBR0EsNEJBQTRCLEdBQUdBLDRCQUE0QixHQUFHQSw0QkFBNEIsR0FBR0EsMEJBQTBCLEdBQUdBLDRCQUE0QixHQUFHQSw0QkFBNEIsR0FBR0EsOEJBQThCLEdBQUdBLHdCQUF3QixHQUFHLEtBQUs7QUFDN1IsTUFBTVcsVUFBVUMsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUMsb0JBQW9CRCxtQkFBT0EsQ0FBQywrRUFBb0I7QUFDdEQsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUcsWUFBWUgsbUJBQU9BLENBQUMseUVBQVc7QUFDckMsTUFBTUkscUJBQXFCSixtQkFBT0EsQ0FBQywyRkFBb0I7QUFDdkQsTUFBTUssY0FBY0wsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsTUFBTU0sc0JBQXNCLElBQUlDLElBQUk7SUFDaEM7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQSxlQUFlO0lBQ2Y7SUFDQTtJQUNBO0lBQ0E7SUFDQSxvQkFBb0I7SUFDcEI7SUFDQSxhQUFhO0lBQ2I7SUFDQTtJQUNBO0lBQ0Esc0JBQXNCO0lBQ3RCO0lBQ0EsbUJBQW1CO0lBQ25CO0NBQ0g7QUFDRCxTQUFTQyxpQkFBaUJDLENBQUM7SUFDdkIsT0FBUSxPQUFPQSxNQUFNLFlBQVlBLE1BQU0sUUFBUUEsTUFBTSxjQUFjQSxNQUFNLFVBQVVBLE1BQU07QUFDN0Y7QUFDQSxTQUFTQyxtQkFBbUJDLENBQUM7SUFDekIsT0FBT0MsTUFBTUMsT0FBTyxDQUFDRixNQUFNQSxFQUFFRyxNQUFNLEtBQUssS0FBS04saUJBQWlCRyxDQUFDLENBQUMsRUFBRTtBQUN0RTtBQUNBLFNBQVNJLGNBQWND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QUNBLElBQUk7UUFDckIsSUFBR3pDLG1CQUFtQjhCLGdCQUFnQixFQUFFRSxJQUFJUyxNQUFNO1lBQUUsR0FBRyxJQUFJLENBQUM1QixPQUFPO1lBQUVzQixnQkFBZ0IsSUFBSSxDQUFDQSxjQUFjO1lBQUVSO1FBQVEsR0FBR0M7SUFDMUg7QUFDSjtBQUNBNUMsaUNBQWlDLEdBQUdFO0FBQ25DLElBQUdlLFlBQVlrRixhQUFhLEVBQUUvRixzQkFBc0I7SUFDakRhLFlBQVltRixNQUFNLENBQUNDLGNBQWM7SUFDakNwRixZQUFZbUYsTUFBTSxDQUFDRSxTQUFTO0lBQzVCckYsWUFBWW1GLE1BQU0sQ0FBQ0csZUFBZTtDQUNyQztBQUNBLElBQUd0RixZQUFZa0YsYUFBYSxFQUFFMUYsd0JBQXdCO0lBQUNRLFlBQVltRixNQUFNLENBQUNJLGVBQWU7Q0FBQztBQUMxRixJQUFHdkYsWUFBWWtGLGFBQWEsRUFBRTNGLHNCQUFzQjtJQUFDUyxZQUFZbUYsTUFBTSxDQUFDSSxlQUFlO0NBQUM7QUFDeEYsSUFBR3ZGLFlBQVlrRixhQUFhLEVBQUU1RixzQkFBc0I7SUFBQ1UsWUFBWW1GLE1BQU0sQ0FBQ0ksZUFBZTtDQUFDO0FBQ3hGLElBQUd2RixZQUFZa0YsYUFBYSxFQUFFN0Ysb0JBQW9CO0lBQUNXLFlBQVltRixNQUFNLENBQUNJLGVBQWU7Q0FBQztBQUN0RixJQUFHdkYsWUFBWWtGLGFBQWEsRUFBRTlGLHNCQUFzQjtJQUFDWSxZQUFZbUYsTUFBTSxDQUFDSSxlQUFlO0NBQUMsR0FDekYsbUNBQW1DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvaW5kZXhlcy5qcz83MjA5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5JbmRleEluZm9ybWF0aW9uT3BlcmF0aW9uID0gZXhwb3J0cy5JbmRleEV4aXN0c09wZXJhdGlvbiA9IGV4cG9ydHMuTGlzdEluZGV4ZXNPcGVyYXRpb24gPSBleHBvcnRzLkRyb3BJbmRleGVzT3BlcmF0aW9uID0gZXhwb3J0cy5Ecm9wSW5kZXhPcGVyYXRpb24gPSBleHBvcnRzLkVuc3VyZUluZGV4T3BlcmF0aW9uID0gZXhwb3J0cy5DcmVhdGVJbmRleE9wZXJhdGlvbiA9IGV4cG9ydHMuQ3JlYXRlSW5kZXhlc09wZXJhdGlvbiA9IGV4cG9ydHMuSW5kZXhlc09wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCByZWFkX3ByZWZlcmVuY2VfMSA9IHJlcXVpcmUoXCIuLi9yZWFkX3ByZWZlcmVuY2VcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgY29tbWFuZF8xID0gcmVxdWlyZShcIi4vY29tbWFuZFwiKTtcbmNvbnN0IGNvbW1vbl9mdW5jdGlvbnNfMSA9IHJlcXVpcmUoXCIuL2NvbW1vbl9mdW5jdGlvbnNcIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbmNvbnN0IFZBTElEX0lOREVYX09QVElPTlMgPSBuZXcgU2V0KFtcbiAgICAnYmFja2dyb3VuZCcsXG4gICAgJ3VuaXF1ZScsXG4gICAgJ25hbWUnLFxuICAgICdwYXJ0aWFsRmlsdGVyRXhwcmVzc2lvbicsXG4gICAgJ3NwYXJzZScsXG4gICAgJ2hpZGRlbicsXG4gICAgJ2V4cGlyZUFmdGVyU2Vjb25kcycsXG4gICAgJ3N0b3JhZ2VFbmdpbmUnLFxuICAgICdjb2xsYXRpb24nLFxuICAgICd2ZXJzaW9uJyxcbiAgICAvLyB0ZXh0IGluZGV4ZXNcbiAgICAnd2VpZ2h0cycsXG4gICAgJ2RlZmF1bHRfbGFuZ3VhZ2UnLFxuICAgICdsYW5ndWFnZV9vdmVycmlkZScsXG4gICAgJ3RleHRJbmRleFZlcnNpb24nLFxuICAgIC8vIDJkLXNwaGVyZSBpbmRleGVzXG4gICAgJzJkc3BoZXJlSW5kZXhWZXJzaW9uJyxcbiAgICAvLyAyZCBpbmRleGVzXG4gICAgJ2JpdHMnLFxuICAgICdtaW4nLFxuICAgICdtYXgnLFxuICAgIC8vIGdlb0hheXN0YWNrIEluZGV4ZXNcbiAgICAnYnVja2V0U2l6ZScsXG4gICAgLy8gd2lsZGNhcmQgaW5kZXhlc1xuICAgICd3aWxkY2FyZFByb2plY3Rpb24nXG5dKTtcbmZ1bmN0aW9uIGlzSW5kZXhEaXJlY3Rpb24oeCkge1xuICAgIHJldHVybiAodHlwZW9mIHggPT09ICdudW1iZXInIHx8IHggPT09ICcyZCcgfHwgeCA9PT0gJzJkc3BoZXJlJyB8fCB4ID09PSAndGV4dCcgfHwgeCA9PT0gJ2dlb0hheXN0YWNrJyk7XG59XG5mdW5jdGlvbiBpc1NpbmdsZUluZGV4VHVwbGUodCkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHQpICYmIHQubGVuZ3RoID09PSAyICYmIGlzSW5kZXhEaXJlY3Rpb24odFsxXSk7XG59XG5mdW5jdGlvbiBtYWtlSW5kZXhTcGVjKGluZGV4U3BlYywgb3B0aW9ucykge1xuICAgIGNvbnN0IGtleSA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBpbmRleFNwZWNzID0gIUFycmF5LmlzQXJyYXkoaW5kZXhTcGVjKSB8fCBpc1NpbmdsZUluZGV4VHVwbGUoaW5kZXhTcGVjKSA/IFtpbmRleFNwZWNdIDogaW5kZXhTcGVjO1xuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBhcnJheSBhbmQgaGFuZGxlIGRpZmZlcmVudCB0eXBlc1xuICAgIGZvciAoY29uc3Qgc3BlYyBvZiBpbmRleFNwZWNzKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3BlYyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGtleS5zZXQoc3BlYywgMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShzcGVjKSkge1xuICAgICAgICAgICAga2V5LnNldChzcGVjWzBdLCBzcGVjWzFdID8/IDEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNwZWMgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW3Byb3BlcnR5LCB2YWx1ZV0gb2Ygc3BlYykge1xuICAgICAgICAgICAgICAgIGtleS5zZXQocHJvcGVydHksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgoMCwgdXRpbHNfMS5pc09iamVjdCkoc3BlYykpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW3Byb3BlcnR5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc3BlYykpIHtcbiAgICAgICAgICAgICAgICBrZXkuc2V0KHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgLi4ub3B0aW9ucywga2V5IH07XG59XG4vKiogQGludGVybmFsICovXG5jbGFzcyBJbmRleGVzT3BlcmF0aW9uIGV4dGVuZHMgb3BlcmF0aW9uXzEuQWJzdHJhY3RDYWxsYmFja09wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgY29sbCA9IHRoaXMuY29sbGVjdGlvbjtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgKDAsIGNvbW1vbl9mdW5jdGlvbnNfMS5pbmRleEluZm9ybWF0aW9uKShjb2xsLnMuZGIsIGNvbGwuY29sbGVjdGlvbk5hbWUsIHsgZnVsbDogdHJ1ZSwgLi4ub3B0aW9ucywgcmVhZFByZWZlcmVuY2U6IHRoaXMucmVhZFByZWZlcmVuY2UsIHNlc3Npb24gfSwgY2FsbGJhY2spO1xuICAgIH1cbn1cbmV4cG9ydHMuSW5kZXhlc09wZXJhdGlvbiA9IEluZGV4ZXNPcGVyYXRpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBDcmVhdGVJbmRleGVzT3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRDYWxsYmFja09wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCBjb2xsZWN0aW9uTmFtZSwgaW5kZXhlcywgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihwYXJlbnQsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zID8/IHt9O1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25OYW1lID0gY29sbGVjdGlvbk5hbWU7XG4gICAgICAgIHRoaXMuaW5kZXhlcyA9IGluZGV4ZXMubWFwKHVzZXJJbmRleCA9PiB7XG4gICAgICAgICAgICAvLyBFbnN1cmUgdGhlIGtleSBpcyBhIE1hcCB0byBwcmVzZXJ2ZSBpbmRleCBrZXkgb3JkZXJpbmdcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHVzZXJJbmRleC5rZXkgaW5zdGFuY2VvZiBNYXAgPyB1c2VySW5kZXgua2V5IDogbmV3IE1hcChPYmplY3QuZW50cmllcyh1c2VySW5kZXgua2V5KSk7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gdXNlckluZGV4Lm5hbWUgIT0gbnVsbCA/IHVzZXJJbmRleC5uYW1lIDogQXJyYXkuZnJvbShrZXkpLmZsYXQoKS5qb2luKCdfJyk7XG4gICAgICAgICAgICBjb25zdCB2YWxpZEluZGV4T3B0aW9ucyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyh7IC4uLnVzZXJJbmRleCB9KS5maWx0ZXIoKFtvcHRpb25OYW1lXSkgPT4gVkFMSURfSU5ERVhfT1BUSU9OUy5oYXMob3B0aW9uTmFtZSkpKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4udmFsaWRJbmRleE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICBrZXlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBpbmRleGVzID0gdGhpcy5pbmRleGVzO1xuICAgICAgICBjb25zdCBzZXJ2ZXJXaXJlVmVyc2lvbiA9ICgwLCB1dGlsc18xLm1heFdpcmVWZXJzaW9uKShzZXJ2ZXIpO1xuICAgICAgICBjb25zdCBjbWQgPSB7IGNyZWF0ZUluZGV4ZXM6IHRoaXMuY29sbGVjdGlvbk5hbWUsIGluZGV4ZXMgfTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29tbWl0UXVvcnVtICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChzZXJ2ZXJXaXJlVmVyc2lvbiA8IDkpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb0NvbXBhdGliaWxpdHlFcnJvcignT3B0aW9uIGBjb21taXRRdW9ydW1gIGZvciBgY3JlYXRlSW5kZXhlc2Agbm90IHN1cHBvcnRlZCBvbiBzZXJ2ZXJzIDwgNC40JykpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNtZC5jb21taXRRdW9ydW0gPSBvcHRpb25zLmNvbW1pdFF1b3J1bTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjb2xsYXRpb24gaXMgc2V0IG9uIGVhY2ggaW5kZXgsIGl0IHNob3VsZCBub3QgYmUgZGVmaW5lZCBhdCB0aGUgcm9vdFxuICAgICAgICB0aGlzLm9wdGlvbnMuY29sbGF0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICBzdXBlci5leGVjdXRlQ29tbWFuZENhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY21kLCBlcnIgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaW5kZXhOYW1lcyA9IGluZGV4ZXMubWFwKGluZGV4ID0+IGluZGV4Lm5hbWUgfHwgJycpO1xuICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCBpbmRleE5hbWVzKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5DcmVhdGVJbmRleGVzT3BlcmF0aW9uID0gQ3JlYXRlSW5kZXhlc09wZXJhdGlvbjtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIENyZWF0ZUluZGV4T3BlcmF0aW9uIGV4dGVuZHMgQ3JlYXRlSW5kZXhlc09wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCBjb2xsZWN0aW9uTmFtZSwgaW5kZXhTcGVjLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKHBhcmVudCwgY29sbGVjdGlvbk5hbWUsIFttYWtlSW5kZXhTcGVjKGluZGV4U3BlYywgb3B0aW9ucyldLCBvcHRpb25zKTtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgc3VwZXIuZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgKGVyciwgaW5kZXhOYW1lcykgPT4ge1xuICAgICAgICAgICAgaWYgKGVyciB8fCAhaW5kZXhOYW1lcylcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh1bmRlZmluZWQsIGluZGV4TmFtZXNbMF0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkNyZWF0ZUluZGV4T3BlcmF0aW9uID0gQ3JlYXRlSW5kZXhPcGVyYXRpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBFbnN1cmVJbmRleE9wZXJhdGlvbiBleHRlbmRzIENyZWF0ZUluZGV4T3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihkYiwgY29sbGVjdGlvbk5hbWUsIGluZGV4U3BlYywgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihkYiwgY29sbGVjdGlvbk5hbWUsIGluZGV4U3BlYywgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMucmVhZFByZWZlcmVuY2UgPSByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5wcmltYXJ5O1xuICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbk5hbWUgPSBjb2xsZWN0aW9uTmFtZTtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgaW5kZXhOYW1lID0gdGhpcy5pbmRleGVzWzBdLm5hbWU7XG4gICAgICAgIGNvbnN0IGN1cnNvciA9IHRoaXMuZGIuY29sbGVjdGlvbih0aGlzLmNvbGxlY3Rpb25OYW1lKS5saXN0SW5kZXhlcyh7IHNlc3Npb24gfSk7XG4gICAgICAgIGN1cnNvci50b0FycmF5KCkudGhlbihpbmRleGVzID0+IHtcbiAgICAgICAgICAgIGluZGV4ZXMgPSBBcnJheS5pc0FycmF5KGluZGV4ZXMpID8gaW5kZXhlcyA6IFtpbmRleGVzXTtcbiAgICAgICAgICAgIGlmIChpbmRleGVzLnNvbWUoaW5kZXggPT4gaW5kZXgubmFtZSA9PT0gaW5kZXhOYW1lKSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwgaW5kZXhOYW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdXBlci5leGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjayk7XG4gICAgICAgIH0sIGVycm9yID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29FcnJvciAmJiBlcnJvci5jb2RlID09PSBlcnJvcl8xLk1PTkdPREJfRVJST1JfQ09ERVMuTmFtZXNwYWNlTm90Rm91bmQpIHtcbiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgXCJOYW1lc3BhY2VOb3RGb3VuZFwiIGVycm9yc1xuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5leGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkVuc3VyZUluZGV4T3BlcmF0aW9uID0gRW5zdXJlSW5kZXhPcGVyYXRpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBEcm9wSW5kZXhPcGVyYXRpb24gZXh0ZW5kcyBjb21tYW5kXzEuQ29tbWFuZENhbGxiYWNrT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBpbmRleE5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoY29sbGVjdGlvbiwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IGNvbGxlY3Rpb247XG4gICAgICAgIHRoaXMuaW5kZXhOYW1lID0gaW5kZXhOYW1lO1xuICAgIH1cbiAgICBleGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBjbWQgPSB7IGRyb3BJbmRleGVzOiB0aGlzLmNvbGxlY3Rpb24uY29sbGVjdGlvbk5hbWUsIGluZGV4OiB0aGlzLmluZGV4TmFtZSB9O1xuICAgICAgICBzdXBlci5leGVjdXRlQ29tbWFuZENhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY21kLCBjYWxsYmFjayk7XG4gICAgfVxufVxuZXhwb3J0cy5Ecm9wSW5kZXhPcGVyYXRpb24gPSBEcm9wSW5kZXhPcGVyYXRpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBEcm9wSW5kZXhlc09wZXJhdGlvbiBleHRlbmRzIERyb3BJbmRleE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihjb2xsZWN0aW9uLCAnKicsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBleGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBzdXBlci5leGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBlcnIgPT4ge1xuICAgICAgICAgICAgaWYgKGVycilcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyLCBmYWxzZSk7XG4gICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIHRydWUpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkRyb3BJbmRleGVzT3BlcmF0aW9uID0gRHJvcEluZGV4ZXNPcGVyYXRpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBMaXN0SW5kZXhlc09wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kQ2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoY29sbGVjdGlvbiwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHsgLi4ub3B0aW9ucyB9O1xuICAgICAgICBkZWxldGUgdGhpcy5vcHRpb25zLndyaXRlQ29uY2VybjtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uTmFtZXNwYWNlID0gY29sbGVjdGlvbi5zLm5hbWVzcGFjZTtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3Qgc2VydmVyV2lyZVZlcnNpb24gPSAoMCwgdXRpbHNfMS5tYXhXaXJlVmVyc2lvbikoc2VydmVyKTtcbiAgICAgICAgY29uc3QgY3Vyc29yID0gdGhpcy5vcHRpb25zLmJhdGNoU2l6ZSA/IHsgYmF0Y2hTaXplOiB0aGlzLm9wdGlvbnMuYmF0Y2hTaXplIH0gOiB7fTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHsgbGlzdEluZGV4ZXM6IHRoaXMuY29sbGVjdGlvbk5hbWVzcGFjZS5jb2xsZWN0aW9uLCBjdXJzb3IgfTtcbiAgICAgICAgLy8gd2UgY2hlY2sgZm9yIHVuZGVmaW5lZCBzcGVjaWZpY2FsbHkgaGVyZSB0byBhbGxvdyBmYWxzeSB2YWx1ZXNcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICAgIGlmIChzZXJ2ZXJXaXJlVmVyc2lvbiA+PSA5ICYmIHRoaXMub3B0aW9ucy5jb21tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuY29tbWVudCA9IHRoaXMub3B0aW9ucy5jb21tZW50O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmV4ZWN1dGVDb21tYW5kQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjb21tYW5kLCBjYWxsYmFjayk7XG4gICAgfVxufVxuZXhwb3J0cy5MaXN0SW5kZXhlc09wZXJhdGlvbiA9IExpc3RJbmRleGVzT3BlcmF0aW9uO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgSW5kZXhFeGlzdHNPcGVyYXRpb24gZXh0ZW5kcyBvcGVyYXRpb25fMS5BYnN0cmFjdENhbGxiYWNrT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBpbmRleGVzLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLmluZGV4ZXMgPSBpbmRleGVzO1xuICAgIH1cbiAgICBleGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBjb2xsID0gdGhpcy5jb2xsZWN0aW9uO1xuICAgICAgICBjb25zdCBpbmRleGVzID0gdGhpcy5pbmRleGVzO1xuICAgICAgICAoMCwgY29tbW9uX2Z1bmN0aW9uc18xLmluZGV4SW5mb3JtYXRpb24pKGNvbGwucy5kYiwgY29sbC5jb2xsZWN0aW9uTmFtZSwgeyAuLi50aGlzLm9wdGlvbnMsIHJlYWRQcmVmZXJlbmNlOiB0aGlzLnJlYWRQcmVmZXJlbmNlLCBzZXNzaW9uIH0sIChlcnIsIGluZGV4SW5mb3JtYXRpb24pID0+IHtcbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgYW4gZXJyb3IgcmV0dXJuXG4gICAgICAgICAgICBpZiAoZXJyICE9IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAvLyBMZXQncyBjaGVjayBmb3IgdGhlIGluZGV4IG5hbWVzXG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5kZXhlcykpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHVuZGVmaW5lZCwgaW5kZXhJbmZvcm1hdGlvbltpbmRleGVzXSAhPSBudWxsKTtcbiAgICAgICAgICAgIC8vIENoZWNrIGluIGxpc3Qgb2YgaW5kZXhlc1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRleGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4SW5mb3JtYXRpb25baW5kZXhlc1tpXV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodW5kZWZpbmVkLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWxsIGtleXMgZm91bmQgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh1bmRlZmluZWQsIHRydWUpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkluZGV4RXhpc3RzT3BlcmF0aW9uID0gSW5kZXhFeGlzdHNPcGVyYXRpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBJbmRleEluZm9ybWF0aW9uT3BlcmF0aW9uIGV4dGVuZHMgb3BlcmF0aW9uXzEuQWJzdHJhY3RDYWxsYmFja09wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZGIsIG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHRoaXMuZGIgPSBkYjtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgZGIgPSB0aGlzLmRiO1xuICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5uYW1lO1xuICAgICAgICAoMCwgY29tbW9uX2Z1bmN0aW9uc18xLmluZGV4SW5mb3JtYXRpb24pKGRiLCBuYW1lLCB7IC4uLnRoaXMub3B0aW9ucywgcmVhZFByZWZlcmVuY2U6IHRoaXMucmVhZFByZWZlcmVuY2UsIHNlc3Npb24gfSwgY2FsbGJhY2spO1xuICAgIH1cbn1cbmV4cG9ydHMuSW5kZXhJbmZvcm1hdGlvbk9wZXJhdGlvbiA9IEluZGV4SW5mb3JtYXRpb25PcGVyYXRpb247XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoTGlzdEluZGV4ZXNPcGVyYXRpb24sIFtcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuUkVBRF9PUEVSQVRJT04sXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LlJFVFJZQUJMRSxcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuQ1VSU09SX0NSRUFUSU5HXG5dKTtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShDcmVhdGVJbmRleGVzT3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKENyZWF0ZUluZGV4T3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKEVuc3VyZUluZGV4T3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKERyb3BJbmRleE9wZXJhdGlvbiwgW29wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT05dKTtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShEcm9wSW5kZXhlc09wZXJhdGlvbiwgW29wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT05dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4ZXMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiSW5kZXhJbmZvcm1hdGlvbk9wZXJhdGlvbiIsIkluZGV4RXhpc3RzT3BlcmF0aW9uIiwiTGlzdEluZGV4ZXNPcGVyYXRpb24iLCJEcm9wSW5kZXhlc09wZXJhdGlvbiIsIkRyb3BJbmRleE9wZXJhdGlvbiIsIkVuc3VyZUluZGV4T3BlcmF0aW9uIiwiQ3JlYXRlSW5kZXhPcGVyYXRpb24iLCJDcmVhdGVJbmRleGVzT3BlcmF0aW9uIiwiSW5kZXhlc09wZXJhdGlvbiIsImVycm9yXzEiLCJyZXF1aXJlIiwicmVhZF9wcmVmZXJlbmNlXzEiLCJ1dGlsc18xIiwiY29tbWFuZF8xIiwiY29tbW9uX2Z1bmN0aW9uc18xIiwib3BlcmF0aW9uXzEiLCJWQUxJRF9JTkRFWF9PUFRJT05TIiwiU2V0IiwiaXNJbmRleERpcmVjdGlvbiIsIngiLCJpc1NpbmdsZUluZGV4VHVwbGUiLCJ0IiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwibWFrZUluZGV4U3BlYyIsImluZGV4U3BlYyIsIm9wdGlvbnMiLCJrZXkiLCJNYXAiLCJpbmRleFNwZWNzIiwic3BlYyIsInNldCIsInByb3BlcnR5IiwiaXNPYmplY3QiLCJlbnRyaWVzIiwiQWJzdHJhY3RDYWxsYmFja09wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwiY29sbGVjdGlvbiIsImV4ZWN1dGVDYWxsYmFjayIsInNlcnZlciIsInNlc3Npb24iLCJjYWxsYmFjayIsImNvbGwiLCJpbmRleEluZm9ybWF0aW9uIiwicyIsImRiIiwiY29sbGVjdGlvbk5hbWUiLCJmdWxsIiwicmVhZFByZWZlcmVuY2UiLCJDb21tYW5kQ2FsbGJhY2tPcGVyYXRpb24iLCJwYXJlbnQiLCJpbmRleGVzIiwibWFwIiwidXNlckluZGV4IiwibmFtZSIsImZyb20iLCJmbGF0Iiwiam9pbiIsInZhbGlkSW5kZXhPcHRpb25zIiwiZnJvbUVudHJpZXMiLCJmaWx0ZXIiLCJvcHRpb25OYW1lIiwiaGFzIiwic2VydmVyV2lyZVZlcnNpb24iLCJtYXhXaXJlVmVyc2lvbiIsImNtZCIsImNyZWF0ZUluZGV4ZXMiLCJjb21taXRRdW9ydW0iLCJNb25nb0NvbXBhdGliaWxpdHlFcnJvciIsImNvbGxhdGlvbiIsInVuZGVmaW5lZCIsImV4ZWN1dGVDb21tYW5kQ2FsbGJhY2siLCJlcnIiLCJpbmRleE5hbWVzIiwiaW5kZXgiLCJSZWFkUHJlZmVyZW5jZSIsInByaW1hcnkiLCJpbmRleE5hbWUiLCJjdXJzb3IiLCJsaXN0SW5kZXhlcyIsInRvQXJyYXkiLCJ0aGVuIiwic29tZSIsImVycm9yIiwiTW9uZ29FcnJvciIsImNvZGUiLCJNT05HT0RCX0VSUk9SX0NPREVTIiwiTmFtZXNwYWNlTm90Rm91bmQiLCJkcm9wSW5kZXhlcyIsIndyaXRlQ29uY2VybiIsImNvbGxlY3Rpb25OYW1lc3BhY2UiLCJuYW1lc3BhY2UiLCJiYXRjaFNpemUiLCJjb21tYW5kIiwiY29tbWVudCIsImkiLCJkZWZpbmVBc3BlY3RzIiwiQXNwZWN0IiwiUkVBRF9PUEVSQVRJT04iLCJSRVRSWUFCTEUiLCJDVVJTT1JfQ1JFQVRJTkciLCJXUklURV9PUEVSQVRJT04iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/indexes.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/insert.js":
/*!*******************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/insert.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.InsertManyOperation = exports.InsertOneOperation = exports.InsertOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst write_concern_1 = __webpack_require__(/*! ../write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nconst bulk_write_1 = __webpack_require__(/*! ./bulk_write */ \"(ssr)/./node_modules/mongodb/lib/operations/bulk_write.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst common_functions_1 = __webpack_require__(/*! ./common_functions */ \"(ssr)/./node_modules/mongodb/lib/operations/common_functions.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class InsertOperation extends command_1.CommandCallbackOperation {\n    constructor(ns, documents, options){\n        super(undefined, options);\n        this.options = {\n            ...options,\n            checkKeys: options.checkKeys ?? false\n        };\n        this.ns = ns;\n        this.documents = documents;\n    }\n    executeCallback(server, session, callback) {\n        const options = this.options ?? {};\n        const ordered = typeof options.ordered === \"boolean\" ? options.ordered : true;\n        const command = {\n            insert: this.ns.collection,\n            documents: this.documents,\n            ordered\n        };\n        if (typeof options.bypassDocumentValidation === \"boolean\") {\n            command.bypassDocumentValidation = options.bypassDocumentValidation;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (options.comment !== undefined) {\n            command.comment = options.comment;\n        }\n        super.executeCommandCallback(server, session, command, callback);\n    }\n}\nexports.InsertOperation = InsertOperation;\nclass InsertOneOperation extends InsertOperation {\n    constructor(collection, doc, options){\n        super(collection.s.namespace, (0, common_functions_1.prepareDocs)(collection, [\n            doc\n        ], options), options);\n    }\n    executeCallback(server, session, callback) {\n        super.executeCallback(server, session, (err, res)=>{\n            if (err || res == null) return callback(err);\n            if (res.code) return callback(new error_1.MongoServerError(res));\n            if (res.writeErrors) {\n                // This should be a WriteError but we can't change it now because of error hierarchy\n                return callback(new error_1.MongoServerError(res.writeErrors[0]));\n            }\n            callback(undefined, {\n                acknowledged: (this.writeConcern?.w !== 0) ?? true,\n                insertedId: this.documents[0]._id\n            });\n        });\n    }\n}\nexports.InsertOneOperation = InsertOneOperation;\n/** @internal */ class InsertManyOperation extends operation_1.AbstractCallbackOperation {\n    constructor(collection, docs, options){\n        super(options);\n        if (!Array.isArray(docs)) {\n            throw new error_1.MongoInvalidArgumentError('Argument \"docs\" must be an array of documents');\n        }\n        this.options = options;\n        this.collection = collection;\n        this.docs = docs;\n    }\n    executeCallback(server, session, callback) {\n        const coll = this.collection;\n        const options = {\n            ...this.options,\n            ...this.bsonOptions,\n            readPreference: this.readPreference\n        };\n        const writeConcern = write_concern_1.WriteConcern.fromOptions(options);\n        const bulkWriteOperation = new bulk_write_1.BulkWriteOperation(coll, (0, common_functions_1.prepareDocs)(coll, this.docs, options).map((document)=>({\n                insertOne: {\n                    document\n                }\n            })), options);\n        bulkWriteOperation.executeCallback(server, session, (err, res)=>{\n            if (err || res == null) {\n                if (err && err.message === \"Operation must be an object with an operation key\") {\n                    err = new error_1.MongoInvalidArgumentError(\"Collection.insertMany() cannot be called with an array that has null/undefined values\");\n                }\n                return callback(err);\n            }\n            callback(undefined, {\n                acknowledged: (writeConcern?.w !== 0) ?? true,\n                insertedCount: res.insertedCount,\n                insertedIds: res.insertedIds\n            });\n        });\n    }\n}\nexports.InsertManyOperation = InsertManyOperation;\n(0, operation_1.defineAspects)(InsertOperation, [\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.WRITE_OPERATION\n]);\n(0, operation_1.defineAspects)(InsertOneOperation, [\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.WRITE_OPERATION\n]);\n(0, operation_1.defineAspects)(InsertManyOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]); //# sourceMappingURL=insert.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9pbnNlcnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDJCQUEyQixHQUFHQSwwQkFBMEIsR0FBR0EsdUJBQXVCLEdBQUcsS0FBSztBQUMxRixNQUFNSyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxrQkFBa0JELG1CQUFPQSxDQUFDLDJFQUFrQjtBQUNsRCxNQUFNRSxlQUFlRixtQkFBT0EsQ0FBQywrRUFBYztBQUMzQyxNQUFNRyxZQUFZSCxtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNSSxxQkFBcUJKLG1CQUFPQSxDQUFDLDJGQUFvQjtBQUN2RCxNQUFNSyxjQUFjTCxtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYsd0JBQXdCSyxVQUFVRyx3QkFBd0I7SUFDNURDLFlBQVlDLEVBQUUsRUFBRUMsU0FBUyxFQUFFQyxPQUFPLENBQUU7UUFDaEMsS0FBSyxDQUFDQyxXQUFXRDtRQUNqQixJQUFJLENBQUNBLE9BQU8sR0FBRztZQUFFLEdBQUdBLE9BQU87WUFBRUUsV0FBV0YsUUFBUUUsU0FBUyxJQUFJO1FBQU07UUFDbkUsSUFBSSxDQUFDSixFQUFFLEdBQUdBO1FBQ1YsSUFBSSxDQUFDQyxTQUFTLEdBQUdBO0lBQ3JCO0lBQ0FJLGdCQUFnQkMsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLFFBQVEsRUFBRTtRQUN2QyxNQUFNTixVQUFVLElBQUksQ0FBQ0EsT0FBTyxJQUFJLENBQUM7UUFDakMsTUFBTU8sVUFBVSxPQUFPUCxRQUFRTyxPQUFPLEtBQUssWUFBWVAsUUFBUU8sT0FBTyxHQUFHO1FBQ3pFLE1BQU1DLFVBQVU7WUFDWkMsUUFBUSxJQUFJLENBQUNYLEVBQUUsQ0FBQ1ksVUFBVTtZQUMxQlgsV0FBVyxJQUFJLENBQUNBLFNBQVM7WUFDekJRO1FBQ0o7UUFD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QVNMLFdBQVc7Z0JBQ2hCc0IsY0FBY0MsQ0FBQUEsY0FBY0MsTUFBTSxNQUFLO2dCQUN2Q21CLGVBQWV6QixJQUFJeUIsYUFBYTtnQkFDaENDLGFBQWExQixJQUFJMEIsV0FBVztZQUNoQztRQUNKO0lBQ0o7QUFDSjtBQUNBN0QsMkJBQTJCLEdBQUdFO0FBQzdCLElBQUdTLFlBQVltRCxhQUFhLEVBQUUxRCxpQkFBaUI7SUFBQ08sWUFBWW9ELE1BQU0sQ0FBQ0MsU0FBUztJQUFFckQsWUFBWW9ELE1BQU0sQ0FBQ0UsZUFBZTtDQUFDO0FBQ2pILElBQUd0RCxZQUFZbUQsYUFBYSxFQUFFM0Qsb0JBQW9CO0lBQUNRLFlBQVlvRCxNQUFNLENBQUNDLFNBQVM7SUFBRXJELFlBQVlvRCxNQUFNLENBQUNFLGVBQWU7Q0FBQztBQUNwSCxJQUFHdEQsWUFBWW1ELGFBQWEsRUFBRTVELHFCQUFxQjtJQUFDUyxZQUFZb0QsTUFBTSxDQUFDRSxlQUFlO0NBQUMsR0FDeEYsa0NBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvaW5zZXJ0LmpzPzc1ZmEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkluc2VydE1hbnlPcGVyYXRpb24gPSBleHBvcnRzLkluc2VydE9uZU9wZXJhdGlvbiA9IGV4cG9ydHMuSW5zZXJ0T3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IHdyaXRlX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuLi93cml0ZV9jb25jZXJuXCIpO1xuY29uc3QgYnVsa193cml0ZV8xID0gcmVxdWlyZShcIi4vYnVsa193cml0ZVwiKTtcbmNvbnN0IGNvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRcIik7XG5jb25zdCBjb21tb25fZnVuY3Rpb25zXzEgPSByZXF1aXJlKFwiLi9jb21tb25fZnVuY3Rpb25zXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBJbnNlcnRPcGVyYXRpb24gZXh0ZW5kcyBjb21tYW5kXzEuQ29tbWFuZENhbGxiYWNrT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihucywgZG9jdW1lbnRzLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKHVuZGVmaW5lZCwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHsgLi4ub3B0aW9ucywgY2hlY2tLZXlzOiBvcHRpb25zLmNoZWNrS2V5cyA/PyBmYWxzZSB9O1xuICAgICAgICB0aGlzLm5zID0gbnM7XG4gICAgICAgIHRoaXMuZG9jdW1lbnRzID0gZG9jdW1lbnRzO1xuICAgIH1cbiAgICBleGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zID8/IHt9O1xuICAgICAgICBjb25zdCBvcmRlcmVkID0gdHlwZW9mIG9wdGlvbnMub3JkZXJlZCA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5vcmRlcmVkIDogdHJ1ZTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHtcbiAgICAgICAgICAgIGluc2VydDogdGhpcy5ucy5jb2xsZWN0aW9uLFxuICAgICAgICAgICAgZG9jdW1lbnRzOiB0aGlzLmRvY3VtZW50cyxcbiAgICAgICAgICAgIG9yZGVyZWRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmJ5cGFzc0RvY3VtZW50VmFsaWRhdGlvbiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICBjb21tYW5kLmJ5cGFzc0RvY3VtZW50VmFsaWRhdGlvbiA9IG9wdGlvbnMuYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIC8vIHdlIGNoZWNrIGZvciB1bmRlZmluZWQgc3BlY2lmaWNhbGx5IGhlcmUgdG8gYWxsb3cgZmFsc3kgdmFsdWVzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICBpZiAob3B0aW9ucy5jb21tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuY29tbWVudCA9IG9wdGlvbnMuY29tbWVudDtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5leGVjdXRlQ29tbWFuZENhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY29tbWFuZCwgY2FsbGJhY2spO1xuICAgIH1cbn1cbmV4cG9ydHMuSW5zZXJ0T3BlcmF0aW9uID0gSW5zZXJ0T3BlcmF0aW9uO1xuY2xhc3MgSW5zZXJ0T25lT3BlcmF0aW9uIGV4dGVuZHMgSW5zZXJ0T3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBkb2MsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoY29sbGVjdGlvbi5zLm5hbWVzcGFjZSwgKDAsIGNvbW1vbl9mdW5jdGlvbnNfMS5wcmVwYXJlRG9jcykoY29sbGVjdGlvbiwgW2RvY10sIG9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgc3VwZXIuZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgKGVyciwgcmVzKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyIHx8IHJlcyA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgaWYgKHJlcy5jb2RlKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yKHJlcykpO1xuICAgICAgICAgICAgaWYgKHJlcy53cml0ZUVycm9ycykge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIGJlIGEgV3JpdGVFcnJvciBidXQgd2UgY2FuJ3QgY2hhbmdlIGl0IG5vdyBiZWNhdXNlIG9mIGVycm9yIGhpZXJhcmNoeVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yKHJlcy53cml0ZUVycm9yc1swXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCB7XG4gICAgICAgICAgICAgICAgYWNrbm93bGVkZ2VkOiB0aGlzLndyaXRlQ29uY2Vybj8udyAhPT0gMCA/PyB0cnVlLFxuICAgICAgICAgICAgICAgIGluc2VydGVkSWQ6IHRoaXMuZG9jdW1lbnRzWzBdLl9pZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuSW5zZXJ0T25lT3BlcmF0aW9uID0gSW5zZXJ0T25lT3BlcmF0aW9uO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgSW5zZXJ0TWFueU9wZXJhdGlvbiBleHRlbmRzIG9wZXJhdGlvbl8xLkFic3RyYWN0Q2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIGRvY3MsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShkb2NzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignQXJndW1lbnQgXCJkb2NzXCIgbXVzdCBiZSBhbiBhcnJheSBvZiBkb2N1bWVudHMnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLmRvY3MgPSBkb2NzO1xuICAgIH1cbiAgICBleGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBjb2xsID0gdGhpcy5jb2xsZWN0aW9uO1xuICAgICAgICBjb25zdCBvcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMsIC4uLnRoaXMuYnNvbk9wdGlvbnMsIHJlYWRQcmVmZXJlbmNlOiB0aGlzLnJlYWRQcmVmZXJlbmNlIH07XG4gICAgICAgIGNvbnN0IHdyaXRlQ29uY2VybiA9IHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGJ1bGtXcml0ZU9wZXJhdGlvbiA9IG5ldyBidWxrX3dyaXRlXzEuQnVsa1dyaXRlT3BlcmF0aW9uKGNvbGwsICgwLCBjb21tb25fZnVuY3Rpb25zXzEucHJlcGFyZURvY3MpKGNvbGwsIHRoaXMuZG9jcywgb3B0aW9ucykubWFwKGRvY3VtZW50ID0+ICh7IGluc2VydE9uZTogeyBkb2N1bWVudCB9IH0pKSwgb3B0aW9ucyk7XG4gICAgICAgIGJ1bGtXcml0ZU9wZXJhdGlvbi5leGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCAoZXJyLCByZXMpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIgfHwgcmVzID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyICYmIGVyci5tZXNzYWdlID09PSAnT3BlcmF0aW9uIG11c3QgYmUgYW4gb2JqZWN0IHdpdGggYW4gb3BlcmF0aW9uIGtleScpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyID0gbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignQ29sbGVjdGlvbi5pbnNlcnRNYW55KCkgY2Fubm90IGJlIGNhbGxlZCB3aXRoIGFuIGFycmF5IHRoYXQgaGFzIG51bGwvdW5kZWZpbmVkIHZhbHVlcycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwge1xuICAgICAgICAgICAgICAgIGFja25vd2xlZGdlZDogd3JpdGVDb25jZXJuPy53ICE9PSAwID8/IHRydWUsXG4gICAgICAgICAgICAgICAgaW5zZXJ0ZWRDb3VudDogcmVzLmluc2VydGVkQ291bnQsXG4gICAgICAgICAgICAgICAgaW5zZXJ0ZWRJZHM6IHJlcy5pbnNlcnRlZElkc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuSW5zZXJ0TWFueU9wZXJhdGlvbiA9IEluc2VydE1hbnlPcGVyYXRpb247XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoSW5zZXJ0T3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LlJFVFJZQUJMRSwgb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKEluc2VydE9uZU9wZXJhdGlvbiwgW29wZXJhdGlvbl8xLkFzcGVjdC5SRVRSWUFCTEUsIG9wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT05dKTtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShJbnNlcnRNYW55T3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5zZXJ0LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkluc2VydE1hbnlPcGVyYXRpb24iLCJJbnNlcnRPbmVPcGVyYXRpb24iLCJJbnNlcnRPcGVyYXRpb24iLCJlcnJvcl8xIiwicmVxdWlyZSIsIndyaXRlX2NvbmNlcm5fMSIsImJ1bGtfd3JpdGVfMSIsImNvbW1hbmRfMSIsImNvbW1vbl9mdW5jdGlvbnNfMSIsIm9wZXJhdGlvbl8xIiwiQ29tbWFuZENhbGxiYWNrT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJucyIsImRvY3VtZW50cyIsIm9wdGlvbnMiLCJ1bmRlZmluZWQiLCJjaGVja0tleXMiLCJleGVjdXRlQ2FsbGJhY2siLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJvcmRlcmVkIiwiY29tbWFuZCIsImluc2VydCIsImNvbGxlY3Rpb24iLCJieXBhc3NEb2N1bWVudFZhbGlkYXRpb24iLCJjb21tZW50IiwiZXhlY3V0ZUNvbW1hbmRDYWxsYmFjayIsImRvYyIsInMiLCJuYW1lc3BhY2UiLCJwcmVwYXJlRG9jcyIsImVyciIsInJlcyIsImNvZGUiLCJNb25nb1NlcnZlckVycm9yIiwid3JpdGVFcnJvcnMiLCJhY2tub3dsZWRnZWQiLCJ3cml0ZUNvbmNlcm4iLCJ3IiwiaW5zZXJ0ZWRJZCIsIl9pZCIsIkFic3RyYWN0Q2FsbGJhY2tPcGVyYXRpb24iLCJkb2NzIiwiQXJyYXkiLCJpc0FycmF5IiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsImNvbGwiLCJic29uT3B0aW9ucyIsInJlYWRQcmVmZXJlbmNlIiwiV3JpdGVDb25jZXJuIiwiZnJvbU9wdGlvbnMiLCJidWxrV3JpdGVPcGVyYXRpb24iLCJCdWxrV3JpdGVPcGVyYXRpb24iLCJtYXAiLCJkb2N1bWVudCIsImluc2VydE9uZSIsIm1lc3NhZ2UiLCJpbnNlcnRlZENvdW50IiwiaW5zZXJ0ZWRJZHMiLCJkZWZpbmVBc3BlY3RzIiwiQXNwZWN0IiwiUkVUUllBQkxFIiwiV1JJVEVfT1BFUkFUSU9OIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/insert.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/is_capped.js":
/*!**********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/is_capped.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.IsCappedOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class IsCappedOperation extends operation_1.AbstractCallbackOperation {\n    constructor(collection, options){\n        super(options);\n        this.options = options;\n        this.collection = collection;\n    }\n    executeCallback(server, session, callback) {\n        const coll = this.collection;\n        coll.s.db.listCollections({\n            name: coll.collectionName\n        }, {\n            ...this.options,\n            nameOnly: false,\n            readPreference: this.readPreference,\n            session\n        }).toArray().then((collections)=>{\n            if (collections.length === 0) {\n                // TODO(NODE-3485)\n                return callback(new error_1.MongoAPIError(`collection ${coll.namespace} not found`));\n            }\n            callback(undefined, !!collections[0].options?.capped);\n        }, (error)=>callback(error));\n    }\n}\nexports.IsCappedOperation = IsCappedOperation; //# sourceMappingURL=is_capped.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9pc19jYXBwZWQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHlCQUF5QixHQUFHLEtBQUs7QUFDakMsTUFBTUcsVUFBVUMsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUMsY0FBY0QsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsY0FBYyxHQUNkLE1BQU1GLDBCQUEwQkcsWUFBWUMseUJBQXlCO0lBQ2pFQyxZQUFZQyxVQUFVLEVBQUVDLE9BQU8sQ0FBRTtRQUM3QixLQUFLLENBQUNBO1FBQ04sSUFBSSxDQUFDQSxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDRCxVQUFVLEdBQUdBO0lBQ3RCO0lBQ0FFLGdCQUFnQkMsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLFFBQVEsRUFBRTtRQUN2QyxNQUFNQyxPQUFPLElBQUksQ0FBQ04sVUFBVTtRQUM1Qk0sS0FBS0MsQ0FBQyxDQUFDQyxFQUFFLENBQ0pDLGVBQWUsQ0FBQztZQUFFQyxNQUFNSixLQUFLSyxjQUFjO1FBQUMsR0FBRztZQUFFLEdBQUcsSUFBSSxDQUFDVixPQUFPO1lBQUVXLFVBQVU7WUFBT0MsZ0JBQWdCLElBQUksQ0FBQ0EsY0FBYztZQUFFVDtRQUFRLEdBQ2hJVSxPQUFPLEdBQ1BDLElBQUksQ0FBQ0MsQ0FBQUE7WUFDTixJQUFJQSxZQUFZQyxNQUFNLEtBQUssR0FBRztnQkFDMUIsa0JBQWtCO2dCQUNsQixPQUFPWixTQUFTLElBQUlWLFFBQVF1QixhQUFhLENBQUMsQ0FBQyxXQUFXLEVBQUVaLEtBQUthLFNBQVMsQ0FBQyxVQUFVLENBQUM7WUFDdEY7WUFDQWQsU0FBU2UsV0FBVyxDQUFDLENBQUNKLFdBQVcsQ0FBQyxFQUFFLENBQUNmLE9BQU8sRUFBRW9CO1FBQ2xELEdBQUdDLENBQUFBLFFBQVNqQixTQUFTaUI7SUFDekI7QUFDSjtBQUNBOUIseUJBQXlCLEdBQUdFLG1CQUM1QixxQ0FBcUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9pc19jYXBwZWQuanM/ZjA2ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuSXNDYXBwZWRPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBJc0NhcHBlZE9wZXJhdGlvbiBleHRlbmRzIG9wZXJhdGlvbl8xLkFic3RyYWN0Q2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IGNvbGxlY3Rpb247XG4gICAgfVxuICAgIGV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGNvbGwgPSB0aGlzLmNvbGxlY3Rpb247XG4gICAgICAgIGNvbGwucy5kYlxuICAgICAgICAgICAgLmxpc3RDb2xsZWN0aW9ucyh7IG5hbWU6IGNvbGwuY29sbGVjdGlvbk5hbWUgfSwgeyAuLi50aGlzLm9wdGlvbnMsIG5hbWVPbmx5OiBmYWxzZSwgcmVhZFByZWZlcmVuY2U6IHRoaXMucmVhZFByZWZlcmVuY2UsIHNlc3Npb24gfSlcbiAgICAgICAgICAgIC50b0FycmF5KClcbiAgICAgICAgICAgIC50aGVuKGNvbGxlY3Rpb25zID0+IHtcbiAgICAgICAgICAgIGlmIChjb2xsZWN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4NSlcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcihgY29sbGVjdGlvbiAke2NvbGwubmFtZXNwYWNlfSBub3QgZm91bmRgKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsICEhY29sbGVjdGlvbnNbMF0ub3B0aW9ucz8uY2FwcGVkKTtcbiAgICAgICAgfSwgZXJyb3IgPT4gY2FsbGJhY2soZXJyb3IpKTtcbiAgICB9XG59XG5leHBvcnRzLklzQ2FwcGVkT3BlcmF0aW9uID0gSXNDYXBwZWRPcGVyYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc19jYXBwZWQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiSXNDYXBwZWRPcGVyYXRpb24iLCJlcnJvcl8xIiwicmVxdWlyZSIsIm9wZXJhdGlvbl8xIiwiQWJzdHJhY3RDYWxsYmFja09wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwiY29sbGVjdGlvbiIsIm9wdGlvbnMiLCJleGVjdXRlQ2FsbGJhY2siLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJjb2xsIiwicyIsImRiIiwibGlzdENvbGxlY3Rpb25zIiwibmFtZSIsImNvbGxlY3Rpb25OYW1lIiwibmFtZU9ubHkiLCJyZWFkUHJlZmVyZW5jZSIsInRvQXJyYXkiLCJ0aGVuIiwiY29sbGVjdGlvbnMiLCJsZW5ndGgiLCJNb25nb0FQSUVycm9yIiwibmFtZXNwYWNlIiwidW5kZWZpbmVkIiwiY2FwcGVkIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/is_capped.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/kill_cursors.js":
/*!*************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/kill_cursors.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.KillCursorsOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\nclass KillCursorsOperation extends operation_1.AbstractCallbackOperation {\n    constructor(cursorId, ns, server, options){\n        super(options);\n        this.ns = ns;\n        this.cursorId = cursorId;\n        this.server = server;\n    }\n    executeCallback(server, session, callback) {\n        if (server !== this.server) {\n            return callback(new error_1.MongoRuntimeError(\"Killcursor must run on the same server operation began on\"));\n        }\n        const killCursors = this.ns.collection;\n        if (killCursors == null) {\n            // Cursors should have adopted the namespace returned by MongoDB\n            // which should always defined a collection name (even a pseudo one, ex. db.aggregate())\n            return callback(new error_1.MongoRuntimeError(\"A collection name must be determined before killCursors\"));\n        }\n        const killCursorsCommand = {\n            killCursors,\n            cursors: [\n                this.cursorId\n            ]\n        };\n        server.command(this.ns, killCursorsCommand, {\n            session\n        }, ()=>callback());\n    }\n}\nexports.KillCursorsOperation = KillCursorsOperation;\n(0, operation_1.defineAspects)(KillCursorsOperation, [\n    operation_1.Aspect.MUST_SELECT_SAME_SERVER\n]); //# sourceMappingURL=kill_cursors.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9raWxsX2N1cnNvcnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDRCQUE0QixHQUFHLEtBQUs7QUFDcEMsTUFBTUcsVUFBVUMsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUMsY0FBY0QsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsTUFBTUYsNkJBQTZCRyxZQUFZQyx5QkFBeUI7SUFDcEVDLFlBQVlDLFFBQVEsRUFBRUMsRUFBRSxFQUFFQyxNQUFNLEVBQUVDLE9BQU8sQ0FBRTtRQUN2QyxLQUFLLENBQUNBO1FBQ04sSUFBSSxDQUFDRixFQUFFLEdBQUdBO1FBQ1YsSUFBSSxDQUFDRCxRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0UsTUFBTSxHQUFHQTtJQUNsQjtJQUNBRSxnQkFBZ0JGLE1BQU0sRUFBRUcsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDdkMsSUFBSUosV0FBVyxJQUFJLENBQUNBLE1BQU0sRUFBRTtZQUN4QixPQUFPSSxTQUFTLElBQUlYLFFBQVFZLGlCQUFpQixDQUFDO1FBQ2xEO1FBQ0EsTUFBTUMsY0FBYyxJQUFJLENBQUNQLEVBQUUsQ0FBQ1EsVUFBVTtRQUN0QyxJQUFJRCxlQUFlLE1BQU07WUFDckIsZ0VBQWdFO1lBQ2hFLHdGQUF3RjtZQUN4RixPQUFPRixTQUFTLElBQUlYLFFBQVFZLGlCQUFpQixDQUFDO1FBQ2xEO1FBQ0EsTUFBTUcscUJBQXFCO1lBQ3ZCRjtZQUNBRyxTQUFTO2dCQUFDLElBQUksQ0FBQ1gsUUFBUTthQUFDO1FBQzVCO1FBQ0FFLE9BQU9VLE9BQU8sQ0FBQyxJQUFJLENBQUNYLEVBQUUsRUFBRVMsb0JBQW9CO1lBQUVMO1FBQVEsR0FBRyxJQUFNQztJQUNuRTtBQUNKO0FBQ0FkLDRCQUE0QixHQUFHRTtBQUM5QixJQUFHRyxZQUFZZ0IsYUFBYSxFQUFFbkIsc0JBQXNCO0lBQUNHLFlBQVlpQixNQUFNLENBQUNDLHVCQUF1QjtDQUFDLEdBQ2pHLHdDQUF3QyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL2tpbGxfY3Vyc29ycy5qcz84YmM1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5LaWxsQ3Vyc29yc09wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbmNsYXNzIEtpbGxDdXJzb3JzT3BlcmF0aW9uIGV4dGVuZHMgb3BlcmF0aW9uXzEuQWJzdHJhY3RDYWxsYmFja09wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY3Vyc29ySWQsIG5zLCBzZXJ2ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMubnMgPSBucztcbiAgICAgICAgdGhpcy5jdXJzb3JJZCA9IGN1cnNvcklkO1xuICAgICAgICB0aGlzLnNlcnZlciA9IHNlcnZlcjtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHNlcnZlciAhPT0gdGhpcy5zZXJ2ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignS2lsbGN1cnNvciBtdXN0IHJ1biBvbiB0aGUgc2FtZSBzZXJ2ZXIgb3BlcmF0aW9uIGJlZ2FuIG9uJykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtpbGxDdXJzb3JzID0gdGhpcy5ucy5jb2xsZWN0aW9uO1xuICAgICAgICBpZiAoa2lsbEN1cnNvcnMgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gQ3Vyc29ycyBzaG91bGQgaGF2ZSBhZG9wdGVkIHRoZSBuYW1lc3BhY2UgcmV0dXJuZWQgYnkgTW9uZ29EQlxuICAgICAgICAgICAgLy8gd2hpY2ggc2hvdWxkIGFsd2F5cyBkZWZpbmVkIGEgY29sbGVjdGlvbiBuYW1lIChldmVuIGEgcHNldWRvIG9uZSwgZXguIGRiLmFnZ3JlZ2F0ZSgpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdBIGNvbGxlY3Rpb24gbmFtZSBtdXN0IGJlIGRldGVybWluZWQgYmVmb3JlIGtpbGxDdXJzb3JzJykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtpbGxDdXJzb3JzQ29tbWFuZCA9IHtcbiAgICAgICAgICAgIGtpbGxDdXJzb3JzLFxuICAgICAgICAgICAgY3Vyc29yczogW3RoaXMuY3Vyc29ySWRdXG4gICAgICAgIH07XG4gICAgICAgIHNlcnZlci5jb21tYW5kKHRoaXMubnMsIGtpbGxDdXJzb3JzQ29tbWFuZCwgeyBzZXNzaW9uIH0sICgpID0+IGNhbGxiYWNrKCkpO1xuICAgIH1cbn1cbmV4cG9ydHMuS2lsbEN1cnNvcnNPcGVyYXRpb24gPSBLaWxsQ3Vyc29yc09wZXJhdGlvbjtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShLaWxsQ3Vyc29yc09wZXJhdGlvbiwgW29wZXJhdGlvbl8xLkFzcGVjdC5NVVNUX1NFTEVDVF9TQU1FX1NFUlZFUl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a2lsbF9jdXJzb3JzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIktpbGxDdXJzb3JzT3BlcmF0aW9uIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJvcGVyYXRpb25fMSIsIkFic3RyYWN0Q2FsbGJhY2tPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImN1cnNvcklkIiwibnMiLCJzZXJ2ZXIiLCJvcHRpb25zIiwiZXhlY3V0ZUNhbGxiYWNrIiwic2Vzc2lvbiIsImNhbGxiYWNrIiwiTW9uZ29SdW50aW1lRXJyb3IiLCJraWxsQ3Vyc29ycyIsImNvbGxlY3Rpb24iLCJraWxsQ3Vyc29yc0NvbW1hbmQiLCJjdXJzb3JzIiwiY29tbWFuZCIsImRlZmluZUFzcGVjdHMiLCJBc3BlY3QiLCJNVVNUX1NFTEVDVF9TQU1FX1NFUlZFUiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/kill_cursors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/list_collections.js":
/*!*****************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/list_collections.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ListCollectionsOperation = void 0;\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class ListCollectionsOperation extends command_1.CommandCallbackOperation {\n    constructor(db, filter, options){\n        super(db, options);\n        this.options = {\n            ...options\n        };\n        delete this.options.writeConcern;\n        this.db = db;\n        this.filter = filter;\n        this.nameOnly = !!this.options.nameOnly;\n        this.authorizedCollections = !!this.options.authorizedCollections;\n        if (typeof this.options.batchSize === \"number\") {\n            this.batchSize = this.options.batchSize;\n        }\n    }\n    executeCallback(server, session, callback) {\n        return super.executeCommandCallback(server, session, this.generateCommand((0, utils_1.maxWireVersion)(server)), callback);\n    }\n    /* This is here for the purpose of unit testing the final command that gets sent. */ generateCommand(wireVersion) {\n        const command = {\n            listCollections: 1,\n            filter: this.filter,\n            cursor: this.batchSize ? {\n                batchSize: this.batchSize\n            } : {},\n            nameOnly: this.nameOnly,\n            authorizedCollections: this.authorizedCollections\n        };\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (wireVersion >= 9 && this.options.comment !== undefined) {\n            command.comment = this.options.comment;\n        }\n        return command;\n    }\n}\nexports.ListCollectionsOperation = ListCollectionsOperation;\n(0, operation_1.defineAspects)(ListCollectionsOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.CURSOR_CREATING\n]); //# sourceMappingURL=list_collections.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9saXN0X2NvbGxlY3Rpb25zLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxnQ0FBZ0MsR0FBRyxLQUFLO0FBQ3hDLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1DLFlBQVlELG1CQUFPQSxDQUFDLHlFQUFXO0FBQ3JDLE1BQU1FLGNBQWNGLG1CQUFPQSxDQUFDLDZFQUFhO0FBQ3pDLGNBQWMsR0FDZCxNQUFNRixpQ0FBaUNHLFVBQVVFLHdCQUF3QjtJQUNyRUMsWUFBWUMsRUFBRSxFQUFFQyxNQUFNLEVBQUVDLE9BQU8sQ0FBRTtRQUM3QixLQUFLLENBQUNGLElBQUlFO1FBQ1YsSUFBSSxDQUFDQSxPQUFPLEdBQUc7WUFBRSxHQUFHQSxPQUFPO1FBQUM7UUFDNUIsT0FBTyxJQUFJLENBQUNBLE9BQU8sQ0FBQ0MsWUFBWTtRQUNoQyxJQUFJLENBQUNILEVBQUUsR0FBR0E7UUFDVixJQUFJLENBQUNDLE1BQU0sR0FBR0E7UUFDZCxJQUFJLENBQUNHLFFBQVEsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDRixPQUFPLENBQUNFLFFBQVE7UUFDdkMsSUFBSSxDQUFDQyxxQkFBcUIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDSCxPQUFPLENBQUNHLHFCQUFxQjtRQUNqRSxJQUFJLE9BQU8sSUFBSSxDQUFDSCxPQUFPLENBQUNJLFNBQVMsS0FBSyxVQUFVO1lBQzVDLElBQUksQ0FBQ0EsU0FBUyxHQUFHLElBQUksQ0FBQ0osT0FBTyxDQUFDSSxTQUFTO1FBQzNDO0lBQ0o7SUFDQUMsZ0JBQWdCQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFO1FBQ3ZDLE9BQU8sS0FBSyxDQUFDQyx1QkFBdUJILFFBQVFDLFNBQVMsSUFBSSxDQUFDRyxlQUFlLENBQUMsQ0FBQyxHQUFHbEIsUUFBUW1CLGNBQWMsRUFBRUwsVUFBVUU7SUFDcEg7SUFDQSxrRkFBa0YsR0FDbEZFLGdCQUFnQkUsV0FBVyxFQUFFO1FBQ3pCLE1BQU1DLFVBQVU7WUFDWkMsaUJBQWlCO1lBQ2pCZixRQUFRLElBQUksQ0FBQ0EsTUFBTTtZQUNuQmdCLFFBQVEsSUFBSSxDQUFDWCxTQUFTLEdBQUc7Z0JBQUVBLFdBQVcsSUFBSSxDQUFDQSxTQUFTO1lBQUMsSUFBSSxDQUFDO1lBQzFERixVQUFVLElBQUksQ0FBQ0EsUUFBUTtZQUN2QkMsdUJBQXVCLElBQUksQ0FBQ0EscUJBQXFCO1FBQ3JEO1FBQ0EsaUVBQWlFO1FBQ2pFLGdEQUFnRDtRQUNoRCxJQUFJUyxlQUFlLEtBQUssSUFBSSxDQUFDWixPQUFPLENBQUNnQixPQUFPLEtBQUtDLFdBQVc7WUFDeERKLFFBQVFHLE9BQU8sR0FBRyxJQUFJLENBQUNoQixPQUFPLENBQUNnQixPQUFPO1FBQzFDO1FBQ0EsT0FBT0g7SUFDWDtBQUNKO0FBQ0F4QixnQ0FBZ0MsR0FBR0U7QUFDbEMsSUFBR0ksWUFBWXVCLGFBQWEsRUFBRTNCLDBCQUEwQjtJQUNyREksWUFBWXdCLE1BQU0sQ0FBQ0MsY0FBYztJQUNqQ3pCLFlBQVl3QixNQUFNLENBQUNFLFNBQVM7SUFDNUIxQixZQUFZd0IsTUFBTSxDQUFDRyxlQUFlO0NBQ3JDLEdBQ0QsNENBQTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvbGlzdF9jb2xsZWN0aW9ucy5qcz8wMjJkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5MaXN0Q29sbGVjdGlvbnNPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgY29tbWFuZF8xID0gcmVxdWlyZShcIi4vY29tbWFuZFwiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgTGlzdENvbGxlY3Rpb25zT3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRDYWxsYmFja09wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZGIsIGZpbHRlciwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihkYiwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHsgLi4ub3B0aW9ucyB9O1xuICAgICAgICBkZWxldGUgdGhpcy5vcHRpb25zLndyaXRlQ29uY2VybjtcbiAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICB0aGlzLmZpbHRlciA9IGZpbHRlcjtcbiAgICAgICAgdGhpcy5uYW1lT25seSA9ICEhdGhpcy5vcHRpb25zLm5hbWVPbmx5O1xuICAgICAgICB0aGlzLmF1dGhvcml6ZWRDb2xsZWN0aW9ucyA9ICEhdGhpcy5vcHRpb25zLmF1dGhvcml6ZWRDb2xsZWN0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuYmF0Y2hTaXplID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhpcy5iYXRjaFNpemUgPSB0aGlzLm9wdGlvbnMuYmF0Y2hTaXplO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5leGVjdXRlQ29tbWFuZENhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgdGhpcy5nZW5lcmF0ZUNvbW1hbmQoKDAsIHV0aWxzXzEubWF4V2lyZVZlcnNpb24pKHNlcnZlcikpLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qIFRoaXMgaXMgaGVyZSBmb3IgdGhlIHB1cnBvc2Ugb2YgdW5pdCB0ZXN0aW5nIHRoZSBmaW5hbCBjb21tYW5kIHRoYXQgZ2V0cyBzZW50LiAqL1xuICAgIGdlbmVyYXRlQ29tbWFuZCh3aXJlVmVyc2lvbikge1xuICAgICAgICBjb25zdCBjb21tYW5kID0ge1xuICAgICAgICAgICAgbGlzdENvbGxlY3Rpb25zOiAxLFxuICAgICAgICAgICAgZmlsdGVyOiB0aGlzLmZpbHRlcixcbiAgICAgICAgICAgIGN1cnNvcjogdGhpcy5iYXRjaFNpemUgPyB7IGJhdGNoU2l6ZTogdGhpcy5iYXRjaFNpemUgfSA6IHt9LFxuICAgICAgICAgICAgbmFtZU9ubHk6IHRoaXMubmFtZU9ubHksXG4gICAgICAgICAgICBhdXRob3JpemVkQ29sbGVjdGlvbnM6IHRoaXMuYXV0aG9yaXplZENvbGxlY3Rpb25zXG4gICAgICAgIH07XG4gICAgICAgIC8vIHdlIGNoZWNrIGZvciB1bmRlZmluZWQgc3BlY2lmaWNhbGx5IGhlcmUgdG8gYWxsb3cgZmFsc3kgdmFsdWVzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICBpZiAod2lyZVZlcnNpb24gPj0gOSAmJiB0aGlzLm9wdGlvbnMuY29tbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb21tYW5kLmNvbW1lbnQgPSB0aGlzLm9wdGlvbnMuY29tbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tbWFuZDtcbiAgICB9XG59XG5leHBvcnRzLkxpc3RDb2xsZWN0aW9uc09wZXJhdGlvbiA9IExpc3RDb2xsZWN0aW9uc09wZXJhdGlvbjtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShMaXN0Q29sbGVjdGlvbnNPcGVyYXRpb24sIFtcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuUkVBRF9PUEVSQVRJT04sXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LlJFVFJZQUJMRSxcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuQ1VSU09SX0NSRUFUSU5HXG5dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpc3RfY29sbGVjdGlvbnMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiTGlzdENvbGxlY3Rpb25zT3BlcmF0aW9uIiwidXRpbHNfMSIsInJlcXVpcmUiLCJjb21tYW5kXzEiLCJvcGVyYXRpb25fMSIsIkNvbW1hbmRDYWxsYmFja09wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwiZGIiLCJmaWx0ZXIiLCJvcHRpb25zIiwid3JpdGVDb25jZXJuIiwibmFtZU9ubHkiLCJhdXRob3JpemVkQ29sbGVjdGlvbnMiLCJiYXRjaFNpemUiLCJleGVjdXRlQ2FsbGJhY2siLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJleGVjdXRlQ29tbWFuZENhbGxiYWNrIiwiZ2VuZXJhdGVDb21tYW5kIiwibWF4V2lyZVZlcnNpb24iLCJ3aXJlVmVyc2lvbiIsImNvbW1hbmQiLCJsaXN0Q29sbGVjdGlvbnMiLCJjdXJzb3IiLCJjb21tZW50IiwidW5kZWZpbmVkIiwiZGVmaW5lQXNwZWN0cyIsIkFzcGVjdCIsIlJFQURfT1BFUkFUSU9OIiwiUkVUUllBQkxFIiwiQ1VSU09SX0NSRUFUSU5HIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/list_collections.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/list_databases.js":
/*!***************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/list_databases.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ListDatabasesOperation = void 0;\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class ListDatabasesOperation extends command_1.CommandCallbackOperation {\n    constructor(db, options){\n        super(db, options);\n        this.options = options ?? {};\n        this.ns = new utils_1.MongoDBNamespace(\"admin\", \"$cmd\");\n    }\n    executeCallback(server, session, callback) {\n        const cmd = {\n            listDatabases: 1\n        };\n        if (typeof this.options.nameOnly === \"boolean\") {\n            cmd.nameOnly = this.options.nameOnly;\n        }\n        if (this.options.filter) {\n            cmd.filter = this.options.filter;\n        }\n        if (typeof this.options.authorizedDatabases === \"boolean\") {\n            cmd.authorizedDatabases = this.options.authorizedDatabases;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if ((0, utils_1.maxWireVersion)(server) >= 9 && this.options.comment !== undefined) {\n            cmd.comment = this.options.comment;\n        }\n        super.executeCommandCallback(server, session, cmd, callback);\n    }\n}\nexports.ListDatabasesOperation = ListDatabasesOperation;\n(0, operation_1.defineAspects)(ListDatabasesOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE\n]); //# sourceMappingURL=list_databases.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9saXN0X2RhdGFiYXNlcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsOEJBQThCLEdBQUcsS0FBSztBQUN0QyxNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxZQUFZRCxtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNRSxjQUFjRixtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYsK0JBQStCRyxVQUFVRSx3QkFBd0I7SUFDbkVDLFlBQVlDLEVBQUUsRUFBRUMsT0FBTyxDQUFFO1FBQ3JCLEtBQUssQ0FBQ0QsSUFBSUM7UUFDVixJQUFJLENBQUNBLE9BQU8sR0FBR0EsV0FBVyxDQUFDO1FBQzNCLElBQUksQ0FBQ0MsRUFBRSxHQUFHLElBQUlSLFFBQVFTLGdCQUFnQixDQUFDLFNBQVM7SUFDcEQ7SUFDQUMsZ0JBQWdCQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFO1FBQ3ZDLE1BQU1DLE1BQU07WUFBRUMsZUFBZTtRQUFFO1FBQy9CLElBQUksT0FBTyxJQUFJLENBQUNSLE9BQU8sQ0FBQ1MsUUFBUSxLQUFLLFdBQVc7WUFDNUNGLElBQUlFLFFBQVEsR0FBRyxJQUFJLENBQUNULE9BQU8sQ0FBQ1MsUUFBUTtRQUN4QztRQUNBLElBQUksSUFBSSxDQUFDVCxPQUFPLENBQUNVLE1BQU0sRUFBRTtZQUNyQkgsSUFBSUcsTUFBTSxHQUFHLElBQUksQ0FBQ1YsT0FBTyxDQUFDVSxNQUFNO1FBQ3BDO1FBQ0EsSUFBSSxPQUFPLElBQUksQ0FBQ1YsT0FBTyxDQUFDVyxtQkFBbUIsS0FBSyxXQUFXO1lBQ3ZESixJQUFJSSxtQkFBbUIsR0FBRyxJQUFJLENBQUNYLE9BQU8sQ0FBQ1csbUJBQW1CO1FBQzlEO1FBQ0EsaUVBQWlFO1FBQ2pFLGdEQUFnRDtRQUNoRCxJQUFJLENBQUMsR0FBR2xCLFFBQVFtQixjQUFjLEVBQUVSLFdBQVcsS0FBSyxJQUFJLENBQUNKLE9BQU8sQ0FBQ2EsT0FBTyxLQUFLQyxXQUFXO1lBQ2hGUCxJQUFJTSxPQUFPLEdBQUcsSUFBSSxDQUFDYixPQUFPLENBQUNhLE9BQU87UUFDdEM7UUFDQSxLQUFLLENBQUNFLHVCQUF1QlgsUUFBUUMsU0FBU0UsS0FBS0Q7SUFDdkQ7QUFDSjtBQUNBaEIsOEJBQThCLEdBQUdFO0FBQ2hDLElBQUdJLFlBQVlvQixhQUFhLEVBQUV4Qix3QkFBd0I7SUFBQ0ksWUFBWXFCLE1BQU0sQ0FBQ0MsY0FBYztJQUFFdEIsWUFBWXFCLE1BQU0sQ0FBQ0UsU0FBUztDQUFDLEdBQ3hILDBDQUEwQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL2xpc3RfZGF0YWJhc2VzLmpzPzMwZjciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkxpc3REYXRhYmFzZXNPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgY29tbWFuZF8xID0gcmVxdWlyZShcIi4vY29tbWFuZFwiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgTGlzdERhdGFiYXNlc09wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kQ2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGRiLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGRiLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgdGhpcy5ucyA9IG5ldyB1dGlsc18xLk1vbmdvREJOYW1lc3BhY2UoJ2FkbWluJywgJyRjbWQnKTtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgY21kID0geyBsaXN0RGF0YWJhc2VzOiAxIH07XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm5hbWVPbmx5ID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIGNtZC5uYW1lT25seSA9IHRoaXMub3B0aW9ucy5uYW1lT25seTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmZpbHRlcikge1xuICAgICAgICAgICAgY21kLmZpbHRlciA9IHRoaXMub3B0aW9ucy5maWx0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuYXV0aG9yaXplZERhdGFiYXNlcyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICBjbWQuYXV0aG9yaXplZERhdGFiYXNlcyA9IHRoaXMub3B0aW9ucy5hdXRob3JpemVkRGF0YWJhc2VzO1xuICAgICAgICB9XG4gICAgICAgIC8vIHdlIGNoZWNrIGZvciB1bmRlZmluZWQgc3BlY2lmaWNhbGx5IGhlcmUgdG8gYWxsb3cgZmFsc3kgdmFsdWVzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICBpZiAoKDAsIHV0aWxzXzEubWF4V2lyZVZlcnNpb24pKHNlcnZlcikgPj0gOSAmJiB0aGlzLm9wdGlvbnMuY29tbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjbWQuY29tbWVudCA9IHRoaXMub3B0aW9ucy5jb21tZW50O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmV4ZWN1dGVDb21tYW5kQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjbWQsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5leHBvcnRzLkxpc3REYXRhYmFzZXNPcGVyYXRpb24gPSBMaXN0RGF0YWJhc2VzT3BlcmF0aW9uO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKExpc3REYXRhYmFzZXNPcGVyYXRpb24sIFtvcGVyYXRpb25fMS5Bc3BlY3QuUkVBRF9PUEVSQVRJT04sIG9wZXJhdGlvbl8xLkFzcGVjdC5SRVRSWUFCTEVdKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpc3RfZGF0YWJhc2VzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkxpc3REYXRhYmFzZXNPcGVyYXRpb24iLCJ1dGlsc18xIiwicmVxdWlyZSIsImNvbW1hbmRfMSIsIm9wZXJhdGlvbl8xIiwiQ29tbWFuZENhbGxiYWNrT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJkYiIsIm9wdGlvbnMiLCJucyIsIk1vbmdvREJOYW1lc3BhY2UiLCJleGVjdXRlQ2FsbGJhY2siLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJjbWQiLCJsaXN0RGF0YWJhc2VzIiwibmFtZU9ubHkiLCJmaWx0ZXIiLCJhdXRob3JpemVkRGF0YWJhc2VzIiwibWF4V2lyZVZlcnNpb24iLCJjb21tZW50IiwidW5kZWZpbmVkIiwiZXhlY3V0ZUNvbW1hbmRDYWxsYmFjayIsImRlZmluZUFzcGVjdHMiLCJBc3BlY3QiLCJSRUFEX09QRVJBVElPTiIsIlJFVFJZQUJMRSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/list_databases.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/operation.js":
/*!**********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/operation.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.defineAspects = exports.AbstractCallbackOperation = exports.AbstractOperation = exports.Aspect = void 0;\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nexports.Aspect = {\n    READ_OPERATION: Symbol(\"READ_OPERATION\"),\n    WRITE_OPERATION: Symbol(\"WRITE_OPERATION\"),\n    RETRYABLE: Symbol(\"RETRYABLE\"),\n    EXPLAINABLE: Symbol(\"EXPLAINABLE\"),\n    SKIP_COLLATION: Symbol(\"SKIP_COLLATION\"),\n    CURSOR_CREATING: Symbol(\"CURSOR_CREATING\"),\n    MUST_SELECT_SAME_SERVER: Symbol(\"MUST_SELECT_SAME_SERVER\")\n};\n/** @internal */ const kSession = Symbol(\"session\");\n/**\n * This class acts as a parent class for any operation and is responsible for setting this.options,\n * as well as setting and getting a session.\n * Additionally, this class implements `hasAspect`, which determines whether an operation has\n * a specific aspect.\n * @internal\n */ class AbstractOperation {\n    constructor(options = {}){\n        this.readPreference = this.hasAspect(exports.Aspect.WRITE_OPERATION) ? read_preference_1.ReadPreference.primary : read_preference_1.ReadPreference.fromOptions(options) ?? read_preference_1.ReadPreference.primary;\n        // Pull the BSON serialize options from the already-resolved options\n        this.bsonOptions = (0, bson_1.resolveBSONOptions)(options);\n        this[kSession] = options.session != null ? options.session : undefined;\n        this.options = options;\n        this.bypassPinningCheck = !!options.bypassPinningCheck;\n        this.trySecondaryWrite = false;\n    }\n    hasAspect(aspect) {\n        const ctor = this.constructor;\n        if (ctor.aspects == null) {\n            return false;\n        }\n        return ctor.aspects.has(aspect);\n    }\n    get session() {\n        return this[kSession];\n    }\n    clearSession() {\n        this[kSession] = undefined;\n    }\n    get canRetryRead() {\n        return true;\n    }\n    get canRetryWrite() {\n        return true;\n    }\n}\nexports.AbstractOperation = AbstractOperation;\n/** @internal */ class AbstractCallbackOperation extends AbstractOperation {\n    constructor(options = {}){\n        super(options);\n    }\n    execute(server, session) {\n        return (0, util_1.promisify)((callback)=>{\n            this.executeCallback(server, session, callback);\n        })();\n    }\n}\nexports.AbstractCallbackOperation = AbstractCallbackOperation;\nfunction defineAspects(operation, aspects) {\n    if (!Array.isArray(aspects) && !(aspects instanceof Set)) {\n        aspects = [\n            aspects\n        ];\n    }\n    aspects = new Set(aspects);\n    Object.defineProperty(operation, \"aspects\", {\n        value: aspects,\n        writable: false\n    });\n    return aspects;\n}\nexports.defineAspects = defineAspects; //# sourceMappingURL=operation.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9vcGVyYXRpb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHFCQUFxQixHQUFHQSxpQ0FBaUMsR0FBR0EseUJBQXlCLEdBQUdBLGNBQWMsR0FBRyxLQUFLO0FBQzlHLE1BQU1NLFNBQVNDLG1CQUFPQSxDQUFDLGtCQUFNO0FBQzdCLE1BQU1DLFNBQVNELG1CQUFPQSxDQUFDLHlEQUFTO0FBQ2hDLE1BQU1FLG9CQUFvQkYsbUJBQU9BLENBQUMsK0VBQW9CO0FBQ3REUCxjQUFjLEdBQUc7SUFDYlUsZ0JBQWdCQyxPQUFPO0lBQ3ZCQyxpQkFBaUJELE9BQU87SUFDeEJFLFdBQVdGLE9BQU87SUFDbEJHLGFBQWFILE9BQU87SUFDcEJJLGdCQUFnQkosT0FBTztJQUN2QkssaUJBQWlCTCxPQUFPO0lBQ3hCTSx5QkFBeUJOLE9BQU87QUFDcEM7QUFDQSxjQUFjLEdBQ2QsTUFBTU8sV0FBV1AsT0FBTztBQUN4Qjs7Ozs7O0NBTUMsR0FDRCxNQUFNUDtJQUNGZSxZQUFZQyxVQUFVLENBQUMsQ0FBQyxDQUFFO1FBQ3RCLElBQUksQ0FBQ0MsY0FBYyxHQUFHLElBQUksQ0FBQ0MsU0FBUyxDQUFDdEIsUUFBUUssTUFBTSxDQUFDTyxlQUFlLElBQzdESCxrQkFBa0JjLGNBQWMsQ0FBQ0MsT0FBTyxHQUN4Q2Ysa0JBQWtCYyxjQUFjLENBQUNFLFdBQVcsQ0FBQ0wsWUFBWVgsa0JBQWtCYyxjQUFjLENBQUNDLE9BQU87UUFDdkcsb0VBQW9FO1FBQ3BFLElBQUksQ0FBQ0UsV0FBVyxHQUFHLENBQUMsR0FBR2xCLE9BQU9tQixrQkFBa0IsRUFBRVA7UUFDbEQsSUFBSSxDQUFDRixTQUFTLEdBQUdFLFFBQVFRLE9BQU8sSUFBSSxPQUFPUixRQUFRUSxPQUFPLEdBQUdDO1FBQzdELElBQUksQ0FBQ1QsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ1Usa0JBQWtCLEdBQUcsQ0FBQyxDQUFDVixRQUFRVSxrQkFBa0I7UUFDdEQsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRztJQUM3QjtJQUNBVCxVQUFVVSxNQUFNLEVBQUU7UUFDZCxNQUFNQyxPQUFPLElBQUksQ0FBQ2QsV0FBVztRQUM3QixJQUFJYyxLQUFLQyxPQUFPLElBQUksTUFBTTtZQUN0QixPQUFPO1FBQ1g7UUFDQSxPQUFPRCxLQUFLQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0g7SUFDNUI7SUFDQSxJQUFJSixVQUFVO1FBQ1YsT0FBTyxJQUFJLENBQUNWLFNBQVM7SUFDekI7SUFDQWtCLGVBQWU7UUFDWCxJQUFJLENBQUNsQixTQUFTLEdBQUdXO0lBQ3JCO0lBQ0EsSUFBSVEsZUFBZTtRQUNmLE9BQU87SUFDWDtJQUNBLElBQUlDLGdCQUFnQjtRQUNoQixPQUFPO0lBQ1g7QUFDSjtBQUNBdEMseUJBQXlCLEdBQUdJO0FBQzVCLGNBQWMsR0FDZCxNQUFNRCxrQ0FBa0NDO0lBQ3BDZSxZQUFZQyxVQUFVLENBQUMsQ0FBQyxDQUFFO1FBQ3RCLEtBQUssQ0FBQ0E7SUFDVjtJQUNBbUIsUUFBUUMsTUFBTSxFQUFFWixPQUFPLEVBQUU7UUFDckIsT0FBTyxDQUFDLEdBQUd0QixPQUFPbUMsU0FBUyxFQUFFLENBQUNDO1lBQzFCLElBQUksQ0FBQ0MsZUFBZSxDQUFDSCxRQUFRWixTQUFTYztRQUMxQztJQUNKO0FBQ0o7QUFDQTFDLGlDQUFpQyxHQUFHRztBQUNwQyxTQUFTRCxjQUFjMEMsU0FBUyxFQUFFVixPQUFPO0lBQ3JDLElBQUksQ0FBQ1csTUFBTUMsT0FBTyxDQUFDWixZQUFZLENBQUVBLENBQUFBLG1CQUFtQmEsR0FBRSxHQUFJO1FBQ3REYixVQUFVO1lBQUNBO1NBQVE7SUFDdkI7SUFDQUEsVUFBVSxJQUFJYSxJQUFJYjtJQUNsQnBDLE9BQU9DLGNBQWMsQ0FBQzZDLFdBQVcsV0FBVztRQUN4QzNDLE9BQU9pQztRQUNQYyxVQUFVO0lBQ2Q7SUFDQSxPQUFPZDtBQUNYO0FBQ0FsQyxxQkFBcUIsR0FBR0UsZUFDeEIscUNBQXFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvb3BlcmF0aW9uLmpzPzQ3YjkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmluZUFzcGVjdHMgPSBleHBvcnRzLkFic3RyYWN0Q2FsbGJhY2tPcGVyYXRpb24gPSBleHBvcnRzLkFic3RyYWN0T3BlcmF0aW9uID0gZXhwb3J0cy5Bc3BlY3QgPSB2b2lkIDA7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwidXRpbFwiKTtcbmNvbnN0IGJzb25fMSA9IHJlcXVpcmUoXCIuLi9ic29uXCIpO1xuY29uc3QgcmVhZF9wcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuZXhwb3J0cy5Bc3BlY3QgPSB7XG4gICAgUkVBRF9PUEVSQVRJT046IFN5bWJvbCgnUkVBRF9PUEVSQVRJT04nKSxcbiAgICBXUklURV9PUEVSQVRJT046IFN5bWJvbCgnV1JJVEVfT1BFUkFUSU9OJyksXG4gICAgUkVUUllBQkxFOiBTeW1ib2woJ1JFVFJZQUJMRScpLFxuICAgIEVYUExBSU5BQkxFOiBTeW1ib2woJ0VYUExBSU5BQkxFJyksXG4gICAgU0tJUF9DT0xMQVRJT046IFN5bWJvbCgnU0tJUF9DT0xMQVRJT04nKSxcbiAgICBDVVJTT1JfQ1JFQVRJTkc6IFN5bWJvbCgnQ1VSU09SX0NSRUFUSU5HJyksXG4gICAgTVVTVF9TRUxFQ1RfU0FNRV9TRVJWRVI6IFN5bWJvbCgnTVVTVF9TRUxFQ1RfU0FNRV9TRVJWRVInKVxufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtTZXNzaW9uID0gU3ltYm9sKCdzZXNzaW9uJyk7XG4vKipcbiAqIFRoaXMgY2xhc3MgYWN0cyBhcyBhIHBhcmVudCBjbGFzcyBmb3IgYW55IG9wZXJhdGlvbiBhbmQgaXMgcmVzcG9uc2libGUgZm9yIHNldHRpbmcgdGhpcy5vcHRpb25zLFxuICogYXMgd2VsbCBhcyBzZXR0aW5nIGFuZCBnZXR0aW5nIGEgc2Vzc2lvbi5cbiAqIEFkZGl0aW9uYWxseSwgdGhpcyBjbGFzcyBpbXBsZW1lbnRzIGBoYXNBc3BlY3RgLCB3aGljaCBkZXRlcm1pbmVzIHdoZXRoZXIgYW4gb3BlcmF0aW9uIGhhc1xuICogYSBzcGVjaWZpYyBhc3BlY3QuXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgQWJzdHJhY3RPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLnJlYWRQcmVmZXJlbmNlID0gdGhpcy5oYXNBc3BlY3QoZXhwb3J0cy5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OKVxuICAgICAgICAgICAgPyByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5wcmltYXJ5XG4gICAgICAgICAgICA6IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLmZyb21PcHRpb25zKG9wdGlvbnMpID8/IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLnByaW1hcnk7XG4gICAgICAgIC8vIFB1bGwgdGhlIEJTT04gc2VyaWFsaXplIG9wdGlvbnMgZnJvbSB0aGUgYWxyZWFkeS1yZXNvbHZlZCBvcHRpb25zXG4gICAgICAgIHRoaXMuYnNvbk9wdGlvbnMgPSAoMCwgYnNvbl8xLnJlc29sdmVCU09OT3B0aW9ucykob3B0aW9ucyk7XG4gICAgICAgIHRoaXNba1Nlc3Npb25dID0gb3B0aW9ucy5zZXNzaW9uICE9IG51bGwgPyBvcHRpb25zLnNlc3Npb24gOiB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuYnlwYXNzUGlubmluZ0NoZWNrID0gISFvcHRpb25zLmJ5cGFzc1Bpbm5pbmdDaGVjaztcbiAgICAgICAgdGhpcy50cnlTZWNvbmRhcnlXcml0ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBoYXNBc3BlY3QoYXNwZWN0KSB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBpZiAoY3Rvci5hc3BlY3RzID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3Rvci5hc3BlY3RzLmhhcyhhc3BlY3QpO1xuICAgIH1cbiAgICBnZXQgc2Vzc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba1Nlc3Npb25dO1xuICAgIH1cbiAgICBjbGVhclNlc3Npb24oKSB7XG4gICAgICAgIHRoaXNba1Nlc3Npb25dID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBnZXQgY2FuUmV0cnlSZWFkKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0IGNhblJldHJ5V3JpdGUoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydHMuQWJzdHJhY3RPcGVyYXRpb24gPSBBYnN0cmFjdE9wZXJhdGlvbjtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIEFic3RyYWN0Q2FsbGJhY2tPcGVyYXRpb24gZXh0ZW5kcyBBYnN0cmFjdE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIH1cbiAgICBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICByZXR1cm4gKDAsIHV0aWxfMS5wcm9taXNpZnkpKChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgdGhpcy5leGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjayk7XG4gICAgICAgIH0pKCk7XG4gICAgfVxufVxuZXhwb3J0cy5BYnN0cmFjdENhbGxiYWNrT3BlcmF0aW9uID0gQWJzdHJhY3RDYWxsYmFja09wZXJhdGlvbjtcbmZ1bmN0aW9uIGRlZmluZUFzcGVjdHMob3BlcmF0aW9uLCBhc3BlY3RzKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFzcGVjdHMpICYmICEoYXNwZWN0cyBpbnN0YW5jZW9mIFNldCkpIHtcbiAgICAgICAgYXNwZWN0cyA9IFthc3BlY3RzXTtcbiAgICB9XG4gICAgYXNwZWN0cyA9IG5ldyBTZXQoYXNwZWN0cyk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9wZXJhdGlvbiwgJ2FzcGVjdHMnLCB7XG4gICAgICAgIHZhbHVlOiBhc3BlY3RzLFxuICAgICAgICB3cml0YWJsZTogZmFsc2VcbiAgICB9KTtcbiAgICByZXR1cm4gYXNwZWN0cztcbn1cbmV4cG9ydHMuZGVmaW5lQXNwZWN0cyA9IGRlZmluZUFzcGVjdHM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVyYXRpb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmaW5lQXNwZWN0cyIsIkFic3RyYWN0Q2FsbGJhY2tPcGVyYXRpb24iLCJBYnN0cmFjdE9wZXJhdGlvbiIsIkFzcGVjdCIsInV0aWxfMSIsInJlcXVpcmUiLCJic29uXzEiLCJyZWFkX3ByZWZlcmVuY2VfMSIsIlJFQURfT1BFUkFUSU9OIiwiU3ltYm9sIiwiV1JJVEVfT1BFUkFUSU9OIiwiUkVUUllBQkxFIiwiRVhQTEFJTkFCTEUiLCJTS0lQX0NPTExBVElPTiIsIkNVUlNPUl9DUkVBVElORyIsIk1VU1RfU0VMRUNUX1NBTUVfU0VSVkVSIiwia1Nlc3Npb24iLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJyZWFkUHJlZmVyZW5jZSIsImhhc0FzcGVjdCIsIlJlYWRQcmVmZXJlbmNlIiwicHJpbWFyeSIsImZyb21PcHRpb25zIiwiYnNvbk9wdGlvbnMiLCJyZXNvbHZlQlNPTk9wdGlvbnMiLCJzZXNzaW9uIiwidW5kZWZpbmVkIiwiYnlwYXNzUGlubmluZ0NoZWNrIiwidHJ5U2Vjb25kYXJ5V3JpdGUiLCJhc3BlY3QiLCJjdG9yIiwiYXNwZWN0cyIsImhhcyIsImNsZWFyU2Vzc2lvbiIsImNhblJldHJ5UmVhZCIsImNhblJldHJ5V3JpdGUiLCJleGVjdXRlIiwic2VydmVyIiwicHJvbWlzaWZ5IiwiY2FsbGJhY2siLCJleGVjdXRlQ2FsbGJhY2siLCJvcGVyYXRpb24iLCJBcnJheSIsImlzQXJyYXkiLCJTZXQiLCJ3cml0YWJsZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/operation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/options_operation.js":
/*!******************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/options_operation.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.OptionsOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class OptionsOperation extends operation_1.AbstractCallbackOperation {\n    constructor(collection, options){\n        super(options);\n        this.options = options;\n        this.collection = collection;\n    }\n    executeCallback(server, session, callback) {\n        const coll = this.collection;\n        coll.s.db.listCollections({\n            name: coll.collectionName\n        }, {\n            ...this.options,\n            nameOnly: false,\n            readPreference: this.readPreference,\n            session\n        }).toArray().then((collections)=>{\n            if (collections.length === 0) {\n                // TODO(NODE-3485)\n                return callback(new error_1.MongoAPIError(`collection ${coll.namespace} not found`));\n            }\n            callback(undefined, collections[0].options);\n        }, (error)=>callback(error));\n    }\n}\nexports.OptionsOperation = OptionsOperation; //# sourceMappingURL=options_operation.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9vcHRpb25zX29wZXJhdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsd0JBQXdCLEdBQUcsS0FBSztBQUNoQyxNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxjQUFjRCxtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYseUJBQXlCRyxZQUFZQyx5QkFBeUI7SUFDaEVDLFlBQVlDLFVBQVUsRUFBRUMsT0FBTyxDQUFFO1FBQzdCLEtBQUssQ0FBQ0E7UUFDTixJQUFJLENBQUNBLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNELFVBQVUsR0FBR0E7SUFDdEI7SUFDQUUsZ0JBQWdCQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFO1FBQ3ZDLE1BQU1DLE9BQU8sSUFBSSxDQUFDTixVQUFVO1FBQzVCTSxLQUFLQyxDQUFDLENBQUNDLEVBQUUsQ0FDSkMsZUFBZSxDQUFDO1lBQUVDLE1BQU1KLEtBQUtLLGNBQWM7UUFBQyxHQUFHO1lBQUUsR0FBRyxJQUFJLENBQUNWLE9BQU87WUFBRVcsVUFBVTtZQUFPQyxnQkFBZ0IsSUFBSSxDQUFDQSxjQUFjO1lBQUVUO1FBQVEsR0FDaElVLE9BQU8sR0FDUEMsSUFBSSxDQUFDQyxDQUFBQTtZQUNOLElBQUlBLFlBQVlDLE1BQU0sS0FBSyxHQUFHO2dCQUMxQixrQkFBa0I7Z0JBQ2xCLE9BQU9aLFNBQVMsSUFBSVYsUUFBUXVCLGFBQWEsQ0FBQyxDQUFDLFdBQVcsRUFBRVosS0FBS2EsU0FBUyxDQUFDLFVBQVUsQ0FBQztZQUN0RjtZQUNBZCxTQUFTZSxXQUFXSixXQUFXLENBQUMsRUFBRSxDQUFDZixPQUFPO1FBQzlDLEdBQUdvQixDQUFBQSxRQUFTaEIsU0FBU2dCO0lBQ3pCO0FBQ0o7QUFDQTdCLHdCQUF3QixHQUFHRSxrQkFDM0IsNkNBQTZDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvb3B0aW9uc19vcGVyYXRpb24uanM/NzJmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuT3B0aW9uc09wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIE9wdGlvbnNPcGVyYXRpb24gZXh0ZW5kcyBvcGVyYXRpb25fMS5BYnN0cmFjdENhbGxiYWNrT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgIH1cbiAgICBleGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBjb2xsID0gdGhpcy5jb2xsZWN0aW9uO1xuICAgICAgICBjb2xsLnMuZGJcbiAgICAgICAgICAgIC5saXN0Q29sbGVjdGlvbnMoeyBuYW1lOiBjb2xsLmNvbGxlY3Rpb25OYW1lIH0sIHsgLi4udGhpcy5vcHRpb25zLCBuYW1lT25seTogZmFsc2UsIHJlYWRQcmVmZXJlbmNlOiB0aGlzLnJlYWRQcmVmZXJlbmNlLCBzZXNzaW9uIH0pXG4gICAgICAgICAgICAudG9BcnJheSgpXG4gICAgICAgICAgICAudGhlbihjb2xsZWN0aW9ucyA9PiB7XG4gICAgICAgICAgICBpZiAoY29sbGVjdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoYGNvbGxlY3Rpb24gJHtjb2xsLm5hbWVzcGFjZX0gbm90IGZvdW5kYCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCBjb2xsZWN0aW9uc1swXS5vcHRpb25zKTtcbiAgICAgICAgfSwgZXJyb3IgPT4gY2FsbGJhY2soZXJyb3IpKTtcbiAgICB9XG59XG5leHBvcnRzLk9wdGlvbnNPcGVyYXRpb24gPSBPcHRpb25zT3BlcmF0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3B0aW9uc19vcGVyYXRpb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiT3B0aW9uc09wZXJhdGlvbiIsImVycm9yXzEiLCJyZXF1aXJlIiwib3BlcmF0aW9uXzEiLCJBYnN0cmFjdENhbGxiYWNrT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJjb2xsZWN0aW9uIiwib3B0aW9ucyIsImV4ZWN1dGVDYWxsYmFjayIsInNlcnZlciIsInNlc3Npb24iLCJjYWxsYmFjayIsImNvbGwiLCJzIiwiZGIiLCJsaXN0Q29sbGVjdGlvbnMiLCJuYW1lIiwiY29sbGVjdGlvbk5hbWUiLCJuYW1lT25seSIsInJlYWRQcmVmZXJlbmNlIiwidG9BcnJheSIsInRoZW4iLCJjb2xsZWN0aW9ucyIsImxlbmd0aCIsIk1vbmdvQVBJRXJyb3IiLCJuYW1lc3BhY2UiLCJ1bmRlZmluZWQiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/options_operation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/profiling_level.js":
/*!****************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/profiling_level.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ProfilingLevelOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\n/** @internal */ class ProfilingLevelOperation extends command_1.CommandCallbackOperation {\n    constructor(db, options){\n        super(db, options);\n        this.options = options;\n    }\n    executeCallback(server, session, callback) {\n        super.executeCommandCallback(server, session, {\n            profile: -1\n        }, (err, doc)=>{\n            if (err == null && doc.ok === 1) {\n                const was = doc.was;\n                if (was === 0) return callback(undefined, \"off\");\n                if (was === 1) return callback(undefined, \"slow_only\");\n                if (was === 2) return callback(undefined, \"all\");\n                // TODO(NODE-3483)\n                return callback(new error_1.MongoRuntimeError(`Illegal profiling level value ${was}`));\n            } else {\n                // TODO(NODE-3483): Consider MongoUnexpectedServerResponseError\n                err != null ? callback(err) : callback(new error_1.MongoRuntimeError(\"Error with profile command\"));\n            }\n        });\n    }\n}\nexports.ProfilingLevelOperation = ProfilingLevelOperation; //# sourceMappingURL=profiling_level.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9wcm9maWxpbmdfbGV2ZWwuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELCtCQUErQixHQUFHLEtBQUs7QUFDdkMsTUFBTUcsVUFBVUMsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUMsWUFBWUQsbUJBQU9BLENBQUMseUVBQVc7QUFDckMsY0FBYyxHQUNkLE1BQU1GLGdDQUFnQ0csVUFBVUMsd0JBQXdCO0lBQ3BFQyxZQUFZQyxFQUFFLEVBQUVDLE9BQU8sQ0FBRTtRQUNyQixLQUFLLENBQUNELElBQUlDO1FBQ1YsSUFBSSxDQUFDQSxPQUFPLEdBQUdBO0lBQ25CO0lBQ0FDLGdCQUFnQkMsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLFFBQVEsRUFBRTtRQUN2QyxLQUFLLENBQUNDLHVCQUF1QkgsUUFBUUMsU0FBUztZQUFFRyxTQUFTLENBQUM7UUFBRSxHQUFHLENBQUNDLEtBQUtDO1lBQ2pFLElBQUlELE9BQU8sUUFBUUMsSUFBSUMsRUFBRSxLQUFLLEdBQUc7Z0JBQzdCLE1BQU1DLE1BQU1GLElBQUlFLEdBQUc7Z0JBQ25CLElBQUlBLFFBQVEsR0FDUixPQUFPTixTQUFTTyxXQUFXO2dCQUMvQixJQUFJRCxRQUFRLEdBQ1IsT0FBT04sU0FBU08sV0FBVztnQkFDL0IsSUFBSUQsUUFBUSxHQUNSLE9BQU9OLFNBQVNPLFdBQVc7Z0JBQy9CLGtCQUFrQjtnQkFDbEIsT0FBT1AsU0FBUyxJQUFJVixRQUFRa0IsaUJBQWlCLENBQUMsQ0FBQyw4QkFBOEIsRUFBRUYsSUFBSSxDQUFDO1lBQ3hGLE9BQ0s7Z0JBQ0QsK0RBQStEO2dCQUMvREgsT0FBTyxPQUFPSCxTQUFTRyxPQUFPSCxTQUFTLElBQUlWLFFBQVFrQixpQkFBaUIsQ0FBQztZQUN6RTtRQUNKO0lBQ0o7QUFDSjtBQUNBckIsK0JBQStCLEdBQUdFLHlCQUNsQywyQ0FBMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9wcm9maWxpbmdfbGV2ZWwuanM/MmU5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUHJvZmlsaW5nTGV2ZWxPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgY29tbWFuZF8xID0gcmVxdWlyZShcIi4vY29tbWFuZFwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIFByb2ZpbGluZ0xldmVsT3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRDYWxsYmFja09wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZGIsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoZGIsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cbiAgICBleGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBzdXBlci5leGVjdXRlQ29tbWFuZENhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgeyBwcm9maWxlOiAtMSB9LCAoZXJyLCBkb2MpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIgPT0gbnVsbCAmJiBkb2Mub2sgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB3YXMgPSBkb2Mud2FzO1xuICAgICAgICAgICAgICAgIGlmICh3YXMgPT09IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh1bmRlZmluZWQsICdvZmYnKTtcbiAgICAgICAgICAgICAgICBpZiAod2FzID09PSAxKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodW5kZWZpbmVkLCAnc2xvd19vbmx5Jyk7XG4gICAgICAgICAgICAgICAgaWYgKHdhcyA9PT0gMilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHVuZGVmaW5lZCwgJ2FsbCcpO1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcihgSWxsZWdhbCBwcm9maWxpbmcgbGV2ZWwgdmFsdWUgJHt3YXN9YCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODMpOiBDb25zaWRlciBNb25nb1VuZXhwZWN0ZWRTZXJ2ZXJSZXNwb25zZUVycm9yXG4gICAgICAgICAgICAgICAgZXJyICE9IG51bGwgPyBjYWxsYmFjayhlcnIpIDogY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ0Vycm9yIHdpdGggcHJvZmlsZSBjb21tYW5kJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLlByb2ZpbGluZ0xldmVsT3BlcmF0aW9uID0gUHJvZmlsaW5nTGV2ZWxPcGVyYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9maWxpbmdfbGV2ZWwuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUHJvZmlsaW5nTGV2ZWxPcGVyYXRpb24iLCJlcnJvcl8xIiwicmVxdWlyZSIsImNvbW1hbmRfMSIsIkNvbW1hbmRDYWxsYmFja09wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwiZGIiLCJvcHRpb25zIiwiZXhlY3V0ZUNhbGxiYWNrIiwic2VydmVyIiwic2Vzc2lvbiIsImNhbGxiYWNrIiwiZXhlY3V0ZUNvbW1hbmRDYWxsYmFjayIsInByb2ZpbGUiLCJlcnIiLCJkb2MiLCJvayIsIndhcyIsInVuZGVmaW5lZCIsIk1vbmdvUnVudGltZUVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/profiling_level.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/remove_user.js":
/*!************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/remove_user.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.RemoveUserOperation = void 0;\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class RemoveUserOperation extends command_1.CommandCallbackOperation {\n    constructor(db, username, options){\n        super(db, options);\n        this.options = options;\n        this.username = username;\n    }\n    executeCallback(server, session, callback) {\n        super.executeCommandCallback(server, session, {\n            dropUser: this.username\n        }, (err)=>{\n            callback(err, err ? false : true);\n        });\n    }\n}\nexports.RemoveUserOperation = RemoveUserOperation;\n(0, operation_1.defineAspects)(RemoveUserOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]); //# sourceMappingURL=remove_user.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9yZW1vdmVfdXNlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMkJBQTJCLEdBQUcsS0FBSztBQUNuQyxNQUFNRyxZQUFZQyxtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNQyxjQUFjRCxtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYsNEJBQTRCQyxVQUFVRyx3QkFBd0I7SUFDaEVDLFlBQVlDLEVBQUUsRUFBRUMsUUFBUSxFQUFFQyxPQUFPLENBQUU7UUFDL0IsS0FBSyxDQUFDRixJQUFJRTtRQUNWLElBQUksQ0FBQ0EsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0QsUUFBUSxHQUFHQTtJQUNwQjtJQUNBRSxnQkFBZ0JDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDdkMsS0FBSyxDQUFDQyx1QkFBdUJILFFBQVFDLFNBQVM7WUFBRUcsVUFBVSxJQUFJLENBQUNQLFFBQVE7UUFBQyxHQUFHUSxDQUFBQTtZQUN2RUgsU0FBU0csS0FBS0EsTUFBTSxRQUFRO1FBQ2hDO0lBQ0o7QUFDSjtBQUNBakIsMkJBQTJCLEdBQUdFO0FBQzdCLElBQUdHLFlBQVlhLGFBQWEsRUFBRWhCLHFCQUFxQjtJQUFDRyxZQUFZYyxNQUFNLENBQUNDLGVBQWU7Q0FBQyxHQUN4Rix1Q0FBdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9yZW1vdmVfdXNlci5qcz85OGMzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5SZW1vdmVVc2VyT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgY29tbWFuZF8xID0gcmVxdWlyZShcIi4vY29tbWFuZFwiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgUmVtb3ZlVXNlck9wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kQ2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGRiLCB1c2VybmFtZSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihkYiwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgc3VwZXIuZXhlY3V0ZUNvbW1hbmRDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIHsgZHJvcFVzZXI6IHRoaXMudXNlcm5hbWUgfSwgZXJyID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGVyciwgZXJyID8gZmFsc2UgOiB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5SZW1vdmVVc2VyT3BlcmF0aW9uID0gUmVtb3ZlVXNlck9wZXJhdGlvbjtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShSZW1vdmVVc2VyT3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVtb3ZlX3VzZXIuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUmVtb3ZlVXNlck9wZXJhdGlvbiIsImNvbW1hbmRfMSIsInJlcXVpcmUiLCJvcGVyYXRpb25fMSIsIkNvbW1hbmRDYWxsYmFja09wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwiZGIiLCJ1c2VybmFtZSIsIm9wdGlvbnMiLCJleGVjdXRlQ2FsbGJhY2siLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJleGVjdXRlQ29tbWFuZENhbGxiYWNrIiwiZHJvcFVzZXIiLCJlcnIiLCJkZWZpbmVBc3BlY3RzIiwiQXNwZWN0IiwiV1JJVEVfT1BFUkFUSU9OIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/remove_user.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/rename.js":
/*!*******************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/rename.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.RenameOperation = void 0;\nconst collection_1 = __webpack_require__(/*! ../collection */ \"(ssr)/./node_modules/mongodb/lib/collection.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\nconst run_command_1 = __webpack_require__(/*! ./run_command */ \"(ssr)/./node_modules/mongodb/lib/operations/run_command.js\");\n/** @internal */ class RenameOperation extends run_command_1.RunAdminCommandOperation {\n    constructor(collection, newName, options){\n        // Check the collection name\n        (0, utils_1.checkCollectionName)(newName);\n        // Build the command\n        const renameCollection = collection.namespace;\n        const toCollection = collection.s.namespace.withCollection(newName).toString();\n        const dropTarget = typeof options.dropTarget === \"boolean\" ? options.dropTarget : false;\n        const cmd = {\n            renameCollection: renameCollection,\n            to: toCollection,\n            dropTarget: dropTarget\n        };\n        super(collection, cmd, options);\n        this.options = options;\n        this.collection = collection;\n        this.newName = newName;\n    }\n    executeCallback(server, session, callback) {\n        const coll = this.collection;\n        super.executeCallback(server, session, (err, doc)=>{\n            if (err) return callback(err);\n            // We have an error\n            if (doc?.errmsg) {\n                return callback(new error_1.MongoServerError(doc));\n            }\n            let newColl;\n            try {\n                newColl = new collection_1.Collection(coll.s.db, this.newName, coll.s.options);\n            } catch (err) {\n                return callback(err);\n            }\n            return callback(undefined, newColl);\n        });\n    }\n}\nexports.RenameOperation = RenameOperation;\n(0, operation_1.defineAspects)(RenameOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]); //# sourceMappingURL=rename.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9yZW5hbWUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHVCQUF1QixHQUFHLEtBQUs7QUFDL0IsTUFBTUcsZUFBZUMsbUJBQU9BLENBQUMscUVBQWU7QUFDNUMsTUFBTUMsVUFBVUQsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUcsY0FBY0gsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsTUFBTUksZ0JBQWdCSixtQkFBT0EsQ0FBQyxpRkFBZTtBQUM3QyxjQUFjLEdBQ2QsTUFBTUYsd0JBQXdCTSxjQUFjQyx3QkFBd0I7SUFDaEVDLFlBQVlDLFVBQVUsRUFBRUMsT0FBTyxFQUFFQyxPQUFPLENBQUU7UUFDdEMsNEJBQTRCO1FBQzNCLElBQUdQLFFBQVFRLG1CQUFtQixFQUFFRjtRQUNqQyxvQkFBb0I7UUFDcEIsTUFBTUcsbUJBQW1CSixXQUFXSyxTQUFTO1FBQzdDLE1BQU1DLGVBQWVOLFdBQVdPLENBQUMsQ0FBQ0YsU0FBUyxDQUFDRyxjQUFjLENBQUNQLFNBQVNRLFFBQVE7UUFDNUUsTUFBTUMsYUFBYSxPQUFPUixRQUFRUSxVQUFVLEtBQUssWUFBWVIsUUFBUVEsVUFBVSxHQUFHO1FBQ2xGLE1BQU1DLE1BQU07WUFBRVAsa0JBQWtCQTtZQUFrQlEsSUFBSU47WUFBY0ksWUFBWUE7UUFBVztRQUMzRixLQUFLLENBQUNWLFlBQVlXLEtBQUtUO1FBQ3ZCLElBQUksQ0FBQ0EsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0YsVUFBVSxHQUFHQTtRQUNsQixJQUFJLENBQUNDLE9BQU8sR0FBR0E7SUFDbkI7SUFDQVksZ0JBQWdCQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFO1FBQ3ZDLE1BQU1DLE9BQU8sSUFBSSxDQUFDakIsVUFBVTtRQUM1QixLQUFLLENBQUNhLGdCQUFnQkMsUUFBUUMsU0FBUyxDQUFDRyxLQUFLQztZQUN6QyxJQUFJRCxLQUNBLE9BQU9GLFNBQVNFO1lBQ3BCLG1CQUFtQjtZQUNuQixJQUFJQyxLQUFLQyxRQUFRO2dCQUNiLE9BQU9KLFNBQVMsSUFBSXRCLFFBQVEyQixnQkFBZ0IsQ0FBQ0Y7WUFDakQ7WUFDQSxJQUFJRztZQUNKLElBQUk7Z0JBQ0FBLFVBQVUsSUFBSTlCLGFBQWErQixVQUFVLENBQUNOLEtBQUtWLENBQUMsQ0FBQ2lCLEVBQUUsRUFBRSxJQUFJLENBQUN2QixPQUFPLEVBQUVnQixLQUFLVixDQUFDLENBQUNMLE9BQU87WUFDakYsRUFDQSxPQUFPZ0IsS0FBSztnQkFDUixPQUFPRixTQUFTRTtZQUNwQjtZQUNBLE9BQU9GLFNBQVNTLFdBQVdIO1FBQy9CO0lBQ0o7QUFDSjtBQUNBakMsdUJBQXVCLEdBQUdFO0FBQ3pCLElBQUdLLFlBQVk4QixhQUFhLEVBQUVuQyxpQkFBaUI7SUFBQ0ssWUFBWStCLE1BQU0sQ0FBQ0MsZUFBZTtDQUFDLEdBQ3BGLGtDQUFrQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL3JlbmFtZS5qcz8wNjI4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5SZW5hbWVPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBjb2xsZWN0aW9uXzEgPSByZXF1aXJlKFwiLi4vY29sbGVjdGlvblwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG5jb25zdCBydW5fY29tbWFuZF8xID0gcmVxdWlyZShcIi4vcnVuX2NvbW1hbmRcIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBSZW5hbWVPcGVyYXRpb24gZXh0ZW5kcyBydW5fY29tbWFuZF8xLlJ1bkFkbWluQ29tbWFuZE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgbmV3TmFtZSwgb3B0aW9ucykge1xuICAgICAgICAvLyBDaGVjayB0aGUgY29sbGVjdGlvbiBuYW1lXG4gICAgICAgICgwLCB1dGlsc18xLmNoZWNrQ29sbGVjdGlvbk5hbWUpKG5ld05hbWUpO1xuICAgICAgICAvLyBCdWlsZCB0aGUgY29tbWFuZFxuICAgICAgICBjb25zdCByZW5hbWVDb2xsZWN0aW9uID0gY29sbGVjdGlvbi5uYW1lc3BhY2U7XG4gICAgICAgIGNvbnN0IHRvQ29sbGVjdGlvbiA9IGNvbGxlY3Rpb24ucy5uYW1lc3BhY2Uud2l0aENvbGxlY3Rpb24obmV3TmFtZSkudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgZHJvcFRhcmdldCA9IHR5cGVvZiBvcHRpb25zLmRyb3BUYXJnZXQgPT09ICdib29sZWFuJyA/IG9wdGlvbnMuZHJvcFRhcmdldCA6IGZhbHNlO1xuICAgICAgICBjb25zdCBjbWQgPSB7IHJlbmFtZUNvbGxlY3Rpb246IHJlbmFtZUNvbGxlY3Rpb24sIHRvOiB0b0NvbGxlY3Rpb24sIGRyb3BUYXJnZXQ6IGRyb3BUYXJnZXQgfTtcbiAgICAgICAgc3VwZXIoY29sbGVjdGlvbiwgY21kLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICAgICAgdGhpcy5uZXdOYW1lID0gbmV3TmFtZTtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgY29sbCA9IHRoaXMuY29sbGVjdGlvbjtcbiAgICAgICAgc3VwZXIuZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgKGVyciwgZG9jKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgLy8gV2UgaGF2ZSBhbiBlcnJvclxuICAgICAgICAgICAgaWYgKGRvYz8uZXJybXNnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvU2VydmVyRXJyb3IoZG9jKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbmV3Q29sbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbmV3Q29sbCA9IG5ldyBjb2xsZWN0aW9uXzEuQ29sbGVjdGlvbihjb2xsLnMuZGIsIHRoaXMubmV3TmFtZSwgY29sbC5zLm9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHVuZGVmaW5lZCwgbmV3Q29sbCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuUmVuYW1lT3BlcmF0aW9uID0gUmVuYW1lT3BlcmF0aW9uO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKFJlbmFtZU9wZXJhdGlvbiwgW29wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT05dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlbmFtZS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJSZW5hbWVPcGVyYXRpb24iLCJjb2xsZWN0aW9uXzEiLCJyZXF1aXJlIiwiZXJyb3JfMSIsInV0aWxzXzEiLCJvcGVyYXRpb25fMSIsInJ1bl9jb21tYW5kXzEiLCJSdW5BZG1pbkNvbW1hbmRPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImNvbGxlY3Rpb24iLCJuZXdOYW1lIiwib3B0aW9ucyIsImNoZWNrQ29sbGVjdGlvbk5hbWUiLCJyZW5hbWVDb2xsZWN0aW9uIiwibmFtZXNwYWNlIiwidG9Db2xsZWN0aW9uIiwicyIsIndpdGhDb2xsZWN0aW9uIiwidG9TdHJpbmciLCJkcm9wVGFyZ2V0IiwiY21kIiwidG8iLCJleGVjdXRlQ2FsbGJhY2siLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJjb2xsIiwiZXJyIiwiZG9jIiwiZXJybXNnIiwiTW9uZ29TZXJ2ZXJFcnJvciIsIm5ld0NvbGwiLCJDb2xsZWN0aW9uIiwiZGIiLCJ1bmRlZmluZWQiLCJkZWZpbmVBc3BlY3RzIiwiQXNwZWN0IiwiV1JJVEVfT1BFUkFUSU9OIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/rename.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/run_command.js":
/*!************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/run_command.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.RunAdminCommandOperation = exports.RunCommandOperation = void 0;\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\n/** @internal */ class RunCommandOperation extends command_1.CommandCallbackOperation {\n    constructor(parent, command, options){\n        super(parent, options);\n        this.options = options ?? {};\n        this.command = command;\n    }\n    executeCallback(server, session, callback) {\n        const command = this.command;\n        this.executeCommandCallback(server, session, command, callback);\n    }\n}\nexports.RunCommandOperation = RunCommandOperation;\nclass RunAdminCommandOperation extends RunCommandOperation {\n    constructor(parent, command, options){\n        super(parent, command, options);\n        this.ns = new utils_1.MongoDBNamespace(\"admin\");\n    }\n}\nexports.RunAdminCommandOperation = RunAdminCommandOperation; //# sourceMappingURL=run_command.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9ydW5fY29tbWFuZC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsZ0NBQWdDLEdBQUdBLDJCQUEyQixHQUFHLEtBQUs7QUFDdEUsTUFBTUksVUFBVUMsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUMsWUFBWUQsbUJBQU9BLENBQUMseUVBQVc7QUFDckMsY0FBYyxHQUNkLE1BQU1GLDRCQUE0QkcsVUFBVUMsd0JBQXdCO0lBQ2hFQyxZQUFZQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsT0FBTyxDQUFFO1FBQ2xDLEtBQUssQ0FBQ0YsUUFBUUU7UUFDZCxJQUFJLENBQUNBLE9BQU8sR0FBR0EsV0FBVyxDQUFDO1FBQzNCLElBQUksQ0FBQ0QsT0FBTyxHQUFHQTtJQUNuQjtJQUNBRSxnQkFBZ0JDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDdkMsTUFBTUwsVUFBVSxJQUFJLENBQUNBLE9BQU87UUFDNUIsSUFBSSxDQUFDTSxzQkFBc0IsQ0FBQ0gsUUFBUUMsU0FBU0osU0FBU0s7SUFDMUQ7QUFDSjtBQUNBZiwyQkFBMkIsR0FBR0c7QUFDOUIsTUFBTUQsaUNBQWlDQztJQUNuQ0ssWUFBWUMsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLE9BQU8sQ0FBRTtRQUNsQyxLQUFLLENBQUNGLFFBQVFDLFNBQVNDO1FBQ3ZCLElBQUksQ0FBQ00sRUFBRSxHQUFHLElBQUliLFFBQVFjLGdCQUFnQixDQUFDO0lBQzNDO0FBQ0o7QUFDQWxCLGdDQUFnQyxHQUFHRSwwQkFDbkMsdUNBQXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvcnVuX2NvbW1hbmQuanM/NmZmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUnVuQWRtaW5Db21tYW5kT3BlcmF0aW9uID0gZXhwb3J0cy5SdW5Db21tYW5kT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IGNvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRcIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBSdW5Db21tYW5kT3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRDYWxsYmFja09wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCBjb21tYW5kLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKHBhcmVudCwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHRoaXMuY29tbWFuZCA9IGNvbW1hbmQ7XG4gICAgfVxuICAgIGV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSB0aGlzLmNvbW1hbmQ7XG4gICAgICAgIHRoaXMuZXhlY3V0ZUNvbW1hbmRDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNvbW1hbmQsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5leHBvcnRzLlJ1bkNvbW1hbmRPcGVyYXRpb24gPSBSdW5Db21tYW5kT3BlcmF0aW9uO1xuY2xhc3MgUnVuQWRtaW5Db21tYW5kT3BlcmF0aW9uIGV4dGVuZHMgUnVuQ29tbWFuZE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCBjb21tYW5kLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKHBhcmVudCwgY29tbWFuZCwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMubnMgPSBuZXcgdXRpbHNfMS5Nb25nb0RCTmFtZXNwYWNlKCdhZG1pbicpO1xuICAgIH1cbn1cbmV4cG9ydHMuUnVuQWRtaW5Db21tYW5kT3BlcmF0aW9uID0gUnVuQWRtaW5Db21tYW5kT3BlcmF0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuX2NvbW1hbmQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUnVuQWRtaW5Db21tYW5kT3BlcmF0aW9uIiwiUnVuQ29tbWFuZE9wZXJhdGlvbiIsInV0aWxzXzEiLCJyZXF1aXJlIiwiY29tbWFuZF8xIiwiQ29tbWFuZENhbGxiYWNrT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJwYXJlbnQiLCJjb21tYW5kIiwib3B0aW9ucyIsImV4ZWN1dGVDYWxsYmFjayIsInNlcnZlciIsInNlc3Npb24iLCJjYWxsYmFjayIsImV4ZWN1dGVDb21tYW5kQ2FsbGJhY2siLCJucyIsIk1vbmdvREJOYW1lc3BhY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/run_command.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/search_indexes/create.js":
/*!**********************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/search_indexes/create.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CreateSearchIndexesOperation = void 0;\nconst operation_1 = __webpack_require__(/*! ../operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class CreateSearchIndexesOperation extends operation_1.AbstractCallbackOperation {\n    constructor(collection, descriptions){\n        super();\n        this.collection = collection;\n        this.descriptions = descriptions;\n    }\n    executeCallback(server, session, callback) {\n        const namespace = this.collection.fullNamespace;\n        const command = {\n            createSearchIndexes: namespace.collection,\n            indexes: this.descriptions\n        };\n        server.command(namespace, command, {\n            session\n        }, (err, res)=>{\n            if (err || !res) {\n                callback(err);\n                return;\n            }\n            const indexesCreated = res?.indexesCreated ?? [];\n            callback(undefined, indexesCreated.map(({ name })=>name));\n        });\n    }\n}\nexports.CreateSearchIndexesOperation = CreateSearchIndexesOperation; //# sourceMappingURL=create.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9zZWFyY2hfaW5kZXhlcy9jcmVhdGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG9DQUFvQyxHQUFHLEtBQUs7QUFDNUMsTUFBTUcsY0FBY0MsbUJBQU9BLENBQUMsOEVBQWM7QUFDMUMsY0FBYyxHQUNkLE1BQU1GLHFDQUFxQ0MsWUFBWUUseUJBQXlCO0lBQzVFQyxZQUFZQyxVQUFVLEVBQUVDLFlBQVksQ0FBRTtRQUNsQyxLQUFLO1FBQ0wsSUFBSSxDQUFDRCxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsWUFBWSxHQUFHQTtJQUN4QjtJQUNBQyxnQkFBZ0JDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDdkMsTUFBTUMsWUFBWSxJQUFJLENBQUNOLFVBQVUsQ0FBQ08sYUFBYTtRQUMvQyxNQUFNQyxVQUFVO1lBQ1pDLHFCQUFxQkgsVUFBVU4sVUFBVTtZQUN6Q1UsU0FBUyxJQUFJLENBQUNULFlBQVk7UUFDOUI7UUFDQUUsT0FBT0ssT0FBTyxDQUFDRixXQUFXRSxTQUFTO1lBQUVKO1FBQVEsR0FBRyxDQUFDTyxLQUFLQztZQUNsRCxJQUFJRCxPQUFPLENBQUNDLEtBQUs7Z0JBQ2JQLFNBQVNNO2dCQUNUO1lBQ0o7WUFDQSxNQUFNRSxpQkFBaUJELEtBQUtDLGtCQUFrQixFQUFFO1lBQ2hEUixTQUFTUyxXQUFXRCxlQUFlRSxHQUFHLENBQUMsQ0FBQyxFQUFFQyxJQUFJLEVBQUUsR0FBS0E7UUFDekQ7SUFDSjtBQUNKO0FBQ0F2QixvQ0FBb0MsR0FBR0UsOEJBQ3ZDLGtDQUFrQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL3NlYXJjaF9pbmRleGVzL2NyZWF0ZS5qcz9kYzAwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5DcmVhdGVTZWFyY2hJbmRleGVzT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgQ3JlYXRlU2VhcmNoSW5kZXhlc09wZXJhdGlvbiBleHRlbmRzIG9wZXJhdGlvbl8xLkFic3RyYWN0Q2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIGRlc2NyaXB0aW9ucykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9ucyA9IGRlc2NyaXB0aW9ucztcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgbmFtZXNwYWNlID0gdGhpcy5jb2xsZWN0aW9uLmZ1bGxOYW1lc3BhY2U7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSB7XG4gICAgICAgICAgICBjcmVhdGVTZWFyY2hJbmRleGVzOiBuYW1lc3BhY2UuY29sbGVjdGlvbixcbiAgICAgICAgICAgIGluZGV4ZXM6IHRoaXMuZGVzY3JpcHRpb25zXG4gICAgICAgIH07XG4gICAgICAgIHNlcnZlci5jb21tYW5kKG5hbWVzcGFjZSwgY29tbWFuZCwgeyBzZXNzaW9uIH0sIChlcnIsIHJlcykgPT4ge1xuICAgICAgICAgICAgaWYgKGVyciB8fCAhcmVzKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpbmRleGVzQ3JlYXRlZCA9IHJlcz8uaW5kZXhlc0NyZWF0ZWQgPz8gW107XG4gICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIGluZGV4ZXNDcmVhdGVkLm1hcCgoeyBuYW1lIH0pID0+IG5hbWUpKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5DcmVhdGVTZWFyY2hJbmRleGVzT3BlcmF0aW9uID0gQ3JlYXRlU2VhcmNoSW5kZXhlc09wZXJhdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJDcmVhdGVTZWFyY2hJbmRleGVzT3BlcmF0aW9uIiwib3BlcmF0aW9uXzEiLCJyZXF1aXJlIiwiQWJzdHJhY3RDYWxsYmFja09wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwiY29sbGVjdGlvbiIsImRlc2NyaXB0aW9ucyIsImV4ZWN1dGVDYWxsYmFjayIsInNlcnZlciIsInNlc3Npb24iLCJjYWxsYmFjayIsIm5hbWVzcGFjZSIsImZ1bGxOYW1lc3BhY2UiLCJjb21tYW5kIiwiY3JlYXRlU2VhcmNoSW5kZXhlcyIsImluZGV4ZXMiLCJlcnIiLCJyZXMiLCJpbmRleGVzQ3JlYXRlZCIsInVuZGVmaW5lZCIsIm1hcCIsIm5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/search_indexes/create.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/search_indexes/drop.js":
/*!********************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/search_indexes/drop.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DropSearchIndexOperation = void 0;\nconst operation_1 = __webpack_require__(/*! ../operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class DropSearchIndexOperation extends operation_1.AbstractCallbackOperation {\n    constructor(collection, name){\n        super();\n        this.collection = collection;\n        this.name = name;\n    }\n    executeCallback(server, session, callback) {\n        const namespace = this.collection.fullNamespace;\n        const command = {\n            dropSearchIndex: namespace.collection\n        };\n        if (typeof this.name === \"string\") {\n            command.name = this.name;\n        }\n        server.command(namespace, command, {\n            session\n        }, (err)=>{\n            if (err) {\n                callback(err);\n                return;\n            }\n            callback();\n        });\n    }\n}\nexports.DropSearchIndexOperation = DropSearchIndexOperation; //# sourceMappingURL=drop.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9zZWFyY2hfaW5kZXhlcy9kcm9wLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxnQ0FBZ0MsR0FBRyxLQUFLO0FBQ3hDLE1BQU1HLGNBQWNDLG1CQUFPQSxDQUFDLDhFQUFjO0FBQzFDLGNBQWMsR0FDZCxNQUFNRixpQ0FBaUNDLFlBQVlFLHlCQUF5QjtJQUN4RUMsWUFBWUMsVUFBVSxFQUFFQyxJQUFJLENBQUU7UUFDMUIsS0FBSztRQUNMLElBQUksQ0FBQ0QsVUFBVSxHQUFHQTtRQUNsQixJQUFJLENBQUNDLElBQUksR0FBR0E7SUFDaEI7SUFDQUMsZ0JBQWdCQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFO1FBQ3ZDLE1BQU1DLFlBQVksSUFBSSxDQUFDTixVQUFVLENBQUNPLGFBQWE7UUFDL0MsTUFBTUMsVUFBVTtZQUNaQyxpQkFBaUJILFVBQVVOLFVBQVU7UUFDekM7UUFDQSxJQUFJLE9BQU8sSUFBSSxDQUFDQyxJQUFJLEtBQUssVUFBVTtZQUMvQk8sUUFBUVAsSUFBSSxHQUFHLElBQUksQ0FBQ0EsSUFBSTtRQUM1QjtRQUNBRSxPQUFPSyxPQUFPLENBQUNGLFdBQVdFLFNBQVM7WUFBRUo7UUFBUSxHQUFHTSxDQUFBQTtZQUM1QyxJQUFJQSxLQUFLO2dCQUNMTCxTQUFTSztnQkFDVDtZQUNKO1lBQ0FMO1FBQ0o7SUFDSjtBQUNKO0FBQ0FaLGdDQUFnQyxHQUFHRSwwQkFDbkMsZ0NBQWdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvc2VhcmNoX2luZGV4ZXMvZHJvcC5qcz9lYjkxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Ecm9wU2VhcmNoSW5kZXhPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuLi9vcGVyYXRpb25cIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBEcm9wU2VhcmNoSW5kZXhPcGVyYXRpb24gZXh0ZW5kcyBvcGVyYXRpb25fMS5BYnN0cmFjdENhbGxiYWNrT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBuYW1lKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IGNvbGxlY3Rpb247XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgfVxuICAgIGV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IG5hbWVzcGFjZSA9IHRoaXMuY29sbGVjdGlvbi5mdWxsTmFtZXNwYWNlO1xuICAgICAgICBjb25zdCBjb21tYW5kID0ge1xuICAgICAgICAgICAgZHJvcFNlYXJjaEluZGV4OiBuYW1lc3BhY2UuY29sbGVjdGlvblxuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMubmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNvbW1hbmQubmFtZSA9IHRoaXMubmFtZTtcbiAgICAgICAgfVxuICAgICAgICBzZXJ2ZXIuY29tbWFuZChuYW1lc3BhY2UsIGNvbW1hbmQsIHsgc2Vzc2lvbiB9LCBlcnIgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5Ecm9wU2VhcmNoSW5kZXhPcGVyYXRpb24gPSBEcm9wU2VhcmNoSW5kZXhPcGVyYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kcm9wLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkRyb3BTZWFyY2hJbmRleE9wZXJhdGlvbiIsIm9wZXJhdGlvbl8xIiwicmVxdWlyZSIsIkFic3RyYWN0Q2FsbGJhY2tPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImNvbGxlY3Rpb24iLCJuYW1lIiwiZXhlY3V0ZUNhbGxiYWNrIiwic2VydmVyIiwic2Vzc2lvbiIsImNhbGxiYWNrIiwibmFtZXNwYWNlIiwiZnVsbE5hbWVzcGFjZSIsImNvbW1hbmQiLCJkcm9wU2VhcmNoSW5kZXgiLCJlcnIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/search_indexes/drop.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/search_indexes/update.js":
/*!**********************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/search_indexes/update.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.UpdateSearchIndexOperation = void 0;\nconst operation_1 = __webpack_require__(/*! ../operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class UpdateSearchIndexOperation extends operation_1.AbstractCallbackOperation {\n    constructor(collection, name, definition){\n        super();\n        this.collection = collection;\n        this.name = name;\n        this.definition = definition;\n    }\n    executeCallback(server, session, callback) {\n        const namespace = this.collection.fullNamespace;\n        const command = {\n            updateSearchIndex: namespace.collection,\n            name: this.name,\n            definition: this.definition\n        };\n        server.command(namespace, command, {\n            session\n        }, (err)=>{\n            if (err) {\n                callback(err);\n                return;\n            }\n            callback();\n        });\n    }\n}\nexports.UpdateSearchIndexOperation = UpdateSearchIndexOperation; //# sourceMappingURL=update.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9zZWFyY2hfaW5kZXhlcy91cGRhdGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGtDQUFrQyxHQUFHLEtBQUs7QUFDMUMsTUFBTUcsY0FBY0MsbUJBQU9BLENBQUMsOEVBQWM7QUFDMUMsY0FBYyxHQUNkLE1BQU1GLG1DQUFtQ0MsWUFBWUUseUJBQXlCO0lBQzFFQyxZQUFZQyxVQUFVLEVBQUVDLElBQUksRUFBRUMsVUFBVSxDQUFFO1FBQ3RDLEtBQUs7UUFDTCxJQUFJLENBQUNGLFVBQVUsR0FBR0E7UUFDbEIsSUFBSSxDQUFDQyxJQUFJLEdBQUdBO1FBQ1osSUFBSSxDQUFDQyxVQUFVLEdBQUdBO0lBQ3RCO0lBQ0FDLGdCQUFnQkMsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLFFBQVEsRUFBRTtRQUN2QyxNQUFNQyxZQUFZLElBQUksQ0FBQ1AsVUFBVSxDQUFDUSxhQUFhO1FBQy9DLE1BQU1DLFVBQVU7WUFDWkMsbUJBQW1CSCxVQUFVUCxVQUFVO1lBQ3ZDQyxNQUFNLElBQUksQ0FBQ0EsSUFBSTtZQUNmQyxZQUFZLElBQUksQ0FBQ0EsVUFBVTtRQUMvQjtRQUNBRSxPQUFPSyxPQUFPLENBQUNGLFdBQVdFLFNBQVM7WUFBRUo7UUFBUSxHQUFHTSxDQUFBQTtZQUM1QyxJQUFJQSxLQUFLO2dCQUNMTCxTQUFTSztnQkFDVDtZQUNKO1lBQ0FMO1FBQ0o7SUFDSjtBQUNKO0FBQ0FiLGtDQUFrQyxHQUFHRSw0QkFDckMsa0NBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvc2VhcmNoX2luZGV4ZXMvdXBkYXRlLmpzP2YzNjEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlVwZGF0ZVNlYXJjaEluZGV4T3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgVXBkYXRlU2VhcmNoSW5kZXhPcGVyYXRpb24gZXh0ZW5kcyBvcGVyYXRpb25fMS5BYnN0cmFjdENhbGxiYWNrT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBuYW1lLCBkZWZpbml0aW9uKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IGNvbGxlY3Rpb247XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbiA9IGRlZmluaXRpb247XG4gICAgfVxuICAgIGV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IG5hbWVzcGFjZSA9IHRoaXMuY29sbGVjdGlvbi5mdWxsTmFtZXNwYWNlO1xuICAgICAgICBjb25zdCBjb21tYW5kID0ge1xuICAgICAgICAgICAgdXBkYXRlU2VhcmNoSW5kZXg6IG5hbWVzcGFjZS5jb2xsZWN0aW9uLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgZGVmaW5pdGlvbjogdGhpcy5kZWZpbml0aW9uXG4gICAgICAgIH07XG4gICAgICAgIHNlcnZlci5jb21tYW5kKG5hbWVzcGFjZSwgY29tbWFuZCwgeyBzZXNzaW9uIH0sIGVyciA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLlVwZGF0ZVNlYXJjaEluZGV4T3BlcmF0aW9uID0gVXBkYXRlU2VhcmNoSW5kZXhPcGVyYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGRhdGUuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiVXBkYXRlU2VhcmNoSW5kZXhPcGVyYXRpb24iLCJvcGVyYXRpb25fMSIsInJlcXVpcmUiLCJBYnN0cmFjdENhbGxiYWNrT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJjb2xsZWN0aW9uIiwibmFtZSIsImRlZmluaXRpb24iLCJleGVjdXRlQ2FsbGJhY2siLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY2FsbGJhY2siLCJuYW1lc3BhY2UiLCJmdWxsTmFtZXNwYWNlIiwiY29tbWFuZCIsInVwZGF0ZVNlYXJjaEluZGV4IiwiZXJyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/search_indexes/update.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/set_profiling_level.js":
/*!********************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/set_profiling_level.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.SetProfilingLevelOperation = exports.ProfilingLevel = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst levelValues = new Set([\n    \"off\",\n    \"slow_only\",\n    \"all\"\n]);\n/** @public */ exports.ProfilingLevel = Object.freeze({\n    off: \"off\",\n    slowOnly: \"slow_only\",\n    all: \"all\"\n});\n/** @internal */ class SetProfilingLevelOperation extends command_1.CommandCallbackOperation {\n    constructor(db, level, options){\n        super(db, options);\n        this.options = options;\n        switch(level){\n            case exports.ProfilingLevel.off:\n                this.profile = 0;\n                break;\n            case exports.ProfilingLevel.slowOnly:\n                this.profile = 1;\n                break;\n            case exports.ProfilingLevel.all:\n                this.profile = 2;\n                break;\n            default:\n                this.profile = 0;\n                break;\n        }\n        this.level = level;\n    }\n    executeCallback(server, session, callback) {\n        const level = this.level;\n        if (!levelValues.has(level)) {\n            return callback(new error_1.MongoInvalidArgumentError(`Profiling level must be one of \"${(0, utils_1.enumToString)(exports.ProfilingLevel)}\"`));\n        }\n        // TODO(NODE-3483): Determine error to put here\n        super.executeCommandCallback(server, session, {\n            profile: this.profile\n        }, (err, doc)=>{\n            if (err == null && doc.ok === 1) return callback(undefined, level);\n            return err != null ? callback(err) : callback(new error_1.MongoRuntimeError(\"Error with profile command\"));\n        });\n    }\n}\nexports.SetProfilingLevelOperation = SetProfilingLevelOperation; //# sourceMappingURL=set_profiling_level.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9zZXRfcHJvZmlsaW5nX2xldmVsLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQ0FBa0MsR0FBR0Esc0JBQXNCLEdBQUcsS0FBSztBQUNuRSxNQUFNSSxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRSxZQUFZRixtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNRyxjQUFjLElBQUlDLElBQUk7SUFBQztJQUFPO0lBQWE7Q0FBTTtBQUN2RCxZQUFZLEdBQ1pULHNCQUFzQixHQUFHRixPQUFPWSxNQUFNLENBQUM7SUFDbkNDLEtBQUs7SUFDTEMsVUFBVTtJQUNWQyxLQUFLO0FBQ1Q7QUFDQSxjQUFjLEdBQ2QsTUFBTVgsbUNBQW1DSyxVQUFVTyx3QkFBd0I7SUFDdkVDLFlBQVlDLEVBQUUsRUFBRUMsS0FBSyxFQUFFQyxPQUFPLENBQUU7UUFDNUIsS0FBSyxDQUFDRixJQUFJRTtRQUNWLElBQUksQ0FBQ0EsT0FBTyxHQUFHQTtRQUNmLE9BQVFEO1lBQ0osS0FBS2pCLFFBQVFHLGNBQWMsQ0FBQ1EsR0FBRztnQkFDM0IsSUFBSSxDQUFDUSxPQUFPLEdBQUc7Z0JBQ2Y7WUFDSixLQUFLbkIsUUFBUUcsY0FBYyxDQUFDUyxRQUFRO2dCQUNoQyxJQUFJLENBQUNPLE9BQU8sR0FBRztnQkFDZjtZQUNKLEtBQUtuQixRQUFRRyxjQUFjLENBQUNVLEdBQUc7Z0JBQzNCLElBQUksQ0FBQ00sT0FBTyxHQUFHO2dCQUNmO1lBQ0o7Z0JBQ0ksSUFBSSxDQUFDQSxPQUFPLEdBQUc7Z0JBQ2Y7UUFDUjtRQUNBLElBQUksQ0FBQ0YsS0FBSyxHQUFHQTtJQUNqQjtJQUNBRyxnQkFBZ0JDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUU7UUFDdkMsTUFBTU4sUUFBUSxJQUFJLENBQUNBLEtBQUs7UUFDeEIsSUFBSSxDQUFDVCxZQUFZZ0IsR0FBRyxDQUFDUCxRQUFRO1lBQ3pCLE9BQU9NLFNBQVMsSUFBSW5CLFFBQVFxQix5QkFBeUIsQ0FBQyxDQUFDLGdDQUFnQyxFQUFFLENBQUMsR0FBR25CLFFBQVFvQixZQUFZLEVBQUUxQixRQUFRRyxjQUFjLEVBQUUsQ0FBQyxDQUFDO1FBQ2pKO1FBQ0EsK0NBQStDO1FBQy9DLEtBQUssQ0FBQ3dCLHVCQUF1Qk4sUUFBUUMsU0FBUztZQUFFSCxTQUFTLElBQUksQ0FBQ0EsT0FBTztRQUFDLEdBQUcsQ0FBQ1MsS0FBS0M7WUFDM0UsSUFBSUQsT0FBTyxRQUFRQyxJQUFJQyxFQUFFLEtBQUssR0FDMUIsT0FBT1AsU0FBU1EsV0FBV2Q7WUFDL0IsT0FBT1csT0FBTyxPQUNSTCxTQUFTSyxPQUNUTCxTQUFTLElBQUluQixRQUFRNEIsaUJBQWlCLENBQUM7UUFDakQ7SUFDSjtBQUNKO0FBQ0FoQyxrQ0FBa0MsR0FBR0UsNEJBQ3JDLCtDQUErQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL3NldF9wcm9maWxpbmdfbGV2ZWwuanM/YWRjZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU2V0UHJvZmlsaW5nTGV2ZWxPcGVyYXRpb24gPSBleHBvcnRzLlByb2ZpbGluZ0xldmVsID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBjb21tYW5kXzEgPSByZXF1aXJlKFwiLi9jb21tYW5kXCIpO1xuY29uc3QgbGV2ZWxWYWx1ZXMgPSBuZXcgU2V0KFsnb2ZmJywgJ3Nsb3dfb25seScsICdhbGwnXSk7XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0cy5Qcm9maWxpbmdMZXZlbCA9IE9iamVjdC5mcmVlemUoe1xuICAgIG9mZjogJ29mZicsXG4gICAgc2xvd09ubHk6ICdzbG93X29ubHknLFxuICAgIGFsbDogJ2FsbCdcbn0pO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgU2V0UHJvZmlsaW5nTGV2ZWxPcGVyYXRpb24gZXh0ZW5kcyBjb21tYW5kXzEuQ29tbWFuZENhbGxiYWNrT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihkYiwgbGV2ZWwsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoZGIsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICBzd2l0Y2ggKGxldmVsKSB7XG4gICAgICAgICAgICBjYXNlIGV4cG9ydHMuUHJvZmlsaW5nTGV2ZWwub2ZmOlxuICAgICAgICAgICAgICAgIHRoaXMucHJvZmlsZSA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGV4cG9ydHMuUHJvZmlsaW5nTGV2ZWwuc2xvd09ubHk6XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9maWxlID0gMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZXhwb3J0cy5Qcm9maWxpbmdMZXZlbC5hbGw6XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9maWxlID0gMjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9maWxlID0gMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxldmVsID0gbGV2ZWw7XG4gICAgfVxuICAgIGV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGxldmVsID0gdGhpcy5sZXZlbDtcbiAgICAgICAgaWYgKCFsZXZlbFZhbHVlcy5oYXMobGV2ZWwpKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgUHJvZmlsaW5nIGxldmVsIG11c3QgYmUgb25lIG9mIFwiJHsoMCwgdXRpbHNfMS5lbnVtVG9TdHJpbmcpKGV4cG9ydHMuUHJvZmlsaW5nTGV2ZWwpfVwiYCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKTogRGV0ZXJtaW5lIGVycm9yIHRvIHB1dCBoZXJlXG4gICAgICAgIHN1cGVyLmV4ZWN1dGVDb21tYW5kQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCB7IHByb2ZpbGU6IHRoaXMucHJvZmlsZSB9LCAoZXJyLCBkb2MpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIgPT0gbnVsbCAmJiBkb2Mub2sgPT09IDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHVuZGVmaW5lZCwgbGV2ZWwpO1xuICAgICAgICAgICAgcmV0dXJuIGVyciAhPSBudWxsXG4gICAgICAgICAgICAgICAgPyBjYWxsYmFjayhlcnIpXG4gICAgICAgICAgICAgICAgOiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignRXJyb3Igd2l0aCBwcm9maWxlIGNvbW1hbmQnKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuU2V0UHJvZmlsaW5nTGV2ZWxPcGVyYXRpb24gPSBTZXRQcm9maWxpbmdMZXZlbE9wZXJhdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNldF9wcm9maWxpbmdfbGV2ZWwuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiU2V0UHJvZmlsaW5nTGV2ZWxPcGVyYXRpb24iLCJQcm9maWxpbmdMZXZlbCIsImVycm9yXzEiLCJyZXF1aXJlIiwidXRpbHNfMSIsImNvbW1hbmRfMSIsImxldmVsVmFsdWVzIiwiU2V0IiwiZnJlZXplIiwib2ZmIiwic2xvd09ubHkiLCJhbGwiLCJDb21tYW5kQ2FsbGJhY2tPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImRiIiwibGV2ZWwiLCJvcHRpb25zIiwicHJvZmlsZSIsImV4ZWN1dGVDYWxsYmFjayIsInNlcnZlciIsInNlc3Npb24iLCJjYWxsYmFjayIsImhhcyIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJlbnVtVG9TdHJpbmciLCJleGVjdXRlQ29tbWFuZENhbGxiYWNrIiwiZXJyIiwiZG9jIiwib2siLCJ1bmRlZmluZWQiLCJNb25nb1J1bnRpbWVFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/set_profiling_level.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/stats.js":
/*!******************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/stats.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DbStatsOperation = exports.CollStatsOperation = void 0;\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/**\n * Get all the collection statistics.\n * @internal\n */ class CollStatsOperation extends command_1.CommandCallbackOperation {\n    /**\n     * Construct a Stats operation.\n     *\n     * @param collection - Collection instance\n     * @param options - Optional settings. See Collection.prototype.stats for a list of options.\n     */ constructor(collection, options){\n        super(collection, options);\n        this.options = options ?? {};\n        this.collectionName = collection.collectionName;\n    }\n    executeCallback(server, session, callback) {\n        const command = {\n            collStats: this.collectionName\n        };\n        if (this.options.scale != null) {\n            command.scale = this.options.scale;\n        }\n        super.executeCommandCallback(server, session, command, callback);\n    }\n}\nexports.CollStatsOperation = CollStatsOperation;\n/** @internal */ class DbStatsOperation extends command_1.CommandCallbackOperation {\n    constructor(db, options){\n        super(db, options);\n        this.options = options;\n    }\n    executeCallback(server, session, callback) {\n        const command = {\n            dbStats: true\n        };\n        if (this.options.scale != null) {\n            command.scale = this.options.scale;\n        }\n        super.executeCommandCallback(server, session, command, callback);\n    }\n}\nexports.DbStatsOperation = DbStatsOperation;\n(0, operation_1.defineAspects)(CollStatsOperation, [\n    operation_1.Aspect.READ_OPERATION\n]);\n(0, operation_1.defineAspects)(DbStatsOperation, [\n    operation_1.Aspect.READ_OPERATION\n]); //# sourceMappingURL=stats.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9zdGF0cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsd0JBQXdCLEdBQUdBLDBCQUEwQixHQUFHLEtBQUs7QUFDN0QsTUFBTUksWUFBWUMsbUJBQU9BLENBQUMseUVBQVc7QUFDckMsTUFBTUMsY0FBY0QsbUJBQU9BLENBQUMsNkVBQWE7QUFDekM7OztDQUdDLEdBQ0QsTUFBTUYsMkJBQTJCQyxVQUFVRyx3QkFBd0I7SUFDL0Q7Ozs7O0tBS0MsR0FDREMsWUFBWUMsVUFBVSxFQUFFQyxPQUFPLENBQUU7UUFDN0IsS0FBSyxDQUFDRCxZQUFZQztRQUNsQixJQUFJLENBQUNBLE9BQU8sR0FBR0EsV0FBVyxDQUFDO1FBQzNCLElBQUksQ0FBQ0MsY0FBYyxHQUFHRixXQUFXRSxjQUFjO0lBQ25EO0lBQ0FDLGdCQUFnQkMsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLFFBQVEsRUFBRTtRQUN2QyxNQUFNQyxVQUFVO1lBQUVDLFdBQVcsSUFBSSxDQUFDTixjQUFjO1FBQUM7UUFDakQsSUFBSSxJQUFJLENBQUNELE9BQU8sQ0FBQ1EsS0FBSyxJQUFJLE1BQU07WUFDNUJGLFFBQVFFLEtBQUssR0FBRyxJQUFJLENBQUNSLE9BQU8sQ0FBQ1EsS0FBSztRQUN0QztRQUNBLEtBQUssQ0FBQ0MsdUJBQXVCTixRQUFRQyxTQUFTRSxTQUFTRDtJQUMzRDtBQUNKO0FBQ0FmLDBCQUEwQixHQUFHRztBQUM3QixjQUFjLEdBQ2QsTUFBTUQseUJBQXlCRSxVQUFVRyx3QkFBd0I7SUFDN0RDLFlBQVlZLEVBQUUsRUFBRVYsT0FBTyxDQUFFO1FBQ3JCLEtBQUssQ0FBQ1UsSUFBSVY7UUFDVixJQUFJLENBQUNBLE9BQU8sR0FBR0E7SUFDbkI7SUFDQUUsZ0JBQWdCQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFO1FBQ3ZDLE1BQU1DLFVBQVU7WUFBRUssU0FBUztRQUFLO1FBQ2hDLElBQUksSUFBSSxDQUFDWCxPQUFPLENBQUNRLEtBQUssSUFBSSxNQUFNO1lBQzVCRixRQUFRRSxLQUFLLEdBQUcsSUFBSSxDQUFDUixPQUFPLENBQUNRLEtBQUs7UUFDdEM7UUFDQSxLQUFLLENBQUNDLHVCQUF1Qk4sUUFBUUMsU0FBU0UsU0FBU0Q7SUFDM0Q7QUFDSjtBQUNBZix3QkFBd0IsR0FBR0U7QUFDMUIsSUFBR0ksWUFBWWdCLGFBQWEsRUFBRW5CLG9CQUFvQjtJQUFDRyxZQUFZaUIsTUFBTSxDQUFDQyxjQUFjO0NBQUM7QUFDckYsSUFBR2xCLFlBQVlnQixhQUFhLEVBQUVwQixrQkFBa0I7SUFBQ0ksWUFBWWlCLE1BQU0sQ0FBQ0MsY0FBYztDQUFDLEdBQ3BGLGlDQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL3N0YXRzLmpzPzQ0MDEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRiU3RhdHNPcGVyYXRpb24gPSBleHBvcnRzLkNvbGxTdGF0c09wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGNvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRcIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbi8qKlxuICogR2V0IGFsbCB0aGUgY29sbGVjdGlvbiBzdGF0aXN0aWNzLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIENvbGxTdGF0c09wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kQ2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBhIFN0YXRzIG9wZXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2xsZWN0aW9uIC0gQ29sbGVjdGlvbiBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MuIFNlZSBDb2xsZWN0aW9uLnByb3RvdHlwZS5zdGF0cyBmb3IgYSBsaXN0IG9mIG9wdGlvbnMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihjb2xsZWN0aW9uLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uTmFtZSA9IGNvbGxlY3Rpb24uY29sbGVjdGlvbk5hbWU7XG4gICAgfVxuICAgIGV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSB7IGNvbGxTdGF0czogdGhpcy5jb2xsZWN0aW9uTmFtZSB9O1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNjYWxlICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuc2NhbGUgPSB0aGlzLm9wdGlvbnMuc2NhbGU7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIuZXhlY3V0ZUNvbW1hbmRDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNvbW1hbmQsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5leHBvcnRzLkNvbGxTdGF0c09wZXJhdGlvbiA9IENvbGxTdGF0c09wZXJhdGlvbjtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIERiU3RhdHNPcGVyYXRpb24gZXh0ZW5kcyBjb21tYW5kXzEuQ29tbWFuZENhbGxiYWNrT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihkYiwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihkYiwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfVxuICAgIGV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSB7IGRiU3RhdHM6IHRydWUgfTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zY2FsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBjb21tYW5kLnNjYWxlID0gdGhpcy5vcHRpb25zLnNjYWxlO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmV4ZWN1dGVDb21tYW5kQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjb21tYW5kLCBjYWxsYmFjayk7XG4gICAgfVxufVxuZXhwb3J0cy5EYlN0YXRzT3BlcmF0aW9uID0gRGJTdGF0c09wZXJhdGlvbjtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShDb2xsU3RhdHNPcGVyYXRpb24sIFtvcGVyYXRpb25fMS5Bc3BlY3QuUkVBRF9PUEVSQVRJT05dKTtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShEYlN0YXRzT3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LlJFQURfT1BFUkFUSU9OXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdGF0cy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJEYlN0YXRzT3BlcmF0aW9uIiwiQ29sbFN0YXRzT3BlcmF0aW9uIiwiY29tbWFuZF8xIiwicmVxdWlyZSIsIm9wZXJhdGlvbl8xIiwiQ29tbWFuZENhbGxiYWNrT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJjb2xsZWN0aW9uIiwib3B0aW9ucyIsImNvbGxlY3Rpb25OYW1lIiwiZXhlY3V0ZUNhbGxiYWNrIiwic2VydmVyIiwic2Vzc2lvbiIsImNhbGxiYWNrIiwiY29tbWFuZCIsImNvbGxTdGF0cyIsInNjYWxlIiwiZXhlY3V0ZUNvbW1hbmRDYWxsYmFjayIsImRiIiwiZGJTdGF0cyIsImRlZmluZUFzcGVjdHMiLCJBc3BlY3QiLCJSRUFEX09QRVJBVElPTiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/stats.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/update.js":
/*!*******************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/update.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.makeUpdateStatement = exports.ReplaceOneOperation = exports.UpdateManyOperation = exports.UpdateOneOperation = exports.UpdateOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class UpdateOperation extends command_1.CommandCallbackOperation {\n    constructor(ns, statements, options){\n        super(undefined, options);\n        this.options = options;\n        this.ns = ns;\n        this.statements = statements;\n    }\n    get canRetryWrite() {\n        if (super.canRetryWrite === false) {\n            return false;\n        }\n        return this.statements.every((op)=>op.multi == null || op.multi === false);\n    }\n    executeCallback(server, session, callback) {\n        const options = this.options ?? {};\n        const ordered = typeof options.ordered === \"boolean\" ? options.ordered : true;\n        const command = {\n            update: this.ns.collection,\n            updates: this.statements,\n            ordered\n        };\n        if (typeof options.bypassDocumentValidation === \"boolean\") {\n            command.bypassDocumentValidation = options.bypassDocumentValidation;\n        }\n        if (options.let) {\n            command.let = options.let;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (options.comment !== undefined) {\n            command.comment = options.comment;\n        }\n        const unacknowledgedWrite = this.writeConcern && this.writeConcern.w === 0;\n        if (unacknowledgedWrite) {\n            if (this.statements.find((o)=>o.hint)) {\n                // TODO(NODE-3541): fix error for hint with unacknowledged writes\n                callback(new error_1.MongoCompatibilityError(`hint is not supported with unacknowledged writes`));\n                return;\n            }\n        }\n        super.executeCommandCallback(server, session, command, callback);\n    }\n}\nexports.UpdateOperation = UpdateOperation;\n/** @internal */ class UpdateOneOperation extends UpdateOperation {\n    constructor(collection, filter, update, options){\n        super(collection.s.namespace, [\n            makeUpdateStatement(filter, update, {\n                ...options,\n                multi: false\n            })\n        ], options);\n        if (!(0, utils_1.hasAtomicOperators)(update)) {\n            throw new error_1.MongoInvalidArgumentError(\"Update document requires atomic operators\");\n        }\n    }\n    executeCallback(server, session, callback) {\n        super.executeCallback(server, session, (err, res)=>{\n            if (err || !res) return callback(err);\n            if (this.explain != null) return callback(undefined, res);\n            if (res.code) return callback(new error_1.MongoServerError(res));\n            if (res.writeErrors) return callback(new error_1.MongoServerError(res.writeErrors[0]));\n            callback(undefined, {\n                acknowledged: (this.writeConcern?.w !== 0) ?? true,\n                modifiedCount: res.nModified != null ? res.nModified : res.n,\n                upsertedId: Array.isArray(res.upserted) && res.upserted.length > 0 ? res.upserted[0]._id : null,\n                upsertedCount: Array.isArray(res.upserted) && res.upserted.length ? res.upserted.length : 0,\n                matchedCount: Array.isArray(res.upserted) && res.upserted.length > 0 ? 0 : res.n\n            });\n        });\n    }\n}\nexports.UpdateOneOperation = UpdateOneOperation;\n/** @internal */ class UpdateManyOperation extends UpdateOperation {\n    constructor(collection, filter, update, options){\n        super(collection.s.namespace, [\n            makeUpdateStatement(filter, update, {\n                ...options,\n                multi: true\n            })\n        ], options);\n        if (!(0, utils_1.hasAtomicOperators)(update)) {\n            throw new error_1.MongoInvalidArgumentError(\"Update document requires atomic operators\");\n        }\n    }\n    executeCallback(server, session, callback) {\n        super.executeCallback(server, session, (err, res)=>{\n            if (err || !res) return callback(err);\n            if (this.explain != null) return callback(undefined, res);\n            if (res.code) return callback(new error_1.MongoServerError(res));\n            if (res.writeErrors) return callback(new error_1.MongoServerError(res.writeErrors[0]));\n            callback(undefined, {\n                acknowledged: (this.writeConcern?.w !== 0) ?? true,\n                modifiedCount: res.nModified != null ? res.nModified : res.n,\n                upsertedId: Array.isArray(res.upserted) && res.upserted.length > 0 ? res.upserted[0]._id : null,\n                upsertedCount: Array.isArray(res.upserted) && res.upserted.length ? res.upserted.length : 0,\n                matchedCount: Array.isArray(res.upserted) && res.upserted.length > 0 ? 0 : res.n\n            });\n        });\n    }\n}\nexports.UpdateManyOperation = UpdateManyOperation;\n/** @internal */ class ReplaceOneOperation extends UpdateOperation {\n    constructor(collection, filter, replacement, options){\n        super(collection.s.namespace, [\n            makeUpdateStatement(filter, replacement, {\n                ...options,\n                multi: false\n            })\n        ], options);\n        if ((0, utils_1.hasAtomicOperators)(replacement)) {\n            throw new error_1.MongoInvalidArgumentError(\"Replacement document must not contain atomic operators\");\n        }\n    }\n    executeCallback(server, session, callback) {\n        super.executeCallback(server, session, (err, res)=>{\n            if (err || !res) return callback(err);\n            if (this.explain != null) return callback(undefined, res);\n            if (res.code) return callback(new error_1.MongoServerError(res));\n            if (res.writeErrors) return callback(new error_1.MongoServerError(res.writeErrors[0]));\n            callback(undefined, {\n                acknowledged: (this.writeConcern?.w !== 0) ?? true,\n                modifiedCount: res.nModified != null ? res.nModified : res.n,\n                upsertedId: Array.isArray(res.upserted) && res.upserted.length > 0 ? res.upserted[0]._id : null,\n                upsertedCount: Array.isArray(res.upserted) && res.upserted.length ? res.upserted.length : 0,\n                matchedCount: Array.isArray(res.upserted) && res.upserted.length > 0 ? 0 : res.n\n            });\n        });\n    }\n}\nexports.ReplaceOneOperation = ReplaceOneOperation;\nfunction makeUpdateStatement(filter, update, options) {\n    if (filter == null || typeof filter !== \"object\") {\n        throw new error_1.MongoInvalidArgumentError(\"Selector must be a valid JavaScript object\");\n    }\n    if (update == null || typeof update !== \"object\") {\n        throw new error_1.MongoInvalidArgumentError(\"Document must be a valid JavaScript object\");\n    }\n    const op = {\n        q: filter,\n        u: update\n    };\n    if (typeof options.upsert === \"boolean\") {\n        op.upsert = options.upsert;\n    }\n    if (options.multi) {\n        op.multi = options.multi;\n    }\n    if (options.hint) {\n        op.hint = options.hint;\n    }\n    if (options.arrayFilters) {\n        op.arrayFilters = options.arrayFilters;\n    }\n    if (options.collation) {\n        op.collation = options.collation;\n    }\n    return op;\n}\nexports.makeUpdateStatement = makeUpdateStatement;\n(0, operation_1.defineAspects)(UpdateOperation, [\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.WRITE_OPERATION,\n    operation_1.Aspect.SKIP_COLLATION\n]);\n(0, operation_1.defineAspects)(UpdateOneOperation, [\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.WRITE_OPERATION,\n    operation_1.Aspect.EXPLAINABLE,\n    operation_1.Aspect.SKIP_COLLATION\n]);\n(0, operation_1.defineAspects)(UpdateManyOperation, [\n    operation_1.Aspect.WRITE_OPERATION,\n    operation_1.Aspect.EXPLAINABLE,\n    operation_1.Aspect.SKIP_COLLATION\n]);\n(0, operation_1.defineAspects)(ReplaceOneOperation, [\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.WRITE_OPERATION,\n    operation_1.Aspect.SKIP_COLLATION\n]); //# sourceMappingURL=update.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy91cGRhdGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDJCQUEyQixHQUFHQSwyQkFBMkIsR0FBR0EsMkJBQTJCLEdBQUdBLDBCQUEwQixHQUFHQSx1QkFBdUIsR0FBRyxLQUFLO0FBQ3RKLE1BQU1PLFVBQVVDLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1FLFlBQVlGLG1CQUFPQSxDQUFDLHlFQUFXO0FBQ3JDLE1BQU1HLGNBQWNILG1CQUFPQSxDQUFDLDZFQUFhO0FBQ3pDLGNBQWMsR0FDZCxNQUFNRix3QkFBd0JJLFVBQVVFLHdCQUF3QjtJQUM1REMsWUFBWUMsRUFBRSxFQUFFQyxVQUFVLEVBQUVDLE9BQU8sQ0FBRTtRQUNqQyxLQUFLLENBQUNDLFdBQVdEO1FBQ2pCLElBQUksQ0FBQ0EsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0YsRUFBRSxHQUFHQTtRQUNWLElBQUksQ0FBQ0MsVUFBVSxHQUFHQTtJQUN0QjtJQUNBLElBQUlHLGdCQUFnQjtRQUNoQixJQUFJLEtBQUssQ0FBQ0Esa0JBQWtCLE9BQU87WUFDL0IsT0FBTztRQUNYO1FBQ0EsT0FBTyxJQUFJLENBQUNILFVBQVUsQ0FBQ0ksS0FBSyxDQUFDQyxDQUFBQSxLQUFNQSxHQUFHQyxLQUFLLElBQUksUUFBUUQsR0FBR0MsS0FBSyxLQUFLO0lBQ3hFO0lBQ0FDLGdCQUFnQkMsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLFFBQVEsRUFBRTtRQUN2QyxNQUFNVCxVQUFVLElBQUksQ0FBQ0EsT0FBTyxJQUFJLENBQUM7UUFDakMsTUFBTVUsVUFBVSxPQUFPVixRQUFRVSxPQUFPLEtBQUssWUFBWVYsUUFBUVUsT0FBTyxHQUFHO1FBQ3pFLE1BQU1DLFVBQVU7WUFDWkMsUUFBUSxJQUFJ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aWIvb3BlcmF0aW9ucy91cGRhdGUuanM/ZjA3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubWFrZVVwZGF0ZVN0YXRlbWVudCA9IGV4cG9ydHMuUmVwbGFjZU9uZU9wZXJhdGlvbiA9IGV4cG9ydHMuVXBkYXRlTWFueU9wZXJhdGlvbiA9IGV4cG9ydHMuVXBkYXRlT25lT3BlcmF0aW9uID0gZXhwb3J0cy5VcGRhdGVPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IGNvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRcIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIFVwZGF0ZU9wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kQ2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKG5zLCBzdGF0ZW1lbnRzLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKHVuZGVmaW5lZCwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMubnMgPSBucztcbiAgICAgICAgdGhpcy5zdGF0ZW1lbnRzID0gc3RhdGVtZW50cztcbiAgICB9XG4gICAgZ2V0IGNhblJldHJ5V3JpdGUoKSB7XG4gICAgICAgIGlmIChzdXBlci5jYW5SZXRyeVdyaXRlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlbWVudHMuZXZlcnkob3AgPT4gb3AubXVsdGkgPT0gbnVsbCB8fCBvcC5tdWx0aSA9PT0gZmFsc2UpO1xuICAgIH1cbiAgICBleGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zID8/IHt9O1xuICAgICAgICBjb25zdCBvcmRlcmVkID0gdHlwZW9mIG9wdGlvbnMub3JkZXJlZCA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5vcmRlcmVkIDogdHJ1ZTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHtcbiAgICAgICAgICAgIHVwZGF0ZTogdGhpcy5ucy5jb2xsZWN0aW9uLFxuICAgICAgICAgICAgdXBkYXRlczogdGhpcy5zdGF0ZW1lbnRzLFxuICAgICAgICAgICAgb3JkZXJlZFxuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uID0gb3B0aW9ucy5ieXBhc3NEb2N1bWVudFZhbGlkYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMubGV0KSB7XG4gICAgICAgICAgICBjb21tYW5kLmxldCA9IG9wdGlvbnMubGV0O1xuICAgICAgICB9XG4gICAgICAgIC8vIHdlIGNoZWNrIGZvciB1bmRlZmluZWQgc3BlY2lmaWNhbGx5IGhlcmUgdG8gYWxsb3cgZmFsc3kgdmFsdWVzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICBpZiAob3B0aW9ucy5jb21tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuY29tbWVudCA9IG9wdGlvbnMuY29tbWVudDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1bmFja25vd2xlZGdlZFdyaXRlID0gdGhpcy53cml0ZUNvbmNlcm4gJiYgdGhpcy53cml0ZUNvbmNlcm4udyA9PT0gMDtcbiAgICAgICAgaWYgKHVuYWNrbm93bGVkZ2VkV3JpdGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlbWVudHMuZmluZCgobykgPT4gby5oaW50KSkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNTQxKTogZml4IGVycm9yIGZvciBoaW50IHdpdGggdW5hY2tub3dsZWRnZWQgd3JpdGVzXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IoYGhpbnQgaXMgbm90IHN1cHBvcnRlZCB3aXRoIHVuYWNrbm93bGVkZ2VkIHdyaXRlc2ApKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIuZXhlY3V0ZUNvbW1hbmRDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNvbW1hbmQsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5leHBvcnRzLlVwZGF0ZU9wZXJhdGlvbiA9IFVwZGF0ZU9wZXJhdGlvbjtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIFVwZGF0ZU9uZU9wZXJhdGlvbiBleHRlbmRzIFVwZGF0ZU9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgZmlsdGVyLCB1cGRhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoY29sbGVjdGlvbi5zLm5hbWVzcGFjZSwgW21ha2VVcGRhdGVTdGF0ZW1lbnQoZmlsdGVyLCB1cGRhdGUsIHsgLi4ub3B0aW9ucywgbXVsdGk6IGZhbHNlIH0pXSwgb3B0aW9ucyk7XG4gICAgICAgIGlmICghKDAsIHV0aWxzXzEuaGFzQXRvbWljT3BlcmF0b3JzKSh1cGRhdGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdVcGRhdGUgZG9jdW1lbnQgcmVxdWlyZXMgYXRvbWljIG9wZXJhdG9ycycpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIHN1cGVyLmV4ZWN1dGVDYWxsYmFjayhzZXJ2ZXIsIHNlc3Npb24sIChlcnIsIHJlcykgPT4ge1xuICAgICAgICAgICAgaWYgKGVyciB8fCAhcmVzKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZXhwbGFpbiAhPSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh1bmRlZmluZWQsIHJlcyk7XG4gICAgICAgICAgICBpZiAocmVzLmNvZGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvU2VydmVyRXJyb3IocmVzKSk7XG4gICAgICAgICAgICBpZiAocmVzLndyaXRlRXJyb3JzKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yKHJlcy53cml0ZUVycm9yc1swXSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCB7XG4gICAgICAgICAgICAgICAgYWNrbm93bGVkZ2VkOiB0aGlzLndyaXRlQ29uY2Vybj8udyAhPT0gMCA/PyB0cnVlLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVkQ291bnQ6IHJlcy5uTW9kaWZpZWQgIT0gbnVsbCA/IHJlcy5uTW9kaWZpZWQgOiByZXMubixcbiAgICAgICAgICAgICAgICB1cHNlcnRlZElkOiBBcnJheS5pc0FycmF5KHJlcy51cHNlcnRlZCkgJiYgcmVzLnVwc2VydGVkLmxlbmd0aCA+IDAgPyByZXMudXBzZXJ0ZWRbMF0uX2lkIDogbnVsbCxcbiAgICAgICAgICAgICAgICB1cHNlcnRlZENvdW50OiBBcnJheS5pc0FycmF5KHJlcy51cHNlcnRlZCkgJiYgcmVzLnVwc2VydGVkLmxlbmd0aCA/IHJlcy51cHNlcnRlZC5sZW5ndGggOiAwLFxuICAgICAgICAgICAgICAgIG1hdGNoZWRDb3VudDogQXJyYXkuaXNBcnJheShyZXMudXBzZXJ0ZWQpICYmIHJlcy51cHNlcnRlZC5sZW5ndGggPiAwID8gMCA6IHJlcy5uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5VcGRhdGVPbmVPcGVyYXRpb24gPSBVcGRhdGVPbmVPcGVyYXRpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBVcGRhdGVNYW55T3BlcmF0aW9uIGV4dGVuZHMgVXBkYXRlT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBmaWx0ZXIsIHVwZGF0ZSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihjb2xsZWN0aW9uLnMubmFtZXNwYWNlLCBbbWFrZVVwZGF0ZVN0YXRlbWVudChmaWx0ZXIsIHVwZGF0ZSwgeyAuLi5vcHRpb25zLCBtdWx0aTogdHJ1ZSB9KV0sIG9wdGlvbnMpO1xuICAgICAgICBpZiAoISgwLCB1dGlsc18xLmhhc0F0b21pY09wZXJhdG9ycykodXBkYXRlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignVXBkYXRlIGRvY3VtZW50IHJlcXVpcmVzIGF0b21pYyBvcGVyYXRvcnMnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCBjYWxsYmFjaykge1xuICAgICAgICBzdXBlci5leGVjdXRlQ2FsbGJhY2soc2VydmVyLCBzZXNzaW9uLCAoZXJyLCByZXMpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIgfHwgIXJlcylcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmV4cGxhaW4gIT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodW5kZWZpbmVkLCByZXMpO1xuICAgICAgICAgICAgaWYgKHJlcy5jb2RlKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yKHJlcykpO1xuICAgICAgICAgICAgaWYgKHJlcy53cml0ZUVycm9ycylcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29TZXJ2ZXJFcnJvcihyZXMud3JpdGVFcnJvcnNbMF0pKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwge1xuICAgICAgICAgICAgICAgIGFja25vd2xlZGdlZDogdGhpcy53cml0ZUNvbmNlcm4/LncgIT09IDAgPz8gdHJ1ZSxcbiAgICAgICAgICAgICAgICBtb2RpZmllZENvdW50OiByZXMubk1vZGlmaWVkICE9IG51bGwgPyByZXMubk1vZGlmaWVkIDogcmVzLm4sXG4gICAgICAgICAgICAgICAgdXBzZXJ0ZWRJZDogQXJyYXkuaXNBcnJheShyZXMudXBzZXJ0ZWQpICYmIHJlcy51cHNlcnRlZC5sZW5ndGggPiAwID8gcmVzLnVwc2VydGVkWzBdLl9pZCA6IG51bGwsXG4gICAgICAgICAgICAgICAgdXBzZXJ0ZWRDb3VudDogQXJyYXkuaXNBcnJheShyZXMudXBzZXJ0ZWQpICYmIHJlcy51cHNlcnRlZC5sZW5ndGggPyByZXMudXBzZXJ0ZWQubGVuZ3RoIDogMCxcbiAgICAgICAgICAgICAgICBtYXRjaGVkQ291bnQ6IEFycmF5LmlzQXJyYXkocmVzLnVwc2VydGVkKSAmJiByZXMudXBzZXJ0ZWQubGVuZ3RoID4gMCA/IDAgOiByZXMublxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuVXBkYXRlTWFueU9wZXJhdGlvbiA9IFVwZGF0ZU1hbnlPcGVyYXRpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBSZXBsYWNlT25lT3BlcmF0aW9uIGV4dGVuZHMgVXBkYXRlT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBmaWx0ZXIsIHJlcGxhY2VtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24ucy5uYW1lc3BhY2UsIFttYWtlVXBkYXRlU3RhdGVtZW50KGZpbHRlciwgcmVwbGFjZW1lbnQsIHsgLi4ub3B0aW9ucywgbXVsdGk6IGZhbHNlIH0pXSwgb3B0aW9ucyk7XG4gICAgICAgIGlmICgoMCwgdXRpbHNfMS5oYXNBdG9taWNPcGVyYXRvcnMpKHJlcGxhY2VtZW50KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignUmVwbGFjZW1lbnQgZG9jdW1lbnQgbXVzdCBub3QgY29udGFpbiBhdG9taWMgb3BlcmF0b3JzJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgc3VwZXIuZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgKGVyciwgcmVzKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyIHx8ICFyZXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICBpZiAodGhpcy5leHBsYWluICE9IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHVuZGVmaW5lZCwgcmVzKTtcbiAgICAgICAgICAgIGlmIChyZXMuY29kZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29TZXJ2ZXJFcnJvcihyZXMpKTtcbiAgICAgICAgICAgIGlmIChyZXMud3JpdGVFcnJvcnMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvU2VydmVyRXJyb3IocmVzLndyaXRlRXJyb3JzWzBdKSk7XG4gICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICBhY2tub3dsZWRnZWQ6IHRoaXMud3JpdGVDb25jZXJuPy53ICE9PSAwID8/IHRydWUsXG4gICAgICAgICAgICAgICAgbW9kaWZpZWRDb3VudDogcmVzLm5Nb2RpZmllZCAhPSBudWxsID8gcmVzLm5Nb2RpZmllZCA6IHJlcy5uLFxuICAgICAgICAgICAgICAgIHVwc2VydGVkSWQ6IEFycmF5LmlzQXJyYXkocmVzLnVwc2VydGVkKSAmJiByZXMudXBzZXJ0ZWQubGVuZ3RoID4gMCA/IHJlcy51cHNlcnRlZFswXS5faWQgOiBudWxsLFxuICAgICAgICAgICAgICAgIHVwc2VydGVkQ291bnQ6IEFycmF5LmlzQXJyYXkocmVzLnVwc2VydGVkKSAmJiByZXMudXBzZXJ0ZWQubGVuZ3RoID8gcmVzLnVwc2VydGVkLmxlbmd0aCA6IDAsXG4gICAgICAgICAgICAgICAgbWF0Y2hlZENvdW50OiBBcnJheS5pc0FycmF5KHJlcy51cHNlcnRlZCkgJiYgcmVzLnVwc2VydGVkLmxlbmd0aCA+IDAgPyAwIDogcmVzLm5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLlJlcGxhY2VPbmVPcGVyYXRpb24gPSBSZXBsYWNlT25lT3BlcmF0aW9uO1xuZnVuY3Rpb24gbWFrZVVwZGF0ZVN0YXRlbWVudChmaWx0ZXIsIHVwZGF0ZSwgb3B0aW9ucykge1xuICAgIGlmIChmaWx0ZXIgPT0gbnVsbCB8fCB0eXBlb2YgZmlsdGVyICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdTZWxlY3RvciBtdXN0IGJlIGEgdmFsaWQgSmF2YVNjcmlwdCBvYmplY3QnKTtcbiAgICB9XG4gICAgaWYgKHVwZGF0ZSA9PSBudWxsIHx8IHR5cGVvZiB1cGRhdGUgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0RvY3VtZW50IG11c3QgYmUgYSB2YWxpZCBKYXZhU2NyaXB0IG9iamVjdCcpO1xuICAgIH1cbiAgICBjb25zdCBvcCA9IHsgcTogZmlsdGVyLCB1OiB1cGRhdGUgfTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMudXBzZXJ0ID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgb3AudXBzZXJ0ID0gb3B0aW9ucy51cHNlcnQ7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLm11bHRpKSB7XG4gICAgICAgIG9wLm11bHRpID0gb3B0aW9ucy5tdWx0aTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuaGludCkge1xuICAgICAgICBvcC5oaW50ID0gb3B0aW9ucy5oaW50O1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5hcnJheUZpbHRlcnMpIHtcbiAgICAgICAgb3AuYXJyYXlGaWx0ZXJzID0gb3B0aW9ucy5hcnJheUZpbHRlcnM7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmNvbGxhdGlvbikge1xuICAgICAgICBvcC5jb2xsYXRpb24gPSBvcHRpb25zLmNvbGxhdGlvbjtcbiAgICB9XG4gICAgcmV0dXJuIG9wO1xufVxuZXhwb3J0cy5tYWtlVXBkYXRlU3RhdGVtZW50ID0gbWFrZVVwZGF0ZVN0YXRlbWVudDtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShVcGRhdGVPcGVyYXRpb24sIFtvcGVyYXRpb25fMS5Bc3BlY3QuUkVUUllBQkxFLCBvcGVyYXRpb25fMS5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OLCBvcGVyYXRpb25fMS5Bc3BlY3QuU0tJUF9DT0xMQVRJT05dKTtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShVcGRhdGVPbmVPcGVyYXRpb24sIFtcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuUkVUUllBQkxFLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT04sXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LkVYUExBSU5BQkxFLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5TS0lQX0NPTExBVElPTlxuXSk7XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoVXBkYXRlTWFueU9wZXJhdGlvbiwgW1xuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT04sXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LkVYUExBSU5BQkxFLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5TS0lQX0NPTExBVElPTlxuXSk7XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoUmVwbGFjZU9uZU9wZXJhdGlvbiwgW1xuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5SRVRSWUFCTEUsXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTixcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuU0tJUF9DT0xMQVRJT05cbl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBkYXRlLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIm1ha2VVcGRhdGVTdGF0ZW1lbnQiLCJSZXBsYWNlT25lT3BlcmF0aW9uIiwiVXBkYXRlTWFueU9wZXJhdGlvbiIsIlVwZGF0ZU9uZU9wZXJhdGlvbiIsIlVwZGF0ZU9wZXJhdGlvbiIsImVycm9yXzEiLCJyZXF1aXJlIiwidXRpbHNfMSIsImNvbW1hbmRfMSIsIm9wZXJhdGlvbl8xIiwiQ29tbWFuZENhbGxiYWNrT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJucyIsInN0YXRlbWVudHMiLCJvcHRpb25zIiwidW5kZWZpbmVkIiwiY2FuUmV0cnlXcml0ZSIsImV2ZXJ5Iiwib3AiLCJtdWx0aSIsImV4ZWN1dGVDYWxsYmFjayIsInNlcnZlciIsInNlc3Npb24iLCJjYWxsYmFjayIsIm9yZGVyZWQiLCJjb21tYW5kIiwidXBkYXRlIiwiY29sbGVjdGlvbiIsInVwZGF0ZXMiLCJieXBhc3NEb2N1bWVudFZhbGlkYXRpb24iLCJsZXQiLCJjb21tZW50IiwidW5hY2tub3dsZWRnZWRXcml0ZSIsIndyaXRlQ29uY2VybiIsInciLCJmaW5kIiwibyIsImhpbnQiLCJNb25nb0NvbXBhdGliaWxpdHlFcnJvciIsImV4ZWN1dGVDb21tYW5kQ2FsbGJhY2siLCJmaWx0ZXIiLCJzIiwibmFtZXNwYWNlIiwiaGFzQXRvbWljT3BlcmF0b3JzIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsImVyciIsInJlcyIsImV4cGxhaW4iLCJjb2RlIiwiTW9uZ29TZXJ2ZXJFcnJvciIsIndyaXRlRXJyb3JzIiwiYWNrbm93bGVkZ2VkIiwibW9kaWZpZWRDb3VudCIsIm5Nb2RpZmllZCIsIm4iLCJ1cHNlcnRlZElkIiwiQXJyYXkiLCJpc0FycmF5IiwidXBzZXJ0ZWQiLCJsZW5ndGgiLCJfaWQiLCJ1cHNlcnRlZENvdW50IiwibWF0Y2hlZENvdW50IiwicmVwbGFjZW1lbnQiLCJxIiwidSIsInVwc2VydCIsImFycmF5RmlsdGVycyIsImNvbGxhdGlvbiIsImRlZmluZUFzcGVjdHMiLCJBc3BlY3QiLCJSRVRSWUFCTEUiLCJXUklURV9PUEVSQVRJT04iLCJTS0lQX0NPTExBVElPTiIsIkVYUExBSU5BQkxFIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/update.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/validate_collection.js":
/*!********************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/validate_collection.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ValidateCollectionOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\n/** @internal */ class ValidateCollectionOperation extends command_1.CommandCallbackOperation {\n    constructor(admin, collectionName, options){\n        // Decorate command with extra options\n        const command = {\n            validate: collectionName\n        };\n        const keys = Object.keys(options);\n        for(let i = 0; i < keys.length; i++){\n            if (Object.prototype.hasOwnProperty.call(options, keys[i]) && keys[i] !== \"session\") {\n                command[keys[i]] = options[keys[i]];\n            }\n        }\n        super(admin.s.db, options);\n        this.options = options;\n        this.command = command;\n        this.collectionName = collectionName;\n    }\n    executeCallback(server, session, callback) {\n        const collectionName = this.collectionName;\n        super.executeCommandCallback(server, session, this.command, (err, doc)=>{\n            if (err != null) return callback(err);\n            // TODO(NODE-3483): Replace these with MongoUnexpectedServerResponseError\n            if (doc.ok === 0) return callback(new error_1.MongoRuntimeError(\"Error with validate command\"));\n            if (doc.result != null && typeof doc.result !== \"string\") return callback(new error_1.MongoRuntimeError(\"Error with validation data\"));\n            if (doc.result != null && doc.result.match(/exception|corrupt/) != null) return callback(new error_1.MongoRuntimeError(`Invalid collection ${collectionName}`));\n            if (doc.valid != null && !doc.valid) return callback(new error_1.MongoRuntimeError(`Invalid collection ${collectionName}`));\n            return callback(undefined, doc);\n        });\n    }\n}\nexports.ValidateCollectionOperation = ValidateCollectionOperation; //# sourceMappingURL=validate_collection.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy92YWxpZGF0ZV9jb2xsZWN0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxtQ0FBbUMsR0FBRyxLQUFLO0FBQzNDLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1DLFlBQVlELG1CQUFPQSxDQUFDLHlFQUFXO0FBQ3JDLGNBQWMsR0FDZCxNQUFNRixvQ0FBb0NHLFVBQVVDLHdCQUF3QjtJQUN4RUMsWUFBWUMsS0FBSyxFQUFFQyxjQUFjLEVBQUVDLE9BQU8sQ0FBRTtRQUN4QyxzQ0FBc0M7UUFDdEMsTUFBTUMsVUFBVTtZQUFFQyxVQUFVSDtRQUFlO1FBQzNDLE1BQU1JLE9BQU9mLE9BQU9lLElBQUksQ0FBQ0g7UUFDekIsSUFBSyxJQUFJSSxJQUFJLEdBQUdBLElBQUlELEtBQUtFLE1BQU0sRUFBRUQsSUFBSztZQUNsQyxJQUFJaEIsT0FBT2tCLFNBQVMsQ0FBQ0MsY0FBYyxDQUFDQyxJQUFJLENBQUNSLFNBQVNHLElBQUksQ0FBQ0MsRUFBRSxLQUFLRCxJQUFJLENBQUNDLEVBQUUsS0FBSyxXQUFXO2dCQUNqRkgsT0FBTyxDQUFDRSxJQUFJLENBQUNDLEVBQUUsQ0FBQyxHQUFHSixPQUFPLENBQUNHLElBQUksQ0FBQ0MsRUFBRSxDQUFDO1lBQ3ZDO1FBQ0o7UUFDQSxLQUFLLENBQUNOLE1BQU1XLENBQUMsQ0FBQ0MsRUFBRSxFQUFFVjtRQUNsQixJQUFJLENBQUNBLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNGLGNBQWMsR0FBR0E7SUFDMUI7SUFDQVksZ0JBQWdCQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFO1FBQ3ZDLE1BQU1mLGlCQUFpQixJQUFJLENBQUNBLGNBQWM7UUFDMUMsS0FBSyxDQUFDZ0IsdUJBQXVCSCxRQUFRQyxTQUFTLElBQUksQ0FBQ1osT0FBTyxFQUFFLENBQUNlLEtBQUtDO1lBQzlELElBQUlELE9BQU8sTUFDUCxPQUFPRixTQUFTRTtZQUNwQix5RUFBeUU7WUFDekUsSUFBSUMsSUFBSUMsRUFBRSxLQUFLLEdBQ1gsT0FBT0osU0FBUyxJQUFJckIsUUFBUTBCLGlCQUFpQixDQUFDO1lBQ2xELElBQUlGLElBQUlHLE1BQU0sSUFBSSxRQUFRLE9BQU9ILElBQUlHLE1BQU0sS0FBSyxVQUM1QyxPQUFPTixTQUFTLElBQUlyQixRQUFRMEIsaUJBQWlCLENBQUM7WUFDbEQsSUFBSUYsSUFBSUcsTUFBTSxJQUFJLFFBQVFILElBQUlHLE1BQU0sQ0FBQ0MsS0FBSyxDQUFDLHdCQUF3QixNQUMvRCxPQUFPUCxTQUFTLElBQUlyQixRQUFRMEIsaUJBQWlCLENBQUMsQ0FBQyxtQkFBbUIsRUFBRXBCLGVBQWUsQ0FBQztZQUN4RixJQUFJa0IsSUFBSUssS0FBSyxJQUFJLFFBQVEsQ0FBQ0wsSUFBSUssS0FBSyxFQUMvQixPQUFPUixTQUFTLElBQUlyQixRQUFRMEIsaUJBQWlCLENBQUMsQ0FBQyxtQkFBbUIsRUFBRXBCLGVBQWUsQ0FBQztZQUN4RixPQUFPZSxTQUFTUyxXQUFXTjtRQUMvQjtJQUNKO0FBQ0o7QUFDQTNCLG1DQUFtQyxHQUFHRSw2QkFDdEMsK0NBQStDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvdmFsaWRhdGVfY29sbGVjdGlvbi5qcz9iYTk4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5WYWxpZGF0ZUNvbGxlY3Rpb25PcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgY29tbWFuZF8xID0gcmVxdWlyZShcIi4vY29tbWFuZFwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIFZhbGlkYXRlQ29sbGVjdGlvbk9wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kQ2FsbGJhY2tPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGFkbWluLCBjb2xsZWN0aW9uTmFtZSwgb3B0aW9ucykge1xuICAgICAgICAvLyBEZWNvcmF0ZSBjb21tYW5kIHdpdGggZXh0cmEgb3B0aW9uc1xuICAgICAgICBjb25zdCBjb21tYW5kID0geyB2YWxpZGF0ZTogY29sbGVjdGlvbk5hbWUgfTtcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9wdGlvbnMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3B0aW9ucywga2V5c1tpXSkgJiYga2V5c1tpXSAhPT0gJ3Nlc3Npb24nKSB7XG4gICAgICAgICAgICAgICAgY29tbWFuZFtrZXlzW2ldXSA9IG9wdGlvbnNba2V5c1tpXV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoYWRtaW4ucy5kYiwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuY29tbWFuZCA9IGNvbW1hbmQ7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbk5hbWUgPSBjb2xsZWN0aW9uTmFtZTtcbiAgICB9XG4gICAgZXhlY3V0ZUNhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbk5hbWUgPSB0aGlzLmNvbGxlY3Rpb25OYW1lO1xuICAgICAgICBzdXBlci5leGVjdXRlQ29tbWFuZENhbGxiYWNrKHNlcnZlciwgc2Vzc2lvbiwgdGhpcy5jb21tYW5kLCAoZXJyLCBkb2MpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIgIT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKTogUmVwbGFjZSB0aGVzZSB3aXRoIE1vbmdvVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlRXJyb3JcbiAgICAgICAgICAgIGlmIChkb2Mub2sgPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdFcnJvciB3aXRoIHZhbGlkYXRlIGNvbW1hbmQnKSk7XG4gICAgICAgICAgICBpZiAoZG9jLnJlc3VsdCAhPSBudWxsICYmIHR5cGVvZiBkb2MucmVzdWx0ICE9PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ0Vycm9yIHdpdGggdmFsaWRhdGlvbiBkYXRhJykpO1xuICAgICAgICAgICAgaWYgKGRvYy5yZXN1bHQgIT0gbnVsbCAmJiBkb2MucmVzdWx0Lm1hdGNoKC9leGNlcHRpb258Y29ycnVwdC8pICE9IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBJbnZhbGlkIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uTmFtZX1gKSk7XG4gICAgICAgICAgICBpZiAoZG9jLnZhbGlkICE9IG51bGwgJiYgIWRvYy52YWxpZClcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoYEludmFsaWQgY29sbGVjdGlvbiAke2NvbGxlY3Rpb25OYW1lfWApKTtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh1bmRlZmluZWQsIGRvYyk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuVmFsaWRhdGVDb2xsZWN0aW9uT3BlcmF0aW9uID0gVmFsaWRhdGVDb2xsZWN0aW9uT3BlcmF0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmFsaWRhdGVfY29sbGVjdGlvbi5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJWYWxpZGF0ZUNvbGxlY3Rpb25PcGVyYXRpb24iLCJlcnJvcl8xIiwicmVxdWlyZSIsImNvbW1hbmRfMSIsIkNvbW1hbmRDYWxsYmFja09wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwiYWRtaW4iLCJjb2xsZWN0aW9uTmFtZSIsIm9wdGlvbnMiLCJjb21tYW5kIiwidmFsaWRhdGUiLCJrZXlzIiwiaSIsImxlbmd0aCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInMiLCJkYiIsImV4ZWN1dGVDYWxsYmFjayIsInNlcnZlciIsInNlc3Npb24iLCJjYWxsYmFjayIsImV4ZWN1dGVDb21tYW5kQ2FsbGJhY2siLCJlcnIiLCJkb2MiLCJvayIsIk1vbmdvUnVudGltZUVycm9yIiwicmVzdWx0IiwibWF0Y2giLCJ2YWxpZCIsInVuZGVmaW5lZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/validate_collection.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/read_concern.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/read_concern.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ReadConcern = exports.ReadConcernLevel = void 0;\n/** @public */ exports.ReadConcernLevel = Object.freeze({\n    local: \"local\",\n    majority: \"majority\",\n    linearizable: \"linearizable\",\n    available: \"available\",\n    snapshot: \"snapshot\"\n});\n/**\n * The MongoDB ReadConcern, which allows for control of the consistency and isolation properties\n * of the data read from replica sets and replica set shards.\n * @public\n *\n * @see https://www.mongodb.com/docs/manual/reference/read-concern/index.html\n */ class ReadConcern {\n    /** Constructs a ReadConcern from the read concern level.*/ constructor(level){\n        /**\n         * A spec test exists that allows level to be any string.\n         * \"invalid readConcern with out stage\"\n         * @see ./test/spec/crud/v2/aggregate-out-readConcern.json\n         * @see https://github.com/mongodb/specifications/blob/master/source/read-write-concern/read-write-concern.rst#unknown-levels-and-additional-options-for-string-based-readconcerns\n         */ this.level = exports.ReadConcernLevel[level] ?? level;\n    }\n    /**\n     * Construct a ReadConcern given an options object.\n     *\n     * @param options - The options object from which to extract the write concern.\n     */ static fromOptions(options) {\n        if (options == null) {\n            return;\n        }\n        if (options.readConcern) {\n            const { readConcern } = options;\n            if (readConcern instanceof ReadConcern) {\n                return readConcern;\n            } else if (typeof readConcern === \"string\") {\n                return new ReadConcern(readConcern);\n            } else if (\"level\" in readConcern && readConcern.level) {\n                return new ReadConcern(readConcern.level);\n            }\n        }\n        if (options.level) {\n            return new ReadConcern(options.level);\n        }\n        return;\n    }\n    static get MAJORITY() {\n        return exports.ReadConcernLevel.majority;\n    }\n    static get AVAILABLE() {\n        return exports.ReadConcernLevel.available;\n    }\n    static get LINEARIZABLE() {\n        return exports.ReadConcernLevel.linearizable;\n    }\n    static get SNAPSHOT() {\n        return exports.ReadConcernLevel.snapshot;\n    }\n    toJSON() {\n        return {\n            level: this.level\n        };\n    }\n}\nexports.ReadConcern = ReadConcern; //# sourceMappingURL=read_concern.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvcmVhZF9jb25jZXJuLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxtQkFBbUIsR0FBR0Esd0JBQXdCLEdBQUcsS0FBSztBQUN0RCxZQUFZLEdBQ1pBLHdCQUF3QixHQUFHRixPQUFPTSxNQUFNLENBQUM7SUFDckNDLE9BQU87SUFDUEMsVUFBVTtJQUNWQyxjQUFjO0lBQ2RDLFdBQVc7SUFDWEMsVUFBVTtBQUNkO0FBQ0E7Ozs7OztDQU1DLEdBQ0QsTUFBTVA7SUFDRix5REFBeUQsR0FDekRRLFlBQVlDLEtBQUssQ0FBRTtRQUNmOzs7OztTQUtDLEdBQ0QsSUFBSSxDQUFDQSxLQUFLLEdBQUdYLFFBQVFHLGdCQUFnQixDQUFDUSxNQUFNLElBQUlBO0lBQ3BEO0lBQ0E7Ozs7S0FJQyxHQUNELE9BQU9DLFlBQVlDLE9BQU8sRUFBRTtRQUN4QixJQUFJQSxXQUFXLE1BQU07WUFDakI7UUFDSjtRQUNBLElBQUlBLFFBQVFDLFdBQVcsRUFBRTtZQUNyQixNQUFNLEVBQUVBLFdBQVcsRUFBRSxHQUFHRDtZQUN4QixJQUFJQyx1QkFBdUJaLGFBQWE7Z0JBQ3BDLE9BQU9ZO1lBQ1gsT0FDSyxJQUFJLE9BQU9BLGdCQUFnQixVQUFVO2dCQUN0QyxPQUFPLElBQUlaLFlBQVlZO1lBQzNCLE9BQ0ssSUFBSSxXQUFXQSxlQUFlQSxZQUFZSCxLQUFLLEVBQUU7Z0JBQ2xELE9BQU8sSUFBSVQsWUFBWVksWUFBWUgsS0FBSztZQUM1QztRQUNKO1FBQ0EsSUFBSUUsUUFBUUYsS0FBSyxFQUFFO1lBQ2YsT0FBTyxJQUFJVCxZQUFZVyxRQUFRRixLQUFLO1FBQ3hDO1FBQ0E7SUFDSjtJQUNBLFdBQVdJLFdBQVc7UUFDbEIsT0FBT2YsUUFBUUcsZ0JBQWdCLENBQUNHLFFBQVE7SUFDNUM7SUFDQSxXQUFXVSxZQUFZO1FBQ25CLE9BQU9oQixRQUFRRyxnQkFBZ0IsQ0FBQ0ssU0FBUztJQUM3QztJQUNBLFdBQVdTLGVBQWU7UUFDdEIsT0FBT2pCLFFBQVFHLGdCQUFnQixDQUFDSSxZQUFZO0lBQ2hEO0lBQ0EsV0FBV1csV0FBVztRQUNsQixPQUFPbEIsUUFBUUcsZ0JBQWdCLENBQUNNLFFBQVE7SUFDNUM7SUFDQVUsU0FBUztRQUNMLE9BQU87WUFBRVIsT0FBTyxJQUFJLENBQUNBLEtBQUs7UUFBQztJQUMvQjtBQUNKO0FBQ0FYLG1CQUFtQixHQUFHRSxhQUN0Qix3Q0FBd0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvcmVhZF9jb25jZXJuLmpzPzk1Y2IiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlJlYWRDb25jZXJuID0gZXhwb3J0cy5SZWFkQ29uY2VybkxldmVsID0gdm9pZCAwO1xuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydHMuUmVhZENvbmNlcm5MZXZlbCA9IE9iamVjdC5mcmVlemUoe1xuICAgIGxvY2FsOiAnbG9jYWwnLFxuICAgIG1ham9yaXR5OiAnbWFqb3JpdHknLFxuICAgIGxpbmVhcml6YWJsZTogJ2xpbmVhcml6YWJsZScsXG4gICAgYXZhaWxhYmxlOiAnYXZhaWxhYmxlJyxcbiAgICBzbmFwc2hvdDogJ3NuYXBzaG90J1xufSk7XG4vKipcbiAqIFRoZSBNb25nb0RCIFJlYWRDb25jZXJuLCB3aGljaCBhbGxvd3MgZm9yIGNvbnRyb2wgb2YgdGhlIGNvbnNpc3RlbmN5IGFuZCBpc29sYXRpb24gcHJvcGVydGllc1xuICogb2YgdGhlIGRhdGEgcmVhZCBmcm9tIHJlcGxpY2Egc2V0cyBhbmQgcmVwbGljYSBzZXQgc2hhcmRzLlxuICogQHB1YmxpY1xuICpcbiAqIEBzZWUgaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL3JlYWQtY29uY2Vybi9pbmRleC5odG1sXG4gKi9cbmNsYXNzIFJlYWRDb25jZXJuIHtcbiAgICAvKiogQ29uc3RydWN0cyBhIFJlYWRDb25jZXJuIGZyb20gdGhlIHJlYWQgY29uY2VybiBsZXZlbC4qL1xuICAgIGNvbnN0cnVjdG9yKGxldmVsKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHNwZWMgdGVzdCBleGlzdHMgdGhhdCBhbGxvd3MgbGV2ZWwgdG8gYmUgYW55IHN0cmluZy5cbiAgICAgICAgICogXCJpbnZhbGlkIHJlYWRDb25jZXJuIHdpdGggb3V0IHN0YWdlXCJcbiAgICAgICAgICogQHNlZSAuL3Rlc3Qvc3BlYy9jcnVkL3YyL2FnZ3JlZ2F0ZS1vdXQtcmVhZENvbmNlcm4uanNvblxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tb25nb2RiL3NwZWNpZmljYXRpb25zL2Jsb2IvbWFzdGVyL3NvdXJjZS9yZWFkLXdyaXRlLWNvbmNlcm4vcmVhZC13cml0ZS1jb25jZXJuLnJzdCN1bmtub3duLWxldmVscy1hbmQtYWRkaXRpb25hbC1vcHRpb25zLWZvci1zdHJpbmctYmFzZWQtcmVhZGNvbmNlcm5zXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxldmVsID0gZXhwb3J0cy5SZWFkQ29uY2VybkxldmVsW2xldmVsXSA/PyBsZXZlbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IGEgUmVhZENvbmNlcm4gZ2l2ZW4gYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIG9iamVjdCBmcm9tIHdoaWNoIHRvIGV4dHJhY3QgdGhlIHdyaXRlIGNvbmNlcm4uXG4gICAgICovXG4gICAgc3RhdGljIGZyb21PcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnJlYWRDb25jZXJuKSB7XG4gICAgICAgICAgICBjb25zdCB7IHJlYWRDb25jZXJuIH0gPSBvcHRpb25zO1xuICAgICAgICAgICAgaWYgKHJlYWRDb25jZXJuIGluc3RhbmNlb2YgUmVhZENvbmNlcm4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZENvbmNlcm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgcmVhZENvbmNlcm4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWFkQ29uY2VybihyZWFkQ29uY2Vybik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgnbGV2ZWwnIGluIHJlYWRDb25jZXJuICYmIHJlYWRDb25jZXJuLmxldmVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWFkQ29uY2VybihyZWFkQ29uY2Vybi5sZXZlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMubGV2ZWwpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVhZENvbmNlcm4ob3B0aW9ucy5sZXZlbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IE1BSk9SSVRZKCkge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5SZWFkQ29uY2VybkxldmVsLm1ham9yaXR5O1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IEFWQUlMQUJMRSgpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuUmVhZENvbmNlcm5MZXZlbC5hdmFpbGFibGU7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgTElORUFSSVpBQkxFKCkge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5SZWFkQ29uY2VybkxldmVsLmxpbmVhcml6YWJsZTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBTTkFQU0hPVCgpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuUmVhZENvbmNlcm5MZXZlbC5zbmFwc2hvdDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4geyBsZXZlbDogdGhpcy5sZXZlbCB9O1xuICAgIH1cbn1cbmV4cG9ydHMuUmVhZENvbmNlcm4gPSBSZWFkQ29uY2Vybjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWRfY29uY2Vybi5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJSZWFkQ29uY2VybiIsIlJlYWRDb25jZXJuTGV2ZWwiLCJmcmVlemUiLCJsb2NhbCIsIm1ham9yaXR5IiwibGluZWFyaXphYmxlIiwiYXZhaWxhYmxlIiwic25hcHNob3QiLCJjb25zdHJ1Y3RvciIsImxldmVsIiwiZnJvbU9wdGlvbnMiLCJvcHRpb25zIiwicmVhZENvbmNlcm4iLCJNQUpPUklUWSIsIkFWQUlMQUJMRSIsIkxJTkVBUklaQUJMRSIsIlNOQVBTSE9UIiwidG9KU09OIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/read_concern.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/read_preference.js":
/*!*****************************************************!*\
  !*** ./node_modules/mongodb/lib/read_preference.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ReadPreference = exports.ReadPreferenceMode = void 0;\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/** @public */ exports.ReadPreferenceMode = Object.freeze({\n    primary: \"primary\",\n    primaryPreferred: \"primaryPreferred\",\n    secondary: \"secondary\",\n    secondaryPreferred: \"secondaryPreferred\",\n    nearest: \"nearest\"\n});\n/**\n * The **ReadPreference** class is a class that represents a MongoDB ReadPreference and is\n * used to construct connections.\n * @public\n *\n * @see https://www.mongodb.com/docs/manual/core/read-preference/\n */ class ReadPreference {\n    /**\n     * @param mode - A string describing the read preference mode (primary|primaryPreferred|secondary|secondaryPreferred|nearest)\n     * @param tags - A tag set used to target reads to members with the specified tag(s). tagSet is not available if using read preference mode primary.\n     * @param options - Additional read preference options\n     */ constructor(mode, tags, options){\n        if (!ReadPreference.isValid(mode)) {\n            throw new error_1.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(mode)}`);\n        }\n        if (options == null && typeof tags === \"object\" && !Array.isArray(tags)) {\n            options = tags;\n            tags = undefined;\n        } else if (tags && !Array.isArray(tags)) {\n            throw new error_1.MongoInvalidArgumentError(\"ReadPreference tags must be an array\");\n        }\n        this.mode = mode;\n        this.tags = tags;\n        this.hedge = options?.hedge;\n        this.maxStalenessSeconds = undefined;\n        this.minWireVersion = undefined;\n        options = options ?? {};\n        if (options.maxStalenessSeconds != null) {\n            if (options.maxStalenessSeconds <= 0) {\n                throw new error_1.MongoInvalidArgumentError(\"maxStalenessSeconds must be a positive integer\");\n            }\n            this.maxStalenessSeconds = options.maxStalenessSeconds;\n            // NOTE: The minimum required wire version is 5 for this read preference. If the existing\n            //       topology has a lower value then a MongoError will be thrown during server selection.\n            this.minWireVersion = 5;\n        }\n        if (this.mode === ReadPreference.PRIMARY) {\n            if (this.tags && Array.isArray(this.tags) && this.tags.length > 0) {\n                throw new error_1.MongoInvalidArgumentError(\"Primary read preference cannot be combined with tags\");\n            }\n            if (this.maxStalenessSeconds) {\n                throw new error_1.MongoInvalidArgumentError(\"Primary read preference cannot be combined with maxStalenessSeconds\");\n            }\n            if (this.hedge) {\n                throw new error_1.MongoInvalidArgumentError(\"Primary read preference cannot be combined with hedge\");\n            }\n        }\n    }\n    // Support the deprecated `preference` property introduced in the porcelain layer\n    get preference() {\n        return this.mode;\n    }\n    static fromString(mode) {\n        return new ReadPreference(mode);\n    }\n    /**\n     * Construct a ReadPreference given an options object.\n     *\n     * @param options - The options object from which to extract the read preference.\n     */ static fromOptions(options) {\n        if (!options) return;\n        const readPreference = options.readPreference ?? options.session?.transaction.options.readPreference;\n        const readPreferenceTags = options.readPreferenceTags;\n        if (readPreference == null) {\n            return;\n        }\n        if (typeof readPreference === \"string\") {\n            return new ReadPreference(readPreference, readPreferenceTags, {\n                maxStalenessSeconds: options.maxStalenessSeconds,\n                hedge: options.hedge\n            });\n        } else if (!(readPreference instanceof ReadPreference) && typeof readPreference === \"object\") {\n            const mode = readPreference.mode || readPreference.preference;\n            if (mode && typeof mode === \"string\") {\n                return new ReadPreference(mode, readPreference.tags ?? readPreferenceTags, {\n                    maxStalenessSeconds: readPreference.maxStalenessSeconds,\n                    hedge: options.hedge\n                });\n            }\n        }\n        if (readPreferenceTags) {\n            readPreference.tags = readPreferenceTags;\n        }\n        return readPreference;\n    }\n    /**\n     * Replaces options.readPreference with a ReadPreference instance\n     */ static translate(options) {\n        if (options.readPreference == null) return options;\n        const r = options.readPreference;\n        if (typeof r === \"string\") {\n            options.readPreference = new ReadPreference(r);\n        } else if (r && !(r instanceof ReadPreference) && typeof r === \"object\") {\n            const mode = r.mode || r.preference;\n            if (mode && typeof mode === \"string\") {\n                options.readPreference = new ReadPreference(mode, r.tags, {\n                    maxStalenessSeconds: r.maxStalenessSeconds\n                });\n            }\n        } else if (!(r instanceof ReadPreference)) {\n            throw new error_1.MongoInvalidArgumentError(`Invalid read preference: ${r}`);\n        }\n        return options;\n    }\n    /**\n     * Validate if a mode is legal\n     *\n     * @param mode - The string representing the read preference mode.\n     */ static isValid(mode) {\n        const VALID_MODES = new Set([\n            ReadPreference.PRIMARY,\n            ReadPreference.PRIMARY_PREFERRED,\n            ReadPreference.SECONDARY,\n            ReadPreference.SECONDARY_PREFERRED,\n            ReadPreference.NEAREST,\n            null\n        ]);\n        return VALID_MODES.has(mode);\n    }\n    /**\n     * Validate if a mode is legal\n     *\n     * @param mode - The string representing the read preference mode.\n     */ isValid(mode) {\n        return ReadPreference.isValid(typeof mode === \"string\" ? mode : this.mode);\n    }\n    /**\n     * Indicates that this readPreference needs the \"SecondaryOk\" bit when sent over the wire\n     * @see https://www.mongodb.com/docs/manual/reference/mongodb-wire-protocol/#op-query\n     */ secondaryOk() {\n        const NEEDS_SECONDARYOK = new Set([\n            ReadPreference.PRIMARY_PREFERRED,\n            ReadPreference.SECONDARY,\n            ReadPreference.SECONDARY_PREFERRED,\n            ReadPreference.NEAREST\n        ]);\n        return NEEDS_SECONDARYOK.has(this.mode);\n    }\n    /**\n     * Check if the two ReadPreferences are equivalent\n     *\n     * @param readPreference - The read preference with which to check equality\n     */ equals(readPreference) {\n        return readPreference.mode === this.mode;\n    }\n    /** Return JSON representation */ toJSON() {\n        const readPreference = {\n            mode: this.mode\n        };\n        if (Array.isArray(this.tags)) readPreference.tags = this.tags;\n        if (this.maxStalenessSeconds) readPreference.maxStalenessSeconds = this.maxStalenessSeconds;\n        if (this.hedge) readPreference.hedge = this.hedge;\n        return readPreference;\n    }\n}\nReadPreference.PRIMARY = exports.ReadPreferenceMode.primary;\nReadPreference.PRIMARY_PREFERRED = exports.ReadPreferenceMode.primaryPreferred;\nReadPreference.SECONDARY = exports.ReadPreferenceMode.secondary;\nReadPreference.SECONDARY_PREFERRED = exports.ReadPreferenceMode.secondaryPreferred;\nReadPreference.NEAREST = exports.ReadPreferenceMode.nearest;\nReadPreference.primary = new ReadPreference(exports.ReadPreferenceMode.primary);\nReadPreference.primaryPreferred = new ReadPreference(exports.ReadPreferenceMode.primaryPreferred);\nReadPreference.secondary = new ReadPreference(exports.ReadPreferenceMode.secondary);\nReadPreference.secondaryPreferred = new ReadPreference(exports.ReadPreferenceMode.secondaryPreferred);\nReadPreference.nearest = new ReadPreference(exports.ReadPreferenceMode.nearest);\nexports.ReadPreference = ReadPreference; //# sourceMappingURL=read_preference.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvcmVhZF9wcmVmZXJlbmNlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxzQkFBc0IsR0FBR0EsMEJBQTBCLEdBQUcsS0FBSztBQUMzRCxNQUFNSSxVQUFVQyxtQkFBT0EsQ0FBQywwREFBUztBQUNqQyxZQUFZLEdBQ1pMLDBCQUEwQixHQUFHRixPQUFPUSxNQUFNLENBQUM7SUFDdkNDLFNBQVM7SUFDVEMsa0JBQWtCO0lBQ2xCQyxXQUFXO0lBQ1hDLG9CQUFvQjtJQUNwQkMsU0FBUztBQUNiO0FBQ0E7Ozs7OztDQU1DLEdBQ0QsTUFBTVQ7SUFDRjs7OztLQUlDLEdBQ0RVLFlBQVlDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxPQUFPLENBQUU7UUFDN0IsSUFBSSxDQUFDYixlQUFlYyxPQUFPLENBQUNILE9BQU87WUFDL0IsTUFBTSxJQUFJVCxRQUFRYSx5QkFBeUIsQ0FBQyxDQUFDLDZCQUE2QixFQUFFQyxLQUFLQyxTQUFTLENBQUNOLE1BQU0sQ0FBQztRQUN0RztRQUNBLElBQUlFLFdBQVcsUUFBUSxPQUFPRCxTQUFTLFlBQVksQ0FBQ00sTUFBTUMsT0FBTyxDQUFDUCxPQUFPO1lBQ3JFQyxVQUFVRDtZQUNWQSxPQUFPUTtRQUNYLE9BQ0ssSUFBSVIsUUFBUSxDQUFDTSxNQUFNQyxPQUFPLENBQUNQLE9BQU87WUFDbkMsTUFBTSxJQUFJVixRQUFRYSx5QkFBeUIsQ0FBQztRQUNoRDtRQUNBLElBQUksQ0FBQ0osSUFBSSxHQUFHQTtRQUNaLElBQUksQ0FBQ0MsSUFBSSxHQUFHQTtRQUNaLElBQUksQ0FBQ1MsS0FBSyxHQUFHUixTQUFTUTtRQUN0QixJQUFJLENBQUNDLG1CQUFtQixHQUFHRjtRQUMzQixJQUFJLENBQUNHLGNBQWMsR0FBR0g7UUFDdEJQLFVBQVVBLFdBQVcsQ0FBQztRQUN0QixJQUFJQSxRQUFRUyxtQkFBbUIsSUFB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QUN4Qk8sZUFBZVAsbUJBQW1CLEdBQUcsSUFBSSxDQUFDQSxtQkFBbUI7UUFDakUsSUFBSSxJQUFJLENBQUNELEtBQUssRUFDVlEsZUFBZVIsS0FBSyxHQUFHLElBQUksQ0FBQ0EsS0FBSztRQUNyQyxPQUFPUTtJQUNYO0FBQ0o7QUFDQTdCLGVBQWV3QixPQUFPLEdBQUcxQixRQUFRRyxrQkFBa0IsQ0FBQ0ksT0FBTztBQUMzREwsZUFBZXFDLGlCQUFpQixHQUFHdkMsUUFBUUcsa0JBQWtCLENBQUNLLGdCQUFnQjtBQUM5RU4sZUFBZXNDLFNBQVMsR0FBR3hDLFFBQVFHLGtCQUFrQixDQUFDTSxTQUFTO0FBQy9EUCxlQUFldUMsbUJBQW1CLEdBQUd6QyxRQUFRRyxrQkFBa0IsQ0FBQ08sa0JBQWtCO0FBQ2xGUixlQUFld0MsT0FBTyxHQUFHMUMsUUFBUUcsa0JBQWtCLENBQUNRLE9BQU87QUFDM0RULGVBQWVLLE9BQU8sR0FBRyxJQUFJTCxlQUFlRixRQUFRRyxrQkFBa0IsQ0FBQ0ksT0FBTztBQUM5RUwsZUFBZU0sZ0JBQWdCLEdBQUcsSUFBSU4sZUFBZUYsUUFBUUcsa0JBQWtCLENBQUNLLGdCQUFnQjtBQUNoR04sZUFBZU8sU0FBUyxHQUFHLElBQUlQLGVBQWVGLFFBQVFHLGtCQUFrQixDQUFDTSxTQUFTO0FBQ2xGUCxlQUFlUSxrQkFBa0IsR0FBRyxJQUFJUixlQUFlRixRQUFRRyxrQkFBa0IsQ0FBQ08sa0JBQWtCO0FBQ3BHUixlQUFlUyxPQUFPLEdBQUcsSUFBSVQsZUFBZUYsUUFBUUcsa0JBQWtCLENBQUNRLE9BQU87QUFDOUVYLHNCQUFzQixHQUFHRSxnQkFDekIsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL3JlYWRfcHJlZmVyZW5jZS5qcz8yYjUwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5SZWFkUHJlZmVyZW5jZSA9IGV4cG9ydHMuUmVhZFByZWZlcmVuY2VNb2RlID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuL2Vycm9yXCIpO1xuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydHMuUmVhZFByZWZlcmVuY2VNb2RlID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgcHJpbWFyeTogJ3ByaW1hcnknLFxuICAgIHByaW1hcnlQcmVmZXJyZWQ6ICdwcmltYXJ5UHJlZmVycmVkJyxcbiAgICBzZWNvbmRhcnk6ICdzZWNvbmRhcnknLFxuICAgIHNlY29uZGFyeVByZWZlcnJlZDogJ3NlY29uZGFyeVByZWZlcnJlZCcsXG4gICAgbmVhcmVzdDogJ25lYXJlc3QnXG59KTtcbi8qKlxuICogVGhlICoqUmVhZFByZWZlcmVuY2UqKiBjbGFzcyBpcyBhIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIE1vbmdvREIgUmVhZFByZWZlcmVuY2UgYW5kIGlzXG4gKiB1c2VkIHRvIGNvbnN0cnVjdCBjb25uZWN0aW9ucy5cbiAqIEBwdWJsaWNcbiAqXG4gKiBAc2VlIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL2NvcmUvcmVhZC1wcmVmZXJlbmNlL1xuICovXG5jbGFzcyBSZWFkUHJlZmVyZW5jZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIG1vZGUgLSBBIHN0cmluZyBkZXNjcmliaW5nIHRoZSByZWFkIHByZWZlcmVuY2UgbW9kZSAocHJpbWFyeXxwcmltYXJ5UHJlZmVycmVkfHNlY29uZGFyeXxzZWNvbmRhcnlQcmVmZXJyZWR8bmVhcmVzdClcbiAgICAgKiBAcGFyYW0gdGFncyAtIEEgdGFnIHNldCB1c2VkIHRvIHRhcmdldCByZWFkcyB0byBtZW1iZXJzIHdpdGggdGhlIHNwZWNpZmllZCB0YWcocykuIHRhZ1NldCBpcyBub3QgYXZhaWxhYmxlIGlmIHVzaW5nIHJlYWQgcHJlZmVyZW5jZSBtb2RlIHByaW1hcnkuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIHJlYWQgcHJlZmVyZW5jZSBvcHRpb25zXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobW9kZSwgdGFncywgb3B0aW9ucykge1xuICAgICAgICBpZiAoIVJlYWRQcmVmZXJlbmNlLmlzVmFsaWQobW9kZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYEludmFsaWQgcmVhZCBwcmVmZXJlbmNlIG1vZGUgJHtKU09OLnN0cmluZ2lmeShtb2RlKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucyA9PSBudWxsICYmIHR5cGVvZiB0YWdzID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheSh0YWdzKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHRhZ3M7XG4gICAgICAgICAgICB0YWdzID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRhZ3MgJiYgIUFycmF5LmlzQXJyYXkodGFncykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1JlYWRQcmVmZXJlbmNlIHRhZ3MgbXVzdCBiZSBhbiBhcnJheScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgICAgIHRoaXMudGFncyA9IHRhZ3M7XG4gICAgICAgIHRoaXMuaGVkZ2UgPSBvcHRpb25zPy5oZWRnZTtcbiAgICAgICAgdGhpcy5tYXhTdGFsZW5lc3NTZWNvbmRzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm1pbldpcmVWZXJzaW9uID0gdW5kZWZpbmVkO1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMubWF4U3RhbGVuZXNzU2Vjb25kcyAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5tYXhTdGFsZW5lc3NTZWNvbmRzIDw9IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdtYXhTdGFsZW5lc3NTZWNvbmRzIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1heFN0YWxlbmVzc1NlY29uZHMgPSBvcHRpb25zLm1heFN0YWxlbmVzc1NlY29uZHM7XG4gICAgICAgICAgICAvLyBOT1RFOiBUaGUgbWluaW11bSByZXF1aXJlZCB3aXJlIHZlcnNpb24gaXMgNSBmb3IgdGhpcyByZWFkIHByZWZlcmVuY2UuIElmIHRoZSBleGlzdGluZ1xuICAgICAgICAgICAgLy8gICAgICAgdG9wb2xvZ3kgaGFzIGEgbG93ZXIgdmFsdWUgdGhlbiBhIE1vbmdvRXJyb3Igd2lsbCBiZSB0aHJvd24gZHVyaW5nIHNlcnZlciBzZWxlY3Rpb24uXG4gICAgICAgICAgICB0aGlzLm1pbldpcmVWZXJzaW9uID0gNTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSBSZWFkUHJlZmVyZW5jZS5QUklNQVJZKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YWdzICYmIEFycmF5LmlzQXJyYXkodGhpcy50YWdzKSAmJiB0aGlzLnRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1ByaW1hcnkgcmVhZCBwcmVmZXJlbmNlIGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIHRhZ3MnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm1heFN0YWxlbmVzc1NlY29uZHMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdQcmltYXJ5IHJlYWQgcHJlZmVyZW5jZSBjYW5ub3QgYmUgY29tYmluZWQgd2l0aCBtYXhTdGFsZW5lc3NTZWNvbmRzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5oZWRnZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1ByaW1hcnkgcmVhZCBwcmVmZXJlbmNlIGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIGhlZGdlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gU3VwcG9ydCB0aGUgZGVwcmVjYXRlZCBgcHJlZmVyZW5jZWAgcHJvcGVydHkgaW50cm9kdWNlZCBpbiB0aGUgcG9yY2VsYWluIGxheWVyXG4gICAgZ2V0IHByZWZlcmVuY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1vZGU7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tU3RyaW5nKG1vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWFkUHJlZmVyZW5jZShtb2RlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IGEgUmVhZFByZWZlcmVuY2UgZ2l2ZW4gYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIG9iamVjdCBmcm9tIHdoaWNoIHRvIGV4dHJhY3QgdGhlIHJlYWQgcHJlZmVyZW5jZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbU9wdGlvbnMob3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHJlYWRQcmVmZXJlbmNlID0gb3B0aW9ucy5yZWFkUHJlZmVyZW5jZSA/PyBvcHRpb25zLnNlc3Npb24/LnRyYW5zYWN0aW9uLm9wdGlvbnMucmVhZFByZWZlcmVuY2U7XG4gICAgICAgIGNvbnN0IHJlYWRQcmVmZXJlbmNlVGFncyA9IG9wdGlvbnMucmVhZFByZWZlcmVuY2VUYWdzO1xuICAgICAgICBpZiAocmVhZFByZWZlcmVuY2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcmVhZFByZWZlcmVuY2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlYWRQcmVmZXJlbmNlKHJlYWRQcmVmZXJlbmNlLCByZWFkUHJlZmVyZW5jZVRhZ3MsIHtcbiAgICAgICAgICAgICAgICBtYXhTdGFsZW5lc3NTZWNvbmRzOiBvcHRpb25zLm1heFN0YWxlbmVzc1NlY29uZHMsXG4gICAgICAgICAgICAgICAgaGVkZ2U6IG9wdGlvbnMuaGVkZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCEocmVhZFByZWZlcmVuY2UgaW5zdGFuY2VvZiBSZWFkUHJlZmVyZW5jZSkgJiYgdHlwZW9mIHJlYWRQcmVmZXJlbmNlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgbW9kZSA9IHJlYWRQcmVmZXJlbmNlLm1vZGUgfHwgcmVhZFByZWZlcmVuY2UucHJlZmVyZW5jZTtcbiAgICAgICAgICAgIGlmIChtb2RlICYmIHR5cGVvZiBtb2RlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVhZFByZWZlcmVuY2UobW9kZSwgcmVhZFByZWZlcmVuY2UudGFncyA/PyByZWFkUHJlZmVyZW5jZVRhZ3MsIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4U3RhbGVuZXNzU2Vjb25kczogcmVhZFByZWZlcmVuY2UubWF4U3RhbGVuZXNzU2Vjb25kcyxcbiAgICAgICAgICAgICAgICAgICAgaGVkZ2U6IG9wdGlvbnMuaGVkZ2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocmVhZFByZWZlcmVuY2VUYWdzKSB7XG4gICAgICAgICAgICByZWFkUHJlZmVyZW5jZS50YWdzID0gcmVhZFByZWZlcmVuY2VUYWdzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWFkUHJlZmVyZW5jZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVwbGFjZXMgb3B0aW9ucy5yZWFkUHJlZmVyZW5jZSB3aXRoIGEgUmVhZFByZWZlcmVuY2UgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBzdGF0aWMgdHJhbnNsYXRlKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMucmVhZFByZWZlcmVuY2UgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgICAgICBjb25zdCByID0gb3B0aW9ucy5yZWFkUHJlZmVyZW5jZTtcbiAgICAgICAgaWYgKHR5cGVvZiByID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgb3B0aW9ucy5yZWFkUHJlZmVyZW5jZSA9IG5ldyBSZWFkUHJlZmVyZW5jZShyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyICYmICEociBpbnN0YW5jZW9mIFJlYWRQcmVmZXJlbmNlKSAmJiB0eXBlb2YgciA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGUgPSByLm1vZGUgfHwgci5wcmVmZXJlbmNlO1xuICAgICAgICAgICAgaWYgKG1vZGUgJiYgdHlwZW9mIG1vZGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5yZWFkUHJlZmVyZW5jZSA9IG5ldyBSZWFkUHJlZmVyZW5jZShtb2RlLCByLnRhZ3MsIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4U3RhbGVuZXNzU2Vjb25kczogci5tYXhTdGFsZW5lc3NTZWNvbmRzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIShyIGluc3RhbmNlb2YgUmVhZFByZWZlcmVuY2UpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBJbnZhbGlkIHJlYWQgcHJlZmVyZW5jZTogJHtyfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZSBpZiBhIG1vZGUgaXMgbGVnYWxcbiAgICAgKlxuICAgICAqIEBwYXJhbSBtb2RlIC0gVGhlIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHJlYWQgcHJlZmVyZW5jZSBtb2RlLlxuICAgICAqL1xuICAgIHN0YXRpYyBpc1ZhbGlkKG1vZGUpIHtcbiAgICAgICAgY29uc3QgVkFMSURfTU9ERVMgPSBuZXcgU2V0KFtcbiAgICAgICAgICAgIFJlYWRQcmVmZXJlbmNlLlBSSU1BUlksXG4gICAgICAgICAgICBSZWFkUHJlZmVyZW5jZS5QUklNQVJZX1BSRUZFUlJFRCxcbiAgICAgICAgICAgIFJlYWRQcmVmZXJlbmNlLlNFQ09OREFSWSxcbiAgICAgICAgICAgIFJlYWRQcmVmZXJlbmNlLlNFQ09OREFSWV9QUkVGRVJSRUQsXG4gICAgICAgICAgICBSZWFkUHJlZmVyZW5jZS5ORUFSRVNULFxuICAgICAgICAgICAgbnVsbFxuICAgICAgICBdKTtcbiAgICAgICAgcmV0dXJuIFZBTElEX01PREVTLmhhcyhtb2RlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgaWYgYSBtb2RlIGlzIGxlZ2FsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbW9kZSAtIFRoZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSByZWFkIHByZWZlcmVuY2UgbW9kZS5cbiAgICAgKi9cbiAgICBpc1ZhbGlkKG1vZGUpIHtcbiAgICAgICAgcmV0dXJuIFJlYWRQcmVmZXJlbmNlLmlzVmFsaWQodHlwZW9mIG1vZGUgPT09ICdzdHJpbmcnID8gbW9kZSA6IHRoaXMubW9kZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoaXMgcmVhZFByZWZlcmVuY2UgbmVlZHMgdGhlIFwiU2Vjb25kYXJ5T2tcIiBiaXQgd2hlbiBzZW50IG92ZXIgdGhlIHdpcmVcbiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9tb25nb2RiLXdpcmUtcHJvdG9jb2wvI29wLXF1ZXJ5XG4gICAgICovXG4gICAgc2Vjb25kYXJ5T2soKSB7XG4gICAgICAgIGNvbnN0IE5FRURTX1NFQ09OREFSWU9LID0gbmV3IFNldChbXG4gICAgICAgICAgICBSZWFkUHJlZmVyZW5jZS5QUklNQVJZX1BSRUZFUlJFRCxcbiAgICAgICAgICAgIFJlYWRQcmVmZXJlbmNlLlNFQ09OREFSWSxcbiAgICAgICAgICAgIFJlYWRQcmVmZXJlbmNlLlNFQ09OREFSWV9QUkVGRVJSRUQsXG4gICAgICAgICAgICBSZWFkUHJlZmVyZW5jZS5ORUFSRVNUXG4gICAgICAgIF0pO1xuICAgICAgICByZXR1cm4gTkVFRFNfU0VDT05EQVJZT0suaGFzKHRoaXMubW9kZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSB0d28gUmVhZFByZWZlcmVuY2VzIGFyZSBlcXVpdmFsZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVhZFByZWZlcmVuY2UgLSBUaGUgcmVhZCBwcmVmZXJlbmNlIHdpdGggd2hpY2ggdG8gY2hlY2sgZXF1YWxpdHlcbiAgICAgKi9cbiAgICBlcXVhbHMocmVhZFByZWZlcmVuY2UpIHtcbiAgICAgICAgcmV0dXJuIHJlYWRQcmVmZXJlbmNlLm1vZGUgPT09IHRoaXMubW9kZTtcbiAgICB9XG4gICAgLyoqIFJldHVybiBKU09OIHJlcHJlc2VudGF0aW9uICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZWFkUHJlZmVyZW5jZSA9IHsgbW9kZTogdGhpcy5tb2RlIH07XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMudGFncykpXG4gICAgICAgICAgICByZWFkUHJlZmVyZW5jZS50YWdzID0gdGhpcy50YWdzO1xuICAgICAgICBpZiAodGhpcy5tYXhTdGFsZW5lc3NTZWNvbmRzKVxuICAgICAgICAgICAgcmVhZFByZWZlcmVuY2UubWF4U3RhbGVuZXNzU2Vjb25kcyA9IHRoaXMubWF4U3RhbGVuZXNzU2Vjb25kcztcbiAgICAgICAgaWYgKHRoaXMuaGVkZ2UpXG4gICAgICAgICAgICByZWFkUHJlZmVyZW5jZS5oZWRnZSA9IHRoaXMuaGVkZ2U7XG4gICAgICAgIHJldHVybiByZWFkUHJlZmVyZW5jZTtcbiAgICB9XG59XG5SZWFkUHJlZmVyZW5jZS5QUklNQVJZID0gZXhwb3J0cy5SZWFkUHJlZmVyZW5jZU1vZGUucHJpbWFyeTtcblJlYWRQcmVmZXJlbmNlLlBSSU1BUllfUFJFRkVSUkVEID0gZXhwb3J0cy5SZWFkUHJlZmVyZW5jZU1vZGUucHJpbWFyeVByZWZlcnJlZDtcblJlYWRQcmVmZXJlbmNlLlNFQ09OREFSWSA9IGV4cG9ydHMuUmVhZFByZWZlcmVuY2VNb2RlLnNlY29uZGFyeTtcblJlYWRQcmVmZXJlbmNlLlNFQ09OREFSWV9QUkVGRVJSRUQgPSBleHBvcnRzLlJlYWRQcmVmZXJlbmNlTW9kZS5zZWNvbmRhcnlQcmVmZXJyZWQ7XG5SZWFkUHJlZmVyZW5jZS5ORUFSRVNUID0gZXhwb3J0cy5SZWFkUHJlZmVyZW5jZU1vZGUubmVhcmVzdDtcblJlYWRQcmVmZXJlbmNlLnByaW1hcnkgPSBuZXcgUmVhZFByZWZlcmVuY2UoZXhwb3J0cy5SZWFkUHJlZmVyZW5jZU1vZGUucHJpbWFyeSk7XG5SZWFkUHJlZmVyZW5jZS5wcmltYXJ5UHJlZmVycmVkID0gbmV3IFJlYWRQcmVmZXJlbmNlKGV4cG9ydHMuUmVhZFByZWZlcmVuY2VNb2RlLnByaW1hcnlQcmVmZXJyZWQpO1xuUmVhZFByZWZlcmVuY2Uuc2Vjb25kYXJ5ID0gbmV3IFJlYWRQcmVmZXJlbmNlKGV4cG9ydHMuUmVhZFByZWZlcmVuY2VNb2RlLnNlY29uZGFyeSk7XG5SZWFkUHJlZmVyZW5jZS5zZWNvbmRhcnlQcmVmZXJyZWQgPSBuZXcgUmVhZFByZWZlcmVuY2UoZXhwb3J0cy5SZWFkUHJlZmVyZW5jZU1vZGUuc2Vjb25kYXJ5UHJlZmVycmVkKTtcblJlYWRQcmVmZXJlbmNlLm5lYXJlc3QgPSBuZXcgUmVhZFByZWZlcmVuY2UoZXhwb3J0cy5SZWFkUHJlZmVyZW5jZU1vZGUubmVhcmVzdCk7XG5leHBvcnRzLlJlYWRQcmVmZXJlbmNlID0gUmVhZFByZWZlcmVuY2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFkX3ByZWZlcmVuY2UuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUmVhZFByZWZlcmVuY2UiLCJSZWFkUHJlZmVyZW5jZU1vZGUiLCJlcnJvcl8xIiwicmVxdWlyZSIsImZyZWV6ZSIsInByaW1hcnkiLCJwcmltYXJ5UHJlZmVycmVkIiwic2Vjb25kYXJ5Iiwic2Vjb25kYXJ5UHJlZmVycmVkIiwibmVhcmVzdCIsImNvbnN0cnVjdG9yIiwibW9kZSIsInRhZ3MiLCJvcHRpb25zIiwiaXNWYWxpZCIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwiQXJyYXkiLCJpc0FycmF5IiwidW5kZWZpbmVkIiwiaGVkZ2UiLCJtYXhTdGFsZW5lc3NTZWNvbmRzIiwibWluV2lyZVZlcnNpb24iLCJQUklNQVJZIiwibGVuZ3RoIiwicHJlZmVyZW5jZSIsImZyb21TdHJpbmciLCJmcm9tT3B0aW9ucyIsInJlYWRQcmVmZXJlbmNlIiwic2Vzc2lvbiIsInRyYW5zYWN0aW9uIiwicmVhZFByZWZlcmVuY2VUYWdzIiwidHJhbnNsYXRlIiwiciIsIlZBTElEX01PREVTIiwiU2V0IiwiUFJJTUFSWV9QUkVGRVJSRUQiLCJTRUNPTkRBUlkiLCJTRUNPTkRBUllfUFJFRkVSUkVEIiwiTkVBUkVTVCIsImhhcyIsInNlY29uZGFyeU9rIiwiTkVFRFNfU0VDT05EQVJZT0siLCJlcXVhbHMiLCJ0b0pTT04iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/read_preference.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/common.js":
/*!*************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/common.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports._advanceClusterTime = exports.drainTimerQueue = exports.ServerType = exports.TopologyType = exports.STATE_CONNECTED = exports.STATE_CONNECTING = exports.STATE_CLOSED = exports.STATE_CLOSING = void 0;\nconst timers_1 = __webpack_require__(/*! timers */ \"timers\");\n// shared state names\nexports.STATE_CLOSING = \"closing\";\nexports.STATE_CLOSED = \"closed\";\nexports.STATE_CONNECTING = \"connecting\";\nexports.STATE_CONNECTED = \"connected\";\n/**\n * An enumeration of topology types we know about\n * @public\n */ exports.TopologyType = Object.freeze({\n    Single: \"Single\",\n    ReplicaSetNoPrimary: \"ReplicaSetNoPrimary\",\n    ReplicaSetWithPrimary: \"ReplicaSetWithPrimary\",\n    Sharded: \"Sharded\",\n    Unknown: \"Unknown\",\n    LoadBalanced: \"LoadBalanced\"\n});\n/**\n * An enumeration of server types we know about\n * @public\n */ exports.ServerType = Object.freeze({\n    Standalone: \"Standalone\",\n    Mongos: \"Mongos\",\n    PossiblePrimary: \"PossiblePrimary\",\n    RSPrimary: \"RSPrimary\",\n    RSSecondary: \"RSSecondary\",\n    RSArbiter: \"RSArbiter\",\n    RSOther: \"RSOther\",\n    RSGhost: \"RSGhost\",\n    Unknown: \"Unknown\",\n    LoadBalancer: \"LoadBalancer\"\n});\n/** @internal */ function drainTimerQueue(queue) {\n    queue.forEach(timers_1.clearTimeout);\n    queue.clear();\n}\nexports.drainTimerQueue = drainTimerQueue;\n/** Shared function to determine clusterTime for a given topology or session */ function _advanceClusterTime(entity, $clusterTime) {\n    if (entity.clusterTime == null) {\n        entity.clusterTime = $clusterTime;\n    } else {\n        if ($clusterTime.clusterTime.greaterThan(entity.clusterTime.clusterTime)) {\n            entity.clusterTime = $clusterTime;\n        }\n    }\n}\nexports._advanceClusterTime = _advanceClusterTime; //# sourceMappingURL=common.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9jb21tb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDJCQUEyQixHQUFHQSx1QkFBdUIsR0FBR0Esa0JBQWtCLEdBQUdBLG9CQUFvQixHQUFHQSx1QkFBdUIsR0FBR0Esd0JBQXdCLEdBQUdBLG9CQUFvQixHQUFHQSxxQkFBcUIsR0FBRyxLQUFLO0FBQzdNLE1BQU1VLFdBQVdDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLHFCQUFxQjtBQUNyQlgscUJBQXFCLEdBQUc7QUFDeEJBLG9CQUFvQixHQUFHO0FBQ3ZCQSx3QkFBd0IsR0FBRztBQUMzQkEsdUJBQXVCLEdBQUc7QUFDMUI7OztDQUdDLEdBQ0RBLG9CQUFvQixHQUFHRixPQUFPYyxNQUFNLENBQUM7SUFDakNDLFFBQVE7SUFDUkMscUJBQXFCO0lBQ3JCQyx1QkFBdUI7SUFDdkJDLFNBQVM7SUFDVEMsU0FBUztJQUNUQyxjQUFjO0FBQ2xCO0FBQ0E7OztDQUdDLEdBQ0RsQixrQkFBa0IsR0FBR0YsT0FBT2MsTUFBTSxDQUFDO0lBQy9CTyxZQUFZO0lBQ1pDLFFBQVE7SUFDUkMsaUJBQWlCO0lBQ2pCQyxXQUFXO0lBQ1hDLGFBQWE7SUFDYkMsV0FBVztJQUNYQyxTQUFTO0lBQ1RDLFNBQVM7SUFDVFQsU0FBUztJQUNUVSxjQUFjO0FBQ2xCO0FBQ0EsY0FBYyxHQUNkLFNBQVN4QixnQkFBZ0J5QixLQUFLO0lBQzFCQSxNQUFNQyxPQUFPLENBQUNuQixTQUFTb0IsWUFBWTtJQUNuQ0YsTUFBTUcsS0FBSztBQUNmO0FBQ0EvQix1QkFBdUIsR0FBR0c7QUFDMUIsNkVBQTZFLEdBQzdFLFNBQVNELG9CQUFvQjhCLE1BQU0sRUFBRUMsWUFBWTtJQUM3QyxJQUFJRCxPQUFPRSxXQUFXLElBQUksTUFBTTtRQUM1QkYsT0FBT0UsV0FBVyxHQUFHRDtJQUN6QixPQUNLO1FBQ0QsSUFBSUEsYUFBYUMsV0FBVyxDQUFDQyxXQUFXLENBQUNILE9BQU9FLFdBQVcsQ0FBQ0EsV0FBVyxHQUFHO1lBQ3RFRixPQUFPRSxXQUFXLEdBQUdEO1FBQ3pCO0lBQ0o7QUFDSjtBQUNBakMsMkJBQTJCLEdBQUdFLHFCQUM5QixrQ0FBa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9jb21tb24uanM/ZmE3MyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuX2FkdmFuY2VDbHVzdGVyVGltZSA9IGV4cG9ydHMuZHJhaW5UaW1lclF1ZXVlID0gZXhwb3J0cy5TZXJ2ZXJUeXBlID0gZXhwb3J0cy5Ub3BvbG9neVR5cGUgPSBleHBvcnRzLlNUQVRFX0NPTk5FQ1RFRCA9IGV4cG9ydHMuU1RBVEVfQ09OTkVDVElORyA9IGV4cG9ydHMuU1RBVEVfQ0xPU0VEID0gZXhwb3J0cy5TVEFURV9DTE9TSU5HID0gdm9pZCAwO1xuY29uc3QgdGltZXJzXzEgPSByZXF1aXJlKFwidGltZXJzXCIpO1xuLy8gc2hhcmVkIHN0YXRlIG5hbWVzXG5leHBvcnRzLlNUQVRFX0NMT1NJTkcgPSAnY2xvc2luZyc7XG5leHBvcnRzLlNUQVRFX0NMT1NFRCA9ICdjbG9zZWQnO1xuZXhwb3J0cy5TVEFURV9DT05ORUNUSU5HID0gJ2Nvbm5lY3RpbmcnO1xuZXhwb3J0cy5TVEFURV9DT05ORUNURUQgPSAnY29ubmVjdGVkJztcbi8qKlxuICogQW4gZW51bWVyYXRpb24gb2YgdG9wb2xvZ3kgdHlwZXMgd2Uga25vdyBhYm91dFxuICogQHB1YmxpY1xuICovXG5leHBvcnRzLlRvcG9sb2d5VHlwZSA9IE9iamVjdC5mcmVlemUoe1xuICAgIFNpbmdsZTogJ1NpbmdsZScsXG4gICAgUmVwbGljYVNldE5vUHJpbWFyeTogJ1JlcGxpY2FTZXROb1ByaW1hcnknLFxuICAgIFJlcGxpY2FTZXRXaXRoUHJpbWFyeTogJ1JlcGxpY2FTZXRXaXRoUHJpbWFyeScsXG4gICAgU2hhcmRlZDogJ1NoYXJkZWQnLFxuICAgIFVua25vd246ICdVbmtub3duJyxcbiAgICBMb2FkQmFsYW5jZWQ6ICdMb2FkQmFsYW5jZWQnXG59KTtcbi8qKlxuICogQW4gZW51bWVyYXRpb24gb2Ygc2VydmVyIHR5cGVzIHdlIGtub3cgYWJvdXRcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0cy5TZXJ2ZXJUeXBlID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgU3RhbmRhbG9uZTogJ1N0YW5kYWxvbmUnLFxuICAgIE1vbmdvczogJ01vbmdvcycsXG4gICAgUG9zc2libGVQcmltYXJ5OiAnUG9zc2libGVQcmltYXJ5JyxcbiAgICBSU1ByaW1hcnk6ICdSU1ByaW1hcnknLFxuICAgIFJTU2Vjb25kYXJ5OiAnUlNTZWNvbmRhcnknLFxuICAgIFJTQXJiaXRlcjogJ1JTQXJiaXRlcicsXG4gICAgUlNPdGhlcjogJ1JTT3RoZXInLFxuICAgIFJTR2hvc3Q6ICdSU0dob3N0JyxcbiAgICBVbmtub3duOiAnVW5rbm93bicsXG4gICAgTG9hZEJhbGFuY2VyOiAnTG9hZEJhbGFuY2VyJ1xufSk7XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBkcmFpblRpbWVyUXVldWUocXVldWUpIHtcbiAgICBxdWV1ZS5mb3JFYWNoKHRpbWVyc18xLmNsZWFyVGltZW91dCk7XG4gICAgcXVldWUuY2xlYXIoKTtcbn1cbmV4cG9ydHMuZHJhaW5UaW1lclF1ZXVlID0gZHJhaW5UaW1lclF1ZXVlO1xuLyoqIFNoYXJlZCBmdW5jdGlvbiB0byBkZXRlcm1pbmUgY2x1c3RlclRpbWUgZm9yIGEgZ2l2ZW4gdG9wb2xvZ3kgb3Igc2Vzc2lvbiAqL1xuZnVuY3Rpb24gX2FkdmFuY2VDbHVzdGVyVGltZShlbnRpdHksICRjbHVzdGVyVGltZSkge1xuICAgIGlmIChlbnRpdHkuY2x1c3RlclRpbWUgPT0gbnVsbCkge1xuICAgICAgICBlbnRpdHkuY2x1c3RlclRpbWUgPSAkY2x1c3RlclRpbWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoJGNsdXN0ZXJUaW1lLmNsdXN0ZXJUaW1lLmdyZWF0ZXJUaGFuKGVudGl0eS5jbHVzdGVyVGltZS5jbHVzdGVyVGltZSkpIHtcbiAgICAgICAgICAgIGVudGl0eS5jbHVzdGVyVGltZSA9ICRjbHVzdGVyVGltZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuX2FkdmFuY2VDbHVzdGVyVGltZSA9IF9hZHZhbmNlQ2x1c3RlclRpbWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiX2FkdmFuY2VDbHVzdGVyVGltZSIsImRyYWluVGltZXJRdWV1ZSIsIlNlcnZlclR5cGUiLCJUb3BvbG9neVR5cGUiLCJTVEFURV9DT05ORUNURUQiLCJTVEFURV9DT05ORUNUSU5HIiwiU1RBVEVfQ0xPU0VEIiwiU1RBVEVfQ0xPU0lORyIsInRpbWVyc18xIiwicmVxdWlyZSIsImZyZWV6ZSIsIlNpbmdsZSIsIlJlcGxpY2FTZXROb1ByaW1hcnkiLCJSZXBsaWNhU2V0V2l0aFByaW1hcnkiLCJTaGFyZGVkIiwiVW5rbm93biIsIkxvYWRCYWxhbmNlZCIsIlN0YW5kYWxvbmUiLCJNb25nb3MiLCJQb3NzaWJsZVByaW1hcnkiLCJSU1ByaW1hcnkiLCJSU1NlY29uZGFyeSIsIlJTQXJiaXRlciIsIlJTT3RoZXIiLCJSU0dob3N0IiwiTG9hZEJhbGFuY2VyIiwicXVldWUiLCJmb3JFYWNoIiwiY2xlYXJUaW1lb3V0IiwiY2xlYXIiLCJlbnRpdHkiLCIkY2x1c3RlclRpbWUiLCJjbHVzdGVyVGltZSIsImdyZWF0ZXJUaGFuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/common.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/events.js":
/*!*************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/events.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ServerHeartbeatFailedEvent = exports.ServerHeartbeatSucceededEvent = exports.ServerHeartbeatStartedEvent = exports.TopologyClosedEvent = exports.TopologyOpeningEvent = exports.TopologyDescriptionChangedEvent = exports.ServerClosedEvent = exports.ServerOpeningEvent = exports.ServerDescriptionChangedEvent = void 0;\n/**\n * Emitted when server description changes, but does NOT include changes to the RTT.\n * @public\n * @category Event\n */ class ServerDescriptionChangedEvent {\n    /** @internal */ constructor(topologyId, address, previousDescription, newDescription){\n        this.topologyId = topologyId;\n        this.address = address;\n        this.previousDescription = previousDescription;\n        this.newDescription = newDescription;\n    }\n}\nexports.ServerDescriptionChangedEvent = ServerDescriptionChangedEvent;\n/**\n * Emitted when server is initialized.\n * @public\n * @category Event\n */ class ServerOpeningEvent {\n    /** @internal */ constructor(topologyId, address){\n        this.topologyId = topologyId;\n        this.address = address;\n    }\n}\nexports.ServerOpeningEvent = ServerOpeningEvent;\n/**\n * Emitted when server is closed.\n * @public\n * @category Event\n */ class ServerClosedEvent {\n    /** @internal */ constructor(topologyId, address){\n        this.topologyId = topologyId;\n        this.address = address;\n    }\n}\nexports.ServerClosedEvent = ServerClosedEvent;\n/**\n * Emitted when topology description changes.\n * @public\n * @category Event\n */ class TopologyDescriptionChangedEvent {\n    /** @internal */ constructor(topologyId, previousDescription, newDescription){\n        this.topologyId = topologyId;\n        this.previousDescription = previousDescription;\n        this.newDescription = newDescription;\n    }\n}\nexports.TopologyDescriptionChangedEvent = TopologyDescriptionChangedEvent;\n/**\n * Emitted when topology is initialized.\n * @public\n * @category Event\n */ class TopologyOpeningEvent {\n    /** @internal */ constructor(topologyId){\n        this.topologyId = topologyId;\n    }\n}\nexports.TopologyOpeningEvent = TopologyOpeningEvent;\n/**\n * Emitted when topology is closed.\n * @public\n * @category Event\n */ class TopologyClosedEvent {\n    /** @internal */ constructor(topologyId){\n        this.topologyId = topologyId;\n    }\n}\nexports.TopologyClosedEvent = TopologyClosedEvent;\n/**\n * Emitted when the server monitors hello command is started - immediately before\n * the hello command is serialized into raw BSON and written to the socket.\n *\n * @public\n * @category Event\n */ class ServerHeartbeatStartedEvent {\n    /** @internal */ constructor(connectionId){\n        this.connectionId = connectionId;\n    }\n}\nexports.ServerHeartbeatStartedEvent = ServerHeartbeatStartedEvent;\n/**\n * Emitted when the server monitors hello succeeds.\n * @public\n * @category Event\n */ class ServerHeartbeatSucceededEvent {\n    /** @internal */ constructor(connectionId, duration, reply){\n        this.connectionId = connectionId;\n        this.duration = duration;\n        this.reply = reply ?? {};\n    }\n}\nexports.ServerHeartbeatSucceededEvent = ServerHeartbeatSucceededEvent;\n/**\n * Emitted when the server monitors hello fails, either with an ok: 0 or a socket exception.\n * @public\n * @category Event\n */ class ServerHeartbeatFailedEvent {\n    /** @internal */ constructor(connectionId, duration, failure){\n        this.connectionId = connectionId;\n        this.duration = duration;\n        this.failure = failure;\n    }\n}\nexports.ServerHeartbeatFailedEvent = ServerHeartbeatFailedEvent; //# sourceMappingURL=events.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9ldmVudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGtDQUFrQyxHQUFHQSxxQ0FBcUMsR0FBR0EsbUNBQW1DLEdBQUdBLDJCQUEyQixHQUFHQSw0QkFBNEIsR0FBR0EsdUNBQXVDLEdBQUdBLHlCQUF5QixHQUFHQSwwQkFBMEIsR0FBR0EscUNBQXFDLEdBQUcsS0FBSztBQUNoVTs7OztDQUlDLEdBQ0QsTUFBTVU7SUFDRixjQUFjLEdBQ2RDLFlBQVlDLFVBQVUsRUFBRUMsT0FBTyxFQUFFQyxtQkFBbUIsRUFBRUMsY0FBYyxDQUFFO1FBQ2xFLElBQUksQ0FBQ0gsVUFBVSxHQUFHQTtRQUNsQixJQUFJLENBQUNDLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLG1CQUFtQixHQUFHQTtRQUMzQixJQUFJLENBQUNDLGNBQWMsR0FBR0E7SUFDMUI7QUFDSjtBQUNBZixxQ0FBcUMsR0FBR1U7QUFDeEM7Ozs7Q0FJQyxHQUNELE1BQU1EO0lBQ0YsY0FBYyxHQUNkRSxZQUFZQyxVQUFVLEVBQUVDLE9BQU8sQ0FBRTtRQUM3QixJQUFJLENBQUNELFVBQVUsR0FBR0E7UUFDbEIsSUFBSSxDQUFDQyxPQUFPLEdBQUdBO0lBQ25CO0FBQ0o7QUFDQWIsMEJBQTBCLEdBQUdTO0FBQzdCOzs7O0NBSUMsR0FDRCxNQUFNRDtJQUNGLGNBQWMsR0FDZEcsWUFBWUMsVUFBVSxFQUFFQyxPQUFPLENBQUU7UUFDN0IsSUFBSSxDQUFDRCxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsT0FBTyxHQUFHQTtJQUNuQjtBQUNKO0FBQ0FiLHlCQUF5QixHQUFHUTtBQUM1Qjs7OztDQUlDLEdBQ0QsTUFBTUQ7SUFDRixjQUFjLEdBQ2RJLFlBQVlDLFVBQVUsRUFBRUUsbUJBQW1CLEVBQUVDLGNBQWMsQ0FBRTtRQUN6RCxJQUFJLENBQUNILFVBQVUsR0FBR0E7UUFDbEIsSUFBSSxDQUFDRSxtQkFBbUIsR0FBR0E7UUFDM0IsSUFBSSxDQUFDQyxjQUFjLEdBQUdBO0lBQzFCO0FBQ0o7QUFDQWYsdUNBQXVDLEdBQUdPO0FBQzFDOzs7O0NBSUMsR0FDRCxNQUFNRDtJQUNGLGNBQWMsR0FDZEssWUFBWUMsVUFBVSxDQUFFO1FBQ3BCLElBQUksQ0FBQ0EsVUFBVSxHQUFHQTtJQUN0QjtBQUNKO0FBQ0FaLDRCQUE0QixHQUFHTTtBQUMvQjs7OztDQUlDLEdBQ0QsTUFBTUQ7SUFDRixjQUFjLEdBQ2RNLFlBQVlDLFVBQVUsQ0FBRTtRQUNwQixJQUFJLENBQUNBLFVBQVUsR0FBR0E7SUFDdEI7QUFDSjtBQUNBWiwyQkFBMkIsR0FBR0s7QUFDOUI7Ozs7OztDQU1DLEdBQ0QsTUFBTUQ7SUFDRixjQUFjLEdBQ2RPLFlBQVlLLFlBQVksQ0FBRTtRQUN0QixJQUFJLENBQUNBLFlBQVksR0FBR0E7SUFDeEI7QUFDSjtBQUNBaEIsbUNBQW1DLEdBQUdJO0FBQ3RDOzs7O0NBSUMsR0FDRCxNQUFNRDtJQUNGLGNBQWMsR0FDZFEsWUFBWUssWUFBWSxFQUFFQyxRQUFRLEVBQUVDLEtBQUssQ0FBRTtRQUN2QyxJQUFJLENBQUNGLFlBQVksR0FBR0E7UUFDcEIsSUFBSSxDQUFDQyxRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0MsS0FBSyxHQUFHQSxTQUFTLENBQUM7SUFDM0I7QUFDSjtBQUNBbEIscUNBQXFDLEdBQUdHO0FBQ3hDOzs7O0NBSUMsR0FDRCxNQUFNRDtJQUNGLGNBQWMsR0FDZFMsWUFBWUssWUFBWSxFQUFFQyxRQUFRLEVBQUVFLE9BQU8sQ0FBRTtRQUN6QyxJQUFJLENBQUNILFlBQVksR0FBR0E7UUFDcEIsSUFBSSxDQUFDQyxRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0UsT0FBTyxHQUFHQTtJQUNuQjtBQUNKO0FBQ0FuQixrQ0FBa0MsR0FBR0UsNEJBQ3JDLGtDQUFrQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9zZGFtL2V2ZW50cy5qcz85NTYwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5TZXJ2ZXJIZWFydGJlYXRGYWlsZWRFdmVudCA9IGV4cG9ydHMuU2VydmVySGVhcnRiZWF0U3VjY2VlZGVkRXZlbnQgPSBleHBvcnRzLlNlcnZlckhlYXJ0YmVhdFN0YXJ0ZWRFdmVudCA9IGV4cG9ydHMuVG9wb2xvZ3lDbG9zZWRFdmVudCA9IGV4cG9ydHMuVG9wb2xvZ3lPcGVuaW5nRXZlbnQgPSBleHBvcnRzLlRvcG9sb2d5RGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQgPSBleHBvcnRzLlNlcnZlckNsb3NlZEV2ZW50ID0gZXhwb3J0cy5TZXJ2ZXJPcGVuaW5nRXZlbnQgPSBleHBvcnRzLlNlcnZlckRlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50ID0gdm9pZCAwO1xuLyoqXG4gKiBFbWl0dGVkIHdoZW4gc2VydmVyIGRlc2NyaXB0aW9uIGNoYW5nZXMsIGJ1dCBkb2VzIE5PVCBpbmNsdWRlIGNoYW5nZXMgdG8gdGhlIFJUVC5cbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBTZXJ2ZXJEZXNjcmlwdGlvbkNoYW5nZWRFdmVudCB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKHRvcG9sb2d5SWQsIGFkZHJlc3MsIHByZXZpb3VzRGVzY3JpcHRpb24sIG5ld0Rlc2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMudG9wb2xvZ3lJZCA9IHRvcG9sb2d5SWQ7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgIHRoaXMucHJldmlvdXNEZXNjcmlwdGlvbiA9IHByZXZpb3VzRGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMubmV3RGVzY3JpcHRpb24gPSBuZXdEZXNjcmlwdGlvbjtcbiAgICB9XG59XG5leHBvcnRzLlNlcnZlckRlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50ID0gU2VydmVyRGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQ7XG4vKipcbiAqIEVtaXR0ZWQgd2hlbiBzZXJ2ZXIgaXMgaW5pdGlhbGl6ZWQuXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXZlbnRcbiAqL1xuY2xhc3MgU2VydmVyT3BlbmluZ0V2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IodG9wb2xvZ3lJZCwgYWRkcmVzcykge1xuICAgICAgICB0aGlzLnRvcG9sb2d5SWQgPSB0b3BvbG9neUlkO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgIH1cbn1cbmV4cG9ydHMuU2VydmVyT3BlbmluZ0V2ZW50ID0gU2VydmVyT3BlbmluZ0V2ZW50O1xuLyoqXG4gKiBFbWl0dGVkIHdoZW4gc2VydmVyIGlzIGNsb3NlZC5cbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBTZXJ2ZXJDbG9zZWRFdmVudCB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKHRvcG9sb2d5SWQsIGFkZHJlc3MpIHtcbiAgICAgICAgdGhpcy50b3BvbG9neUlkID0gdG9wb2xvZ3lJZDtcbiAgICAgICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcztcbiAgICB9XG59XG5leHBvcnRzLlNlcnZlckNsb3NlZEV2ZW50ID0gU2VydmVyQ2xvc2VkRXZlbnQ7XG4vKipcbiAqIEVtaXR0ZWQgd2hlbiB0b3BvbG9neSBkZXNjcmlwdGlvbiBjaGFuZ2VzLlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIFRvcG9sb2d5RGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcih0b3BvbG9neUlkLCBwcmV2aW91c0Rlc2NyaXB0aW9uLCBuZXdEZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLnRvcG9sb2d5SWQgPSB0b3BvbG9neUlkO1xuICAgICAgICB0aGlzLnByZXZpb3VzRGVzY3JpcHRpb24gPSBwcmV2aW91c0Rlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLm5ld0Rlc2NyaXB0aW9uID0gbmV3RGVzY3JpcHRpb247XG4gICAgfVxufVxuZXhwb3J0cy5Ub3BvbG9neURlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50ID0gVG9wb2xvZ3lEZXNjcmlwdGlvbkNoYW5nZWRFdmVudDtcbi8qKlxuICogRW1pdHRlZCB3aGVuIHRvcG9sb2d5IGlzIGluaXRpYWxpemVkLlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIFRvcG9sb2d5T3BlbmluZ0V2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IodG9wb2xvZ3lJZCkge1xuICAgICAgICB0aGlzLnRvcG9sb2d5SWQgPSB0b3BvbG9neUlkO1xuICAgIH1cbn1cbmV4cG9ydHMuVG9wb2xvZ3lPcGVuaW5nRXZlbnQgPSBUb3BvbG9neU9wZW5pbmdFdmVudDtcbi8qKlxuICogRW1pdHRlZCB3aGVuIHRvcG9sb2d5IGlzIGNsb3NlZC5cbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBUb3BvbG9neUNsb3NlZEV2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IodG9wb2xvZ3lJZCkge1xuICAgICAgICB0aGlzLnRvcG9sb2d5SWQgPSB0b3BvbG9neUlkO1xuICAgIH1cbn1cbmV4cG9ydHMuVG9wb2xvZ3lDbG9zZWRFdmVudCA9IFRvcG9sb2d5Q2xvc2VkRXZlbnQ7XG4vKipcbiAqIEVtaXR0ZWQgd2hlbiB0aGUgc2VydmVyIG1vbml0b3LigJlzIGhlbGxvIGNvbW1hbmQgaXMgc3RhcnRlZCAtIGltbWVkaWF0ZWx5IGJlZm9yZVxuICogdGhlIGhlbGxvIGNvbW1hbmQgaXMgc2VyaWFsaXplZCBpbnRvIHJhdyBCU09OIGFuZCB3cml0dGVuIHRvIHRoZSBzb2NrZXQuXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIFNlcnZlckhlYXJ0YmVhdFN0YXJ0ZWRFdmVudCB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb25JZCkge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25JZCA9IGNvbm5lY3Rpb25JZDtcbiAgICB9XG59XG5leHBvcnRzLlNlcnZlckhlYXJ0YmVhdFN0YXJ0ZWRFdmVudCA9IFNlcnZlckhlYXJ0YmVhdFN0YXJ0ZWRFdmVudDtcbi8qKlxuICogRW1pdHRlZCB3aGVuIHRoZSBzZXJ2ZXIgbW9uaXRvcuKAmXMgaGVsbG8gc3VjY2VlZHMuXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXZlbnRcbiAqL1xuY2xhc3MgU2VydmVySGVhcnRiZWF0U3VjY2VlZGVkRXZlbnQge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uSWQsIGR1cmF0aW9uLCByZXBseSkge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25JZCA9IGNvbm5lY3Rpb25JZDtcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgICAgICB0aGlzLnJlcGx5ID0gcmVwbHkgPz8ge307XG4gICAgfVxufVxuZXhwb3J0cy5TZXJ2ZXJIZWFydGJlYXRTdWNjZWVkZWRFdmVudCA9IFNlcnZlckhlYXJ0YmVhdFN1Y2NlZWRlZEV2ZW50O1xuLyoqXG4gKiBFbWl0dGVkIHdoZW4gdGhlIHNlcnZlciBtb25pdG9y4oCZcyBoZWxsbyBmYWlscywgZWl0aGVyIHdpdGggYW4g4oCcb2s6IDDigJ0gb3IgYSBzb2NrZXQgZXhjZXB0aW9uLlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIFNlcnZlckhlYXJ0YmVhdEZhaWxlZEV2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbklkLCBkdXJhdGlvbiwgZmFpbHVyZSkge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25JZCA9IGNvbm5lY3Rpb25JZDtcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgICAgICB0aGlzLmZhaWx1cmUgPSBmYWlsdXJlO1xuICAgIH1cbn1cbmV4cG9ydHMuU2VydmVySGVhcnRiZWF0RmFpbGVkRXZlbnQgPSBTZXJ2ZXJIZWFydGJlYXRGYWlsZWRFdmVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50cy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJTZXJ2ZXJIZWFydGJlYXRGYWlsZWRFdmVudCIsIlNlcnZlckhlYXJ0YmVhdFN1Y2NlZWRlZEV2ZW50IiwiU2VydmVySGVhcnRiZWF0U3RhcnRlZEV2ZW50IiwiVG9wb2xvZ3lDbG9zZWRFdmVudCIsIlRvcG9sb2d5T3BlbmluZ0V2ZW50IiwiVG9wb2xvZ3lEZXNjcmlwdGlvbkNoYW5nZWRFdmVudCIsIlNlcnZlckNsb3NlZEV2ZW50IiwiU2VydmVyT3BlbmluZ0V2ZW50IiwiU2VydmVyRGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQiLCJjb25zdHJ1Y3RvciIsInRvcG9sb2d5SWQiLCJhZGRyZXNzIiwicHJldmlvdXNEZXNjcmlwdGlvbiIsIm5ld0Rlc2NyaXB0aW9uIiwiY29ubmVjdGlvbklkIiwiZHVyYXRpb24iLCJyZXBseSIsImZhaWx1cmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/events.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/monitor.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/monitor.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MonitorInterval = exports.RTTPinger = exports.Monitor = void 0;\nconst timers_1 = __webpack_require__(/*! timers */ \"timers\");\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst connect_1 = __webpack_require__(/*! ../cmap/connect */ \"(ssr)/./node_modules/mongodb/lib/cmap/connect.js\");\nconst connection_1 = __webpack_require__(/*! ../cmap/connection */ \"(ssr)/./node_modules/mongodb/lib/cmap/connection.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst events_1 = __webpack_require__(/*! ./events */ \"(ssr)/./node_modules/mongodb/lib/sdam/events.js\");\nconst server_1 = __webpack_require__(/*! ./server */ \"(ssr)/./node_modules/mongodb/lib/sdam/server.js\");\n/** @internal */ const kServer = Symbol(\"server\");\n/** @internal */ const kMonitorId = Symbol(\"monitorId\");\n/** @internal */ const kConnection = Symbol(\"connection\");\n/** @internal */ const kCancellationToken = Symbol(\"cancellationToken\");\n/** @internal */ const kRTTPinger = Symbol(\"rttPinger\");\n/** @internal */ const kRoundTripTime = Symbol(\"roundTripTime\");\nconst STATE_IDLE = \"idle\";\nconst STATE_MONITORING = \"monitoring\";\nconst stateTransition = (0, utils_1.makeStateMachine)({\n    [common_1.STATE_CLOSING]: [\n        common_1.STATE_CLOSING,\n        STATE_IDLE,\n        common_1.STATE_CLOSED\n    ],\n    [common_1.STATE_CLOSED]: [\n        common_1.STATE_CLOSED,\n        STATE_MONITORING\n    ],\n    [STATE_IDLE]: [\n        STATE_IDLE,\n        STATE_MONITORING,\n        common_1.STATE_CLOSING\n    ],\n    [STATE_MONITORING]: [\n        STATE_MONITORING,\n        STATE_IDLE,\n        common_1.STATE_CLOSING\n    ]\n});\nconst INVALID_REQUEST_CHECK_STATES = new Set([\n    common_1.STATE_CLOSING,\n    common_1.STATE_CLOSED,\n    STATE_MONITORING\n]);\nfunction isInCloseState(monitor) {\n    return monitor.s.state === common_1.STATE_CLOSED || monitor.s.state === common_1.STATE_CLOSING;\n}\n/** @internal */ class Monitor extends mongo_types_1.TypedEventEmitter {\n    get connection() {\n        return this[kConnection];\n    }\n    constructor(server, options){\n        super();\n        this[kServer] = server;\n        this[kConnection] = undefined;\n        this[kCancellationToken] = new mongo_types_1.CancellationToken();\n        this[kCancellationToken].setMaxListeners(Infinity);\n        this[kMonitorId] = undefined;\n        this.s = {\n            state: common_1.STATE_CLOSED\n        };\n        this.address = server.description.address;\n        this.options = Object.freeze({\n            connectTimeoutMS: options.connectTimeoutMS ?? 10000,\n            heartbeatFrequencyMS: options.heartbeatFrequencyMS ?? 10000,\n            minHeartbeatFrequencyMS: options.minHeartbeatFrequencyMS ?? 500\n        });\n        const cancellationToken = this[kCancellationToken];\n        // TODO: refactor this to pull it directly from the pool, requires new ConnectionPool integration\n        const connectOptions = Object.assign({\n            id: \"<monitor>\",\n            generation: server.pool.generation,\n            connectionType: connection_1.Connection,\n            cancellationToken,\n            hostAddress: server.description.hostAddress\n        }, options, // force BSON serialization options\n        {\n            raw: false,\n            useBigInt64: false,\n            promoteLongs: true,\n            promoteValues: true,\n            promoteBuffers: true\n        });\n        // ensure no authentication is used for monitoring\n        delete connectOptions.credentials;\n        if (connectOptions.autoEncrypter) {\n            delete connectOptions.autoEncrypter;\n        }\n        this.connectOptions = Object.freeze(connectOptions);\n    }\n    connect() {\n        if (this.s.state !== common_1.STATE_CLOSED) {\n            return;\n        }\n        // start\n        const heartbeatFrequencyMS = this.options.heartbeatFrequencyMS;\n        const minHeartbeatFrequencyMS = this.options.minHeartbeatFrequencyMS;\n        this[kMonitorId] = new MonitorInterval(monitorServer(this), {\n            heartbeatFrequencyMS: heartbeatFrequencyMS,\n            minHeartbeatFrequencyMS: minHeartbeatFrequencyMS,\n            immediate: true\n        });\n    }\n    requestCheck() {\n        if (INVALID_REQUEST_CHECK_STATES.has(this.s.state)) {\n            return;\n        }\n        this[kMonitorId]?.wake();\n    }\n    reset() {\n        const topologyVersion = this[kServer].description.topologyVersion;\n        if (isInCloseState(this) || topologyVersion == null) {\n            return;\n        }\n        stateTransition(this, common_1.STATE_CLOSING);\n        resetMonitorState(this);\n        // restart monitor\n        stateTransition(this, STATE_IDLE);\n        // restart monitoring\n        const heartbeatFrequencyMS = this.options.heartbeatFrequencyMS;\n        const minHeartbeatFrequencyMS = this.options.minHeartbeatFrequencyMS;\n        this[kMonitorId] = new MonitorInterval(monitorServer(this), {\n            heartbeatFrequencyMS: heartbeatFrequencyMS,\n            minHeartbeatFrequencyMS: minHeartbeatFrequencyMS\n        });\n    }\n    close() {\n        if (isInCloseState(this)) {\n            return;\n        }\n        stateTransition(this, common_1.STATE_CLOSING);\n        resetMonitorState(this);\n        // close monitor\n        this.emit(\"close\");\n        stateTransition(this, common_1.STATE_CLOSED);\n    }\n}\nexports.Monitor = Monitor;\nfunction resetMonitorState(monitor) {\n    monitor[kMonitorId]?.stop();\n    monitor[kMonitorId] = undefined;\n    monitor[kRTTPinger]?.close();\n    monitor[kRTTPinger] = undefined;\n    monitor[kCancellationToken].emit(\"cancel\");\n    monitor[kConnection]?.destroy({\n        force: true\n    });\n    monitor[kConnection] = undefined;\n}\nfunction checkServer(monitor, callback) {\n    let start = (0, utils_1.now)();\n    monitor.emit(server_1.Server.SERVER_HEARTBEAT_STARTED, new events_1.ServerHeartbeatStartedEvent(monitor.address));\n    function failureHandler(err) {\n        monitor[kConnection]?.destroy({\n            force: true\n        });\n        monitor[kConnection] = undefined;\n        monitor.emit(server_1.Server.SERVER_HEARTBEAT_FAILED, new events_1.ServerHeartbeatFailedEvent(monitor.address, (0, utils_1.calculateDurationInMs)(start), err));\n        const error = !(err instanceof error_1.MongoError) ? new error_1.MongoError(err) : err;\n        error.addErrorLabel(error_1.MongoErrorLabel.ResetPool);\n        if (error instanceof error_1.MongoNetworkTimeoutError) {\n            error.addErrorLabel(error_1.MongoErrorLabel.InterruptInUseConnections);\n        }\n        monitor.emit(\"resetServer\", error);\n        callback(err);\n    }\n    const connection = monitor[kConnection];\n    if (connection && !connection.closed) {\n        const { serverApi, helloOk } = connection;\n        const connectTimeoutMS = monitor.options.connectTimeoutMS;\n        const maxAwaitTimeMS = monitor.options.heartbeatFrequencyMS;\n        const topologyVersion = monitor[kServer].description.topologyVersion;\n        const isAwaitable = topologyVersion != null;\n        const cmd = {\n            [serverApi?.version || helloOk ? \"hello\" : constants_1.LEGACY_HELLO_COMMAND]: 1,\n            ...isAwaitable && topologyVersion ? {\n                maxAwaitTimeMS,\n                topologyVersion: makeTopologyVersion(topologyVersion)\n            } : {}\n        };\n        const options = isAwaitable ? {\n            socketTimeoutMS: connectTimeoutMS ? connectTimeoutMS + maxAwaitTimeMS : 0,\n            exhaustAllowed: true\n        } : {\n            socketTimeoutMS: connectTimeoutMS\n        };\n        if (isAwaitable && monitor[kRTTPinger] == null) {\n            monitor[kRTTPinger] = new RTTPinger(monitor[kCancellationToken], Object.assign({\n                heartbeatFrequencyMS: monitor.options.heartbeatFrequencyMS\n            }, monitor.connectOptions));\n        }\n        connection.command((0, utils_1.ns)(\"admin.$cmd\"), cmd, options, (err, hello)=>{\n            if (err) {\n                return failureHandler(err);\n            }\n            if (!(\"isWritablePrimary\" in hello)) {\n                // Provide hello-style response document.\n                hello.isWritablePrimary = hello[constants_1.LEGACY_HELLO_COMMAND];\n            }\n            const rttPinger = monitor[kRTTPinger];\n            const duration = isAwaitable && rttPinger ? rttPinger.roundTripTime : (0, utils_1.calculateDurationInMs)(start);\n            monitor.emit(server_1.Server.SERVER_HEARTBEAT_SUCCEEDED, new events_1.ServerHeartbeatSucceededEvent(monitor.address, duration, hello));\n            // if we are using the streaming protocol then we immediately issue another `started`\n            // event, otherwise the \"check\" is complete and return to the main monitor loop\n            if (isAwaitable && hello.topologyVersion) {\n                monitor.emit(server_1.Server.SERVER_HEARTBEAT_STARTED, new events_1.ServerHeartbeatStartedEvent(monitor.address));\n                start = (0, utils_1.now)();\n            } else {\n                monitor[kRTTPinger]?.close();\n                monitor[kRTTPinger] = undefined;\n                callback(undefined, hello);\n            }\n        });\n        return;\n    }\n    // connecting does an implicit `hello`\n    (0, connect_1.connect)(monitor.connectOptions, (err, conn)=>{\n        if (err) {\n            monitor[kConnection] = undefined;\n            failureHandler(err);\n            return;\n        }\n        if (conn) {\n            // Tell the connection that we are using the streaming protocol so that the\n            // connection's message stream will only read the last hello on the buffer.\n            conn.isMonitoringConnection = true;\n            if (isInCloseState(monitor)) {\n                conn.destroy({\n                    force: true\n                });\n                return;\n            }\n            monitor[kConnection] = conn;\n            monitor.emit(server_1.Server.SERVER_HEARTBEAT_SUCCEEDED, new events_1.ServerHeartbeatSucceededEvent(monitor.address, (0, utils_1.calculateDurationInMs)(start), conn.hello));\n            callback(undefined, conn.hello);\n        }\n    });\n}\nfunction monitorServer(monitor) {\n    return (callback)=>{\n        if (monitor.s.state === STATE_MONITORING) {\n            process.nextTick(callback);\n            return;\n        }\n        stateTransition(monitor, STATE_MONITORING);\n        function done() {\n            if (!isInCloseState(monitor)) {\n                stateTransition(monitor, STATE_IDLE);\n            }\n            callback();\n        }\n        checkServer(monitor, (err, hello)=>{\n            if (err) {\n                // otherwise an error occurred on initial discovery, also bail\n                if (monitor[kServer].description.type === common_1.ServerType.Unknown) {\n                    return done();\n                }\n            }\n            // if the check indicates streaming is supported, immediately reschedule monitoring\n            if (hello && hello.topologyVersion) {\n                (0, timers_1.setTimeout)(()=>{\n                    if (!isInCloseState(monitor)) {\n                        monitor[kMonitorId]?.wake();\n                    }\n                }, 0);\n            }\n            done();\n        });\n    };\n}\nfunction makeTopologyVersion(tv) {\n    return {\n        processId: tv.processId,\n        // tests mock counter as just number, but in a real situation counter should always be a Long\n        // TODO(NODE-2674): Preserve int64 sent from MongoDB\n        counter: bson_1.Long.isLong(tv.counter) ? tv.counter : bson_1.Long.fromNumber(tv.counter)\n    };\n}\n/** @internal */ class RTTPinger {\n    constructor(cancellationToken, options){\n        this[kConnection] = undefined;\n        this[kCancellationToken] = cancellationToken;\n        this[kRoundTripTime] = 0;\n        this.closed = false;\n        const heartbeatFrequencyMS = options.heartbeatFrequencyMS;\n        this[kMonitorId] = (0, timers_1.setTimeout)(()=>measureRoundTripTime(this, options), heartbeatFrequencyMS);\n    }\n    get roundTripTime() {\n        return this[kRoundTripTime];\n    }\n    close() {\n        this.closed = true;\n        (0, timers_1.clearTimeout)(this[kMonitorId]);\n        this[kConnection]?.destroy({\n            force: true\n        });\n        this[kConnection] = undefined;\n    }\n}\nexports.RTTPinger = RTTPinger;\nfunction measureRoundTripTime(rttPinger, options) {\n    const start = (0, utils_1.now)();\n    options.cancellationToken = rttPinger[kCancellationToken];\n    const heartbeatFrequencyMS = options.heartbeatFrequencyMS;\n    if (rttPinger.closed) {\n        return;\n    }\n    function measureAndReschedule(conn) {\n        if (rttPinger.closed) {\n            conn?.destroy({\n                force: true\n            });\n            return;\n        }\n        if (rttPinger[kConnection] == null) {\n            rttPinger[kConnection] = conn;\n        }\n        rttPinger[kRoundTripTime] = (0, utils_1.calculateDurationInMs)(start);\n        rttPinger[kMonitorId] = (0, timers_1.setTimeout)(()=>measureRoundTripTime(rttPinger, options), heartbeatFrequencyMS);\n    }\n    const connection = rttPinger[kConnection];\n    if (connection == null) {\n        (0, connect_1.connect)(options, (err, conn)=>{\n            if (err) {\n                rttPinger[kConnection] = undefined;\n                rttPinger[kRoundTripTime] = 0;\n                return;\n            }\n            measureAndReschedule(conn);\n        });\n        return;\n    }\n    connection.command((0, utils_1.ns)(\"admin.$cmd\"), {\n        [constants_1.LEGACY_HELLO_COMMAND]: 1\n    }, undefined, (err)=>{\n        if (err) {\n            rttPinger[kConnection] = undefined;\n            rttPinger[kRoundTripTime] = 0;\n            return;\n        }\n        measureAndReschedule();\n    });\n}\n/**\n * @internal\n */ class MonitorInterval {\n    constructor(fn, options = {}){\n        this.isExpeditedCallToFnScheduled = false;\n        this.stopped = false;\n        this.isExecutionInProgress = false;\n        this.hasExecutedOnce = false;\n        this._executeAndReschedule = ()=>{\n            if (this.stopped) return;\n            if (this.timerId) {\n                (0, timers_1.clearTimeout)(this.timerId);\n            }\n            this.isExpeditedCallToFnScheduled = false;\n            this.isExecutionInProgress = true;\n            this.fn(()=>{\n                this.lastExecutionEnded = (0, utils_1.now)();\n                this.isExecutionInProgress = false;\n                this._reschedule(this.heartbeatFrequencyMS);\n            });\n        };\n        this.fn = fn;\n        this.lastExecutionEnded = -Infinity;\n        this.heartbeatFrequencyMS = options.heartbeatFrequencyMS ?? 1000;\n        this.minHeartbeatFrequencyMS = options.minHeartbeatFrequencyMS ?? 500;\n        if (options.immediate) {\n            this._executeAndReschedule();\n        } else {\n            this._reschedule(undefined);\n        }\n    }\n    wake() {\n        const currentTime = (0, utils_1.now)();\n        const timeSinceLastCall = currentTime - this.lastExecutionEnded;\n        // TODO(NODE-4674): Add error handling and logging to the monitor\n        if (timeSinceLastCall < 0) {\n            return this._executeAndReschedule();\n        }\n        if (this.isExecutionInProgress) {\n            return;\n        }\n        // debounce multiple calls to wake within the `minInterval`\n        if (this.isExpeditedCallToFnScheduled) {\n            return;\n        }\n        // reschedule a call as soon as possible, ensuring the call never happens\n        // faster than the `minInterval`\n        if (timeSinceLastCall < this.minHeartbeatFrequencyMS) {\n            this.isExpeditedCallToFnScheduled = true;\n            this._reschedule(this.minHeartbeatFrequencyMS - timeSinceLastCall);\n            return;\n        }\n        this._executeAndReschedule();\n    }\n    stop() {\n        this.stopped = true;\n        if (this.timerId) {\n            (0, timers_1.clearTimeout)(this.timerId);\n            this.timerId = undefined;\n        }\n        this.lastExecutionEnded = -Infinity;\n        this.isExpeditedCallToFnScheduled = false;\n    }\n    toString() {\n        return JSON.stringify(this);\n    }\n    toJSON() {\n        const currentTime = (0, utils_1.now)();\n        const timeSinceLastCall = currentTime - this.lastExecutionEnded;\n        return {\n            timerId: this.timerId != null ? \"set\" : \"cleared\",\n            lastCallTime: this.lastExecutionEnded,\n            isExpeditedCheckScheduled: this.isExpeditedCallToFnScheduled,\n            stopped: this.stopped,\n            heartbeatFrequencyMS: this.heartbeatFrequencyMS,\n            minHeartbeatFrequencyMS: this.minHeartbeatFrequencyMS,\n            currentTime,\n            timeSinceLastCall\n        };\n    }\n    _reschedule(ms) {\n        if (this.stopped) return;\n        if (this.timerId) {\n            (0, timers_1.clearTimeout)(this.timerId);\n        }\n        this.timerId = (0, timers_1.setTimeout)(this._executeAndReschedule, ms || this.heartbeatFrequencyMS);\n    }\n}\nexports.MonitorInterval = MonitorInterval; //# sourceMappingURL=monitor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9tb25pdG9yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx1QkFBdUIsR0FBR0EsaUJBQWlCLEdBQUdBLGVBQWUsR0FBRyxLQUFLO0FBQ3JFLE1BQU1LLFdBQVdDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1DLFNBQVNELG1CQUFPQSxDQUFDLHlEQUFTO0FBQ2hDLE1BQU1FLFlBQVlGLG1CQUFPQSxDQUFDLHlFQUFpQjtBQUMzQyxNQUFNRyxlQUFlSCxtQkFBT0EsQ0FBQywrRUFBb0I7QUFDakQsTUFBTUksY0FBY0osbUJBQU9BLENBQUMsbUVBQWM7QUFDMUMsTUFBTUssVUFBVUwsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTU0sZ0JBQWdCTixtQkFBT0EsQ0FBQyx1RUFBZ0I7QUFDOUMsTUFBTU8sVUFBVVAsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTVEsV0FBV1IsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsTUFBTVMsV0FBV1QsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsTUFBTVUsV0FBV1YsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsY0FBYyxHQUNkLE1BQU1XLFVBQVVDLE9BQU87QUFDdkIsY0FBYyxHQUNkLE1BQU1DLGFBQWFELE9BQU87QUFDMUIsY0FBYyxHQUNkLE1BQU1FLGNBQWNGLE9BQU87QUFDM0IsY0FBYyxHQUNkLE1BQU1HLHFCQUFxQkgsT0FBTztBQUNsQyxjQUFjLEdBQ2QsTUFBTUksYUFBYUosT0FBTztBQUMxQixjQUFjLEdBQ2QsTUFBTUssaUJBQWlCTCxPQUFPO0FBQzlCLE1BQU1NLGFBQWE7QUFDbkIsTUFBTUMsbUJBQW1CO0FBQ3pCLE1BQU1DLGtCQUFrQixDQUFDLEdBQUdiLFFBQVFjLGdCQUFnQixFQUFFO0lBQ2xELENBQUNiLFNBQVNjLGFBQWEsQ0FBQyxFQUFFO1FBQUNk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QUFDUSxPQUFPO1FBQzNDO1FBQ0EsSUFBSSxDQUFDQSxPQUFPLEdBQUcsQ0FBQyxHQUFHM0ksU0FBUzJILFVBQVUsRUFBRSxJQUFJLENBQUNlLHFCQUFxQixFQUFFWSxNQUFNLElBQUksQ0FBQzFHLG9CQUFvQjtJQUN2RztBQUNKO0FBQ0FqRCx1QkFBdUIsR0FBR0UsaUJBQzFCLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9zZGFtL21vbml0b3IuanM/YjI0ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTW9uaXRvckludGVydmFsID0gZXhwb3J0cy5SVFRQaW5nZXIgPSBleHBvcnRzLk1vbml0b3IgPSB2b2lkIDA7XG5jb25zdCB0aW1lcnNfMSA9IHJlcXVpcmUoXCJ0aW1lcnNcIik7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi4vYnNvblwiKTtcbmNvbnN0IGNvbm5lY3RfMSA9IHJlcXVpcmUoXCIuLi9jbWFwL2Nvbm5lY3RcIik7XG5jb25zdCBjb25uZWN0aW9uXzEgPSByZXF1aXJlKFwiLi4vY21hcC9jb25uZWN0aW9uXCIpO1xuY29uc3QgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IG1vbmdvX3R5cGVzXzEgPSByZXF1aXJlKFwiLi4vbW9uZ29fdHlwZXNcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgY29tbW9uXzEgPSByZXF1aXJlKFwiLi9jb21tb25cIik7XG5jb25zdCBldmVudHNfMSA9IHJlcXVpcmUoXCIuL2V2ZW50c1wiKTtcbmNvbnN0IHNlcnZlcl8xID0gcmVxdWlyZShcIi4vc2VydmVyXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga1NlcnZlciA9IFN5bWJvbCgnc2VydmVyJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrTW9uaXRvcklkID0gU3ltYm9sKCdtb25pdG9ySWQnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtDb25uZWN0aW9uID0gU3ltYm9sKCdjb25uZWN0aW9uJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrQ2FuY2VsbGF0aW9uVG9rZW4gPSBTeW1ib2woJ2NhbmNlbGxhdGlvblRva2VuJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrUlRUUGluZ2VyID0gU3ltYm9sKCdydHRQaW5nZXInKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtSb3VuZFRyaXBUaW1lID0gU3ltYm9sKCdyb3VuZFRyaXBUaW1lJyk7XG5jb25zdCBTVEFURV9JRExFID0gJ2lkbGUnO1xuY29uc3QgU1RBVEVfTU9OSVRPUklORyA9ICdtb25pdG9yaW5nJztcbmNvbnN0IHN0YXRlVHJhbnNpdGlvbiA9ICgwLCB1dGlsc18xLm1ha2VTdGF0ZU1hY2hpbmUpKHtcbiAgICBbY29tbW9uXzEuU1RBVEVfQ0xPU0lOR106IFtjb21tb25fMS5TVEFURV9DTE9TSU5HLCBTVEFURV9JRExFLCBjb21tb25fMS5TVEFURV9DTE9TRURdLFxuICAgIFtjb21tb25fMS5TVEFURV9DTE9TRURdOiBbY29tbW9uXzEuU1RBVEVfQ0xPU0VELCBTVEFURV9NT05JVE9SSU5HXSxcbiAgICBbU1RBVEVfSURMRV06IFtTVEFURV9JRExFLCBTVEFURV9NT05JVE9SSU5HLCBjb21tb25fMS5TVEFURV9DTE9TSU5HXSxcbiAgICBbU1RBVEVfTU9OSVRPUklOR106IFtTVEFURV9NT05JVE9SSU5HLCBTVEFURV9JRExFLCBjb21tb25fMS5TVEFURV9DTE9TSU5HXVxufSk7XG5jb25zdCBJTlZBTElEX1JFUVVFU1RfQ0hFQ0tfU1RBVEVTID0gbmV3IFNldChbY29tbW9uXzEuU1RBVEVfQ0xPU0lORywgY29tbW9uXzEuU1RBVEVfQ0xPU0VELCBTVEFURV9NT05JVE9SSU5HXSk7XG5mdW5jdGlvbiBpc0luQ2xvc2VTdGF0ZShtb25pdG9yKSB7XG4gICAgcmV0dXJuIG1vbml0b3Iucy5zdGF0ZSA9PT0gY29tbW9uXzEuU1RBVEVfQ0xPU0VEIHx8IG1vbml0b3Iucy5zdGF0ZSA9PT0gY29tbW9uXzEuU1RBVEVfQ0xPU0lORztcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIE1vbml0b3IgZXh0ZW5kcyBtb25nb190eXBlc18xLlR5cGVkRXZlbnRFbWl0dGVyIHtcbiAgICBnZXQgY29ubmVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba0Nvbm5lY3Rpb25dO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihzZXJ2ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpc1trU2VydmVyXSA9IHNlcnZlcjtcbiAgICAgICAgdGhpc1trQ29ubmVjdGlvbl0gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXNba0NhbmNlbGxhdGlvblRva2VuXSA9IG5ldyBtb25nb190eXBlc18xLkNhbmNlbGxhdGlvblRva2VuKCk7XG4gICAgICAgIHRoaXNba0NhbmNlbGxhdGlvblRva2VuXS5zZXRNYXhMaXN0ZW5lcnMoSW5maW5pdHkpO1xuICAgICAgICB0aGlzW2tNb25pdG9ySWRdID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnMgPSB7XG4gICAgICAgICAgICBzdGF0ZTogY29tbW9uXzEuU1RBVEVfQ0xPU0VEXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IHNlcnZlci5kZXNjcmlwdGlvbi5hZGRyZXNzO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuZnJlZXplKHtcbiAgICAgICAgICAgIGNvbm5lY3RUaW1lb3V0TVM6IG9wdGlvbnMuY29ubmVjdFRpbWVvdXRNUyA/PyAxMDAwMCxcbiAgICAgICAgICAgIGhlYXJ0YmVhdEZyZXF1ZW5jeU1TOiBvcHRpb25zLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TID8/IDEwMDAwLFxuICAgICAgICAgICAgbWluSGVhcnRiZWF0RnJlcXVlbmN5TVM6IG9wdGlvbnMubWluSGVhcnRiZWF0RnJlcXVlbmN5TVMgPz8gNTAwXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjYW5jZWxsYXRpb25Ub2tlbiA9IHRoaXNba0NhbmNlbGxhdGlvblRva2VuXTtcbiAgICAgICAgLy8gVE9ETzogcmVmYWN0b3IgdGhpcyB0byBwdWxsIGl0IGRpcmVjdGx5IGZyb20gdGhlIHBvb2wsIHJlcXVpcmVzIG5ldyBDb25uZWN0aW9uUG9vbCBpbnRlZ3JhdGlvblxuICAgICAgICBjb25zdCBjb25uZWN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgaWQ6ICc8bW9uaXRvcj4nLFxuICAgICAgICAgICAgZ2VuZXJhdGlvbjogc2VydmVyLnBvb2wuZ2VuZXJhdGlvbixcbiAgICAgICAgICAgIGNvbm5lY3Rpb25UeXBlOiBjb25uZWN0aW9uXzEuQ29ubmVjdGlvbixcbiAgICAgICAgICAgIGNhbmNlbGxhdGlvblRva2VuLFxuICAgICAgICAgICAgaG9zdEFkZHJlc3M6IHNlcnZlci5kZXNjcmlwdGlvbi5ob3N0QWRkcmVzc1xuICAgICAgICB9LCBvcHRpb25zLCBcbiAgICAgICAgLy8gZm9yY2UgQlNPTiBzZXJpYWxpemF0aW9uIG9wdGlvbnNcbiAgICAgICAge1xuICAgICAgICAgICAgcmF3OiBmYWxzZSxcbiAgICAgICAgICAgIHVzZUJpZ0ludDY0OiBmYWxzZSxcbiAgICAgICAgICAgIHByb21vdGVMb25nczogdHJ1ZSxcbiAgICAgICAgICAgIHByb21vdGVWYWx1ZXM6IHRydWUsXG4gICAgICAgICAgICBwcm9tb3RlQnVmZmVyczogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gZW5zdXJlIG5vIGF1dGhlbnRpY2F0aW9uIGlzIHVzZWQgZm9yIG1vbml0b3JpbmdcbiAgICAgICAgZGVsZXRlIGNvbm5lY3RPcHRpb25zLmNyZWRlbnRpYWxzO1xuICAgICAgICBpZiAoY29ubmVjdE9wdGlvbnMuYXV0b0VuY3J5cHRlcikge1xuICAgICAgICAgICAgZGVsZXRlIGNvbm5lY3RPcHRpb25zLmF1dG9FbmNyeXB0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25uZWN0T3B0aW9ucyA9IE9iamVjdC5mcmVlemUoY29ubmVjdE9wdGlvbnMpO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICBpZiAodGhpcy5zLnN0YXRlICE9PSBjb21tb25fMS5TVEFURV9DTE9TRUQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBzdGFydFxuICAgICAgICBjb25zdCBoZWFydGJlYXRGcmVxdWVuY3lNUyA9IHRoaXMub3B0aW9ucy5oZWFydGJlYXRGcmVxdWVuY3lNUztcbiAgICAgICAgY29uc3QgbWluSGVhcnRiZWF0RnJlcXVlbmN5TVMgPSB0aGlzLm9wdGlvbnMubWluSGVhcnRiZWF0RnJlcXVlbmN5TVM7XG4gICAgICAgIHRoaXNba01vbml0b3JJZF0gPSBuZXcgTW9uaXRvckludGVydmFsKG1vbml0b3JTZXJ2ZXIodGhpcyksIHtcbiAgICAgICAgICAgIGhlYXJ0YmVhdEZyZXF1ZW5jeU1TOiBoZWFydGJlYXRGcmVxdWVuY3lNUyxcbiAgICAgICAgICAgIG1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TOiBtaW5IZWFydGJlYXRGcmVxdWVuY3lNUyxcbiAgICAgICAgICAgIGltbWVkaWF0ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWVzdENoZWNrKCkge1xuICAgICAgICBpZiAoSU5WQUxJRF9SRVFVRVNUX0NIRUNLX1NUQVRFUy5oYXModGhpcy5zLnN0YXRlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNba01vbml0b3JJZF0/Lndha2UoKTtcbiAgICB9XG4gICAgcmVzZXQoKSB7XG4gICAgICAgIGNvbnN0IHRvcG9sb2d5VmVyc2lvbiA9IHRoaXNba1NlcnZlcl0uZGVzY3JpcHRpb24udG9wb2xvZ3lWZXJzaW9uO1xuICAgICAgICBpZiAoaXNJbkNsb3NlU3RhdGUodGhpcykgfHwgdG9wb2xvZ3lWZXJzaW9uID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZVRyYW5zaXRpb24odGhpcywgY29tbW9uXzEuU1RBVEVfQ0xPU0lORyk7XG4gICAgICAgIHJlc2V0TW9uaXRvclN0YXRlKHRoaXMpO1xuICAgICAgICAvLyByZXN0YXJ0IG1vbml0b3JcbiAgICAgICAgc3RhdGVUcmFuc2l0aW9uKHRoaXMsIFNUQVRFX0lETEUpO1xuICAgICAgICAvLyByZXN0YXJ0IG1vbml0b3JpbmdcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0RnJlcXVlbmN5TVMgPSB0aGlzLm9wdGlvbnMuaGVhcnRiZWF0RnJlcXVlbmN5TVM7XG4gICAgICAgIGNvbnN0IG1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TID0gdGhpcy5vcHRpb25zLm1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TO1xuICAgICAgICB0aGlzW2tNb25pdG9ySWRdID0gbmV3IE1vbml0b3JJbnRlcnZhbChtb25pdG9yU2VydmVyKHRoaXMpLCB7XG4gICAgICAgICAgICBoZWFydGJlYXRGcmVxdWVuY3lNUzogaGVhcnRiZWF0RnJlcXVlbmN5TVMsXG4gICAgICAgICAgICBtaW5IZWFydGJlYXRGcmVxdWVuY3lNUzogbWluSGVhcnRiZWF0RnJlcXVlbmN5TVNcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAoaXNJbkNsb3NlU3RhdGUodGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZVRyYW5zaXRpb24odGhpcywgY29tbW9uXzEuU1RBVEVfQ0xPU0lORyk7XG4gICAgICAgIHJlc2V0TW9uaXRvclN0YXRlKHRoaXMpO1xuICAgICAgICAvLyBjbG9zZSBtb25pdG9yXG4gICAgICAgIHRoaXMuZW1pdCgnY2xvc2UnKTtcbiAgICAgICAgc3RhdGVUcmFuc2l0aW9uKHRoaXMsIGNvbW1vbl8xLlNUQVRFX0NMT1NFRCk7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25pdG9yID0gTW9uaXRvcjtcbmZ1bmN0aW9uIHJlc2V0TW9uaXRvclN0YXRlKG1vbml0b3IpIHtcbiAgICBtb25pdG9yW2tNb25pdG9ySWRdPy5zdG9wKCk7XG4gICAgbW9uaXRvcltrTW9uaXRvcklkXSA9IHVuZGVmaW5lZDtcbiAgICBtb25pdG9yW2tSVFRQaW5nZXJdPy5jbG9zZSgpO1xuICAgIG1vbml0b3Jba1JUVFBpbmdlcl0gPSB1bmRlZmluZWQ7XG4gICAgbW9uaXRvcltrQ2FuY2VsbGF0aW9uVG9rZW5dLmVtaXQoJ2NhbmNlbCcpO1xuICAgIG1vbml0b3Jba0Nvbm5lY3Rpb25dPy5kZXN0cm95KHsgZm9yY2U6IHRydWUgfSk7XG4gICAgbW9uaXRvcltrQ29ubmVjdGlvbl0gPSB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBjaGVja1NlcnZlcihtb25pdG9yLCBjYWxsYmFjaykge1xuICAgIGxldCBzdGFydCA9ICgwLCB1dGlsc18xLm5vdykoKTtcbiAgICBtb25pdG9yLmVtaXQoc2VydmVyXzEuU2VydmVyLlNFUlZFUl9IRUFSVEJFQVRfU1RBUlRFRCwgbmV3IGV2ZW50c18xLlNlcnZlckhlYXJ0YmVhdFN0YXJ0ZWRFdmVudChtb25pdG9yLmFkZHJlc3MpKTtcbiAgICBmdW5jdGlvbiBmYWlsdXJlSGFuZGxlcihlcnIpIHtcbiAgICAgICAgbW9uaXRvcltrQ29ubmVjdGlvbl0/LmRlc3Ryb3koeyBmb3JjZTogdHJ1ZSB9KTtcbiAgICAgICAgbW9uaXRvcltrQ29ubmVjdGlvbl0gPSB1bmRlZmluZWQ7XG4gICAgICAgIG1vbml0b3IuZW1pdChzZXJ2ZXJfMS5TZXJ2ZXIuU0VSVkVSX0hFQVJUQkVBVF9GQUlMRUQsIG5ldyBldmVudHNfMS5TZXJ2ZXJIZWFydGJlYXRGYWlsZWRFdmVudChtb25pdG9yLmFkZHJlc3MsICgwLCB1dGlsc18xLmNhbGN1bGF0ZUR1cmF0aW9uSW5Ncykoc3RhcnQpLCBlcnIpKTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAhKGVyciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29FcnJvcikgPyBuZXcgZXJyb3JfMS5Nb25nb0Vycm9yKGVycikgOiBlcnI7XG4gICAgICAgIGVycm9yLmFkZEVycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuUmVzZXRQb29sKTtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb05ldHdvcmtUaW1lb3V0RXJyb3IpIHtcbiAgICAgICAgICAgIGVycm9yLmFkZEVycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuSW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgbW9uaXRvci5lbWl0KCdyZXNldFNlcnZlcicsIGVycm9yKTtcbiAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICB9XG4gICAgY29uc3QgY29ubmVjdGlvbiA9IG1vbml0b3Jba0Nvbm5lY3Rpb25dO1xuICAgIGlmIChjb25uZWN0aW9uICYmICFjb25uZWN0aW9uLmNsb3NlZCkge1xuICAgICAgICBjb25zdCB7IHNlcnZlckFwaSwgaGVsbG9PayB9ID0gY29ubmVjdGlvbjtcbiAgICAgICAgY29uc3QgY29ubmVjdFRpbWVvdXRNUyA9IG1vbml0b3Iub3B0aW9ucy5jb25uZWN0VGltZW91dE1TO1xuICAgICAgICBjb25zdCBtYXhBd2FpdFRpbWVNUyA9IG1vbml0b3Iub3B0aW9ucy5oZWFydGJlYXRGcmVxdWVuY3lNUztcbiAgICAgICAgY29uc3QgdG9wb2xvZ3lWZXJzaW9uID0gbW9uaXRvcltrU2VydmVyXS5kZXNjcmlwdGlvbi50b3BvbG9neVZlcnNpb247XG4gICAgICAgIGNvbnN0IGlzQXdhaXRhYmxlID0gdG9wb2xvZ3lWZXJzaW9uICE9IG51bGw7XG4gICAgICAgIGNvbnN0IGNtZCA9IHtcbiAgICAgICAgICAgIFtzZXJ2ZXJBcGk/LnZlcnNpb24gfHwgaGVsbG9PayA/ICdoZWxsbycgOiBjb25zdGFudHNfMS5MRUdBQ1lfSEVMTE9fQ09NTUFORF06IDEsXG4gICAgICAgICAgICAuLi4oaXNBd2FpdGFibGUgJiYgdG9wb2xvZ3lWZXJzaW9uXG4gICAgICAgICAgICAgICAgPyB7IG1heEF3YWl0VGltZU1TLCB0b3BvbG9neVZlcnNpb246IG1ha2VUb3BvbG9neVZlcnNpb24odG9wb2xvZ3lWZXJzaW9uKSB9XG4gICAgICAgICAgICAgICAgOiB7fSlcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGlzQXdhaXRhYmxlXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBzb2NrZXRUaW1lb3V0TVM6IGNvbm5lY3RUaW1lb3V0TVMgPyBjb25uZWN0VGltZW91dE1TICsgbWF4QXdhaXRUaW1lTVMgOiAwLFxuICAgICAgICAgICAgICAgIGV4aGF1c3RBbGxvd2VkOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHsgc29ja2V0VGltZW91dE1TOiBjb25uZWN0VGltZW91dE1TIH07XG4gICAgICAgIGlmIChpc0F3YWl0YWJsZSAmJiBtb25pdG9yW2tSVFRQaW5nZXJdID09IG51bGwpIHtcbiAgICAgICAgICAgIG1vbml0b3Jba1JUVFBpbmdlcl0gPSBuZXcgUlRUUGluZ2VyKG1vbml0b3Jba0NhbmNlbGxhdGlvblRva2VuXSwgT2JqZWN0LmFzc2lnbih7IGhlYXJ0YmVhdEZyZXF1ZW5jeU1TOiBtb25pdG9yLm9wdGlvbnMuaGVhcnRiZWF0RnJlcXVlbmN5TVMgfSwgbW9uaXRvci5jb25uZWN0T3B0aW9ucykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbm5lY3Rpb24uY29tbWFuZCgoMCwgdXRpbHNfMS5ucykoJ2FkbWluLiRjbWQnKSwgY21kLCBvcHRpb25zLCAoZXJyLCBoZWxsbykgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsdXJlSGFuZGxlcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEoJ2lzV3JpdGFibGVQcmltYXJ5JyBpbiBoZWxsbykpIHtcbiAgICAgICAgICAgICAgICAvLyBQcm92aWRlIGhlbGxvLXN0eWxlIHJlc3BvbnNlIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGhlbGxvLmlzV3JpdGFibGVQcmltYXJ5ID0gaGVsbG9bY29uc3RhbnRzXzEuTEVHQUNZX0hFTExPX0NPTU1BTkRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcnR0UGluZ2VyID0gbW9uaXRvcltrUlRUUGluZ2VyXTtcbiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gaXNBd2FpdGFibGUgJiYgcnR0UGluZ2VyID8gcnR0UGluZ2VyLnJvdW5kVHJpcFRpbWUgOiAoMCwgdXRpbHNfMS5jYWxjdWxhdGVEdXJhdGlvbkluTXMpKHN0YXJ0KTtcbiAgICAgICAgICAgIG1vbml0b3IuZW1pdChzZXJ2ZXJfMS5TZXJ2ZXIuU0VSVkVSX0hFQVJUQkVBVF9TVUNDRUVERUQsIG5ldyBldmVudHNfMS5TZXJ2ZXJIZWFydGJlYXRTdWNjZWVkZWRFdmVudChtb25pdG9yLmFkZHJlc3MsIGR1cmF0aW9uLCBoZWxsbykpO1xuICAgICAgICAgICAgLy8gaWYgd2UgYXJlIHVzaW5nIHRoZSBzdHJlYW1pbmcgcHJvdG9jb2wgdGhlbiB3ZSBpbW1lZGlhdGVseSBpc3N1ZSBhbm90aGVyIGBzdGFydGVkYFxuICAgICAgICAgICAgLy8gZXZlbnQsIG90aGVyd2lzZSB0aGUgXCJjaGVja1wiIGlzIGNvbXBsZXRlIGFuZCByZXR1cm4gdG8gdGhlIG1haW4gbW9uaXRvciBsb29wXG4gICAgICAgICAgICBpZiAoaXNBd2FpdGFibGUgJiYgaGVsbG8udG9wb2xvZ3lWZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgbW9uaXRvci5lbWl0KHNlcnZlcl8xLlNlcnZlci5TRVJWRVJfSEVBUlRCRUFUX1NUQVJURUQsIG5ldyBldmVudHNfMS5TZXJ2ZXJIZWFydGJlYXRTdGFydGVkRXZlbnQobW9uaXRvci5hZGRyZXNzKSk7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSAoMCwgdXRpbHNfMS5ub3cpKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb25pdG9yW2tSVFRQaW5nZXJdPy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIG1vbml0b3Jba1JUVFBpbmdlcl0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCBoZWxsbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGNvbm5lY3RpbmcgZG9lcyBhbiBpbXBsaWNpdCBgaGVsbG9gXG4gICAgKDAsIGNvbm5lY3RfMS5jb25uZWN0KShtb25pdG9yLmNvbm5lY3RPcHRpb25zLCAoZXJyLCBjb25uKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIG1vbml0b3Jba0Nvbm5lY3Rpb25dID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgZmFpbHVyZUhhbmRsZXIoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29ubikge1xuICAgICAgICAgICAgLy8gVGVsbCB0aGUgY29ubmVjdGlvbiB0aGF0IHdlIGFyZSB1c2luZyB0aGUgc3RyZWFtaW5nIHByb3RvY29sIHNvIHRoYXQgdGhlXG4gICAgICAgICAgICAvLyBjb25uZWN0aW9uJ3MgbWVzc2FnZSBzdHJlYW0gd2lsbCBvbmx5IHJlYWQgdGhlIGxhc3QgaGVsbG8gb24gdGhlIGJ1ZmZlci5cbiAgICAgICAgICAgIGNvbm4uaXNNb25pdG9yaW5nQ29ubmVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICBpZiAoaXNJbkNsb3NlU3RhdGUobW9uaXRvcikpIHtcbiAgICAgICAgICAgICAgICBjb25uLmRlc3Ryb3koeyBmb3JjZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb25pdG9yW2tDb25uZWN0aW9uXSA9IGNvbm47XG4gICAgICAgICAgICBtb25pdG9yLmVtaXQoc2VydmVyXzEuU2VydmVyLlNFUlZFUl9IRUFSVEJFQVRfU1VDQ0VFREVELCBuZXcgZXZlbnRzXzEuU2VydmVySGVhcnRiZWF0U3VjY2VlZGVkRXZlbnQobW9uaXRvci5hZGRyZXNzLCAoMCwgdXRpbHNfMS5jYWxjdWxhdGVEdXJhdGlvbkluTXMpKHN0YXJ0KSwgY29ubi5oZWxsbykpO1xuICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCBjb25uLmhlbGxvKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuZnVuY3Rpb24gbW9uaXRvclNlcnZlcihtb25pdG9yKSB7XG4gICAgcmV0dXJuIChjYWxsYmFjaykgPT4ge1xuICAgICAgICBpZiAobW9uaXRvci5zLnN0YXRlID09PSBTVEFURV9NT05JVE9SSU5HKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZVRyYW5zaXRpb24obW9uaXRvciwgU1RBVEVfTU9OSVRPUklORyk7XG4gICAgICAgIGZ1bmN0aW9uIGRvbmUoKSB7XG4gICAgICAgICAgICBpZiAoIWlzSW5DbG9zZVN0YXRlKG1vbml0b3IpKSB7XG4gICAgICAgICAgICAgICAgc3RhdGVUcmFuc2l0aW9uKG1vbml0b3IsIFNUQVRFX0lETEUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICBjaGVja1NlcnZlcihtb25pdG9yLCAoZXJyLCBoZWxsbykgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSBhbiBlcnJvciBvY2N1cnJlZCBvbiBpbml0aWFsIGRpc2NvdmVyeSwgYWxzbyBiYWlsXG4gICAgICAgICAgICAgICAgaWYgKG1vbml0b3Jba1NlcnZlcl0uZGVzY3JpcHRpb24udHlwZSA9PT0gY29tbW9uXzEuU2VydmVyVHlwZS5Vbmtub3duKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkb25lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgdGhlIGNoZWNrIGluZGljYXRlcyBzdHJlYW1pbmcgaXMgc3VwcG9ydGVkLCBpbW1lZGlhdGVseSByZXNjaGVkdWxlIG1vbml0b3JpbmdcbiAgICAgICAgICAgIGlmIChoZWxsbyAmJiBoZWxsby50b3BvbG9neVZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAoMCwgdGltZXJzXzEuc2V0VGltZW91dCkoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSW5DbG9zZVN0YXRlKG1vbml0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb25pdG9yW2tNb25pdG9ySWRdPy53YWtlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG1ha2VUb3BvbG9neVZlcnNpb24odHYpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcm9jZXNzSWQ6IHR2LnByb2Nlc3NJZCxcbiAgICAgICAgLy8gdGVzdHMgbW9jayBjb3VudGVyIGFzIGp1c3QgbnVtYmVyLCBidXQgaW4gYSByZWFsIHNpdHVhdGlvbiBjb3VudGVyIHNob3VsZCBhbHdheXMgYmUgYSBMb25nXG4gICAgICAgIC8vIFRPRE8oTk9ERS0yNjc0KTogUHJlc2VydmUgaW50NjQgc2VudCBmcm9tIE1vbmdvREJcbiAgICAgICAgY291bnRlcjogYnNvbl8xLkxvbmcuaXNMb25nKHR2LmNvdW50ZXIpID8gdHYuY291bnRlciA6IGJzb25fMS5Mb25nLmZyb21OdW1iZXIodHYuY291bnRlcilcbiAgICB9O1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgUlRUUGluZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcihjYW5jZWxsYXRpb25Ub2tlbiwgb3B0aW9ucykge1xuICAgICAgICB0aGlzW2tDb25uZWN0aW9uXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpc1trQ2FuY2VsbGF0aW9uVG9rZW5dID0gY2FuY2VsbGF0aW9uVG9rZW47XG4gICAgICAgIHRoaXNba1JvdW5kVHJpcFRpbWVdID0gMDtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0RnJlcXVlbmN5TVMgPSBvcHRpb25zLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TO1xuICAgICAgICB0aGlzW2tNb25pdG9ySWRdID0gKDAsIHRpbWVyc18xLnNldFRpbWVvdXQpKCgpID0+IG1lYXN1cmVSb3VuZFRyaXBUaW1lKHRoaXMsIG9wdGlvbnMpLCBoZWFydGJlYXRGcmVxdWVuY3lNUyk7XG4gICAgfVxuICAgIGdldCByb3VuZFRyaXBUaW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trUm91bmRUcmlwVGltZV07XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKHRoaXNba01vbml0b3JJZF0pO1xuICAgICAgICB0aGlzW2tDb25uZWN0aW9uXT8uZGVzdHJveSh7IGZvcmNlOiB0cnVlIH0pO1xuICAgICAgICB0aGlzW2tDb25uZWN0aW9uXSA9IHVuZGVmaW5lZDtcbiAgICB9XG59XG5leHBvcnRzLlJUVFBpbmdlciA9IFJUVFBpbmdlcjtcbmZ1bmN0aW9uIG1lYXN1cmVSb3VuZFRyaXBUaW1lKHJ0dFBpbmdlciwgb3B0aW9ucykge1xuICAgIGNvbnN0IHN0YXJ0ID0gKDAsIHV0aWxzXzEubm93KSgpO1xuICAgIG9wdGlvbnMuY2FuY2VsbGF0aW9uVG9rZW4gPSBydHRQaW5nZXJba0NhbmNlbGxhdGlvblRva2VuXTtcbiAgICBjb25zdCBoZWFydGJlYXRGcmVxdWVuY3lNUyA9IG9wdGlvbnMuaGVhcnRiZWF0RnJlcXVlbmN5TVM7XG4gICAgaWYgKHJ0dFBpbmdlci5jbG9zZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtZWFzdXJlQW5kUmVzY2hlZHVsZShjb25uKSB7XG4gICAgICAgIGlmIChydHRQaW5nZXIuY2xvc2VkKSB7XG4gICAgICAgICAgICBjb25uPy5kZXN0cm95KHsgZm9yY2U6IHRydWUgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJ0dFBpbmdlcltrQ29ubmVjdGlvbl0gPT0gbnVsbCkge1xuICAgICAgICAgICAgcnR0UGluZ2VyW2tDb25uZWN0aW9uXSA9IGNvbm47XG4gICAgICAgIH1cbiAgICAgICAgcnR0UGluZ2VyW2tSb3VuZFRyaXBUaW1lXSA9ICgwLCB1dGlsc18xLmNhbGN1bGF0ZUR1cmF0aW9uSW5Ncykoc3RhcnQpO1xuICAgICAgICBydHRQaW5nZXJba01vbml0b3JJZF0gPSAoMCwgdGltZXJzXzEuc2V0VGltZW91dCkoKCkgPT4gbWVhc3VyZVJvdW5kVHJpcFRpbWUocnR0UGluZ2VyLCBvcHRpb25zKSwgaGVhcnRiZWF0RnJlcXVlbmN5TVMpO1xuICAgIH1cbiAgICBjb25zdCBjb25uZWN0aW9uID0gcnR0UGluZ2VyW2tDb25uZWN0aW9uXTtcbiAgICBpZiAoY29ubmVjdGlvbiA9PSBudWxsKSB7XG4gICAgICAgICgwLCBjb25uZWN0XzEuY29ubmVjdCkob3B0aW9ucywgKGVyciwgY29ubikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJ0dFBpbmdlcltrQ29ubmVjdGlvbl0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgcnR0UGluZ2VyW2tSb3VuZFRyaXBUaW1lXSA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWVhc3VyZUFuZFJlc2NoZWR1bGUoY29ubik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbm5lY3Rpb24uY29tbWFuZCgoMCwgdXRpbHNfMS5ucykoJ2FkbWluLiRjbWQnKSwgeyBbY29uc3RhbnRzXzEuTEVHQUNZX0hFTExPX0NPTU1BTkRdOiAxIH0sIHVuZGVmaW5lZCwgZXJyID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgcnR0UGluZ2VyW2tDb25uZWN0aW9uXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHJ0dFBpbmdlcltrUm91bmRUcmlwVGltZV0gPSAwO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG1lYXN1cmVBbmRSZXNjaGVkdWxlKCk7XG4gICAgfSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBNb25pdG9ySW50ZXJ2YWwge1xuICAgIGNvbnN0cnVjdG9yKGZuLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy5pc0V4cGVkaXRlZENhbGxUb0ZuU2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzRXhlY3V0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhc0V4ZWN1dGVkT25jZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9leGVjdXRlQW5kUmVzY2hlZHVsZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0b3BwZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHRoaXMudGltZXJJZCkge1xuICAgICAgICAgICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKHRoaXMudGltZXJJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRXhwZWRpdGVkQ2FsbFRvRm5TY2hlZHVsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNFeGVjdXRpb25JblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZm4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEV4ZWN1dGlvbkVuZGVkID0gKDAsIHV0aWxzXzEubm93KSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNFeGVjdXRpb25JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzY2hlZHVsZSh0aGlzLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZuID0gZm47XG4gICAgICAgIHRoaXMubGFzdEV4ZWN1dGlvbkVuZGVkID0gLUluZmluaXR5O1xuICAgICAgICB0aGlzLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TID0gb3B0aW9ucy5oZWFydGJlYXRGcmVxdWVuY3lNUyA/PyAxMDAwO1xuICAgICAgICB0aGlzLm1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TID0gb3B0aW9ucy5taW5IZWFydGJlYXRGcmVxdWVuY3lNUyA/PyA1MDA7XG4gICAgICAgIGlmIChvcHRpb25zLmltbWVkaWF0ZSkge1xuICAgICAgICAgICAgdGhpcy5fZXhlY3V0ZUFuZFJlc2NoZWR1bGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc2NoZWR1bGUodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3YWtlKCkge1xuICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9ICgwLCB1dGlsc18xLm5vdykoKTtcbiAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdENhbGwgPSBjdXJyZW50VGltZSAtIHRoaXMubGFzdEV4ZWN1dGlvbkVuZGVkO1xuICAgICAgICAvLyBUT0RPKE5PREUtNDY3NCk6IEFkZCBlcnJvciBoYW5kbGluZyBhbmQgbG9nZ2luZyB0byB0aGUgbW9uaXRvclxuICAgICAgICBpZiAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhlY3V0ZUFuZFJlc2NoZWR1bGUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc0V4ZWN1dGlvbkluUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBkZWJvdW5jZSBtdWx0aXBsZSBjYWxscyB0byB3YWtlIHdpdGhpbiB0aGUgYG1pbkludGVydmFsYFxuICAgICAgICBpZiAodGhpcy5pc0V4cGVkaXRlZENhbGxUb0ZuU2NoZWR1bGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVzY2hlZHVsZSBhIGNhbGwgYXMgc29vbiBhcyBwb3NzaWJsZSwgZW5zdXJpbmcgdGhlIGNhbGwgbmV2ZXIgaGFwcGVuc1xuICAgICAgICAvLyBmYXN0ZXIgdGhhbiB0aGUgYG1pbkludGVydmFsYFxuICAgICAgICBpZiAodGltZVNpbmNlTGFzdENhbGwgPCB0aGlzLm1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TKSB7XG4gICAgICAgICAgICB0aGlzLmlzRXhwZWRpdGVkQ2FsbFRvRm5TY2hlZHVsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fcmVzY2hlZHVsZSh0aGlzLm1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TIC0gdGltZVNpbmNlTGFzdENhbGwpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2V4ZWN1dGVBbmRSZXNjaGVkdWxlKCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuc3RvcHBlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnRpbWVySWQpIHtcbiAgICAgICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKHRoaXMudGltZXJJZCk7XG4gICAgICAgICAgICB0aGlzLnRpbWVySWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0RXhlY3V0aW9uRW5kZWQgPSAtSW5maW5pdHk7XG4gICAgICAgIHRoaXMuaXNFeHBlZGl0ZWRDYWxsVG9GblNjaGVkdWxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gKDAsIHV0aWxzXzEubm93KSgpO1xuICAgICAgICBjb25zdCB0aW1lU2luY2VMYXN0Q2FsbCA9IGN1cnJlbnRUaW1lIC0gdGhpcy5sYXN0RXhlY3V0aW9uRW5kZWQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0aW1lcklkOiB0aGlzLnRpbWVySWQgIT0gbnVsbCA/ICdzZXQnIDogJ2NsZWFyZWQnLFxuICAgICAgICAgICAgbGFzdENhbGxUaW1lOiB0aGlzLmxhc3RFeGVjdXRpb25FbmRlZCxcbiAgICAgICAgICAgIGlzRXhwZWRpdGVkQ2hlY2tTY2hlZHVsZWQ6IHRoaXMuaXNFeHBlZGl0ZWRDYWxsVG9GblNjaGVkdWxlZCxcbiAgICAgICAgICAgIHN0b3BwZWQ6IHRoaXMuc3RvcHBlZCxcbiAgICAgICAgICAgIGhlYXJ0YmVhdEZyZXF1ZW5jeU1TOiB0aGlzLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TLFxuICAgICAgICAgICAgbWluSGVhcnRiZWF0RnJlcXVlbmN5TVM6IHRoaXMubWluSGVhcnRiZWF0RnJlcXVlbmN5TVMsXG4gICAgICAgICAgICBjdXJyZW50VGltZSxcbiAgICAgICAgICAgIHRpbWVTaW5jZUxhc3RDYWxsXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9yZXNjaGVkdWxlKG1zKSB7XG4gICAgICAgIGlmICh0aGlzLnN0b3BwZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLnRpbWVySWQpIHtcbiAgICAgICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKHRoaXMudGltZXJJZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50aW1lcklkID0gKDAsIHRpbWVyc18xLnNldFRpbWVvdXQpKHRoaXMuX2V4ZWN1dGVBbmRSZXNjaGVkdWxlLCBtcyB8fCB0aGlzLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TKTtcbiAgICB9XG59XG5leHBvcnRzLk1vbml0b3JJbnRlcnZhbCA9IE1vbml0b3JJbnRlcnZhbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vbml0b3IuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiTW9uaXRvckludGVydmFsIiwiUlRUUGluZ2VyIiwiTW9uaXRvciIsInRpbWVyc18xIiwicmVxdWlyZSIsImJzb25fMSIsImNvbm5lY3RfMSIsImNvbm5lY3Rpb25fMSIsImNvbnN0YW50c18xIiwiZXJyb3JfMSIsIm1vbmdvX3R5cGVzXzEiLCJ1dGlsc18xIiwiY29tbW9uXzEiLCJldmVudHNfMSIsInNlcnZlcl8xIiwia1NlcnZlciIsIlN5bWJvbCIsImtNb25pdG9ySWQiLCJrQ29ubmVjdGlvbiIsImtDYW5jZWxsYXRpb25Ub2tlbiIsImtSVFRQaW5nZXIiLCJrUm91bmRUcmlwVGltZSIsIlNUQVRFX0lETEUiLCJTVEFURV9NT05JVE9SSU5HIiwic3RhdGVUcmFuc2l0aW9uIiwibWFrZVN0YXRlTWFjaGluZSIsIlNUQVRFX0NMT1NJTkciLCJTVEFURV9DTE9TRUQiLCJJTlZBTElEX1JFUVVFU1RfQ0hFQ0tfU1RBVEVTIiwiU2V0IiwiaXNJbkNsb3NlU3RhdGUiLCJtb25pdG9yIiwicyIsInN0YXRlIiwiVHlwZWRFdmVudEVtaXR0ZXIiLCJjb25uZWN0aW9uIiwiY29uc3RydWN0b3IiLCJzZXJ2ZXIiLCJvcHRpb25zIiwidW5kZWZpbmVkIiwiQ2FuY2VsbGF0aW9uVG9rZW4iLCJzZXRNYXhMaXN0ZW5lcnMiLCJJbmZpbml0eSIsImFkZHJlc3MiLCJkZXNjcmlwdGlvbiIsImZyZWV6ZSIsImNvbm5lY3RUaW1lb3V0TVMiLCJoZWFydGJlYXRGcmVxdWVuY3lNUyIsIm1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TIiwiY2FuY2VsbGF0aW9uVG9rZW4iLCJjb25uZWN0T3B0aW9ucyIsImFzc2lnbiIsImlkIiwiZ2VuZXJhdGlvbiIsInBvb2wiLCJjb25uZWN0aW9uVHlwZSIsIkNvbm5lY3Rpb24iLCJob3N0QWRkcmVzcyIsInJhdyIsInVzZUJpZ0ludDY0IiwicHJvbW90ZUxvbmdzIiwicHJvbW90ZVZhbHVlcyIsInByb21vdGVCdWZmZXJzIiwiY3JlZGVudGlhbHMiLCJhdXRvRW5jcnlwdGVyIiwiY29ubmVjdCIsIm1vbml0b3JTZXJ2ZXIiLCJpbW1lZGlhdGUiLCJyZXF1ZXN0Q2hlY2siLCJoYXMiLCJ3YWtlIiwicmVzZXQiLCJ0b3BvbG9neVZlcnNpb24iLCJyZXNldE1vbml0b3JTdGF0ZSIsImNsb3NlIiwiZW1pdCIsInN0b3AiLCJkZXN0cm95IiwiZm9yY2UiLCJjaGVja1NlcnZlciIsImNhbGxiYWNrIiwic3RhcnQiLCJub3ciLCJTZXJ2ZXIiLCJTRVJWRVJfSEVBUlRCRUFUX1NUQVJURUQiLCJTZXJ2ZXJIZWFydGJlYXRTdGFydGVkRXZlbnQiLCJmYWlsdXJlSGFuZGxlciIsImVyciIsIlNFUlZFUl9IRUFSVEJFQVRfRkFJTEVEIiwiU2VydmVySGVhcnRiZWF0RmFpbGVkRXZlbnQiLCJjYWxjdWxhdGVEdXJhdGlvbkluTXMiLCJlcnJvciIsIk1vbmdvRXJyb3IiLCJhZGRFcnJvckxhYmVsIiwiTW9uZ29FcnJvckxhYmVsIiwiUmVzZXRQb29sIiwiTW9uZ29OZXR3b3JrVGltZW91dEVycm9yIiwiSW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucyIsImNsb3NlZCIsInNlcnZlckFwaSIsImhlbGxvT2siLCJtYXhBd2FpdFRpbWVNUyIsImlzQXdhaXRhYmxlIiwiY21kIiwidmVyc2lvbiIsIkxFR0FDWV9IRUxMT19DT01NQU5EIiwibWFrZVRvcG9sb2d5VmVyc2lvbiIsInNvY2tldFRpbWVvdXRNUyIsImV4aGF1c3RBbGxvd2VkIiwiY29tbWFuZCIsIm5zIiwiaGVsbG8iLCJpc1dyaXRhYmxlUHJpbWFyeSIsInJ0dFBpbmdlciIsImR1cmF0aW9uIiwicm91bmRUcmlwVGltZSIsIlNFUlZFUl9IRUFSVEJFQVRfU1VDQ0VFREVEIiwiU2VydmVySGVhcnRiZWF0U3VjY2VlZGVkRXZlbnQiLCJjb25uIiwiaXNNb25pdG9yaW5nQ29ubmVjdGlvbiIsInByb2Nlc3MiLCJuZXh0VGljayIsImRvbmUiLCJ0eXBlIiwiU2VydmVyVHlwZSIsIlVua25vd24iLCJzZXRUaW1lb3V0IiwidHYiLCJwcm9jZXNzSWQiLCJjb3VudGVyIiwiTG9uZyIsImlzTG9uZyIsImZyb21OdW1iZXIiLCJtZWFzdXJlUm91bmRUcmlwVGltZSIsImNsZWFyVGltZW91dCIsIm1lYXN1cmVBbmRSZXNjaGVkdWxlIiwiZm4iLCJpc0V4cGVkaXRlZENhbGxUb0ZuU2NoZWR1bGVkIiwic3RvcHBlZCIsImlzRXhlY3V0aW9uSW5Qcm9ncmVzcyIsImhhc0V4ZWN1dGVkT25jZSIsIl9leGVjdXRlQW5kUmVzY2hlZHVsZSIsInRpbWVySWQiLCJsYXN0RXhlY3V0aW9uRW5kZWQiLCJfcmVzY2hlZHVsZSIsImN1cnJlbnRUaW1lIiwidGltZVNpbmNlTGFzdENhbGwiLCJ0b1N0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0b0pTT04iLCJsYXN0Q2FsbFRpbWUiLCJpc0V4cGVkaXRlZENoZWNrU2NoZWR1bGVkIiwibXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/monitor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/server.js":
/*!*************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/server.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Server = void 0;\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst connection_1 = __webpack_require__(/*! ../cmap/connection */ \"(ssr)/./node_modules/mongodb/lib/cmap/connection.js\");\nconst connection_pool_1 = __webpack_require__(/*! ../cmap/connection_pool */ \"(ssr)/./node_modules/mongodb/lib/cmap/connection_pool.js\");\nconst errors_1 = __webpack_require__(/*! ../cmap/errors */ \"(ssr)/./node_modules/mongodb/lib/cmap/errors.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst transactions_1 = __webpack_require__(/*! ../transactions */ \"(ssr)/./node_modules/mongodb/lib/transactions.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst monitor_1 = __webpack_require__(/*! ./monitor */ \"(ssr)/./node_modules/mongodb/lib/sdam/monitor.js\");\nconst server_description_1 = __webpack_require__(/*! ./server_description */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_description.js\");\nconst stateTransition = (0, utils_1.makeStateMachine)({\n    [common_1.STATE_CLOSED]: [\n        common_1.STATE_CLOSED,\n        common_1.STATE_CONNECTING\n    ],\n    [common_1.STATE_CONNECTING]: [\n        common_1.STATE_CONNECTING,\n        common_1.STATE_CLOSING,\n        common_1.STATE_CONNECTED,\n        common_1.STATE_CLOSED\n    ],\n    [common_1.STATE_CONNECTED]: [\n        common_1.STATE_CONNECTED,\n        common_1.STATE_CLOSING,\n        common_1.STATE_CLOSED\n    ],\n    [common_1.STATE_CLOSING]: [\n        common_1.STATE_CLOSING,\n        common_1.STATE_CLOSED\n    ]\n});\n/** @internal */ const kMonitor = Symbol(\"monitor\");\n/** @internal */ class Server extends mongo_types_1.TypedEventEmitter {\n    /**\n     * Create a server\n     */ constructor(topology, description, options){\n        super();\n        this.commandAsync = (0, util_1.promisify)((ns, cmd, options, // callback type defines Document result because result is never nullish when it succeeds, otherwise promise rejects\n        callback)=>this.command(ns, cmd, options, callback));\n        this.serverApi = options.serverApi;\n        const poolOptions = {\n            hostAddress: description.hostAddress,\n            ...options\n        };\n        this.topology = topology;\n        this.pool = new connection_pool_1.ConnectionPool(this, poolOptions);\n        this.s = {\n            description,\n            options,\n            state: common_1.STATE_CLOSED,\n            operationCount: 0\n        };\n        for (const event of [\n            ...constants_1.CMAP_EVENTS,\n            ...constants_1.APM_EVENTS\n        ]){\n            this.pool.on(event, (e)=>this.emit(event, e));\n        }\n        this.pool.on(connection_1.Connection.CLUSTER_TIME_RECEIVED, (clusterTime)=>{\n            this.clusterTime = clusterTime;\n        });\n        if (this.loadBalanced) {\n            this[kMonitor] = null;\n            // monitoring is disabled in load balancing mode\n            return;\n        }\n        // create the monitor\n        // TODO(NODE-4144): Remove new variable for type narrowing\n        const monitor = new monitor_1.Monitor(this, this.s.options);\n        this[kMonitor] = monitor;\n        for (const event of constants_1.HEARTBEAT_EVENTS){\n            monitor.on(event, (e)=>this.emit(event, e));\n        }\n        monitor.on(\"resetServer\", (error)=>markServerUnknown(this, error));\n        monitor.on(Server.SERVER_HEARTBEAT_SUCCEEDED, (event)=>{\n            this.emit(Server.DESCRIPTION_RECEIVED, new server_description_1.ServerDescription(this.description.hostAddress, event.reply, {\n                roundTripTime: calculateRoundTripTime(this.description.roundTripTime, event.duration)\n            }));\n            if (this.s.state === common_1.STATE_CONNECTING) {\n                stateTransition(this, common_1.STATE_CONNECTED);\n                this.emit(Server.CONNECT, this);\n            }\n        });\n    }\n    get clusterTime() {\n        return this.topology.clusterTime;\n    }\n    set clusterTime(clusterTime) {\n        this.topology.clusterTime = clusterTime;\n    }\n    get description() {\n        return this.s.description;\n    }\n    get name() {\n        return this.s.description.address;\n    }\n    get autoEncrypter() {\n        if (this.s.options && this.s.options.autoEncrypter) {\n            return this.s.options.autoEncrypter;\n        }\n        return;\n    }\n    get loadBalanced() {\n        return this.topology.description.type === common_1.TopologyType.LoadBalanced;\n    }\n    /**\n     * Initiate server connect\n     */ connect() {\n        if (this.s.state !== common_1.STATE_CLOSED) {\n            return;\n        }\n        stateTransition(this, common_1.STATE_CONNECTING);\n        // If in load balancer mode we automatically set the server to\n        // a load balancer. It never transitions out of this state and\n        // has no monitor.\n        if (!this.loadBalanced) {\n            this[kMonitor]?.connect();\n        } else {\n            stateTransition(this, common_1.STATE_CONNECTED);\n            this.emit(Server.CONNECT, this);\n        }\n    }\n    /** Destroy the server connection */ destroy(options, callback) {\n        if (typeof options === \"function\") {\n            callback = options;\n            options = {\n                force: false\n            };\n        }\n        options = Object.assign({}, {\n            force: false\n        }, options);\n        if (this.s.state === common_1.STATE_CLOSED) {\n            if (typeof callback === \"function\") {\n                callback();\n            }\n            return;\n        }\n        stateTransition(this, common_1.STATE_CLOSING);\n        if (!this.loadBalanced) {\n            this[kMonitor]?.close();\n        }\n        this.pool.close(options, (err)=>{\n            stateTransition(this, common_1.STATE_CLOSED);\n            this.emit(\"closed\");\n            if (typeof callback === \"function\") {\n                callback(err);\n            }\n        });\n    }\n    /**\n     * Immediately schedule monitoring of this server. If there already an attempt being made\n     * this will be a no-op.\n     */ requestCheck() {\n        if (!this.loadBalanced) {\n            this[kMonitor]?.requestCheck();\n        }\n    }\n    /**\n     * Execute a command\n     * @internal\n     */ command(ns, cmd, options, callback) {\n        if (callback == null) {\n            throw new error_1.MongoInvalidArgumentError(\"Callback must be provided\");\n        }\n        if (ns.db == null || typeof ns === \"string\") {\n            throw new error_1.MongoInvalidArgumentError(\"Namespace must not be a string\");\n        }\n        if (this.s.state === common_1.STATE_CLOSING || this.s.state === common_1.STATE_CLOSED) {\n            callback(new error_1.MongoServerClosedError());\n            return;\n        }\n        // Clone the options\n        const finalOptions = Object.assign({}, options, {\n            wireProtocolCommand: false\n        });\n        // There are cases where we need to flag the read preference not to get sent in\n        // the command, such as pre-5.0 servers attempting to perform an aggregate write\n        // with a non-primary read preference. In this case the effective read preference\n        // (primary) is not the same as the provided and must be removed completely.\n        if (finalOptions.omitReadPreference) {\n            delete finalOptions.readPreference;\n        }\n        const session = finalOptions.session;\n        const conn = session?.pinnedConnection;\n        // NOTE: This is a hack! We can't retrieve the connections used for executing an operation\n        //       (and prevent them from being checked back in) at the point of operation execution.\n        //       This should be considered as part of the work for NODE-2882\n        // NOTE:\n        //       When incrementing operation count, it's important that we increment it before we\n        //       attempt to check out a connection from the pool.  This ensures that operations that\n        //       are waiting for a connection are included in the operation count.  Load balanced\n        //       mode will only ever have a single server, so the operation count doesn't matter.\n        //       Incrementing the operation count above the logic to handle load balanced mode would\n        //       require special logic to decrement it again, or would double increment (the load\n        //       balanced code makes a recursive call).  Instead, we increment the count after this\n        //       check.\n        if (this.loadBalanced && session && conn == null && isPinnableCommand(cmd, session)) {\n            this.pool.checkOut((err, checkedOut)=>{\n                if (err || checkedOut == null) {\n                    if (callback) return callback(err);\n                    return;\n                }\n                session.pin(checkedOut);\n                this.command(ns, cmd, finalOptions, callback);\n            });\n            return;\n        }\n        this.incrementOperationCount();\n        this.pool.withConnection(conn, (err, conn, cb)=>{\n            if (err || !conn) {\n                this.decrementOperationCount();\n                if (!err) {\n                    return cb(new error_1.MongoRuntimeError(\"Failed to create connection without error\"));\n                }\n                if (!(err instanceof errors_1.PoolClearedError)) {\n                    this.handleError(err);\n                }\n                return cb(err);\n            }\n            conn.command(ns, cmd, finalOptions, makeOperationHandler(this, conn, cmd, finalOptions, (error, response)=>{\n                this.decrementOperationCount();\n                cb(error, response);\n            }));\n        }, callback);\n    }\n    /**\n     * Handle SDAM error\n     * @internal\n     */ handleError(error, connection) {\n        if (!(error instanceof error_1.MongoError)) {\n            return;\n        }\n        const isStaleError = error.connectionGeneration && error.connectionGeneration < this.pool.generation;\n        if (isStaleError) {\n            return;\n        }\n        const isNetworkNonTimeoutError = error instanceof error_1.MongoNetworkError && !(error instanceof error_1.MongoNetworkTimeoutError);\n        const isNetworkTimeoutBeforeHandshakeError = (0, error_1.isNetworkErrorBeforeHandshake)(error);\n        const isAuthHandshakeError = error.hasErrorLabel(error_1.MongoErrorLabel.HandshakeError);\n        if (isNetworkNonTimeoutError || isNetworkTimeoutBeforeHandshakeError || isAuthHandshakeError) {\n            // In load balanced mode we never mark the server as unknown and always\n            // clear for the specific service id.\n            if (!this.loadBalanced) {\n                error.addErrorLabel(error_1.MongoErrorLabel.ResetPool);\n                markServerUnknown(this, error);\n            } else if (connection) {\n                this.pool.clear({\n                    serviceId: connection.serviceId\n                });\n            }\n        } else {\n            if ((0, error_1.isSDAMUnrecoverableError)(error)) {\n                if (shouldHandleStateChangeError(this, error)) {\n                    const shouldClearPool = (0, utils_1.maxWireVersion)(this) <= 7 || (0, error_1.isNodeShuttingDownError)(error);\n                    if (this.loadBalanced && connection && shouldClearPool) {\n                        this.pool.clear({\n                            serviceId: connection.serviceId\n                        });\n                    }\n                    if (!this.loadBalanced) {\n                        if (shouldClearPool) {\n                            error.addErrorLabel(error_1.MongoErrorLabel.ResetPool);\n                        }\n                        markServerUnknown(this, error);\n                        process.nextTick(()=>this.requestCheck());\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Decrement the operation count, returning the new count.\n     */ decrementOperationCount() {\n        return this.s.operationCount -= 1;\n    }\n    /**\n     * Increment the operation count, returning the new count.\n     */ incrementOperationCount() {\n        return this.s.operationCount += 1;\n    }\n}\n/** @event */ Server.SERVER_HEARTBEAT_STARTED = constants_1.SERVER_HEARTBEAT_STARTED;\n/** @event */ Server.SERVER_HEARTBEAT_SUCCEEDED = constants_1.SERVER_HEARTBEAT_SUCCEEDED;\n/** @event */ Server.SERVER_HEARTBEAT_FAILED = constants_1.SERVER_HEARTBEAT_FAILED;\n/** @event */ Server.CONNECT = constants_1.CONNECT;\n/** @event */ Server.DESCRIPTION_RECEIVED = constants_1.DESCRIPTION_RECEIVED;\n/** @event */ Server.CLOSED = constants_1.CLOSED;\n/** @event */ Server.ENDED = constants_1.ENDED;\nexports.Server = Server;\nfunction calculateRoundTripTime(oldRtt, duration) {\n    if (oldRtt === -1) {\n        return duration;\n    }\n    const alpha = 0.2;\n    return alpha * duration + (1 - alpha) * oldRtt;\n}\nfunction markServerUnknown(server, error) {\n    // Load balancer servers can never be marked unknown.\n    if (server.loadBalanced) {\n        return;\n    }\n    if (error instanceof error_1.MongoNetworkError && !(error instanceof error_1.MongoNetworkTimeoutError)) {\n        server[kMonitor]?.reset();\n    }\n    server.emit(Server.DESCRIPTION_RECEIVED, new server_description_1.ServerDescription(server.description.hostAddress, undefined, {\n        error\n    }));\n}\nfunction isPinnableCommand(cmd, session) {\n    if (session) {\n        return session.inTransaction() || \"aggregate\" in cmd || \"find\" in cmd || \"getMore\" in cmd || \"listCollections\" in cmd || \"listIndexes\" in cmd;\n    }\n    return false;\n}\nfunction connectionIsStale(pool, connection) {\n    if (connection.serviceId) {\n        return connection.generation !== pool.serviceGenerations.get(connection.serviceId.toHexString());\n    }\n    return connection.generation !== pool.generation;\n}\nfunction shouldHandleStateChangeError(server, err) {\n    const etv = err.topologyVersion;\n    const stv = server.description.topologyVersion;\n    return (0, server_description_1.compareTopologyVersion)(stv, etv) < 0;\n}\nfunction inActiveTransaction(session, cmd) {\n    return session && session.inTransaction() && !(0, transactions_1.isTransactionCommand)(cmd);\n}\n/** this checks the retryWrites option passed down from the client options, it\n * does not check if the server supports retryable writes */ function isRetryableWritesEnabled(topology) {\n    return topology.s.options.retryWrites !== false;\n}\nfunction makeOperationHandler(server, connection, cmd, options, callback) {\n    const session = options?.session;\n    return function handleOperationResult(error, result) {\n        // We should not swallow an error if it is present.\n        if (error == null && result != null) {\n            return callback(undefined, result);\n        }\n        if (options != null && \"noResponse\" in options && options.noResponse === true) {\n            return callback(undefined, null);\n        }\n        if (!error) {\n            return callback(new error_1.MongoUnexpectedServerResponseError(\"Empty response with no error\"));\n        }\n        if (!(error instanceof error_1.MongoError)) {\n            // Node.js or some other error we have not special handling for\n            return callback(error);\n        }\n        if (connectionIsStale(server.pool, connection)) {\n            return callback(error);\n        }\n        if (error instanceof error_1.MongoNetworkError) {\n            if (session && !session.hasEnded && session.serverSession) {\n                session.serverSession.isDirty = true;\n            }\n            // inActiveTransaction check handles commit and abort.\n            if (inActiveTransaction(session, cmd) && !error.hasErrorLabel(error_1.MongoErrorLabel.TransientTransactionError)) {\n                error.addErrorLabel(error_1.MongoErrorLabel.TransientTransactionError);\n            }\n            if ((isRetryableWritesEnabled(server.topology) || (0, transactions_1.isTransactionCommand)(cmd)) && (0, utils_1.supportsRetryableWrites)(server) && !inActiveTransaction(session, cmd)) {\n                error.addErrorLabel(error_1.MongoErrorLabel.RetryableWriteError);\n            }\n        } else {\n            if ((isRetryableWritesEnabled(server.topology) || (0, transactions_1.isTransactionCommand)(cmd)) && (0, error_1.needsRetryableWriteLabel)(error, (0, utils_1.maxWireVersion)(server)) && !inActiveTransaction(session, cmd)) {\n                error.addErrorLabel(error_1.MongoErrorLabel.RetryableWriteError);\n            }\n        }\n        if (session && session.isPinned && error.hasErrorLabel(error_1.MongoErrorLabel.TransientTransactionError)) {\n            session.unpin({\n                force: true\n            });\n        }\n        server.handleError(error, connection);\n        return callback(error);\n    };\n} //# sourceMappingURL=server.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9zZXJ2ZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGNBQWMsR0FBRyxLQUFLO0FBQ3RCLE1BQU1HLFNBQVNDLG1CQUFPQSxDQUFDLGtCQUFNO0FBQzdCLE1BQU1DLGVBQWVELG1CQUFPQSxDQUFDLCtFQUFvQjtBQUNqRCxNQUFNRSxvQkFBb0JGLG1CQUFPQSxDQUFDLHlGQUF5QjtBQUMzRCxNQUFNRyxXQUFXSCxtQkFBT0EsQ0FBQyx1RUFBZ0I7QUFDekMsTUFBTUksY0FBY0osbUJBQU9BLENBQUMsbUVBQWM7QUFDMUMsTUFBTUssVUFBVUwsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTU0sZ0JBQWdCTixtQkFBT0EsQ0FBQyx1RUFBZ0I7QUFDOUMsTUFBTU8saUJBQWlCUCxtQkFBT0EsQ0FBQyx5RUFBaUI7QUFDaEQsTUFBTVEsVUFBVVIsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTVMsV0FBV1QsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsTUFBTVUsWUFBWVYsbUJBQU9BLENBQUMsbUVBQVc7QUFDckMsTUFBTVcsdUJBQXVCWCxtQkFBT0EsQ0FBQyx5RkFBc0I7QUFDM0QsTUFBTVksa0JBQWtCLENBQUMsR0FBR0osUUFBUUssZ0JBQWdCLEVBQUU7SUFDbEQsQ0FBQ0osU0FBU0ssWUFBWSxDQUFDLEVBQUU7UUFBQ0wsU0FBU0ssWUFBWTtRQUFFTCxTQUFTTSxnQkFBZ0I7S0FBQztJQUMzRSxDQUFDTixTQUFTTSxnQkFBZ0IsQ0FBQyxFQUFFO1FBQUNOLFNBQVNNLGdCQUFnQjtRQUFFTixTQUFTTyxhQUFhO1FBQUVQLFNBQVNRLGVBQWU7UUFBRVIsU0FBU0ssWUFBWTtLQUFDO0lBQ2pJLENBQUNMLFNBQVNRLGVBQWUsQ0FBQyxFQUFFO1FBQUNSLFNBQVNRLGVBQWU7UUFBRVIsU0FBU08sYUFBYTtRQUFFUCxT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ZXVJLG9CQUFvQixFQUFFbEgsSUFBRyxLQUMxRixDQUFDLEdBQUd2QixRQUFRc0osd0JBQXdCLEVBQUV2RyxPQUFPLENBQUMsR0FBRzVDLFFBQVErRyxjQUFjLEVBQUVVLFlBQ3pFLENBQUNZLG9CQUFvQjNELFNBQVN0RCxNQUFNO2dCQUNwQ3dCLE1BQU00RCxhQUFhLENBQUMzRyxRQUFReUcsZUFBZSxDQUFDNEMsbUJBQW1CO1lBQ25FO1FBQ0o7UUFDQSxJQUFJeEUsV0FDQUEsUUFBUTBFLFFBQVEsSUFDaEJ4RyxNQUFNeUQsYUFBYSxDQUFDeEcsUUFBUXlHLGVBQWUsQ0FBQzBDLHlCQUF5QixHQUFHO1lBQ3hFdEUsUUFBUTJFLEtBQUssQ0FBQztnQkFBRXZGLE9BQU87WUFBSztRQUNoQztRQUNBMkQsT0FBT2xDLFdBQVcsQ0FBQzNDLE9BQU84QztRQUMxQixPQUFPckUsU0FBU3VCO0lBQ3BCO0FBQ0osRUFDQSxrQ0FBa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9zZXJ2ZXIuanM/MjUwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU2VydmVyID0gdm9pZCAwO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcInV0aWxcIik7XG5jb25zdCBjb25uZWN0aW9uXzEgPSByZXF1aXJlKFwiLi4vY21hcC9jb25uZWN0aW9uXCIpO1xuY29uc3QgY29ubmVjdGlvbl9wb29sXzEgPSByZXF1aXJlKFwiLi4vY21hcC9jb25uZWN0aW9uX3Bvb2xcIik7XG5jb25zdCBlcnJvcnNfMSA9IHJlcXVpcmUoXCIuLi9jbWFwL2Vycm9yc1wiKTtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBtb25nb190eXBlc18xID0gcmVxdWlyZShcIi4uL21vbmdvX3R5cGVzXCIpO1xuY29uc3QgdHJhbnNhY3Rpb25zXzEgPSByZXF1aXJlKFwiLi4vdHJhbnNhY3Rpb25zXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IGNvbW1vbl8xID0gcmVxdWlyZShcIi4vY29tbW9uXCIpO1xuY29uc3QgbW9uaXRvcl8xID0gcmVxdWlyZShcIi4vbW9uaXRvclwiKTtcbmNvbnN0IHNlcnZlcl9kZXNjcmlwdGlvbl8xID0gcmVxdWlyZShcIi4vc2VydmVyX2Rlc2NyaXB0aW9uXCIpO1xuY29uc3Qgc3RhdGVUcmFuc2l0aW9uID0gKDAsIHV0aWxzXzEubWFrZVN0YXRlTWFjaGluZSkoe1xuICAgIFtjb21tb25fMS5TVEFURV9DTE9TRURdOiBbY29tbW9uXzEuU1RBVEVfQ0xPU0VELCBjb21tb25fMS5TVEFURV9DT05ORUNUSU5HXSxcbiAgICBbY29tbW9uXzEuU1RBVEVfQ09OTkVDVElOR106IFtjb21tb25fMS5TVEFURV9DT05ORUNUSU5HLCBjb21tb25fMS5TVEFURV9DTE9TSU5HLCBjb21tb25fMS5TVEFURV9DT05ORUNURUQsIGNvbW1vbl8xLlNUQVRFX0NMT1NFRF0sXG4gICAgW2NvbW1vbl8xLlNUQVRFX0NPTk5FQ1RFRF06IFtjb21tb25fMS5TVEFURV9DT05ORUNURUQsIGNvbW1vbl8xLlNUQVRFX0NMT1NJTkcsIGNvbW1vbl8xLlNUQVRFX0NMT1NFRF0sXG4gICAgW2NvbW1vbl8xLlNUQVRFX0NMT1NJTkddOiBbY29tbW9uXzEuU1RBVEVfQ0xPU0lORywgY29tbW9uXzEuU1RBVEVfQ0xPU0VEXVxufSk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrTW9uaXRvciA9IFN5bWJvbCgnbW9uaXRvcicpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgU2VydmVyIGV4dGVuZHMgbW9uZ29fdHlwZXNfMS5UeXBlZEV2ZW50RW1pdHRlciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgc2VydmVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodG9wb2xvZ3ksIGRlc2NyaXB0aW9uLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY29tbWFuZEFzeW5jID0gKDAsIHV0aWxfMS5wcm9taXNpZnkpKChucywgY21kLCBvcHRpb25zLCBcbiAgICAgICAgLy8gY2FsbGJhY2sgdHlwZSBkZWZpbmVzIERvY3VtZW50IHJlc3VsdCBiZWNhdXNlIHJlc3VsdCBpcyBuZXZlciBudWxsaXNoIHdoZW4gaXQgc3VjY2VlZHMsIG90aGVyd2lzZSBwcm9taXNlIHJlamVjdHNcbiAgICAgICAgY2FsbGJhY2spID0+IHRoaXMuY29tbWFuZChucywgY21kLCBvcHRpb25zLCBjYWxsYmFjaykpO1xuICAgICAgICB0aGlzLnNlcnZlckFwaSA9IG9wdGlvbnMuc2VydmVyQXBpO1xuICAgICAgICBjb25zdCBwb29sT3B0aW9ucyA9IHsgaG9zdEFkZHJlc3M6IGRlc2NyaXB0aW9uLmhvc3RBZGRyZXNzLCAuLi5vcHRpb25zIH07XG4gICAgICAgIHRoaXMudG9wb2xvZ3kgPSB0b3BvbG9neTtcbiAgICAgICAgdGhpcy5wb29sID0gbmV3IGNvbm5lY3Rpb25fcG9vbF8xLkNvbm5lY3Rpb25Qb29sKHRoaXMsIHBvb2xPcHRpb25zKTtcbiAgICAgICAgdGhpcy5zID0ge1xuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgc3RhdGU6IGNvbW1vbl8xLlNUQVRFX0NMT1NFRCxcbiAgICAgICAgICAgIG9wZXJhdGlvbkNvdW50OiAwXG4gICAgICAgIH07XG4gICAgICAgIGZvciAoY29uc3QgZXZlbnQgb2YgWy4uLmNvbnN0YW50c18xLkNNQVBfRVZFTlRTLCAuLi5jb25zdGFudHNfMS5BUE1fRVZFTlRTXSkge1xuICAgICAgICAgICAgdGhpcy5wb29sLm9uKGV2ZW50LCAoZSkgPT4gdGhpcy5lbWl0KGV2ZW50LCBlKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wb29sLm9uKGNvbm5lY3Rpb25fMS5Db25uZWN0aW9uLkNMVVNURVJfVElNRV9SRUNFSVZFRCwgKGNsdXN0ZXJUaW1lKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsdXN0ZXJUaW1lID0gY2x1c3RlclRpbWU7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgICAgIHRoaXNba01vbml0b3JdID0gbnVsbDtcbiAgICAgICAgICAgIC8vIG1vbml0b3JpbmcgaXMgZGlzYWJsZWQgaW4gbG9hZCBiYWxhbmNpbmcgbW9kZVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgbW9uaXRvclxuICAgICAgICAvLyBUT0RPKE5PREUtNDE0NCk6IFJlbW92ZSBuZXcgdmFyaWFibGUgZm9yIHR5cGUgbmFycm93aW5nXG4gICAgICAgIGNvbnN0IG1vbml0b3IgPSBuZXcgbW9uaXRvcl8xLk1vbml0b3IodGhpcywgdGhpcy5zLm9wdGlvbnMpO1xuICAgICAgICB0aGlzW2tNb25pdG9yXSA9IG1vbml0b3I7XG4gICAgICAgIGZvciAoY29uc3QgZXZlbnQgb2YgY29uc3RhbnRzXzEuSEVBUlRCRUFUX0VWRU5UUykge1xuICAgICAgICAgICAgbW9uaXRvci5vbihldmVudCwgKGUpID0+IHRoaXMuZW1pdChldmVudCwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIG1vbml0b3Iub24oJ3Jlc2V0U2VydmVyJywgKGVycm9yKSA9PiBtYXJrU2VydmVyVW5rbm93bih0aGlzLCBlcnJvcikpO1xuICAgICAgICBtb25pdG9yLm9uKFNlcnZlci5TRVJWRVJfSEVBUlRCRUFUX1NVQ0NFRURFRCwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoU2VydmVyLkRFU0NSSVBUSU9OX1JFQ0VJVkVELCBuZXcgc2VydmVyX2Rlc2NyaXB0aW9uXzEuU2VydmVyRGVzY3JpcHRpb24odGhpcy5kZXNjcmlwdGlvbi5ob3N0QWRkcmVzcywgZXZlbnQucmVwbHksIHtcbiAgICAgICAgICAgICAgICByb3VuZFRyaXBUaW1lOiBjYWxjdWxhdGVSb3VuZFRyaXBUaW1lKHRoaXMuZGVzY3JpcHRpb24ucm91bmRUcmlwVGltZSwgZXZlbnQuZHVyYXRpb24pXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zLnN0YXRlID09PSBjb21tb25fMS5TVEFURV9DT05ORUNUSU5HKSB7XG4gICAgICAgICAgICAgICAgc3RhdGVUcmFuc2l0aW9uKHRoaXMsIGNvbW1vbl8xLlNUQVRFX0NPTk5FQ1RFRCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KFNlcnZlci5DT05ORUNULCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBjbHVzdGVyVGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9wb2xvZ3kuY2x1c3RlclRpbWU7XG4gICAgfVxuICAgIHNldCBjbHVzdGVyVGltZShjbHVzdGVyVGltZSkge1xuICAgICAgICB0aGlzLnRvcG9sb2d5LmNsdXN0ZXJUaW1lID0gY2x1c3RlclRpbWU7XG4gICAgfVxuICAgIGdldCBkZXNjcmlwdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5kZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMuZGVzY3JpcHRpb24uYWRkcmVzcztcbiAgICB9XG4gICAgZ2V0IGF1dG9FbmNyeXB0ZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnMub3B0aW9ucyAmJiB0aGlzLnMub3B0aW9ucy5hdXRvRW5jcnlwdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zLm9wdGlvbnMuYXV0b0VuY3J5cHRlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGdldCBsb2FkQmFsYW5jZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvcG9sb2d5LmRlc2NyaXB0aW9uLnR5cGUgPT09IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5Mb2FkQmFsYW5jZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluaXRpYXRlIHNlcnZlciBjb25uZWN0XG4gICAgICovXG4gICAgY29ubmVjdCgpIHtcbiAgICAgICAgaWYgKHRoaXMucy5zdGF0ZSAhPT0gY29tbW9uXzEuU1RBVEVfQ0xPU0VEKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGVUcmFuc2l0aW9uKHRoaXMsIGNvbW1vbl8xLlNUQVRFX0NPTk5FQ1RJTkcpO1xuICAgICAgICAvLyBJZiBpbiBsb2FkIGJhbGFuY2VyIG1vZGUgd2UgYXV0b21hdGljYWxseSBzZXQgdGhlIHNlcnZlciB0b1xuICAgICAgICAvLyBhIGxvYWQgYmFsYW5jZXIuIEl0IG5ldmVyIHRyYW5zaXRpb25zIG91dCBvZiB0aGlzIHN0YXRlIGFuZFxuICAgICAgICAvLyBoYXMgbm8gbW9uaXRvci5cbiAgICAgICAgaWYgKCF0aGlzLmxvYWRCYWxhbmNlZCkge1xuICAgICAgICAgICAgdGhpc1trTW9uaXRvcl0/LmNvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXRlVHJhbnNpdGlvbih0aGlzLCBjb21tb25fMS5TVEFURV9DT05ORUNURUQpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KFNlcnZlci5DT05ORUNULCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogRGVzdHJveSB0aGUgc2VydmVyIGNvbm5lY3Rpb24gKi9cbiAgICBkZXN0cm95KG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHsgZm9yY2U6IGZhbHNlIH07XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHsgZm9yY2U6IGZhbHNlIH0sIG9wdGlvbnMpO1xuICAgICAgICBpZiAodGhpcy5zLnN0YXRlID09PSBjb21tb25fMS5TVEFURV9DTE9TRUQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlVHJhbnNpdGlvbih0aGlzLCBjb21tb25fMS5TVEFURV9DTE9TSU5HKTtcbiAgICAgICAgaWYgKCF0aGlzLmxvYWRCYWxhbmNlZCkge1xuICAgICAgICAgICAgdGhpc1trTW9uaXRvcl0/LmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wb29sLmNsb3NlKG9wdGlvbnMsIGVyciA9PiB7XG4gICAgICAgICAgICBzdGF0ZVRyYW5zaXRpb24odGhpcywgY29tbW9uXzEuU1RBVEVfQ0xPU0VEKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY2xvc2VkJyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEltbWVkaWF0ZWx5IHNjaGVkdWxlIG1vbml0b3Jpbmcgb2YgdGhpcyBzZXJ2ZXIuIElmIHRoZXJlIGFscmVhZHkgYW4gYXR0ZW1wdCBiZWluZyBtYWRlXG4gICAgICogdGhpcyB3aWxsIGJlIGEgbm8tb3AuXG4gICAgICovXG4gICAgcmVxdWVzdENoZWNrKCkge1xuICAgICAgICBpZiAoIXRoaXMubG9hZEJhbGFuY2VkKSB7XG4gICAgICAgICAgICB0aGlzW2tNb25pdG9yXT8ucmVxdWVzdENoZWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSBhIGNvbW1hbmRcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb21tYW5kKG5zLCBjbWQsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChjYWxsYmFjayA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdDYWxsYmFjayBtdXN0IGJlIHByb3ZpZGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5zLmRiID09IG51bGwgfHwgdHlwZW9mIG5zID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignTmFtZXNwYWNlIG11c3Qgbm90IGJlIGEgc3RyaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucy5zdGF0ZSA9PT0gY29tbW9uXzEuU1RBVEVfQ0xPU0lORyB8fCB0aGlzLnMuc3RhdGUgPT09IGNvbW1vbl8xLlNUQVRFX0NMT1NFRCkge1xuICAgICAgICAgICAgY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29TZXJ2ZXJDbG9zZWRFcnJvcigpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBDbG9uZSB0aGUgb3B0aW9uc1xuICAgICAgICBjb25zdCBmaW5hbE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zLCB7IHdpcmVQcm90b2NvbENvbW1hbmQ6IGZhbHNlIH0pO1xuICAgICAgICAvLyBUaGVyZSBhcmUgY2FzZXMgd2hlcmUgd2UgbmVlZCB0byBmbGFnIHRoZSByZWFkIHByZWZlcmVuY2Ugbm90IHRvIGdldCBzZW50IGluXG4gICAgICAgIC8vIHRoZSBjb21tYW5kLCBzdWNoIGFzIHByZS01LjAgc2VydmVycyBhdHRlbXB0aW5nIHRvIHBlcmZvcm0gYW4gYWdncmVnYXRlIHdyaXRlXG4gICAgICAgIC8vIHdpdGggYSBub24tcHJpbWFyeSByZWFkIHByZWZlcmVuY2UuIEluIHRoaXMgY2FzZSB0aGUgZWZmZWN0aXZlIHJlYWQgcHJlZmVyZW5jZVxuICAgICAgICAvLyAocHJpbWFyeSkgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSBwcm92aWRlZCBhbmQgbXVzdCBiZSByZW1vdmVkIGNvbXBsZXRlbHkuXG4gICAgICAgIGlmIChmaW5hbE9wdGlvbnMub21pdFJlYWRQcmVmZXJlbmNlKSB7XG4gICAgICAgICAgICBkZWxldGUgZmluYWxPcHRpb25zLnJlYWRQcmVmZXJlbmNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBmaW5hbE9wdGlvbnMuc2Vzc2lvbjtcbiAgICAgICAgY29uc3QgY29ubiA9IHNlc3Npb24/LnBpbm5lZENvbm5lY3Rpb247XG4gICAgICAgIC8vIE5PVEU6IFRoaXMgaXMgYSBoYWNrISBXZSBjYW4ndCByZXRyaWV2ZSB0aGUgY29ubmVjdGlvbnMgdXNlZCBmb3IgZXhlY3V0aW5nIGFuIG9wZXJhdGlvblxuICAgICAgICAvLyAgICAgICAoYW5kIHByZXZlbnQgdGhlbSBmcm9tIGJlaW5nIGNoZWNrZWQgYmFjayBpbikgYXQgdGhlIHBvaW50IG9mIG9wZXJhdGlvbiBleGVjdXRpb24uXG4gICAgICAgIC8vICAgICAgIFRoaXMgc2hvdWxkIGJlIGNvbnNpZGVyZWQgYXMgcGFydCBvZiB0aGUgd29yayBmb3IgTk9ERS0yODgyXG4gICAgICAgIC8vIE5PVEU6XG4gICAgICAgIC8vICAgICAgIFdoZW4gaW5jcmVtZW50aW5nIG9wZXJhdGlvbiBjb3VudCwgaXQncyBpbXBvcnRhbnQgdGhhdCB3ZSBpbmNyZW1lbnQgaXQgYmVmb3JlIHdlXG4gICAgICAgIC8vICAgICAgIGF0dGVtcHQgdG8gY2hlY2sgb3V0IGEgY29ubmVjdGlvbiBmcm9tIHRoZSBwb29sLiAgVGhpcyBlbnN1cmVzIHRoYXQgb3BlcmF0aW9ucyB0aGF0XG4gICAgICAgIC8vICAgICAgIGFyZSB3YWl0aW5nIGZvciBhIGNvbm5lY3Rpb24gYXJlIGluY2x1ZGVkIGluIHRoZSBvcGVyYXRpb24gY291bnQuICBMb2FkIGJhbGFuY2VkXG4gICAgICAgIC8vICAgICAgIG1vZGUgd2lsbCBvbmx5IGV2ZXIgaGF2ZSBhIHNpbmdsZSBzZXJ2ZXIsIHNvIHRoZSBvcGVyYXRpb24gY291bnQgZG9lc24ndCBtYXR0ZXIuXG4gICAgICAgIC8vICAgICAgIEluY3JlbWVudGluZyB0aGUgb3BlcmF0aW9uIGNvdW50IGFib3ZlIHRoZSBsb2dpYyB0byBoYW5kbGUgbG9hZCBiYWxhbmNlZCBtb2RlIHdvdWxkXG4gICAgICAgIC8vICAgICAgIHJlcXVpcmUgc3BlY2lhbCBsb2dpYyB0byBkZWNyZW1lbnQgaXQgYWdhaW4sIG9yIHdvdWxkIGRvdWJsZSBpbmNyZW1lbnQgKHRoZSBsb2FkXG4gICAgICAgIC8vICAgICAgIGJhbGFuY2VkIGNvZGUgbWFrZXMgYSByZWN1cnNpdmUgY2FsbCkuICBJbnN0ZWFkLCB3ZSBpbmNyZW1lbnQgdGhlIGNvdW50IGFmdGVyIHRoaXNcbiAgICAgICAgLy8gICAgICAgY2hlY2suXG4gICAgICAgIGlmICh0aGlzLmxvYWRCYWxhbmNlZCAmJiBzZXNzaW9uICYmIGNvbm4gPT0gbnVsbCAmJiBpc1Bpbm5hYmxlQ29tbWFuZChjbWQsIHNlc3Npb24pKSB7XG4gICAgICAgICAgICB0aGlzLnBvb2wuY2hlY2tPdXQoKGVyciwgY2hlY2tlZE91dCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIgfHwgY2hlY2tlZE91dCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlc3Npb24ucGluKGNoZWNrZWRPdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZChucywgY21kLCBmaW5hbE9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5jcmVtZW50T3BlcmF0aW9uQ291bnQoKTtcbiAgICAgICAgdGhpcy5wb29sLndpdGhDb25uZWN0aW9uKGNvbm4sIChlcnIsIGNvbm4sIGNiKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyIHx8ICFjb25uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWNyZW1lbnRPcGVyYXRpb25Db3VudCgpO1xuICAgICAgICAgICAgICAgIGlmICghZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYihuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBjb25uZWN0aW9uIHdpdGhvdXQgZXJyb3InKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghKGVyciBpbnN0YW5jZW9mIGVycm9yc18xLlBvb2xDbGVhcmVkRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNiKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25uLmNvbW1hbmQobnMsIGNtZCwgZmluYWxPcHRpb25zLCBtYWtlT3BlcmF0aW9uSGFuZGxlcih0aGlzLCBjb25uLCBjbWQsIGZpbmFsT3B0aW9ucywgKGVycm9yLCByZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVjcmVtZW50T3BlcmF0aW9uQ291bnQoKTtcbiAgICAgICAgICAgICAgICBjYihlcnJvciwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9LCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBTREFNIGVycm9yXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgaGFuZGxlRXJyb3IoZXJyb3IsIGNvbm5lY3Rpb24pIHtcbiAgICAgICAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNTdGFsZUVycm9yID0gZXJyb3IuY29ubmVjdGlvbkdlbmVyYXRpb24gJiYgZXJyb3IuY29ubmVjdGlvbkdlbmVyYXRpb24gPCB0aGlzLnBvb2wuZ2VuZXJhdGlvbjtcbiAgICAgICAgaWYgKGlzU3RhbGVFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzTmV0d29ya05vblRpbWVvdXRFcnJvciA9IGVycm9yIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb05ldHdvcmtFcnJvciAmJiAhKGVycm9yIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb05ldHdvcmtUaW1lb3V0RXJyb3IpO1xuICAgICAgICBjb25zdCBpc05ldHdvcmtUaW1lb3V0QmVmb3JlSGFuZHNoYWtlRXJyb3IgPSAoMCwgZXJyb3JfMS5pc05ldHdvcmtFcnJvckJlZm9yZUhhbmRzaGFrZSkoZXJyb3IpO1xuICAgICAgICBjb25zdCBpc0F1dGhIYW5kc2hha2VFcnJvciA9IGVycm9yLmhhc0Vycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuSGFuZHNoYWtlRXJyb3IpO1xuICAgICAgICBpZiAoaXNOZXR3b3JrTm9uVGltZW91dEVycm9yIHx8IGlzTmV0d29ya1RpbWVvdXRCZWZvcmVIYW5kc2hha2VFcnJvciB8fCBpc0F1dGhIYW5kc2hha2VFcnJvcikge1xuICAgICAgICAgICAgLy8gSW4gbG9hZCBiYWxhbmNlZCBtb2RlIHdlIG5ldmVyIG1hcmsgdGhlIHNlcnZlciBhcyB1bmtub3duIGFuZCBhbHdheXNcbiAgICAgICAgICAgIC8vIGNsZWFyIGZvciB0aGUgc3BlY2lmaWMgc2VydmljZSBpZC5cbiAgICAgICAgICAgIGlmICghdGhpcy5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgICAgICAgICBlcnJvci5hZGRFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlJlc2V0UG9vbCk7XG4gICAgICAgICAgICAgICAgbWFya1NlcnZlclVua25vd24odGhpcywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMucG9vbC5jbGVhcih7IHNlcnZpY2VJZDogY29ubmVjdGlvbi5zZXJ2aWNlSWQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoKDAsIGVycm9yXzEuaXNTREFNVW5yZWNvdmVyYWJsZUVycm9yKShlcnJvcikpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkSGFuZGxlU3RhdGVDaGFuZ2VFcnJvcih0aGlzLCBlcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hvdWxkQ2xlYXJQb29sID0gKDAsIHV0aWxzXzEubWF4V2lyZVZlcnNpb24pKHRoaXMpIDw9IDcgfHwgKDAsIGVycm9yXzEuaXNOb2RlU2h1dHRpbmdEb3duRXJyb3IpKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZEJhbGFuY2VkICYmIGNvbm5lY3Rpb24gJiYgc2hvdWxkQ2xlYXJQb29sKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvb2wuY2xlYXIoeyBzZXJ2aWNlSWQ6IGNvbm5lY3Rpb24uc2VydmljZUlkIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRDbGVhclBvb2wpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlJlc2V0UG9vbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrU2VydmVyVW5rbm93bih0aGlzLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHRoaXMucmVxdWVzdENoZWNrKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlY3JlbWVudCB0aGUgb3BlcmF0aW9uIGNvdW50LCByZXR1cm5pbmcgdGhlIG5ldyBjb3VudC5cbiAgICAgKi9cbiAgICBkZWNyZW1lbnRPcGVyYXRpb25Db3VudCgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnMub3BlcmF0aW9uQ291bnQgLT0gMSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudCB0aGUgb3BlcmF0aW9uIGNvdW50LCByZXR1cm5pbmcgdGhlIG5ldyBjb3VudC5cbiAgICAgKi9cbiAgICBpbmNyZW1lbnRPcGVyYXRpb25Db3VudCgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnMub3BlcmF0aW9uQ291bnQgKz0gMSk7XG4gICAgfVxufVxuLyoqIEBldmVudCAqL1xuU2VydmVyLlNFUlZFUl9IRUFSVEJFQVRfU1RBUlRFRCA9IGNvbnN0YW50c18xLlNFUlZFUl9IRUFSVEJFQVRfU1RBUlRFRDtcbi8qKiBAZXZlbnQgKi9cblNlcnZlci5TRVJWRVJfSEVBUlRCRUFUX1NVQ0NFRURFRCA9IGNvbnN0YW50c18xLlNFUlZFUl9IRUFSVEJFQVRfU1VDQ0VFREVEO1xuLyoqIEBldmVudCAqL1xuU2VydmVyLlNFUlZFUl9IRUFSVEJFQVRfRkFJTEVEID0gY29uc3RhbnRzXzEuU0VSVkVSX0hFQVJUQkVBVF9GQUlMRUQ7XG4vKiogQGV2ZW50ICovXG5TZXJ2ZXIuQ09OTkVDVCA9IGNvbnN0YW50c18xLkNPTk5FQ1Q7XG4vKiogQGV2ZW50ICovXG5TZXJ2ZXIuREVTQ1JJUFRJT05fUkVDRUlWRUQgPSBjb25zdGFudHNfMS5ERVNDUklQVElPTl9SRUNFSVZFRDtcbi8qKiBAZXZlbnQgKi9cblNlcnZlci5DTE9TRUQgPSBjb25zdGFudHNfMS5DTE9TRUQ7XG4vKiogQGV2ZW50ICovXG5TZXJ2ZXIuRU5ERUQgPSBjb25zdGFudHNfMS5FTkRFRDtcbmV4cG9ydHMuU2VydmVyID0gU2VydmVyO1xuZnVuY3Rpb24gY2FsY3VsYXRlUm91bmRUcmlwVGltZShvbGRSdHQsIGR1cmF0aW9uKSB7XG4gICAgaWYgKG9sZFJ0dCA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGR1cmF0aW9uO1xuICAgIH1cbiAgICBjb25zdCBhbHBoYSA9IDAuMjtcbiAgICByZXR1cm4gYWxwaGEgKiBkdXJhdGlvbiArICgxIC0gYWxwaGEpICogb2xkUnR0O1xufVxuZnVuY3Rpb24gbWFya1NlcnZlclVua25vd24oc2VydmVyLCBlcnJvcikge1xuICAgIC8vIExvYWQgYmFsYW5jZXIgc2VydmVycyBjYW4gbmV2ZXIgYmUgbWFya2VkIHVua25vd24uXG4gICAgaWYgKHNlcnZlci5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvTmV0d29ya0Vycm9yICYmICEoZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvTmV0d29ya1RpbWVvdXRFcnJvcikpIHtcbiAgICAgICAgc2VydmVyW2tNb25pdG9yXT8ucmVzZXQoKTtcbiAgICB9XG4gICAgc2VydmVyLmVtaXQoU2VydmVyLkRFU0NSSVBUSU9OX1JFQ0VJVkVELCBuZXcgc2VydmVyX2Rlc2NyaXB0aW9uXzEuU2VydmVyRGVzY3JpcHRpb24oc2VydmVyLmRlc2NyaXB0aW9uLmhvc3RBZGRyZXNzLCB1bmRlZmluZWQsIHsgZXJyb3IgfSkpO1xufVxuZnVuY3Rpb24gaXNQaW5uYWJsZUNvbW1hbmQoY21kLCBzZXNzaW9uKSB7XG4gICAgaWYgKHNlc3Npb24pIHtcbiAgICAgICAgcmV0dXJuIChzZXNzaW9uLmluVHJhbnNhY3Rpb24oKSB8fFxuICAgICAgICAgICAgJ2FnZ3JlZ2F0ZScgaW4gY21kIHx8XG4gICAgICAgICAgICAnZmluZCcgaW4gY21kIHx8XG4gICAgICAgICAgICAnZ2V0TW9yZScgaW4gY21kIHx8XG4gICAgICAgICAgICAnbGlzdENvbGxlY3Rpb25zJyBpbiBjbWQgfHxcbiAgICAgICAgICAgICdsaXN0SW5kZXhlcycgaW4gY21kKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gY29ubmVjdGlvbklzU3RhbGUocG9vbCwgY29ubmVjdGlvbikge1xuICAgIGlmIChjb25uZWN0aW9uLnNlcnZpY2VJZCkge1xuICAgICAgICByZXR1cm4gKGNvbm5lY3Rpb24uZ2VuZXJhdGlvbiAhPT0gcG9vbC5zZXJ2aWNlR2VuZXJhdGlvbnMuZ2V0KGNvbm5lY3Rpb24uc2VydmljZUlkLnRvSGV4U3RyaW5nKCkpKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbm5lY3Rpb24uZ2VuZXJhdGlvbiAhPT0gcG9vbC5nZW5lcmF0aW9uO1xufVxuZnVuY3Rpb24gc2hvdWxkSGFuZGxlU3RhdGVDaGFuZ2VFcnJvcihzZXJ2ZXIsIGVycikge1xuICAgIGNvbnN0IGV0diA9IGVyci50b3BvbG9neVZlcnNpb247XG4gICAgY29uc3Qgc3R2ID0gc2VydmVyLmRlc2NyaXB0aW9uLnRvcG9sb2d5VmVyc2lvbjtcbiAgICByZXR1cm4gKDAsIHNlcnZlcl9kZXNjcmlwdGlvbl8xLmNvbXBhcmVUb3BvbG9neVZlcnNpb24pKHN0diwgZXR2KSA8IDA7XG59XG5mdW5jdGlvbiBpbkFjdGl2ZVRyYW5zYWN0aW9uKHNlc3Npb24sIGNtZCkge1xuICAgIHJldHVybiBzZXNzaW9uICYmIHNlc3Npb24uaW5UcmFuc2FjdGlvbigpICYmICEoMCwgdHJhbnNhY3Rpb25zXzEuaXNUcmFuc2FjdGlvbkNvbW1hbmQpKGNtZCk7XG59XG4vKiogdGhpcyBjaGVja3MgdGhlIHJldHJ5V3JpdGVzIG9wdGlvbiBwYXNzZWQgZG93biBmcm9tIHRoZSBjbGllbnQgb3B0aW9ucywgaXRcbiAqIGRvZXMgbm90IGNoZWNrIGlmIHRoZSBzZXJ2ZXIgc3VwcG9ydHMgcmV0cnlhYmxlIHdyaXRlcyAqL1xuZnVuY3Rpb24gaXNSZXRyeWFibGVXcml0ZXNFbmFibGVkKHRvcG9sb2d5KSB7XG4gICAgcmV0dXJuIHRvcG9sb2d5LnMub3B0aW9ucy5yZXRyeVdyaXRlcyAhPT0gZmFsc2U7XG59XG5mdW5jdGlvbiBtYWtlT3BlcmF0aW9uSGFuZGxlcihzZXJ2ZXIsIGNvbm5lY3Rpb24sIGNtZCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBjb25zdCBzZXNzaW9uID0gb3B0aW9ucz8uc2Vzc2lvbjtcbiAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlT3BlcmF0aW9uUmVzdWx0KGVycm9yLCByZXN1bHQpIHtcbiAgICAgICAgLy8gV2Ugc2hvdWxkIG5vdCBzd2FsbG93IGFuIGVycm9yIGlmIGl0IGlzIHByZXNlbnQuXG4gICAgICAgIGlmIChlcnJvciA9PSBudWxsICYmIHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodW5kZWZpbmVkLCByZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zICE9IG51bGwgJiYgJ25vUmVzcG9uc2UnIGluIG9wdGlvbnMgJiYgb3B0aW9ucy5ub1Jlc3BvbnNlID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodW5kZWZpbmVkLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29VbmV4cGVjdGVkU2VydmVyUmVzcG9uc2VFcnJvcignRW1wdHkgcmVzcG9uc2Ugd2l0aCBubyBlcnJvcicpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShlcnJvciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29FcnJvcikpIHtcbiAgICAgICAgICAgIC8vIE5vZGUuanMgb3Igc29tZSBvdGhlciBlcnJvciB3ZSBoYXZlIG5vdCBzcGVjaWFsIGhhbmRsaW5nIGZvclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29ubmVjdGlvbklzU3RhbGUoc2VydmVyLnBvb2wsIGNvbm5lY3Rpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29OZXR3b3JrRXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChzZXNzaW9uICYmICFzZXNzaW9uLmhhc0VuZGVkICYmIHNlc3Npb24uc2VydmVyU2Vzc2lvbikge1xuICAgICAgICAgICAgICAgIHNlc3Npb24uc2VydmVyU2Vzc2lvbi5pc0RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGluQWN0aXZlVHJhbnNhY3Rpb24gY2hlY2sgaGFuZGxlcyBjb21taXQgYW5kIGFib3J0LlxuICAgICAgICAgICAgaWYgKGluQWN0aXZlVHJhbnNhY3Rpb24oc2Vzc2lvbiwgY21kKSAmJlxuICAgICAgICAgICAgICAgICFlcnJvci5oYXNFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlRyYW5zaWVudFRyYW5zYWN0aW9uRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgZXJyb3IuYWRkRXJyb3JMYWJlbChlcnJvcl8xLk1vbmdvRXJyb3JMYWJlbC5UcmFuc2llbnRUcmFuc2FjdGlvbkVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoaXNSZXRyeWFibGVXcml0ZXNFbmFibGVkKHNlcnZlci50b3BvbG9neSkgfHwgKDAsIHRyYW5zYWN0aW9uc18xLmlzVHJhbnNhY3Rpb25Db21tYW5kKShjbWQpKSAmJlxuICAgICAgICAgICAgICAgICgwLCB1dGlsc18xLnN1cHBvcnRzUmV0cnlhYmxlV3JpdGVzKShzZXJ2ZXIpICYmXG4gICAgICAgICAgICAgICAgIWluQWN0aXZlVHJhbnNhY3Rpb24oc2Vzc2lvbiwgY21kKSkge1xuICAgICAgICAgICAgICAgIGVycm9yLmFkZEVycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuUmV0cnlhYmxlV3JpdGVFcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoKGlzUmV0cnlhYmxlV3JpdGVzRW5hYmxlZChzZXJ2ZXIudG9wb2xvZ3kpIHx8ICgwLCB0cmFuc2FjdGlvbnNfMS5pc1RyYW5zYWN0aW9uQ29tbWFuZCkoY21kKSkgJiZcbiAgICAgICAgICAgICAgICAoMCwgZXJyb3JfMS5uZWVkc1JldHJ5YWJsZVdyaXRlTGFiZWwpKGVycm9yLCAoMCwgdXRpbHNfMS5tYXhXaXJlVmVyc2lvbikoc2VydmVyKSkgJiZcbiAgICAgICAgICAgICAgICAhaW5BY3RpdmVUcmFuc2FjdGlvbihzZXNzaW9uLCBjbWQpKSB7XG4gICAgICAgICAgICAgICAgZXJyb3IuYWRkRXJyb3JMYWJlbChlcnJvcl8xLk1vbmdvRXJyb3JMYWJlbC5SZXRyeWFibGVXcml0ZUVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2Vzc2lvbiAmJlxuICAgICAgICAgICAgc2Vzc2lvbi5pc1Bpbm5lZCAmJlxuICAgICAgICAgICAgZXJyb3IuaGFzRXJyb3JMYWJlbChlcnJvcl8xLk1vbmdvRXJyb3JMYWJlbC5UcmFuc2llbnRUcmFuc2FjdGlvbkVycm9yKSkge1xuICAgICAgICAgICAgc2Vzc2lvbi51bnBpbih7IGZvcmNlOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIHNlcnZlci5oYW5kbGVFcnJvcihlcnJvciwgY29ubmVjdGlvbik7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhlcnJvcik7XG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlcnZlci5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJTZXJ2ZXIiLCJ1dGlsXzEiLCJyZXF1aXJlIiwiY29ubmVjdGlvbl8xIiwiY29ubmVjdGlvbl9wb29sXzEiLCJlcnJvcnNfMSIsImNvbnN0YW50c18xIiwiZXJyb3JfMSIsIm1vbmdvX3R5cGVzXzEiLCJ0cmFuc2FjdGlvbnNfMSIsInV0aWxzXzEiLCJjb21tb25fMSIsIm1vbml0b3JfMSIsInNlcnZlcl9kZXNjcmlwdGlvbl8xIiwic3RhdGVUcmFuc2l0aW9uIiwibWFrZVN0YXRlTWFjaGluZSIsIlNUQVRFX0NMT1NFRCIsIlNUQVRFX0NPTk5FQ1RJTkciLCJTVEFURV9DTE9TSU5HIiwiU1RBVEVfQ09OTkVDVEVEIiwia01vbml0b3IiLCJTeW1ib2wiLCJUeXBlZEV2ZW50RW1pdHRlciIsImNvbnN0cnVjdG9yIiwidG9wb2xvZ3kiLCJkZXNjcmlwdGlvbiIsIm9wdGlvbnMiLCJjb21tYW5kQXN5bmMiLCJwcm9taXNpZnkiLCJucyIsImNtZCIsImNhbGxiYWNrIiwiY29tbWFuZCIsInNlcnZlckFwaSIsInBvb2xPcHRpb25zIiwiaG9zdEFkZHJlc3MiLCJwb29sIiwiQ29ubmVjdGlvblBvb2wiLCJzIiwic3RhdGUiLCJvcGVyYXRpb25Db3VudCIsImV2ZW50IiwiQ01BUF9FVkVOVFMiLCJBUE1fRVZFTlRTIiwib24iLCJlIiwiZW1pdCIsIkNvbm5lY3Rpb24iLCJDTFVTVEVSX1RJTUVfUkVDRUlWRUQiLCJjbHVzdGVyVGltZSIsImxvYWRCYWxhbmNlZCIsIm1vbml0b3IiLCJNb25pdG9yIiwiSEVBUlRCRUFUX0VWRU5UUyIsImVycm9yIiwibWFya1NlcnZlclVua25vd24iLCJTRVJWRVJfSEVBUlRCRUFUX1NVQ0NFRURFRCIsIkRFU0NSSVBUSU9OX1JFQ0VJVkVEIiwiU2VydmVyRGVzY3JpcHRpb24iLCJyZXBseSIsInJvdW5kVHJpcFRpbWUiLCJjYWxjdWxhdGVSb3VuZFRyaXBUaW1lIiwiZHVyYXRpb24iLCJDT05ORUNUIiwibmFtZSIsImFkZHJlc3MiLCJhdXRvRW5jcnlwdGVyIiwidHlwZSIsIlRvcG9sb2d5VHlwZSIsIkxvYWRCYWxhbmNlZCIsImNvbm5lY3QiLCJkZXN0cm95IiwiZm9yY2UiLCJhc3NpZ24iLCJjbG9zZSIsImVyciIsInJlcXVlc3RDaGVjayIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJkYiIsIk1vbmdvU2VydmVyQ2xvc2VkRXJyb3IiLCJmaW5hbE9wdGlvbnMiLCJ3aXJlUHJvdG9jb2xDb21tYW5kIiwib21pdFJlYWRQcmVmZXJlbmNlIiwicmVhZFByZWZlcmVuY2UiLCJzZXNzaW9uIiwiY29ubiIsInBpbm5lZENvbm5lY3Rpb24iLCJpc1Bpbm5hYmxlQ29tbWFuZCIsImNoZWNrT3V0IiwiY2hlY2tlZE91dCIsInBpbiIsImluY3JlbWVudE9wZXJhdGlvbkNvdW50Iiwid2l0aENvbm5lY3Rpb24iLCJjYiIsImRlY3JlbWVudE9wZXJhdGlvbkNvdW50IiwiTW9uZ29SdW50aW1lRXJyb3IiLCJQb29sQ2xlYXJlZEVycm9yIiwiaGFuZGxlRXJyb3IiLCJtYWtlT3BlcmF0aW9uSGFuZGxlciIsInJlc3BvbnNlIiwiY29ubmVjdGlvbiIsIk1vbmdvRXJyb3IiLCJpc1N0YWxlRXJyb3IiLCJjb25uZWN0aW9uR2VuZXJhdGlvbiIsImdlbmVyYXRpb24iLCJpc05ldHdvcmtOb25UaW1lb3V0RXJyb3IiLCJNb25nb05ldHdvcmtFcnJvciIsIk1vbmdvTmV0d29ya1RpbWVvdXRFcnJvciIsImlzTmV0d29ya1RpbWVvdXRCZWZvcmVIYW5kc2hha2VFcnJvciIsImlzTmV0d29ya0Vycm9yQmVmb3JlSGFuZHNoYWtlIiwiaXNBdXRoSGFuZHNoYWtlRXJyb3IiLCJoYXNFcnJvckxhYmVsIiwiTW9uZ29FcnJvckxhYmVsIiwiSGFuZHNoYWtlRXJyb3IiLCJhZGRFcnJvckxhYmVsIiwiUmVzZXRQb29sIiwiY2xlYXIiLCJzZXJ2aWNlSWQiLCJpc1NEQU1VbnJlY292ZXJhYmxlRXJyb3IiLCJzaG91bGRIYW5kbGVTdGF0ZUNoYW5nZUVycm9yIiwic2hvdWxkQ2xlYXJQb29sIiwibWF4V2lyZVZlcnNpb24iLCJpc05vZGVTaHV0dGluZ0Rvd25FcnJvciIsInByb2Nlc3MiLCJuZXh0VGljayIsIlNFUlZFUl9IRUFSVEJFQVRfU1RBUlRFRCIsIlNFUlZFUl9IRUFSVEJFQVRfRkFJTEVEIiwiQ0xPU0VEIiwiRU5ERUQiLCJvbGRSdHQiLCJhbHBoYSIsInNlcnZlciIsInJlc2V0IiwidW5kZWZpbmVkIiwiaW5UcmFuc2FjdGlvbiIsImNvbm5lY3Rpb25Jc1N0YWxlIiwic2VydmljZUdlbmVyYXRpb25zIiwiZ2V0IiwidG9IZXhTdHJpbmciLCJldHYiLCJ0b3BvbG9neVZlcnNpb24iLCJzdHYiLCJjb21wYXJlVG9wb2xvZ3lWZXJzaW9uIiwiaW5BY3RpdmVUcmFuc2FjdGlvbiIsImlzVHJhbnNhY3Rpb25Db21tYW5kIiwiaXNSZXRyeWFibGVXcml0ZXNFbmFibGVkIiwicmV0cnlXcml0ZXMiLCJoYW5kbGVPcGVyYXRpb25SZXN1bHQiLCJyZXN1bHQiLCJub1Jlc3BvbnNlIiwiTW9uZ29VbmV4cGVjdGVkU2VydmVyUmVzcG9uc2VFcnJvciIsImhhc0VuZGVkIiwic2VydmVyU2Vzc2lvbiIsImlzRGlydHkiLCJUcmFuc2llbnRUcmFuc2FjdGlvbkVycm9yIiwic3VwcG9ydHNSZXRyeWFibGVXcml0ZXMiLCJSZXRyeWFibGVXcml0ZUVycm9yIiwibmVlZHNSZXRyeWFibGVXcml0ZUxhYmVsIiwiaXNQaW5uZWQiLCJ1bnBpbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/server.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/server_description.js":
/*!*************************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/server_description.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.compareTopologyVersion = exports.parseServerType = exports.ServerDescription = void 0;\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst WRITABLE_SERVER_TYPES = new Set([\n    common_1.ServerType.RSPrimary,\n    common_1.ServerType.Standalone,\n    common_1.ServerType.Mongos,\n    common_1.ServerType.LoadBalancer\n]);\nconst DATA_BEARING_SERVER_TYPES = new Set([\n    common_1.ServerType.RSPrimary,\n    common_1.ServerType.RSSecondary,\n    common_1.ServerType.Mongos,\n    common_1.ServerType.Standalone,\n    common_1.ServerType.LoadBalancer\n]);\n/**\n * The client's view of a single server, based on the most recent hello outcome.\n *\n * Internal type, not meant to be directly instantiated\n * @public\n */ class ServerDescription {\n    /**\n     * Create a ServerDescription\n     * @internal\n     *\n     * @param address - The address of the server\n     * @param hello - An optional hello response for this server\n     */ constructor(address, hello, options = {}){\n        if (address == null || address === \"\") {\n            throw new error_1.MongoRuntimeError(\"ServerDescription must be provided with a non-empty address\");\n        }\n        this.address = typeof address === \"string\" ? utils_1.HostAddress.fromString(address).toString() // Use HostAddress to normalize\n         : address.toString();\n        this.type = parseServerType(hello, options);\n        this.hosts = hello?.hosts?.map((host)=>host.toLowerCase()) ?? [];\n        this.passives = hello?.passives?.map((host)=>host.toLowerCase()) ?? [];\n        this.arbiters = hello?.arbiters?.map((host)=>host.toLowerCase()) ?? [];\n        this.tags = hello?.tags ?? {};\n        this.minWireVersion = hello?.minWireVersion ?? 0;\n        this.maxWireVersion = hello?.maxWireVersion ?? 0;\n        this.roundTripTime = options?.roundTripTime ?? -1;\n        this.lastUpdateTime = (0, utils_1.now)();\n        this.lastWriteDate = hello?.lastWrite?.lastWriteDate ?? 0;\n        this.error = options.error ?? null;\n        // TODO(NODE-2674): Preserve int64 sent from MongoDB\n        this.topologyVersion = this.error?.topologyVersion ?? hello?.topologyVersion ?? null;\n        this.setName = hello?.setName ?? null;\n        this.setVersion = hello?.setVersion ?? null;\n        this.electionId = hello?.electionId ?? null;\n        this.logicalSessionTimeoutMinutes = hello?.logicalSessionTimeoutMinutes ?? null;\n        this.primary = hello?.primary ?? null;\n        this.me = hello?.me?.toLowerCase() ?? null;\n        this.$clusterTime = hello?.$clusterTime ?? null;\n    }\n    get hostAddress() {\n        return utils_1.HostAddress.fromString(this.address);\n    }\n    get allHosts() {\n        return this.hosts.concat(this.arbiters).concat(this.passives);\n    }\n    /** Is this server available for reads*/ get isReadable() {\n        return this.type === common_1.ServerType.RSSecondary || this.isWritable;\n    }\n    /** Is this server data bearing */ get isDataBearing() {\n        return DATA_BEARING_SERVER_TYPES.has(this.type);\n    }\n    /** Is this server available for writes */ get isWritable() {\n        return WRITABLE_SERVER_TYPES.has(this.type);\n    }\n    get host() {\n        const chopLength = `:${this.port}`.length;\n        return this.address.slice(0, -chopLength);\n    }\n    get port() {\n        const port = this.address.split(\":\").pop();\n        return port ? Number.parseInt(port, 10) : 27017;\n    }\n    /**\n     * Determines if another `ServerDescription` is equal to this one per the rules defined\n     * in the {@link https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#serverdescription|SDAM spec}\n     */ equals(other) {\n        // Despite using the comparator that would determine a nullish topologyVersion as greater than\n        // for equality we should only always perform direct equality comparison\n        const topologyVersionsEqual = this.topologyVersion === other?.topologyVersion || compareTopologyVersion(this.topologyVersion, other?.topologyVersion) === 0;\n        const electionIdsEqual = this.electionId != null && other?.electionId != null ? (0, utils_1.compareObjectId)(this.electionId, other.electionId) === 0 : this.electionId === other?.electionId;\n        return other != null && (0, utils_1.errorStrictEqual)(this.error, other.error) && this.type === other.type && this.minWireVersion === other.minWireVersion && (0, utils_1.arrayStrictEqual)(this.hosts, other.hosts) && tagsStrictEqual(this.tags, other.tags) && this.setName === other.setName && this.setVersion === other.setVersion && electionIdsEqual && this.primary === other.primary && this.logicalSessionTimeoutMinutes === other.logicalSessionTimeoutMinutes && topologyVersionsEqual;\n    }\n}\nexports.ServerDescription = ServerDescription;\n// Parses a `hello` message and determines the server type\nfunction parseServerType(hello, options) {\n    if (options?.loadBalanced) {\n        return common_1.ServerType.LoadBalancer;\n    }\n    if (!hello || !hello.ok) {\n        return common_1.ServerType.Unknown;\n    }\n    if (hello.isreplicaset) {\n        return common_1.ServerType.RSGhost;\n    }\n    if (hello.msg && hello.msg === \"isdbgrid\") {\n        return common_1.ServerType.Mongos;\n    }\n    if (hello.setName) {\n        if (hello.hidden) {\n            return common_1.ServerType.RSOther;\n        } else if (hello.isWritablePrimary) {\n            return common_1.ServerType.RSPrimary;\n        } else if (hello.secondary) {\n            return common_1.ServerType.RSSecondary;\n        } else if (hello.arbiterOnly) {\n            return common_1.ServerType.RSArbiter;\n        } else {\n            return common_1.ServerType.RSOther;\n        }\n    }\n    return common_1.ServerType.Standalone;\n}\nexports.parseServerType = parseServerType;\nfunction tagsStrictEqual(tags, tags2) {\n    const tagsKeys = Object.keys(tags);\n    const tags2Keys = Object.keys(tags2);\n    return tagsKeys.length === tags2Keys.length && tagsKeys.every((key)=>tags2[key] === tags[key]);\n}\n/**\n * Compares two topology versions.\n *\n * 1. If the response topologyVersion is unset or the ServerDescription's\n *    topologyVersion is null, the client MUST assume the response is more recent.\n * 1. If the response's topologyVersion.processId is not equal to the\n *    ServerDescription's, the client MUST assume the response is more recent.\n * 1. If the response's topologyVersion.processId is equal to the\n *    ServerDescription's, the client MUST use the counter field to determine\n *    which topologyVersion is more recent.\n *\n * ```ts\n * currentTv <   newTv === -1\n * currentTv === newTv === 0\n * currentTv >   newTv === 1\n * ```\n */ function compareTopologyVersion(currentTv, newTv) {\n    if (currentTv == null || newTv == null) {\n        return -1;\n    }\n    if (!currentTv.processId.equals(newTv.processId)) {\n        return -1;\n    }\n    // TODO(NODE-2674): Preserve int64 sent from MongoDB\n    const currentCounter = bson_1.Long.isLong(currentTv.counter) ? currentTv.counter : bson_1.Long.fromNumber(currentTv.counter);\n    const newCounter = bson_1.Long.isLong(newTv.counter) ? newTv.counter : bson_1.Long.fromNumber(newTv.counter);\n    return currentCounter.compare(newCounter);\n}\nexports.compareTopologyVersion = compareTopologyVersion; //# sourceMappingURL=server_description.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9zZXJ2ZXJfZGVzY3JpcHRpb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDhCQUE4QixHQUFHQSx1QkFBdUIsR0FBR0EseUJBQXlCLEdBQUcsS0FBSztBQUM1RixNQUFNSyxTQUFTQyxtQkFBT0EsQ0FBQyx5REFBUztBQUNoQyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRyxXQUFXSCxtQkFBT0EsQ0FBQyxpRUFBVTtBQUNuQyxNQUFNSSx3QkFBd0IsSUFBSUMsSUFBSTtJQUNsQ0YsU0FBU0csVUFBVSxDQUFDQyxTQUFTO0lBQzdCSixTQUFTRyxVQUFVLENBQUNFLFVBQVU7SUFDOUJMLFNBQVNHLFVBQVUsQ0FBQ0csTUFBTTtJQUMxQk4sU0FBU0csVUFBVSxDQUFDSSxZQUFZO0NBQ25DO0FBQ0QsTUFBTUMsNEJBQTRCLElBQUlOLElBQUk7SUFDdENGLFNBQVNHLFVBQVUsQ0FBQ0MsU0FBUztJQUM3QkosU0FBU0csVUFBVSxDQUFDTSxXQUFXO0lBQy9CVCxTQUFTRyxVQUFVLENBQUNHLE1BQU07SUFDMUJOLFNBQVNHLFVBQVUsQ0FBQ0UsVUFBVTtJQUM5QkwsU0FBU0csVUFBVSxDQUFDSSxZQUFZO0NBQ25DO0FBQ0Q7Ozs7O0NBS0MsR0FDRCxNQUFNWjtJQUNGOzs7Ozs7S0FNQyxHQUNEZSxZQUFZQyxPQUFPLEVBQUVDLEtBQUssRUFBRUMsVUFBVSxDQUFDLENBQUMsQ0FBRTtRQUN0QyxJQUFJRixXQUFXLFFBQVFBLFlBQVksSUFBSTtZQUNuQyxNQUFNLElBQUliLFFBQVFnQixpQkFBaUIsQ0FBQztRQUN4QztRQUNBLElBQUksQ0FBQ0gsT0FBTyxHQUNSLE9BQU9BLFlBQVksV0FDYlosUUFBUWdCLFdBQVcsQ0FBQ0MsVUFBVSxD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Q0FBQyxDQUFDQyxNQUFRTCxLQUFLLENBQUNLLElBQUksS0FBS3pELElBQUksQ0FBQ3lELElBQUk7QUFDeEQ7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztDQWdCQyxHQUNELFNBQVN6Rix1QkFBdUIwRixTQUFTLEVBQUVDLEtBQUs7SUFDNUMsSUFBSUQsYUFBYSxRQUFRQyxTQUFTLE1BQU07UUFDcEMsT0FBTyxDQUFDO0lBQ1o7SUFDQSxJQUFJLENBQUNELFVBQVVFLFNBQVMsQ0FBQzVCLE1BQU0sQ0FBQzJCLE1BQU1DLFNBQVMsR0FBRztRQUM5QyxPQUFPLENBQUM7SUFDWjtJQUNBLG9EQUFvRDtJQUNwRCxNQUFNQyxpQkFBaUIxRixPQUFPMkYsSUFBSSxDQUFDQyxNQUFNLENBQUNMLFVBQVVNLE9BQU8sSUFDckROLFVBQVVNLE9BQU8sR0FDakI3RixPQUFPMkYsSUFBSSxDQUFDRyxVQUFVLENBQUNQLFVBQVVNLE9BQU87SUFDOUMsTUFBTUUsYUFBYS9GLE9BQU8yRixJQUFJLENBQUNDLE1BQU0sQ0FBQ0osTUFBTUssT0FBTyxJQUFJTCxNQUFNSyxPQUFPLEdBQUc3RixPQUFPMkYsSUFBSSxDQUFDRyxVQUFVLENBQUNOLE1BQU1LLE9BQU87SUFDM0csT0FBT0gsZUFBZU0sT0FBTyxDQUFDRDtBQUNsQztBQUNBcEcsOEJBQThCLEdBQUdFLHdCQUNqQyw4Q0FBOEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9zZXJ2ZXJfZGVzY3JpcHRpb24uanM/NGY3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY29tcGFyZVRvcG9sb2d5VmVyc2lvbiA9IGV4cG9ydHMucGFyc2VTZXJ2ZXJUeXBlID0gZXhwb3J0cy5TZXJ2ZXJEZXNjcmlwdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGJzb25fMSA9IHJlcXVpcmUoXCIuLi9ic29uXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBjb21tb25fMSA9IHJlcXVpcmUoXCIuL2NvbW1vblwiKTtcbmNvbnN0IFdSSVRBQkxFX1NFUlZFUl9UWVBFUyA9IG5ldyBTZXQoW1xuICAgIGNvbW1vbl8xLlNlcnZlclR5cGUuUlNQcmltYXJ5LFxuICAgIGNvbW1vbl8xLlNlcnZlclR5cGUuU3RhbmRhbG9uZSxcbiAgICBjb21tb25fMS5TZXJ2ZXJUeXBlLk1vbmdvcyxcbiAgICBjb21tb25fMS5TZXJ2ZXJUeXBlLkxvYWRCYWxhbmNlclxuXSk7XG5jb25zdCBEQVRBX0JFQVJJTkdfU0VSVkVSX1RZUEVTID0gbmV3IFNldChbXG4gICAgY29tbW9uXzEuU2VydmVyVHlwZS5SU1ByaW1hcnksXG4gICAgY29tbW9uXzEuU2VydmVyVHlwZS5SU1NlY29uZGFyeSxcbiAgICBjb21tb25fMS5TZXJ2ZXJUeXBlLk1vbmdvcyxcbiAgICBjb21tb25fMS5TZXJ2ZXJUeXBlLlN0YW5kYWxvbmUsXG4gICAgY29tbW9uXzEuU2VydmVyVHlwZS5Mb2FkQmFsYW5jZXJcbl0pO1xuLyoqXG4gKiBUaGUgY2xpZW50J3MgdmlldyBvZiBhIHNpbmdsZSBzZXJ2ZXIsIGJhc2VkIG9uIHRoZSBtb3N0IHJlY2VudCBoZWxsbyBvdXRjb21lLlxuICpcbiAqIEludGVybmFsIHR5cGUsIG5vdCBtZWFudCB0byBiZSBkaXJlY3RseSBpbnN0YW50aWF0ZWRcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgU2VydmVyRGVzY3JpcHRpb24ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFNlcnZlckRlc2NyaXB0aW9uXG4gICAgICogQGludGVybmFsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWRkcmVzcyAtIFRoZSBhZGRyZXNzIG9mIHRoZSBzZXJ2ZXJcbiAgICAgKiBAcGFyYW0gaGVsbG8gLSBBbiBvcHRpb25hbCBoZWxsbyByZXNwb25zZSBmb3IgdGhpcyBzZXJ2ZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhZGRyZXNzLCBoZWxsbywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmIChhZGRyZXNzID09IG51bGwgfHwgYWRkcmVzcyA9PT0gJycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdTZXJ2ZXJEZXNjcmlwdGlvbiBtdXN0IGJlIHByb3ZpZGVkIHdpdGggYSBub24tZW1wdHkgYWRkcmVzcycpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9XG4gICAgICAgICAgICB0eXBlb2YgYWRkcmVzcyA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IHV0aWxzXzEuSG9zdEFkZHJlc3MuZnJvbVN0cmluZyhhZGRyZXNzKS50b1N0cmluZygpIC8vIFVzZSBIb3N0QWRkcmVzcyB0byBub3JtYWxpemVcbiAgICAgICAgICAgICAgICA6IGFkZHJlc3MudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy50eXBlID0gcGFyc2VTZXJ2ZXJUeXBlKGhlbGxvLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5ob3N0cyA9IGhlbGxvPy5ob3N0cz8ubWFwKChob3N0KSA9PiBob3N0LnRvTG93ZXJDYXNlKCkpID8/IFtdO1xuICAgICAgICB0aGlzLnBhc3NpdmVzID0gaGVsbG8/LnBhc3NpdmVzPy5tYXAoKGhvc3QpID0+IGhvc3QudG9Mb3dlckNhc2UoKSkgPz8gW107XG4gICAgICAgIHRoaXMuYXJiaXRlcnMgPSBoZWxsbz8uYXJiaXRlcnM/Lm1hcCgoaG9zdCkgPT4gaG9zdC50b0xvd2VyQ2FzZSgpKSA/PyBbXTtcbiAgICAgICAgdGhpcy50YWdzID0gaGVsbG8/LnRhZ3MgPz8ge307XG4gICAgICAgIHRoaXMubWluV2lyZVZlcnNpb24gPSBoZWxsbz8ubWluV2lyZVZlcnNpb24gPz8gMDtcbiAgICAgICAgdGhpcy5tYXhXaXJlVmVyc2lvbiA9IGhlbGxvPy5tYXhXaXJlVmVyc2lvbiA/PyAwO1xuICAgICAgICB0aGlzLnJvdW5kVHJpcFRpbWUgPSBvcHRpb25zPy5yb3VuZFRyaXBUaW1lID8/IC0xO1xuICAgICAgICB0aGlzLmxhc3RVcGRhdGVUaW1lID0gKDAsIHV0aWxzXzEubm93KSgpO1xuICAgICAgICB0aGlzLmxhc3RXcml0ZURhdGUgPSBoZWxsbz8ubGFzdFdyaXRlPy5sYXN0V3JpdGVEYXRlID8/IDA7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBvcHRpb25zLmVycm9yID8/IG51bGw7XG4gICAgICAgIC8vIFRPRE8oTk9ERS0yNjc0KTogUHJlc2VydmUgaW50NjQgc2VudCBmcm9tIE1vbmdvREJcbiAgICAgICAgdGhpcy50b3BvbG9neVZlcnNpb24gPSB0aGlzLmVycm9yPy50b3BvbG9neVZlcnNpb24gPz8gaGVsbG8/LnRvcG9sb2d5VmVyc2lvbiA/PyBudWxsO1xuICAgICAgICB0aGlzLnNldE5hbWUgPSBoZWxsbz8uc2V0TmFtZSA/PyBudWxsO1xuICAgICAgICB0aGlzLnNldFZlcnNpb24gPSBoZWxsbz8uc2V0VmVyc2lvbiA/PyBudWxsO1xuICAgICAgICB0aGlzLmVsZWN0aW9uSWQgPSBoZWxsbz8uZWxlY3Rpb25JZCA/PyBudWxsO1xuICAgICAgICB0aGlzLmxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMgPSBoZWxsbz8ubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyA/PyBudWxsO1xuICAgICAgICB0aGlzLnByaW1hcnkgPSBoZWxsbz8ucHJpbWFyeSA/PyBudWxsO1xuICAgICAgICB0aGlzLm1lID0gaGVsbG8/Lm1lPy50b0xvd2VyQ2FzZSgpID8/IG51bGw7XG4gICAgICAgIHRoaXMuJGNsdXN0ZXJUaW1lID0gaGVsbG8/LiRjbHVzdGVyVGltZSA/PyBudWxsO1xuICAgIH1cbiAgICBnZXQgaG9zdEFkZHJlc3MoKSB7XG4gICAgICAgIHJldHVybiB1dGlsc18xLkhvc3RBZGRyZXNzLmZyb21TdHJpbmcodGhpcy5hZGRyZXNzKTtcbiAgICB9XG4gICAgZ2V0IGFsbEhvc3RzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ob3N0cy5jb25jYXQodGhpcy5hcmJpdGVycykuY29uY2F0KHRoaXMucGFzc2l2ZXMpO1xuICAgIH1cbiAgICAvKiogSXMgdGhpcyBzZXJ2ZXIgYXZhaWxhYmxlIGZvciByZWFkcyovXG4gICAgZ2V0IGlzUmVhZGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09IGNvbW1vbl8xLlNlcnZlclR5cGUuUlNTZWNvbmRhcnkgfHwgdGhpcy5pc1dyaXRhYmxlO1xuICAgIH1cbiAgICAvKiogSXMgdGhpcyBzZXJ2ZXIgZGF0YSBiZWFyaW5nICovXG4gICAgZ2V0IGlzRGF0YUJlYXJpbmcoKSB7XG4gICAgICAgIHJldHVybiBEQVRBX0JFQVJJTkdfU0VSVkVSX1RZUEVTLmhhcyh0aGlzLnR5cGUpO1xuICAgIH1cbiAgICAvKiogSXMgdGhpcyBzZXJ2ZXIgYXZhaWxhYmxlIGZvciB3cml0ZXMgKi9cbiAgICBnZXQgaXNXcml0YWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIFdSSVRBQkxFX1NFUlZFUl9UWVBFUy5oYXModGhpcy50eXBlKTtcbiAgICB9XG4gICAgZ2V0IGhvc3QoKSB7XG4gICAgICAgIGNvbnN0IGNob3BMZW5ndGggPSBgOiR7dGhpcy5wb3J0fWAubGVuZ3RoO1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRyZXNzLnNsaWNlKDAsIC1jaG9wTGVuZ3RoKTtcbiAgICB9XG4gICAgZ2V0IHBvcnQoKSB7XG4gICAgICAgIGNvbnN0IHBvcnQgPSB0aGlzLmFkZHJlc3Muc3BsaXQoJzonKS5wb3AoKTtcbiAgICAgICAgcmV0dXJuIHBvcnQgPyBOdW1iZXIucGFyc2VJbnQocG9ydCwgMTApIDogMjcwMTc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgYW5vdGhlciBgU2VydmVyRGVzY3JpcHRpb25gIGlzIGVxdWFsIHRvIHRoaXMgb25lIHBlciB0aGUgcnVsZXMgZGVmaW5lZFxuICAgICAqIGluIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL21vbmdvZGIvc3BlY2lmaWNhdGlvbnMvYmxvYi9tYXN0ZXIvc291cmNlL3NlcnZlci1kaXNjb3ZlcnktYW5kLW1vbml0b3Jpbmcvc2VydmVyLWRpc2NvdmVyeS1hbmQtbW9uaXRvcmluZy5yc3Qjc2VydmVyZGVzY3JpcHRpb258U0RBTSBzcGVjfVxuICAgICAqL1xuICAgIGVxdWFscyhvdGhlcikge1xuICAgICAgICAvLyBEZXNwaXRlIHVzaW5nIHRoZSBjb21wYXJhdG9yIHRoYXQgd291bGQgZGV0ZXJtaW5lIGEgbnVsbGlzaCB0b3BvbG9neVZlcnNpb24gYXMgZ3JlYXRlciB0aGFuXG4gICAgICAgIC8vIGZvciBlcXVhbGl0eSB3ZSBzaG91bGQgb25seSBhbHdheXMgcGVyZm9ybSBkaXJlY3QgZXF1YWxpdHkgY29tcGFyaXNvblxuICAgICAgICBjb25zdCB0b3BvbG9neVZlcnNpb25zRXF1YWwgPSB0aGlzLnRvcG9sb2d5VmVyc2lvbiA9PT0gb3RoZXI/LnRvcG9sb2d5VmVyc2lvbiB8fFxuICAgICAgICAgICAgY29tcGFyZVRvcG9sb2d5VmVyc2lvbih0aGlzLnRvcG9sb2d5VmVyc2lvbiwgb3RoZXI/LnRvcG9sb2d5VmVyc2lvbikgPT09IDA7XG4gICAgICAgIGNvbnN0IGVsZWN0aW9uSWRzRXF1YWwgPSB0aGlzLmVsZWN0aW9uSWQgIT0gbnVsbCAmJiBvdGhlcj8uZWxlY3Rpb25JZCAhPSBudWxsXG4gICAgICAgICAgICA/ICgwLCB1dGlsc18xLmNvbXBhcmVPYmplY3RJZCkodGhpcy5lbGVjdGlvbklkLCBvdGhlci5lbGVjdGlvbklkKSA9PT0gMFxuICAgICAgICAgICAgOiB0aGlzLmVsZWN0aW9uSWQgPT09IG90aGVyPy5lbGVjdGlvbklkO1xuICAgICAgICByZXR1cm4gKG90aGVyICE9IG51bGwgJiZcbiAgICAgICAgICAgICgwLCB1dGlsc18xLmVycm9yU3RyaWN0RXF1YWwpKHRoaXMuZXJyb3IsIG90aGVyLmVycm9yKSAmJlxuICAgICAgICAgICAgdGhpcy50eXBlID09PSBvdGhlci50eXBlICYmXG4gICAgICAgICAgICB0aGlzLm1pbldpcmVWZXJzaW9uID09PSBvdGhlci5taW5XaXJlVmVyc2lvbiAmJlxuICAgICAgICAgICAgKDAsIHV0aWxzXzEuYXJyYXlTdHJpY3RFcXVhbCkodGhpcy5ob3N0cywgb3RoZXIuaG9zdHMpICYmXG4gICAgICAgICAgICB0YWdzU3RyaWN0RXF1YWwodGhpcy50YWdzLCBvdGhlci50YWdzKSAmJlxuICAgICAgICAgICAgdGhpcy5zZXROYW1lID09PSBvdGhlci5zZXROYW1lICYmXG4gICAgICAgICAgICB0aGlzLnNldFZlcnNpb24gPT09IG90aGVyLnNldFZlcnNpb24gJiZcbiAgICAgICAgICAgIGVsZWN0aW9uSWRzRXF1YWwgJiZcbiAgICAgICAgICAgIHRoaXMucHJpbWFyeSA9PT0gb3RoZXIucHJpbWFyeSAmJlxuICAgICAgICAgICAgdGhpcy5sb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzID09PSBvdGhlci5sb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzICYmXG4gICAgICAgICAgICB0b3BvbG9neVZlcnNpb25zRXF1YWwpO1xuICAgIH1cbn1cbmV4cG9ydHMuU2VydmVyRGVzY3JpcHRpb24gPSBTZXJ2ZXJEZXNjcmlwdGlvbjtcbi8vIFBhcnNlcyBhIGBoZWxsb2AgbWVzc2FnZSBhbmQgZGV0ZXJtaW5lcyB0aGUgc2VydmVyIHR5cGVcbmZ1bmN0aW9uIHBhcnNlU2VydmVyVHlwZShoZWxsbywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zPy5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgcmV0dXJuIGNvbW1vbl8xLlNlcnZlclR5cGUuTG9hZEJhbGFuY2VyO1xuICAgIH1cbiAgICBpZiAoIWhlbGxvIHx8ICFoZWxsby5vaykge1xuICAgICAgICByZXR1cm4gY29tbW9uXzEuU2VydmVyVHlwZS5Vbmtub3duO1xuICAgIH1cbiAgICBpZiAoaGVsbG8uaXNyZXBsaWNhc2V0KSB7XG4gICAgICAgIHJldHVybiBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTR2hvc3Q7XG4gICAgfVxuICAgIGlmIChoZWxsby5tc2cgJiYgaGVsbG8ubXNnID09PSAnaXNkYmdyaWQnKSB7XG4gICAgICAgIHJldHVybiBjb21tb25fMS5TZXJ2ZXJUeXBlLk1vbmdvcztcbiAgICB9XG4gICAgaWYgKGhlbGxvLnNldE5hbWUpIHtcbiAgICAgICAgaWYgKGhlbGxvLmhpZGRlbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLlNlcnZlclR5cGUuUlNPdGhlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChoZWxsby5pc1dyaXRhYmxlUHJpbWFyeSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLlNlcnZlclR5cGUuUlNQcmltYXJ5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGhlbGxvLnNlY29uZGFyeSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLlNlcnZlclR5cGUuUlNTZWNvbmRhcnk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaGVsbG8uYXJiaXRlck9ubHkpIHtcbiAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTQXJiaXRlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTT3RoZXI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbW1vbl8xLlNlcnZlclR5cGUuU3RhbmRhbG9uZTtcbn1cbmV4cG9ydHMucGFyc2VTZXJ2ZXJUeXBlID0gcGFyc2VTZXJ2ZXJUeXBlO1xuZnVuY3Rpb24gdGFnc1N0cmljdEVxdWFsKHRhZ3MsIHRhZ3MyKSB7XG4gICAgY29uc3QgdGFnc0tleXMgPSBPYmplY3Qua2V5cyh0YWdzKTtcbiAgICBjb25zdCB0YWdzMktleXMgPSBPYmplY3Qua2V5cyh0YWdzMik7XG4gICAgcmV0dXJuICh0YWdzS2V5cy5sZW5ndGggPT09IHRhZ3MyS2V5cy5sZW5ndGggJiZcbiAgICAgICAgdGFnc0tleXMuZXZlcnkoKGtleSkgPT4gdGFnczJba2V5XSA9PT0gdGFnc1trZXldKSk7XG59XG4vKipcbiAqIENvbXBhcmVzIHR3byB0b3BvbG9neSB2ZXJzaW9ucy5cbiAqXG4gKiAxLiBJZiB0aGUgcmVzcG9uc2UgdG9wb2xvZ3lWZXJzaW9uIGlzIHVuc2V0IG9yIHRoZSBTZXJ2ZXJEZXNjcmlwdGlvbidzXG4gKiAgICB0b3BvbG9neVZlcnNpb24gaXMgbnVsbCwgdGhlIGNsaWVudCBNVVNUIGFzc3VtZSB0aGUgcmVzcG9uc2UgaXMgbW9yZSByZWNlbnQuXG4gKiAxLiBJZiB0aGUgcmVzcG9uc2UncyB0b3BvbG9neVZlcnNpb24ucHJvY2Vzc0lkIGlzIG5vdCBlcXVhbCB0byB0aGVcbiAqICAgIFNlcnZlckRlc2NyaXB0aW9uJ3MsIHRoZSBjbGllbnQgTVVTVCBhc3N1bWUgdGhlIHJlc3BvbnNlIGlzIG1vcmUgcmVjZW50LlxuICogMS4gSWYgdGhlIHJlc3BvbnNlJ3MgdG9wb2xvZ3lWZXJzaW9uLnByb2Nlc3NJZCBpcyBlcXVhbCB0byB0aGVcbiAqICAgIFNlcnZlckRlc2NyaXB0aW9uJ3MsIHRoZSBjbGllbnQgTVVTVCB1c2UgdGhlIGNvdW50ZXIgZmllbGQgdG8gZGV0ZXJtaW5lXG4gKiAgICB3aGljaCB0b3BvbG9neVZlcnNpb24gaXMgbW9yZSByZWNlbnQuXG4gKlxuICogYGBgdHNcbiAqIGN1cnJlbnRUdiA8ICAgbmV3VHYgPT09IC0xXG4gKiBjdXJyZW50VHYgPT09IG5ld1R2ID09PSAwXG4gKiBjdXJyZW50VHYgPiAgIG5ld1R2ID09PSAxXG4gKiBgYGBcbiAqL1xuZnVuY3Rpb24gY29tcGFyZVRvcG9sb2d5VmVyc2lvbihjdXJyZW50VHYsIG5ld1R2KSB7XG4gICAgaWYgKGN1cnJlbnRUdiA9PSBudWxsIHx8IG5ld1R2ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpZiAoIWN1cnJlbnRUdi5wcm9jZXNzSWQuZXF1YWxzKG5ld1R2LnByb2Nlc3NJZCkpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICAvLyBUT0RPKE5PREUtMjY3NCk6IFByZXNlcnZlIGludDY0IHNlbnQgZnJvbSBNb25nb0RCXG4gICAgY29uc3QgY3VycmVudENvdW50ZXIgPSBic29uXzEuTG9uZy5pc0xvbmcoY3VycmVudFR2LmNvdW50ZXIpXG4gICAgICAgID8gY3VycmVudFR2LmNvdW50ZXJcbiAgICAgICAgOiBic29uXzEuTG9uZy5mcm9tTnVtYmVyKGN1cnJlbnRUdi5jb3VudGVyKTtcbiAgICBjb25zdCBuZXdDb3VudGVyID0gYnNvbl8xLkxvbmcuaXNMb25nKG5ld1R2LmNvdW50ZXIpID8gbmV3VHYuY291bnRlciA6IGJzb25fMS5Mb25nLmZyb21OdW1iZXIobmV3VHYuY291bnRlcik7XG4gICAgcmV0dXJuIGN1cnJlbnRDb3VudGVyLmNvbXBhcmUobmV3Q291bnRlcik7XG59XG5leHBvcnRzLmNvbXBhcmVUb3BvbG9neVZlcnNpb24gPSBjb21wYXJlVG9wb2xvZ3lWZXJzaW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VydmVyX2Rlc2NyaXB0aW9uLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNvbXBhcmVUb3BvbG9neVZlcnNpb24iLCJwYXJzZVNlcnZlclR5cGUiLCJTZXJ2ZXJEZXNjcmlwdGlvbiIsImJzb25fMSIsInJlcXVpcmUiLCJlcnJvcl8xIiwidXRpbHNfMSIsImNvbW1vbl8xIiwiV1JJVEFCTEVfU0VSVkVSX1RZUEVTIiwiU2V0IiwiU2VydmVyVHlwZSIsIlJTUHJpbWFyeSIsIlN0YW5kYWxvbmUiLCJNb25nb3MiLCJMb2FkQmFsYW5jZXIiLCJEQVRBX0JFQVJJTkdfU0VSVkVSX1RZUEVTIiwiUlNTZWNvbmRhcnkiLCJjb25zdHJ1Y3RvciIsImFkZHJlc3MiLCJoZWxsbyIsIm9wdGlvbnMiLCJNb25nb1J1bnRpbWVFcnJvciIsIkhvc3RBZGRyZXNzIiwiZnJvbVN0cmluZyIsInRvU3RyaW5nIiwidHlwZSIsImhvc3RzIiwibWFwIiwiaG9zdCIsInRvTG93ZXJDYXNlIiwicGFzc2l2ZXMiLCJhcmJpdGVycyIsInRhZ3MiLCJtaW5XaXJlVmVyc2lvbiIsIm1heFdpcmVWZXJzaW9uIiwicm91bmRUcmlwVGltZSIsImxhc3RVcGRhdGVUaW1lIiwibm93IiwibGFzdFdyaXRlRGF0ZSIsImxhc3RXcml0ZSIsImVycm9yIiwidG9wb2xvZ3lWZXJzaW9uIiwic2V0TmFtZSIsInNldFZlcnNpb24iLCJlbGVjdGlvbklkIiwibG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyIsInByaW1hcnkiLCJtZSIsIiRjbHVzdGVyVGltZSIsImhvc3RBZGRyZXNzIiwiYWxsSG9zdHMiLCJjb25jYXQiLCJpc1JlYWRhYmxlIiwiaXNXcml0YWJsZSIsImlzRGF0YUJlYXJpbmciLCJoYXMiLCJjaG9wTGVuZ3RoIiwicG9ydCIsImxlbmd0aCIsInNsaWNlIiwic3BsaXQiLCJwb3AiLCJOdW1iZXIiLCJwYXJzZUludCIsImVxdWFscyIsIm90aGVyIiwidG9wb2xvZ3lWZXJzaW9uc0VxdWFsIiwiZWxlY3Rpb25JZHNFcXVhbCIsImNvbXBhcmVPYmplY3RJZCIsImVycm9yU3RyaWN0RXF1YWwiLCJhcnJheVN0cmljdEVxdWFsIiwidGFnc1N0cmljdEVxdWFsIiwibG9hZEJhbGFuY2VkIiwib2siLCJVbmtub3duIiwiaXNyZXBsaWNhc2V0IiwiUlNHaG9zdCIsIm1zZyIsImhpZGRlbiIsIlJTT3RoZXIiLCJpc1dyaXRhYmxlUHJpbWFyeSIsInNlY29uZGFyeSIsImFyYml0ZXJPbmx5IiwiUlNBcmJpdGVyIiwidGFnczIiLCJ0YWdzS2V5cyIsImtleXMiLCJ0YWdzMktleXMiLCJldmVyeSIsImtleSIsImN1cnJlbnRUdiIsIm5ld1R2IiwicHJvY2Vzc0lkIiwiY3VycmVudENvdW50ZXIiLCJMb25nIiwiaXNMb25nIiwiY291bnRlciIsImZyb21OdW1iZXIiLCJuZXdDb3VudGVyIiwiY29tcGFyZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/server_description.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/server_selection.js":
/*!***********************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/server_selection.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.readPreferenceServerSelector = exports.secondaryWritableServerSelector = exports.sameServerSelector = exports.writableServerSelector = exports.MIN_SECONDARY_WRITE_WIRE_VERSION = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\n// max staleness constants\nconst IDLE_WRITE_PERIOD = 10000;\nconst SMALLEST_MAX_STALENESS_SECONDS = 90;\n//  Minimum version to try writes on secondaries.\nexports.MIN_SECONDARY_WRITE_WIRE_VERSION = 13;\n/**\n * Returns a server selector that selects for writable servers\n */ function writableServerSelector() {\n    return (topologyDescription, servers)=>latencyWindowReducer(topologyDescription, servers.filter((s)=>s.isWritable));\n}\nexports.writableServerSelector = writableServerSelector;\n/**\n * The purpose of this selector is to select the same server, only\n * if it is in a state that it can have commands sent to it.\n */ function sameServerSelector(description) {\n    return (topologyDescription, servers)=>{\n        if (!description) return [];\n        // Filter the servers to match the provided description only if\n        // the type is not unknown.\n        return servers.filter((sd)=>{\n            return sd.address === description.address && sd.type !== common_1.ServerType.Unknown;\n        });\n    };\n}\nexports.sameServerSelector = sameServerSelector;\n/**\n * Returns a server selector that uses a read preference to select a\n * server potentially for a write on a secondary.\n */ function secondaryWritableServerSelector(wireVersion, readPreference) {\n    // If server version < 5.0, read preference always primary.\n    // If server version >= 5.0...\n    // - If read preference is supplied, use that.\n    // - If no read preference is supplied, use primary.\n    if (!readPreference || !wireVersion || wireVersion && wireVersion < exports.MIN_SECONDARY_WRITE_WIRE_VERSION) {\n        return readPreferenceServerSelector(read_preference_1.ReadPreference.primary);\n    }\n    return readPreferenceServerSelector(readPreference);\n}\nexports.secondaryWritableServerSelector = secondaryWritableServerSelector;\n/**\n * Reduces the passed in array of servers by the rules of the \"Max Staleness\" specification\n * found here: https://github.com/mongodb/specifications/blob/master/source/max-staleness/max-staleness.rst\n *\n * @param readPreference - The read preference providing max staleness guidance\n * @param topologyDescription - The topology description\n * @param servers - The list of server descriptions to be reduced\n * @returns The list of servers that satisfy the requirements of max staleness\n */ function maxStalenessReducer(readPreference, topologyDescription, servers) {\n    if (readPreference.maxStalenessSeconds == null || readPreference.maxStalenessSeconds < 0) {\n        return servers;\n    }\n    const maxStaleness = readPreference.maxStalenessSeconds;\n    const maxStalenessVariance = (topologyDescription.heartbeatFrequencyMS + IDLE_WRITE_PERIOD) / 1000;\n    if (maxStaleness < maxStalenessVariance) {\n        throw new error_1.MongoInvalidArgumentError(`Option \"maxStalenessSeconds\" must be at least ${maxStalenessVariance} seconds`);\n    }\n    if (maxStaleness < SMALLEST_MAX_STALENESS_SECONDS) {\n        throw new error_1.MongoInvalidArgumentError(`Option \"maxStalenessSeconds\" must be at least ${SMALLEST_MAX_STALENESS_SECONDS} seconds`);\n    }\n    if (topologyDescription.type === common_1.TopologyType.ReplicaSetWithPrimary) {\n        const primary = Array.from(topologyDescription.servers.values()).filter(primaryFilter)[0];\n        return servers.reduce((result, server)=>{\n            const stalenessMS = server.lastUpdateTime - server.lastWriteDate - (primary.lastUpdateTime - primary.lastWriteDate) + topologyDescription.heartbeatFrequencyMS;\n            const staleness = stalenessMS / 1000;\n            const maxStalenessSeconds = readPreference.maxStalenessSeconds ?? 0;\n            if (staleness <= maxStalenessSeconds) {\n                result.push(server);\n            }\n            return result;\n        }, []);\n    }\n    if (topologyDescription.type === common_1.TopologyType.ReplicaSetNoPrimary) {\n        if (servers.length === 0) {\n            return servers;\n        }\n        const sMax = servers.reduce((max, s)=>s.lastWriteDate > max.lastWriteDate ? s : max);\n        return servers.reduce((result, server)=>{\n            const stalenessMS = sMax.lastWriteDate - server.lastWriteDate + topologyDescription.heartbeatFrequencyMS;\n            const staleness = stalenessMS / 1000;\n            const maxStalenessSeconds = readPreference.maxStalenessSeconds ?? 0;\n            if (staleness <= maxStalenessSeconds) {\n                result.push(server);\n            }\n            return result;\n        }, []);\n    }\n    return servers;\n}\n/**\n * Determines whether a server's tags match a given set of tags\n *\n * @param tagSet - The requested tag set to match\n * @param serverTags - The server's tags\n */ function tagSetMatch(tagSet, serverTags) {\n    const keys = Object.keys(tagSet);\n    const serverTagKeys = Object.keys(serverTags);\n    for(let i = 0; i < keys.length; ++i){\n        const key = keys[i];\n        if (serverTagKeys.indexOf(key) === -1 || serverTags[key] !== tagSet[key]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Reduces a set of server descriptions based on tags requested by the read preference\n *\n * @param readPreference - The read preference providing the requested tags\n * @param servers - The list of server descriptions to reduce\n * @returns The list of servers matching the requested tags\n */ function tagSetReducer(readPreference, servers) {\n    if (readPreference.tags == null || Array.isArray(readPreference.tags) && readPreference.tags.length === 0) {\n        return servers;\n    }\n    for(let i = 0; i < readPreference.tags.length; ++i){\n        const tagSet = readPreference.tags[i];\n        const serversMatchingTagset = servers.reduce((matched, server)=>{\n            if (tagSetMatch(tagSet, server.tags)) matched.push(server);\n            return matched;\n        }, []);\n        if (serversMatchingTagset.length) {\n            return serversMatchingTagset;\n        }\n    }\n    return [];\n}\n/**\n * Reduces a list of servers to ensure they fall within an acceptable latency window. This is\n * further specified in the \"Server Selection\" specification, found here:\n * https://github.com/mongodb/specifications/blob/master/source/server-selection/server-selection.rst\n *\n * @param topologyDescription - The topology description\n * @param servers - The list of servers to reduce\n * @returns The servers which fall within an acceptable latency window\n */ function latencyWindowReducer(topologyDescription, servers) {\n    const low = servers.reduce((min, server)=>min === -1 ? server.roundTripTime : Math.min(server.roundTripTime, min), -1);\n    const high = low + topologyDescription.localThresholdMS;\n    return servers.reduce((result, server)=>{\n        if (server.roundTripTime <= high && server.roundTripTime >= low) result.push(server);\n        return result;\n    }, []);\n}\n// filters\nfunction primaryFilter(server) {\n    return server.type === common_1.ServerType.RSPrimary;\n}\nfunction secondaryFilter(server) {\n    return server.type === common_1.ServerType.RSSecondary;\n}\nfunction nearestFilter(server) {\n    return server.type === common_1.ServerType.RSSecondary || server.type === common_1.ServerType.RSPrimary;\n}\nfunction knownFilter(server) {\n    return server.type !== common_1.ServerType.Unknown;\n}\nfunction loadBalancerFilter(server) {\n    return server.type === common_1.ServerType.LoadBalancer;\n}\n/**\n * Returns a function which selects servers based on a provided read preference\n *\n * @param readPreference - The read preference to select with\n */ function readPreferenceServerSelector(readPreference) {\n    if (!readPreference.isValid()) {\n        throw new error_1.MongoInvalidArgumentError(\"Invalid read preference specified\");\n    }\n    return (topologyDescription, servers)=>{\n        const commonWireVersion = topologyDescription.commonWireVersion;\n        if (commonWireVersion && readPreference.minWireVersion && readPreference.minWireVersion > commonWireVersion) {\n            throw new error_1.MongoCompatibilityError(`Minimum wire version '${readPreference.minWireVersion}' required, but found '${commonWireVersion}'`);\n        }\n        if (topologyDescription.type === common_1.TopologyType.LoadBalanced) {\n            return servers.filter(loadBalancerFilter);\n        }\n        if (topologyDescription.type === common_1.TopologyType.Unknown) {\n            return [];\n        }\n        if (topologyDescription.type === common_1.TopologyType.Single || topologyDescription.type === common_1.TopologyType.Sharded) {\n            return latencyWindowReducer(topologyDescription, servers.filter(knownFilter));\n        }\n        const mode = readPreference.mode;\n        if (mode === read_preference_1.ReadPreference.PRIMARY) {\n            return servers.filter(primaryFilter);\n        }\n        if (mode === read_preference_1.ReadPreference.PRIMARY_PREFERRED) {\n            const result = servers.filter(primaryFilter);\n            if (result.length) {\n                return result;\n            }\n        }\n        const filter = mode === read_preference_1.ReadPreference.NEAREST ? nearestFilter : secondaryFilter;\n        const selectedServers = latencyWindowReducer(topologyDescription, tagSetReducer(readPreference, maxStalenessReducer(readPreference, topologyDescription, servers.filter(filter))));\n        if (mode === read_preference_1.ReadPreference.SECONDARY_PREFERRED && selectedServers.length === 0) {\n            return servers.filter(primaryFilter);\n        }\n        return selectedServers;\n    };\n}\nexports.readPreferenceServerSelector = readPreferenceServerSelector; //# sourceMappingURL=server_selection.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9zZXJ2ZXJfc2VsZWN0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxvQ0FBb0MsR0FBR0EsdUNBQXVDLEdBQUdBLDBCQUEwQixHQUFHQSw4QkFBOEIsR0FBR0Esd0NBQXdDLEdBQUcsS0FBSztBQUMvTCxNQUFNTyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxvQkFBb0JELG1CQUFPQSxDQUFDLCtFQUFvQjtBQUN0RCxNQUFNRSxXQUFXRixtQkFBT0EsQ0FBQyxpRUFBVTtBQUNuQywwQkFBMEI7QUFDMUIsTUFBTUcsb0JBQW9CO0FBQzFCLE1BQU1DLGlDQUFpQztBQUN2QyxpREFBaUQ7QUFDakRaLHdDQUF3QyxHQUFHO0FBQzNDOztDQUVDLEdBQ0QsU0FBU0s7SUFDTCxPQUFPLENBQUNRLHFCQUFxQkMsVUFBWUMscUJBQXFCRixxQkFBcUJDLFFBQVFFLE1BQU0sQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxVQUFVO0FBQ3pIO0FBQ0FsQiw4QkFBOEIsR0FBR0s7QUFDakM7OztDQUdDLEdBQ0QsU0FBU0QsbUJBQW1CZSxXQUFXO0lBQ25DLE9BQU8sQ0FBQ04scUJBQXFCQztRQUN6QixJQUFJLENBQUNLLGFBQ0QsT0FBTyxFQUFFO1FBQ2IsK0RBQStEO1FBQy9ELDJCQUEyQjtRQUMzQixPQUFPTCxRQUFRRSxNQUFNLENBQUNJLENBQUFBO1lBQ2xCLE9BQU9BLEdBQUdDLE9BQU8sS0FBS0YsWUFBWUUsT0FBTyxJQUFJRCxHQUFHRSxJQUFJLEtBQUtaLFNBQVNhLFVBQVUsQ0FBQ0MsT0FBTztRQUN4RjtJQUNKO0FBQ0o7QUFDQXhCLDBCQUEwQixHQUFHSTtBQUM3Qjs7O0NBR0MsR0FDRCxTQUFTRCxnQ0FBZ0NzQixXQUFXLEVBQUVDLGNBQWM7SUFDaEUsMkRBQTJEO0lBQzNELDhCQUE4QjtJQUM5Qiw4Q0FB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QjtRQUMxQjtRQUNBLE9BQU9rRDtJQUNYO0FBQ0o7QUFDQTFGLG9DQUFvQyxHQUFHRSw4QkFDdkMsNENBQTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL3NkYW0vc2VydmVyX3NlbGVjdGlvbi5qcz9hODk2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5yZWFkUHJlZmVyZW5jZVNlcnZlclNlbGVjdG9yID0gZXhwb3J0cy5zZWNvbmRhcnlXcml0YWJsZVNlcnZlclNlbGVjdG9yID0gZXhwb3J0cy5zYW1lU2VydmVyU2VsZWN0b3IgPSBleHBvcnRzLndyaXRhYmxlU2VydmVyU2VsZWN0b3IgPSBleHBvcnRzLk1JTl9TRUNPTkRBUllfV1JJVEVfV0lSRV9WRVJTSU9OID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IHJlYWRfcHJlZmVyZW5jZV8xID0gcmVxdWlyZShcIi4uL3JlYWRfcHJlZmVyZW5jZVwiKTtcbmNvbnN0IGNvbW1vbl8xID0gcmVxdWlyZShcIi4vY29tbW9uXCIpO1xuLy8gbWF4IHN0YWxlbmVzcyBjb25zdGFudHNcbmNvbnN0IElETEVfV1JJVEVfUEVSSU9EID0gMTAwMDA7XG5jb25zdCBTTUFMTEVTVF9NQVhfU1RBTEVORVNTX1NFQ09ORFMgPSA5MDtcbi8vICBNaW5pbXVtIHZlcnNpb24gdG8gdHJ5IHdyaXRlcyBvbiBzZWNvbmRhcmllcy5cbmV4cG9ydHMuTUlOX1NFQ09OREFSWV9XUklURV9XSVJFX1ZFUlNJT04gPSAxMztcbi8qKlxuICogUmV0dXJucyBhIHNlcnZlciBzZWxlY3RvciB0aGF0IHNlbGVjdHMgZm9yIHdyaXRhYmxlIHNlcnZlcnNcbiAqL1xuZnVuY3Rpb24gd3JpdGFibGVTZXJ2ZXJTZWxlY3RvcigpIHtcbiAgICByZXR1cm4gKHRvcG9sb2d5RGVzY3JpcHRpb24sIHNlcnZlcnMpID0+IGxhdGVuY3lXaW5kb3dSZWR1Y2VyKHRvcG9sb2d5RGVzY3JpcHRpb24sIHNlcnZlcnMuZmlsdGVyKChzKSA9PiBzLmlzV3JpdGFibGUpKTtcbn1cbmV4cG9ydHMud3JpdGFibGVTZXJ2ZXJTZWxlY3RvciA9IHdyaXRhYmxlU2VydmVyU2VsZWN0b3I7XG4vKipcbiAqIFRoZSBwdXJwb3NlIG9mIHRoaXMgc2VsZWN0b3IgaXMgdG8gc2VsZWN0IHRoZSBzYW1lIHNlcnZlciwgb25seVxuICogaWYgaXQgaXMgaW4gYSBzdGF0ZSB0aGF0IGl0IGNhbiBoYXZlIGNvbW1hbmRzIHNlbnQgdG8gaXQuXG4gKi9cbmZ1bmN0aW9uIHNhbWVTZXJ2ZXJTZWxlY3RvcihkZXNjcmlwdGlvbikge1xuICAgIHJldHVybiAodG9wb2xvZ3lEZXNjcmlwdGlvbiwgc2VydmVycykgPT4ge1xuICAgICAgICBpZiAoIWRlc2NyaXB0aW9uKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAvLyBGaWx0ZXIgdGhlIHNlcnZlcnMgdG8gbWF0Y2ggdGhlIHByb3ZpZGVkIGRlc2NyaXB0aW9uIG9ubHkgaWZcbiAgICAgICAgLy8gdGhlIHR5cGUgaXMgbm90IHVua25vd24uXG4gICAgICAgIHJldHVybiBzZXJ2ZXJzLmZpbHRlcihzZCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gc2QuYWRkcmVzcyA9PT0gZGVzY3JpcHRpb24uYWRkcmVzcyAmJiBzZC50eXBlICE9PSBjb21tb25fMS5TZXJ2ZXJUeXBlLlVua25vd247XG4gICAgICAgIH0pO1xuICAgIH07XG59XG5leHBvcnRzLnNhbWVTZXJ2ZXJTZWxlY3RvciA9IHNhbWVTZXJ2ZXJTZWxlY3Rvcjtcbi8qKlxuICogUmV0dXJucyBhIHNlcnZlciBzZWxlY3RvciB0aGF0IHVzZXMgYSByZWFkIHByZWZlcmVuY2UgdG8gc2VsZWN0IGFcbiAqIHNlcnZlciBwb3RlbnRpYWxseSBmb3IgYSB3cml0ZSBvbiBhIHNlY29uZGFyeS5cbiAqL1xuZnVuY3Rpb24gc2Vjb25kYXJ5V3JpdGFibGVTZXJ2ZXJTZWxlY3Rvcih3aXJlVmVyc2lvbiwgcmVhZFByZWZlcmVuY2UpIHtcbiAgICAvLyBJZiBzZXJ2ZXIgdmVyc2lvbiA8IDUuMCwgcmVhZCBwcmVmZXJlbmNlIGFsd2F5cyBwcmltYXJ5LlxuICAgIC8vIElmIHNlcnZlciB2ZXJzaW9uID49IDUuMC4uLlxuICAgIC8vIC0gSWYgcmVhZCBwcmVmZXJlbmNlIGlzIHN1cHBsaWVkLCB1c2UgdGhhdC5cbiAgICAvLyAtIElmIG5vIHJlYWQgcHJlZmVyZW5jZSBpcyBzdXBwbGllZCwgdXNlIHByaW1hcnkuXG4gICAgaWYgKCFyZWFkUHJlZmVyZW5jZSB8fFxuICAgICAgICAhd2lyZVZlcnNpb24gfHxcbiAgICAgICAgKHdpcmVWZXJzaW9uICYmIHdpcmVWZXJzaW9uIDwgZXhwb3J0cy5NSU5fU0VDT05EQVJZX1dSSVRFX1dJUkVfVkVSU0lPTikpIHtcbiAgICAgICAgcmV0dXJuIHJlYWRQcmVmZXJlbmNlU2VydmVyU2VsZWN0b3IocmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UucHJpbWFyeSk7XG4gICAgfVxuICAgIHJldHVybiByZWFkUHJlZmVyZW5jZVNlcnZlclNlbGVjdG9yKHJlYWRQcmVmZXJlbmNlKTtcbn1cbmV4cG9ydHMuc2Vjb25kYXJ5V3JpdGFibGVTZXJ2ZXJTZWxlY3RvciA9IHNlY29uZGFyeVdyaXRhYmxlU2VydmVyU2VsZWN0b3I7XG4vKipcbiAqIFJlZHVjZXMgdGhlIHBhc3NlZCBpbiBhcnJheSBvZiBzZXJ2ZXJzIGJ5IHRoZSBydWxlcyBvZiB0aGUgXCJNYXggU3RhbGVuZXNzXCIgc3BlY2lmaWNhdGlvblxuICogZm91bmQgaGVyZTogaHR0cHM6Ly9naXRodWIuY29tL21vbmdvZGIvc3BlY2lmaWNhdGlvbnMvYmxvYi9tYXN0ZXIvc291cmNlL21heC1zdGFsZW5lc3MvbWF4LXN0YWxlbmVzcy5yc3RcbiAqXG4gKiBAcGFyYW0gcmVhZFByZWZlcmVuY2UgLSBUaGUgcmVhZCBwcmVmZXJlbmNlIHByb3ZpZGluZyBtYXggc3RhbGVuZXNzIGd1aWRhbmNlXG4gKiBAcGFyYW0gdG9wb2xvZ3lEZXNjcmlwdGlvbiAtIFRoZSB0b3BvbG9neSBkZXNjcmlwdGlvblxuICogQHBhcmFtIHNlcnZlcnMgLSBUaGUgbGlzdCBvZiBzZXJ2ZXIgZGVzY3JpcHRpb25zIHRvIGJlIHJlZHVjZWRcbiAqIEByZXR1cm5zIFRoZSBsaXN0IG9mIHNlcnZlcnMgdGhhdCBzYXRpc2Z5IHRoZSByZXF1aXJlbWVudHMgb2YgbWF4IHN0YWxlbmVzc1xuICovXG5mdW5jdGlvbiBtYXhTdGFsZW5lc3NSZWR1Y2VyKHJlYWRQcmVmZXJlbmNlLCB0b3BvbG9neURlc2NyaXB0aW9uLCBzZXJ2ZXJzKSB7XG4gICAgaWYgKHJlYWRQcmVmZXJlbmNlLm1heFN0YWxlbmVzc1NlY29uZHMgPT0gbnVsbCB8fCByZWFkUHJlZmVyZW5jZS5tYXhTdGFsZW5lc3NTZWNvbmRzIDwgMCkge1xuICAgICAgICByZXR1cm4gc2VydmVycztcbiAgICB9XG4gICAgY29uc3QgbWF4U3RhbGVuZXNzID0gcmVhZFByZWZlcmVuY2UubWF4U3RhbGVuZXNzU2Vjb25kcztcbiAgICBjb25zdCBtYXhTdGFsZW5lc3NWYXJpYW5jZSA9ICh0b3BvbG9neURlc2NyaXB0aW9uLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TICsgSURMRV9XUklURV9QRVJJT0QpIC8gMTAwMDtcbiAgICBpZiAobWF4U3RhbGVuZXNzIDwgbWF4U3RhbGVuZXNzVmFyaWFuY2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgT3B0aW9uIFwibWF4U3RhbGVuZXNzU2Vjb25kc1wiIG11c3QgYmUgYXQgbGVhc3QgJHttYXhTdGFsZW5lc3NWYXJpYW5jZX0gc2Vjb25kc2ApO1xuICAgIH1cbiAgICBpZiAobWF4U3RhbGVuZXNzIDwgU01BTExFU1RfTUFYX1NUQUxFTkVTU19TRUNPTkRTKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYE9wdGlvbiBcIm1heFN0YWxlbmVzc1NlY29uZHNcIiBtdXN0IGJlIGF0IGxlYXN0ICR7U01BTExFU1RfTUFYX1NUQUxFTkVTU19TRUNPTkRTfSBzZWNvbmRzYCk7XG4gICAgfVxuICAgIGlmICh0b3BvbG9neURlc2NyaXB0aW9uLnR5cGUgPT09IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5SZXBsaWNhU2V0V2l0aFByaW1hcnkpIHtcbiAgICAgICAgY29uc3QgcHJpbWFyeSA9IEFycmF5LmZyb20odG9wb2xvZ3lEZXNjcmlwdGlvbi5zZXJ2ZXJzLnZhbHVlcygpKS5maWx0ZXIocHJpbWFyeUZpbHRlcilbMF07XG4gICAgICAgIHJldHVybiBzZXJ2ZXJzLnJlZHVjZSgocmVzdWx0LCBzZXJ2ZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YWxlbmVzc01TID0gc2VydmVyLmxhc3RVcGRhdGVUaW1lIC1cbiAgICAgICAgICAgICAgICBzZXJ2ZXIubGFzdFdyaXRlRGF0ZSAtXG4gICAgICAgICAgICAgICAgKHByaW1hcnkubGFzdFVwZGF0ZVRpbWUgLSBwcmltYXJ5Lmxhc3RXcml0ZURhdGUpICtcbiAgICAgICAgICAgICAgICB0b3BvbG9neURlc2NyaXB0aW9uLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TO1xuICAgICAgICAgICAgY29uc3Qgc3RhbGVuZXNzID0gc3RhbGVuZXNzTVMgLyAxMDAwO1xuICAgICAgICAgICAgY29uc3QgbWF4U3RhbGVuZXNzU2Vjb25kcyA9IHJlYWRQcmVmZXJlbmNlLm1heFN0YWxlbmVzc1NlY29uZHMgPz8gMDtcbiAgICAgICAgICAgIGlmIChzdGFsZW5lc3MgPD0gbWF4U3RhbGVuZXNzU2Vjb25kcykge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHNlcnZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LCBbXSk7XG4gICAgfVxuICAgIGlmICh0b3BvbG9neURlc2NyaXB0aW9uLnR5cGUgPT09IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5SZXBsaWNhU2V0Tm9QcmltYXJ5KSB7XG4gICAgICAgIGlmIChzZXJ2ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlcnZlcnM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc01heCA9IHNlcnZlcnMucmVkdWNlKChtYXgsIHMpID0+IHMubGFzdFdyaXRlRGF0ZSA+IG1heC5sYXN0V3JpdGVEYXRlID8gcyA6IG1heCk7XG4gICAgICAgIHJldHVybiBzZXJ2ZXJzLnJlZHVjZSgocmVzdWx0LCBzZXJ2ZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YWxlbmVzc01TID0gc01heC5sYXN0V3JpdGVEYXRlIC0gc2VydmVyLmxhc3RXcml0ZURhdGUgKyB0b3BvbG9neURlc2NyaXB0aW9uLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TO1xuICAgICAgICAgICAgY29uc3Qgc3RhbGVuZXNzID0gc3RhbGVuZXNzTVMgLyAxMDAwO1xuICAgICAgICAgICAgY29uc3QgbWF4U3RhbGVuZXNzU2Vjb25kcyA9IHJlYWRQcmVmZXJlbmNlLm1heFN0YWxlbmVzc1NlY29uZHMgPz8gMDtcbiAgICAgICAgICAgIGlmIChzdGFsZW5lc3MgPD0gbWF4U3RhbGVuZXNzU2Vjb25kcykge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHNlcnZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LCBbXSk7XG4gICAgfVxuICAgIHJldHVybiBzZXJ2ZXJzO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYSBzZXJ2ZXIncyB0YWdzIG1hdGNoIGEgZ2l2ZW4gc2V0IG9mIHRhZ3NcbiAqXG4gKiBAcGFyYW0gdGFnU2V0IC0gVGhlIHJlcXVlc3RlZCB0YWcgc2V0IHRvIG1hdGNoXG4gKiBAcGFyYW0gc2VydmVyVGFncyAtIFRoZSBzZXJ2ZXIncyB0YWdzXG4gKi9cbmZ1bmN0aW9uIHRhZ1NldE1hdGNoKHRhZ1NldCwgc2VydmVyVGFncykge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0YWdTZXQpO1xuICAgIGNvbnN0IHNlcnZlclRhZ0tleXMgPSBPYmplY3Qua2V5cyhzZXJ2ZXJUYWdzKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgaWYgKHNlcnZlclRhZ0tleXMuaW5kZXhPZihrZXkpID09PSAtMSB8fCBzZXJ2ZXJUYWdzW2tleV0gIT09IHRhZ1NldFtrZXldKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIFJlZHVjZXMgYSBzZXQgb2Ygc2VydmVyIGRlc2NyaXB0aW9ucyBiYXNlZCBvbiB0YWdzIHJlcXVlc3RlZCBieSB0aGUgcmVhZCBwcmVmZXJlbmNlXG4gKlxuICogQHBhcmFtIHJlYWRQcmVmZXJlbmNlIC0gVGhlIHJlYWQgcHJlZmVyZW5jZSBwcm92aWRpbmcgdGhlIHJlcXVlc3RlZCB0YWdzXG4gKiBAcGFyYW0gc2VydmVycyAtIFRoZSBsaXN0IG9mIHNlcnZlciBkZXNjcmlwdGlvbnMgdG8gcmVkdWNlXG4gKiBAcmV0dXJucyBUaGUgbGlzdCBvZiBzZXJ2ZXJzIG1hdGNoaW5nIHRoZSByZXF1ZXN0ZWQgdGFnc1xuICovXG5mdW5jdGlvbiB0YWdTZXRSZWR1Y2VyKHJlYWRQcmVmZXJlbmNlLCBzZXJ2ZXJzKSB7XG4gICAgaWYgKHJlYWRQcmVmZXJlbmNlLnRhZ3MgPT0gbnVsbCB8fFxuICAgICAgICAoQXJyYXkuaXNBcnJheShyZWFkUHJlZmVyZW5jZS50YWdzKSAmJiByZWFkUHJlZmVyZW5jZS50YWdzLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgcmV0dXJuIHNlcnZlcnM7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVhZFByZWZlcmVuY2UudGFncy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCB0YWdTZXQgPSByZWFkUHJlZmVyZW5jZS50YWdzW2ldO1xuICAgICAgICBjb25zdCBzZXJ2ZXJzTWF0Y2hpbmdUYWdzZXQgPSBzZXJ2ZXJzLnJlZHVjZSgobWF0Y2hlZCwgc2VydmVyKSA9PiB7XG4gICAgICAgICAgICBpZiAodGFnU2V0TWF0Y2godGFnU2V0LCBzZXJ2ZXIudGFncykpXG4gICAgICAgICAgICAgICAgbWF0Y2hlZC5wdXNoKHNlcnZlcik7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlZDtcbiAgICAgICAgfSwgW10pO1xuICAgICAgICBpZiAoc2VydmVyc01hdGNoaW5nVGFnc2V0Lmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlcnZlcnNNYXRjaGluZ1RhZ3NldDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW107XG59XG4vKipcbiAqIFJlZHVjZXMgYSBsaXN0IG9mIHNlcnZlcnMgdG8gZW5zdXJlIHRoZXkgZmFsbCB3aXRoaW4gYW4gYWNjZXB0YWJsZSBsYXRlbmN5IHdpbmRvdy4gVGhpcyBpc1xuICogZnVydGhlciBzcGVjaWZpZWQgaW4gdGhlIFwiU2VydmVyIFNlbGVjdGlvblwiIHNwZWNpZmljYXRpb24sIGZvdW5kIGhlcmU6XG4gKiBodHRwczovL2dpdGh1Yi5jb20vbW9uZ29kYi9zcGVjaWZpY2F0aW9ucy9ibG9iL21hc3Rlci9zb3VyY2Uvc2VydmVyLXNlbGVjdGlvbi9zZXJ2ZXItc2VsZWN0aW9uLnJzdFxuICpcbiAqIEBwYXJhbSB0b3BvbG9neURlc2NyaXB0aW9uIC0gVGhlIHRvcG9sb2d5IGRlc2NyaXB0aW9uXG4gKiBAcGFyYW0gc2VydmVycyAtIFRoZSBsaXN0IG9mIHNlcnZlcnMgdG8gcmVkdWNlXG4gKiBAcmV0dXJucyBUaGUgc2VydmVycyB3aGljaCBmYWxsIHdpdGhpbiBhbiBhY2NlcHRhYmxlIGxhdGVuY3kgd2luZG93XG4gKi9cbmZ1bmN0aW9uIGxhdGVuY3lXaW5kb3dSZWR1Y2VyKHRvcG9sb2d5RGVzY3JpcHRpb24sIHNlcnZlcnMpIHtcbiAgICBjb25zdCBsb3cgPSBzZXJ2ZXJzLnJlZHVjZSgobWluLCBzZXJ2ZXIpID0+IG1pbiA9PT0gLTEgPyBzZXJ2ZXIucm91bmRUcmlwVGltZSA6IE1hdGgubWluKHNlcnZlci5yb3VuZFRyaXBUaW1lLCBtaW4pLCAtMSk7XG4gICAgY29uc3QgaGlnaCA9IGxvdyArIHRvcG9sb2d5RGVzY3JpcHRpb24ubG9jYWxUaHJlc2hvbGRNUztcbiAgICByZXR1cm4gc2VydmVycy5yZWR1Y2UoKHJlc3VsdCwgc2VydmVyKSA9PiB7XG4gICAgICAgIGlmIChzZXJ2ZXIucm91bmRUcmlwVGltZSA8PSBoaWdoICYmIHNlcnZlci5yb3VuZFRyaXBUaW1lID49IGxvdylcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHNlcnZlcik7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSwgW10pO1xufVxuLy8gZmlsdGVyc1xuZnVuY3Rpb24gcHJpbWFyeUZpbHRlcihzZXJ2ZXIpIHtcbiAgICByZXR1cm4gc2VydmVyLnR5cGUgPT09IGNvbW1vbl8xLlNlcnZlclR5cGUuUlNQcmltYXJ5O1xufVxuZnVuY3Rpb24gc2Vjb25kYXJ5RmlsdGVyKHNlcnZlcikge1xuICAgIHJldHVybiBzZXJ2ZXIudHlwZSA9PT0gY29tbW9uXzEuU2VydmVyVHlwZS5SU1NlY29uZGFyeTtcbn1cbmZ1bmN0aW9uIG5lYXJlc3RGaWx0ZXIoc2VydmVyKSB7XG4gICAgcmV0dXJuIHNlcnZlci50eXBlID09PSBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTU2Vjb25kYXJ5IHx8IHNlcnZlci50eXBlID09PSBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTUHJpbWFyeTtcbn1cbmZ1bmN0aW9uIGtub3duRmlsdGVyKHNlcnZlcikge1xuICAgIHJldHVybiBzZXJ2ZXIudHlwZSAhPT0gY29tbW9uXzEuU2VydmVyVHlwZS5Vbmtub3duO1xufVxuZnVuY3Rpb24gbG9hZEJhbGFuY2VyRmlsdGVyKHNlcnZlcikge1xuICAgIHJldHVybiBzZXJ2ZXIudHlwZSA9PT0gY29tbW9uXzEuU2VydmVyVHlwZS5Mb2FkQmFsYW5jZXI7XG59XG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBzZWxlY3RzIHNlcnZlcnMgYmFzZWQgb24gYSBwcm92aWRlZCByZWFkIHByZWZlcmVuY2VcbiAqXG4gKiBAcGFyYW0gcmVhZFByZWZlcmVuY2UgLSBUaGUgcmVhZCBwcmVmZXJlbmNlIHRvIHNlbGVjdCB3aXRoXG4gKi9cbmZ1bmN0aW9uIHJlYWRQcmVmZXJlbmNlU2VydmVyU2VsZWN0b3IocmVhZFByZWZlcmVuY2UpIHtcbiAgICBpZiAoIXJlYWRQcmVmZXJlbmNlLmlzVmFsaWQoKSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdJbnZhbGlkIHJlYWQgcHJlZmVyZW5jZSBzcGVjaWZpZWQnKTtcbiAgICB9XG4gICAgcmV0dXJuICh0b3BvbG9neURlc2NyaXB0aW9uLCBzZXJ2ZXJzKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbW1vbldpcmVWZXJzaW9uID0gdG9wb2xvZ3lEZXNjcmlwdGlvbi5jb21tb25XaXJlVmVyc2lvbjtcbiAgICAgICAgaWYgKGNvbW1vbldpcmVWZXJzaW9uICYmXG4gICAgICAgICAgICByZWFkUHJlZmVyZW5jZS5taW5XaXJlVmVyc2lvbiAmJlxuICAgICAgICAgICAgcmVhZFByZWZlcmVuY2UubWluV2lyZVZlcnNpb24gPiBjb21tb25XaXJlVmVyc2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IoYE1pbmltdW0gd2lyZSB2ZXJzaW9uICcke3JlYWRQcmVmZXJlbmNlLm1pbldpcmVWZXJzaW9ufScgcmVxdWlyZWQsIGJ1dCBmb3VuZCAnJHtjb21tb25XaXJlVmVyc2lvbn0nYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcG9sb2d5RGVzY3JpcHRpb24udHlwZSA9PT0gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLkxvYWRCYWxhbmNlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlcnZlcnMuZmlsdGVyKGxvYWRCYWxhbmNlckZpbHRlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcG9sb2d5RGVzY3JpcHRpb24udHlwZSA9PT0gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlVua25vd24pIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9wb2xvZ3lEZXNjcmlwdGlvbi50eXBlID09PSBjb21tb25fMS5Ub3BvbG9neVR5cGUuU2luZ2xlIHx8XG4gICAgICAgICAgICB0b3BvbG9neURlc2NyaXB0aW9uLnR5cGUgPT09IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5TaGFyZGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbGF0ZW5jeVdpbmRvd1JlZHVjZXIodG9wb2xvZ3lEZXNjcmlwdGlvbiwgc2VydmVycy5maWx0ZXIoa25vd25GaWx0ZXIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2RlID0gcmVhZFByZWZlcmVuY2UubW9kZTtcbiAgICAgICAgaWYgKG1vZGUgPT09IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLlBSSU1BUlkpIHtcbiAgICAgICAgICAgIHJldHVybiBzZXJ2ZXJzLmZpbHRlcihwcmltYXJ5RmlsdGVyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW9kZSA9PT0gcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UuUFJJTUFSWV9QUkVGRVJSRUQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHNlcnZlcnMuZmlsdGVyKHByaW1hcnlGaWx0ZXIpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbHRlciA9IG1vZGUgPT09IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLk5FQVJFU1QgPyBuZWFyZXN0RmlsdGVyIDogc2Vjb25kYXJ5RmlsdGVyO1xuICAgICAgICBjb25zdCBzZWxlY3RlZFNlcnZlcnMgPSBsYXRlbmN5V2luZG93UmVkdWNlcih0b3BvbG9neURlc2NyaXB0aW9uLCB0YWdTZXRSZWR1Y2VyKHJlYWRQcmVmZXJlbmNlLCBtYXhTdGFsZW5lc3NSZWR1Y2VyKHJlYWRQcmVmZXJlbmNlLCB0b3BvbG9neURlc2NyaXB0aW9uLCBzZXJ2ZXJzLmZpbHRlcihmaWx0ZXIpKSkpO1xuICAgICAgICBpZiAobW9kZSA9PT0gcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UuU0VDT05EQVJZX1BSRUZFUlJFRCAmJiBzZWxlY3RlZFNlcnZlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VydmVycy5maWx0ZXIocHJpbWFyeUZpbHRlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkU2VydmVycztcbiAgICB9O1xufVxuZXhwb3J0cy5yZWFkUHJlZmVyZW5jZVNlcnZlclNlbGVjdG9yID0gcmVhZFByZWZlcmVuY2VTZXJ2ZXJTZWxlY3Rvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlcnZlcl9zZWxlY3Rpb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwicmVhZFByZWZlcmVuY2VTZXJ2ZXJTZWxlY3RvciIsInNlY29uZGFyeVdyaXRhYmxlU2VydmVyU2VsZWN0b3IiLCJzYW1lU2VydmVyU2VsZWN0b3IiLCJ3cml0YWJsZVNlcnZlclNlbGVjdG9yIiwiTUlOX1NFQ09OREFSWV9XUklURV9XSVJFX1ZFUlNJT04iLCJlcnJvcl8xIiwicmVxdWlyZSIsInJlYWRfcHJlZmVyZW5jZV8xIiwiY29tbW9uXzEiLCJJRExFX1dSSVRFX1BFUklPRCIsIlNNQUxMRVNUX01BWF9TVEFMRU5FU1NfU0VDT05EUyIsInRvcG9sb2d5RGVzY3JpcHRpb24iLCJzZXJ2ZXJzIiwibGF0ZW5jeVdpbmRvd1JlZHVjZXIiLCJmaWx0ZXIiLCJzIiwiaXNXcml0YWJsZSIsImRlc2NyaXB0aW9uIiwic2QiLCJhZGRyZXNzIiwidHlwZSIsIlNlcnZlclR5cGUiLCJVbmtub3duIiwid2lyZVZlcnNpb24iLCJyZWFkUHJlZmVyZW5jZSIsIlJlYWRQcmVmZXJlbmNlIiwicHJpbWFyeSIsIm1heFN0YWxlbmVzc1JlZHVjZXIiLCJtYXhTdGFsZW5lc3NTZWNvbmRzIiwibWF4U3RhbGVuZXNzIiwibWF4U3RhbGVuZXNzVmFyaWFuY2UiLCJoZWFydGJlYXRGcmVxdWVuY3lNUyIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJUb3BvbG9neVR5cGUiLCJSZXBsaWNhU2V0V2l0aFByaW1hcnkiLCJBcnJheSIsImZyb20iLCJ2YWx1ZXMiLCJwcmltYXJ5RmlsdGVyIiwicmVkdWNlIiwicmVzdWx0Iiwic2VydmVyIiwic3RhbGVuZXNzTVMiLCJsYXN0VXBkYXRlVGltZSIsImxhc3RXcml0ZURhdGUiLCJzdGFsZW5lc3MiLCJwdXNoIiwiUmVwbGljYVNldE5vUHJpbWFyeSIsImxlbmd0aCIsInNNYXgiLCJtYXgiLCJ0YWdTZXRNYXRjaCIsInRhZ1NldCIsInNlcnZlclRhZ3MiLCJrZXlzIiwic2VydmVyVGFnS2V5cyIsImkiLCJrZXkiLCJpbmRleE9mIiwidGFnU2V0UmVkdWNlciIsInRhZ3MiLCJpc0FycmF5Iiwic2VydmVyc01hdGNoaW5nVGFnc2V0IiwibWF0Y2hlZCIsImxvdyIsIm1pbiIsInJvdW5kVHJpcFRpbWUiLCJNYXRoIiwiaGlnaCIsImxvY2FsVGhyZXNob2xkTVMiLCJSU1ByaW1hcnkiLCJzZWNvbmRhcnlGaWx0ZXIiLCJSU1NlY29uZGFyeSIsIm5lYXJlc3RGaWx0ZXIiLCJrbm93bkZpbHRlciIsImxvYWRCYWxhbmNlckZpbHRlciIsIkxvYWRCYWxhbmNlciIsImlzVmFsaWQiLCJjb21tb25XaXJlVmVyc2lvbiIsIm1pbldpcmVWZXJzaW9uIiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCJMb2FkQmFsYW5jZWQiLCJTaW5nbGUiLCJTaGFyZGVkIiwibW9kZSIsIlBSSU1BUlkiLCJQUklNQVJZX1BSRUZFUlJFRCIsIk5FQVJFU1QiLCJzZWxlY3RlZFNlcnZlcnMiLCJTRUNPTkRBUllfUFJFRkVSUkVEIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/server_selection.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/srv_polling.js":
/*!******************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/srv_polling.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.SrvPoller = exports.SrvPollingEvent = void 0;\nconst dns = __webpack_require__(/*! dns */ \"dns\");\nconst timers_1 = __webpack_require__(/*! timers */ \"timers\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\n/**\n * @internal\n * @category Event\n */ class SrvPollingEvent {\n    constructor(srvRecords){\n        this.srvRecords = srvRecords;\n    }\n    hostnames() {\n        return new Set(this.srvRecords.map((r)=>utils_1.HostAddress.fromSrvRecord(r).toString()));\n    }\n}\nexports.SrvPollingEvent = SrvPollingEvent;\n/** @internal */ class SrvPoller extends mongo_types_1.TypedEventEmitter {\n    constructor(options){\n        super();\n        if (!options || !options.srvHost) {\n            throw new error_1.MongoRuntimeError(\"Options for SrvPoller must exist and include srvHost\");\n        }\n        this.srvHost = options.srvHost;\n        this.srvMaxHosts = options.srvMaxHosts ?? 0;\n        this.srvServiceName = options.srvServiceName ?? \"mongodb\";\n        this.rescanSrvIntervalMS = 60000;\n        this.heartbeatFrequencyMS = options.heartbeatFrequencyMS ?? 10000;\n        this.haMode = false;\n        this.generation = 0;\n        this._timeout = undefined;\n    }\n    get srvAddress() {\n        return `_${this.srvServiceName}._tcp.${this.srvHost}`;\n    }\n    get intervalMS() {\n        return this.haMode ? this.heartbeatFrequencyMS : this.rescanSrvIntervalMS;\n    }\n    start() {\n        if (!this._timeout) {\n            this.schedule();\n        }\n    }\n    stop() {\n        if (this._timeout) {\n            (0, timers_1.clearTimeout)(this._timeout);\n            this.generation += 1;\n            this._timeout = undefined;\n        }\n    }\n    // TODO(NODE-4994): implement new logging logic for SrvPoller failures\n    schedule() {\n        if (this._timeout) {\n            (0, timers_1.clearTimeout)(this._timeout);\n        }\n        this._timeout = (0, timers_1.setTimeout)(()=>{\n            this._poll().catch(()=>null);\n        }, this.intervalMS);\n    }\n    success(srvRecords) {\n        this.haMode = false;\n        this.schedule();\n        this.emit(SrvPoller.SRV_RECORD_DISCOVERY, new SrvPollingEvent(srvRecords));\n    }\n    failure() {\n        this.haMode = true;\n        this.schedule();\n    }\n    async _poll() {\n        const generation = this.generation;\n        let srvRecords;\n        try {\n            srvRecords = await dns.promises.resolveSrv(this.srvAddress);\n        } catch (dnsError) {\n            this.failure();\n            return;\n        }\n        if (generation !== this.generation) {\n            return;\n        }\n        const finalAddresses = [];\n        for (const record of srvRecords){\n            if ((0, utils_1.matchesParentDomain)(record.name, this.srvHost)) {\n                finalAddresses.push(record);\n            }\n        }\n        if (!finalAddresses.length) {\n            this.failure();\n            return;\n        }\n        this.success(finalAddresses);\n    }\n}\n/** @event */ SrvPoller.SRV_RECORD_DISCOVERY = \"srvRecordDiscovery\";\nexports.SrvPoller = SrvPoller; //# sourceMappingURL=srv_polling.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9zcnZfcG9sbGluZy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsaUJBQWlCLEdBQUdBLHVCQUF1QixHQUFHLEtBQUs7QUFDbkQsTUFBTUksTUFBTUMsbUJBQU9BLENBQUMsZ0JBQUs7QUFDekIsTUFBTUMsV0FBV0QsbUJBQU9BLENBQUMsc0JBQVE7QUFDakMsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUcsZ0JBQWdCSCxtQkFBT0EsQ0FBQyx1RUFBZ0I7QUFDOUMsTUFBTUksVUFBVUosbUJBQU9BLENBQUMsMkRBQVU7QUFDbEM7OztDQUdDLEdBQ0QsTUFBTUY7SUFDRk8sWUFBWUMsVUFBVSxDQUFFO1FBQ3BCLElBQUksQ0FBQ0EsVUFBVSxHQUFHQTtJQUN0QjtJQUNBQyxZQUFZO1FBQ1IsT0FBTyxJQUFJQyxJQUFJLElBQUksQ0FBQ0YsVUFBVSxDQUFDRyxHQUFHLENBQUNDLENBQUFBLElBQUtOLFFBQVFPLFdBQVcsQ0FBQ0MsYUFBYSxDQUFDRixHQUFHRyxRQUFRO0lBQ3pGO0FBQ0o7QUFDQWxCLHVCQUF1QixHQUFHRztBQUMxQixjQUFjLEdBQ2QsTUFBTUQsa0JBQWtCTSxjQUFjVyxpQkFBaUI7SUFDbkRULFlBQVlVLE9BQU8sQ0FBRTtRQUNqQixLQUFLO1FBQ0wsSUFBSSxDQUFDQSxXQUFXLENBQUNBLFFBQVFDLE9BQU8sRUFBRTtZQUM5QixNQUFNLElBQUlkLFFBQVFlLGlCQUFpQixDQUFDO1FBQ3hDO1FBQ0EsSUFBSSxDQUFDRCxPQUFPLEdBQUdELFFBQVFDLE9BQU87UUFDOUIsSUFBSSxDQUFDRSxXQUFXLEdBQUdILFFBQVFHLFdBQVcsSUFBSTtRQUMxQyxJQUFJLENBQUNDLGNBQWMsR0FBR0osUUFBUUksY0FBYyxJQUFJO1FBQ2hELElBQUksQ0FBQ0MsbUJBQW1CLEdBQUc7UUFDM0IsSUFBSSxDQUFDQyxvQkFBb0IsR0FBR04sUUFBUU0sb0JBQW9CLElBQUk7UUFDNUQsSUFBSSxDQUFDQyxNQUFNLEdBQUc7UUFDZCxJQUFJLENBQUNDLFVBQVUsR0FBRztRQUNsQixJQUFJLENBQUNDLFFBQVEsR0FBR0M7SUFDcEI7SUFDQSxJQUFJQyxhQUFhO1FBQ2IsT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUNQLGNBQWMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDSCxPQUFPLENBQUMsQ0FBQztJQUN6RDtJQUNBLElBQUlXLGFBQWE7UUFDYixPQUFPLElBQUksQ0FBQ0wsTUFBTSxHQUFHLElBQUksQ0FBQ0Qsb0JBQW9CLEdBQUcsSUFBSSxDQUFDRCxtQkFBbUI7SUFDN0U7SUFDQVEsUUFBUTtRQUNKLElBQUksQ0FBQyxJQUFJLENBQUNKLFFBQVEsRUFBRTtZQUNoQixJQUFJLENBQUNLLFFBQVE7UUFDakI7SUFDSjtJQUNBQyxPQUFPO1FBQ0gsSUFBSSxJQUFJLENBQUNOLFFBQVEsRUFBRTtZQUNkLElBQUd2QixTQUFTOEIsWUFBWSxFQUFFLElBQUksQ0FBQ1AsUUFBUTtZQUN4QyxJQUFJLENBQUNELFVBQVUsSUFBSTtZQUNuQixJQUFJLENBQUNDLFFBQVEsR0FBR0M7UUFDcEI7SUFDSjtJQUNBLHNFQUFzRTtJQUN0RUksV0FBVztRQUNQLElBQUksSUFBSSxDQUFDTCxRQUFRLEVBQUU7WUFDZCxJQUFHdkIsU0FBUzhCLFlBQVksRUFBRSxJQUFJLENBQUNQLFFBQVE7UUFDNUM7UUFDQSxJQUFJLENBQUNBLFFBQVEsR0FBRyxDQUFDLEdBQUd2QixTQUFTK0IsVUFBVSxFQUFFO1lBQ3JDLElBQUksQ0FBQ0MsS0FBSyxHQUFHQyxLQUFLLENBQUMsSUFBTTtRQUM3QixHQUFHLElBQUksQ0FBQ1AsVUFBVTtJQUN0QjtJQUNBUSxRQUFRN0IsVUFBVSxFQUFFO1FBQ2hCLElBQUksQ0FBQ2dCLE1BQU0sR0FBRztRQUNkLElBQUksQ0FBQ08sUUFBUTtRQUNiLElBQUksQ0FBQ08sSUFBSSxDQUFDdkMsVUFBVXdDLG9CQUFvQixFQUFFLElBQUl2QyxnQkFBZ0JRO0lBQ2xFO0lBQ0FnQyxVQUFVO1FBQ04sSUFBSSxDQUFDaEIsTUFBTSxHQUFHO1FBQ2QsSUFBSSxDQUFDTyxRQUFRO0lBQ2pCO0lBQ0EsTUFBTUksUUFBUTtRQUNWLE1BQU1WLGFBQWEsSUFBSSxDQUFDQSxVQUFVO1FBQ2xDLElBQUlqQjtRQUNKLElBQUk7WUFDQUEsYUFBYSxNQUFNUCxJQUFJd0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsSUFBSSxDQUFDZCxVQUFVO1FBQzlELEVBQ0EsT0FBT2UsVUFBVTtZQUNiLElBQUksQ0FBQ0gsT0FBTztZQUNaO1FBQ0o7UUFDQSxJQUFJZixlQUFlLElBQUksQ0FBQ0EsVUFBVSxFQUFFO1lBQ2hDO1FBQ0o7UUFDQSxNQUFNbUIsaUJBQWlCLEVBQUU7UUFDekIsS0FBSyxNQUFNQyxVQUFVckMsV0FBWTtZQUM3QixJQUFJLENBQUMsR0FBR0YsUUFBUXdDLG1CQUFtQixFQUFFRCxPQUFPRSxJQUFJLEVBQUUsSUFBSSxDQUFDN0IsT0FBTyxHQUFHO2dCQUM3RDBCLGVBQWVJLElBQUksQ0FBQ0g7WUFDeEI7UUFDSjtRQUNBLElBQUksQ0FBQ0QsZUFBZUssTUFBTSxFQUFFO1lBQ3hCLElBQUksQ0FBQ1QsT0FBTztZQUNaO1FBQ0o7UUFDQSxJQUFJLENBQUNILE9BQU8sQ0FBQ087SUFDakI7QUFDSjtBQUNBLFdBQVcsR0FDWDdDLFVBQVV3QyxvQkFBb0IsR0FBRztBQUNqQzFDLGlCQUFpQixHQUFHRSxXQUNwQix1Q0FBdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9zcnZfcG9sbGluZy5qcz84MDNlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5TcnZQb2xsZXIgPSBleHBvcnRzLlNydlBvbGxpbmdFdmVudCA9IHZvaWQgMDtcbmNvbnN0IGRucyA9IHJlcXVpcmUoXCJkbnNcIik7XG5jb25zdCB0aW1lcnNfMSA9IHJlcXVpcmUoXCJ0aW1lcnNcIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgbW9uZ29fdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi9tb25nb190eXBlc1wiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG4vKipcbiAqIEBpbnRlcm5hbFxuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIFNydlBvbGxpbmdFdmVudCB7XG4gICAgY29uc3RydWN0b3Ioc3J2UmVjb3Jkcykge1xuICAgICAgICB0aGlzLnNydlJlY29yZHMgPSBzcnZSZWNvcmRzO1xuICAgIH1cbiAgICBob3N0bmFtZXMoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2V0KHRoaXMuc3J2UmVjb3Jkcy5tYXAociA9PiB1dGlsc18xLkhvc3RBZGRyZXNzLmZyb21TcnZSZWNvcmQocikudG9TdHJpbmcoKSkpO1xuICAgIH1cbn1cbmV4cG9ydHMuU3J2UG9sbGluZ0V2ZW50ID0gU3J2UG9sbGluZ0V2ZW50O1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgU3J2UG9sbGVyIGV4dGVuZHMgbW9uZ29fdHlwZXNfMS5UeXBlZEV2ZW50RW1pdHRlciB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMuc3J2SG9zdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ09wdGlvbnMgZm9yIFNydlBvbGxlciBtdXN0IGV4aXN0IGFuZCBpbmNsdWRlIHNydkhvc3QnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNydkhvc3QgPSBvcHRpb25zLnNydkhvc3Q7XG4gICAgICAgIHRoaXMuc3J2TWF4SG9zdHMgPSBvcHRpb25zLnNydk1heEhvc3RzID8/IDA7XG4gICAgICAgIHRoaXMuc3J2U2VydmljZU5hbWUgPSBvcHRpb25zLnNydlNlcnZpY2VOYW1lID8/ICdtb25nb2RiJztcbiAgICAgICAgdGhpcy5yZXNjYW5TcnZJbnRlcnZhbE1TID0gNjAwMDA7XG4gICAgICAgIHRoaXMuaGVhcnRiZWF0RnJlcXVlbmN5TVMgPSBvcHRpb25zLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TID8/IDEwMDAwO1xuICAgICAgICB0aGlzLmhhTW9kZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdlbmVyYXRpb24gPSAwO1xuICAgICAgICB0aGlzLl90aW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBnZXQgc3J2QWRkcmVzcygpIHtcbiAgICAgICAgcmV0dXJuIGBfJHt0aGlzLnNydlNlcnZpY2VOYW1lfS5fdGNwLiR7dGhpcy5zcnZIb3N0fWA7XG4gICAgfVxuICAgIGdldCBpbnRlcnZhbE1TKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYU1vZGUgPyB0aGlzLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TIDogdGhpcy5yZXNjYW5TcnZJbnRlcnZhbE1TO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl90aW1lb3V0KSB7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RpbWVvdXQpIHtcbiAgICAgICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKHRoaXMuX3RpbWVvdXQpO1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0aW9uICs9IDE7XG4gICAgICAgICAgICB0aGlzLl90aW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFRPRE8oTk9ERS00OTk0KTogaW1wbGVtZW50IG5ldyBsb2dnaW5nIGxvZ2ljIGZvciBTcnZQb2xsZXIgZmFpbHVyZXNcbiAgICBzY2hlZHVsZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RpbWVvdXQpIHtcbiAgICAgICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKHRoaXMuX3RpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RpbWVvdXQgPSAoMCwgdGltZXJzXzEuc2V0VGltZW91dCkoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcG9sbCgpLmNhdGNoKCgpID0+IG51bGwpO1xuICAgICAgICB9LCB0aGlzLmludGVydmFsTVMpO1xuICAgIH1cbiAgICBzdWNjZXNzKHNydlJlY29yZHMpIHtcbiAgICAgICAgdGhpcy5oYU1vZGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZSgpO1xuICAgICAgICB0aGlzLmVtaXQoU3J2UG9sbGVyLlNSVl9SRUNPUkRfRElTQ09WRVJZLCBuZXcgU3J2UG9sbGluZ0V2ZW50KHNydlJlY29yZHMpKTtcbiAgICB9XG4gICAgZmFpbHVyZSgpIHtcbiAgICAgICAgdGhpcy5oYU1vZGUgPSB0cnVlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlKCk7XG4gICAgfVxuICAgIGFzeW5jIF9wb2xsKCkge1xuICAgICAgICBjb25zdCBnZW5lcmF0aW9uID0gdGhpcy5nZW5lcmF0aW9uO1xuICAgICAgICBsZXQgc3J2UmVjb3JkcztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNydlJlY29yZHMgPSBhd2FpdCBkbnMucHJvbWlzZXMucmVzb2x2ZVNydih0aGlzLnNydkFkZHJlc3MpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChkbnNFcnJvcikge1xuICAgICAgICAgICAgdGhpcy5mYWlsdXJlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdlbmVyYXRpb24gIT09IHRoaXMuZ2VuZXJhdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbmFsQWRkcmVzc2VzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcmVjb3JkIG9mIHNydlJlY29yZHMpIHtcbiAgICAgICAgICAgIGlmICgoMCwgdXRpbHNfMS5tYXRjaGVzUGFyZW50RG9tYWluKShyZWNvcmQubmFtZSwgdGhpcy5zcnZIb3N0KSkge1xuICAgICAgICAgICAgICAgIGZpbmFsQWRkcmVzc2VzLnB1c2gocmVjb3JkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZpbmFsQWRkcmVzc2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5mYWlsdXJlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdWNjZXNzKGZpbmFsQWRkcmVzc2VzKTtcbiAgICB9XG59XG4vKiogQGV2ZW50ICovXG5TcnZQb2xsZXIuU1JWX1JFQ09SRF9ESVNDT1ZFUlkgPSAnc3J2UmVjb3JkRGlzY292ZXJ5JztcbmV4cG9ydHMuU3J2UG9sbGVyID0gU3J2UG9sbGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3J2X3BvbGxpbmcuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiU3J2UG9sbGVyIiwiU3J2UG9sbGluZ0V2ZW50IiwiZG5zIiwicmVxdWlyZSIsInRpbWVyc18xIiwiZXJyb3JfMSIsIm1vbmdvX3R5cGVzXzEiLCJ1dGlsc18xIiwiY29uc3RydWN0b3IiLCJzcnZSZWNvcmRzIiwiaG9zdG5hbWVzIiwiU2V0IiwibWFwIiwiciIsIkhvc3RBZGRyZXNzIiwiZnJvbVNydlJlY29yZCIsInRvU3RyaW5nIiwiVHlwZWRFdmVudEVtaXR0ZXIiLCJvcHRpb25zIiwic3J2SG9zdCIsIk1vbmdvUnVudGltZUVycm9yIiwic3J2TWF4SG9zdHMiLCJzcnZTZXJ2aWNlTmFtZSIsInJlc2NhblNydkludGVydmFsTVMiLCJoZWFydGJlYXRGcmVxdWVuY3lNUyIsImhhTW9kZSIsImdlbmVyYXRpb24iLCJfdGltZW91dCIsInVuZGVmaW5lZCIsInNydkFkZHJlc3MiLCJpbnRlcnZhbE1TIiwic3RhcnQiLCJzY2hlZHVsZSIsInN0b3AiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiX3BvbGwiLCJjYXRjaCIsInN1Y2Nlc3MiLCJlbWl0IiwiU1JWX1JFQ09SRF9ESVNDT1ZFUlkiLCJmYWlsdXJlIiwicHJvbWlzZXMiLCJyZXNvbHZlU3J2IiwiZG5zRXJyb3IiLCJmaW5hbEFkZHJlc3NlcyIsInJlY29yZCIsIm1hdGNoZXNQYXJlbnREb21haW4iLCJuYW1lIiwicHVzaCIsImxlbmd0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/srv_polling.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/topology.js":
/*!***************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/topology.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ServerCapabilities = exports.Topology = void 0;\nconst timers_1 = __webpack_require__(/*! timers */ \"timers\");\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst connection_string_1 = __webpack_require__(/*! ../connection_string */ \"(ssr)/./node_modules/mongodb/lib/connection_string.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst events_1 = __webpack_require__(/*! ./events */ \"(ssr)/./node_modules/mongodb/lib/sdam/events.js\");\nconst server_1 = __webpack_require__(/*! ./server */ \"(ssr)/./node_modules/mongodb/lib/sdam/server.js\");\nconst server_description_1 = __webpack_require__(/*! ./server_description */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_description.js\");\nconst server_selection_1 = __webpack_require__(/*! ./server_selection */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_selection.js\");\nconst srv_polling_1 = __webpack_require__(/*! ./srv_polling */ \"(ssr)/./node_modules/mongodb/lib/sdam/srv_polling.js\");\nconst topology_description_1 = __webpack_require__(/*! ./topology_description */ \"(ssr)/./node_modules/mongodb/lib/sdam/topology_description.js\");\n// Global state\nlet globalTopologyCounter = 0;\nconst stateTransition = (0, utils_1.makeStateMachine)({\n    [common_1.STATE_CLOSED]: [\n        common_1.STATE_CLOSED,\n        common_1.STATE_CONNECTING\n    ],\n    [common_1.STATE_CONNECTING]: [\n        common_1.STATE_CONNECTING,\n        common_1.STATE_CLOSING,\n        common_1.STATE_CONNECTED,\n        common_1.STATE_CLOSED\n    ],\n    [common_1.STATE_CONNECTED]: [\n        common_1.STATE_CONNECTED,\n        common_1.STATE_CLOSING,\n        common_1.STATE_CLOSED\n    ],\n    [common_1.STATE_CLOSING]: [\n        common_1.STATE_CLOSING,\n        common_1.STATE_CLOSED\n    ]\n});\n/** @internal */ const kCancelled = Symbol(\"cancelled\");\n/** @internal */ const kWaitQueue = Symbol(\"waitQueue\");\n/**\n * A container of server instances representing a connection to a MongoDB topology.\n * @internal\n */ class Topology extends mongo_types_1.TypedEventEmitter {\n    /**\n     * @param seedlist - a list of HostAddress instances to connect to\n     */ constructor(client, seeds, options){\n        super();\n        this.client = client;\n        this.selectServerAsync = (0, util_1.promisify)((selector, options, callback)=>this.selectServer(selector, options, callback));\n        // Options should only be undefined in tests, MongoClient will always have defined options\n        options = options ?? {\n            hosts: [\n                utils_1.HostAddress.fromString(\"localhost:27017\")\n            ],\n            ...Object.fromEntries(connection_string_1.DEFAULT_OPTIONS.entries()),\n            ...Object.fromEntries(connection_string_1.FEATURE_FLAGS.entries())\n        };\n        if (typeof seeds === \"string\") {\n            seeds = [\n                utils_1.HostAddress.fromString(seeds)\n            ];\n        } else if (!Array.isArray(seeds)) {\n            seeds = [\n                seeds\n            ];\n        }\n        const seedlist = [];\n        for (const seed of seeds){\n            if (typeof seed === \"string\") {\n                seedlist.push(utils_1.HostAddress.fromString(seed));\n            } else if (seed instanceof utils_1.HostAddress) {\n                seedlist.push(seed);\n            } else {\n                // FIXME(NODE-3483): May need to be a MongoParseError\n                throw new error_1.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(seed)}`);\n            }\n        }\n        const topologyType = topologyTypeFromOptions(options);\n        const topologyId = globalTopologyCounter++;\n        const selectedHosts = options.srvMaxHosts == null || options.srvMaxHosts === 0 || options.srvMaxHosts >= seedlist.length ? seedlist : (0, utils_1.shuffle)(seedlist, options.srvMaxHosts);\n        const serverDescriptions = new Map();\n        for (const hostAddress of selectedHosts){\n            serverDescriptions.set(hostAddress.toString(), new server_description_1.ServerDescription(hostAddress));\n        }\n        this[kWaitQueue] = new utils_1.List();\n        this.s = {\n            // the id of this topology\n            id: topologyId,\n            // passed in options\n            options,\n            // initial seedlist of servers to connect to\n            seedlist,\n            // initial state\n            state: common_1.STATE_CLOSED,\n            // the topology description\n            description: new topology_description_1.TopologyDescription(topologyType, serverDescriptions, options.replicaSet, undefined, undefined, undefined, options),\n            serverSelectionTimeoutMS: options.serverSelectionTimeoutMS,\n            heartbeatFrequencyMS: options.heartbeatFrequencyMS,\n            minHeartbeatFrequencyMS: options.minHeartbeatFrequencyMS,\n            // a map of server instances to normalized addresses\n            servers: new Map(),\n            credentials: options?.credentials,\n            clusterTime: undefined,\n            // timer management\n            connectionTimers: new Set(),\n            detectShardedTopology: (ev)=>this.detectShardedTopology(ev),\n            detectSrvRecords: (ev)=>this.detectSrvRecords(ev)\n        };\n        if (options.srvHost && !options.loadBalanced) {\n            this.s.srvPoller = options.srvPoller ?? new srv_polling_1.SrvPoller({\n                heartbeatFrequencyMS: this.s.heartbeatFrequencyMS,\n                srvHost: options.srvHost,\n                srvMaxHosts: options.srvMaxHosts,\n                srvServiceName: options.srvServiceName\n            });\n            this.on(Topology.TOPOLOGY_DESCRIPTION_CHANGED, this.s.detectShardedTopology);\n        }\n    }\n    detectShardedTopology(event) {\n        const previousType = event.previousDescription.type;\n        const newType = event.newDescription.type;\n        const transitionToSharded = previousType !== common_1.TopologyType.Sharded && newType === common_1.TopologyType.Sharded;\n        const srvListeners = this.s.srvPoller?.listeners(srv_polling_1.SrvPoller.SRV_RECORD_DISCOVERY);\n        const listeningToSrvPolling = !!srvListeners?.includes(this.s.detectSrvRecords);\n        if (transitionToSharded && !listeningToSrvPolling) {\n            this.s.srvPoller?.on(srv_polling_1.SrvPoller.SRV_RECORD_DISCOVERY, this.s.detectSrvRecords);\n            this.s.srvPoller?.start();\n        }\n    }\n    detectSrvRecords(ev) {\n        const previousTopologyDescription = this.s.description;\n        this.s.description = this.s.description.updateFromSrvPollingEvent(ev, this.s.options.srvMaxHosts);\n        if (this.s.description === previousTopologyDescription) {\n            // Nothing changed, so return\n            return;\n        }\n        updateServers(this);\n        this.emit(Topology.TOPOLOGY_DESCRIPTION_CHANGED, new events_1.TopologyDescriptionChangedEvent(this.s.id, previousTopologyDescription, this.s.description));\n    }\n    /**\n     * @returns A `TopologyDescription` for this topology\n     */ get description() {\n        return this.s.description;\n    }\n    get loadBalanced() {\n        return this.s.options.loadBalanced;\n    }\n    get capabilities() {\n        return new ServerCapabilities(this.lastHello());\n    }\n    connect(options, callback) {\n        if (typeof options === \"function\") callback = options, options = {};\n        options = options ?? {};\n        if (this.s.state === common_1.STATE_CONNECTED) {\n            if (typeof callback === \"function\") {\n                callback();\n            }\n            return;\n        }\n        stateTransition(this, common_1.STATE_CONNECTING);\n        // emit SDAM monitoring events\n        this.emit(Topology.TOPOLOGY_OPENING, new events_1.TopologyOpeningEvent(this.s.id));\n        // emit an event for the topology change\n        this.emit(Topology.TOPOLOGY_DESCRIPTION_CHANGED, new events_1.TopologyDescriptionChangedEvent(this.s.id, new topology_description_1.TopologyDescription(common_1.TopologyType.Unknown), this.s.description));\n        // connect all known servers, then attempt server selection to connect\n        const serverDescriptions = Array.from(this.s.description.servers.values());\n        this.s.servers = new Map(serverDescriptions.map((serverDescription)=>[\n                serverDescription.address,\n                createAndConnectServer(this, serverDescription)\n            ]));\n        // In load balancer mode we need to fake a server description getting\n        // emitted from the monitor, since the monitor doesn't exist.\n        if (this.s.options.loadBalanced) {\n            for (const description of serverDescriptions){\n                const newDescription = new server_description_1.ServerDescription(description.hostAddress, undefined, {\n                    loadBalanced: this.s.options.loadBalanced\n                });\n                this.serverUpdateHandler(newDescription);\n            }\n        }\n        const exitWithError = (error)=>callback ? callback(error) : this.emit(Topology.ERROR, error);\n        const readPreference = options.readPreference ?? read_preference_1.ReadPreference.primary;\n        this.selectServer((0, server_selection_1.readPreferenceServerSelector)(readPreference), options, (err, server)=>{\n            if (err) {\n                return this.close({\n                    force: false\n                }, ()=>exitWithError(err));\n            }\n            // TODO: NODE-2471\n            const skipPingOnConnect = this.s.options[Symbol.for(\"@@mdb.skipPingOnConnect\")] === true;\n            if (!skipPingOnConnect && server && this.s.credentials) {\n                server.command((0, utils_1.ns)(\"admin.$cmd\"), {\n                    ping: 1\n                }, {}, (err)=>{\n                    if (err) {\n                        return exitWithError(err);\n                    }\n                    stateTransition(this, common_1.STATE_CONNECTED);\n                    this.emit(Topology.OPEN, this);\n                    this.emit(Topology.CONNECT, this);\n                    callback?.(undefined, this);\n                });\n                return;\n            }\n            stateTransition(this, common_1.STATE_CONNECTED);\n            this.emit(Topology.OPEN, this);\n            this.emit(Topology.CONNECT, this);\n            callback?.(undefined, this);\n        });\n    }\n    close(options, callback) {\n        options = options ?? {\n            force: false\n        };\n        if (this.s.state === common_1.STATE_CLOSED || this.s.state === common_1.STATE_CLOSING) {\n            return callback?.();\n        }\n        const destroyedServers = Array.from(this.s.servers.values(), (server)=>{\n            return (0, util_1.promisify)(destroyServer)(server, this, {\n                force: !!options?.force\n            });\n        });\n        Promise.all(destroyedServers).then(()=>{\n            this.s.servers.clear();\n            stateTransition(this, common_1.STATE_CLOSING);\n            drainWaitQueue(this[kWaitQueue], new error_1.MongoTopologyClosedError());\n            (0, common_1.drainTimerQueue)(this.s.connectionTimers);\n            if (this.s.srvPoller) {\n                this.s.srvPoller.stop();\n                this.s.srvPoller.removeListener(srv_polling_1.SrvPoller.SRV_RECORD_DISCOVERY, this.s.detectSrvRecords);\n            }\n            this.removeListener(Topology.TOPOLOGY_DESCRIPTION_CHANGED, this.s.detectShardedTopology);\n            stateTransition(this, common_1.STATE_CLOSED);\n            // emit an event for close\n            this.emit(Topology.TOPOLOGY_CLOSED, new events_1.TopologyClosedEvent(this.s.id));\n        }).finally(()=>callback?.());\n    }\n    /**\n     * Selects a server according to the selection predicate provided\n     *\n     * @param selector - An optional selector to select servers by, defaults to a random selection within a latency window\n     * @param options - Optional settings related to server selection\n     * @param callback - The callback used to indicate success or failure\n     * @returns An instance of a `Server` meeting the criteria of the predicate provided\n     */ selectServer(selector, options, callback) {\n        let serverSelector;\n        if (typeof selector !== \"function\") {\n            if (typeof selector === \"string\") {\n                serverSelector = (0, server_selection_1.readPreferenceServerSelector)(read_preference_1.ReadPreference.fromString(selector));\n            } else {\n                let readPreference;\n                if (selector instanceof read_preference_1.ReadPreference) {\n                    readPreference = selector;\n                } else {\n                    read_preference_1.ReadPreference.translate(options);\n                    readPreference = options.readPreference || read_preference_1.ReadPreference.primary;\n                }\n                serverSelector = (0, server_selection_1.readPreferenceServerSelector)(readPreference);\n            }\n        } else {\n            serverSelector = selector;\n        }\n        options = Object.assign({}, {\n            serverSelectionTimeoutMS: this.s.serverSelectionTimeoutMS\n        }, options);\n        const isSharded = this.description.type === common_1.TopologyType.Sharded;\n        const session = options.session;\n        const transaction = session && session.transaction;\n        if (isSharded && transaction && transaction.server) {\n            callback(undefined, transaction.server);\n            return;\n        }\n        const waitQueueMember = {\n            serverSelector,\n            transaction,\n            callback\n        };\n        const serverSelectionTimeoutMS = options.serverSelectionTimeoutMS;\n        if (serverSelectionTimeoutMS) {\n            waitQueueMember.timer = (0, timers_1.setTimeout)(()=>{\n                waitQueueMember[kCancelled] = true;\n                waitQueueMember.timer = undefined;\n                const timeoutError = new error_1.MongoServerSelectionError(`Server selection timed out after ${serverSelectionTimeoutMS} ms`, this.description);\n                waitQueueMember.callback(timeoutError);\n            }, serverSelectionTimeoutMS);\n        }\n        this[kWaitQueue].push(waitQueueMember);\n        processWaitQueue(this);\n    }\n    /**\n     * Update the internal TopologyDescription with a ServerDescription\n     *\n     * @param serverDescription - The server to update in the internal list of server descriptions\n     */ serverUpdateHandler(serverDescription) {\n        if (!this.s.description.hasServer(serverDescription.address)) {\n            return;\n        }\n        // ignore this server update if its from an outdated topologyVersion\n        if (isStaleServerDescription(this.s.description, serverDescription)) {\n            return;\n        }\n        // these will be used for monitoring events later\n        const previousTopologyDescription = this.s.description;\n        const previousServerDescription = this.s.description.servers.get(serverDescription.address);\n        if (!previousServerDescription) {\n            return;\n        }\n        // Driver Sessions Spec: \"Whenever a driver receives a cluster time from\n        // a server it MUST compare it to the current highest seen cluster time\n        // for the deployment. If the new cluster time is higher than the\n        // highest seen cluster time it MUST become the new highest seen cluster\n        // time. Two cluster times are compared using only the BsonTimestamp\n        // value of the clusterTime embedded field.\"\n        const clusterTime = serverDescription.$clusterTime;\n        if (clusterTime) {\n            (0, common_1._advanceClusterTime)(this, clusterTime);\n        }\n        // If we already know all the information contained in this updated description, then\n        // we don't need to emit SDAM events, but still need to update the description, in order\n        // to keep client-tracked attributes like last update time and round trip time up to date\n        const equalDescriptions = previousServerDescription && previousServerDescription.equals(serverDescription);\n        // first update the TopologyDescription\n        this.s.description = this.s.description.update(serverDescription);\n        if (this.s.description.compatibilityError) {\n            this.emit(Topology.ERROR, new error_1.MongoCompatibilityError(this.s.description.compatibilityError));\n            return;\n        }\n        // emit monitoring events for this change\n        if (!equalDescriptions) {\n            const newDescription = this.s.description.servers.get(serverDescription.address);\n            if (newDescription) {\n                this.emit(Topology.SERVER_DESCRIPTION_CHANGED, new events_1.ServerDescriptionChangedEvent(this.s.id, serverDescription.address, previousServerDescription, newDescription));\n            }\n        }\n        // update server list from updated descriptions\n        updateServers(this, serverDescription);\n        // attempt to resolve any outstanding server selection attempts\n        if (this[kWaitQueue].length > 0) {\n            processWaitQueue(this);\n        }\n        if (!equalDescriptions) {\n            this.emit(Topology.TOPOLOGY_DESCRIPTION_CHANGED, new events_1.TopologyDescriptionChangedEvent(this.s.id, previousTopologyDescription, this.s.description));\n        }\n    }\n    auth(credentials, callback) {\n        if (typeof credentials === \"function\") callback = credentials, credentials = undefined;\n        if (typeof callback === \"function\") callback(undefined, true);\n    }\n    get clientMetadata() {\n        return this.s.options.metadata;\n    }\n    isConnected() {\n        return this.s.state === common_1.STATE_CONNECTED;\n    }\n    isDestroyed() {\n        return this.s.state === common_1.STATE_CLOSED;\n    }\n    // NOTE: There are many places in code where we explicitly check the last hello\n    //       to do feature support detection. This should be done any other way, but for\n    //       now we will just return the first hello seen, which should suffice.\n    lastHello() {\n        const serverDescriptions = Array.from(this.description.servers.values());\n        if (serverDescriptions.length === 0) return {};\n        const sd = serverDescriptions.filter((sd)=>sd.type !== common_1.ServerType.Unknown)[0];\n        const result = sd || {\n            maxWireVersion: this.description.commonWireVersion\n        };\n        return result;\n    }\n    get commonWireVersion() {\n        return this.description.commonWireVersion;\n    }\n    get logicalSessionTimeoutMinutes() {\n        return this.description.logicalSessionTimeoutMinutes;\n    }\n    get clusterTime() {\n        return this.s.clusterTime;\n    }\n    set clusterTime(clusterTime) {\n        this.s.clusterTime = clusterTime;\n    }\n}\n/** @event */ Topology.SERVER_OPENING = constants_1.SERVER_OPENING;\n/** @event */ Topology.SERVER_CLOSED = constants_1.SERVER_CLOSED;\n/** @event */ Topology.SERVER_DESCRIPTION_CHANGED = constants_1.SERVER_DESCRIPTION_CHANGED;\n/** @event */ Topology.TOPOLOGY_OPENING = constants_1.TOPOLOGY_OPENING;\n/** @event */ Topology.TOPOLOGY_CLOSED = constants_1.TOPOLOGY_CLOSED;\n/** @event */ Topology.TOPOLOGY_DESCRIPTION_CHANGED = constants_1.TOPOLOGY_DESCRIPTION_CHANGED;\n/** @event */ Topology.ERROR = constants_1.ERROR;\n/** @event */ Topology.OPEN = constants_1.OPEN;\n/** @event */ Topology.CONNECT = constants_1.CONNECT;\n/** @event */ Topology.CLOSE = constants_1.CLOSE;\n/** @event */ Topology.TIMEOUT = constants_1.TIMEOUT;\nexports.Topology = Topology;\n/** Destroys a server, and removes all event listeners from the instance */ function destroyServer(server, topology, options, callback) {\n    options = options ?? {\n        force: false\n    };\n    for (const event of constants_1.LOCAL_SERVER_EVENTS){\n        server.removeAllListeners(event);\n    }\n    server.destroy(options, ()=>{\n        topology.emit(Topology.SERVER_CLOSED, new events_1.ServerClosedEvent(topology.s.id, server.description.address));\n        for (const event of constants_1.SERVER_RELAY_EVENTS){\n            server.removeAllListeners(event);\n        }\n        if (typeof callback === \"function\") {\n            callback();\n        }\n    });\n}\n/** Predicts the TopologyType from options */ function topologyTypeFromOptions(options) {\n    if (options?.directConnection) {\n        return common_1.TopologyType.Single;\n    }\n    if (options?.replicaSet) {\n        return common_1.TopologyType.ReplicaSetNoPrimary;\n    }\n    if (options?.loadBalanced) {\n        return common_1.TopologyType.LoadBalanced;\n    }\n    return common_1.TopologyType.Unknown;\n}\n/**\n * Creates new server instances and attempts to connect them\n *\n * @param topology - The topology that this server belongs to\n * @param serverDescription - The description for the server to initialize and connect to\n */ function createAndConnectServer(topology, serverDescription) {\n    topology.emit(Topology.SERVER_OPENING, new events_1.ServerOpeningEvent(topology.s.id, serverDescription.address));\n    const server = new server_1.Server(topology, serverDescription, topology.s.options);\n    for (const event of constants_1.SERVER_RELAY_EVENTS){\n        server.on(event, (e)=>topology.emit(event, e));\n    }\n    server.on(server_1.Server.DESCRIPTION_RECEIVED, (description)=>topology.serverUpdateHandler(description));\n    server.connect();\n    return server;\n}\n/**\n * @param topology - Topology to update.\n * @param incomingServerDescription - New server description.\n */ function updateServers(topology, incomingServerDescription) {\n    // update the internal server's description\n    if (incomingServerDescription && topology.s.servers.has(incomingServerDescription.address)) {\n        const server = topology.s.servers.get(incomingServerDescription.address);\n        if (server) {\n            server.s.description = incomingServerDescription;\n            if (incomingServerDescription.error instanceof error_1.MongoError && incomingServerDescription.error.hasErrorLabel(error_1.MongoErrorLabel.ResetPool)) {\n                const interruptInUseConnections = incomingServerDescription.error.hasErrorLabel(error_1.MongoErrorLabel.InterruptInUseConnections);\n                server.pool.clear({\n                    interruptInUseConnections\n                });\n            } else if (incomingServerDescription.error == null) {\n                const newTopologyType = topology.s.description.type;\n                const shouldMarkPoolReady = incomingServerDescription.isDataBearing || incomingServerDescription.type !== common_1.ServerType.Unknown && newTopologyType === common_1.TopologyType.Single;\n                if (shouldMarkPoolReady) {\n                    server.pool.ready();\n                }\n            }\n        }\n    }\n    // add new servers for all descriptions we currently don't know about locally\n    for (const serverDescription of topology.description.servers.values()){\n        if (!topology.s.servers.has(serverDescription.address)) {\n            const server = createAndConnectServer(topology, serverDescription);\n            topology.s.servers.set(serverDescription.address, server);\n        }\n    }\n    // for all servers no longer known, remove their descriptions and destroy their instances\n    for (const entry of topology.s.servers){\n        const serverAddress = entry[0];\n        if (topology.description.hasServer(serverAddress)) {\n            continue;\n        }\n        if (!topology.s.servers.has(serverAddress)) {\n            continue;\n        }\n        const server = topology.s.servers.get(serverAddress);\n        topology.s.servers.delete(serverAddress);\n        // prepare server for garbage collection\n        if (server) {\n            destroyServer(server, topology);\n        }\n    }\n}\nfunction drainWaitQueue(queue, err) {\n    while(queue.length){\n        const waitQueueMember = queue.shift();\n        if (!waitQueueMember) {\n            continue;\n        }\n        if (waitQueueMember.timer) {\n            (0, timers_1.clearTimeout)(waitQueueMember.timer);\n        }\n        if (!waitQueueMember[kCancelled]) {\n            waitQueueMember.callback(err);\n        }\n    }\n}\nfunction processWaitQueue(topology) {\n    if (topology.s.state === common_1.STATE_CLOSED) {\n        drainWaitQueue(topology[kWaitQueue], new error_1.MongoTopologyClosedError());\n        return;\n    }\n    const isSharded = topology.description.type === common_1.TopologyType.Sharded;\n    const serverDescriptions = Array.from(topology.description.servers.values());\n    const membersToProcess = topology[kWaitQueue].length;\n    for(let i = 0; i < membersToProcess; ++i){\n        const waitQueueMember = topology[kWaitQueue].shift();\n        if (!waitQueueMember) {\n            continue;\n        }\n        if (waitQueueMember[kCancelled]) {\n            continue;\n        }\n        let selectedDescriptions;\n        try {\n            const serverSelector = waitQueueMember.serverSelector;\n            selectedDescriptions = serverSelector ? serverSelector(topology.description, serverDescriptions) : serverDescriptions;\n        } catch (e) {\n            if (waitQueueMember.timer) {\n                (0, timers_1.clearTimeout)(waitQueueMember.timer);\n            }\n            waitQueueMember.callback(e);\n            continue;\n        }\n        let selectedServer;\n        if (selectedDescriptions.length === 0) {\n            topology[kWaitQueue].push(waitQueueMember);\n            continue;\n        } else if (selectedDescriptions.length === 1) {\n            selectedServer = topology.s.servers.get(selectedDescriptions[0].address);\n        } else {\n            const descriptions = (0, utils_1.shuffle)(selectedDescriptions, 2);\n            const server1 = topology.s.servers.get(descriptions[0].address);\n            const server2 = topology.s.servers.get(descriptions[1].address);\n            selectedServer = server1 && server2 && server1.s.operationCount < server2.s.operationCount ? server1 : server2;\n        }\n        if (!selectedServer) {\n            waitQueueMember.callback(new error_1.MongoServerSelectionError(\"server selection returned a server description but the server was not found in the topology\", topology.description));\n            return;\n        }\n        const transaction = waitQueueMember.transaction;\n        if (isSharded && transaction && transaction.isActive && selectedServer) {\n            transaction.pinServer(selectedServer);\n        }\n        if (waitQueueMember.timer) {\n            (0, timers_1.clearTimeout)(waitQueueMember.timer);\n        }\n        waitQueueMember.callback(undefined, selectedServer);\n    }\n    if (topology[kWaitQueue].length > 0) {\n        // ensure all server monitors attempt monitoring soon\n        for (const [, server] of topology.s.servers){\n            process.nextTick(function scheduleServerCheck() {\n                return server.requestCheck();\n            });\n        }\n    }\n}\nfunction isStaleServerDescription(topologyDescription, incomingServerDescription) {\n    const currentServerDescription = topologyDescription.servers.get(incomingServerDescription.address);\n    const currentTopologyVersion = currentServerDescription?.topologyVersion;\n    return (0, server_description_1.compareTopologyVersion)(currentTopologyVersion, incomingServerDescription.topologyVersion) > 0;\n}\n/** @public */ class ServerCapabilities {\n    constructor(hello){\n        this.minWireVersion = hello.minWireVersion || 0;\n        this.maxWireVersion = hello.maxWireVersion || 0;\n    }\n    get hasAggregationCursor() {\n        return this.maxWireVersion >= 1;\n    }\n    get hasWriteCommands() {\n        return this.maxWireVersion >= 2;\n    }\n    get hasTextSearch() {\n        return this.minWireVersion >= 0;\n    }\n    get hasAuthCommands() {\n        return this.maxWireVersion >= 1;\n    }\n    get hasListCollectionsCommand() {\n        return this.maxWireVersion >= 3;\n    }\n    get hasListIndexesCommand() {\n        return this.maxWireVersion >= 3;\n    }\n    get supportsSnapshotReads() {\n        return this.maxWireVersion >= 13;\n    }\n    get commandsTakeWriteConcern() {\n        return this.maxWireVersion >= 5;\n    }\n    get commandsTakeCollation() {\n        return this.maxWireVersion >= 5;\n    }\n}\nexports.ServerCapabilities = ServerCapabilities; //# sourceMappingURL=topology.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS90b3BvbG9neS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMEJBQTBCLEdBQUdBLGdCQUFnQixHQUFHLEtBQUs7QUFDckQsTUFBTUksV0FBV0MsbUJBQU9BLENBQUMsc0JBQVE7QUFDakMsTUFBTUMsU0FBU0QsbUJBQU9BLENBQUMsa0JBQU07QUFDN0IsTUFBTUUsc0JBQXNCRixtQkFBT0EsQ0FBQyxtRkFBc0I7QUFDMUQsTUFBTUcsY0FBY0gsbUJBQU9BLENBQUMsbUVBQWM7QUFDMUMsTUFBTUksVUFBVUosbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUssZ0JBQWdCTCxtQkFBT0EsQ0FBQyx1RUFBZ0I7QUFDOUMsTUFBTU0sb0JBQW9CTixtQkFBT0EsQ0FBQywrRUFBb0I7QUFDdEQsTUFBTU8sVUFBVVAsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTVEsV0FBV1IsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsTUFBTVMsV0FBV1QsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsTUFBTVUsV0FBV1YsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsTUFBTVcsdUJBQXVCWCxtQkFBT0EsQ0FBQyx5RkFBc0I7QUFDM0QsTUFBTVkscUJBQXFCWixtQkFBT0EsQ0FBQyxxRkFBb0I7QUFDdkQsTUFBTWEsZ0JBQWdCYixtQkFBT0EsQ0FBQywyRUFBZTtBQUM3QyxNQUFNYyx5QkFBeUJkLG1CQUFPQSxDQUFDLDZGQUF3QjtBQUMvRCxlQUFlO0FBQ2YsSUFBSWUsd0JBQXdCO0FBQzVCLE1BQU1DLGtCQUFrQixDQUFDLEdBQUdULFFBQVFVLGdCQUFnQixFQUFFO0lBQ2xELENBQUNULFNBQVNVLFlBQVksQ0FBQyxFQUFFO1FBQUNWLFNBQVNVLFlBQVk7UUFBRVYsU0FBU1csZ0JBQWdCO0tBQUM7SUFDM0UsQ0FBQ1gsU0FBU1csZ0JBQWdC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QUk7SUFDbEM7SUFDQSxJQUFJcUUsd0JBQXdCO1FBQ3hCLE9BQU8sSUFBSSxDQUFDckUsY0FBYyxJQUFJO0lBQ2xDO0FBQ0o7QUFDQWpNLDBCQUEwQixHQUFHRSxvQkFDN0Isb0NBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL3NkYW0vdG9wb2xvZ3kuanM/YjMwZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU2VydmVyQ2FwYWJpbGl0aWVzID0gZXhwb3J0cy5Ub3BvbG9neSA9IHZvaWQgMDtcbmNvbnN0IHRpbWVyc18xID0gcmVxdWlyZShcInRpbWVyc1wiKTtcbmNvbnN0IHV0aWxfMSA9IHJlcXVpcmUoXCJ1dGlsXCIpO1xuY29uc3QgY29ubmVjdGlvbl9zdHJpbmdfMSA9IHJlcXVpcmUoXCIuLi9jb25uZWN0aW9uX3N0cmluZ1wiKTtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBtb25nb190eXBlc18xID0gcmVxdWlyZShcIi4uL21vbmdvX3R5cGVzXCIpO1xuY29uc3QgcmVhZF9wcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IGNvbW1vbl8xID0gcmVxdWlyZShcIi4vY29tbW9uXCIpO1xuY29uc3QgZXZlbnRzXzEgPSByZXF1aXJlKFwiLi9ldmVudHNcIik7XG5jb25zdCBzZXJ2ZXJfMSA9IHJlcXVpcmUoXCIuL3NlcnZlclwiKTtcbmNvbnN0IHNlcnZlcl9kZXNjcmlwdGlvbl8xID0gcmVxdWlyZShcIi4vc2VydmVyX2Rlc2NyaXB0aW9uXCIpO1xuY29uc3Qgc2VydmVyX3NlbGVjdGlvbl8xID0gcmVxdWlyZShcIi4vc2VydmVyX3NlbGVjdGlvblwiKTtcbmNvbnN0IHNydl9wb2xsaW5nXzEgPSByZXF1aXJlKFwiLi9zcnZfcG9sbGluZ1wiKTtcbmNvbnN0IHRvcG9sb2d5X2Rlc2NyaXB0aW9uXzEgPSByZXF1aXJlKFwiLi90b3BvbG9neV9kZXNjcmlwdGlvblwiKTtcbi8vIEdsb2JhbCBzdGF0ZVxubGV0IGdsb2JhbFRvcG9sb2d5Q291bnRlciA9IDA7XG5jb25zdCBzdGF0ZVRyYW5zaXRpb24gPSAoMCwgdXRpbHNfMS5tYWtlU3RhdGVNYWNoaW5lKSh7XG4gICAgW2NvbW1vbl8xLlNUQVRFX0NMT1NFRF06IFtjb21tb25fMS5TVEFURV9DTE9TRUQsIGNvbW1vbl8xLlNUQVRFX0NPTk5FQ1RJTkddLFxuICAgIFtjb21tb25fMS5TVEFURV9DT05ORUNUSU5HXTogW2NvbW1vbl8xLlNUQVRFX0NPTk5FQ1RJTkcsIGNvbW1vbl8xLlNUQVRFX0NMT1NJTkcsIGNvbW1vbl8xLlNUQVRFX0NPTk5FQ1RFRCwgY29tbW9uXzEuU1RBVEVfQ0xPU0VEXSxcbiAgICBbY29tbW9uXzEuU1RBVEVfQ09OTkVDVEVEXTogW2NvbW1vbl8xLlNUQVRFX0NPTk5FQ1RFRCwgY29tbW9uXzEuU1RBVEVfQ0xPU0lORywgY29tbW9uXzEuU1RBVEVfQ0xPU0VEXSxcbiAgICBbY29tbW9uXzEuU1RBVEVfQ0xPU0lOR106IFtjb21tb25fMS5TVEFURV9DTE9TSU5HLCBjb21tb25fMS5TVEFURV9DTE9TRURdXG59KTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtDYW5jZWxsZWQgPSBTeW1ib2woJ2NhbmNlbGxlZCcpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga1dhaXRRdWV1ZSA9IFN5bWJvbCgnd2FpdFF1ZXVlJyk7XG4vKipcbiAqIEEgY29udGFpbmVyIG9mIHNlcnZlciBpbnN0YW5jZXMgcmVwcmVzZW50aW5nIGEgY29ubmVjdGlvbiB0byBhIE1vbmdvREIgdG9wb2xvZ3kuXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgVG9wb2xvZ3kgZXh0ZW5kcyBtb25nb190eXBlc18xLlR5cGVkRXZlbnRFbWl0dGVyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2VlZGxpc3QgLSBhIGxpc3Qgb2YgSG9zdEFkZHJlc3MgaW5zdGFuY2VzIHRvIGNvbm5lY3QgdG9cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihjbGllbnQsIHNlZWRzLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY2xpZW50ID0gY2xpZW50O1xuICAgICAgICB0aGlzLnNlbGVjdFNlcnZlckFzeW5jID0gKDAsIHV0aWxfMS5wcm9taXNpZnkpKChzZWxlY3Rvciwgb3B0aW9ucywgY2FsbGJhY2spID0+IHRoaXMuc2VsZWN0U2VydmVyKHNlbGVjdG9yLCBvcHRpb25zLCBjYWxsYmFjaykpO1xuICAgICAgICAvLyBPcHRpb25zIHNob3VsZCBvbmx5IGJlIHVuZGVmaW5lZCBpbiB0ZXN0cywgTW9uZ29DbGllbnQgd2lsbCBhbHdheXMgaGF2ZSBkZWZpbmVkIG9wdGlvbnNcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge1xuICAgICAgICAgICAgaG9zdHM6IFt1dGlsc18xLkhvc3RBZGRyZXNzLmZyb21TdHJpbmcoJ2xvY2FsaG9zdDoyNzAxNycpXSxcbiAgICAgICAgICAgIC4uLk9iamVjdC5mcm9tRW50cmllcyhjb25uZWN0aW9uX3N0cmluZ18xLkRFRkFVTFRfT1BUSU9OUy5lbnRyaWVzKCkpLFxuICAgICAgICAgICAgLi4uT2JqZWN0LmZyb21FbnRyaWVzKGNvbm5lY3Rpb25fc3RyaW5nXzEuRkVBVFVSRV9GTEFHUy5lbnRyaWVzKCkpXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2Ygc2VlZHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBzZWVkcyA9IFt1dGlsc18xLkhvc3RBZGRyZXNzLmZyb21TdHJpbmcoc2VlZHMpXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghQXJyYXkuaXNBcnJheShzZWVkcykpIHtcbiAgICAgICAgICAgIHNlZWRzID0gW3NlZWRzXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZWVkbGlzdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHNlZWQgb2Ygc2VlZHMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VlZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBzZWVkbGlzdC5wdXNoKHV0aWxzXzEuSG9zdEFkZHJlc3MuZnJvbVN0cmluZyhzZWVkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzZWVkIGluc3RhbmNlb2YgdXRpbHNfMS5Ib3N0QWRkcmVzcykge1xuICAgICAgICAgICAgICAgIHNlZWRsaXN0LnB1c2goc2VlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBGSVhNRShOT0RFLTM0ODMpOiBNYXkgbmVlZCB0byBiZSBhIE1vbmdvUGFyc2VFcnJvclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBUb3BvbG9neSBjYW5ub3QgYmUgY29uc3RydWN0ZWQgZnJvbSAke0pTT04uc3RyaW5naWZ5KHNlZWQpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvcG9sb2d5VHlwZSA9IHRvcG9sb2d5VHlwZUZyb21PcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB0b3BvbG9neUlkID0gZ2xvYmFsVG9wb2xvZ3lDb3VudGVyKys7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSG9zdHMgPSBvcHRpb25zLnNydk1heEhvc3RzID09IG51bGwgfHxcbiAgICAgICAgICAgIG9wdGlvbnMuc3J2TWF4SG9zdHMgPT09IDAgfHxcbiAgICAgICAgICAgIG9wdGlvbnMuc3J2TWF4SG9zdHMgPj0gc2VlZGxpc3QubGVuZ3RoXG4gICAgICAgICAgICA/IHNlZWRsaXN0XG4gICAgICAgICAgICA6ICgwLCB1dGlsc18xLnNodWZmbGUpKHNlZWRsaXN0LCBvcHRpb25zLnNydk1heEhvc3RzKTtcbiAgICAgICAgY29uc3Qgc2VydmVyRGVzY3JpcHRpb25zID0gbmV3IE1hcCgpO1xuICAgICAgICBmb3IgKGNvbnN0IGhvc3RBZGRyZXNzIG9mIHNlbGVjdGVkSG9zdHMpIHtcbiAgICAgICAgICAgIHNlcnZlckRlc2NyaXB0aW9ucy5zZXQoaG9zdEFkZHJlc3MudG9TdHJpbmcoKSwgbmV3IHNlcnZlcl9kZXNjcmlwdGlvbl8xLlNlcnZlckRlc2NyaXB0aW9uKGhvc3RBZGRyZXNzKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trV2FpdFF1ZXVlXSA9IG5ldyB1dGlsc18xLkxpc3QoKTtcbiAgICAgICAgdGhpcy5zID0ge1xuICAgICAgICAgICAgLy8gdGhlIGlkIG9mIHRoaXMgdG9wb2xvZ3lcbiAgICAgICAgICAgIGlkOiB0b3BvbG9neUlkLFxuICAgICAgICAgICAgLy8gcGFzc2VkIGluIG9wdGlvbnNcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAvLyBpbml0aWFsIHNlZWRsaXN0IG9mIHNlcnZlcnMgdG8gY29ubmVjdCB0b1xuICAgICAgICAgICAgc2VlZGxpc3QsXG4gICAgICAgICAgICAvLyBpbml0aWFsIHN0YXRlXG4gICAgICAgICAgICBzdGF0ZTogY29tbW9uXzEuU1RBVEVfQ0xPU0VELFxuICAgICAgICAgICAgLy8gdGhlIHRvcG9sb2d5IGRlc2NyaXB0aW9uXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogbmV3IHRvcG9sb2d5X2Rlc2NyaXB0aW9uXzEuVG9wb2xvZ3lEZXNjcmlwdGlvbih0b3BvbG9neVR5cGUsIHNlcnZlckRlc2NyaXB0aW9ucywgb3B0aW9ucy5yZXBsaWNhU2V0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvcHRpb25zKSxcbiAgICAgICAgICAgIHNlcnZlclNlbGVjdGlvblRpbWVvdXRNUzogb3B0aW9ucy5zZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMsXG4gICAgICAgICAgICBoZWFydGJlYXRGcmVxdWVuY3lNUzogb3B0aW9ucy5oZWFydGJlYXRGcmVxdWVuY3lNUyxcbiAgICAgICAgICAgIG1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TOiBvcHRpb25zLm1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TLFxuICAgICAgICAgICAgLy8gYSBtYXAgb2Ygc2VydmVyIGluc3RhbmNlcyB0byBub3JtYWxpemVkIGFkZHJlc3Nlc1xuICAgICAgICAgICAgc2VydmVyczogbmV3IE1hcCgpLFxuICAgICAgICAgICAgY3JlZGVudGlhbHM6IG9wdGlvbnM/LmNyZWRlbnRpYWxzLFxuICAgICAgICAgICAgY2x1c3RlclRpbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIC8vIHRpbWVyIG1hbmFnZW1lbnRcbiAgICAgICAgICAgIGNvbm5lY3Rpb25UaW1lcnM6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgIGRldGVjdFNoYXJkZWRUb3BvbG9neTogZXYgPT4gdGhpcy5kZXRlY3RTaGFyZGVkVG9wb2xvZ3koZXYpLFxuICAgICAgICAgICAgZGV0ZWN0U3J2UmVjb3JkczogZXYgPT4gdGhpcy5kZXRlY3RTcnZSZWNvcmRzKGV2KVxuICAgICAgICB9O1xuICAgICAgICBpZiAob3B0aW9ucy5zcnZIb3N0ICYmICFvcHRpb25zLmxvYWRCYWxhbmNlZCkge1xuICAgICAgICAgICAgdGhpcy5zLnNydlBvbGxlciA9XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5zcnZQb2xsZXIgPz9cbiAgICAgICAgICAgICAgICAgICAgbmV3IHNydl9wb2xsaW5nXzEuU3J2UG9sbGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYXJ0YmVhdEZyZXF1ZW5jeU1TOiB0aGlzLnMuaGVhcnRiZWF0RnJlcXVlbmN5TVMsXG4gICAgICAgICAgICAgICAgICAgICAgICBzcnZIb3N0OiBvcHRpb25zLnNydkhvc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBzcnZNYXhIb3N0czogb3B0aW9ucy5zcnZNYXhIb3N0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNydlNlcnZpY2VOYW1lOiBvcHRpb25zLnNydlNlcnZpY2VOYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vbihUb3BvbG9neS5UT1BPTE9HWV9ERVNDUklQVElPTl9DSEFOR0VELCB0aGlzLnMuZGV0ZWN0U2hhcmRlZFRvcG9sb2d5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXRlY3RTaGFyZGVkVG9wb2xvZ3koZXZlbnQpIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNUeXBlID0gZXZlbnQucHJldmlvdXNEZXNjcmlwdGlvbi50eXBlO1xuICAgICAgICBjb25zdCBuZXdUeXBlID0gZXZlbnQubmV3RGVzY3JpcHRpb24udHlwZTtcbiAgICAgICAgY29uc3QgdHJhbnNpdGlvblRvU2hhcmRlZCA9IHByZXZpb3VzVHlwZSAhPT0gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlNoYXJkZWQgJiYgbmV3VHlwZSA9PT0gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlNoYXJkZWQ7XG4gICAgICAgIGNvbnN0IHNydkxpc3RlbmVycyA9IHRoaXMucy5zcnZQb2xsZXI/Lmxpc3RlbmVycyhzcnZfcG9sbGluZ18xLlNydlBvbGxlci5TUlZfUkVDT1JEX0RJU0NPVkVSWSk7XG4gICAgICAgIGNvbnN0IGxpc3RlbmluZ1RvU3J2UG9sbGluZyA9ICEhc3J2TGlzdGVuZXJzPy5pbmNsdWRlcyh0aGlzLnMuZGV0ZWN0U3J2UmVjb3Jkcyk7XG4gICAgICAgIGlmICh0cmFuc2l0aW9uVG9TaGFyZGVkICYmICFsaXN0ZW5pbmdUb1NydlBvbGxpbmcpIHtcbiAgICAgICAgICAgIHRoaXMucy5zcnZQb2xsZXI/Lm9uKHNydl9wb2xsaW5nXzEuU3J2UG9sbGVyLlNSVl9SRUNPUkRfRElTQ09WRVJZLCB0aGlzLnMuZGV0ZWN0U3J2UmVjb3Jkcyk7XG4gICAgICAgICAgICB0aGlzLnMuc3J2UG9sbGVyPy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRldGVjdFNydlJlY29yZHMoZXYpIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNUb3BvbG9neURlc2NyaXB0aW9uID0gdGhpcy5zLmRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLnMuZGVzY3JpcHRpb24gPSB0aGlzLnMuZGVzY3JpcHRpb24udXBkYXRlRnJvbVNydlBvbGxpbmdFdmVudChldiwgdGhpcy5zLm9wdGlvbnMuc3J2TWF4SG9zdHMpO1xuICAgICAgICBpZiAodGhpcy5zLmRlc2NyaXB0aW9uID09PSBwcmV2aW91c1RvcG9sb2d5RGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIC8vIE5vdGhpbmcgY2hhbmdlZCwgc28gcmV0dXJuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlU2VydmVycyh0aGlzKTtcbiAgICAgICAgdGhpcy5lbWl0KFRvcG9sb2d5LlRPUE9MT0dZX0RFU0NSSVBUSU9OX0NIQU5HRUQsIG5ldyBldmVudHNfMS5Ub3BvbG9neURlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50KHRoaXMucy5pZCwgcHJldmlvdXNUb3BvbG9neURlc2NyaXB0aW9uLCB0aGlzLnMuZGVzY3JpcHRpb24pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgQSBgVG9wb2xvZ3lEZXNjcmlwdGlvbmAgZm9yIHRoaXMgdG9wb2xvZ3lcbiAgICAgKi9cbiAgICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMuZGVzY3JpcHRpb247XG4gICAgfVxuICAgIGdldCBsb2FkQmFsYW5jZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMub3B0aW9ucy5sb2FkQmFsYW5jZWQ7XG4gICAgfVxuICAgIGdldCBjYXBhYmlsaXRpZXMoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2VydmVyQ2FwYWJpbGl0aWVzKHRoaXMubGFzdEhlbGxvKCkpO1xuICAgIH1cbiAgICBjb25uZWN0KG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgIChjYWxsYmFjayA9IG9wdGlvbnMpLCAob3B0aW9ucyA9IHt9KTtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIGlmICh0aGlzLnMuc3RhdGUgPT09IGNvbW1vbl8xLlNUQVRFX0NPTk5FQ1RFRCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGVUcmFuc2l0aW9uKHRoaXMsIGNvbW1vbl8xLlNUQVRFX0NPTk5FQ1RJTkcpO1xuICAgICAgICAvLyBlbWl0IFNEQU0gbW9uaXRvcmluZyBldmVudHNcbiAgICAgICAgdGhpcy5lbWl0KFRvcG9sb2d5LlRPUE9MT0dZX09QRU5JTkcsIG5ldyBldmVudHNfMS5Ub3BvbG9neU9wZW5pbmdFdmVudCh0aGlzLnMuaWQpKTtcbiAgICAgICAgLy8gZW1pdCBhbiBldmVudCBmb3IgdGhlIHRvcG9sb2d5IGNoYW5nZVxuICAgICAgICB0aGlzLmVtaXQoVG9wb2xvZ3kuVE9QT0xPR1lfREVTQ1JJUFRJT05fQ0hBTkdFRCwgbmV3IGV2ZW50c18xLlRvcG9sb2d5RGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQodGhpcy5zLmlkLCBuZXcgdG9wb2xvZ3lfZGVzY3JpcHRpb25fMS5Ub3BvbG9neURlc2NyaXB0aW9uKGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5Vbmtub3duKSwgLy8gaW5pdGlhbCBpcyBhbHdheXMgVW5rbm93blxuICAgICAgICB0aGlzLnMuZGVzY3JpcHRpb24pKTtcbiAgICAgICAgLy8gY29ubmVjdCBhbGwga25vd24gc2VydmVycywgdGhlbiBhdHRlbXB0IHNlcnZlciBzZWxlY3Rpb24gdG8gY29ubmVjdFxuICAgICAgICBjb25zdCBzZXJ2ZXJEZXNjcmlwdGlvbnMgPSBBcnJheS5mcm9tKHRoaXMucy5kZXNjcmlwdGlvbi5zZXJ2ZXJzLnZhbHVlcygpKTtcbiAgICAgICAgdGhpcy5zLnNlcnZlcnMgPSBuZXcgTWFwKHNlcnZlckRlc2NyaXB0aW9ucy5tYXAoc2VydmVyRGVzY3JpcHRpb24gPT4gW1xuICAgICAgICAgICAgc2VydmVyRGVzY3JpcHRpb24uYWRkcmVzcyxcbiAgICAgICAgICAgIGNyZWF0ZUFuZENvbm5lY3RTZXJ2ZXIodGhpcywgc2VydmVyRGVzY3JpcHRpb24pXG4gICAgICAgIF0pKTtcbiAgICAgICAgLy8gSW4gbG9hZCBiYWxhbmNlciBtb2RlIHdlIG5lZWQgdG8gZmFrZSBhIHNlcnZlciBkZXNjcmlwdGlvbiBnZXR0aW5nXG4gICAgICAgIC8vIGVtaXR0ZWQgZnJvbSB0aGUgbW9uaXRvciwgc2luY2UgdGhlIG1vbml0b3IgZG9lc24ndCBleGlzdC5cbiAgICAgICAgaWYgKHRoaXMucy5vcHRpb25zLmxvYWRCYWxhbmNlZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBkZXNjcmlwdGlvbiBvZiBzZXJ2ZXJEZXNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdEZXNjcmlwdGlvbiA9IG5ldyBzZXJ2ZXJfZGVzY3JpcHRpb25fMS5TZXJ2ZXJEZXNjcmlwdGlvbihkZXNjcmlwdGlvbi5ob3N0QWRkcmVzcywgdW5kZWZpbmVkLCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWRCYWxhbmNlZDogdGhpcy5zLm9wdGlvbnMubG9hZEJhbGFuY2VkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXJ2ZXJVcGRhdGVIYW5kbGVyKG5ld0Rlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleGl0V2l0aEVycm9yID0gKGVycm9yKSA9PiBjYWxsYmFjayA/IGNhbGxiYWNrKGVycm9yKSA6IHRoaXMuZW1pdChUb3BvbG9neS5FUlJPUiwgZXJyb3IpO1xuICAgICAgICBjb25zdCByZWFkUHJlZmVyZW5jZSA9IG9wdGlvbnMucmVhZFByZWZlcmVuY2UgPz8gcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UucHJpbWFyeTtcbiAgICAgICAgdGhpcy5zZWxlY3RTZXJ2ZXIoKDAsIHNlcnZlcl9zZWxlY3Rpb25fMS5yZWFkUHJlZmVyZW5jZVNlcnZlclNlbGVjdG9yKShyZWFkUHJlZmVyZW5jZSksIG9wdGlvbnMsIChlcnIsIHNlcnZlcikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNsb3NlKHsgZm9yY2U6IGZhbHNlIH0sICgpID0+IGV4aXRXaXRoRXJyb3IoZXJyKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUT0RPOiBOT0RFLTI0NzFcbiAgICAgICAgICAgIGNvbnN0IHNraXBQaW5nT25Db25uZWN0ID0gdGhpcy5zLm9wdGlvbnNbU3ltYm9sLmZvcignQEBtZGIuc2tpcFBpbmdPbkNvbm5lY3QnKV0gPT09IHRydWU7XG4gICAgICAgICAgICBpZiAoIXNraXBQaW5nT25Db25uZWN0ICYmIHNlcnZlciAmJiB0aGlzLnMuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXIuY29tbWFuZCgoMCwgdXRpbHNfMS5ucykoJ2FkbWluLiRjbWQnKSwgeyBwaW5nOiAxIH0sIHt9LCBlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhpdFdpdGhFcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlVHJhbnNpdGlvbih0aGlzLCBjb21tb25fMS5TVEFURV9DT05ORUNURUQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoVG9wb2xvZ3kuT1BFTiwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdChUb3BvbG9neS5DT05ORUNULCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s/Lih1bmRlZmluZWQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0YXRlVHJhbnNpdGlvbih0aGlzLCBjb21tb25fMS5TVEFURV9DT05ORUNURUQpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KFRvcG9sb2d5Lk9QRU4sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KFRvcG9sb2d5LkNPTk5FQ1QsIHRoaXMpO1xuICAgICAgICAgICAgY2FsbGJhY2s/Lih1bmRlZmluZWQsIHRoaXMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2xvc2Uob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8geyBmb3JjZTogZmFsc2UgfTtcbiAgICAgICAgaWYgKHRoaXMucy5zdGF0ZSA9PT0gY29tbW9uXzEuU1RBVEVfQ0xPU0VEIHx8IHRoaXMucy5zdGF0ZSA9PT0gY29tbW9uXzEuU1RBVEVfQ0xPU0lORykge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrPy4oKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZXN0cm95ZWRTZXJ2ZXJzID0gQXJyYXkuZnJvbSh0aGlzLnMuc2VydmVycy52YWx1ZXMoKSwgc2VydmVyID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoMCwgdXRpbF8xLnByb21pc2lmeSkoZGVzdHJveVNlcnZlcikoc2VydmVyLCB0aGlzLCB7IGZvcmNlOiAhIW9wdGlvbnM/LmZvcmNlIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvbWlzZS5hbGwoZGVzdHJveWVkU2VydmVycylcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucy5zZXJ2ZXJzLmNsZWFyKCk7XG4gICAgICAgICAgICBzdGF0ZVRyYW5zaXRpb24odGhpcywgY29tbW9uXzEuU1RBVEVfQ0xPU0lORyk7XG4gICAgICAgICAgICBkcmFpbldhaXRRdWV1ZSh0aGlzW2tXYWl0UXVldWVdLCBuZXcgZXJyb3JfMS5Nb25nb1RvcG9sb2d5Q2xvc2VkRXJyb3IoKSk7XG4gICAgICAgICAgICAoMCwgY29tbW9uXzEuZHJhaW5UaW1lclF1ZXVlKSh0aGlzLnMuY29ubmVjdGlvblRpbWVycyk7XG4gICAgICAgICAgICBpZiAodGhpcy5zLnNydlBvbGxlcikge1xuICAgICAgICAgICAgICAgIHRoaXMucy5zcnZQb2xsZXIuc3RvcCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucy5zcnZQb2xsZXIucmVtb3ZlTGlzdGVuZXIoc3J2X3BvbGxpbmdfMS5TcnZQb2xsZXIuU1JWX1JFQ09SRF9ESVNDT1ZFUlksIHRoaXMucy5kZXRlY3RTcnZSZWNvcmRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoVG9wb2xvZ3kuVE9QT0xPR1lfREVTQ1JJUFRJT05fQ0hBTkdFRCwgdGhpcy5zLmRldGVjdFNoYXJkZWRUb3BvbG9neSk7XG4gICAgICAgICAgICBzdGF0ZVRyYW5zaXRpb24odGhpcywgY29tbW9uXzEuU1RBVEVfQ0xPU0VEKTtcbiAgICAgICAgICAgIC8vIGVtaXQgYW4gZXZlbnQgZm9yIGNsb3NlXG4gICAgICAgICAgICB0aGlzLmVtaXQoVG9wb2xvZ3kuVE9QT0xPR1lfQ0xPU0VELCBuZXcgZXZlbnRzXzEuVG9wb2xvZ3lDbG9zZWRFdmVudCh0aGlzLnMuaWQpKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IGNhbGxiYWNrPy4oKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbGVjdHMgYSBzZXJ2ZXIgYWNjb3JkaW5nIHRvIHRoZSBzZWxlY3Rpb24gcHJlZGljYXRlIHByb3ZpZGVkXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2VsZWN0b3IgLSBBbiBvcHRpb25hbCBzZWxlY3RvciB0byBzZWxlY3Qgc2VydmVycyBieSwgZGVmYXVsdHMgdG8gYSByYW5kb20gc2VsZWN0aW9uIHdpdGhpbiBhIGxhdGVuY3kgd2luZG93XG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyByZWxhdGVkIHRvIHNlcnZlciBzZWxlY3Rpb25cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBUaGUgY2FsbGJhY2sgdXNlZCB0byBpbmRpY2F0ZSBzdWNjZXNzIG9yIGZhaWx1cmVcbiAgICAgKiBAcmV0dXJucyBBbiBpbnN0YW5jZSBvZiBhIGBTZXJ2ZXJgIG1lZXRpbmcgdGhlIGNyaXRlcmlhIG9mIHRoZSBwcmVkaWNhdGUgcHJvdmlkZWRcbiAgICAgKi9cbiAgICBzZWxlY3RTZXJ2ZXIoc2VsZWN0b3IsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgICAgIGxldCBzZXJ2ZXJTZWxlY3RvcjtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RvciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJTZWxlY3RvciA9ICgwLCBzZXJ2ZXJfc2VsZWN0aW9uXzEucmVhZFByZWZlcmVuY2VTZXJ2ZXJTZWxlY3RvcikocmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UuZnJvbVN0cmluZyhzZWxlY3RvcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlYWRQcmVmZXJlbmNlO1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRQcmVmZXJlbmNlID0gc2VsZWN0b3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS50cmFuc2xhdGUob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRQcmVmZXJlbmNlID0gb3B0aW9ucy5yZWFkUHJlZmVyZW5jZSB8fCByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5wcmltYXJ5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXJ2ZXJTZWxlY3RvciA9ICgwLCBzZXJ2ZXJfc2VsZWN0aW9uXzEucmVhZFByZWZlcmVuY2VTZXJ2ZXJTZWxlY3RvcikocmVhZFByZWZlcmVuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VydmVyU2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgeyBzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVM6IHRoaXMucy5zZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMgfSwgb3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGlzU2hhcmRlZCA9IHRoaXMuZGVzY3JpcHRpb24udHlwZSA9PT0gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlNoYXJkZWQ7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBvcHRpb25zLnNlc3Npb247XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gc2Vzc2lvbiAmJiBzZXNzaW9uLnRyYW5zYWN0aW9uO1xuICAgICAgICBpZiAoaXNTaGFyZGVkICYmIHRyYW5zYWN0aW9uICYmIHRyYW5zYWN0aW9uLnNlcnZlcikge1xuICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCB0cmFuc2FjdGlvbi5zZXJ2ZXIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdhaXRRdWV1ZU1lbWJlciA9IHtcbiAgICAgICAgICAgIHNlcnZlclNlbGVjdG9yLFxuICAgICAgICAgICAgdHJhbnNhY3Rpb24sXG4gICAgICAgICAgICBjYWxsYmFja1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMgPSBvcHRpb25zLnNlcnZlclNlbGVjdGlvblRpbWVvdXRNUztcbiAgICAgICAgaWYgKHNlcnZlclNlbGVjdGlvblRpbWVvdXRNUykge1xuICAgICAgICAgICAgd2FpdFF1ZXVlTWVtYmVyLnRpbWVyID0gKDAsIHRpbWVyc18xLnNldFRpbWVvdXQpKCgpID0+IHtcbiAgICAgICAgICAgICAgICB3YWl0UXVldWVNZW1iZXJba0NhbmNlbGxlZF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHdhaXRRdWV1ZU1lbWJlci50aW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lb3V0RXJyb3IgPSBuZXcgZXJyb3JfMS5Nb25nb1NlcnZlclNlbGVjdGlvbkVycm9yKGBTZXJ2ZXIgc2VsZWN0aW9uIHRpbWVkIG91dCBhZnRlciAke3NlcnZlclNlbGVjdGlvblRpbWVvdXRNU30gbXNgLCB0aGlzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICB3YWl0UXVldWVNZW1iZXIuY2FsbGJhY2sodGltZW91dEVycm9yKTtcbiAgICAgICAgICAgIH0sIHNlcnZlclNlbGVjdGlvblRpbWVvdXRNUyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trV2FpdFF1ZXVlXS5wdXNoKHdhaXRRdWV1ZU1lbWJlcik7XG4gICAgICAgIHByb2Nlc3NXYWl0UXVldWUodGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgaW50ZXJuYWwgVG9wb2xvZ3lEZXNjcmlwdGlvbiB3aXRoIGEgU2VydmVyRGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZXJ2ZXJEZXNjcmlwdGlvbiAtIFRoZSBzZXJ2ZXIgdG8gdXBkYXRlIGluIHRoZSBpbnRlcm5hbCBsaXN0IG9mIHNlcnZlciBkZXNjcmlwdGlvbnNcbiAgICAgKi9cbiAgICBzZXJ2ZXJVcGRhdGVIYW5kbGVyKHNlcnZlckRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGlmICghdGhpcy5zLmRlc2NyaXB0aW9uLmhhc1NlcnZlcihzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlnbm9yZSB0aGlzIHNlcnZlciB1cGRhdGUgaWYgaXRzIGZyb20gYW4gb3V0ZGF0ZWQgdG9wb2xvZ3lWZXJzaW9uXG4gICAgICAgIGlmIChpc1N0YWxlU2VydmVyRGVzY3JpcHRpb24odGhpcy5zLmRlc2NyaXB0aW9uLCBzZXJ2ZXJEZXNjcmlwdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGVzZSB3aWxsIGJlIHVzZWQgZm9yIG1vbml0b3JpbmcgZXZlbnRzIGxhdGVyXG4gICAgICAgIGNvbnN0IHByZXZpb3VzVG9wb2xvZ3lEZXNjcmlwdGlvbiA9IHRoaXMucy5kZXNjcmlwdGlvbjtcbiAgICAgICAgY29uc3QgcHJldmlvdXNTZXJ2ZXJEZXNjcmlwdGlvbiA9IHRoaXMucy5kZXNjcmlwdGlvbi5zZXJ2ZXJzLmdldChzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzKTtcbiAgICAgICAgaWYgKCFwcmV2aW91c1NlcnZlckRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gRHJpdmVyIFNlc3Npb25zIFNwZWM6IFwiV2hlbmV2ZXIgYSBkcml2ZXIgcmVjZWl2ZXMgYSBjbHVzdGVyIHRpbWUgZnJvbVxuICAgICAgICAvLyBhIHNlcnZlciBpdCBNVVNUIGNvbXBhcmUgaXQgdG8gdGhlIGN1cnJlbnQgaGlnaGVzdCBzZWVuIGNsdXN0ZXIgdGltZVxuICAgICAgICAvLyBmb3IgdGhlIGRlcGxveW1lbnQuIElmIHRoZSBuZXcgY2x1c3RlciB0aW1lIGlzIGhpZ2hlciB0aGFuIHRoZVxuICAgICAgICAvLyBoaWdoZXN0IHNlZW4gY2x1c3RlciB0aW1lIGl0IE1VU1QgYmVjb21lIHRoZSBuZXcgaGlnaGVzdCBzZWVuIGNsdXN0ZXJcbiAgICAgICAgLy8gdGltZS4gVHdvIGNsdXN0ZXIgdGltZXMgYXJlIGNvbXBhcmVkIHVzaW5nIG9ubHkgdGhlIEJzb25UaW1lc3RhbXBcbiAgICAgICAgLy8gdmFsdWUgb2YgdGhlIGNsdXN0ZXJUaW1lIGVtYmVkZGVkIGZpZWxkLlwiXG4gICAgICAgIGNvbnN0IGNsdXN0ZXJUaW1lID0gc2VydmVyRGVzY3JpcHRpb24uJGNsdXN0ZXJUaW1lO1xuICAgICAgICBpZiAoY2x1c3RlclRpbWUpIHtcbiAgICAgICAgICAgICgwLCBjb21tb25fMS5fYWR2YW5jZUNsdXN0ZXJUaW1lKSh0aGlzLCBjbHVzdGVyVGltZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgd2UgYWxyZWFkeSBrbm93IGFsbCB0aGUgaW5mb3JtYXRpb24gY29udGFpbmVkIGluIHRoaXMgdXBkYXRlZCBkZXNjcmlwdGlvbiwgdGhlblxuICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIGVtaXQgU0RBTSBldmVudHMsIGJ1dCBzdGlsbCBuZWVkIHRvIHVwZGF0ZSB0aGUgZGVzY3JpcHRpb24sIGluIG9yZGVyXG4gICAgICAgIC8vIHRvIGtlZXAgY2xpZW50LXRyYWNrZWQgYXR0cmlidXRlcyBsaWtlIGxhc3QgdXBkYXRlIHRpbWUgYW5kIHJvdW5kIHRyaXAgdGltZSB1cCB0byBkYXRlXG4gICAgICAgIGNvbnN0IGVxdWFsRGVzY3JpcHRpb25zID0gcHJldmlvdXNTZXJ2ZXJEZXNjcmlwdGlvbiAmJiBwcmV2aW91c1NlcnZlckRlc2NyaXB0aW9uLmVxdWFscyhzZXJ2ZXJEZXNjcmlwdGlvbik7XG4gICAgICAgIC8vIGZpcnN0IHVwZGF0ZSB0aGUgVG9wb2xvZ3lEZXNjcmlwdGlvblxuICAgICAgICB0aGlzLnMuZGVzY3JpcHRpb24gPSB0aGlzLnMuZGVzY3JpcHRpb24udXBkYXRlKHNlcnZlckRlc2NyaXB0aW9uKTtcbiAgICAgICAgaWYgKHRoaXMucy5kZXNjcmlwdGlvbi5jb21wYXRpYmlsaXR5RXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdChUb3BvbG9neS5FUlJPUiwgbmV3IGVycm9yXzEuTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IodGhpcy5zLmRlc2NyaXB0aW9uLmNvbXBhdGliaWxpdHlFcnJvcikpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVtaXQgbW9uaXRvcmluZyBldmVudHMgZm9yIHRoaXMgY2hhbmdlXG4gICAgICAgIGlmICghZXF1YWxEZXNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0Rlc2NyaXB0aW9uID0gdGhpcy5zLmRlc2NyaXB0aW9uLnNlcnZlcnMuZ2V0KHNlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3MpO1xuICAgICAgICAgICAgaWYgKG5ld0Rlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KFRvcG9sb2d5LlNFUlZFUl9ERVNDUklQVElPTl9DSEFOR0VELCBuZXcgZXZlbnRzXzEuU2VydmVyRGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQodGhpcy5zLmlkLCBzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzLCBwcmV2aW91c1NlcnZlckRlc2NyaXB0aW9uLCBuZXdEZXNjcmlwdGlvbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHVwZGF0ZSBzZXJ2ZXIgbGlzdCBmcm9tIHVwZGF0ZWQgZGVzY3JpcHRpb25zXG4gICAgICAgIHVwZGF0ZVNlcnZlcnModGhpcywgc2VydmVyRGVzY3JpcHRpb24pO1xuICAgICAgICAvLyBhdHRlbXB0IHRvIHJlc29sdmUgYW55IG91dHN0YW5kaW5nIHNlcnZlciBzZWxlY3Rpb24gYXR0ZW1wdHNcbiAgICAgICAgaWYgKHRoaXNba1dhaXRRdWV1ZV0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcHJvY2Vzc1dhaXRRdWV1ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVxdWFsRGVzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoVG9wb2xvZ3kuVE9QT0xPR1lfREVTQ1JJUFRJT05fQ0hBTkdFRCwgbmV3IGV2ZW50c18xLlRvcG9sb2d5RGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQodGhpcy5zLmlkLCBwcmV2aW91c1RvcG9sb2d5RGVzY3JpcHRpb24sIHRoaXMucy5kZXNjcmlwdGlvbikpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGF1dGgoY3JlZGVudGlhbHMsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY3JlZGVudGlhbHMgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAoY2FsbGJhY2sgPSBjcmVkZW50aWFscyksIChjcmVkZW50aWFscyA9IHVuZGVmaW5lZCk7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIHRydWUpO1xuICAgIH1cbiAgICBnZXQgY2xpZW50TWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMub3B0aW9ucy5tZXRhZGF0YTtcbiAgICB9XG4gICAgaXNDb25uZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMuc3RhdGUgPT09IGNvbW1vbl8xLlNUQVRFX0NPTk5FQ1RFRDtcbiAgICB9XG4gICAgaXNEZXN0cm95ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMuc3RhdGUgPT09IGNvbW1vbl8xLlNUQVRFX0NMT1NFRDtcbiAgICB9XG4gICAgLy8gTk9URTogVGhlcmUgYXJlIG1hbnkgcGxhY2VzIGluIGNvZGUgd2hlcmUgd2UgZXhwbGljaXRseSBjaGVjayB0aGUgbGFzdCBoZWxsb1xuICAgIC8vICAgICAgIHRvIGRvIGZlYXR1cmUgc3VwcG9ydCBkZXRlY3Rpb24uIFRoaXMgc2hvdWxkIGJlIGRvbmUgYW55IG90aGVyIHdheSwgYnV0IGZvclxuICAgIC8vICAgICAgIG5vdyB3ZSB3aWxsIGp1c3QgcmV0dXJuIHRoZSBmaXJzdCBoZWxsbyBzZWVuLCB3aGljaCBzaG91bGQgc3VmZmljZS5cbiAgICBsYXN0SGVsbG8oKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlckRlc2NyaXB0aW9ucyA9IEFycmF5LmZyb20odGhpcy5kZXNjcmlwdGlvbi5zZXJ2ZXJzLnZhbHVlcygpKTtcbiAgICAgICAgaWYgKHNlcnZlckRlc2NyaXB0aW9ucy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIGNvbnN0IHNkID0gc2VydmVyRGVzY3JpcHRpb25zLmZpbHRlcigoc2QpID0+IHNkLnR5cGUgIT09IGNvbW1vbl8xLlNlcnZlclR5cGUuVW5rbm93bilbMF07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHNkIHx8IHsgbWF4V2lyZVZlcnNpb246IHRoaXMuZGVzY3JpcHRpb24uY29tbW9uV2lyZVZlcnNpb24gfTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZ2V0IGNvbW1vbldpcmVWZXJzaW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXNjcmlwdGlvbi5jb21tb25XaXJlVmVyc2lvbjtcbiAgICB9XG4gICAgZ2V0IGxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uLmxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXM7XG4gICAgfVxuICAgIGdldCBjbHVzdGVyVGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5jbHVzdGVyVGltZTtcbiAgICB9XG4gICAgc2V0IGNsdXN0ZXJUaW1lKGNsdXN0ZXJUaW1lKSB7XG4gICAgICAgIHRoaXMucy5jbHVzdGVyVGltZSA9IGNsdXN0ZXJUaW1lO1xuICAgIH1cbn1cbi8qKiBAZXZlbnQgKi9cblRvcG9sb2d5LlNFUlZFUl9PUEVOSU5HID0gY29uc3RhbnRzXzEuU0VSVkVSX09QRU5JTkc7XG4vKiogQGV2ZW50ICovXG5Ub3BvbG9neS5TRVJWRVJfQ0xPU0VEID0gY29uc3RhbnRzXzEuU0VSVkVSX0NMT1NFRDtcbi8qKiBAZXZlbnQgKi9cblRvcG9sb2d5LlNFUlZFUl9ERVNDUklQVElPTl9DSEFOR0VEID0gY29uc3RhbnRzXzEuU0VSVkVSX0RFU0NSSVBUSU9OX0NIQU5HRUQ7XG4vKiogQGV2ZW50ICovXG5Ub3BvbG9neS5UT1BPTE9HWV9PUEVOSU5HID0gY29uc3RhbnRzXzEuVE9QT0xPR1lfT1BFTklORztcbi8qKiBAZXZlbnQgKi9cblRvcG9sb2d5LlRPUE9MT0dZX0NMT1NFRCA9IGNvbnN0YW50c18xLlRPUE9MT0dZX0NMT1NFRDtcbi8qKiBAZXZlbnQgKi9cblRvcG9sb2d5LlRPUE9MT0dZX0RFU0NSSVBUSU9OX0NIQU5HRUQgPSBjb25zdGFudHNfMS5UT1BPTE9HWV9ERVNDUklQVElPTl9DSEFOR0VEO1xuLyoqIEBldmVudCAqL1xuVG9wb2xvZ3kuRVJST1IgPSBjb25zdGFudHNfMS5FUlJPUjtcbi8qKiBAZXZlbnQgKi9cblRvcG9sb2d5Lk9QRU4gPSBjb25zdGFudHNfMS5PUEVOO1xuLyoqIEBldmVudCAqL1xuVG9wb2xvZ3kuQ09OTkVDVCA9IGNvbnN0YW50c18xLkNPTk5FQ1Q7XG4vKiogQGV2ZW50ICovXG5Ub3BvbG9neS5DTE9TRSA9IGNvbnN0YW50c18xLkNMT1NFO1xuLyoqIEBldmVudCAqL1xuVG9wb2xvZ3kuVElNRU9VVCA9IGNvbnN0YW50c18xLlRJTUVPVVQ7XG5leHBvcnRzLlRvcG9sb2d5ID0gVG9wb2xvZ3k7XG4vKiogRGVzdHJveXMgYSBzZXJ2ZXIsIGFuZCByZW1vdmVzIGFsbCBldmVudCBsaXN0ZW5lcnMgZnJvbSB0aGUgaW5zdGFuY2UgKi9cbmZ1bmN0aW9uIGRlc3Ryb3lTZXJ2ZXIoc2VydmVyLCB0b3BvbG9neSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyA/PyB7IGZvcmNlOiBmYWxzZSB9O1xuICAgIGZvciAoY29uc3QgZXZlbnQgb2YgY29uc3RhbnRzXzEuTE9DQUxfU0VSVkVSX0VWRU5UUykge1xuICAgICAgICBzZXJ2ZXIucmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50KTtcbiAgICB9XG4gICAgc2VydmVyLmRlc3Ryb3kob3B0aW9ucywgKCkgPT4ge1xuICAgICAgICB0b3BvbG9neS5lbWl0KFRvcG9sb2d5LlNFUlZFUl9DTE9TRUQsIG5ldyBldmVudHNfMS5TZXJ2ZXJDbG9zZWRFdmVudCh0b3BvbG9neS5zLmlkLCBzZXJ2ZXIuZGVzY3JpcHRpb24uYWRkcmVzcykpO1xuICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIGNvbnN0YW50c18xLlNFUlZFUl9SRUxBWV9FVkVOVFMpIHtcbiAgICAgICAgICAgIHNlcnZlci5yZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKiBQcmVkaWN0cyB0aGUgVG9wb2xvZ3lUeXBlIGZyb20gb3B0aW9ucyAqL1xuZnVuY3Rpb24gdG9wb2xvZ3lUeXBlRnJvbU9wdGlvbnMob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zPy5kaXJlY3RDb25uZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBjb21tb25fMS5Ub3BvbG9neVR5cGUuU2luZ2xlO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucz8ucmVwbGljYVNldCkge1xuICAgICAgICByZXR1cm4gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlJlcGxpY2FTZXROb1ByaW1hcnk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zPy5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgcmV0dXJuIGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5Mb2FkQmFsYW5jZWQ7XG4gICAgfVxuICAgIHJldHVybiBjb21tb25fMS5Ub3BvbG9neVR5cGUuVW5rbm93bjtcbn1cbi8qKlxuICogQ3JlYXRlcyBuZXcgc2VydmVyIGluc3RhbmNlcyBhbmQgYXR0ZW1wdHMgdG8gY29ubmVjdCB0aGVtXG4gKlxuICogQHBhcmFtIHRvcG9sb2d5IC0gVGhlIHRvcG9sb2d5IHRoYXQgdGhpcyBzZXJ2ZXIgYmVsb25ncyB0b1xuICogQHBhcmFtIHNlcnZlckRlc2NyaXB0aW9uIC0gVGhlIGRlc2NyaXB0aW9uIGZvciB0aGUgc2VydmVyIHRvIGluaXRpYWxpemUgYW5kIGNvbm5lY3QgdG9cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQW5kQ29ubmVjdFNlcnZlcih0b3BvbG9neSwgc2VydmVyRGVzY3JpcHRpb24pIHtcbiAgICB0b3BvbG9neS5lbWl0KFRvcG9sb2d5LlNFUlZFUl9PUEVOSU5HLCBuZXcgZXZlbnRzXzEuU2VydmVyT3BlbmluZ0V2ZW50KHRvcG9sb2d5LnMuaWQsIHNlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3MpKTtcbiAgICBjb25zdCBzZXJ2ZXIgPSBuZXcgc2VydmVyXzEuU2VydmVyKHRvcG9sb2d5LCBzZXJ2ZXJEZXNjcmlwdGlvbiwgdG9wb2xvZ3kucy5vcHRpb25zKTtcbiAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIGNvbnN0YW50c18xLlNFUlZFUl9SRUxBWV9FVkVOVFMpIHtcbiAgICAgICAgc2VydmVyLm9uKGV2ZW50LCAoZSkgPT4gdG9wb2xvZ3kuZW1pdChldmVudCwgZSkpO1xuICAgIH1cbiAgICBzZXJ2ZXIub24oc2VydmVyXzEuU2VydmVyLkRFU0NSSVBUSU9OX1JFQ0VJVkVELCBkZXNjcmlwdGlvbiA9PiB0b3BvbG9neS5zZXJ2ZXJVcGRhdGVIYW5kbGVyKGRlc2NyaXB0aW9uKSk7XG4gICAgc2VydmVyLmNvbm5lY3QoKTtcbiAgICByZXR1cm4gc2VydmVyO1xufVxuLyoqXG4gKiBAcGFyYW0gdG9wb2xvZ3kgLSBUb3BvbG9neSB0byB1cGRhdGUuXG4gKiBAcGFyYW0gaW5jb21pbmdTZXJ2ZXJEZXNjcmlwdGlvbiAtIE5ldyBzZXJ2ZXIgZGVzY3JpcHRpb24uXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZVNlcnZlcnModG9wb2xvZ3ksIGluY29taW5nU2VydmVyRGVzY3JpcHRpb24pIHtcbiAgICAvLyB1cGRhdGUgdGhlIGludGVybmFsIHNlcnZlcidzIGRlc2NyaXB0aW9uXG4gICAgaWYgKGluY29taW5nU2VydmVyRGVzY3JpcHRpb24gJiYgdG9wb2xvZ3kucy5zZXJ2ZXJzLmhhcyhpbmNvbWluZ1NlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3MpKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlciA9IHRvcG9sb2d5LnMuc2VydmVycy5nZXQoaW5jb21pbmdTZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzKTtcbiAgICAgICAgaWYgKHNlcnZlcikge1xuICAgICAgICAgICAgc2VydmVyLnMuZGVzY3JpcHRpb24gPSBpbmNvbWluZ1NlcnZlckRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgaWYgKGluY29taW5nU2VydmVyRGVzY3JpcHRpb24uZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IgJiZcbiAgICAgICAgICAgICAgICBpbmNvbWluZ1NlcnZlckRlc2NyaXB0aW9uLmVycm9yLmhhc0Vycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuUmVzZXRQb29sKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGludGVycnVwdEluVXNlQ29ubmVjdGlvbnMgPSBpbmNvbWluZ1NlcnZlckRlc2NyaXB0aW9uLmVycm9yLmhhc0Vycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuSW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucyk7XG4gICAgICAgICAgICAgICAgc2VydmVyLnBvb2wuY2xlYXIoeyBpbnRlcnJ1cHRJblVzZUNvbm5lY3Rpb25zIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaW5jb21pbmdTZXJ2ZXJEZXNjcmlwdGlvbi5lcnJvciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VG9wb2xvZ3lUeXBlID0gdG9wb2xvZ3kucy5kZXNjcmlwdGlvbi50eXBlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZE1hcmtQb29sUmVhZHkgPSBpbmNvbWluZ1NlcnZlckRlc2NyaXB0aW9uLmlzRGF0YUJlYXJpbmcgfHxcbiAgICAgICAgICAgICAgICAgICAgKGluY29taW5nU2VydmVyRGVzY3JpcHRpb24udHlwZSAhPT0gY29tbW9uXzEuU2VydmVyVHlwZS5Vbmtub3duICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUb3BvbG9neVR5cGUgPT09IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5TaW5nbGUpO1xuICAgICAgICAgICAgICAgIGlmIChzaG91bGRNYXJrUG9vbFJlYWR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlci5wb29sLnJlYWR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGFkZCBuZXcgc2VydmVycyBmb3IgYWxsIGRlc2NyaXB0aW9ucyB3ZSBjdXJyZW50bHkgZG9uJ3Qga25vdyBhYm91dCBsb2NhbGx5XG4gICAgZm9yIChjb25zdCBzZXJ2ZXJEZXNjcmlwdGlvbiBvZiB0b3BvbG9neS5kZXNjcmlwdGlvbi5zZXJ2ZXJzLnZhbHVlcygpKSB7XG4gICAgICAgIGlmICghdG9wb2xvZ3kucy5zZXJ2ZXJzLmhhcyhzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzKSkge1xuICAgICAgICAgICAgY29uc3Qgc2VydmVyID0gY3JlYXRlQW5kQ29ubmVjdFNlcnZlcih0b3BvbG9neSwgc2VydmVyRGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgdG9wb2xvZ3kucy5zZXJ2ZXJzLnNldChzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzLCBzZXJ2ZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGZvciBhbGwgc2VydmVycyBubyBsb25nZXIga25vd24sIHJlbW92ZSB0aGVpciBkZXNjcmlwdGlvbnMgYW5kIGRlc3Ryb3kgdGhlaXIgaW5zdGFuY2VzXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiB0b3BvbG9neS5zLnNlcnZlcnMpIHtcbiAgICAgICAgY29uc3Qgc2VydmVyQWRkcmVzcyA9IGVudHJ5WzBdO1xuICAgICAgICBpZiAodG9wb2xvZ3kuZGVzY3JpcHRpb24uaGFzU2VydmVyKHNlcnZlckFkZHJlc3MpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRvcG9sb2d5LnMuc2VydmVycy5oYXMoc2VydmVyQWRkcmVzcykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlcnZlciA9IHRvcG9sb2d5LnMuc2VydmVycy5nZXQoc2VydmVyQWRkcmVzcyk7XG4gICAgICAgIHRvcG9sb2d5LnMuc2VydmVycy5kZWxldGUoc2VydmVyQWRkcmVzcyk7XG4gICAgICAgIC8vIHByZXBhcmUgc2VydmVyIGZvciBnYXJiYWdlIGNvbGxlY3Rpb25cbiAgICAgICAgaWYgKHNlcnZlcikge1xuICAgICAgICAgICAgZGVzdHJveVNlcnZlcihzZXJ2ZXIsIHRvcG9sb2d5KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGRyYWluV2FpdFF1ZXVlKHF1ZXVlLCBlcnIpIHtcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHdhaXRRdWV1ZU1lbWJlciA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGlmICghd2FpdFF1ZXVlTWVtYmVyKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2FpdFF1ZXVlTWVtYmVyLnRpbWVyKSB7XG4gICAgICAgICAgICAoMCwgdGltZXJzXzEuY2xlYXJUaW1lb3V0KSh3YWl0UXVldWVNZW1iZXIudGltZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghd2FpdFF1ZXVlTWVtYmVyW2tDYW5jZWxsZWRdKSB7XG4gICAgICAgICAgICB3YWl0UXVldWVNZW1iZXIuY2FsbGJhY2soZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHByb2Nlc3NXYWl0UXVldWUodG9wb2xvZ3kpIHtcbiAgICBpZiAodG9wb2xvZ3kucy5zdGF0ZSA9PT0gY29tbW9uXzEuU1RBVEVfQ0xPU0VEKSB7XG4gICAgICAgIGRyYWluV2FpdFF1ZXVlKHRvcG9sb2d5W2tXYWl0UXVldWVdLCBuZXcgZXJyb3JfMS5Nb25nb1RvcG9sb2d5Q2xvc2VkRXJyb3IoKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaXNTaGFyZGVkID0gdG9wb2xvZ3kuZGVzY3JpcHRpb24udHlwZSA9PT0gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlNoYXJkZWQ7XG4gICAgY29uc3Qgc2VydmVyRGVzY3JpcHRpb25zID0gQXJyYXkuZnJvbSh0b3BvbG9neS5kZXNjcmlwdGlvbi5zZXJ2ZXJzLnZhbHVlcygpKTtcbiAgICBjb25zdCBtZW1iZXJzVG9Qcm9jZXNzID0gdG9wb2xvZ3lba1dhaXRRdWV1ZV0ubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVtYmVyc1RvUHJvY2VzczsgKytpKSB7XG4gICAgICAgIGNvbnN0IHdhaXRRdWV1ZU1lbWJlciA9IHRvcG9sb2d5W2tXYWl0UXVldWVdLnNoaWZ0KCk7XG4gICAgICAgIGlmICghd2FpdFF1ZXVlTWVtYmVyKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2FpdFF1ZXVlTWVtYmVyW2tDYW5jZWxsZWRdKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2VsZWN0ZWREZXNjcmlwdGlvbnM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzZXJ2ZXJTZWxlY3RvciA9IHdhaXRRdWV1ZU1lbWJlci5zZXJ2ZXJTZWxlY3RvcjtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVzY3JpcHRpb25zID0gc2VydmVyU2VsZWN0b3JcbiAgICAgICAgICAgICAgICA/IHNlcnZlclNlbGVjdG9yKHRvcG9sb2d5LmRlc2NyaXB0aW9uLCBzZXJ2ZXJEZXNjcmlwdGlvbnMpXG4gICAgICAgICAgICAgICAgOiBzZXJ2ZXJEZXNjcmlwdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmICh3YWl0UXVldWVNZW1iZXIudGltZXIpIHtcbiAgICAgICAgICAgICAgICAoMCwgdGltZXJzXzEuY2xlYXJUaW1lb3V0KSh3YWl0UXVldWVNZW1iZXIudGltZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2FpdFF1ZXVlTWVtYmVyLmNhbGxiYWNrKGUpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNlbGVjdGVkU2VydmVyO1xuICAgICAgICBpZiAoc2VsZWN0ZWREZXNjcmlwdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0b3BvbG9neVtrV2FpdFF1ZXVlXS5wdXNoKHdhaXRRdWV1ZU1lbWJlcik7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZWxlY3RlZERlc2NyaXB0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkU2VydmVyID0gdG9wb2xvZ3kucy5zZXJ2ZXJzLmdldChzZWxlY3RlZERlc2NyaXB0aW9uc1swXS5hZGRyZXNzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9ucyA9ICgwLCB1dGlsc18xLnNodWZmbGUpKHNlbGVjdGVkRGVzY3JpcHRpb25zLCAyKTtcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlcjEgPSB0b3BvbG9neS5zLnNlcnZlcnMuZ2V0KGRlc2NyaXB0aW9uc1swXS5hZGRyZXNzKTtcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlcjIgPSB0b3BvbG9neS5zLnNlcnZlcnMuZ2V0KGRlc2NyaXB0aW9uc1sxXS5hZGRyZXNzKTtcbiAgICAgICAgICAgIHNlbGVjdGVkU2VydmVyID1cbiAgICAgICAgICAgICAgICBzZXJ2ZXIxICYmIHNlcnZlcjIgJiYgc2VydmVyMS5zLm9wZXJhdGlvbkNvdW50IDwgc2VydmVyMi5zLm9wZXJhdGlvbkNvdW50XG4gICAgICAgICAgICAgICAgICAgID8gc2VydmVyMVxuICAgICAgICAgICAgICAgICAgICA6IHNlcnZlcjI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZWxlY3RlZFNlcnZlcikge1xuICAgICAgICAgICAgd2FpdFF1ZXVlTWVtYmVyLmNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvU2VydmVyU2VsZWN0aW9uRXJyb3IoJ3NlcnZlciBzZWxlY3Rpb24gcmV0dXJuZWQgYSBzZXJ2ZXIgZGVzY3JpcHRpb24gYnV0IHRoZSBzZXJ2ZXIgd2FzIG5vdCBmb3VuZCBpbiB0aGUgdG9wb2xvZ3knLCB0b3BvbG9neS5kZXNjcmlwdGlvbikpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gd2FpdFF1ZXVlTWVtYmVyLnRyYW5zYWN0aW9uO1xuICAgICAgICBpZiAoaXNTaGFyZGVkICYmIHRyYW5zYWN0aW9uICYmIHRyYW5zYWN0aW9uLmlzQWN0aXZlICYmIHNlbGVjdGVkU2VydmVyKSB7XG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5waW5TZXJ2ZXIoc2VsZWN0ZWRTZXJ2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3YWl0UXVldWVNZW1iZXIudGltZXIpIHtcbiAgICAgICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKHdhaXRRdWV1ZU1lbWJlci50aW1lcik7XG4gICAgICAgIH1cbiAgICAgICAgd2FpdFF1ZXVlTWVtYmVyLmNhbGxiYWNrKHVuZGVmaW5lZCwgc2VsZWN0ZWRTZXJ2ZXIpO1xuICAgIH1cbiAgICBpZiAodG9wb2xvZ3lba1dhaXRRdWV1ZV0ubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBlbnN1cmUgYWxsIHNlcnZlciBtb25pdG9ycyBhdHRlbXB0IG1vbml0b3Jpbmcgc29vblxuICAgICAgICBmb3IgKGNvbnN0IFssIHNlcnZlcl0gb2YgdG9wb2xvZ3kucy5zZXJ2ZXJzKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uIHNjaGVkdWxlU2VydmVyQ2hlY2soKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZlci5yZXF1ZXN0Q2hlY2soKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gaXNTdGFsZVNlcnZlckRlc2NyaXB0aW9uKHRvcG9sb2d5RGVzY3JpcHRpb24sIGluY29taW5nU2VydmVyRGVzY3JpcHRpb24pIHtcbiAgICBjb25zdCBjdXJyZW50U2VydmVyRGVzY3JpcHRpb24gPSB0b3BvbG9neURlc2NyaXB0aW9uLnNlcnZlcnMuZ2V0KGluY29taW5nU2VydmVyRGVzY3JpcHRpb24uYWRkcmVzcyk7XG4gICAgY29uc3QgY3VycmVudFRvcG9sb2d5VmVyc2lvbiA9IGN1cnJlbnRTZXJ2ZXJEZXNjcmlwdGlvbj8udG9wb2xvZ3lWZXJzaW9uO1xuICAgIHJldHVybiAoKDAsIHNlcnZlcl9kZXNjcmlwdGlvbl8xLmNvbXBhcmVUb3BvbG9neVZlcnNpb24pKGN1cnJlbnRUb3BvbG9neVZlcnNpb24sIGluY29taW5nU2VydmVyRGVzY3JpcHRpb24udG9wb2xvZ3lWZXJzaW9uKSA+IDApO1xufVxuLyoqIEBwdWJsaWMgKi9cbmNsYXNzIFNlcnZlckNhcGFiaWxpdGllcyB7XG4gICAgY29uc3RydWN0b3IoaGVsbG8pIHtcbiAgICAgICAgdGhpcy5taW5XaXJlVmVyc2lvbiA9IGhlbGxvLm1pbldpcmVWZXJzaW9uIHx8IDA7XG4gICAgICAgIHRoaXMubWF4V2lyZVZlcnNpb24gPSBoZWxsby5tYXhXaXJlVmVyc2lvbiB8fCAwO1xuICAgIH1cbiAgICBnZXQgaGFzQWdncmVnYXRpb25DdXJzb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFdpcmVWZXJzaW9uID49IDE7XG4gICAgfVxuICAgIGdldCBoYXNXcml0ZUNvbW1hbmRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXhXaXJlVmVyc2lvbiA+PSAyO1xuICAgIH1cbiAgICBnZXQgaGFzVGV4dFNlYXJjaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluV2lyZVZlcnNpb24gPj0gMDtcbiAgICB9XG4gICAgZ2V0IGhhc0F1dGhDb21tYW5kcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4V2lyZVZlcnNpb24gPj0gMTtcbiAgICB9XG4gICAgZ2V0IGhhc0xpc3RDb2xsZWN0aW9uc0NvbW1hbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFdpcmVWZXJzaW9uID49IDM7XG4gICAgfVxuICAgIGdldCBoYXNMaXN0SW5kZXhlc0NvbW1hbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFdpcmVWZXJzaW9uID49IDM7XG4gICAgfVxuICAgIGdldCBzdXBwb3J0c1NuYXBzaG90UmVhZHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFdpcmVWZXJzaW9uID49IDEzO1xuICAgIH1cbiAgICBnZXQgY29tbWFuZHNUYWtlV3JpdGVDb25jZXJuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXhXaXJlVmVyc2lvbiA+PSA1O1xuICAgIH1cbiAgICBnZXQgY29tbWFuZHNUYWtlQ29sbGF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXhXaXJlVmVyc2lvbiA+PSA1O1xuICAgIH1cbn1cbmV4cG9ydHMuU2VydmVyQ2FwYWJpbGl0aWVzID0gU2VydmVyQ2FwYWJpbGl0aWVzO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9wb2xvZ3kuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiU2VydmVyQ2FwYWJpbGl0aWVzIiwiVG9wb2xvZ3kiLCJ0aW1lcnNfMSIsInJlcXVpcmUiLCJ1dGlsXzEiLCJjb25uZWN0aW9uX3N0cmluZ18xIiwiY29uc3RhbnRzXzEiLCJlcnJvcl8xIiwibW9uZ29fdHlwZXNfMSIsInJlYWRfcHJlZmVyZW5jZV8xIiwidXRpbHNfMSIsImNvbW1vbl8xIiwiZXZlbnRzXzEiLCJzZXJ2ZXJfMSIsInNlcnZlcl9kZXNjcmlwdGlvbl8xIiwic2VydmVyX3NlbGVjdGlvbl8xIiwic3J2X3BvbGxpbmdfMSIsInRvcG9sb2d5X2Rlc2NyaXB0aW9uXzEiLCJnbG9iYWxUb3BvbG9neUNvdW50ZXIiLCJzdGF0ZVRyYW5zaXRpb24iLCJtYWtlU3RhdGVNYWNoaW5lIiwiU1RBVEVfQ0xPU0VEIiwiU1RBVEVfQ09OTkVDVElORyIsIlNUQVRFX0NMT1NJTkciLCJTVEFURV9DT05ORUNURUQiLCJrQ2FuY2VsbGVkIiwiU3ltYm9sIiwia1dhaXRRdWV1ZSIsIlR5cGVkRXZlbnRFbWl0dGVyIiwiY29uc3RydWN0b3IiLCJjbGllbnQiLCJzZWVkcyIsIm9wdGlvbnMiLCJzZWxlY3RTZXJ2ZXJBc3luYyIsInByb21pc2lmeSIsInNlbGVjdG9yIiwiY2FsbGJhY2siLCJzZWxlY3RTZXJ2ZXIiLCJob3N0cyIsIkhvc3RBZGRyZXNzIiwiZnJvbVN0cmluZyIsImZyb21FbnRyaWVzIiwiREVGQVVMVF9PUFRJT05TIiwiZW50cmllcyIsIkZFQVRVUkVfRkxBR1MiLCJBcnJheSIsImlzQXJyYXkiLCJzZWVkbGlzdCIsInNlZWQiLCJwdXNoIiwiTW9uZ29SdW50aW1lRXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwidG9wb2xvZ3lUeXBlIiwidG9wb2xvZ3lUeXBlRnJvbU9wdGlvbnMiLCJ0b3BvbG9neUlkIiwic2VsZWN0ZWRIb3N0cyIsInNydk1heEhvc3RzIiwibGVuZ3RoIiwic2h1ZmZsZSIsInNlcnZlckRlc2NyaXB0aW9ucyIsIk1hcCIsImhvc3RBZGRyZXNzIiwic2V0IiwidG9TdHJpbmciLCJTZXJ2ZXJEZXNjcmlwdGlvbiIsIkxpc3QiLCJzIiwiaWQiLCJzdGF0ZSIsImRlc2NyaXB0aW9uIiwiVG9wb2xvZ3lEZXNjcmlwdGlvbiIsInJlcGxpY2FTZXQiLCJ1bmRlZmluZWQiLCJzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMiLCJoZWFydGJlYXRGcmVxdWVuY3lNUyIsIm1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TIiwic2VydmVycyIsImNyZWRlbnRpYWxzIiwiY2x1c3RlclRpbWUiLCJjb25uZWN0aW9uVGltZXJzIiwiU2V0IiwiZGV0ZWN0U2hhcmRlZFRvcG9sb2d5IiwiZXYiLCJkZXRlY3RTcnZSZWNvcmRzIiwic3J2SG9zdCIsImxvYWRCYWxhbmNlZCIsInNydlBvbGxlciIsIlNydlBvbGxlciIsInNydlNlcnZpY2VOYW1lIiwib24iLCJUT1BPTE9HWV9ERVNDUklQVElPTl9DSEFOR0VEIiwiZXZlbnQiLCJwcmV2aW91c1R5cGUiLCJwcmV2aW91c0Rlc2NyaXB0aW9uIiwidHlwZSIsIm5ld1R5cGUiLCJuZXdEZXNjcmlwdGlvbiIsInRyYW5zaXRpb25Ub1NoYXJkZWQiLCJUb3BvbG9neVR5cGUiLCJTaGFyZGVkIiwic3J2TGlzdGVuZXJzIiwibGlzdGVuZXJzIiwiU1JWX1JFQ09SRF9ESVNDT1ZFUlkiLCJsaXN0ZW5pbmdUb1NydlBvbGxpbmciLCJpbmNsdWRlcyIsInN0YXJ0IiwicHJldmlvdXNUb3BvbG9neURlc2NyaXB0aW9uIiwidXBkYXRlRnJvbVNydlBvbGxpbmdFdmVudCIsInVwZGF0ZVNlcnZlcnMiLCJlbWl0IiwiVG9wb2xvZ3lEZXNjcmlwdGlvbkNoYW5nZWRFdmVudCIsImNhcGFiaWxpdGllcyIsImxhc3RIZWxsbyIsImNvbm5lY3QiLCJUT1BPTE9HWV9PUEVOSU5HIiwiVG9wb2xvZ3lPcGVuaW5nRXZlbnQiLCJVbmtub3duIiwiZnJvbSIsInZhbHVlcyIsIm1hcCIsInNlcnZlckRlc2NyaXB0aW9uIiwiYWRkcmVzcyIsImNyZWF0ZUFuZENvbm5lY3RTZXJ2ZXIiLCJzZXJ2ZXJVcGRhdGVIYW5kbGVyIiwiZXhpdFdpdGhFcnJvciIsImVycm9yIiwiRVJST1IiLCJyZWFkUHJlZmVyZW5jZSIsIlJlYWRQcmVmZXJlbmNlIiwicHJpbWFyeSIsInJlYWRQcmVmZXJlbmNlU2VydmVyU2VsZWN0b3IiLCJlcnIiLCJzZXJ2ZXIiLCJjbG9zZSIsImZvcmNlIiwic2tpcFBpbmdPbkNvbm5lY3QiLCJmb3IiLCJjb21tYW5kIiwibnMiLCJwaW5nIiwiT1BFTiIsIkNPTk5FQ1QiLCJkZXN0cm95ZWRTZXJ2ZXJzIiwiZGVzdHJveVNlcnZlciIsIlByb21pc2UiLCJhbGwiLCJ0aGVuIiwiY2xlYXIiLCJkcmFpbldhaXRRdWV1ZSIsIk1vbmdvVG9wb2xvZ3lDbG9zZWRFcnJvciIsImRyYWluVGltZXJRdWV1ZSIsInN0b3AiLCJyZW1vdmVMaXN0ZW5lciIsIlRPUE9MT0dZX0NMT1NFRCIsIlRvcG9sb2d5Q2xvc2VkRXZlbnQiLCJmaW5hbGx5Iiwic2VydmVyU2VsZWN0b3IiLCJ0cmFuc2xhdGUiLCJhc3NpZ24iLCJpc1NoYXJkZWQiLCJzZXNzaW9uIiwidHJhbnNhY3Rpb24iLCJ3YWl0UXVldWVNZW1iZXIiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJ0aW1lb3V0RXJyb3IiLCJNb25nb1NlcnZlclNlbGVjdGlvbkVycm9yIiwicHJvY2Vzc1dhaXRRdWV1ZSIsImhhc1NlcnZlciIsImlzU3RhbGVTZXJ2ZXJEZXNjcmlwdGlvbiIsInByZXZpb3VzU2VydmVyRGVzY3JpcHRpb24iLCJnZXQiLCIkY2x1c3RlclRpbWUiLCJfYWR2YW5jZUNsdXN0ZXJUaW1lIiwiZXF1YWxEZXNjcmlwdGlvbnMiLCJlcXVhbHMiLCJ1cGRhdGUiLCJjb21wYXRpYmlsaXR5RXJyb3IiLCJNb25nb0NvbXBhdGliaWxpdHlFcnJvciIsIlNFUlZFUl9ERVNDUklQVElPTl9DSEFOR0VEIiwiU2VydmVyRGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQiLCJhdXRoIiwiY2xpZW50TWV0YWRhdGEiLCJtZXRhZGF0YSIsImlzQ29ubmVjdGVkIiwiaXNEZXN0cm95ZWQiLCJzZCIsImZpbHRlciIsIlNlcnZlclR5cGUiLCJyZXN1bHQiLCJtYXhXaXJlVmVyc2lvbiIsImNvbW1vbldpcmVWZXJzaW9uIiwibG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyIsIlNFUlZFUl9PUEVOSU5HIiwiU0VSVkVSX0NMT1NFRCIsIkNMT1NFIiwiVElNRU9VVCIsInRvcG9sb2d5IiwiTE9DQUxfU0VSVkVSX0VWRU5UUyIsInJlbW92ZUFsbExpc3RlbmVycyIsImRlc3Ryb3kiLCJTZXJ2ZXJDbG9zZWRFdmVudCIsIlNFUlZFUl9SRUxBWV9FVkVOVFMiLCJkaXJlY3RDb25uZWN0aW9uIiwiU2luZ2xlIiwiUmVwbGljYVNldE5vUHJpbWFyeSIsIkxvYWRCYWxhbmNlZCIsIlNlcnZlck9wZW5pbmdFdmVudCIsIlNlcnZlciIsImUiLCJERVNDUklQVElPTl9SRUNFSVZFRCIsImluY29taW5nU2VydmVyRGVzY3JpcHRpb24iLCJoYXMiLCJNb25nb0Vycm9yIiwiaGFzRXJyb3JMYWJlbCIsIk1vbmdvRXJyb3JMYWJlbCIsIlJlc2V0UG9vbCIsImludGVycnVwdEluVXNlQ29ubmVjdGlvbnMiLCJJbnRlcnJ1cHRJblVzZUNvbm5lY3Rpb25zIiwicG9vbCIsIm5ld1RvcG9sb2d5VHlwZSIsInNob3VsZE1hcmtQb29sUmVhZHkiLCJpc0RhdGFCZWFyaW5nIiwicmVhZHkiLCJlbnRyeSIsInNlcnZlckFkZHJlc3MiLCJkZWxldGUiLCJxdWV1ZSIsInNoaWZ0IiwiY2xlYXJUaW1lb3V0IiwibWVtYmVyc1RvUHJvY2VzcyIsImkiLCJzZWxlY3RlZERlc2NyaXB0aW9ucyIsInNlbGVjdGVkU2VydmVyIiwiZGVzY3JpcHRpb25zIiwic2VydmVyMSIsInNlcnZlcjIiLCJvcGVyYXRpb25Db3VudCIsImlzQWN0aXZlIiwicGluU2VydmVyIiwicHJvY2VzcyIsIm5leHRUaWNrIiwic2NoZWR1bGVTZXJ2ZXJDaGVjayIsInJlcXVlc3RDaGVjayIsInRvcG9sb2d5RGVzY3JpcHRpb24iLCJjdXJyZW50U2VydmVyRGVzY3JpcHRpb24iLCJjdXJyZW50VG9wb2xvZ3lWZXJzaW9uIiwidG9wb2xvZ3lWZXJzaW9uIiwiY29tcGFyZVRvcG9sb2d5VmVyc2lvbiIsImhlbGxvIiwibWluV2lyZVZlcnNpb24iLCJoYXNBZ2dyZWdhdGlvbkN1cnNvciIsImhhc1dyaXRlQ29tbWFuZHMiLCJoYXNUZXh0U2VhcmNoIiwiaGFzQXV0aENvbW1hbmRzIiwiaGFzTGlzdENvbGxlY3Rpb25zQ29tbWFuZCIsImhhc0xpc3RJbmRleGVzQ29tbWFuZCIsInN1cHBvcnRzU25hcHNob3RSZWFkcyIsImNvbW1hbmRzVGFrZVdyaXRlQ29uY2VybiIsImNvbW1hbmRzVGFrZUNvbGxhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/topology.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/topology_description.js":
/*!***************************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/topology_description.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.TopologyDescription = void 0;\nconst WIRE_CONSTANTS = __webpack_require__(/*! ../cmap/wire_protocol/constants */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst server_description_1 = __webpack_require__(/*! ./server_description */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_description.js\");\n// constants related to compatibility checks\nconst MIN_SUPPORTED_SERVER_VERSION = WIRE_CONSTANTS.MIN_SUPPORTED_SERVER_VERSION;\nconst MAX_SUPPORTED_SERVER_VERSION = WIRE_CONSTANTS.MAX_SUPPORTED_SERVER_VERSION;\nconst MIN_SUPPORTED_WIRE_VERSION = WIRE_CONSTANTS.MIN_SUPPORTED_WIRE_VERSION;\nconst MAX_SUPPORTED_WIRE_VERSION = WIRE_CONSTANTS.MAX_SUPPORTED_WIRE_VERSION;\nconst MONGOS_OR_UNKNOWN = new Set([\n    common_1.ServerType.Mongos,\n    common_1.ServerType.Unknown\n]);\nconst MONGOS_OR_STANDALONE = new Set([\n    common_1.ServerType.Mongos,\n    common_1.ServerType.Standalone\n]);\nconst NON_PRIMARY_RS_MEMBERS = new Set([\n    common_1.ServerType.RSSecondary,\n    common_1.ServerType.RSArbiter,\n    common_1.ServerType.RSOther\n]);\n/**\n * Representation of a deployment of servers\n * @public\n */ class TopologyDescription {\n    /**\n     * Create a TopologyDescription\n     */ constructor(topologyType, serverDescriptions = null, setName = null, maxSetVersion = null, maxElectionId = null, commonWireVersion = null, options = null){\n        options = options ?? {};\n        this.type = topologyType ?? common_1.TopologyType.Unknown;\n        this.servers = serverDescriptions ?? new Map();\n        this.stale = false;\n        this.compatible = true;\n        this.heartbeatFrequencyMS = options.heartbeatFrequencyMS ?? 0;\n        this.localThresholdMS = options.localThresholdMS ?? 15;\n        this.setName = setName ?? null;\n        this.maxElectionId = maxElectionId ?? null;\n        this.maxSetVersion = maxSetVersion ?? null;\n        this.commonWireVersion = commonWireVersion ?? 0;\n        // determine server compatibility\n        for (const serverDescription of this.servers.values()){\n            // Load balancer mode is always compatible.\n            if (serverDescription.type === common_1.ServerType.Unknown || serverDescription.type === common_1.ServerType.LoadBalancer) {\n                continue;\n            }\n            if (serverDescription.minWireVersion > MAX_SUPPORTED_WIRE_VERSION) {\n                this.compatible = false;\n                this.compatibilityError = `Server at ${serverDescription.address} requires wire version ${serverDescription.minWireVersion}, but this version of the driver only supports up to ${MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${MAX_SUPPORTED_SERVER_VERSION})`;\n            }\n            if (serverDescription.maxWireVersion < MIN_SUPPORTED_WIRE_VERSION) {\n                this.compatible = false;\n                this.compatibilityError = `Server at ${serverDescription.address} reports wire version ${serverDescription.maxWireVersion}, but this version of the driver requires at least ${MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${MIN_SUPPORTED_SERVER_VERSION}).`;\n                break;\n            }\n        }\n        // Whenever a client updates the TopologyDescription from a hello response, it MUST set\n        // TopologyDescription.logicalSessionTimeoutMinutes to the smallest logicalSessionTimeoutMinutes\n        // value among ServerDescriptions of all data-bearing server types. If any have a null\n        // logicalSessionTimeoutMinutes, then TopologyDescription.logicalSessionTimeoutMinutes MUST be\n        // set to null.\n        this.logicalSessionTimeoutMinutes = null;\n        for (const [, server] of this.servers){\n            if (server.isReadable) {\n                if (server.logicalSessionTimeoutMinutes == null) {\n                    // If any of the servers have a null logicalSessionsTimeout, then the whole topology does\n                    this.logicalSessionTimeoutMinutes = null;\n                    break;\n                }\n                if (this.logicalSessionTimeoutMinutes == null) {\n                    // First server with a non null logicalSessionsTimeout\n                    this.logicalSessionTimeoutMinutes = server.logicalSessionTimeoutMinutes;\n                    continue;\n                }\n                // Always select the smaller of the:\n                // current server logicalSessionsTimeout and the topologies logicalSessionsTimeout\n                this.logicalSessionTimeoutMinutes = Math.min(this.logicalSessionTimeoutMinutes, server.logicalSessionTimeoutMinutes);\n            }\n        }\n    }\n    /**\n     * Returns a new TopologyDescription based on the SrvPollingEvent\n     * @internal\n     */ updateFromSrvPollingEvent(ev, srvMaxHosts = 0) {\n        /** The SRV addresses defines the set of addresses we should be using */ const incomingHostnames = ev.hostnames();\n        const currentHostnames = new Set(this.servers.keys());\n        const hostnamesToAdd = new Set(incomingHostnames);\n        const hostnamesToRemove = new Set();\n        for (const hostname of currentHostnames){\n            // filter hostnamesToAdd (made from incomingHostnames) down to what is *not* present in currentHostnames\n            hostnamesToAdd.delete(hostname);\n            if (!incomingHostnames.has(hostname)) {\n                // If the SRV Records no longer include this hostname\n                // we have to stop using it\n                hostnamesToRemove.add(hostname);\n            }\n        }\n        if (hostnamesToAdd.size === 0 && hostnamesToRemove.size === 0) {\n            // No new hosts to add and none to remove\n            return this;\n        }\n        const serverDescriptions = new Map(this.servers);\n        for (const removedHost of hostnamesToRemove){\n            serverDescriptions.delete(removedHost);\n        }\n        if (hostnamesToAdd.size > 0) {\n            if (srvMaxHosts === 0) {\n                // Add all!\n                for (const hostToAdd of hostnamesToAdd){\n                    serverDescriptions.set(hostToAdd, new server_description_1.ServerDescription(hostToAdd));\n                }\n            } else if (serverDescriptions.size < srvMaxHosts) {\n                // Add only the amount needed to get us back to srvMaxHosts\n                const selectedHosts = (0, utils_1.shuffle)(hostnamesToAdd, srvMaxHosts - serverDescriptions.size);\n                for (const selectedHostToAdd of selectedHosts){\n                    serverDescriptions.set(selectedHostToAdd, new server_description_1.ServerDescription(selectedHostToAdd));\n                }\n            }\n        }\n        return new TopologyDescription(this.type, serverDescriptions, this.setName, this.maxSetVersion, this.maxElectionId, this.commonWireVersion, {\n            heartbeatFrequencyMS: this.heartbeatFrequencyMS,\n            localThresholdMS: this.localThresholdMS\n        });\n    }\n    /**\n     * Returns a copy of this description updated with a given ServerDescription\n     * @internal\n     */ update(serverDescription) {\n        const address = serverDescription.address;\n        // potentially mutated values\n        let { type: topologyType, setName, maxSetVersion, maxElectionId, commonWireVersion } = this;\n        const serverType = serverDescription.type;\n        const serverDescriptions = new Map(this.servers);\n        // update common wire version\n        if (serverDescription.maxWireVersion !== 0) {\n            if (commonWireVersion == null) {\n                commonWireVersion = serverDescription.maxWireVersion;\n            } else {\n                commonWireVersion = Math.min(commonWireVersion, serverDescription.maxWireVersion);\n            }\n        }\n        if (typeof serverDescription.setName === \"string\" && typeof setName === \"string\" && serverDescription.setName !== setName) {\n            if (topologyType === common_1.TopologyType.Single) {\n                // \"Single\" Topology with setName mismatch is direct connection usage, mark unknown do not remove\n                serverDescription = new server_description_1.ServerDescription(address);\n            } else {\n                serverDescriptions.delete(address);\n            }\n        }\n        // update the actual server description\n        serverDescriptions.set(address, serverDescription);\n        if (topologyType === common_1.TopologyType.Single) {\n            // once we are defined as single, that never changes\n            return new TopologyDescription(common_1.TopologyType.Single, serverDescriptions, setName, maxSetVersion, maxElectionId, commonWireVersion, {\n                heartbeatFrequencyMS: this.heartbeatFrequencyMS,\n                localThresholdMS: this.localThresholdMS\n            });\n        }\n        if (topologyType === common_1.TopologyType.Unknown) {\n            if (serverType === common_1.ServerType.Standalone && this.servers.size !== 1) {\n                serverDescriptions.delete(address);\n            } else {\n                topologyType = topologyTypeForServerType(serverType);\n            }\n        }\n        if (topologyType === common_1.TopologyType.Sharded) {\n            if (!MONGOS_OR_UNKNOWN.has(serverType)) {\n                serverDescriptions.delete(address);\n            }\n        }\n        if (topologyType === common_1.TopologyType.ReplicaSetNoPrimary) {\n            if (MONGOS_OR_STANDALONE.has(serverType)) {\n                serverDescriptions.delete(address);\n            }\n            if (serverType === common_1.ServerType.RSPrimary) {\n                const result = updateRsFromPrimary(serverDescriptions, serverDescription, setName, maxSetVersion, maxElectionId);\n                topologyType = result[0];\n                setName = result[1];\n                maxSetVersion = result[2];\n                maxElectionId = result[3];\n            } else if (NON_PRIMARY_RS_MEMBERS.has(serverType)) {\n                const result = updateRsNoPrimaryFromMember(serverDescriptions, serverDescription, setName);\n                topologyType = result[0];\n                setName = result[1];\n            }\n        }\n        if (topologyType === common_1.TopologyType.ReplicaSetWithPrimary) {\n            if (MONGOS_OR_STANDALONE.has(serverType)) {\n                serverDescriptions.delete(address);\n                topologyType = checkHasPrimary(serverDescriptions);\n            } else if (serverType === common_1.ServerType.RSPrimary) {\n                const result = updateRsFromPrimary(serverDescriptions, serverDescription, setName, maxSetVersion, maxElectionId);\n                topologyType = result[0];\n                setName = result[1];\n                maxSetVersion = result[2];\n                maxElectionId = result[3];\n            } else if (NON_PRIMARY_RS_MEMBERS.has(serverType)) {\n                topologyType = updateRsWithPrimaryFromMember(serverDescriptions, serverDescription, setName);\n            } else {\n                topologyType = checkHasPrimary(serverDescriptions);\n            }\n        }\n        return new TopologyDescription(topologyType, serverDescriptions, setName, maxSetVersion, maxElectionId, commonWireVersion, {\n            heartbeatFrequencyMS: this.heartbeatFrequencyMS,\n            localThresholdMS: this.localThresholdMS\n        });\n    }\n    get error() {\n        const descriptionsWithError = Array.from(this.servers.values()).filter((sd)=>sd.error);\n        if (descriptionsWithError.length > 0) {\n            return descriptionsWithError[0].error;\n        }\n        return null;\n    }\n    /**\n     * Determines if the topology description has any known servers\n     */ get hasKnownServers() {\n        return Array.from(this.servers.values()).some((sd)=>sd.type !== common_1.ServerType.Unknown);\n    }\n    /**\n     * Determines if this topology description has a data-bearing server available.\n     */ get hasDataBearingServers() {\n        return Array.from(this.servers.values()).some((sd)=>sd.isDataBearing);\n    }\n    /**\n     * Determines if the topology has a definition for the provided address\n     * @internal\n     */ hasServer(address) {\n        return this.servers.has(address);\n    }\n}\nexports.TopologyDescription = TopologyDescription;\nfunction topologyTypeForServerType(serverType) {\n    switch(serverType){\n        case common_1.ServerType.Standalone:\n            return common_1.TopologyType.Single;\n        case common_1.ServerType.Mongos:\n            return common_1.TopologyType.Sharded;\n        case common_1.ServerType.RSPrimary:\n            return common_1.TopologyType.ReplicaSetWithPrimary;\n        case common_1.ServerType.RSOther:\n        case common_1.ServerType.RSSecondary:\n            return common_1.TopologyType.ReplicaSetNoPrimary;\n        default:\n            return common_1.TopologyType.Unknown;\n    }\n}\nfunction updateRsFromPrimary(serverDescriptions, serverDescription, setName = null, maxSetVersion = null, maxElectionId = null) {\n    setName = setName || serverDescription.setName;\n    if (setName !== serverDescription.setName) {\n        serverDescriptions.delete(serverDescription.address);\n        return [\n            checkHasPrimary(serverDescriptions),\n            setName,\n            maxSetVersion,\n            maxElectionId\n        ];\n    }\n    if (serverDescription.maxWireVersion >= 17) {\n        const electionIdComparison = (0, utils_1.compareObjectId)(maxElectionId, serverDescription.electionId);\n        const maxElectionIdIsEqual = electionIdComparison === 0;\n        const maxElectionIdIsLess = electionIdComparison === -1;\n        const maxSetVersionIsLessOrEqual = (maxSetVersion ?? -1) <= (serverDescription.setVersion ?? -1);\n        if (maxElectionIdIsLess || maxElectionIdIsEqual && maxSetVersionIsLessOrEqual) {\n            // The reported electionId was greater\n            // or the electionId was equal and reported setVersion was greater\n            // Always update both values, they are a tuple\n            maxElectionId = serverDescription.electionId;\n            maxSetVersion = serverDescription.setVersion;\n        } else {\n            // Stale primary\n            // replace serverDescription with a default ServerDescription of type \"Unknown\"\n            serverDescriptions.set(serverDescription.address, new server_description_1.ServerDescription(serverDescription.address));\n            return [\n                checkHasPrimary(serverDescriptions),\n                setName,\n                maxSetVersion,\n                maxElectionId\n            ];\n        }\n    } else {\n        const electionId = serverDescription.electionId ? serverDescription.electionId : null;\n        if (serverDescription.setVersion && electionId) {\n            if (maxSetVersion && maxElectionId) {\n                if (maxSetVersion > serverDescription.setVersion || (0, utils_1.compareObjectId)(maxElectionId, electionId) > 0) {\n                    // this primary is stale, we must remove it\n                    serverDescriptions.set(serverDescription.address, new server_description_1.ServerDescription(serverDescription.address));\n                    return [\n                        checkHasPrimary(serverDescriptions),\n                        setName,\n                        maxSetVersion,\n                        maxElectionId\n                    ];\n                }\n            }\n            maxElectionId = serverDescription.electionId;\n        }\n        if (serverDescription.setVersion != null && (maxSetVersion == null || serverDescription.setVersion > maxSetVersion)) {\n            maxSetVersion = serverDescription.setVersion;\n        }\n    }\n    // We've heard from the primary. Is it the same primary as before?\n    for (const [address, server] of serverDescriptions){\n        if (server.type === common_1.ServerType.RSPrimary && server.address !== serverDescription.address) {\n            // Reset old primary's type to Unknown.\n            serverDescriptions.set(address, new server_description_1.ServerDescription(server.address));\n            break;\n        }\n    }\n    // Discover new hosts from this primary's response.\n    serverDescription.allHosts.forEach((address)=>{\n        if (!serverDescriptions.has(address)) {\n            serverDescriptions.set(address, new server_description_1.ServerDescription(address));\n        }\n    });\n    // Remove hosts not in the response.\n    const currentAddresses = Array.from(serverDescriptions.keys());\n    const responseAddresses = serverDescription.allHosts;\n    currentAddresses.filter((addr)=>responseAddresses.indexOf(addr) === -1).forEach((address)=>{\n        serverDescriptions.delete(address);\n    });\n    return [\n        checkHasPrimary(serverDescriptions),\n        setName,\n        maxSetVersion,\n        maxElectionId\n    ];\n}\nfunction updateRsWithPrimaryFromMember(serverDescriptions, serverDescription, setName = null) {\n    if (setName == null) {\n        // TODO(NODE-3483): should be an appropriate runtime error\n        throw new error_1.MongoRuntimeError('Argument \"setName\" is required if connected to a replica set');\n    }\n    if (setName !== serverDescription.setName || serverDescription.me && serverDescription.address !== serverDescription.me) {\n        serverDescriptions.delete(serverDescription.address);\n    }\n    return checkHasPrimary(serverDescriptions);\n}\nfunction updateRsNoPrimaryFromMember(serverDescriptions, serverDescription, setName = null) {\n    const topologyType = common_1.TopologyType.ReplicaSetNoPrimary;\n    setName = setName ?? serverDescription.setName;\n    if (setName !== serverDescription.setName) {\n        serverDescriptions.delete(serverDescription.address);\n        return [\n            topologyType,\n            setName\n        ];\n    }\n    serverDescription.allHosts.forEach((address)=>{\n        if (!serverDescriptions.has(address)) {\n            serverDescriptions.set(address, new server_description_1.ServerDescription(address));\n        }\n    });\n    if (serverDescription.me && serverDescription.address !== serverDescription.me) {\n        serverDescriptions.delete(serverDescription.address);\n    }\n    return [\n        topologyType,\n        setName\n    ];\n}\nfunction checkHasPrimary(serverDescriptions) {\n    for (const serverDescription of serverDescriptions.values()){\n        if (serverDescription.type === common_1.ServerType.RSPrimary) {\n            return common_1.TopologyType.ReplicaSetWithPrimary;\n        }\n    }\n    return common_1.TopologyType.ReplicaSetNoPrimary;\n} //# sourceMappingURL=topology_description.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS90b3BvbG9neV9kZXNjcmlwdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMkJBQTJCLEdBQUcsS0FBSztBQUNuQyxNQUFNRyxpQkFBaUJDLG1CQUFPQSxDQUFDLHlHQUFpQztBQUNoRSxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRyxXQUFXSCxtQkFBT0EsQ0FBQyxpRUFBVTtBQUNuQyxNQUFNSSx1QkFBdUJKLG1CQUFPQSxDQUFDLHlGQUFzQjtBQUMzRCw0Q0FBNEM7QUFDNUMsTUFBTUssK0JBQStCTixlQUFlTSw0QkFBNEI7QUFDaEYsTUFBTUMsK0JBQStCUCxlQUFlTyw0QkFBNEI7QUFDaEYsTUFBTUMsNkJBQTZCUixlQUFlUSwwQkFBMEI7QUFDNUUsTUFBTUMsNkJBQTZCVCxlQUFlUywwQkFBMEI7QUFDNUUsTUFBTUMsb0JBQW9CLElBQUlDLElBQUk7SUFBQ1AsU0FBU1EsVUFBVSxDQUFDQyxNQUFNO0lBQUVULFNBQVNRLFVBQVUsQ0FBQ0UsT0FBTztDQUFDO0FBQzNGLE1BQU1DLHVCQUF1QixJQUFJSixJQUFJO0lBQUNQLFNBQVNRLFVBQVUsQ0FBQ0MsTUFBTTtJQUFFVCxTQUFTUSxVQUFVLENBQUNJLFVBQVU7Q0FBQztBQUNqRyxNQUFNQyx5QkFBeUIsSUFBSU4sSUFBSTtJQUNuQ1AsU0FBU1EsVUFBVSxDQUFDTSxXQUFXO0lBQy9CZCxTQUFTUSxVQUFVLENBQUNPLFNBQVM7SUFDN0JmLFNBQVNRLFVBQVUsQ0FBQ1EsT0FBTztDQUM5QjtBQUNEOzs7Q0FHQyxHQUNELE1BQU1yQjtJQUNGOztLQUVDLEdBQ0RzQixZQUFZQyxZQUFZLEVBQUVDLHFCQUFxQixJQUFJLEVBQUVDLFVBQVUsSUFBSSxFQUFFQyxnQkFBZ0Is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aUUsUUFBUSxDQUFDQyxPQUFPLENBQUMsQ0FBQzdEO1FBQ2hDLElBQUksQ0FBQ25CLG1CQUFtQnFDLEdBQUcsQ0FBQ2xCLFVBQVU7WUFDbENuQixtQkFBbUIwQyxHQUFHLENBQUN2QixTQUFTLElBQUlyQyxxQkFBcUI2RCxpQkFBaUIsQ0FBQ3hCO1FBQy9FO0lBQ0o7SUFDQSxJQUFJTCxrQkFBa0J3RSxFQUFFLElBQUl4RSxrQkFBa0JLLE9BQU8sS0FBS0wsa0JBQWtCd0UsRUFBRSxFQUFFO1FBQzVFdEYsbUJBQW1Cb0MsTUFBTSxDQUFDdEIsa0JBQWtCSyxPQUFPO0lBQ3ZEO0lBQ0EsT0FBTztRQUFDcEI7UUFBY0U7S0FBUTtBQUNsQztBQUNBLFNBQVN5RCxnQkFBZ0IxRCxrQkFBa0I7SUFDdkMsS0FBSyxNQUFNYyxxQkFBcUJkLG1CQUFtQmUsTUFBTSxHQUFJO1FBQ3pELElBQUlELGtCQUFrQlIsSUFBSSxLQUFLekIsU0FBU1EsVUFBVSxDQUFDZ0UsU0FBUyxFQUFFO1lBQzFELE9BQU94RSxTQUFTMEIsWUFBWSxDQUFDa0QscUJBQXFCO1FBQ3REO0lBQ0o7SUFDQSxPQUFPNUUsU0FBUzBCLFlBQVksQ0FBQzZDLG1CQUFtQjtBQUNwRCxFQUNBLGdEQUFnRCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9zZGFtL3RvcG9sb2d5X2Rlc2NyaXB0aW9uLmpzPzFiZWMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlRvcG9sb2d5RGVzY3JpcHRpb24gPSB2b2lkIDA7XG5jb25zdCBXSVJFX0NPTlNUQU5UUyA9IHJlcXVpcmUoXCIuLi9jbWFwL3dpcmVfcHJvdG9jb2wvY29uc3RhbnRzXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBjb21tb25fMSA9IHJlcXVpcmUoXCIuL2NvbW1vblwiKTtcbmNvbnN0IHNlcnZlcl9kZXNjcmlwdGlvbl8xID0gcmVxdWlyZShcIi4vc2VydmVyX2Rlc2NyaXB0aW9uXCIpO1xuLy8gY29uc3RhbnRzIHJlbGF0ZWQgdG8gY29tcGF0aWJpbGl0eSBjaGVja3NcbmNvbnN0IE1JTl9TVVBQT1JURURfU0VSVkVSX1ZFUlNJT04gPSBXSVJFX0NPTlNUQU5UUy5NSU5fU1VQUE9SVEVEX1NFUlZFUl9WRVJTSU9OO1xuY29uc3QgTUFYX1NVUFBPUlRFRF9TRVJWRVJfVkVSU0lPTiA9IFdJUkVfQ09OU1RBTlRTLk1BWF9TVVBQT1JURURfU0VSVkVSX1ZFUlNJT047XG5jb25zdCBNSU5fU1VQUE9SVEVEX1dJUkVfVkVSU0lPTiA9IFdJUkVfQ09OU1RBTlRTLk1JTl9TVVBQT1JURURfV0lSRV9WRVJTSU9OO1xuY29uc3QgTUFYX1NVUFBPUlRFRF9XSVJFX1ZFUlNJT04gPSBXSVJFX0NPTlNUQU5UUy5NQVhfU1VQUE9SVEVEX1dJUkVfVkVSU0lPTjtcbmNvbnN0IE1PTkdPU19PUl9VTktOT1dOID0gbmV3IFNldChbY29tbW9uXzEuU2VydmVyVHlwZS5Nb25nb3MsIGNvbW1vbl8xLlNlcnZlclR5cGUuVW5rbm93bl0pO1xuY29uc3QgTU9OR09TX09SX1NUQU5EQUxPTkUgPSBuZXcgU2V0KFtjb21tb25fMS5TZXJ2ZXJUeXBlLk1vbmdvcywgY29tbW9uXzEuU2VydmVyVHlwZS5TdGFuZGFsb25lXSk7XG5jb25zdCBOT05fUFJJTUFSWV9SU19NRU1CRVJTID0gbmV3IFNldChbXG4gICAgY29tbW9uXzEuU2VydmVyVHlwZS5SU1NlY29uZGFyeSxcbiAgICBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTQXJiaXRlcixcbiAgICBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTT3RoZXJcbl0pO1xuLyoqXG4gKiBSZXByZXNlbnRhdGlvbiBvZiBhIGRlcGxveW1lbnQgb2Ygc2VydmVyc1xuICogQHB1YmxpY1xuICovXG5jbGFzcyBUb3BvbG9neURlc2NyaXB0aW9uIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBUb3BvbG9neURlc2NyaXB0aW9uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodG9wb2xvZ3lUeXBlLCBzZXJ2ZXJEZXNjcmlwdGlvbnMgPSBudWxsLCBzZXROYW1lID0gbnVsbCwgbWF4U2V0VmVyc2lvbiA9IG51bGwsIG1heEVsZWN0aW9uSWQgPSBudWxsLCBjb21tb25XaXJlVmVyc2lvbiA9IG51bGwsIG9wdGlvbnMgPSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8/IHt9O1xuICAgICAgICB0aGlzLnR5cGUgPSB0b3BvbG9neVR5cGUgPz8gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlVua25vd247XG4gICAgICAgIHRoaXMuc2VydmVycyA9IHNlcnZlckRlc2NyaXB0aW9ucyA/PyBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuc3RhbGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb21wYXRpYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5oZWFydGJlYXRGcmVxdWVuY3lNUyA9IG9wdGlvbnMuaGVhcnRiZWF0RnJlcXVlbmN5TVMgPz8gMDtcbiAgICAgICAgdGhpcy5sb2NhbFRocmVzaG9sZE1TID0gb3B0aW9ucy5sb2NhbFRocmVzaG9sZE1TID8/IDE1O1xuICAgICAgICB0aGlzLnNldE5hbWUgPSBzZXROYW1lID8/IG51bGw7XG4gICAgICAgIHRoaXMubWF4RWxlY3Rpb25JZCA9IG1heEVsZWN0aW9uSWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5tYXhTZXRWZXJzaW9uID0gbWF4U2V0VmVyc2lvbiA/PyBudWxsO1xuICAgICAgICB0aGlzLmNvbW1vbldpcmVWZXJzaW9uID0gY29tbW9uV2lyZVZlcnNpb24gPz8gMDtcbiAgICAgICAgLy8gZGV0ZXJtaW5lIHNlcnZlciBjb21wYXRpYmlsaXR5XG4gICAgICAgIGZvciAoY29uc3Qgc2VydmVyRGVzY3JpcHRpb24gb2YgdGhpcy5zZXJ2ZXJzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICAvLyBMb2FkIGJhbGFuY2VyIG1vZGUgaXMgYWx3YXlzIGNvbXBhdGlibGUuXG4gICAgICAgICAgICBpZiAoc2VydmVyRGVzY3JpcHRpb24udHlwZSA9PT0gY29tbW9uXzEuU2VydmVyVHlwZS5Vbmtub3duIHx8XG4gICAgICAgICAgICAgICAgc2VydmVyRGVzY3JpcHRpb24udHlwZSA9PT0gY29tbW9uXzEuU2VydmVyVHlwZS5Mb2FkQmFsYW5jZXIpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZXJ2ZXJEZXNjcmlwdGlvbi5taW5XaXJlVmVyc2lvbiA+IE1BWF9TVVBQT1JURURfV0lSRV9WRVJTSU9OKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wYXRpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wYXRpYmlsaXR5RXJyb3IgPSBgU2VydmVyIGF0ICR7c2VydmVyRGVzY3JpcHRpb24uYWRkcmVzc30gcmVxdWlyZXMgd2lyZSB2ZXJzaW9uICR7c2VydmVyRGVzY3JpcHRpb24ubWluV2lyZVZlcnNpb259LCBidXQgdGhpcyB2ZXJzaW9uIG9mIHRoZSBkcml2ZXIgb25seSBzdXBwb3J0cyB1cCB0byAke01BWF9TVVBQT1JURURfV0lSRV9WRVJTSU9OfSAoTW9uZ29EQiAke01BWF9TVVBQT1JURURfU0VSVkVSX1ZFUlNJT059KWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VydmVyRGVzY3JpcHRpb24ubWF4V2lyZVZlcnNpb24gPCBNSU5fU1VQUE9SVEVEX1dJUkVfVkVSU0lPTikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcGF0aWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcGF0aWJpbGl0eUVycm9yID0gYFNlcnZlciBhdCAke3NlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3N9IHJlcG9ydHMgd2lyZSB2ZXJzaW9uICR7c2VydmVyRGVzY3JpcHRpb24ubWF4V2lyZVZlcnNpb259LCBidXQgdGhpcyB2ZXJzaW9uIG9mIHRoZSBkcml2ZXIgcmVxdWlyZXMgYXQgbGVhc3QgJHtNSU5fU1VQUE9SVEVEX1dJUkVfVkVSU0lPTn0gKE1vbmdvREIgJHtNSU5fU1VQUE9SVEVEX1NFUlZFUl9WRVJTSU9OfSkuYDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBXaGVuZXZlciBhIGNsaWVudCB1cGRhdGVzIHRoZSBUb3BvbG9neURlc2NyaXB0aW9uIGZyb20gYSBoZWxsbyByZXNwb25zZSwgaXQgTVVTVCBzZXRcbiAgICAgICAgLy8gVG9wb2xvZ3lEZXNjcmlwdGlvbi5sb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzIHRvIHRoZSBzbWFsbGVzdCBsb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzXG4gICAgICAgIC8vIHZhbHVlIGFtb25nIFNlcnZlckRlc2NyaXB0aW9ucyBvZiBhbGwgZGF0YS1iZWFyaW5nIHNlcnZlciB0eXBlcy4gSWYgYW55IGhhdmUgYSBudWxsXG4gICAgICAgIC8vIGxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMsIHRoZW4gVG9wb2xvZ3lEZXNjcmlwdGlvbi5sb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzIE1VU1QgYmVcbiAgICAgICAgLy8gc2V0IHRvIG51bGwuXG4gICAgICAgIHRoaXMubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgWywgc2VydmVyXSBvZiB0aGlzLnNlcnZlcnMpIHtcbiAgICAgICAgICAgIGlmIChzZXJ2ZXIuaXNSZWFkYWJsZSkge1xuICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXIubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGFueSBvZiB0aGUgc2VydmVycyBoYXZlIGEgbnVsbCBsb2dpY2FsU2Vzc2lvbnNUaW1lb3V0LCB0aGVuIHRoZSB3aG9sZSB0b3BvbG9neSBkb2VzXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmlyc3Qgc2VydmVyIHdpdGggYSBub24gbnVsbCBsb2dpY2FsU2Vzc2lvbnNUaW1lb3V0XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyA9IHNlcnZlci5sb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQWx3YXlzIHNlbGVjdCB0aGUgc21hbGxlciBvZiB0aGU6XG4gICAgICAgICAgICAgICAgLy8gY3VycmVudCBzZXJ2ZXIgbG9naWNhbFNlc3Npb25zVGltZW91dCBhbmQgdGhlIHRvcG9sb2dpZXMgbG9naWNhbFNlc3Npb25zVGltZW91dFxuICAgICAgICAgICAgICAgIHRoaXMubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyA9IE1hdGgubWluKHRoaXMubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcywgc2VydmVyLmxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgVG9wb2xvZ3lEZXNjcmlwdGlvbiBiYXNlZCBvbiB0aGUgU3J2UG9sbGluZ0V2ZW50XG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdXBkYXRlRnJvbVNydlBvbGxpbmdFdmVudChldiwgc3J2TWF4SG9zdHMgPSAwKSB7XG4gICAgICAgIC8qKiBUaGUgU1JWIGFkZHJlc3NlcyBkZWZpbmVzIHRoZSBzZXQgb2YgYWRkcmVzc2VzIHdlIHNob3VsZCBiZSB1c2luZyAqL1xuICAgICAgICBjb25zdCBpbmNvbWluZ0hvc3RuYW1lcyA9IGV2Lmhvc3RuYW1lcygpO1xuICAgICAgICBjb25zdCBjdXJyZW50SG9zdG5hbWVzID0gbmV3IFNldCh0aGlzLnNlcnZlcnMua2V5cygpKTtcbiAgICAgICAgY29uc3QgaG9zdG5hbWVzVG9BZGQgPSBuZXcgU2V0KGluY29taW5nSG9zdG5hbWVzKTtcbiAgICAgICAgY29uc3QgaG9zdG5hbWVzVG9SZW1vdmUgPSBuZXcgU2V0KCk7XG4gICAgICAgIGZvciAoY29uc3QgaG9zdG5hbWUgb2YgY3VycmVudEhvc3RuYW1lcykge1xuICAgICAgICAgICAgLy8gZmlsdGVyIGhvc3RuYW1lc1RvQWRkIChtYWRlIGZyb20gaW5jb21pbmdIb3N0bmFtZXMpIGRvd24gdG8gd2hhdCBpcyAqbm90KiBwcmVzZW50IGluIGN1cnJlbnRIb3N0bmFtZXNcbiAgICAgICAgICAgIGhvc3RuYW1lc1RvQWRkLmRlbGV0ZShob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAoIWluY29taW5nSG9zdG5hbWVzLmhhcyhob3N0bmFtZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgU1JWIFJlY29yZHMgbm8gbG9uZ2VyIGluY2x1ZGUgdGhpcyBob3N0bmFtZVxuICAgICAgICAgICAgICAgIC8vIHdlIGhhdmUgdG8gc3RvcCB1c2luZyBpdFxuICAgICAgICAgICAgICAgIGhvc3RuYW1lc1RvUmVtb3ZlLmFkZChob3N0bmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhvc3RuYW1lc1RvQWRkLnNpemUgPT09IDAgJiYgaG9zdG5hbWVzVG9SZW1vdmUuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgLy8gTm8gbmV3IGhvc3RzIHRvIGFkZCBhbmQgbm9uZSB0byByZW1vdmVcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlcnZlckRlc2NyaXB0aW9ucyA9IG5ldyBNYXAodGhpcy5zZXJ2ZXJzKTtcbiAgICAgICAgZm9yIChjb25zdCByZW1vdmVkSG9zdCBvZiBob3N0bmFtZXNUb1JlbW92ZSkge1xuICAgICAgICAgICAgc2VydmVyRGVzY3JpcHRpb25zLmRlbGV0ZShyZW1vdmVkSG9zdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhvc3RuYW1lc1RvQWRkLnNpemUgPiAwKSB7XG4gICAgICAgICAgICBpZiAoc3J2TWF4SG9zdHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgYWxsIVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaG9zdFRvQWRkIG9mIGhvc3RuYW1lc1RvQWRkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlckRlc2NyaXB0aW9ucy5zZXQoaG9zdFRvQWRkLCBuZXcgc2VydmVyX2Rlc2NyaXB0aW9uXzEuU2VydmVyRGVzY3JpcHRpb24oaG9zdFRvQWRkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2VydmVyRGVzY3JpcHRpb25zLnNpemUgPCBzcnZNYXhIb3N0cykge1xuICAgICAgICAgICAgICAgIC8vIEFkZCBvbmx5IHRoZSBhbW91bnQgbmVlZGVkIHRvIGdldCB1cyBiYWNrIHRvIHNydk1heEhvc3RzXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRIb3N0cyA9ICgwLCB1dGlsc18xLnNodWZmbGUpKGhvc3RuYW1lc1RvQWRkLCBzcnZNYXhIb3N0cyAtIHNlcnZlckRlc2NyaXB0aW9ucy5zaXplKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNlbGVjdGVkSG9zdFRvQWRkIG9mIHNlbGVjdGVkSG9zdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyRGVzY3JpcHRpb25zLnNldChzZWxlY3RlZEhvc3RUb0FkZCwgbmV3IHNlcnZlcl9kZXNjcmlwdGlvbl8xLlNlcnZlckRlc2NyaXB0aW9uKHNlbGVjdGVkSG9zdFRvQWRkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgVG9wb2xvZ3lEZXNjcmlwdGlvbih0aGlzLnR5cGUsIHNlcnZlckRlc2NyaXB0aW9ucywgdGhpcy5zZXROYW1lLCB0aGlzLm1heFNldFZlcnNpb24sIHRoaXMubWF4RWxlY3Rpb25JZCwgdGhpcy5jb21tb25XaXJlVmVyc2lvbiwgeyBoZWFydGJlYXRGcmVxdWVuY3lNUzogdGhpcy5oZWFydGJlYXRGcmVxdWVuY3lNUywgbG9jYWxUaHJlc2hvbGRNUzogdGhpcy5sb2NhbFRocmVzaG9sZE1TIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGlzIGRlc2NyaXB0aW9uIHVwZGF0ZWQgd2l0aCBhIGdpdmVuIFNlcnZlckRlc2NyaXB0aW9uXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdXBkYXRlKHNlcnZlckRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSBzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzO1xuICAgICAgICAvLyBwb3RlbnRpYWxseSBtdXRhdGVkIHZhbHVlc1xuICAgICAgICBsZXQgeyB0eXBlOiB0b3BvbG9neVR5cGUsIHNldE5hbWUsIG1heFNldFZlcnNpb24sIG1heEVsZWN0aW9uSWQsIGNvbW1vbldpcmVWZXJzaW9uIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBzZXJ2ZXJUeXBlID0gc2VydmVyRGVzY3JpcHRpb24udHlwZTtcbiAgICAgICAgY29uc3Qgc2VydmVyRGVzY3JpcHRpb25zID0gbmV3IE1hcCh0aGlzLnNlcnZlcnMpO1xuICAgICAgICAvLyB1cGRhdGUgY29tbW9uIHdpcmUgdmVyc2lvblxuICAgICAgICBpZiAoc2VydmVyRGVzY3JpcHRpb24ubWF4V2lyZVZlcnNpb24gIT09IDApIHtcbiAgICAgICAgICAgIGlmIChjb21tb25XaXJlVmVyc2lvbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29tbW9uV2lyZVZlcnNpb24gPSBzZXJ2ZXJEZXNjcmlwdGlvbi5tYXhXaXJlVmVyc2lvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbW1vbldpcmVWZXJzaW9uID0gTWF0aC5taW4oY29tbW9uV2lyZVZlcnNpb24sIHNlcnZlckRlc2NyaXB0aW9uLm1heFdpcmVWZXJzaW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHNlcnZlckRlc2NyaXB0aW9uLnNldE5hbWUgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICB0eXBlb2Ygc2V0TmFtZSA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHNlcnZlckRlc2NyaXB0aW9uLnNldE5hbWUgIT09IHNldE5hbWUpIHtcbiAgICAgICAgICAgIGlmICh0b3BvbG9neVR5cGUgPT09IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5TaW5nbGUpIHtcbiAgICAgICAgICAgICAgICAvLyBcIlNpbmdsZVwiIFRvcG9sb2d5IHdpdGggc2V0TmFtZSBtaXNtYXRjaCBpcyBkaXJlY3QgY29ubmVjdGlvbiB1c2FnZSwgbWFyayB1bmtub3duIGRvIG5vdCByZW1vdmVcbiAgICAgICAgICAgICAgICBzZXJ2ZXJEZXNjcmlwdGlvbiA9IG5ldyBzZXJ2ZXJfZGVzY3JpcHRpb25fMS5TZXJ2ZXJEZXNjcmlwdGlvbihhZGRyZXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlcnZlckRlc2NyaXB0aW9ucy5kZWxldGUoYWRkcmVzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBhY3R1YWwgc2VydmVyIGRlc2NyaXB0aW9uXG4gICAgICAgIHNlcnZlckRlc2NyaXB0aW9ucy5zZXQoYWRkcmVzcywgc2VydmVyRGVzY3JpcHRpb24pO1xuICAgICAgICBpZiAodG9wb2xvZ3lUeXBlID09PSBjb21tb25fMS5Ub3BvbG9neVR5cGUuU2luZ2xlKSB7XG4gICAgICAgICAgICAvLyBvbmNlIHdlIGFyZSBkZWZpbmVkIGFzIHNpbmdsZSwgdGhhdCBuZXZlciBjaGFuZ2VzXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRvcG9sb2d5RGVzY3JpcHRpb24oY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlNpbmdsZSwgc2VydmVyRGVzY3JpcHRpb25zLCBzZXROYW1lLCBtYXhTZXRWZXJzaW9uLCBtYXhFbGVjdGlvbklkLCBjb21tb25XaXJlVmVyc2lvbiwgeyBoZWFydGJlYXRGcmVxdWVuY3lNUzogdGhpcy5oZWFydGJlYXRGcmVxdWVuY3lNUywgbG9jYWxUaHJlc2hvbGRNUzogdGhpcy5sb2NhbFRocmVzaG9sZE1TIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b3BvbG9neVR5cGUgPT09IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5Vbmtub3duKSB7XG4gICAgICAgICAgICBpZiAoc2VydmVyVHlwZSA9PT0gY29tbW9uXzEuU2VydmVyVHlwZS5TdGFuZGFsb25lICYmIHRoaXMuc2VydmVycy5zaXplICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgc2VydmVyRGVzY3JpcHRpb25zLmRlbGV0ZShhZGRyZXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRvcG9sb2d5VHlwZSA9IHRvcG9sb2d5VHlwZUZvclNlcnZlclR5cGUoc2VydmVyVHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcG9sb2d5VHlwZSA9PT0gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlNoYXJkZWQpIHtcbiAgICAgICAgICAgIGlmICghTU9OR09TX09SX1VOS05PV04uaGFzKHNlcnZlclR5cGUpKSB7XG4gICAgICAgICAgICAgICAgc2VydmVyRGVzY3JpcHRpb25zLmRlbGV0ZShhZGRyZXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodG9wb2xvZ3lUeXBlID09PSBjb21tb25fMS5Ub3BvbG9neVR5cGUuUmVwbGljYVNldE5vUHJpbWFyeSkge1xuICAgICAgICAgICAgaWYgKE1PTkdPU19PUl9TVEFOREFMT05FLmhhcyhzZXJ2ZXJUeXBlKSkge1xuICAgICAgICAgICAgICAgIHNlcnZlckRlc2NyaXB0aW9ucy5kZWxldGUoYWRkcmVzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VydmVyVHlwZSA9PT0gY29tbW9uXzEuU2VydmVyVHlwZS5SU1ByaW1hcnkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB1cGRhdGVSc0Zyb21QcmltYXJ5KHNlcnZlckRlc2NyaXB0aW9ucywgc2VydmVyRGVzY3JpcHRpb24sIHNldE5hbWUsIG1heFNldFZlcnNpb24sIG1heEVsZWN0aW9uSWQpO1xuICAgICAgICAgICAgICAgIHRvcG9sb2d5VHlwZSA9IHJlc3VsdFswXTtcbiAgICAgICAgICAgICAgICBzZXROYW1lID0gcmVzdWx0WzFdO1xuICAgICAgICAgICAgICAgIG1heFNldFZlcnNpb24gPSByZXN1bHRbMl07XG4gICAgICAgICAgICAgICAgbWF4RWxlY3Rpb25JZCA9IHJlc3VsdFszXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKE5PTl9QUklNQVJZX1JTX01FTUJFUlMuaGFzKHNlcnZlclR5cGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdXBkYXRlUnNOb1ByaW1hcnlGcm9tTWVtYmVyKHNlcnZlckRlc2NyaXB0aW9ucywgc2VydmVyRGVzY3JpcHRpb24sIHNldE5hbWUpO1xuICAgICAgICAgICAgICAgIHRvcG9sb2d5VHlwZSA9IHJlc3VsdFswXTtcbiAgICAgICAgICAgICAgICBzZXROYW1lID0gcmVzdWx0WzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0b3BvbG9neVR5cGUgPT09IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5SZXBsaWNhU2V0V2l0aFByaW1hcnkpIHtcbiAgICAgICAgICAgIGlmIChNT05HT1NfT1JfU1RBTkRBTE9ORS5oYXMoc2VydmVyVHlwZSkpIHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJEZXNjcmlwdGlvbnMuZGVsZXRlKGFkZHJlc3MpO1xuICAgICAgICAgICAgICAgIHRvcG9sb2d5VHlwZSA9IGNoZWNrSGFzUHJpbWFyeShzZXJ2ZXJEZXNjcmlwdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2VydmVyVHlwZSA9PT0gY29tbW9uXzEuU2VydmVyVHlwZS5SU1ByaW1hcnkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB1cGRhdGVSc0Zyb21QcmltYXJ5KHNlcnZlckRlc2NyaXB0aW9ucywgc2VydmVyRGVzY3JpcHRpb24sIHNldE5hbWUsIG1heFNldFZlcnNpb24sIG1heEVsZWN0aW9uSWQpO1xuICAgICAgICAgICAgICAgIHRvcG9sb2d5VHlwZSA9IHJlc3VsdFswXTtcbiAgICAgICAgICAgICAgICBzZXROYW1lID0gcmVzdWx0WzFdO1xuICAgICAgICAgICAgICAgIG1heFNldFZlcnNpb24gPSByZXN1bHRbMl07XG4gICAgICAgICAgICAgICAgbWF4RWxlY3Rpb25JZCA9IHJlc3VsdFszXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKE5PTl9QUklNQVJZX1JTX01FTUJFUlMuaGFzKHNlcnZlclR5cGUpKSB7XG4gICAgICAgICAgICAgICAgdG9wb2xvZ3lUeXBlID0gdXBkYXRlUnNXaXRoUHJpbWFyeUZyb21NZW1iZXIoc2VydmVyRGVzY3JpcHRpb25zLCBzZXJ2ZXJEZXNjcmlwdGlvbiwgc2V0TmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b3BvbG9neVR5cGUgPSBjaGVja0hhc1ByaW1hcnkoc2VydmVyRGVzY3JpcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFRvcG9sb2d5RGVzY3JpcHRpb24odG9wb2xvZ3lUeXBlLCBzZXJ2ZXJEZXNjcmlwdGlvbnMsIHNldE5hbWUsIG1heFNldFZlcnNpb24sIG1heEVsZWN0aW9uSWQsIGNvbW1vbldpcmVWZXJzaW9uLCB7IGhlYXJ0YmVhdEZyZXF1ZW5jeU1TOiB0aGlzLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TLCBsb2NhbFRocmVzaG9sZE1TOiB0aGlzLmxvY2FsVGhyZXNob2xkTVMgfSk7XG4gICAgfVxuICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb25zV2l0aEVycm9yID0gQXJyYXkuZnJvbSh0aGlzLnNlcnZlcnMudmFsdWVzKCkpLmZpbHRlcigoc2QpID0+IHNkLmVycm9yKTtcbiAgICAgICAgaWYgKGRlc2NyaXB0aW9uc1dpdGhFcnJvci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVzY3JpcHRpb25zV2l0aEVycm9yWzBdLmVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIHRoZSB0b3BvbG9neSBkZXNjcmlwdGlvbiBoYXMgYW55IGtub3duIHNlcnZlcnNcbiAgICAgKi9cbiAgICBnZXQgaGFzS25vd25TZXJ2ZXJzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnNlcnZlcnMudmFsdWVzKCkpLnNvbWUoKHNkKSA9PiBzZC50eXBlICE9PSBjb21tb25fMS5TZXJ2ZXJUeXBlLlVua25vd24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIHRoaXMgdG9wb2xvZ3kgZGVzY3JpcHRpb24gaGFzIGEgZGF0YS1iZWFyaW5nIHNlcnZlciBhdmFpbGFibGUuXG4gICAgICovXG4gICAgZ2V0IGhhc0RhdGFCZWFyaW5nU2VydmVycygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5zZXJ2ZXJzLnZhbHVlcygpKS5zb21lKChzZCkgPT4gc2QuaXNEYXRhQmVhcmluZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgdGhlIHRvcG9sb2d5IGhhcyBhIGRlZmluaXRpb24gZm9yIHRoZSBwcm92aWRlZCBhZGRyZXNzXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgaGFzU2VydmVyKGFkZHJlc3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VydmVycy5oYXMoYWRkcmVzcyk7XG4gICAgfVxufVxuZXhwb3J0cy5Ub3BvbG9neURlc2NyaXB0aW9uID0gVG9wb2xvZ3lEZXNjcmlwdGlvbjtcbmZ1bmN0aW9uIHRvcG9sb2d5VHlwZUZvclNlcnZlclR5cGUoc2VydmVyVHlwZSkge1xuICAgIHN3aXRjaCAoc2VydmVyVHlwZSkge1xuICAgICAgICBjYXNlIGNvbW1vbl8xLlNlcnZlclR5cGUuU3RhbmRhbG9uZTpcbiAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5Ub3BvbG9neVR5cGUuU2luZ2xlO1xuICAgICAgICBjYXNlIGNvbW1vbl8xLlNlcnZlclR5cGUuTW9uZ29zOlxuICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5TaGFyZGVkO1xuICAgICAgICBjYXNlIGNvbW1vbl8xLlNlcnZlclR5cGUuUlNQcmltYXJ5OlxuICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5SZXBsaWNhU2V0V2l0aFByaW1hcnk7XG4gICAgICAgIGNhc2UgY29tbW9uXzEuU2VydmVyVHlwZS5SU090aGVyOlxuICAgICAgICBjYXNlIGNvbW1vbl8xLlNlcnZlclR5cGUuUlNTZWNvbmRhcnk6XG4gICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlJlcGxpY2FTZXROb1ByaW1hcnk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlVua25vd247XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlUnNGcm9tUHJpbWFyeShzZXJ2ZXJEZXNjcmlwdGlvbnMsIHNlcnZlckRlc2NyaXB0aW9uLCBzZXROYW1lID0gbnVsbCwgbWF4U2V0VmVyc2lvbiA9IG51bGwsIG1heEVsZWN0aW9uSWQgPSBudWxsKSB7XG4gICAgc2V0TmFtZSA9IHNldE5hbWUgfHwgc2VydmVyRGVzY3JpcHRpb24uc2V0TmFtZTtcbiAgICBpZiAoc2V0TmFtZSAhPT0gc2VydmVyRGVzY3JpcHRpb24uc2V0TmFtZSkge1xuICAgICAgICBzZXJ2ZXJEZXNjcmlwdGlvbnMuZGVsZXRlKHNlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3MpO1xuICAgICAgICByZXR1cm4gW2NoZWNrSGFzUHJpbWFyeShzZXJ2ZXJEZXNjcmlwdGlvbnMpLCBzZXROYW1lLCBtYXhTZXRWZXJzaW9uLCBtYXhFbGVjdGlvbklkXTtcbiAgICB9XG4gICAgaWYgKHNlcnZlckRlc2NyaXB0aW9uLm1heFdpcmVWZXJzaW9uID49IDE3KSB7XG4gICAgICAgIGNvbnN0IGVsZWN0aW9uSWRDb21wYXJpc29uID0gKDAsIHV0aWxzXzEuY29tcGFyZU9iamVjdElkKShtYXhFbGVjdGlvbklkLCBzZXJ2ZXJEZXNjcmlwdGlvbi5lbGVjdGlvbklkKTtcbiAgICAgICAgY29uc3QgbWF4RWxlY3Rpb25JZElzRXF1YWwgPSBlbGVjdGlvbklkQ29tcGFyaXNvbiA9PT0gMDtcbiAgICAgICAgY29uc3QgbWF4RWxlY3Rpb25JZElzTGVzcyA9IGVsZWN0aW9uSWRDb21wYXJpc29uID09PSAtMTtcbiAgICAgICAgY29uc3QgbWF4U2V0VmVyc2lvbklzTGVzc09yRXF1YWwgPSAobWF4U2V0VmVyc2lvbiA/PyAtMSkgPD0gKHNlcnZlckRlc2NyaXB0aW9uLnNldFZlcnNpb24gPz8gLTEpO1xuICAgICAgICBpZiAobWF4RWxlY3Rpb25JZElzTGVzcyB8fCAobWF4RWxlY3Rpb25JZElzRXF1YWwgJiYgbWF4U2V0VmVyc2lvbklzTGVzc09yRXF1YWwpKSB7XG4gICAgICAgICAgICAvLyBUaGUgcmVwb3J0ZWQgZWxlY3Rpb25JZCB3YXMgZ3JlYXRlclxuICAgICAgICAgICAgLy8gb3IgdGhlIGVsZWN0aW9uSWQgd2FzIGVxdWFsIGFuZCByZXBvcnRlZCBzZXRWZXJzaW9uIHdhcyBncmVhdGVyXG4gICAgICAgICAgICAvLyBBbHdheXMgdXBkYXRlIGJvdGggdmFsdWVzLCB0aGV5IGFyZSBhIHR1cGxlXG4gICAgICAgICAgICBtYXhFbGVjdGlvbklkID0gc2VydmVyRGVzY3JpcHRpb24uZWxlY3Rpb25JZDtcbiAgICAgICAgICAgIG1heFNldFZlcnNpb24gPSBzZXJ2ZXJEZXNjcmlwdGlvbi5zZXRWZXJzaW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gU3RhbGUgcHJpbWFyeVxuICAgICAgICAgICAgLy8gcmVwbGFjZSBzZXJ2ZXJEZXNjcmlwdGlvbiB3aXRoIGEgZGVmYXVsdCBTZXJ2ZXJEZXNjcmlwdGlvbiBvZiB0eXBlIFwiVW5rbm93blwiXG4gICAgICAgICAgICBzZXJ2ZXJEZXNjcmlwdGlvbnMuc2V0KHNlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3MsIG5ldyBzZXJ2ZXJfZGVzY3JpcHRpb25fMS5TZXJ2ZXJEZXNjcmlwdGlvbihzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzKSk7XG4gICAgICAgICAgICByZXR1cm4gW2NoZWNrSGFzUHJpbWFyeShzZXJ2ZXJEZXNjcmlwdGlvbnMpLCBzZXROYW1lLCBtYXhTZXRWZXJzaW9uLCBtYXhFbGVjdGlvbklkXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgZWxlY3Rpb25JZCA9IHNlcnZlckRlc2NyaXB0aW9uLmVsZWN0aW9uSWQgPyBzZXJ2ZXJEZXNjcmlwdGlvbi5lbGVjdGlvbklkIDogbnVsbDtcbiAgICAgICAgaWYgKHNlcnZlckRlc2NyaXB0aW9uLnNldFZlcnNpb24gJiYgZWxlY3Rpb25JZCkge1xuICAgICAgICAgICAgaWYgKG1heFNldFZlcnNpb24gJiYgbWF4RWxlY3Rpb25JZCkge1xuICAgICAgICAgICAgICAgIGlmIChtYXhTZXRWZXJzaW9uID4gc2VydmVyRGVzY3JpcHRpb24uc2V0VmVyc2lvbiB8fFxuICAgICAgICAgICAgICAgICAgICAoMCwgdXRpbHNfMS5jb21wYXJlT2JqZWN0SWQpKG1heEVsZWN0aW9uSWQsIGVsZWN0aW9uSWQpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHByaW1hcnkgaXMgc3RhbGUsIHdlIG11c3QgcmVtb3ZlIGl0XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlckRlc2NyaXB0aW9ucy5zZXQoc2VydmVyRGVzY3JpcHRpb24uYWRkcmVzcywgbmV3IHNlcnZlcl9kZXNjcmlwdGlvbl8xLlNlcnZlckRlc2NyaXB0aW9uKHNlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3MpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtjaGVja0hhc1ByaW1hcnkoc2VydmVyRGVzY3JpcHRpb25zKSwgc2V0TmFtZSwgbWF4U2V0VmVyc2lvbiwgbWF4RWxlY3Rpb25JZF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWF4RWxlY3Rpb25JZCA9IHNlcnZlckRlc2NyaXB0aW9uLmVsZWN0aW9uSWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlcnZlckRlc2NyaXB0aW9uLnNldFZlcnNpb24gIT0gbnVsbCAmJlxuICAgICAgICAgICAgKG1heFNldFZlcnNpb24gPT0gbnVsbCB8fCBzZXJ2ZXJEZXNjcmlwdGlvbi5zZXRWZXJzaW9uID4gbWF4U2V0VmVyc2lvbikpIHtcbiAgICAgICAgICAgIG1heFNldFZlcnNpb24gPSBzZXJ2ZXJEZXNjcmlwdGlvbi5zZXRWZXJzaW9uO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFdlJ3ZlIGhlYXJkIGZyb20gdGhlIHByaW1hcnkuIElzIGl0IHRoZSBzYW1lIHByaW1hcnkgYXMgYmVmb3JlP1xuICAgIGZvciAoY29uc3QgW2FkZHJlc3MsIHNlcnZlcl0gb2Ygc2VydmVyRGVzY3JpcHRpb25zKSB7XG4gICAgICAgIGlmIChzZXJ2ZXIudHlwZSA9PT0gY29tbW9uXzEuU2VydmVyVHlwZS5SU1ByaW1hcnkgJiYgc2VydmVyLmFkZHJlc3MgIT09IHNlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3MpIHtcbiAgICAgICAgICAgIC8vIFJlc2V0IG9sZCBwcmltYXJ5J3MgdHlwZSB0byBVbmtub3duLlxuICAgICAgICAgICAgc2VydmVyRGVzY3JpcHRpb25zLnNldChhZGRyZXNzLCBuZXcgc2VydmVyX2Rlc2NyaXB0aW9uXzEuU2VydmVyRGVzY3JpcHRpb24oc2VydmVyLmFkZHJlc3MpKTtcbiAgICAgICAgICAgIC8vIFRoZXJlIGNhbiBvbmx5IGJlIG9uZSBwcmltYXJ5XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBEaXNjb3ZlciBuZXcgaG9zdHMgZnJvbSB0aGlzIHByaW1hcnkncyByZXNwb25zZS5cbiAgICBzZXJ2ZXJEZXNjcmlwdGlvbi5hbGxIb3N0cy5mb3JFYWNoKChhZGRyZXNzKSA9PiB7XG4gICAgICAgIGlmICghc2VydmVyRGVzY3JpcHRpb25zLmhhcyhhZGRyZXNzKSkge1xuICAgICAgICAgICAgc2VydmVyRGVzY3JpcHRpb25zLnNldChhZGRyZXNzLCBuZXcgc2VydmVyX2Rlc2NyaXB0aW9uXzEuU2VydmVyRGVzY3JpcHRpb24oYWRkcmVzcykpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgLy8gUmVtb3ZlIGhvc3RzIG5vdCBpbiB0aGUgcmVzcG9uc2UuXG4gICAgY29uc3QgY3VycmVudEFkZHJlc3NlcyA9IEFycmF5LmZyb20oc2VydmVyRGVzY3JpcHRpb25zLmtleXMoKSk7XG4gICAgY29uc3QgcmVzcG9uc2VBZGRyZXNzZXMgPSBzZXJ2ZXJEZXNjcmlwdGlvbi5hbGxIb3N0cztcbiAgICBjdXJyZW50QWRkcmVzc2VzXG4gICAgICAgIC5maWx0ZXIoKGFkZHIpID0+IHJlc3BvbnNlQWRkcmVzc2VzLmluZGV4T2YoYWRkcikgPT09IC0xKVxuICAgICAgICAuZm9yRWFjaCgoYWRkcmVzcykgPT4ge1xuICAgICAgICBzZXJ2ZXJEZXNjcmlwdGlvbnMuZGVsZXRlKGFkZHJlc3MpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY2hlY2tIYXNQcmltYXJ5KHNlcnZlckRlc2NyaXB0aW9ucyksIHNldE5hbWUsIG1heFNldFZlcnNpb24sIG1heEVsZWN0aW9uSWRdO1xufVxuZnVuY3Rpb24gdXBkYXRlUnNXaXRoUHJpbWFyeUZyb21NZW1iZXIoc2VydmVyRGVzY3JpcHRpb25zLCBzZXJ2ZXJEZXNjcmlwdGlvbiwgc2V0TmFtZSA9IG51bGwpIHtcbiAgICBpZiAoc2V0TmFtZSA9PSBudWxsKSB7XG4gICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKTogc2hvdWxkIGJlIGFuIGFwcHJvcHJpYXRlIHJ1bnRpbWUgZXJyb3JcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ0FyZ3VtZW50IFwic2V0TmFtZVwiIGlzIHJlcXVpcmVkIGlmIGNvbm5lY3RlZCB0byBhIHJlcGxpY2Egc2V0Jyk7XG4gICAgfVxuICAgIGlmIChzZXROYW1lICE9PSBzZXJ2ZXJEZXNjcmlwdGlvbi5zZXROYW1lIHx8XG4gICAgICAgIChzZXJ2ZXJEZXNjcmlwdGlvbi5tZSAmJiBzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzICE9PSBzZXJ2ZXJEZXNjcmlwdGlvbi5tZSkpIHtcbiAgICAgICAgc2VydmVyRGVzY3JpcHRpb25zLmRlbGV0ZShzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzKTtcbiAgICB9XG4gICAgcmV0dXJuIGNoZWNrSGFzUHJpbWFyeShzZXJ2ZXJEZXNjcmlwdGlvbnMpO1xufVxuZnVuY3Rpb24gdXBkYXRlUnNOb1ByaW1hcnlGcm9tTWVtYmVyKHNlcnZlckRlc2NyaXB0aW9ucywgc2VydmVyRGVzY3JpcHRpb24sIHNldE5hbWUgPSBudWxsKSB7XG4gICAgY29uc3QgdG9wb2xvZ3lUeXBlID0gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlJlcGxpY2FTZXROb1ByaW1hcnk7XG4gICAgc2V0TmFtZSA9IHNldE5hbWUgPz8gc2VydmVyRGVzY3JpcHRpb24uc2V0TmFtZTtcbiAgICBpZiAoc2V0TmFtZSAhPT0gc2VydmVyRGVzY3JpcHRpb24uc2V0TmFtZSkge1xuICAgICAgICBzZXJ2ZXJEZXNjcmlwdGlvbnMuZGVsZXRlKHNlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3MpO1xuICAgICAgICByZXR1cm4gW3RvcG9sb2d5VHlwZSwgc2V0TmFtZV07XG4gICAgfVxuICAgIHNlcnZlckRlc2NyaXB0aW9uLmFsbEhvc3RzLmZvckVhY2goKGFkZHJlc3MpID0+IHtcbiAgICAgICAgaWYgKCFzZXJ2ZXJEZXNjcmlwdGlvbnMuaGFzKGFkZHJlc3MpKSB7XG4gICAgICAgICAgICBzZXJ2ZXJEZXNjcmlwdGlvbnMuc2V0KGFkZHJlc3MsIG5ldyBzZXJ2ZXJfZGVzY3JpcHRpb25fMS5TZXJ2ZXJEZXNjcmlwdGlvbihhZGRyZXNzKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoc2VydmVyRGVzY3JpcHRpb24ubWUgJiYgc2VydmVyRGVzY3JpcHRpb24uYWRkcmVzcyAhPT0gc2VydmVyRGVzY3JpcHRpb24ubWUpIHtcbiAgICAgICAgc2VydmVyRGVzY3JpcHRpb25zLmRlbGV0ZShzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzKTtcbiAgICB9XG4gICAgcmV0dXJuIFt0b3BvbG9neVR5cGUsIHNldE5hbWVdO1xufVxuZnVuY3Rpb24gY2hlY2tIYXNQcmltYXJ5KHNlcnZlckRlc2NyaXB0aW9ucykge1xuICAgIGZvciAoY29uc3Qgc2VydmVyRGVzY3JpcHRpb24gb2Ygc2VydmVyRGVzY3JpcHRpb25zLnZhbHVlcygpKSB7XG4gICAgICAgIGlmIChzZXJ2ZXJEZXNjcmlwdGlvbi50eXBlID09PSBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTUHJpbWFyeSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5SZXBsaWNhU2V0V2l0aFByaW1hcnk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5SZXBsaWNhU2V0Tm9QcmltYXJ5O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9wb2xvZ3lfZGVzY3JpcHRpb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiVG9wb2xvZ3lEZXNjcmlwdGlvbiIsIldJUkVfQ09OU1RBTlRTIiwicmVxdWlyZSIsImVycm9yXzEiLCJ1dGlsc18xIiwiY29tbW9uXzEiLCJzZXJ2ZXJfZGVzY3JpcHRpb25fMSIsIk1JTl9TVVBQT1JURURfU0VSVkVSX1ZFUlNJT04iLCJNQVhfU1VQUE9SVEVEX1NFUlZFUl9WRVJTSU9OIiwiTUlOX1NVUFBPUlRFRF9XSVJFX1ZFUlNJT04iLCJNQVhfU1VQUE9SVEVEX1dJUkVfVkVSU0lPTiIsIk1PTkdPU19PUl9VTktOT1dOIiwiU2V0IiwiU2VydmVyVHlwZSIsIk1vbmdvcyIsIlVua25vd24iLCJNT05HT1NfT1JfU1RBTkRBTE9ORSIsIlN0YW5kYWxvbmUiLCJOT05fUFJJTUFSWV9SU19NRU1CRVJTIiwiUlNTZWNvbmRhcnkiLCJSU0FyYml0ZXIiLCJSU090aGVyIiwiY29uc3RydWN0b3IiLCJ0b3BvbG9neVR5cGUiLCJzZXJ2ZXJEZXNjcmlwdGlvbnMiLCJzZXROYW1lIiwibWF4U2V0VmVyc2lvbiIsIm1heEVsZWN0aW9uSWQiLCJjb21tb25XaXJlVmVyc2lvbiIsIm9wdGlvbnMiLCJ0eXBlIiwiVG9wb2xvZ3lUeXBlIiwic2VydmVycyIsIk1hcCIsInN0YWxlIiwiY29tcGF0aWJsZSIsImhlYXJ0YmVhdEZyZXF1ZW5jeU1TIiwibG9jYWxUaHJlc2hvbGRNUyIsInNlcnZlckRlc2NyaXB0aW9uIiwidmFsdWVzIiwiTG9hZEJhbGFuY2VyIiwibWluV2lyZVZlcnNpb24iLCJjb21wYXRpYmlsaXR5RXJyb3IiLCJhZGRyZXNzIiwibWF4V2lyZVZlcnNpb24iLCJsb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzIiwic2VydmVyIiwiaXNSZWFkYWJsZSIsIk1hdGgiLCJtaW4iLCJ1cGRhdGVGcm9tU3J2UG9sbGluZ0V2ZW50IiwiZXYiLCJzcnZNYXhIb3N0cyIsImluY29taW5nSG9zdG5hbWVzIiwiaG9zdG5hbWVzIiwiY3VycmVudEhvc3RuYW1lcyIsImtleXMiLCJob3N0bmFtZXNUb0FkZCIsImhvc3RuYW1lc1RvUmVtb3ZlIiwiaG9zdG5hbWUiLCJkZWxldGUiLCJoYXMiLCJhZGQiLCJzaXplIiwicmVtb3ZlZEhvc3QiLCJob3N0VG9BZGQiLCJzZXQiLCJTZXJ2ZXJEZXNjcmlwdGlvbiIsInNlbGVjdGVkSG9zdHMiLCJzaHVmZmxlIiwic2VsZWN0ZWRIb3N0VG9BZGQiLCJ1cGRhdGUiLCJzZXJ2ZXJUeXBlIiwiU2luZ2xlIiwidG9wb2xvZ3lUeXBlRm9yU2VydmVyVHlwZSIsIlNoYXJkZWQiLCJSZXBsaWNhU2V0Tm9QcmltYXJ5IiwiUlNQcmltYXJ5IiwicmVzdWx0IiwidXBkYXRlUnNGcm9tUHJpbWFyeSIsInVwZGF0ZVJzTm9QcmltYXJ5RnJvbU1lbWJlciIsIlJlcGxpY2FTZXRXaXRoUHJpbWFyeSIsImNoZWNrSGFzUHJpbWFyeSIsInVwZGF0ZVJzV2l0aFByaW1hcnlGcm9tTWVtYmVyIiwiZXJyb3IiLCJkZXNjcmlwdGlvbnNXaXRoRXJyb3IiLCJBcnJheSIsImZyb20iLCJmaWx0ZXIiLCJzZCIsImxlbmd0aCIsImhhc0tub3duU2VydmVycyIsInNvbWUiLCJoYXNEYXRhQmVhcmluZ1NlcnZlcnMiLCJpc0RhdGFCZWFyaW5nIiwiaGFzU2VydmVyIiwiZWxlY3Rpb25JZENvbXBhcmlzb24iLCJjb21wYXJlT2JqZWN0SWQiLCJlbGVjdGlvbklkIiwibWF4RWxlY3Rpb25JZElzRXF1YWwiLCJtYXhFbGVjdGlvbklkSXNMZXNzIiwibWF4U2V0VmVyc2lvbklzTGVzc09yRXF1YWwiLCJzZXRWZXJzaW9uIiwiYWxsSG9zdHMiLCJmb3JFYWNoIiwiY3VycmVudEFkZHJlc3NlcyIsInJlc3BvbnNlQWRkcmVzc2VzIiwiYWRkciIsImluZGV4T2YiLCJNb25nb1J1bnRpbWVFcnJvciIsIm1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/topology_description.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sessions.js":
/*!**********************************************!*\
  !*** ./node_modules/mongodb/lib/sessions.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar _a;\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.updateSessionFromResponse = exports.applySession = exports.ServerSessionPool = exports.ServerSession = exports.maybeClearPinnedConnection = exports.ClientSession = void 0;\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst bson_1 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst metrics_1 = __webpack_require__(/*! ./cmap/metrics */ \"(ssr)/./node_modules/mongodb/lib/cmap/metrics.js\");\nconst shared_1 = __webpack_require__(/*! ./cmap/wire_protocol/shared */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/shared.js\");\nconst constants_1 = __webpack_require__(/*! ./constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_types_1 = __webpack_require__(/*! ./mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst execute_operation_1 = __webpack_require__(/*! ./operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst run_command_1 = __webpack_require__(/*! ./operations/run_command */ \"(ssr)/./node_modules/mongodb/lib/operations/run_command.js\");\nconst read_concern_1 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst common_1 = __webpack_require__(/*! ./sdam/common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst transactions_1 = __webpack_require__(/*! ./transactions */ \"(ssr)/./node_modules/mongodb/lib/transactions.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst write_concern_1 = __webpack_require__(/*! ./write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nconst minWireVersionForShardedTransactions = 8;\n/** @internal */ const kServerSession = Symbol(\"serverSession\");\n/** @internal */ const kSnapshotTime = Symbol(\"snapshotTime\");\n/** @internal */ const kSnapshotEnabled = Symbol(\"snapshotEnabled\");\n/** @internal */ const kPinnedConnection = Symbol(\"pinnedConnection\");\n/** @internal Accumulates total number of increments to add to txnNumber when applying session to command */ const kTxnNumberIncrement = Symbol(\"txnNumberIncrement\");\n/**\n * A class representing a client session on the server\n *\n * NOTE: not meant to be instantiated directly.\n * @public\n */ class ClientSession extends mongo_types_1.TypedEventEmitter {\n    /**\n     * Create a client session.\n     * @internal\n     * @param client - The current client\n     * @param sessionPool - The server session pool (Internal Class)\n     * @param options - Optional settings\n     * @param clientOptions - Optional settings provided when creating a MongoClient\n     */ constructor(client, sessionPool, options, clientOptions){\n        super();\n        /** @internal */ this[_a] = false;\n        if (client == null) {\n            // TODO(NODE-3483)\n            throw new error_1.MongoRuntimeError(\"ClientSession requires a MongoClient\");\n        }\n        if (sessionPool == null || !(sessionPool instanceof ServerSessionPool)) {\n            // TODO(NODE-3483)\n            throw new error_1.MongoRuntimeError(\"ClientSession requires a ServerSessionPool\");\n        }\n        options = options ?? {};\n        if (options.snapshot === true) {\n            this[kSnapshotEnabled] = true;\n            if (options.causalConsistency === true) {\n                throw new error_1.MongoInvalidArgumentError('Properties \"causalConsistency\" and \"snapshot\" are mutually exclusive');\n            }\n        }\n        this.client = client;\n        this.sessionPool = sessionPool;\n        this.hasEnded = false;\n        this.clientOptions = clientOptions;\n        this.explicit = !!options.explicit;\n        this[kServerSession] = this.explicit ? this.sessionPool.acquire() : null;\n        this[kTxnNumberIncrement] = 0;\n        const defaultCausalConsistencyValue = this.explicit && options.snapshot !== true;\n        this.supports = {\n            // if we can enable causal consistency, do so by default\n            causalConsistency: options.causalConsistency ?? defaultCausalConsistencyValue\n        };\n        this.clusterTime = options.initialClusterTime;\n        this.operationTime = undefined;\n        this.owner = options.owner;\n        this.defaultTransactionOptions = Object.assign({}, options.defaultTransactionOptions);\n        this.transaction = new transactions_1.Transaction();\n    }\n    /** The server id associated with this session */ get id() {\n        return this[kServerSession]?.id;\n    }\n    get serverSession() {\n        let serverSession = this[kServerSession];\n        if (serverSession == null) {\n            if (this.explicit) {\n                throw new error_1.MongoRuntimeError(\"Unexpected null serverSession for an explicit session\");\n            }\n            if (this.hasEnded) {\n                throw new error_1.MongoRuntimeError(\"Unexpected null serverSession for an ended implicit session\");\n            }\n            serverSession = this.sessionPool.acquire();\n            this[kServerSession] = serverSession;\n        }\n        return serverSession;\n    }\n    /** Whether or not this session is configured for snapshot reads */ get snapshotEnabled() {\n        return this[kSnapshotEnabled];\n    }\n    get loadBalanced() {\n        return this.client.topology?.description.type === common_1.TopologyType.LoadBalanced;\n    }\n    /** @internal */ get pinnedConnection() {\n        return this[kPinnedConnection];\n    }\n    /** @internal */ pin(conn) {\n        if (this[kPinnedConnection]) {\n            throw TypeError(\"Cannot pin multiple connections to the same session\");\n        }\n        this[kPinnedConnection] = conn;\n        conn.emit(constants_1.PINNED, this.inTransaction() ? metrics_1.ConnectionPoolMetrics.TXN : metrics_1.ConnectionPoolMetrics.CURSOR);\n    }\n    /** @internal */ unpin(options) {\n        if (this.loadBalanced) {\n            return maybeClearPinnedConnection(this, options);\n        }\n        this.transaction.unpinServer();\n    }\n    get isPinned() {\n        return this.loadBalanced ? !!this[kPinnedConnection] : this.transaction.isPinned;\n    }\n    /**\n     * Ends this session on the server\n     *\n     * @param options - Optional settings. Currently reserved for future use\n     */ async endSession(options) {\n        try {\n            if (this.inTransaction()) {\n                await this.abortTransaction();\n            }\n            if (!this.hasEnded) {\n                const serverSession = this[kServerSession];\n                if (serverSession != null) {\n                    // release the server session back to the pool\n                    this.sessionPool.release(serverSession);\n                    // Make sure a new serverSession never makes it onto this ClientSession\n                    Object.defineProperty(this, kServerSession, {\n                        value: ServerSession.clone(serverSession),\n                        writable: false\n                    });\n                }\n                // mark the session as ended, and emit a signal\n                this.hasEnded = true;\n                this.emit(\"ended\", this);\n            }\n        } catch  {\n        // spec indicates that we should ignore all errors for `endSessions`\n        } finally{\n            maybeClearPinnedConnection(this, {\n                force: true,\n                ...options\n            });\n        }\n    }\n    /**\n     * Advances the operationTime for a ClientSession.\n     *\n     * @param operationTime - the `BSON.Timestamp` of the operation type it is desired to advance to\n     */ advanceOperationTime(operationTime) {\n        if (this.operationTime == null) {\n            this.operationTime = operationTime;\n            return;\n        }\n        if (operationTime.greaterThan(this.operationTime)) {\n            this.operationTime = operationTime;\n        }\n    }\n    /**\n     * Advances the clusterTime for a ClientSession to the provided clusterTime of another ClientSession\n     *\n     * @param clusterTime - the $clusterTime returned by the server from another session in the form of a document containing the `BSON.Timestamp` clusterTime and signature\n     */ advanceClusterTime(clusterTime) {\n        if (!clusterTime || typeof clusterTime !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError(\"input cluster time must be an object\");\n        }\n        if (!clusterTime.clusterTime || clusterTime.clusterTime._bsontype !== \"Timestamp\") {\n            throw new error_1.MongoInvalidArgumentError('input cluster time \"clusterTime\" property must be a valid BSON Timestamp');\n        }\n        if (!clusterTime.signature || clusterTime.signature.hash?._bsontype !== \"Binary\" || typeof clusterTime.signature.keyId !== \"bigint\" && typeof clusterTime.signature.keyId !== \"number\" && clusterTime.signature.keyId?._bsontype !== \"Long\" // apparently we decode the key to number?\n        ) {\n            throw new error_1.MongoInvalidArgumentError('input cluster time must have a valid \"signature\" property with BSON Binary hash and BSON Long keyId');\n        }\n        (0, common_1._advanceClusterTime)(this, clusterTime);\n    }\n    /**\n     * Used to determine if this session equals another\n     *\n     * @param session - The session to compare to\n     */ equals(session) {\n        if (!(session instanceof ClientSession)) {\n            return false;\n        }\n        if (this.id == null || session.id == null) {\n            return false;\n        }\n        return utils_1.ByteUtils.equals(this.id.id.buffer, session.id.id.buffer);\n    }\n    /**\n     * Increment the transaction number on the internal ServerSession\n     *\n     * @privateRemarks\n     * This helper increments a value stored on the client session that will be\n     * added to the serverSession's txnNumber upon applying it to a command.\n     * This is because the serverSession is lazily acquired after a connection is obtained\n     */ incrementTransactionNumber() {\n        this[kTxnNumberIncrement] += 1;\n    }\n    /** @returns whether this session is currently in a transaction or not */ inTransaction() {\n        return this.transaction.isActive;\n    }\n    /**\n     * Starts a new transaction with the given options.\n     *\n     * @param options - Options for the transaction\n     */ startTransaction(options) {\n        if (this[kSnapshotEnabled]) {\n            throw new error_1.MongoCompatibilityError(\"Transactions are not supported in snapshot sessions\");\n        }\n        if (this.inTransaction()) {\n            throw new error_1.MongoTransactionError(\"Transaction already in progress\");\n        }\n        if (this.isPinned && this.transaction.isCommitted) {\n            this.unpin();\n        }\n        const topologyMaxWireVersion = (0, utils_1.maxWireVersion)(this.client.topology);\n        if ((0, shared_1.isSharded)(this.client.topology) && topologyMaxWireVersion != null && topologyMaxWireVersion < minWireVersionForShardedTransactions) {\n            throw new error_1.MongoCompatibilityError(\"Transactions are not supported on sharded clusters in MongoDB < 4.2.\");\n        }\n        // increment txnNumber\n        this.incrementTransactionNumber();\n        // create transaction state\n        this.transaction = new transactions_1.Transaction({\n            readConcern: options?.readConcern ?? this.defaultTransactionOptions.readConcern ?? this.clientOptions?.readConcern,\n            writeConcern: options?.writeConcern ?? this.defaultTransactionOptions.writeConcern ?? this.clientOptions?.writeConcern,\n            readPreference: options?.readPreference ?? this.defaultTransactionOptions.readPreference ?? this.clientOptions?.readPreference,\n            maxCommitTimeMS: options?.maxCommitTimeMS ?? this.defaultTransactionOptions.maxCommitTimeMS\n        });\n        this.transaction.transition(transactions_1.TxnState.STARTING_TRANSACTION);\n    }\n    /**\n     * Commits the currently active transaction in this session.\n     */ async commitTransaction() {\n        return endTransactionAsync(this, \"commitTransaction\");\n    }\n    /**\n     * Aborts the currently active transaction in this session.\n     */ async abortTransaction() {\n        return endTransactionAsync(this, \"abortTransaction\");\n    }\n    /**\n     * This is here to ensure that ClientSession is never serialized to BSON.\n     */ toBSON() {\n        throw new error_1.MongoRuntimeError(\"ClientSession cannot be serialized to BSON.\");\n    }\n    /**\n     * Runs a provided callback within a transaction, retrying either the commitTransaction operation\n     * or entire transaction as needed (and when the error permits) to better ensure that\n     * the transaction can complete successfully.\n     *\n     * **IMPORTANT:** This method requires the user to return a Promise, and `await` all operations.\n     * Any callbacks that do not return a Promise will result in undefined behavior.\n     *\n     * @remarks\n     * This function:\n     * - Will return the command response from the final commitTransaction if every operation is successful (can be used as a truthy object)\n     * - Will return `undefined` if the transaction is explicitly aborted with `await session.abortTransaction()`\n     * - Will throw if one of the operations throws or `throw` statement is used inside the `withTransaction` callback\n     *\n     * Checkout a descriptive example here:\n     * @see https://www.mongodb.com/developer/quickstart/node-transactions/\n     *\n     * @param fn - callback to run within a transaction\n     * @param options - optional settings for the transaction\n     * @returns A raw command response or undefined\n     */ async withTransaction(fn, options) {\n        const startTime = (0, utils_1.now)();\n        return attemptTransaction(this, startTime, fn, options);\n    }\n}\nexports.ClientSession = ClientSession;\n_a = kSnapshotEnabled;\nconst MAX_WITH_TRANSACTION_TIMEOUT = 120000;\nconst NON_DETERMINISTIC_WRITE_CONCERN_ERRORS = new Set([\n    \"CannotSatisfyWriteConcern\",\n    \"UnknownReplWriteConcern\",\n    \"UnsatisfiableWriteConcern\"\n]);\nfunction hasNotTimedOut(startTime, max) {\n    return (0, utils_1.calculateDurationInMs)(startTime) < max;\n}\nfunction isUnknownTransactionCommitResult(err) {\n    const isNonDeterministicWriteConcernError = err instanceof error_1.MongoServerError && err.codeName && NON_DETERMINISTIC_WRITE_CONCERN_ERRORS.has(err.codeName);\n    return isMaxTimeMSExpiredError(err) || !isNonDeterministicWriteConcernError && err.code !== error_1.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern && err.code !== error_1.MONGODB_ERROR_CODES.UnknownReplWriteConcern;\n}\nfunction maybeClearPinnedConnection(session, options) {\n    // unpin a connection if it has been pinned\n    const conn = session[kPinnedConnection];\n    const error = options?.error;\n    if (session.inTransaction() && error && error instanceof error_1.MongoError && error.hasErrorLabel(error_1.MongoErrorLabel.TransientTransactionError)) {\n        return;\n    }\n    const topology = session.client.topology;\n    // NOTE: the spec talks about what to do on a network error only, but the tests seem to\n    //       to validate that we don't unpin on _all_ errors?\n    if (conn && topology != null) {\n        const servers = Array.from(topology.s.servers.values());\n        const loadBalancer = servers[0];\n        if (options?.error == null || options?.force) {\n            loadBalancer.pool.checkIn(conn);\n            conn.emit(constants_1.UNPINNED, session.transaction.state !== transactions_1.TxnState.NO_TRANSACTION ? metrics_1.ConnectionPoolMetrics.TXN : metrics_1.ConnectionPoolMetrics.CURSOR);\n            if (options?.forceClear) {\n                loadBalancer.pool.clear({\n                    serviceId: conn.serviceId\n                });\n            }\n        }\n        session[kPinnedConnection] = undefined;\n    }\n}\nexports.maybeClearPinnedConnection = maybeClearPinnedConnection;\nfunction isMaxTimeMSExpiredError(err) {\n    if (err == null || !(err instanceof error_1.MongoServerError)) {\n        return false;\n    }\n    return err.code === error_1.MONGODB_ERROR_CODES.MaxTimeMSExpired || err.writeConcernError && err.writeConcernError.code === error_1.MONGODB_ERROR_CODES.MaxTimeMSExpired;\n}\nfunction attemptTransactionCommit(session, startTime, fn, options) {\n    return session.commitTransaction().catch((err)=>{\n        if (err instanceof error_1.MongoError && hasNotTimedOut(startTime, MAX_WITH_TRANSACTION_TIMEOUT) && !isMaxTimeMSExpiredError(err)) {\n            if (err.hasErrorLabel(error_1.MongoErrorLabel.UnknownTransactionCommitResult)) {\n                return attemptTransactionCommit(session, startTime, fn, options);\n            }\n            if (err.hasErrorLabel(error_1.MongoErrorLabel.TransientTransactionError)) {\n                return attemptTransaction(session, startTime, fn, options);\n            }\n        }\n        throw err;\n    });\n}\nconst USER_EXPLICIT_TXN_END_STATES = new Set([\n    transactions_1.TxnState.NO_TRANSACTION,\n    transactions_1.TxnState.TRANSACTION_COMMITTED,\n    transactions_1.TxnState.TRANSACTION_ABORTED\n]);\nfunction userExplicitlyEndedTransaction(session) {\n    return USER_EXPLICIT_TXN_END_STATES.has(session.transaction.state);\n}\nfunction attemptTransaction(session, startTime, fn, options) {\n    session.startTransaction(options);\n    let promise;\n    try {\n        promise = fn(session);\n    } catch (err) {\n        promise = Promise.reject(err);\n    }\n    if (!(0, utils_1.isPromiseLike)(promise)) {\n        session.abortTransaction().catch(()=>null);\n        throw new error_1.MongoInvalidArgumentError(\"Function provided to `withTransaction` must return a Promise\");\n    }\n    return promise.then(()=>{\n        if (userExplicitlyEndedTransaction(session)) {\n            return;\n        }\n        return attemptTransactionCommit(session, startTime, fn, options);\n    }, (err)=>{\n        function maybeRetryOrThrow(err) {\n            if (err instanceof error_1.MongoError && err.hasErrorLabel(error_1.MongoErrorLabel.TransientTransactionError) && hasNotTimedOut(startTime, MAX_WITH_TRANSACTION_TIMEOUT)) {\n                return attemptTransaction(session, startTime, fn, options);\n            }\n            if (isMaxTimeMSExpiredError(err)) {\n                err.addErrorLabel(error_1.MongoErrorLabel.UnknownTransactionCommitResult);\n            }\n            throw err;\n        }\n        if (session.inTransaction()) {\n            return session.abortTransaction().then(()=>maybeRetryOrThrow(err));\n        }\n        return maybeRetryOrThrow(err);\n    });\n}\nconst endTransactionAsync = (0, util_1.promisify)(endTransaction);\nfunction endTransaction(session, commandName, callback) {\n    // handle any initial problematic cases\n    const txnState = session.transaction.state;\n    if (txnState === transactions_1.TxnState.NO_TRANSACTION) {\n        callback(new error_1.MongoTransactionError(\"No transaction started\"));\n        return;\n    }\n    if (commandName === \"commitTransaction\") {\n        if (txnState === transactions_1.TxnState.STARTING_TRANSACTION || txnState === transactions_1.TxnState.TRANSACTION_COMMITTED_EMPTY) {\n            // the transaction was never started, we can safely exit here\n            session.transaction.transition(transactions_1.TxnState.TRANSACTION_COMMITTED_EMPTY);\n            callback();\n            return;\n        }\n        if (txnState === transactions_1.TxnState.TRANSACTION_ABORTED) {\n            callback(new error_1.MongoTransactionError(\"Cannot call commitTransaction after calling abortTransaction\"));\n            return;\n        }\n    } else {\n        if (txnState === transactions_1.TxnState.STARTING_TRANSACTION) {\n            // the transaction was never started, we can safely exit here\n            session.transaction.transition(transactions_1.TxnState.TRANSACTION_ABORTED);\n            callback();\n            return;\n        }\n        if (txnState === transactions_1.TxnState.TRANSACTION_ABORTED) {\n            callback(new error_1.MongoTransactionError(\"Cannot call abortTransaction twice\"));\n            return;\n        }\n        if (txnState === transactions_1.TxnState.TRANSACTION_COMMITTED || txnState === transactions_1.TxnState.TRANSACTION_COMMITTED_EMPTY) {\n            callback(new error_1.MongoTransactionError(\"Cannot call abortTransaction after calling commitTransaction\"));\n            return;\n        }\n    }\n    // construct and send the command\n    const command = {\n        [commandName]: 1\n    };\n    // apply a writeConcern if specified\n    let writeConcern;\n    if (session.transaction.options.writeConcern) {\n        writeConcern = Object.assign({}, session.transaction.options.writeConcern);\n    } else if (session.clientOptions && session.clientOptions.writeConcern) {\n        writeConcern = {\n            w: session.clientOptions.writeConcern.w\n        };\n    }\n    if (txnState === transactions_1.TxnState.TRANSACTION_COMMITTED) {\n        writeConcern = Object.assign({\n            wtimeoutMS: 10000\n        }, writeConcern, {\n            w: \"majority\"\n        });\n    }\n    if (writeConcern) {\n        write_concern_1.WriteConcern.apply(command, writeConcern);\n    }\n    if (commandName === \"commitTransaction\" && session.transaction.options.maxTimeMS) {\n        Object.assign(command, {\n            maxTimeMS: session.transaction.options.maxTimeMS\n        });\n    }\n    function commandHandler(error, result) {\n        if (commandName !== \"commitTransaction\") {\n            session.transaction.transition(transactions_1.TxnState.TRANSACTION_ABORTED);\n            if (session.loadBalanced) {\n                maybeClearPinnedConnection(session, {\n                    force: false\n                });\n            }\n            // The spec indicates that we should ignore all errors on `abortTransaction`\n            return callback();\n        }\n        session.transaction.transition(transactions_1.TxnState.TRANSACTION_COMMITTED);\n        if (error instanceof error_1.MongoError) {\n            if (error.hasErrorLabel(error_1.MongoErrorLabel.RetryableWriteError) || error instanceof error_1.MongoWriteConcernError || isMaxTimeMSExpiredError(error)) {\n                if (isUnknownTransactionCommitResult(error)) {\n                    error.addErrorLabel(error_1.MongoErrorLabel.UnknownTransactionCommitResult);\n                    // per txns spec, must unpin session in this case\n                    session.unpin({\n                        error\n                    });\n                }\n            } else if (error.hasErrorLabel(error_1.MongoErrorLabel.TransientTransactionError)) {\n                session.unpin({\n                    error\n                });\n            }\n        }\n        callback(error, result);\n    }\n    if (session.transaction.recoveryToken) {\n        command.recoveryToken = session.transaction.recoveryToken;\n    }\n    // send the command\n    (0, execute_operation_1.executeOperation)(session.client, new run_command_1.RunAdminCommandOperation(undefined, command, {\n        session,\n        readPreference: read_preference_1.ReadPreference.primary,\n        bypassPinningCheck: true\n    }), (error, result)=>{\n        if (command.abortTransaction) {\n            // always unpin on abort regardless of command outcome\n            session.unpin();\n        }\n        if (error instanceof error_1.MongoError && error.hasErrorLabel(error_1.MongoErrorLabel.RetryableWriteError)) {\n            // SPEC-1185: apply majority write concern when retrying commitTransaction\n            if (command.commitTransaction) {\n                // per txns spec, must unpin session in this case\n                session.unpin({\n                    force: true\n                });\n                command.writeConcern = Object.assign({\n                    wtimeout: 10000\n                }, command.writeConcern, {\n                    w: \"majority\"\n                });\n            }\n            return (0, execute_operation_1.executeOperation)(session.client, new run_command_1.RunAdminCommandOperation(undefined, command, {\n                session,\n                readPreference: read_preference_1.ReadPreference.primary,\n                bypassPinningCheck: true\n            }), commandHandler);\n        }\n        commandHandler(error, result);\n    });\n}\n/**\n * Reflects the existence of a session on the server. Can be reused by the session pool.\n * WARNING: not meant to be instantiated directly. For internal use only.\n * @public\n */ class ServerSession {\n    /** @internal */ constructor(){\n        this.id = {\n            id: new bson_1.Binary((0, utils_1.uuidV4)(), bson_1.Binary.SUBTYPE_UUID)\n        };\n        this.lastUse = (0, utils_1.now)();\n        this.txnNumber = 0;\n        this.isDirty = false;\n    }\n    /**\n     * Determines if the server session has timed out.\n     *\n     * @param sessionTimeoutMinutes - The server's \"logicalSessionTimeoutMinutes\"\n     */ hasTimedOut(sessionTimeoutMinutes) {\n        // Take the difference of the lastUse timestamp and now, which will result in a value in\n        // milliseconds, and then convert milliseconds to minutes to compare to `sessionTimeoutMinutes`\n        const idleTimeMinutes = Math.round((0, utils_1.calculateDurationInMs)(this.lastUse) % 86400000 % 3600000 / 60000);\n        return idleTimeMinutes > sessionTimeoutMinutes - 1;\n    }\n    /**\n     * @internal\n     * Cloning meant to keep a readable reference to the server session data\n     * after ClientSession has ended\n     */ static clone(serverSession) {\n        const arrayBuffer = new ArrayBuffer(16);\n        const idBytes = Buffer.from(arrayBuffer);\n        idBytes.set(serverSession.id.id.buffer);\n        const id = new bson_1.Binary(idBytes, serverSession.id.id.sub_type);\n        // Manual prototype construction to avoid modifying the constructor of this class\n        return Object.setPrototypeOf({\n            id: {\n                id\n            },\n            lastUse: serverSession.lastUse,\n            txnNumber: serverSession.txnNumber,\n            isDirty: serverSession.isDirty\n        }, ServerSession.prototype);\n    }\n}\nexports.ServerSession = ServerSession;\n/**\n * Maintains a pool of Server Sessions.\n * For internal use only\n * @internal\n */ class ServerSessionPool {\n    constructor(client){\n        if (client == null) {\n            throw new error_1.MongoRuntimeError(\"ServerSessionPool requires a MongoClient\");\n        }\n        this.client = client;\n        this.sessions = new utils_1.List();\n    }\n    /**\n     * Acquire a Server Session from the pool.\n     * Iterates through each session in the pool, removing any stale sessions\n     * along the way. The first non-stale session found is removed from the\n     * pool and returned. If no non-stale session is found, a new ServerSession is created.\n     */ acquire() {\n        const sessionTimeoutMinutes = this.client.topology?.logicalSessionTimeoutMinutes ?? 10;\n        let session = null;\n        // Try to obtain from session pool\n        while(this.sessions.length > 0){\n            const potentialSession = this.sessions.shift();\n            if (potentialSession != null && (!!this.client.topology?.loadBalanced || !potentialSession.hasTimedOut(sessionTimeoutMinutes))) {\n                session = potentialSession;\n                break;\n            }\n        }\n        // If nothing valid came from the pool make a new one\n        if (session == null) {\n            session = new ServerSession();\n        }\n        return session;\n    }\n    /**\n     * Release a session to the session pool\n     * Adds the session back to the session pool if the session has not timed out yet.\n     * This method also removes any stale sessions from the pool.\n     *\n     * @param session - The session to release to the pool\n     */ release(session) {\n        const sessionTimeoutMinutes = this.client.topology?.logicalSessionTimeoutMinutes ?? 10;\n        if (this.client.topology?.loadBalanced && !sessionTimeoutMinutes) {\n            this.sessions.unshift(session);\n        }\n        if (!sessionTimeoutMinutes) {\n            return;\n        }\n        this.sessions.prune((session)=>session.hasTimedOut(sessionTimeoutMinutes));\n        if (!session.hasTimedOut(sessionTimeoutMinutes)) {\n            if (session.isDirty) {\n                return;\n            }\n            // otherwise, readd this session to the session pool\n            this.sessions.unshift(session);\n        }\n    }\n}\nexports.ServerSessionPool = ServerSessionPool;\n/**\n * Optionally decorate a command with sessions specific keys\n *\n * @param session - the session tracking transaction state\n * @param command - the command to decorate\n * @param options - Optional settings passed to calling operation\n *\n * @internal\n */ function applySession(session, command, options) {\n    if (session.hasEnded) {\n        return new error_1.MongoExpiredSessionError();\n    }\n    // May acquire serverSession here\n    const serverSession = session.serverSession;\n    if (serverSession == null) {\n        return new error_1.MongoRuntimeError(\"Unable to acquire server session\");\n    }\n    if (options.writeConcern?.w === 0) {\n        if (session && session.explicit) {\n            // Error if user provided an explicit session to an unacknowledged write (SPEC-1019)\n            return new error_1.MongoAPIError(\"Cannot have explicit session with unacknowledged writes\");\n        }\n        return;\n    }\n    // mark the last use of this session, and apply the `lsid`\n    serverSession.lastUse = (0, utils_1.now)();\n    command.lsid = serverSession.id;\n    const inTxnOrTxnCommand = session.inTransaction() || (0, transactions_1.isTransactionCommand)(command);\n    const isRetryableWrite = !!options.willRetryWrite;\n    if (isRetryableWrite || inTxnOrTxnCommand) {\n        serverSession.txnNumber += session[kTxnNumberIncrement];\n        session[kTxnNumberIncrement] = 0;\n        // TODO(NODE-2674): Preserve int64 sent from MongoDB\n        command.txnNumber = bson_1.Long.fromNumber(serverSession.txnNumber);\n    }\n    if (!inTxnOrTxnCommand) {\n        if (session.transaction.state !== transactions_1.TxnState.NO_TRANSACTION) {\n            session.transaction.transition(transactions_1.TxnState.NO_TRANSACTION);\n        }\n        if (session.supports.causalConsistency && session.operationTime && (0, utils_1.commandSupportsReadConcern)(command, options)) {\n            command.readConcern = command.readConcern || {};\n            Object.assign(command.readConcern, {\n                afterClusterTime: session.operationTime\n            });\n        } else if (session[kSnapshotEnabled]) {\n            command.readConcern = command.readConcern || {\n                level: read_concern_1.ReadConcernLevel.snapshot\n            };\n            if (session[kSnapshotTime] != null) {\n                Object.assign(command.readConcern, {\n                    atClusterTime: session[kSnapshotTime]\n                });\n            }\n        }\n        return;\n    }\n    // now attempt to apply transaction-specific sessions data\n    // `autocommit` must always be false to differentiate from retryable writes\n    command.autocommit = false;\n    if (session.transaction.state === transactions_1.TxnState.STARTING_TRANSACTION) {\n        session.transaction.transition(transactions_1.TxnState.TRANSACTION_IN_PROGRESS);\n        command.startTransaction = true;\n        const readConcern = session.transaction.options.readConcern || session?.clientOptions?.readConcern;\n        if (readConcern) {\n            command.readConcern = readConcern;\n        }\n        if (session.supports.causalConsistency && session.operationTime) {\n            command.readConcern = command.readConcern || {};\n            Object.assign(command.readConcern, {\n                afterClusterTime: session.operationTime\n            });\n        }\n    }\n    return;\n}\nexports.applySession = applySession;\nfunction updateSessionFromResponse(session, document) {\n    if (document.$clusterTime) {\n        (0, common_1._advanceClusterTime)(session, document.$clusterTime);\n    }\n    if (document.operationTime && session && session.supports.causalConsistency) {\n        session.advanceOperationTime(document.operationTime);\n    }\n    if (document.recoveryToken && session && session.inTransaction()) {\n        session.transaction._recoveryToken = document.recoveryToken;\n    }\n    if (session?.[kSnapshotEnabled] && session[kSnapshotTime] == null) {\n        // find and aggregate commands return atClusterTime on the cursor\n        // distinct includes it in the response body\n        const atClusterTime = document.cursor?.atClusterTime || document.atClusterTime;\n        if (atClusterTime) {\n            session[kSnapshotTime] = atClusterTime;\n        }\n    }\n}\nexports.updateSessionFromResponse = updateSessionFromResponse; //# sourceMappingURL=sessions.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2Vzc2lvbnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQTtBQUNKQyw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsaUNBQWlDLEdBQUdBLG9CQUFvQixHQUFHQSx5QkFBeUIsR0FBR0EscUJBQXFCLEdBQUdBLGtDQUFrQyxHQUFHQSxxQkFBcUIsR0FBRyxLQUFLO0FBQ2pMLE1BQU1RLFNBQVNDLG1CQUFPQSxDQUFDLGtCQUFNO0FBQzdCLE1BQU1DLFNBQVNELG1CQUFPQSxDQUFDLHdEQUFRO0FBQy9CLE1BQU1FLFlBQVlGLG1CQUFPQSxDQUFDLHdFQUFnQjtBQUMxQyxNQUFNRyxXQUFXSCxtQkFBT0EsQ0FBQyxrR0FBNkI7QUFDdEQsTUFBTUksY0FBY0osbUJBQU9BLENBQUMsa0VBQWE7QUFDekMsTUFBTUssVUFBVUwsbUJBQU9BLENBQUMsMERBQVM7QUFDakMsTUFBTU0sZ0JBQWdCTixtQkFBT0EsQ0FBQyxzRUFBZTtBQUM3QyxNQUFNTyxzQkFBc0JQLG1CQUFPQSxDQUFDLHdHQUFnQztBQUNwRSxNQUFNUSxnQkFBZ0JSLG1CQUFPQSxDQUFDLDRGQUEwQjtBQUN4RCxNQUFNUyxpQkFBaUJULG1CQUFPQSxDQUFDLHdFQUFnQjtBQUMvQyxNQUFNVSxvQkFBb0JWLG1CQUFPQSxDQUFDLDhFQUFtQjtBQUNyRCxNQUFNVyxXQUFXWCxtQkFBT0EsQ0FBQyxzRUFBZTtBQUN4QyxNQUFNWSxpQkFBaUJaLG1CQUFPQSxDQUFDLHdFQUFnQjtBQUMvQyxNQUFNYSxVQUFVYixtQkFBT0EsQ0FBQywwREFBUztBQUNqQyxNQUFNYyxrQkFBa0JkLG1CQUFPQSxDQUFDLDBFQUFpQjtBQUNqRCxNQUFNZSx1Q0FBdUM7QUFDN0MsY0FBYyxHQUNkLE1BQU1DLGlCQUFpQkMsT0FBTztBQUM5QixjQUFjLEdBQ2QsTUFBTUMsZ0JBQWdCRCxPQUFPO0FBQzdCLGNBQWMsR0FDZCxNQUFNRSxtQkFB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QUFJNkwsU0FBU2xELGFBQWEsSUFBSS9GLFdBQVdBLFFBQVF0QixhQUFhLElBQUk7UUFDOURzQixRQUFRdkMsV0FBVyxDQUFDMEwsY0FBYyxHQUFHRixTQUFTbEQsYUFBYTtJQUMvRDtJQUNBLElBQUkvRixTQUFTLENBQUNoRSxpQkFBaUIsSUFBSWdFLE9BQU8sQ0FBQ2pFLGNBQWMsSUFBSSxNQUFNO1FBQy9ELGlFQUFpRTtRQUNqRSw0Q0FBNEM7UUFDNUMsTUFBTStNLGdCQUFnQkcsU0FBU0csTUFBTSxFQUFFTixpQkFBaUJHLFNBQVNILGFBQWE7UUFDOUUsSUFBSUEsZUFBZTtZQUNmOUksT0FBTyxDQUFDakUsY0FBYyxHQUFHK007UUFDN0I7SUFDSjtBQUNKO0FBQ0ExTyxpQ0FBaUMsR0FBR0UsMkJBQ3BDLG9DQUFvQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtYXV0aC1yZWdpc3Rlci8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9zZXNzaW9ucy5qcz9mMjgxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9hO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy51cGRhdGVTZXNzaW9uRnJvbVJlc3BvbnNlID0gZXhwb3J0cy5hcHBseVNlc3Npb24gPSBleHBvcnRzLlNlcnZlclNlc3Npb25Qb29sID0gZXhwb3J0cy5TZXJ2ZXJTZXNzaW9uID0gZXhwb3J0cy5tYXliZUNsZWFyUGlubmVkQ29ubmVjdGlvbiA9IGV4cG9ydHMuQ2xpZW50U2Vzc2lvbiA9IHZvaWQgMDtcbmNvbnN0IHV0aWxfMSA9IHJlcXVpcmUoXCJ1dGlsXCIpO1xuY29uc3QgYnNvbl8xID0gcmVxdWlyZShcIi4vYnNvblwiKTtcbmNvbnN0IG1ldHJpY3NfMSA9IHJlcXVpcmUoXCIuL2NtYXAvbWV0cmljc1wiKTtcbmNvbnN0IHNoYXJlZF8xID0gcmVxdWlyZShcIi4vY21hcC93aXJlX3Byb3RvY29sL3NoYXJlZFwiKTtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuL2Vycm9yXCIpO1xuY29uc3QgbW9uZ29fdHlwZXNfMSA9IHJlcXVpcmUoXCIuL21vbmdvX3R5cGVzXCIpO1xuY29uc3QgZXhlY3V0ZV9vcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvZXhlY3V0ZV9vcGVyYXRpb25cIik7XG5jb25zdCBydW5fY29tbWFuZF8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9ydW5fY29tbWFuZFwiKTtcbmNvbnN0IHJlYWRfY29uY2Vybl8xID0gcmVxdWlyZShcIi4vcmVhZF9jb25jZXJuXCIpO1xuY29uc3QgcmVhZF9wcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi9yZWFkX3ByZWZlcmVuY2VcIik7XG5jb25zdCBjb21tb25fMSA9IHJlcXVpcmUoXCIuL3NkYW0vY29tbW9uXCIpO1xuY29uc3QgdHJhbnNhY3Rpb25zXzEgPSByZXF1aXJlKFwiLi90cmFuc2FjdGlvbnNcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG5jb25zdCB3cml0ZV9jb25jZXJuXzEgPSByZXF1aXJlKFwiLi93cml0ZV9jb25jZXJuXCIpO1xuY29uc3QgbWluV2lyZVZlcnNpb25Gb3JTaGFyZGVkVHJhbnNhY3Rpb25zID0gODtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtTZXJ2ZXJTZXNzaW9uID0gU3ltYm9sKCdzZXJ2ZXJTZXNzaW9uJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrU25hcHNob3RUaW1lID0gU3ltYm9sKCdzbmFwc2hvdFRpbWUnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtTbmFwc2hvdEVuYWJsZWQgPSBTeW1ib2woJ3NuYXBzaG90RW5hYmxlZCcpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga1Bpbm5lZENvbm5lY3Rpb24gPSBTeW1ib2woJ3Bpbm5lZENvbm5lY3Rpb24nKTtcbi8qKiBAaW50ZXJuYWwgQWNjdW11bGF0ZXMgdG90YWwgbnVtYmVyIG9mIGluY3JlbWVudHMgdG8gYWRkIHRvIHR4bk51bWJlciB3aGVuIGFwcGx5aW5nIHNlc3Npb24gdG8gY29tbWFuZCAqL1xuY29uc3Qga1R4bk51bWJlckluY3JlbWVudCA9IFN5bWJvbCgndHhuTnVtYmVySW5jcmVtZW50Jyk7XG4vKipcbiAqIEEgY2xhc3MgcmVwcmVzZW50aW5nIGEgY2xpZW50IHNlc3Npb24gb24gdGhlIHNlcnZlclxuICpcbiAqIE5PVEU6IG5vdCBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQgZGlyZWN0bHkuXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIENsaWVudFNlc3Npb24gZXh0ZW5kcyBtb25nb190eXBlc18xLlR5cGVkRXZlbnRFbWl0dGVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBjbGllbnQgc2Vzc2lvbi5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gY2xpZW50IC0gVGhlIGN1cnJlbnQgY2xpZW50XG4gICAgICogQHBhcmFtIHNlc3Npb25Qb29sIC0gVGhlIHNlcnZlciBzZXNzaW9uIHBvb2wgKEludGVybmFsIENsYXNzKVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3NcbiAgICAgKiBAcGFyYW0gY2xpZW50T3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIHByb3ZpZGVkIHdoZW4gY3JlYXRpbmcgYSBNb25nb0NsaWVudFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNsaWVudCwgc2Vzc2lvblBvb2wsIG9wdGlvbnMsIGNsaWVudE9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzW19hXSA9IGZhbHNlO1xuICAgICAgICBpZiAoY2xpZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ0NsaWVudFNlc3Npb24gcmVxdWlyZXMgYSBNb25nb0NsaWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZXNzaW9uUG9vbCA9PSBudWxsIHx8ICEoc2Vzc2lvblBvb2wgaW5zdGFuY2VvZiBTZXJ2ZXJTZXNzaW9uUG9vbCkpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ0NsaWVudFNlc3Npb24gcmVxdWlyZXMgYSBTZXJ2ZXJTZXNzaW9uUG9vbCcpO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8/IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5zbmFwc2hvdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpc1trU25hcHNob3RFbmFibGVkXSA9IHRydWU7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jYXVzYWxDb25zaXN0ZW5jeSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1Byb3BlcnRpZXMgXCJjYXVzYWxDb25zaXN0ZW5jeVwiIGFuZCBcInNuYXBzaG90XCIgYXJlIG11dHVhbGx5IGV4Y2x1c2l2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xpZW50ID0gY2xpZW50O1xuICAgICAgICB0aGlzLnNlc3Npb25Qb29sID0gc2Vzc2lvblBvb2w7XG4gICAgICAgIHRoaXMuaGFzRW5kZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jbGllbnRPcHRpb25zID0gY2xpZW50T3B0aW9ucztcbiAgICAgICAgdGhpcy5leHBsaWNpdCA9ICEhb3B0aW9ucy5leHBsaWNpdDtcbiAgICAgICAgdGhpc1trU2VydmVyU2Vzc2lvbl0gPSB0aGlzLmV4cGxpY2l0ID8gdGhpcy5zZXNzaW9uUG9vbC5hY3F1aXJlKCkgOiBudWxsO1xuICAgICAgICB0aGlzW2tUeG5OdW1iZXJJbmNyZW1lbnRdID0gMDtcbiAgICAgICAgY29uc3QgZGVmYXVsdENhdXNhbENvbnNpc3RlbmN5VmFsdWUgPSB0aGlzLmV4cGxpY2l0ICYmIG9wdGlvbnMuc25hcHNob3QgIT09IHRydWU7XG4gICAgICAgIHRoaXMuc3VwcG9ydHMgPSB7XG4gICAgICAgICAgICAvLyBpZiB3ZSBjYW4gZW5hYmxlIGNhdXNhbCBjb25zaXN0ZW5jeSwgZG8gc28gYnkgZGVmYXVsdFxuICAgICAgICAgICAgY2F1c2FsQ29uc2lzdGVuY3k6IG9wdGlvbnMuY2F1c2FsQ29uc2lzdGVuY3kgPz8gZGVmYXVsdENhdXNhbENvbnNpc3RlbmN5VmFsdWVcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jbHVzdGVyVGltZSA9IG9wdGlvbnMuaW5pdGlhbENsdXN0ZXJUaW1lO1xuICAgICAgICB0aGlzLm9wZXJhdGlvblRpbWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMub3duZXIgPSBvcHRpb25zLm93bmVyO1xuICAgICAgICB0aGlzLmRlZmF1bHRUcmFuc2FjdGlvbk9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zLmRlZmF1bHRUcmFuc2FjdGlvbk9wdGlvbnMpO1xuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uID0gbmV3IHRyYW5zYWN0aW9uc18xLlRyYW5zYWN0aW9uKCk7XG4gICAgfVxuICAgIC8qKiBUaGUgc2VydmVyIGlkIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHNlc3Npb24gKi9cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tTZXJ2ZXJTZXNzaW9uXT8uaWQ7XG4gICAgfVxuICAgIGdldCBzZXJ2ZXJTZXNzaW9uKCkge1xuICAgICAgICBsZXQgc2VydmVyU2Vzc2lvbiA9IHRoaXNba1NlcnZlclNlc3Npb25dO1xuICAgICAgICBpZiAoc2VydmVyU2Vzc2lvbiA9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5leHBsaWNpdCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdVbmV4cGVjdGVkIG51bGwgc2VydmVyU2Vzc2lvbiBmb3IgYW4gZXhwbGljaXQgc2Vzc2lvbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaGFzRW5kZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignVW5leHBlY3RlZCBudWxsIHNlcnZlclNlc3Npb24gZm9yIGFuIGVuZGVkIGltcGxpY2l0IHNlc3Npb24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcnZlclNlc3Npb24gPSB0aGlzLnNlc3Npb25Qb29sLmFjcXVpcmUoKTtcbiAgICAgICAgICAgIHRoaXNba1NlcnZlclNlc3Npb25dID0gc2VydmVyU2Vzc2lvbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VydmVyU2Vzc2lvbjtcbiAgICB9XG4gICAgLyoqIFdoZXRoZXIgb3Igbm90IHRoaXMgc2Vzc2lvbiBpcyBjb25maWd1cmVkIGZvciBzbmFwc2hvdCByZWFkcyAqL1xuICAgIGdldCBzbmFwc2hvdEVuYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tTbmFwc2hvdEVuYWJsZWRdO1xuICAgIH1cbiAgICBnZXQgbG9hZEJhbGFuY2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGllbnQudG9wb2xvZ3k/LmRlc2NyaXB0aW9uLnR5cGUgPT09IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5Mb2FkQmFsYW5jZWQ7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBnZXQgcGlubmVkQ29ubmVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba1Bpbm5lZENvbm5lY3Rpb25dO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgcGluKGNvbm4pIHtcbiAgICAgICAgaWYgKHRoaXNba1Bpbm5lZENvbm5lY3Rpb25dKSB7XG4gICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ0Nhbm5vdCBwaW4gbXVsdGlwbGUgY29ubmVjdGlvbnMgdG8gdGhlIHNhbWUgc2Vzc2lvbicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNba1Bpbm5lZENvbm5lY3Rpb25dID0gY29ubjtcbiAgICAgICAgY29ubi5lbWl0KGNvbnN0YW50c18xLlBJTk5FRCwgdGhpcy5pblRyYW5zYWN0aW9uKCkgPyBtZXRyaWNzXzEuQ29ubmVjdGlvblBvb2xNZXRyaWNzLlRYTiA6IG1ldHJpY3NfMS5Db25uZWN0aW9uUG9vbE1ldHJpY3MuQ1VSU09SKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIHVucGluKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMubG9hZEJhbGFuY2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gbWF5YmVDbGVhclBpbm5lZENvbm5lY3Rpb24odGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbi51bnBpblNlcnZlcigpO1xuICAgIH1cbiAgICBnZXQgaXNQaW5uZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRCYWxhbmNlZCA/ICEhdGhpc1trUGlubmVkQ29ubmVjdGlvbl0gOiB0aGlzLnRyYW5zYWN0aW9uLmlzUGlubmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmRzIHRoaXMgc2Vzc2lvbiBvbiB0aGUgc2VydmVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzLiBDdXJyZW50bHkgcmVzZXJ2ZWQgZm9yIGZ1dHVyZSB1c2VcbiAgICAgKi9cbiAgICBhc3luYyBlbmRTZXNzaW9uKG9wdGlvbnMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmluVHJhbnNhY3Rpb24oKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWJvcnRUcmFuc2FjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmhhc0VuZGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmVyU2Vzc2lvbiA9IHRoaXNba1NlcnZlclNlc3Npb25dO1xuICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXJTZXNzaW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVsZWFzZSB0aGUgc2VydmVyIHNlc3Npb24gYmFjayB0byB0aGUgcG9vbFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlc3Npb25Qb29sLnJlbGVhc2Uoc2VydmVyU2Vzc2lvbik7XG4gICAgICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBhIG5ldyBzZXJ2ZXJTZXNzaW9uIG5ldmVyIG1ha2VzIGl0IG9udG8gdGhpcyBDbGllbnRTZXNzaW9uXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrU2VydmVyU2Vzc2lvbiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFNlcnZlclNlc3Npb24uY2xvbmUoc2VydmVyU2Vzc2lvbiksXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIG1hcmsgdGhlIHNlc3Npb24gYXMgZW5kZWQsIGFuZCBlbWl0IGEgc2lnbmFsXG4gICAgICAgICAgICAgICAgdGhpcy5oYXNFbmRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlbmRlZCcsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIC8vIHNwZWMgaW5kaWNhdGVzIHRoYXQgd2Ugc2hvdWxkIGlnbm9yZSBhbGwgZXJyb3JzIGZvciBgZW5kU2Vzc2lvbnNgXG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBtYXliZUNsZWFyUGlubmVkQ29ubmVjdGlvbih0aGlzLCB7IGZvcmNlOiB0cnVlLCAuLi5vcHRpb25zIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkdmFuY2VzIHRoZSBvcGVyYXRpb25UaW1lIGZvciBhIENsaWVudFNlc3Npb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3BlcmF0aW9uVGltZSAtIHRoZSBgQlNPTi5UaW1lc3RhbXBgIG9mIHRoZSBvcGVyYXRpb24gdHlwZSBpdCBpcyBkZXNpcmVkIHRvIGFkdmFuY2UgdG9cbiAgICAgKi9cbiAgICBhZHZhbmNlT3BlcmF0aW9uVGltZShvcGVyYXRpb25UaW1lKSB7XG4gICAgICAgIGlmICh0aGlzLm9wZXJhdGlvblRpbWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5vcGVyYXRpb25UaW1lID0gb3BlcmF0aW9uVGltZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3BlcmF0aW9uVGltZS5ncmVhdGVyVGhhbih0aGlzLm9wZXJhdGlvblRpbWUpKSB7XG4gICAgICAgICAgICB0aGlzLm9wZXJhdGlvblRpbWUgPSBvcGVyYXRpb25UaW1lO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkdmFuY2VzIHRoZSBjbHVzdGVyVGltZSBmb3IgYSBDbGllbnRTZXNzaW9uIHRvIHRoZSBwcm92aWRlZCBjbHVzdGVyVGltZSBvZiBhbm90aGVyIENsaWVudFNlc3Npb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjbHVzdGVyVGltZSAtIHRoZSAkY2x1c3RlclRpbWUgcmV0dXJuZWQgYnkgdGhlIHNlcnZlciBmcm9tIGFub3RoZXIgc2Vzc2lvbiBpbiB0aGUgZm9ybSBvZiBhIGRvY3VtZW50IGNvbnRhaW5pbmcgdGhlIGBCU09OLlRpbWVzdGFtcGAgY2x1c3RlclRpbWUgYW5kIHNpZ25hdHVyZVxuICAgICAqL1xuICAgIGFkdmFuY2VDbHVzdGVyVGltZShjbHVzdGVyVGltZSkge1xuICAgICAgICBpZiAoIWNsdXN0ZXJUaW1lIHx8IHR5cGVvZiBjbHVzdGVyVGltZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ2lucHV0IGNsdXN0ZXIgdGltZSBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY2x1c3RlclRpbWUuY2x1c3RlclRpbWUgfHwgY2x1c3RlclRpbWUuY2x1c3RlclRpbWUuX2Jzb250eXBlICE9PSAnVGltZXN0YW1wJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignaW5wdXQgY2x1c3RlciB0aW1lIFwiY2x1c3RlclRpbWVcIiBwcm9wZXJ0eSBtdXN0IGJlIGEgdmFsaWQgQlNPTiBUaW1lc3RhbXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNsdXN0ZXJUaW1lLnNpZ25hdHVyZSB8fFxuICAgICAgICAgICAgY2x1c3RlclRpbWUuc2lnbmF0dXJlLmhhc2g/Ll9ic29udHlwZSAhPT0gJ0JpbmFyeScgfHxcbiAgICAgICAgICAgICh0eXBlb2YgY2x1c3RlclRpbWUuc2lnbmF0dXJlLmtleUlkICE9PSAnYmlnaW50JyAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBjbHVzdGVyVGltZS5zaWduYXR1cmUua2V5SWQgIT09ICdudW1iZXInICYmXG4gICAgICAgICAgICAgICAgY2x1c3RlclRpbWUuc2lnbmF0dXJlLmtleUlkPy5fYnNvbnR5cGUgIT09ICdMb25nJykgLy8gYXBwYXJlbnRseSB3ZSBkZWNvZGUgdGhlIGtleSB0byBudW1iZXI/XG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignaW5wdXQgY2x1c3RlciB0aW1lIG11c3QgaGF2ZSBhIHZhbGlkIFwic2lnbmF0dXJlXCIgcHJvcGVydHkgd2l0aCBCU09OIEJpbmFyeSBoYXNoIGFuZCBCU09OIExvbmcga2V5SWQnKTtcbiAgICAgICAgfVxuICAgICAgICAoMCwgY29tbW9uXzEuX2FkdmFuY2VDbHVzdGVyVGltZSkodGhpcywgY2x1c3RlclRpbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGRldGVybWluZSBpZiB0aGlzIHNlc3Npb24gZXF1YWxzIGFub3RoZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZXNzaW9uIC0gVGhlIHNlc3Npb24gdG8gY29tcGFyZSB0b1xuICAgICAqL1xuICAgIGVxdWFscyhzZXNzaW9uKSB7XG4gICAgICAgIGlmICghKHNlc3Npb24gaW5zdGFuY2VvZiBDbGllbnRTZXNzaW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlkID09IG51bGwgfHwgc2Vzc2lvbi5pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHV0aWxzXzEuQnl0ZVV0aWxzLmVxdWFscyh0aGlzLmlkLmlkLmJ1ZmZlciwgc2Vzc2lvbi5pZC5pZC5idWZmZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNyZW1lbnQgdGhlIHRyYW5zYWN0aW9uIG51bWJlciBvbiB0aGUgaW50ZXJuYWwgU2VydmVyU2Vzc2lvblxuICAgICAqXG4gICAgICogQHByaXZhdGVSZW1hcmtzXG4gICAgICogVGhpcyBoZWxwZXIgaW5jcmVtZW50cyBhIHZhbHVlIHN0b3JlZCBvbiB0aGUgY2xpZW50IHNlc3Npb24gdGhhdCB3aWxsIGJlXG4gICAgICogYWRkZWQgdG8gdGhlIHNlcnZlclNlc3Npb24ncyB0eG5OdW1iZXIgdXBvbiBhcHBseWluZyBpdCB0byBhIGNvbW1hbmQuXG4gICAgICogVGhpcyBpcyBiZWNhdXNlIHRoZSBzZXJ2ZXJTZXNzaW9uIGlzIGxhemlseSBhY3F1aXJlZCBhZnRlciBhIGNvbm5lY3Rpb24gaXMgb2J0YWluZWRcbiAgICAgKi9cbiAgICBpbmNyZW1lbnRUcmFuc2FjdGlvbk51bWJlcigpIHtcbiAgICAgICAgdGhpc1trVHhuTnVtYmVySW5jcmVtZW50XSArPSAxO1xuICAgIH1cbiAgICAvKiogQHJldHVybnMgd2hldGhlciB0aGlzIHNlc3Npb24gaXMgY3VycmVudGx5IGluIGEgdHJhbnNhY3Rpb24gb3Igbm90ICovXG4gICAgaW5UcmFuc2FjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb24uaXNBY3RpdmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBhIG5ldyB0cmFuc2FjdGlvbiB3aXRoIHRoZSBnaXZlbiBvcHRpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgdHJhbnNhY3Rpb25cbiAgICAgKi9cbiAgICBzdGFydFRyYW5zYWN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXNba1NuYXBzaG90RW5hYmxlZF0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yKCdUcmFuc2FjdGlvbnMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gc25hcHNob3Qgc2Vzc2lvbnMnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pblRyYW5zYWN0aW9uKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvVHJhbnNhY3Rpb25FcnJvcignVHJhbnNhY3Rpb24gYWxyZWFkeSBpbiBwcm9ncmVzcycpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzUGlubmVkICYmIHRoaXMudHJhbnNhY3Rpb24uaXNDb21taXR0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudW5waW4oKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b3BvbG9neU1heFdpcmVWZXJzaW9uID0gKDAsIHV0aWxzXzEubWF4V2lyZVZlcnNpb24pKHRoaXMuY2xpZW50LnRvcG9sb2d5KTtcbiAgICAgICAgaWYgKCgwLCBzaGFyZWRfMS5pc1NoYXJkZWQpKHRoaXMuY2xpZW50LnRvcG9sb2d5KSAmJlxuICAgICAgICAgICAgdG9wb2xvZ3lNYXhXaXJlVmVyc2lvbiAhPSBudWxsICYmXG4gICAgICAgICAgICB0b3BvbG9neU1heFdpcmVWZXJzaW9uIDwgbWluV2lyZVZlcnNpb25Gb3JTaGFyZGVkVHJhbnNhY3Rpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0NvbXBhdGliaWxpdHlFcnJvcignVHJhbnNhY3Rpb25zIGFyZSBub3Qgc3VwcG9ydGVkIG9uIHNoYXJkZWQgY2x1c3RlcnMgaW4gTW9uZ29EQiA8IDQuMi4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpbmNyZW1lbnQgdHhuTnVtYmVyXG4gICAgICAgIHRoaXMuaW5jcmVtZW50VHJhbnNhY3Rpb25OdW1iZXIoKTtcbiAgICAgICAgLy8gY3JlYXRlIHRyYW5zYWN0aW9uIHN0YXRlXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb24gPSBuZXcgdHJhbnNhY3Rpb25zXzEuVHJhbnNhY3Rpb24oe1xuICAgICAgICAgICAgcmVhZENvbmNlcm46IG9wdGlvbnM/LnJlYWRDb25jZXJuID8/XG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0VHJhbnNhY3Rpb25PcHRpb25zLnJlYWRDb25jZXJuID8/XG4gICAgICAgICAgICAgICAgdGhpcy5jbGllbnRPcHRpb25zPy5yZWFkQ29uY2VybixcbiAgICAgICAgICAgIHdyaXRlQ29uY2Vybjogb3B0aW9ucz8ud3JpdGVDb25jZXJuID8/XG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0VHJhbnNhY3Rpb25PcHRpb25zLndyaXRlQ29uY2VybiA/P1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50T3B0aW9ucz8ud3JpdGVDb25jZXJuLFxuICAgICAgICAgICAgcmVhZFByZWZlcmVuY2U6IG9wdGlvbnM/LnJlYWRQcmVmZXJlbmNlID8/XG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0VHJhbnNhY3Rpb25PcHRpb25zLnJlYWRQcmVmZXJlbmNlID8/XG4gICAgICAgICAgICAgICAgdGhpcy5jbGllbnRPcHRpb25zPy5yZWFkUHJlZmVyZW5jZSxcbiAgICAgICAgICAgIG1heENvbW1pdFRpbWVNUzogb3B0aW9ucz8ubWF4Q29tbWl0VGltZU1TID8/IHRoaXMuZGVmYXVsdFRyYW5zYWN0aW9uT3B0aW9ucy5tYXhDb21taXRUaW1lTVNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb24udHJhbnNpdGlvbih0cmFuc2FjdGlvbnNfMS5UeG5TdGF0ZS5TVEFSVElOR19UUkFOU0FDVElPTik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbW1pdHMgdGhlIGN1cnJlbnRseSBhY3RpdmUgdHJhbnNhY3Rpb24gaW4gdGhpcyBzZXNzaW9uLlxuICAgICAqL1xuICAgIGFzeW5jIGNvbW1pdFRyYW5zYWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZW5kVHJhbnNhY3Rpb25Bc3luYyh0aGlzLCAnY29tbWl0VHJhbnNhY3Rpb24nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWJvcnRzIHRoZSBjdXJyZW50bHkgYWN0aXZlIHRyYW5zYWN0aW9uIGluIHRoaXMgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBhc3luYyBhYm9ydFRyYW5zYWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZW5kVHJhbnNhY3Rpb25Bc3luYyh0aGlzLCAnYWJvcnRUcmFuc2FjdGlvbicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIGhlcmUgdG8gZW5zdXJlIHRoYXQgQ2xpZW50U2Vzc2lvbiBpcyBuZXZlciBzZXJpYWxpemVkIHRvIEJTT04uXG4gICAgICovXG4gICAgdG9CU09OKCkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignQ2xpZW50U2Vzc2lvbiBjYW5ub3QgYmUgc2VyaWFsaXplZCB0byBCU09OLicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW5zIGEgcHJvdmlkZWQgY2FsbGJhY2sgd2l0aGluIGEgdHJhbnNhY3Rpb24sIHJldHJ5aW5nIGVpdGhlciB0aGUgY29tbWl0VHJhbnNhY3Rpb24gb3BlcmF0aW9uXG4gICAgICogb3IgZW50aXJlIHRyYW5zYWN0aW9uIGFzIG5lZWRlZCAoYW5kIHdoZW4gdGhlIGVycm9yIHBlcm1pdHMpIHRvIGJldHRlciBlbnN1cmUgdGhhdFxuICAgICAqIHRoZSB0cmFuc2FjdGlvbiBjYW4gY29tcGxldGUgc3VjY2Vzc2Z1bGx5LlxuICAgICAqXG4gICAgICogKipJTVBPUlRBTlQ6KiogVGhpcyBtZXRob2QgcmVxdWlyZXMgdGhlIHVzZXIgdG8gcmV0dXJuIGEgUHJvbWlzZSwgYW5kIGBhd2FpdGAgYWxsIG9wZXJhdGlvbnMuXG4gICAgICogQW55IGNhbGxiYWNrcyB0aGF0IGRvIG5vdCByZXR1cm4gYSBQcm9taXNlIHdpbGwgcmVzdWx0IGluIHVuZGVmaW5lZCBiZWhhdmlvci5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBmdW5jdGlvbjpcbiAgICAgKiAtIFdpbGwgcmV0dXJuIHRoZSBjb21tYW5kIHJlc3BvbnNlIGZyb20gdGhlIGZpbmFsIGNvbW1pdFRyYW5zYWN0aW9uIGlmIGV2ZXJ5IG9wZXJhdGlvbiBpcyBzdWNjZXNzZnVsIChjYW4gYmUgdXNlZCBhcyBhIHRydXRoeSBvYmplY3QpXG4gICAgICogLSBXaWxsIHJldHVybiBgdW5kZWZpbmVkYCBpZiB0aGUgdHJhbnNhY3Rpb24gaXMgZXhwbGljaXRseSBhYm9ydGVkIHdpdGggYGF3YWl0IHNlc3Npb24uYWJvcnRUcmFuc2FjdGlvbigpYFxuICAgICAqIC0gV2lsbCB0aHJvdyBpZiBvbmUgb2YgdGhlIG9wZXJhdGlvbnMgdGhyb3dzIG9yIGB0aHJvd2Agc3RhdGVtZW50IGlzIHVzZWQgaW5zaWRlIHRoZSBgd2l0aFRyYW5zYWN0aW9uYCBjYWxsYmFja1xuICAgICAqXG4gICAgICogQ2hlY2tvdXQgYSBkZXNjcmlwdGl2ZSBleGFtcGxlIGhlcmU6XG4gICAgICogQHNlZSBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kZXZlbG9wZXIvcXVpY2tzdGFydC9ub2RlLXRyYW5zYWN0aW9ucy9cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmbiAtIGNhbGxiYWNrIHRvIHJ1biB3aXRoaW4gYSB0cmFuc2FjdGlvblxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gb3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSB0cmFuc2FjdGlvblxuICAgICAqIEByZXR1cm5zIEEgcmF3IGNvbW1hbmQgcmVzcG9uc2Ugb3IgdW5kZWZpbmVkXG4gICAgICovXG4gICAgYXN5bmMgd2l0aFRyYW5zYWN0aW9uKGZuLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9ICgwLCB1dGlsc18xLm5vdykoKTtcbiAgICAgICAgcmV0dXJuIGF0dGVtcHRUcmFuc2FjdGlvbih0aGlzLCBzdGFydFRpbWUsIGZuLCBvcHRpb25zKTtcbiAgICB9XG59XG5leHBvcnRzLkNsaWVudFNlc3Npb24gPSBDbGllbnRTZXNzaW9uO1xuX2EgPSBrU25hcHNob3RFbmFibGVkO1xuY29uc3QgTUFYX1dJVEhfVFJBTlNBQ1RJT05fVElNRU9VVCA9IDEyMDAwMDtcbmNvbnN0IE5PTl9ERVRFUk1JTklTVElDX1dSSVRFX0NPTkNFUk5fRVJST1JTID0gbmV3IFNldChbXG4gICAgJ0Nhbm5vdFNhdGlzZnlXcml0ZUNvbmNlcm4nLFxuICAgICdVbmtub3duUmVwbFdyaXRlQ29uY2VybicsXG4gICAgJ1Vuc2F0aXNmaWFibGVXcml0ZUNvbmNlcm4nXG5dKTtcbmZ1bmN0aW9uIGhhc05vdFRpbWVkT3V0KHN0YXJ0VGltZSwgbWF4KSB7XG4gICAgcmV0dXJuICgwLCB1dGlsc18xLmNhbGN1bGF0ZUR1cmF0aW9uSW5Ncykoc3RhcnRUaW1lKSA8IG1heDtcbn1cbmZ1bmN0aW9uIGlzVW5rbm93blRyYW5zYWN0aW9uQ29tbWl0UmVzdWx0KGVycikge1xuICAgIGNvbnN0IGlzTm9uRGV0ZXJtaW5pc3RpY1dyaXRlQ29uY2VybkVycm9yID0gZXJyIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yICYmXG4gICAgICAgIGVyci5jb2RlTmFtZSAmJlxuICAgICAgICBOT05fREVURVJNSU5JU1RJQ19XUklURV9DT05DRVJOX0VSUk9SUy5oYXMoZXJyLmNvZGVOYW1lKTtcbiAgICByZXR1cm4gKGlzTWF4VGltZU1TRXhwaXJlZEVycm9yKGVycikgfHxcbiAgICAgICAgKCFpc05vbkRldGVybWluaXN0aWNXcml0ZUNvbmNlcm5FcnJvciAmJlxuICAgICAgICAgICAgZXJyLmNvZGUgIT09IGVycm9yXzEuTU9OR09EQl9FUlJPUl9DT0RFUy5VbnNhdGlzZmlhYmxlV3JpdGVDb25jZXJuICYmXG4gICAgICAgICAgICBlcnIuY29kZSAhPT0gZXJyb3JfMS5NT05HT0RCX0VSUk9SX0NPREVTLlVua25vd25SZXBsV3JpdGVDb25jZXJuKSk7XG59XG5mdW5jdGlvbiBtYXliZUNsZWFyUGlubmVkQ29ubmVjdGlvbihzZXNzaW9uLCBvcHRpb25zKSB7XG4gICAgLy8gdW5waW4gYSBjb25uZWN0aW9uIGlmIGl0IGhhcyBiZWVuIHBpbm5lZFxuICAgIGNvbnN0IGNvbm4gPSBzZXNzaW9uW2tQaW5uZWRDb25uZWN0aW9uXTtcbiAgICBjb25zdCBlcnJvciA9IG9wdGlvbnM/LmVycm9yO1xuICAgIGlmIChzZXNzaW9uLmluVHJhbnNhY3Rpb24oKSAmJlxuICAgICAgICBlcnJvciAmJlxuICAgICAgICBlcnJvciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29FcnJvciAmJlxuICAgICAgICBlcnJvci5oYXNFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlRyYW5zaWVudFRyYW5zYWN0aW9uRXJyb3IpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdG9wb2xvZ3kgPSBzZXNzaW9uLmNsaWVudC50b3BvbG9neTtcbiAgICAvLyBOT1RFOiB0aGUgc3BlYyB0YWxrcyBhYm91dCB3aGF0IHRvIGRvIG9uIGEgbmV0d29yayBlcnJvciBvbmx5LCBidXQgdGhlIHRlc3RzIHNlZW0gdG9cbiAgICAvLyAgICAgICB0byB2YWxpZGF0ZSB0aGF0IHdlIGRvbid0IHVucGluIG9uIF9hbGxfIGVycm9ycz9cbiAgICBpZiAoY29ubiAmJiB0b3BvbG9neSAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlcnMgPSBBcnJheS5mcm9tKHRvcG9sb2d5LnMuc2VydmVycy52YWx1ZXMoKSk7XG4gICAgICAgIGNvbnN0IGxvYWRCYWxhbmNlciA9IHNlcnZlcnNbMF07XG4gICAgICAgIGlmIChvcHRpb25zPy5lcnJvciA9PSBudWxsIHx8IG9wdGlvbnM/LmZvcmNlKSB7XG4gICAgICAgICAgICBsb2FkQmFsYW5jZXIucG9vbC5jaGVja0luKGNvbm4pO1xuICAgICAgICAgICAgY29ubi5lbWl0KGNvbnN0YW50c18xLlVOUElOTkVELCBzZXNzaW9uLnRyYW5zYWN0aW9uLnN0YXRlICE9PSB0cmFuc2FjdGlvbnNfMS5UeG5TdGF0ZS5OT19UUkFOU0FDVElPTlxuICAgICAgICAgICAgICAgID8gbWV0cmljc18xLkNvbm5lY3Rpb25Qb29sTWV0cmljcy5UWE5cbiAgICAgICAgICAgICAgICA6IG1ldHJpY3NfMS5Db25uZWN0aW9uUG9vbE1ldHJpY3MuQ1VSU09SKTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zPy5mb3JjZUNsZWFyKSB7XG4gICAgICAgICAgICAgICAgbG9hZEJhbGFuY2VyLnBvb2wuY2xlYXIoeyBzZXJ2aWNlSWQ6IGNvbm4uc2VydmljZUlkIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNlc3Npb25ba1Bpbm5lZENvbm5lY3Rpb25dID0gdW5kZWZpbmVkO1xuICAgIH1cbn1cbmV4cG9ydHMubWF5YmVDbGVhclBpbm5lZENvbm5lY3Rpb24gPSBtYXliZUNsZWFyUGlubmVkQ29ubmVjdGlvbjtcbmZ1bmN0aW9uIGlzTWF4VGltZU1TRXhwaXJlZEVycm9yKGVycikge1xuICAgIGlmIChlcnIgPT0gbnVsbCB8fCAhKGVyciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29TZXJ2ZXJFcnJvcikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gKGVyci5jb2RlID09PSBlcnJvcl8xLk1PTkdPREJfRVJST1JfQ09ERVMuTWF4VGltZU1TRXhwaXJlZCB8fFxuICAgICAgICAoZXJyLndyaXRlQ29uY2VybkVycm9yICYmIGVyci53cml0ZUNvbmNlcm5FcnJvci5jb2RlID09PSBlcnJvcl8xLk1PTkdPREJfRVJST1JfQ09ERVMuTWF4VGltZU1TRXhwaXJlZCkpO1xufVxuZnVuY3Rpb24gYXR0ZW1wdFRyYW5zYWN0aW9uQ29tbWl0KHNlc3Npb24sIHN0YXJ0VGltZSwgZm4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gc2Vzc2lvbi5jb21taXRUcmFuc2FjdGlvbigpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29FcnJvciAmJlxuICAgICAgICAgICAgaGFzTm90VGltZWRPdXQoc3RhcnRUaW1lLCBNQVhfV0lUSF9UUkFOU0FDVElPTl9USU1FT1VUKSAmJlxuICAgICAgICAgICAgIWlzTWF4VGltZU1TRXhwaXJlZEVycm9yKGVycikpIHtcbiAgICAgICAgICAgIGlmIChlcnIuaGFzRXJyb3JMYWJlbChlcnJvcl8xLk1vbmdvRXJyb3JMYWJlbC5Vbmtub3duVHJhbnNhY3Rpb25Db21taXRSZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0dGVtcHRUcmFuc2FjdGlvbkNvbW1pdChzZXNzaW9uLCBzdGFydFRpbWUsIGZuLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlcnIuaGFzRXJyb3JMYWJlbChlcnJvcl8xLk1vbmdvRXJyb3JMYWJlbC5UcmFuc2llbnRUcmFuc2FjdGlvbkVycm9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhdHRlbXB0VHJhbnNhY3Rpb24oc2Vzc2lvbiwgc3RhcnRUaW1lLCBmbiwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH0pO1xufVxuY29uc3QgVVNFUl9FWFBMSUNJVF9UWE5fRU5EX1NUQVRFUyA9IG5ldyBTZXQoW1xuICAgIHRyYW5zYWN0aW9uc18xLlR4blN0YXRlLk5PX1RSQU5TQUNUSU9OLFxuICAgIHRyYW5zYWN0aW9uc18xLlR4blN0YXRlLlRSQU5TQUNUSU9OX0NPTU1JVFRFRCxcbiAgICB0cmFuc2FjdGlvbnNfMS5UeG5TdGF0ZS5UUkFOU0FDVElPTl9BQk9SVEVEXG5dKTtcbmZ1bmN0aW9uIHVzZXJFeHBsaWNpdGx5RW5kZWRUcmFuc2FjdGlvbihzZXNzaW9uKSB7XG4gICAgcmV0dXJuIFVTRVJfRVhQTElDSVRfVFhOX0VORF9TVEFURVMuaGFzKHNlc3Npb24udHJhbnNhY3Rpb24uc3RhdGUpO1xufVxuZnVuY3Rpb24gYXR0ZW1wdFRyYW5zYWN0aW9uKHNlc3Npb24sIHN0YXJ0VGltZSwgZm4sIG9wdGlvbnMpIHtcbiAgICBzZXNzaW9uLnN0YXJ0VHJhbnNhY3Rpb24ob3B0aW9ucyk7XG4gICAgbGV0IHByb21pc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgcHJvbWlzZSA9IGZuKHNlc3Npb24pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHByb21pc2UgPSBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgIH1cbiAgICBpZiAoISgwLCB1dGlsc18xLmlzUHJvbWlzZUxpa2UpKHByb21pc2UpKSB7XG4gICAgICAgIHNlc3Npb24uYWJvcnRUcmFuc2FjdGlvbigpLmNhdGNoKCgpID0+IG51bGwpO1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdGdW5jdGlvbiBwcm92aWRlZCB0byBgd2l0aFRyYW5zYWN0aW9uYCBtdXN0IHJldHVybiBhIFByb21pc2UnKTtcbiAgICB9XG4gICAgcmV0dXJuIHByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgIGlmICh1c2VyRXhwbGljaXRseUVuZGVkVHJhbnNhY3Rpb24oc2Vzc2lvbikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXR0ZW1wdFRyYW5zYWN0aW9uQ29tbWl0KHNlc3Npb24sIHN0YXJ0VGltZSwgZm4sIG9wdGlvbnMpO1xuICAgIH0sIGVyciA9PiB7XG4gICAgICAgIGZ1bmN0aW9uIG1heWJlUmV0cnlPclRocm93KGVycikge1xuICAgICAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29FcnJvciAmJlxuICAgICAgICAgICAgICAgIGVyci5oYXNFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlRyYW5zaWVudFRyYW5zYWN0aW9uRXJyb3IpICYmXG4gICAgICAgICAgICAgICAgaGFzTm90VGltZWRPdXQoc3RhcnRUaW1lLCBNQVhfV0lUSF9UUkFOU0FDVElPTl9USU1FT1VUKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhdHRlbXB0VHJhbnNhY3Rpb24oc2Vzc2lvbiwgc3RhcnRUaW1lLCBmbiwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNNYXhUaW1lTVNFeHBpcmVkRXJyb3IoZXJyKSkge1xuICAgICAgICAgICAgICAgIGVyci5hZGRFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlVua25vd25UcmFuc2FjdGlvbkNvbW1pdFJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlc3Npb24uaW5UcmFuc2FjdGlvbigpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Vzc2lvbi5hYm9ydFRyYW5zYWN0aW9uKCkudGhlbigoKSA9PiBtYXliZVJldHJ5T3JUaHJvdyhlcnIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF5YmVSZXRyeU9yVGhyb3coZXJyKTtcbiAgICB9KTtcbn1cbmNvbnN0IGVuZFRyYW5zYWN0aW9uQXN5bmMgPSAoMCwgdXRpbF8xLnByb21pc2lmeSkoZW5kVHJhbnNhY3Rpb24pO1xuZnVuY3Rpb24gZW5kVHJhbnNhY3Rpb24oc2Vzc2lvbiwgY29tbWFuZE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgLy8gaGFuZGxlIGFueSBpbml0aWFsIHByb2JsZW1hdGljIGNhc2VzXG4gICAgY29uc3QgdHhuU3RhdGUgPSBzZXNzaW9uLnRyYW5zYWN0aW9uLnN0YXRlO1xuICAgIGlmICh0eG5TdGF0ZSA9PT0gdHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuTk9fVFJBTlNBQ1RJT04pIHtcbiAgICAgICAgY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29UcmFuc2FjdGlvbkVycm9yKCdObyB0cmFuc2FjdGlvbiBzdGFydGVkJykpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjb21tYW5kTmFtZSA9PT0gJ2NvbW1pdFRyYW5zYWN0aW9uJykge1xuICAgICAgICBpZiAodHhuU3RhdGUgPT09IHRyYW5zYWN0aW9uc18xLlR4blN0YXRlLlNUQVJUSU5HX1RSQU5TQUNUSU9OIHx8XG4gICAgICAgICAgICB0eG5TdGF0ZSA9PT0gdHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQ09NTUlUVEVEX0VNUFRZKSB7XG4gICAgICAgICAgICAvLyB0aGUgdHJhbnNhY3Rpb24gd2FzIG5ldmVyIHN0YXJ0ZWQsIHdlIGNhbiBzYWZlbHkgZXhpdCBoZXJlXG4gICAgICAgICAgICBzZXNzaW9uLnRyYW5zYWN0aW9uLnRyYW5zaXRpb24odHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQ09NTUlUVEVEX0VNUFRZKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR4blN0YXRlID09PSB0cmFuc2FjdGlvbnNfMS5UeG5TdGF0ZS5UUkFOU0FDVElPTl9BQk9SVEVEKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1RyYW5zYWN0aW9uRXJyb3IoJ0Nhbm5vdCBjYWxsIGNvbW1pdFRyYW5zYWN0aW9uIGFmdGVyIGNhbGxpbmcgYWJvcnRUcmFuc2FjdGlvbicpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKHR4blN0YXRlID09PSB0cmFuc2FjdGlvbnNfMS5UeG5TdGF0ZS5TVEFSVElOR19UUkFOU0FDVElPTikge1xuICAgICAgICAgICAgLy8gdGhlIHRyYW5zYWN0aW9uIHdhcyBuZXZlciBzdGFydGVkLCB3ZSBjYW4gc2FmZWx5IGV4aXQgaGVyZVxuICAgICAgICAgICAgc2Vzc2lvbi50cmFuc2FjdGlvbi50cmFuc2l0aW9uKHRyYW5zYWN0aW9uc18xLlR4blN0YXRlLlRSQU5TQUNUSU9OX0FCT1JURUQpO1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHhuU3RhdGUgPT09IHRyYW5zYWN0aW9uc18xLlR4blN0YXRlLlRSQU5TQUNUSU9OX0FCT1JURUQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvVHJhbnNhY3Rpb25FcnJvcignQ2Fubm90IGNhbGwgYWJvcnRUcmFuc2FjdGlvbiB0d2ljZScpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHhuU3RhdGUgPT09IHRyYW5zYWN0aW9uc18xLlR4blN0YXRlLlRSQU5TQUNUSU9OX0NPTU1JVFRFRCB8fFxuICAgICAgICAgICAgdHhuU3RhdGUgPT09IHRyYW5zYWN0aW9uc18xLlR4blN0YXRlLlRSQU5TQUNUSU9OX0NPTU1JVFRFRF9FTVBUWSkge1xuICAgICAgICAgICAgY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29UcmFuc2FjdGlvbkVycm9yKCdDYW5ub3QgY2FsbCBhYm9ydFRyYW5zYWN0aW9uIGFmdGVyIGNhbGxpbmcgY29tbWl0VHJhbnNhY3Rpb24nKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gY29uc3RydWN0IGFuZCBzZW5kIHRoZSBjb21tYW5kXG4gICAgY29uc3QgY29tbWFuZCA9IHsgW2NvbW1hbmROYW1lXTogMSB9O1xuICAgIC8vIGFwcGx5IGEgd3JpdGVDb25jZXJuIGlmIHNwZWNpZmllZFxuICAgIGxldCB3cml0ZUNvbmNlcm47XG4gICAgaWYgKHNlc3Npb24udHJhbnNhY3Rpb24ub3B0aW9ucy53cml0ZUNvbmNlcm4pIHtcbiAgICAgICAgd3JpdGVDb25jZXJuID0gT2JqZWN0LmFzc2lnbih7fSwgc2Vzc2lvbi50cmFuc2FjdGlvbi5vcHRpb25zLndyaXRlQ29uY2Vybik7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNlc3Npb24uY2xpZW50T3B0aW9ucyAmJiBzZXNzaW9uLmNsaWVudE9wdGlvbnMud3JpdGVDb25jZXJuKSB7XG4gICAgICAgIHdyaXRlQ29uY2VybiA9IHsgdzogc2Vzc2lvbi5jbGllbnRPcHRpb25zLndyaXRlQ29uY2Vybi53IH07XG4gICAgfVxuICAgIGlmICh0eG5TdGF0ZSA9PT0gdHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQ09NTUlUVEVEKSB7XG4gICAgICAgIHdyaXRlQ29uY2VybiA9IE9iamVjdC5hc3NpZ24oeyB3dGltZW91dE1TOiAxMDAwMCB9LCB3cml0ZUNvbmNlcm4sIHsgdzogJ21ham9yaXR5JyB9KTtcbiAgICB9XG4gICAgaWYgKHdyaXRlQ29uY2Vybikge1xuICAgICAgICB3cml0ZV9jb25jZXJuXzEuV3JpdGVDb25jZXJuLmFwcGx5KGNvbW1hbmQsIHdyaXRlQ29uY2Vybik7XG4gICAgfVxuICAgIGlmIChjb21tYW5kTmFtZSA9PT0gJ2NvbW1pdFRyYW5zYWN0aW9uJyAmJiBzZXNzaW9uLnRyYW5zYWN0aW9uLm9wdGlvbnMubWF4VGltZU1TKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oY29tbWFuZCwgeyBtYXhUaW1lTVM6IHNlc3Npb24udHJhbnNhY3Rpb24ub3B0aW9ucy5tYXhUaW1lTVMgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbW1hbmRIYW5kbGVyKGVycm9yLCByZXN1bHQpIHtcbiAgICAgICAgaWYgKGNvbW1hbmROYW1lICE9PSAnY29tbWl0VHJhbnNhY3Rpb24nKSB7XG4gICAgICAgICAgICBzZXNzaW9uLnRyYW5zYWN0aW9uLnRyYW5zaXRpb24odHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQUJPUlRFRCk7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgICAgICAgICBtYXliZUNsZWFyUGlubmVkQ29ubmVjdGlvbihzZXNzaW9uLCB7IGZvcmNlOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoZSBzcGVjIGluZGljYXRlcyB0aGF0IHdlIHNob3VsZCBpZ25vcmUgYWxsIGVycm9ycyBvbiBgYWJvcnRUcmFuc2FjdGlvbmBcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICAgIHNlc3Npb24udHJhbnNhY3Rpb24udHJhbnNpdGlvbih0cmFuc2FjdGlvbnNfMS5UeG5TdGF0ZS5UUkFOU0FDVElPTl9DT01NSVRURUQpO1xuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvci5oYXNFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlJldHJ5YWJsZVdyaXRlRXJyb3IpIHx8XG4gICAgICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvV3JpdGVDb25jZXJuRXJyb3IgfHxcbiAgICAgICAgICAgICAgICBpc01heFRpbWVNU0V4cGlyZWRFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNVbmtub3duVHJhbnNhY3Rpb25Db21taXRSZXN1bHQoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZEVycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuVW5rbm93blRyYW5zYWN0aW9uQ29tbWl0UmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcGVyIHR4bnMgc3BlYywgbXVzdCB1bnBpbiBzZXNzaW9uIGluIHRoaXMgY2FzZVxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLnVucGluKHsgZXJyb3IgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXJyb3IuaGFzRXJyb3JMYWJlbChlcnJvcl8xLk1vbmdvRXJyb3JMYWJlbC5UcmFuc2llbnRUcmFuc2FjdGlvbkVycm9yKSkge1xuICAgICAgICAgICAgICAgIHNlc3Npb24udW5waW4oeyBlcnJvciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjayhlcnJvciwgcmVzdWx0KTtcbiAgICB9XG4gICAgaWYgKHNlc3Npb24udHJhbnNhY3Rpb24ucmVjb3ZlcnlUb2tlbikge1xuICAgICAgICBjb21tYW5kLnJlY292ZXJ5VG9rZW4gPSBzZXNzaW9uLnRyYW5zYWN0aW9uLnJlY292ZXJ5VG9rZW47XG4gICAgfVxuICAgIC8vIHNlbmQgdGhlIGNvbW1hbmRcbiAgICAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKShzZXNzaW9uLmNsaWVudCwgbmV3IHJ1bl9jb21tYW5kXzEuUnVuQWRtaW5Db21tYW5kT3BlcmF0aW9uKHVuZGVmaW5lZCwgY29tbWFuZCwge1xuICAgICAgICBzZXNzaW9uLFxuICAgICAgICByZWFkUHJlZmVyZW5jZTogcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UucHJpbWFyeSxcbiAgICAgICAgYnlwYXNzUGlubmluZ0NoZWNrOiB0cnVlXG4gICAgfSksIChlcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgICAgIGlmIChjb21tYW5kLmFib3J0VHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIGFsd2F5cyB1bnBpbiBvbiBhYm9ydCByZWdhcmRsZXNzIG9mIGNvbW1hbmQgb3V0Y29tZVxuICAgICAgICAgICAgc2Vzc2lvbi51bnBpbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29FcnJvciAmJiBlcnJvci5oYXNFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlJldHJ5YWJsZVdyaXRlRXJyb3IpKSB7XG4gICAgICAgICAgICAvLyBTUEVDLTExODU6IGFwcGx5IG1ham9yaXR5IHdyaXRlIGNvbmNlcm4gd2hlbiByZXRyeWluZyBjb21taXRUcmFuc2FjdGlvblxuICAgICAgICAgICAgaWYgKGNvbW1hbmQuY29tbWl0VHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBwZXIgdHhucyBzcGVjLCBtdXN0IHVucGluIHNlc3Npb24gaW4gdGhpcyBjYXNlXG4gICAgICAgICAgICAgICAgc2Vzc2lvbi51bnBpbih7IGZvcmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIGNvbW1hbmQud3JpdGVDb25jZXJuID0gT2JqZWN0LmFzc2lnbih7IHd0aW1lb3V0OiAxMDAwMCB9LCBjb21tYW5kLndyaXRlQ29uY2Vybiwge1xuICAgICAgICAgICAgICAgICAgICB3OiAnbWFqb3JpdHknXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikoc2Vzc2lvbi5jbGllbnQsIG5ldyBydW5fY29tbWFuZF8xLlJ1bkFkbWluQ29tbWFuZE9wZXJhdGlvbih1bmRlZmluZWQsIGNvbW1hbmQsIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uLFxuICAgICAgICAgICAgICAgIHJlYWRQcmVmZXJlbmNlOiByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5wcmltYXJ5LFxuICAgICAgICAgICAgICAgIGJ5cGFzc1Bpbm5pbmdDaGVjazogdHJ1ZVxuICAgICAgICAgICAgfSksIGNvbW1hbmRIYW5kbGVyKTtcbiAgICAgICAgfVxuICAgICAgICBjb21tYW5kSGFuZGxlcihlcnJvciwgcmVzdWx0KTtcbiAgICB9KTtcbn1cbi8qKlxuICogUmVmbGVjdHMgdGhlIGV4aXN0ZW5jZSBvZiBhIHNlc3Npb24gb24gdGhlIHNlcnZlci4gQ2FuIGJlIHJldXNlZCBieSB0aGUgc2Vzc2lvbiBwb29sLlxuICogV0FSTklORzogbm90IG1lYW50IHRvIGJlIGluc3RhbnRpYXRlZCBkaXJlY3RseS4gRm9yIGludGVybmFsIHVzZSBvbmx5LlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBTZXJ2ZXJTZXNzaW9uIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaWQgPSB7IGlkOiBuZXcgYnNvbl8xLkJpbmFyeSgoMCwgdXRpbHNfMS51dWlkVjQpKCksIGJzb25fMS5CaW5hcnkuU1VCVFlQRV9VVUlEKSB9O1xuICAgICAgICB0aGlzLmxhc3RVc2UgPSAoMCwgdXRpbHNfMS5ub3cpKCk7XG4gICAgICAgIHRoaXMudHhuTnVtYmVyID0gMDtcbiAgICAgICAgdGhpcy5pc0RpcnR5ID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgdGhlIHNlcnZlciBzZXNzaW9uIGhhcyB0aW1lZCBvdXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2Vzc2lvblRpbWVvdXRNaW51dGVzIC0gVGhlIHNlcnZlcidzIFwibG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlc1wiXG4gICAgICovXG4gICAgaGFzVGltZWRPdXQoc2Vzc2lvblRpbWVvdXRNaW51dGVzKSB7XG4gICAgICAgIC8vIFRha2UgdGhlIGRpZmZlcmVuY2Ugb2YgdGhlIGxhc3RVc2UgdGltZXN0YW1wIGFuZCBub3csIHdoaWNoIHdpbGwgcmVzdWx0IGluIGEgdmFsdWUgaW5cbiAgICAgICAgLy8gbWlsbGlzZWNvbmRzLCBhbmQgdGhlbiBjb252ZXJ0IG1pbGxpc2Vjb25kcyB0byBtaW51dGVzIHRvIGNvbXBhcmUgdG8gYHNlc3Npb25UaW1lb3V0TWludXRlc2BcbiAgICAgICAgY29uc3QgaWRsZVRpbWVNaW51dGVzID0gTWF0aC5yb3VuZCgoKCgwLCB1dGlsc18xLmNhbGN1bGF0ZUR1cmF0aW9uSW5NcykodGhpcy5sYXN0VXNlKSAlIDg2NDAwMDAwKSAlIDM2MDAwMDApIC8gNjAwMDApO1xuICAgICAgICByZXR1cm4gaWRsZVRpbWVNaW51dGVzID4gc2Vzc2lvblRpbWVvdXRNaW51dGVzIC0gMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQ2xvbmluZyBtZWFudCB0byBrZWVwIGEgcmVhZGFibGUgcmVmZXJlbmNlIHRvIHRoZSBzZXJ2ZXIgc2Vzc2lvbiBkYXRhXG4gICAgICogYWZ0ZXIgQ2xpZW50U2Vzc2lvbiBoYXMgZW5kZWRcbiAgICAgKi9cbiAgICBzdGF0aWMgY2xvbmUoc2VydmVyU2Vzc2lvbikge1xuICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcigxNik7XG4gICAgICAgIGNvbnN0IGlkQnl0ZXMgPSBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlcik7XG4gICAgICAgIGlkQnl0ZXMuc2V0KHNlcnZlclNlc3Npb24uaWQuaWQuYnVmZmVyKTtcbiAgICAgICAgY29uc3QgaWQgPSBuZXcgYnNvbl8xLkJpbmFyeShpZEJ5dGVzLCBzZXJ2ZXJTZXNzaW9uLmlkLmlkLnN1Yl90eXBlKTtcbiAgICAgICAgLy8gTWFudWFsIHByb3RvdHlwZSBjb25zdHJ1Y3Rpb24gdG8gYXZvaWQgbW9kaWZ5aW5nIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGlzIGNsYXNzXG4gICAgICAgIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2Yoe1xuICAgICAgICAgICAgaWQ6IHsgaWQgfSxcbiAgICAgICAgICAgIGxhc3RVc2U6IHNlcnZlclNlc3Npb24ubGFzdFVzZSxcbiAgICAgICAgICAgIHR4bk51bWJlcjogc2VydmVyU2Vzc2lvbi50eG5OdW1iZXIsXG4gICAgICAgICAgICBpc0RpcnR5OiBzZXJ2ZXJTZXNzaW9uLmlzRGlydHlcbiAgICAgICAgfSwgU2VydmVyU2Vzc2lvbi5wcm90b3R5cGUpO1xuICAgIH1cbn1cbmV4cG9ydHMuU2VydmVyU2Vzc2lvbiA9IFNlcnZlclNlc3Npb247XG4vKipcbiAqIE1haW50YWlucyBhIHBvb2wgb2YgU2VydmVyIFNlc3Npb25zLlxuICogRm9yIGludGVybmFsIHVzZSBvbmx5XG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgU2VydmVyU2Vzc2lvblBvb2wge1xuICAgIGNvbnN0cnVjdG9yKGNsaWVudCkge1xuICAgICAgICBpZiAoY2xpZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdTZXJ2ZXJTZXNzaW9uUG9vbCByZXF1aXJlcyBhIE1vbmdvQ2xpZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XG4gICAgICAgIHRoaXMuc2Vzc2lvbnMgPSBuZXcgdXRpbHNfMS5MaXN0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjcXVpcmUgYSBTZXJ2ZXIgU2Vzc2lvbiBmcm9tIHRoZSBwb29sLlxuICAgICAqIEl0ZXJhdGVzIHRocm91Z2ggZWFjaCBzZXNzaW9uIGluIHRoZSBwb29sLCByZW1vdmluZyBhbnkgc3RhbGUgc2Vzc2lvbnNcbiAgICAgKiBhbG9uZyB0aGUgd2F5LiBUaGUgZmlyc3Qgbm9uLXN0YWxlIHNlc3Npb24gZm91bmQgaXMgcmVtb3ZlZCBmcm9tIHRoZVxuICAgICAqIHBvb2wgYW5kIHJldHVybmVkLiBJZiBubyBub24tc3RhbGUgc2Vzc2lvbiBpcyBmb3VuZCwgYSBuZXcgU2VydmVyU2Vzc2lvbiBpcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIGFjcXVpcmUoKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25UaW1lb3V0TWludXRlcyA9IHRoaXMuY2xpZW50LnRvcG9sb2d5Py5sb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzID8/IDEwO1xuICAgICAgICBsZXQgc2Vzc2lvbiA9IG51bGw7XG4gICAgICAgIC8vIFRyeSB0byBvYnRhaW4gZnJvbSBzZXNzaW9uIHBvb2xcbiAgICAgICAgd2hpbGUgKHRoaXMuc2Vzc2lvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcG90ZW50aWFsU2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbnMuc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChwb3RlbnRpYWxTZXNzaW9uICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAoISF0aGlzLmNsaWVudC50b3BvbG9neT8ubG9hZEJhbGFuY2VkIHx8XG4gICAgICAgICAgICAgICAgICAgICFwb3RlbnRpYWxTZXNzaW9uLmhhc1RpbWVkT3V0KHNlc3Npb25UaW1lb3V0TWludXRlcykpKSB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbiA9IHBvdGVudGlhbFNlc3Npb247XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgbm90aGluZyB2YWxpZCBjYW1lIGZyb20gdGhlIHBvb2wgbWFrZSBhIG5ldyBvbmVcbiAgICAgICAgaWYgKHNlc3Npb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgc2Vzc2lvbiA9IG5ldyBTZXJ2ZXJTZXNzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbGVhc2UgYSBzZXNzaW9uIHRvIHRoZSBzZXNzaW9uIHBvb2xcbiAgICAgKiBBZGRzIHRoZSBzZXNzaW9uIGJhY2sgdG8gdGhlIHNlc3Npb24gcG9vbCBpZiB0aGUgc2Vzc2lvbiBoYXMgbm90IHRpbWVkIG91dCB5ZXQuXG4gICAgICogVGhpcyBtZXRob2QgYWxzbyByZW1vdmVzIGFueSBzdGFsZSBzZXNzaW9ucyBmcm9tIHRoZSBwb29sLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNlc3Npb24gLSBUaGUgc2Vzc2lvbiB0byByZWxlYXNlIHRvIHRoZSBwb29sXG4gICAgICovXG4gICAgcmVsZWFzZShzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25UaW1lb3V0TWludXRlcyA9IHRoaXMuY2xpZW50LnRvcG9sb2d5Py5sb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzID8/IDEwO1xuICAgICAgICBpZiAodGhpcy5jbGllbnQudG9wb2xvZ3k/LmxvYWRCYWxhbmNlZCAmJiAhc2Vzc2lvblRpbWVvdXRNaW51dGVzKSB7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb25zLnVuc2hpZnQoc2Vzc2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZXNzaW9uVGltZW91dE1pbnV0ZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlc3Npb25zLnBydW5lKHNlc3Npb24gPT4gc2Vzc2lvbi5oYXNUaW1lZE91dChzZXNzaW9uVGltZW91dE1pbnV0ZXMpKTtcbiAgICAgICAgaWYgKCFzZXNzaW9uLmhhc1RpbWVkT3V0KHNlc3Npb25UaW1lb3V0TWludXRlcykpIHtcbiAgICAgICAgICAgIGlmIChzZXNzaW9uLmlzRGlydHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UsIHJlYWRkIHRoaXMgc2Vzc2lvbiB0byB0aGUgc2Vzc2lvbiBwb29sXG4gICAgICAgICAgICB0aGlzLnNlc3Npb25zLnVuc2hpZnQoc2Vzc2lvbik7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLlNlcnZlclNlc3Npb25Qb29sID0gU2VydmVyU2Vzc2lvblBvb2w7XG4vKipcbiAqIE9wdGlvbmFsbHkgZGVjb3JhdGUgYSBjb21tYW5kIHdpdGggc2Vzc2lvbnMgc3BlY2lmaWMga2V5c1xuICpcbiAqIEBwYXJhbSBzZXNzaW9uIC0gdGhlIHNlc3Npb24gdHJhY2tpbmcgdHJhbnNhY3Rpb24gc3RhdGVcbiAqIEBwYXJhbSBjb21tYW5kIC0gdGhlIGNvbW1hbmQgdG8gZGVjb3JhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgcGFzc2VkIHRvIGNhbGxpbmcgb3BlcmF0aW9uXG4gKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGFwcGx5U2Vzc2lvbihzZXNzaW9uLCBjb21tYW5kLCBvcHRpb25zKSB7XG4gICAgaWYgKHNlc3Npb24uaGFzRW5kZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBlcnJvcl8xLk1vbmdvRXhwaXJlZFNlc3Npb25FcnJvcigpO1xuICAgIH1cbiAgICAvLyBNYXkgYWNxdWlyZSBzZXJ2ZXJTZXNzaW9uIGhlcmVcbiAgICBjb25zdCBzZXJ2ZXJTZXNzaW9uID0gc2Vzc2lvbi5zZXJ2ZXJTZXNzaW9uO1xuICAgIGlmIChzZXJ2ZXJTZXNzaW9uID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdVbmFibGUgdG8gYWNxdWlyZSBzZXJ2ZXIgc2Vzc2lvbicpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy53cml0ZUNvbmNlcm4/LncgPT09IDApIHtcbiAgICAgICAgaWYgKHNlc3Npb24gJiYgc2Vzc2lvbi5leHBsaWNpdCkge1xuICAgICAgICAgICAgLy8gRXJyb3IgaWYgdXNlciBwcm92aWRlZCBhbiBleHBsaWNpdCBzZXNzaW9uIHRvIGFuIHVuYWNrbm93bGVkZ2VkIHdyaXRlIChTUEVDLTEwMTkpXG4gICAgICAgICAgICByZXR1cm4gbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignQ2Fubm90IGhhdmUgZXhwbGljaXQgc2Vzc2lvbiB3aXRoIHVuYWNrbm93bGVkZ2VkIHdyaXRlcycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gbWFyayB0aGUgbGFzdCB1c2Ugb2YgdGhpcyBzZXNzaW9uLCBhbmQgYXBwbHkgdGhlIGBsc2lkYFxuICAgIHNlcnZlclNlc3Npb24ubGFzdFVzZSA9ICgwLCB1dGlsc18xLm5vdykoKTtcbiAgICBjb21tYW5kLmxzaWQgPSBzZXJ2ZXJTZXNzaW9uLmlkO1xuICAgIGNvbnN0IGluVHhuT3JUeG5Db21tYW5kID0gc2Vzc2lvbi5pblRyYW5zYWN0aW9uKCkgfHwgKDAsIHRyYW5zYWN0aW9uc18xLmlzVHJhbnNhY3Rpb25Db21tYW5kKShjb21tYW5kKTtcbiAgICBjb25zdCBpc1JldHJ5YWJsZVdyaXRlID0gISFvcHRpb25zLndpbGxSZXRyeVdyaXRlO1xuICAgIGlmIChpc1JldHJ5YWJsZVdyaXRlIHx8IGluVHhuT3JUeG5Db21tYW5kKSB7XG4gICAgICAgIHNlcnZlclNlc3Npb24udHhuTnVtYmVyICs9IHNlc3Npb25ba1R4bk51bWJlckluY3JlbWVudF07XG4gICAgICAgIHNlc3Npb25ba1R4bk51bWJlckluY3JlbWVudF0gPSAwO1xuICAgICAgICAvLyBUT0RPKE5PREUtMjY3NCk6IFByZXNlcnZlIGludDY0IHNlbnQgZnJvbSBNb25nb0RCXG4gICAgICAgIGNvbW1hbmQudHhuTnVtYmVyID0gYnNvbl8xLkxvbmcuZnJvbU51bWJlcihzZXJ2ZXJTZXNzaW9uLnR4bk51bWJlcik7XG4gICAgfVxuICAgIGlmICghaW5UeG5PclR4bkNvbW1hbmQpIHtcbiAgICAgICAgaWYgKHNlc3Npb24udHJhbnNhY3Rpb24uc3RhdGUgIT09IHRyYW5zYWN0aW9uc18xLlR4blN0YXRlLk5PX1RSQU5TQUNUSU9OKSB7XG4gICAgICAgICAgICBzZXNzaW9uLnRyYW5zYWN0aW9uLnRyYW5zaXRpb24odHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuTk9fVFJBTlNBQ1RJT04pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZXNzaW9uLnN1cHBvcnRzLmNhdXNhbENvbnNpc3RlbmN5ICYmXG4gICAgICAgICAgICBzZXNzaW9uLm9wZXJhdGlvblRpbWUgJiZcbiAgICAgICAgICAgICgwLCB1dGlsc18xLmNvbW1hbmRTdXBwb3J0c1JlYWRDb25jZXJuKShjb21tYW5kLCBvcHRpb25zKSkge1xuICAgICAgICAgICAgY29tbWFuZC5yZWFkQ29uY2VybiA9IGNvbW1hbmQucmVhZENvbmNlcm4gfHwge307XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbW1hbmQucmVhZENvbmNlcm4sIHsgYWZ0ZXJDbHVzdGVyVGltZTogc2Vzc2lvbi5vcGVyYXRpb25UaW1lIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlc3Npb25ba1NuYXBzaG90RW5hYmxlZF0pIHtcbiAgICAgICAgICAgIGNvbW1hbmQucmVhZENvbmNlcm4gPSBjb21tYW5kLnJlYWRDb25jZXJuIHx8IHsgbGV2ZWw6IHJlYWRfY29uY2Vybl8xLlJlYWRDb25jZXJuTGV2ZWwuc25hcHNob3QgfTtcbiAgICAgICAgICAgIGlmIChzZXNzaW9uW2tTbmFwc2hvdFRpbWVdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbW1hbmQucmVhZENvbmNlcm4sIHsgYXRDbHVzdGVyVGltZTogc2Vzc2lvbltrU25hcHNob3RUaW1lXSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIG5vdyBhdHRlbXB0IHRvIGFwcGx5IHRyYW5zYWN0aW9uLXNwZWNpZmljIHNlc3Npb25zIGRhdGFcbiAgICAvLyBgYXV0b2NvbW1pdGAgbXVzdCBhbHdheXMgYmUgZmFsc2UgdG8gZGlmZmVyZW50aWF0ZSBmcm9tIHJldHJ5YWJsZSB3cml0ZXNcbiAgICBjb21tYW5kLmF1dG9jb21taXQgPSBmYWxzZTtcbiAgICBpZiAoc2Vzc2lvbi50cmFuc2FjdGlvbi5zdGF0ZSA9PT0gdHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuU1RBUlRJTkdfVFJBTlNBQ1RJT04pIHtcbiAgICAgICAgc2Vzc2lvbi50cmFuc2FjdGlvbi50cmFuc2l0aW9uKHRyYW5zYWN0aW9uc18xLlR4blN0YXRlLlRSQU5TQUNUSU9OX0lOX1BST0dSRVNTKTtcbiAgICAgICAgY29tbWFuZC5zdGFydFRyYW5zYWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgcmVhZENvbmNlcm4gPSBzZXNzaW9uLnRyYW5zYWN0aW9uLm9wdGlvbnMucmVhZENvbmNlcm4gfHwgc2Vzc2lvbj8uY2xpZW50T3B0aW9ucz8ucmVhZENvbmNlcm47XG4gICAgICAgIGlmIChyZWFkQ29uY2Vybikge1xuICAgICAgICAgICAgY29tbWFuZC5yZWFkQ29uY2VybiA9IHJlYWRDb25jZXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZXNzaW9uLnN1cHBvcnRzLmNhdXNhbENvbnNpc3RlbmN5ICYmIHNlc3Npb24ub3BlcmF0aW9uVGltZSkge1xuICAgICAgICAgICAgY29tbWFuZC5yZWFkQ29uY2VybiA9IGNvbW1hbmQucmVhZENvbmNlcm4gfHwge307XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbW1hbmQucmVhZENvbmNlcm4sIHsgYWZ0ZXJDbHVzdGVyVGltZTogc2Vzc2lvbi5vcGVyYXRpb25UaW1lIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybjtcbn1cbmV4cG9ydHMuYXBwbHlTZXNzaW9uID0gYXBwbHlTZXNzaW9uO1xuZnVuY3Rpb24gdXBkYXRlU2Vzc2lvbkZyb21SZXNwb25zZShzZXNzaW9uLCBkb2N1bWVudCkge1xuICAgIGlmIChkb2N1bWVudC4kY2x1c3RlclRpbWUpIHtcbiAgICAgICAgKDAsIGNvbW1vbl8xLl9hZHZhbmNlQ2x1c3RlclRpbWUpKHNlc3Npb24sIGRvY3VtZW50LiRjbHVzdGVyVGltZSk7XG4gICAgfVxuICAgIGlmIChkb2N1bWVudC5vcGVyYXRpb25UaW1lICYmIHNlc3Npb24gJiYgc2Vzc2lvbi5zdXBwb3J0cy5jYXVzYWxDb25zaXN0ZW5jeSkge1xuICAgICAgICBzZXNzaW9uLmFkdmFuY2VPcGVyYXRpb25UaW1lKGRvY3VtZW50Lm9wZXJhdGlvblRpbWUpO1xuICAgIH1cbiAgICBpZiAoZG9jdW1lbnQucmVjb3ZlcnlUb2tlbiAmJiBzZXNzaW9uICYmIHNlc3Npb24uaW5UcmFuc2FjdGlvbigpKSB7XG4gICAgICAgIHNlc3Npb24udHJhbnNhY3Rpb24uX3JlY292ZXJ5VG9rZW4gPSBkb2N1bWVudC5yZWNvdmVyeVRva2VuO1xuICAgIH1cbiAgICBpZiAoc2Vzc2lvbj8uW2tTbmFwc2hvdEVuYWJsZWRdICYmIHNlc3Npb25ba1NuYXBzaG90VGltZV0gPT0gbnVsbCkge1xuICAgICAgICAvLyBmaW5kIGFuZCBhZ2dyZWdhdGUgY29tbWFuZHMgcmV0dXJuIGF0Q2x1c3RlclRpbWUgb24gdGhlIGN1cnNvclxuICAgICAgICAvLyBkaXN0aW5jdCBpbmNsdWRlcyBpdCBpbiB0aGUgcmVzcG9uc2UgYm9keVxuICAgICAgICBjb25zdCBhdENsdXN0ZXJUaW1lID0gZG9jdW1lbnQuY3Vyc29yPy5hdENsdXN0ZXJUaW1lIHx8IGRvY3VtZW50LmF0Q2x1c3RlclRpbWU7XG4gICAgICAgIGlmIChhdENsdXN0ZXJUaW1lKSB7XG4gICAgICAgICAgICBzZXNzaW9uW2tTbmFwc2hvdFRpbWVdID0gYXRDbHVzdGVyVGltZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMudXBkYXRlU2Vzc2lvbkZyb21SZXNwb25zZSA9IHVwZGF0ZVNlc3Npb25Gcm9tUmVzcG9uc2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXNzaW9ucy5qcy5tYXAiXSwibmFtZXMiOlsiX2EiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInVwZGF0ZVNlc3Npb25Gcm9tUmVzcG9uc2UiLCJhcHBseVNlc3Npb24iLCJTZXJ2ZXJTZXNzaW9uUG9vbCIsIlNlcnZlclNlc3Npb24iLCJtYXliZUNsZWFyUGlubmVkQ29ubmVjdGlvbiIsIkNsaWVudFNlc3Npb24iLCJ1dGlsXzEiLCJyZXF1aXJlIiwiYnNvbl8xIiwibWV0cmljc18xIiwic2hhcmVkXzEiLCJjb25zdGFudHNfMSIsImVycm9yXzEiLCJtb25nb190eXBlc18xIiwiZXhlY3V0ZV9vcGVyYXRpb25fMSIsInJ1bl9jb21tYW5kXzEiLCJyZWFkX2NvbmNlcm5fMSIsInJlYWRfcHJlZmVyZW5jZV8xIiwiY29tbW9uXzEiLCJ0cmFuc2FjdGlvbnNfMSIsInV0aWxzXzEiLCJ3cml0ZV9jb25jZXJuXzEiLCJtaW5XaXJlVmVyc2lvbkZvclNoYXJkZWRUcmFuc2FjdGlvbnMiLCJrU2VydmVyU2Vzc2lvbiIsIlN5bWJvbCIsImtTbmFwc2hvdFRpbWUiLCJrU25hcHNob3RFbmFibGVkIiwia1Bpbm5lZENvbm5lY3Rpb24iLCJrVHhuTnVtYmVySW5jcmVtZW50IiwiVHlwZWRFdmVudEVtaXR0ZXIiLCJjb25zdHJ1Y3RvciIsImNsaWVudCIsInNlc3Npb25Qb29sIiwib3B0aW9ucyIsImNsaWVudE9wdGlvbnMiLCJNb25nb1J1bnRpbWVFcnJvciIsInNuYXBzaG90IiwiY2F1c2FsQ29uc2lzdGVuY3kiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiaGFzRW5kZWQiLCJleHBsaWNpdCIsImFjcXVpcmUiLCJkZWZhdWx0Q2F1c2FsQ29uc2lzdGVuY3lWYWx1ZSIsInN1cHBvcnRzIiwiY2x1c3RlclRpbWUiLCJpbml0aWFsQ2x1c3RlclRpbWUiLCJvcGVyYXRpb25UaW1lIiwidW5kZWZpbmVkIiwib3duZXIiLCJkZWZhdWx0VHJhbnNhY3Rpb25PcHRpb25zIiwiYXNzaWduIiwidHJhbnNhY3Rpb24iLCJUcmFuc2FjdGlvbiIsImlkIiwic2VydmVyU2Vzc2lvbiIsInNuYXBzaG90RW5hYmxlZCIsImxvYWRCYWxhbmNlZCIsInRvcG9sb2d5IiwiZGVzY3JpcHRpb24iLCJ0eXBlIiwiVG9wb2xvZ3lUeXBlIiwiTG9hZEJhbGFuY2VkIiwicGlubmVkQ29ubmVjdGlvbiIsInBpbiIsImNvbm4iLCJUeXBlRXJyb3IiLCJlbWl0IiwiUElOTkVEIiwiaW5UcmFuc2FjdGlvbiIsIkNvbm5lY3Rpb25Qb29sTWV0cmljcyIsIlRYTiIsIkNVUlNPUiIsInVucGluIiwidW5waW5TZXJ2ZXIiLCJpc1Bpbm5lZCIsImVuZFNlc3Npb24iLCJhYm9ydFRyYW5zYWN0aW9uIiwicmVsZWFzZSIsImNsb25lIiwid3JpdGFibGUiLCJmb3JjZSIsImFkdmFuY2VPcGVyYXRpb25UaW1lIiwiZ3JlYXRlclRoYW4iLCJhZHZhbmNlQ2x1c3RlclRpbWUiLCJfYnNvbnR5cGUiLCJzaWduYXR1cmUiLCJoYXNoIiwia2V5SWQiLCJfYWR2YW5jZUNsdXN0ZXJUaW1lIiwiZXF1YWxzIiwic2Vzc2lvbiIsIkJ5dGVVdGlscyIsImJ1ZmZlciIsImluY3JlbWVudFRyYW5zYWN0aW9uTnVtYmVyIiwiaXNBY3RpdmUiLCJzdGFydFRyYW5zYWN0aW9uIiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCJNb25nb1RyYW5zYWN0aW9uRXJyb3IiLCJpc0NvbW1pdHRlZCIsInRvcG9sb2d5TWF4V2lyZVZlcnNpb24iLCJtYXhXaXJlVmVyc2lvbiIsImlzU2hhcmRlZCIsInJlYWRDb25jZXJuIiwid3JpdGVDb25jZXJuIiwicmVhZFByZWZlcmVuY2UiLCJtYXhDb21taXRUaW1lTVMiLCJ0cmFuc2l0aW9uIiwiVHhuU3RhdGUiLCJTVEFSVElOR19UUkFOU0FDVElPTiIsImNvbW1pdFRyYW5zYWN0aW9uIiwiZW5kVHJhbnNhY3Rpb25Bc3luYyIsInRvQlNPTiIsIndpdGhUcmFuc2FjdGlvbiIsImZuIiwic3RhcnRUaW1lIiwibm93IiwiYXR0ZW1wdFRyYW5zYWN0aW9uIiwiTUFYX1dJVEhfVFJBTlNBQ1RJT05fVElNRU9VVCIsIk5PTl9ERVRFUk1JTklTVElDX1dSSVRFX0NPTkNFUk5fRVJST1JTIiwiU2V0IiwiaGFzTm90VGltZWRPdXQiLCJtYXgiLCJjYWxjdWxhdGVEdXJhdGlvbkluTXMiLCJpc1Vua25vd25UcmFuc2FjdGlvbkNvbW1pdFJlc3VsdCIsImVyciIsImlzTm9uRGV0ZXJtaW5pc3RpY1dyaXRlQ29uY2VybkVycm9yIiwiTW9uZ29TZXJ2ZXJFcnJvciIsImNvZGVOYW1lIiwiaGFzIiwiaXNNYXhUaW1lTVNFeHBpcmVkRXJyb3IiLCJjb2RlIiwiTU9OR09EQl9FUlJPUl9DT0RFUyIsIlVuc2F0aXNmaWFibGVXcml0ZUNvbmNlcm4iLCJVbmtub3duUmVwbFdyaXRlQ29uY2VybiIsImVycm9yIiwiTW9uZ29FcnJvciIsImhhc0Vycm9yTGFiZWwiLCJNb25nb0Vycm9yTGFiZWwiLCJUcmFuc2llbnRUcmFuc2FjdGlvbkVycm9yIiwic2VydmVycyIsIkFycmF5IiwiZnJvbSIsInMiLCJ2YWx1ZXMiLCJsb2FkQmFsYW5jZXIiLCJwb29sIiwiY2hlY2tJbiIsIlVOUElOTkVEIiwic3RhdGUiLCJOT19UUkFOU0FDVElPTiIsImZvcmNlQ2xlYXIiLCJjbGVhciIsInNlcnZpY2VJZCIsIk1heFRpbWVNU0V4cGlyZWQiLCJ3cml0ZUNvbmNlcm5FcnJvciIsImF0dGVtcHRUcmFuc2FjdGlvbkNvbW1pdCIsImNhdGNoIiwiVW5rbm93blRyYW5zYWN0aW9uQ29tbWl0UmVzdWx0IiwiVVNFUl9FWFBMSUNJVF9UWE5fRU5EX1NUQVRFUyIsIlRSQU5TQUNUSU9OX0NPTU1JVFRFRCIsIlRSQU5TQUNUSU9OX0FCT1JURUQiLCJ1c2VyRXhwbGljaXRseUVuZGVkVHJhbnNhY3Rpb24iLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlamVjdCIsImlzUHJvbWlzZUxpa2UiLCJ0aGVuIiwibWF5YmVSZXRyeU9yVGhyb3ciLCJhZGRFcnJvckxhYmVsIiwicHJvbWlzaWZ5IiwiZW5kVHJhbnNhY3Rpb24iLCJjb21tYW5kTmFtZSIsImNhbGxiYWNrIiwidHhuU3RhdGUiLCJUUkFOU0FDVElPTl9DT01NSVRURURfRU1QVFkiLCJjb21tYW5kIiwidyIsInd0aW1lb3V0TVMiLCJXcml0ZUNvbmNlcm4iLCJhcHBseSIsIm1heFRpbWVNUyIsImNvbW1hbmRIYW5kbGVyIiwicmVzdWx0IiwiUmV0cnlhYmxlV3JpdGVFcnJvciIsIk1vbmdvV3JpdGVDb25jZXJuRXJyb3IiLCJyZWNvdmVyeVRva2VuIiwiZXhlY3V0ZU9wZXJhdGlvbiIsIlJ1bkFkbWluQ29tbWFuZE9wZXJhdGlvbiIsIlJlYWRQcmVmZXJlbmNlIiwicHJpbWFyeSIsImJ5cGFzc1Bpbm5pbmdDaGVjayIsInd0aW1lb3V0IiwiQmluYXJ5IiwidXVpZFY0IiwiU1VCVFlQRV9VVUlEIiwibGFzdFVzZSIsInR4bk51bWJlciIsImlzRGlydHkiLCJoYXNUaW1lZE91dCIsInNlc3Npb25UaW1lb3V0TWludXRlcyIsImlkbGVUaW1lTWludXRlcyIsIk1hdGgiLCJyb3VuZCIsImFycmF5QnVmZmVyIiwiQXJyYXlCdWZmZXIiLCJpZEJ5dGVzIiwiQnVmZmVyIiwic2V0Iiwic3ViX3R5cGUiLCJzZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsInNlc3Npb25zIiwiTGlzdCIsImxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMiLCJsZW5ndGgiLCJwb3RlbnRpYWxTZXNzaW9uIiwic2hpZnQiLCJ1bnNoaWZ0IiwicHJ1bmUiLCJNb25nb0V4cGlyZWRTZXNzaW9uRXJyb3IiLCJNb25nb0FQSUVycm9yIiwibHNpZCIsImluVHhuT3JUeG5Db21tYW5kIiwiaXNUcmFuc2FjdGlvbkNvbW1hbmQiLCJpc1JldHJ5YWJsZVdyaXRlIiwid2lsbFJldHJ5V3JpdGUiLCJMb25nIiwiZnJvbU51bWJlciIsImNvbW1hbmRTdXBwb3J0c1JlYWRDb25jZXJuIiwiYWZ0ZXJDbHVzdGVyVGltZSIsImxldmVsIiwiUmVhZENvbmNlcm5MZXZlbCIsImF0Q2x1c3RlclRpbWUiLCJhdXRvY29tbWl0IiwiVFJBTlNBQ1RJT05fSU5fUFJPR1JFU1MiLCJkb2N1bWVudCIsIiRjbHVzdGVyVGltZSIsIl9yZWNvdmVyeVRva2VuIiwiY3Vyc29yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sessions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sort.js":
/*!******************************************!*\
  !*** ./node_modules/mongodb/lib/sort.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.formatSort = void 0;\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/** @internal */ function prepareDirection(direction = 1) {\n    const value = `${direction}`.toLowerCase();\n    if (isMeta(direction)) return direction;\n    switch(value){\n        case \"ascending\":\n        case \"asc\":\n        case \"1\":\n            return 1;\n        case \"descending\":\n        case \"desc\":\n        case \"-1\":\n            return -1;\n        default:\n            throw new error_1.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(direction)}`);\n    }\n}\n/** @internal */ function isMeta(t) {\n    return typeof t === \"object\" && t != null && \"$meta\" in t && typeof t.$meta === \"string\";\n}\n/** @internal */ function isPair(t) {\n    if (Array.isArray(t) && t.length === 2) {\n        try {\n            prepareDirection(t[1]);\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n    return false;\n}\nfunction isDeep(t) {\n    return Array.isArray(t) && Array.isArray(t[0]);\n}\nfunction isMap(t) {\n    return t instanceof Map && t.size > 0;\n}\n/** @internal */ function pairToMap(v) {\n    return new Map([\n        [\n            `${v[0]}`,\n            prepareDirection([\n                v[1]\n            ])\n        ]\n    ]);\n}\n/** @internal */ function deepToMap(t) {\n    const sortEntries = t.map(([k, v])=>[\n            `${k}`,\n            prepareDirection(v)\n        ]);\n    return new Map(sortEntries);\n}\n/** @internal */ function stringsToMap(t) {\n    const sortEntries = t.map((key)=>[\n            `${key}`,\n            1\n        ]);\n    return new Map(sortEntries);\n}\n/** @internal */ function objectToMap(t) {\n    const sortEntries = Object.entries(t).map(([k, v])=>[\n            `${k}`,\n            prepareDirection(v)\n        ]);\n    return new Map(sortEntries);\n}\n/** @internal */ function mapToMap(t) {\n    const sortEntries = Array.from(t).map(([k, v])=>[\n            `${k}`,\n            prepareDirection(v)\n        ]);\n    return new Map(sortEntries);\n}\n/** converts a Sort type into a type that is valid for the server (SortForCmd) */ function formatSort(sort, direction) {\n    if (sort == null) return undefined;\n    if (typeof sort === \"string\") return new Map([\n        [\n            sort,\n            prepareDirection(direction)\n        ]\n    ]);\n    if (typeof sort !== \"object\") {\n        throw new error_1.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(sort)} Sort must be a valid object`);\n    }\n    if (!Array.isArray(sort)) {\n        return isMap(sort) ? mapToMap(sort) : Object.keys(sort).length ? objectToMap(sort) : undefined;\n    }\n    if (!sort.length) return undefined;\n    if (isDeep(sort)) return deepToMap(sort);\n    if (isPair(sort)) return pairToMap(sort);\n    return stringsToMap(sort);\n}\nexports.formatSort = formatSort; //# sourceMappingURL=sort.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc29ydC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsa0JBQWtCLEdBQUcsS0FBSztBQUMxQixNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywwREFBUztBQUNqQyxjQUFjLEdBQ2QsU0FBU0MsaUJBQWlCQyxZQUFZLENBQUM7SUFDbkMsTUFBTUwsUUFBUSxDQUFDLEVBQUVLLFVBQVUsQ0FBQyxDQUFDQyxXQUFXO0lBQ3hDLElBQUlDLE9BQU9GLFlBQ1AsT0FBT0E7SUFDWCxPQUFRTDtRQUNKLEtBQUs7UUFDTCxLQUFLO1FBQ0wsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1FBQ0wsS0FBSztRQUNMLEtBQUs7WUFDRCxPQUFPLENBQUM7UUFDWjtZQUNJLE1BQU0sSUFBSUUsUUFBUU0seUJBQXlCLENBQUMsQ0FBQyx3QkFBd0IsRUFBRUMsS0FBS0MsU0FBUyxDQUFDTCxXQUFXLENBQUM7SUFDMUc7QUFDSjtBQUNBLGNBQWMsR0FDZCxTQUFTRSxPQUFPSSxDQUFDO0lBQ2IsT0FBTyxPQUFPQSxNQUFNLFlBQVlBLEtBQUssUUFBUSxXQUFXQSxLQUFLLE9BQU9BLEVBQUVDLEtBQUssS0FBSztBQUNwRjtBQUNBLGNBQWMsR0FDZCxTQUFTQyxPQUFPRixDQUFDO0lBQ2IsSUFBSUcsTUFBTUMsT0FBTyxDQUFDSixNQUFNQSxFQUFFSyxNQUFNLEtBQUssR0FBRztRQUNwQyxJQUFJO1lBQ0FaLGlCQUFpQk8sQ0FBQyxDQUFDLEVBQUU7WUFDckIsT0FBTztRQUNYLEVBQ0EsT0FBT00sR0FBRztZQUNOLE9BQU87UUFDWDtJQUNKO0lBQ0EsT0FBTztBQUNYO0FBQ0EsU0FBU0MsT0FBT1AsQ0FBQztJQUNiLE9BQU9HLE1BQU1DLE9BQU8sQ0FBQ0osTUFBTUcsTUFBTUMsT0FBTyxDQUFDSixDQUFDLENBQUMsRUFBRTtBQUNqRDtBQUNBLFNBQVNRLE1BQU1SLENBQUM7SUFDWixPQUFPQSxhQUFhUyxPQUFPVCxFQUFFVSxJQUFJLEdBQUc7QUFDeEM7QUFDQSxjQUFjLEdBQ2QsU0FBU0MsVUFBVUMsQ0FBQztJQUNoQixPQUFPLElBQUlILElBQUk7UUFBQztZQUFDLENBQUMsRUFBRUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQUVuQixpQkFBaUI7Z0JBQUNtQixDQUFDLENBQUMsRUFBRTthQUFDO1NBQUU7S0FBQztBQUMxRDtBQUNBLGNBQWMsR0FDZCxTQUFTQyxVQUFVYixDQUFDO0lBQ2hCLE1BQU1jLGNBQWNkLEVBQUVlLEdBQUcsQ0FBQyxDQUFDLENBQUNDLEdBQUdKLEVBQUUsR0FBSztZQUFDLENBQUMsRUFBRUksRUFBRSxDQUFDO1lBQUV2QixpQkFBaUJtQjtTQUFHO0lBQ25FLE9BQU8sSUFBSUgsSUFBSUs7QUFDbkI7QUFDQSxjQUFjLEdBQ2QsU0FBU0csYUFBYWpCLENBQUM7SUFDbkIsTUFBTWMsY0FBY2QsRUFBRWUsR0FBRyxDQUFDRyxDQUFBQSxNQUFPO1lBQUMsQ0FBQyxFQUFFQSxJQUFJLENBQUM7WUFBRTtTQUFFO0lBQzlDLE9BQU8sSUFBSVQsSUFBSUs7QUFDbkI7QUFDQSxjQUFjLEdBQ2QsU0FBU0ssWUFBWW5CLENBQUM7SUFDbEIsTUFBTWMsY0FBYzVCLE9BQU9rQyxPQUFPLENBQUNwQixHQUFHZSxHQUFHLENBQUMsQ0FBQyxDQUFDQyxHQUFHSixFQUFFLEdBQUs7WUFDbEQsQ0FBQyxFQUFFSSxFQUFFLENBQUM7WUFDTnZCLGlCQUFpQm1CO1NBQ3BCO0lBQ0QsT0FBTyxJQUFJSCxJQUFJSztBQUNuQjtBQUNBLGNBQWMsR0FDZCxTQUFTTyxTQUFTckIsQ0FBQztJQUNmLE1BQU1jLGNBQWNYLE1BQU1tQixJQUFJLENBQUN0QixHQUFHZSxHQUFHLENBQUMsQ0FBQyxDQUFDQyxHQUFHSixFQUFFLEdBQUs7WUFDOUMsQ0FBQyxFQUFFSSxFQUFFLENBQUM7WUFDTnZCLGlCQUFpQm1CO1NBQ3BCO0lBQ0QsT0FBTyxJQUFJSCxJQUFJSztBQUNuQjtBQUNBLCtFQUErRSxHQUMvRSxTQUFTeEIsV0FBV2lDLElBQUksRUFBRTdCLFNBQVM7SUFDL0IsSUFBSTZCLFFBQVEsTUFDUixPQUFPQztJQUNYLElBQUksT0FBT0QsU0FBUyxVQUNoQixPQUFPLElBQUlkLElBQUk7UUFBQztZQUFDYztZQUFNOUIsaUJBQWlCQztTQUFXO0tBQUM7SUFDeEQsSUFBSSxPQUFPNkIsU0FBUyxVQUFVO1FBQzFCLE1BQU0sSUFBSWhDLFFBQVFNLHlCQUF5QixDQUFDLENBQUMscUJBQXFCLEVBQUVDLEtBQUtDLFNBQVMsQ0FBQ3dCLE1BQU0sNEJBQTRCLENBQUM7SUFDMUg7SUFDQSxJQUFJLENBQUNwQixNQUFNQyxPQUFPLENBQUNtQixPQUFPO1FBQ3RCLE9BQU9mLE1BQU1lLFFBQVFGLFNBQVNFLFFBQVFyQyxPQUFPdUMsSUFBSSxDQUFDRixNQUFNbEIsTUFBTSxHQUFHYyxZQUFZSSxRQUFRQztJQUN6RjtJQUNBLElBQUksQ0FBQ0QsS0FBS2xCLE1BQU0sRUFDWixPQUFPbUI7SUFDWCxJQUFJakIsT0FBT2dCLE9BQ1AsT0FBT1YsVUFBVVU7SUFDckIsSUFBSXJCLE9BQU9xQixPQUNQLE9BQU9aLFVBQVVZO0lBQ3JCLE9BQU9OLGFBQWFNO0FBQ3hCO0FBQ0FuQyxrQkFBa0IsR0FBR0UsWUFDckIsZ0NBQWdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL3NvcnQuanM/Zjc2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZm9ybWF0U29ydCA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi9lcnJvclwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmZ1bmN0aW9uIHByZXBhcmVEaXJlY3Rpb24oZGlyZWN0aW9uID0gMSkge1xuICAgIGNvbnN0IHZhbHVlID0gYCR7ZGlyZWN0aW9ufWAudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoaXNNZXRhKGRpcmVjdGlvbikpXG4gICAgICAgIHJldHVybiBkaXJlY3Rpb247XG4gICAgc3dpdGNoICh2YWx1ZSkge1xuICAgICAgICBjYXNlICdhc2NlbmRpbmcnOlxuICAgICAgICBjYXNlICdhc2MnOlxuICAgICAgICBjYXNlICcxJzpcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICBjYXNlICdkZXNjZW5kaW5nJzpcbiAgICAgICAgY2FzZSAnZGVzYyc6XG4gICAgICAgIGNhc2UgJy0xJzpcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYEludmFsaWQgc29ydCBkaXJlY3Rpb246ICR7SlNPTi5zdHJpbmdpZnkoZGlyZWN0aW9uKX1gKTtcbiAgICB9XG59XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBpc01ldGEodCkge1xuICAgIHJldHVybiB0eXBlb2YgdCA9PT0gJ29iamVjdCcgJiYgdCAhPSBudWxsICYmICckbWV0YScgaW4gdCAmJiB0eXBlb2YgdC4kbWV0YSA9PT0gJ3N0cmluZyc7XG59XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBpc1BhaXIodCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHQpICYmIHQubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwcmVwYXJlRGlyZWN0aW9uKHRbMV0pO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc0RlZXAodCkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHQpICYmIEFycmF5LmlzQXJyYXkodFswXSk7XG59XG5mdW5jdGlvbiBpc01hcCh0KSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBNYXAgJiYgdC5zaXplID4gMDtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmZ1bmN0aW9uIHBhaXJUb01hcCh2KSB7XG4gICAgcmV0dXJuIG5ldyBNYXAoW1tgJHt2WzBdfWAsIHByZXBhcmVEaXJlY3Rpb24oW3ZbMV1dKV1dKTtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmZ1bmN0aW9uIGRlZXBUb01hcCh0KSB7XG4gICAgY29uc3Qgc29ydEVudHJpZXMgPSB0Lm1hcCgoW2ssIHZdKSA9PiBbYCR7a31gLCBwcmVwYXJlRGlyZWN0aW9uKHYpXSk7XG4gICAgcmV0dXJuIG5ldyBNYXAoc29ydEVudHJpZXMpO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gc3RyaW5nc1RvTWFwKHQpIHtcbiAgICBjb25zdCBzb3J0RW50cmllcyA9IHQubWFwKGtleSA9PiBbYCR7a2V5fWAsIDFdKTtcbiAgICByZXR1cm4gbmV3IE1hcChzb3J0RW50cmllcyk7XG59XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBvYmplY3RUb01hcCh0KSB7XG4gICAgY29uc3Qgc29ydEVudHJpZXMgPSBPYmplY3QuZW50cmllcyh0KS5tYXAoKFtrLCB2XSkgPT4gW1xuICAgICAgICBgJHtrfWAsXG4gICAgICAgIHByZXBhcmVEaXJlY3Rpb24odilcbiAgICBdKTtcbiAgICByZXR1cm4gbmV3IE1hcChzb3J0RW50cmllcyk7XG59XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBtYXBUb01hcCh0KSB7XG4gICAgY29uc3Qgc29ydEVudHJpZXMgPSBBcnJheS5mcm9tKHQpLm1hcCgoW2ssIHZdKSA9PiBbXG4gICAgICAgIGAke2t9YCxcbiAgICAgICAgcHJlcGFyZURpcmVjdGlvbih2KVxuICAgIF0pO1xuICAgIHJldHVybiBuZXcgTWFwKHNvcnRFbnRyaWVzKTtcbn1cbi8qKiBjb252ZXJ0cyBhIFNvcnQgdHlwZSBpbnRvIGEgdHlwZSB0aGF0IGlzIHZhbGlkIGZvciB0aGUgc2VydmVyIChTb3J0Rm9yQ21kKSAqL1xuZnVuY3Rpb24gZm9ybWF0U29ydChzb3J0LCBkaXJlY3Rpb24pIHtcbiAgICBpZiAoc29ydCA9PSBudWxsKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGlmICh0eXBlb2Ygc29ydCA9PT0gJ3N0cmluZycpXG4gICAgICAgIHJldHVybiBuZXcgTWFwKFtbc29ydCwgcHJlcGFyZURpcmVjdGlvbihkaXJlY3Rpb24pXV0pO1xuICAgIGlmICh0eXBlb2Ygc29ydCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgSW52YWxpZCBzb3J0IGZvcm1hdDogJHtKU09OLnN0cmluZ2lmeShzb3J0KX0gU29ydCBtdXN0IGJlIGEgdmFsaWQgb2JqZWN0YCk7XG4gICAgfVxuICAgIGlmICghQXJyYXkuaXNBcnJheShzb3J0KSkge1xuICAgICAgICByZXR1cm4gaXNNYXAoc29ydCkgPyBtYXBUb01hcChzb3J0KSA6IE9iamVjdC5rZXlzKHNvcnQpLmxlbmd0aCA/IG9iamVjdFRvTWFwKHNvcnQpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIXNvcnQubGVuZ3RoKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGlmIChpc0RlZXAoc29ydCkpXG4gICAgICAgIHJldHVybiBkZWVwVG9NYXAoc29ydCk7XG4gICAgaWYgKGlzUGFpcihzb3J0KSlcbiAgICAgICAgcmV0dXJuIHBhaXJUb01hcChzb3J0KTtcbiAgICByZXR1cm4gc3RyaW5nc1RvTWFwKHNvcnQpO1xufVxuZXhwb3J0cy5mb3JtYXRTb3J0ID0gZm9ybWF0U29ydDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNvcnQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZm9ybWF0U29ydCIsImVycm9yXzEiLCJyZXF1aXJlIiwicHJlcGFyZURpcmVjdGlvbiIsImRpcmVjdGlvbiIsInRvTG93ZXJDYXNlIiwiaXNNZXRhIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0IiwiJG1ldGEiLCJpc1BhaXIiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJlIiwiaXNEZWVwIiwiaXNNYXAiLCJNYXAiLCJzaXplIiwicGFpclRvTWFwIiwidiIsImRlZXBUb01hcCIsInNvcnRFbnRyaWVzIiwibWFwIiwiayIsInN0cmluZ3NUb01hcCIsImtleSIsIm9iamVjdFRvTWFwIiwiZW50cmllcyIsIm1hcFRvTWFwIiwiZnJvbSIsInNvcnQiLCJ1bmRlZmluZWQiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sort.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/transactions.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/transactions.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.isTransactionCommand = exports.Transaction = exports.TxnState = void 0;\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_concern_1 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst write_concern_1 = __webpack_require__(/*! ./write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\n/** @internal */ exports.TxnState = Object.freeze({\n    NO_TRANSACTION: \"NO_TRANSACTION\",\n    STARTING_TRANSACTION: \"STARTING_TRANSACTION\",\n    TRANSACTION_IN_PROGRESS: \"TRANSACTION_IN_PROGRESS\",\n    TRANSACTION_COMMITTED: \"TRANSACTION_COMMITTED\",\n    TRANSACTION_COMMITTED_EMPTY: \"TRANSACTION_COMMITTED_EMPTY\",\n    TRANSACTION_ABORTED: \"TRANSACTION_ABORTED\"\n});\nconst stateMachine = {\n    [exports.TxnState.NO_TRANSACTION]: [\n        exports.TxnState.NO_TRANSACTION,\n        exports.TxnState.STARTING_TRANSACTION\n    ],\n    [exports.TxnState.STARTING_TRANSACTION]: [\n        exports.TxnState.TRANSACTION_IN_PROGRESS,\n        exports.TxnState.TRANSACTION_COMMITTED,\n        exports.TxnState.TRANSACTION_COMMITTED_EMPTY,\n        exports.TxnState.TRANSACTION_ABORTED\n    ],\n    [exports.TxnState.TRANSACTION_IN_PROGRESS]: [\n        exports.TxnState.TRANSACTION_IN_PROGRESS,\n        exports.TxnState.TRANSACTION_COMMITTED,\n        exports.TxnState.TRANSACTION_ABORTED\n    ],\n    [exports.TxnState.TRANSACTION_COMMITTED]: [\n        exports.TxnState.TRANSACTION_COMMITTED,\n        exports.TxnState.TRANSACTION_COMMITTED_EMPTY,\n        exports.TxnState.STARTING_TRANSACTION,\n        exports.TxnState.NO_TRANSACTION\n    ],\n    [exports.TxnState.TRANSACTION_ABORTED]: [\n        exports.TxnState.STARTING_TRANSACTION,\n        exports.TxnState.NO_TRANSACTION\n    ],\n    [exports.TxnState.TRANSACTION_COMMITTED_EMPTY]: [\n        exports.TxnState.TRANSACTION_COMMITTED_EMPTY,\n        exports.TxnState.NO_TRANSACTION\n    ]\n};\nconst ACTIVE_STATES = new Set([\n    exports.TxnState.STARTING_TRANSACTION,\n    exports.TxnState.TRANSACTION_IN_PROGRESS\n]);\nconst COMMITTED_STATES = new Set([\n    exports.TxnState.TRANSACTION_COMMITTED,\n    exports.TxnState.TRANSACTION_COMMITTED_EMPTY,\n    exports.TxnState.TRANSACTION_ABORTED\n]);\n/**\n * @public\n * A class maintaining state related to a server transaction. Internal Only\n */ class Transaction {\n    /** Create a transaction @internal */ constructor(options){\n        options = options ?? {};\n        this.state = exports.TxnState.NO_TRANSACTION;\n        this.options = {};\n        const writeConcern = write_concern_1.WriteConcern.fromOptions(options);\n        if (writeConcern) {\n            if (writeConcern.w === 0) {\n                throw new error_1.MongoTransactionError(\"Transactions do not support unacknowledged write concern\");\n            }\n            this.options.writeConcern = writeConcern;\n        }\n        if (options.readConcern) {\n            this.options.readConcern = read_concern_1.ReadConcern.fromOptions(options);\n        }\n        if (options.readPreference) {\n            this.options.readPreference = read_preference_1.ReadPreference.fromOptions(options);\n        }\n        if (options.maxCommitTimeMS) {\n            this.options.maxTimeMS = options.maxCommitTimeMS;\n        }\n        // TODO: This isn't technically necessary\n        this._pinnedServer = undefined;\n        this._recoveryToken = undefined;\n    }\n    /** @internal */ get server() {\n        return this._pinnedServer;\n    }\n    get recoveryToken() {\n        return this._recoveryToken;\n    }\n    get isPinned() {\n        return !!this.server;\n    }\n    /** @returns Whether the transaction has started */ get isStarting() {\n        return this.state === exports.TxnState.STARTING_TRANSACTION;\n    }\n    /**\n     * @returns Whether this session is presently in a transaction\n     */ get isActive() {\n        return ACTIVE_STATES.has(this.state);\n    }\n    get isCommitted() {\n        return COMMITTED_STATES.has(this.state);\n    }\n    /**\n     * Transition the transaction in the state machine\n     * @internal\n     * @param nextState - The new state to transition to\n     */ transition(nextState) {\n        const nextStates = stateMachine[this.state];\n        if (nextStates && nextStates.includes(nextState)) {\n            this.state = nextState;\n            if (this.state === exports.TxnState.NO_TRANSACTION || this.state === exports.TxnState.STARTING_TRANSACTION || this.state === exports.TxnState.TRANSACTION_ABORTED) {\n                this.unpinServer();\n            }\n            return;\n        }\n        throw new error_1.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${nextState}]`);\n    }\n    /** @internal */ pinServer(server) {\n        if (this.isActive) {\n            this._pinnedServer = server;\n        }\n    }\n    /** @internal */ unpinServer() {\n        this._pinnedServer = undefined;\n    }\n}\nexports.Transaction = Transaction;\nfunction isTransactionCommand(command) {\n    return !!(command.commitTransaction || command.abortTransaction);\n}\nexports.isTransactionCommand = isTransactionCommand; //# sourceMappingURL=transactions.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvdHJhbnNhY3Rpb25zLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw0QkFBNEIsR0FBR0EsbUJBQW1CLEdBQUdBLGdCQUFnQixHQUFHLEtBQUs7QUFDN0UsTUFBTUssVUFBVUMsbUJBQU9BLENBQUMsMERBQVM7QUFDakMsTUFBTUMsaUJBQWlCRCxtQkFBT0EsQ0FBQyx3RUFBZ0I7QUFDL0MsTUFBTUUsb0JBQW9CRixtQkFBT0EsQ0FBQyw4RUFBbUI7QUFDckQsTUFBTUcsa0JBQWtCSCxtQkFBT0EsQ0FBQywwRUFBaUI7QUFDakQsY0FBYyxHQUNkTixnQkFBZ0IsR0FBR0YsT0FBT1ksTUFBTSxDQUFDO0lBQzdCQyxnQkFBZ0I7SUFDaEJDLHNCQUFzQjtJQUN0QkMseUJBQXlCO0lBQ3pCQyx1QkFBdUI7SUFDdkJDLDZCQUE2QjtJQUM3QkMscUJBQXFCO0FBQ3pCO0FBQ0EsTUFBTUMsZUFBZTtJQUNqQixDQUFDakIsUUFBUUksUUFBUSxDQUFDTyxjQUFjLENBQUMsRUFBRTtRQUFDWCxRQUFRSSxRQUFRLENBQUNPLGNBQWM7UUFBRVgsUUFBUUksUUFBUSxDQUFDUSxvQkFBb0I7S0FBQztJQUMzRyxDQUFDWixRQUFRSSxRQUFRLENBQUNRLG9CQUFvQixDQUFDLEVBQUU7UUFDckNaLFFBQVFJLFFBQVEsQ0FBQ1MsdUJBQXVCO1FBQ3hDYixRQUFRSSxRQUFRLENBQUNVLHFCQUFxQjtRQUN0Q2QsUUFBUUksUUFBUSxDQUFDVywyQkFBMkI7UUFDNUNmLFFBQVFJLFFBQVEsQ0FBQ1ksbUJBQW1CO0tBQ3ZDO0lBQ0QsQ0FBQ2hCLFFBQVFJLFFBQVEsQ0FBQ1MsdUJBQXVCLENBQUMsRUFBRTtRQUN4Q2IsUUFBUUksUUFBUSxDQUFDUyx1QkFBdUI7UUFDeENiLFFBQVFJLFFBQVEsQ0FBQ1UscUJBQXFCO1FBQ3RDZCxRQUFRSSxRQUFRLENBQUNZLG1CQUFtQjtLQUN2QztJQUNELENBQUNoQixRQUFRSSxRQUFRLENBQUNVLHFCQUFxQixDQUFDLEVBQUU7UUFDdENkLFFBQVFJLFFBQVEsQ0FBQ1UscUJBQXFCO1FBQ3RDZCxRQUFRSSxRQUFRLENBQUNXLDJCQUEyQjtRQUM1Q2YsUUFBUUksUUFBUSxDQUFDUSxvQkFBb0I7UUFDckNaLFFBQVFJLFFBQVEsQ0FBQ08sY0FBYztLQUNsQztJQUNELENBQUNYLFFBQVFJLFFBQVEsQ0FBQ1ksbUJBQW1CLENBQUMsRUFBRTtRQUFDaEIsUUFBUUksUUFBUSxDQUFDUSxvQkFBb0I7UUFBRVosUUFBUUksUUFBUSxDQUFDTyxjQUFjO0tBQUM7SUFDaEgsQ0FBQ1gsUUFBUUksUUFBUSxDQUFDVywyQkFBMkIsQ0FBQyxFQUFFO1FBQzVDZixRQUFRSSxRQUFRLENBQUNXLDJCQUEyQjtRQUM1Q2YsUUFBUUksUUFBUSxDQUFDTyxjQUFjO0tBQ2xDO0FBQ0w7QUFDQSxNQUFNTyxnQkFBZ0IsSUFBSUMsSUFBSTtJQUMxQm5CLFFBQVFJLFFBQVEsQ0FBQ1Esb0JBQW9CO0lBQ3JDWixRQUFRSSxRQUFRLENBQUNTLHVCQUF1QjtDQUMzQztBQUNELE1BQU1PLG1CQUFtQixJQUFJRCxJQUFJO0lBQzdCbkIsUUFBUUksUUFBUSxDQUFDVSxxQkFBcUI7SUFDdENkLFFBQVFJLFFBQVEsQ0FBQ1csMkJBQTJCO0lBQzVDZixRQUFRSSxRQUFRLENBQUNZLG1CQUFtQjtDQUN2QztBQUNEOzs7Q0FHQyxHQUNELE1BQU1iO0lBQ0YsbUNBQW1DLEdBQ25Da0IsWUFBWUMsT0FBTyxDQUFFO1FBQ2pCQSxVQUFVQSxXQUFXLENBQUM7UUFDdEIsSUFBSSxDQUFDQyxLQUFLLEdBQUd2QixRQUFRSSxRQUFRLENBQUNPLGNBQWM7UUFDNUMsSUFBSSxDQUFDVyxPQUFPLEdBQUcsQ0FBQztRQUNoQixNQUFNRSxlQUFlZixnQkFBZ0JnQixZQUFZLENBQUNDLFdBQVcsQ0FBQ0o7UUFDOUQsSUFBSUUsY0FBYztZQUNkLElBQUlBLGFBQWFHLENBQUMsS0FBSyxHQUFHO2dCQUN0QixNQUFNLElBQUl0QixRQUFRdUIscUJBQXFCLENBQUM7WUFDNUM7WUFDQSxJQUFJLENBQUNOLE9BQU8sQ0FBQ0UsWUFBWSxHQUFHQTtRQUNoQztRQUNBLElBQUlGLFFBQVFPLFdBQVcsRUFBRTtZQUNyQixJQUFJLENBQUNQLE9BQU8sQ0FBQ08sV0FBVyxHQUFHdEIsZUFBZXVCLFdBQVcsQ0FBQ0osV0FBVyxDQUFDSjtRQUN0RTtRQUNBLElBQUlBLFFBQVFTLGNBQWMsRUFBRTtZQUN4QixJQUFJLENBQUNULE9BQU8sQ0FBQ1MsY0FBYyxHQUFHdkIsa0JBQWtCd0IsY0FBYyxDQUFDTixXQUFXLENBQUNKO1FBQy9FO1FBQ0EsSUFBSUEsUUFBUVcsZUFBZSxFQUFFO1lBQ3pCLElBQUksQ0FBQ1gsT0FBTyxDQUFDWSxTQUFTLEdBQUdaLFFBQVFXLGVBQWU7UUFDcEQ7UUFDQSx5Q0FBeUM7UUFDekMsSUFBSSxDQUFDRSxhQUFhLEdBQUdDO1FBQ3JCLElBQUksQ0FBQ0MsY0FBYyxHQUFHRDtJQUMxQjtJQUNBLGNBQWMsR0FDZCxJQUFJRSxTQUFTO1FBQ1QsT0FBTyxJQUFJLENBQUNILGFBQWE7SUFDN0I7SUFDQSxJQUFJSSxnQkFBZ0I7UUFDaEIsT0FBTyxJQUFJLENBQUNGLGNBQWM7SUFDOUI7SUFDQSxJQUFJRyxXQUFXO1FBQ1gsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDRixNQUFNO0lBQ3hCO0lBQ0EsaURBQWlELEdBQ2pELElBQUlHLGFBQWE7UUFDYixPQUFPLElBQUksQ0FBQ2xCLEtBQUssS0FBS3ZCLFFBQVFJLFFBQVEsQ0FBQ1Esb0JBQW9CO0lBQy9EO0lBQ0E7O0tBRUMsR0FDRCxJQUFJOEIsV0FBVztRQUNYLE9BQU94QixjQUFjeUIsR0FBRyxDQUFDLElBQUksQ0FBQ3BCLEtBQUs7SUFDdkM7SUFDQSxJQUFJcUIsY0FBYztRQUNkLE9BQU94QixpQkFBaUJ1QixHQUFHLENBQUMsSUFBSSxDQUFDcEIsS0FBSztJQUMxQztJQUNBOzs7O0tBSUMsR0FDRHNCLFdBQVdDLFNBQVMsRUFBRTtRQUNsQixNQUFNQyxhQUFhOUIsWUFBWSxDQUFDLElBQUksQ0FBQ00sS0FBSyxDQUFDO1FBQzNDLElBQUl3QixjQUFjQSxXQUFXQyxRQUFRLENBQUNGLFlBQVk7WUFDOUMsSUFBSSxDQUFDdkIsS0FBSyxHQUFHdUI7WUFDYixJQUFJLElBQUksQ0FBQ3ZCLEtBQUssS0FBS3ZCLFFBQVFJLFFBQVEsQ0FBQ08sY0FBYyxJQUM5QyxJQUFJLENBQUNZLEtBQUssS0FBS3ZCLFFBQVFJLFFBQVEsQ0FBQ1Esb0JBQW9CLElBQ3BELElBQUksQ0FBQ1csS0FBSyxLQUFLdkIsUUFBUUksUUFBUSxDQUFDWSxtQkFBbUIsRUFBRTtnQkFDckQsSUFBSSxDQUFDaUMsV0FBVztZQUNwQjtZQUNBO1FBQ0o7UUFDQSxNQUFNLElBQUk1QyxRQUFRNkMsaUJBQWlCLENBQUMsQ0FBQyx5Q0FBeUMsRUFBRSxJQUFJLENBQUMzQixLQUFLLENBQUMsTUFBTSxFQUFFdUIsVUFBVSxDQUFDLENBQUM7SUFDbkg7SUFDQSxjQUFjLEdBQ2RLLFVBQVViLE1BQU0sRUFBRTtRQUNkLElBQUksSUFBSSxDQUFDSSxRQUFRLEVBQUU7WUFDZixJQUFJLENBQUNQLGFBQWEsR0FBR0c7UUFDekI7SUFDSjtJQUNBLGNBQWMsR0FDZFcsY0FBYztRQUNWLElBQUksQ0FBQ2QsYUFBYSxHQUFHQztJQUN6QjtBQUNKO0FBQ0FwQyxtQkFBbUIsR0FBR0c7QUFDdEIsU0FBU0QscUJBQXFCa0QsT0FBTztJQUNqQyxPQUFPLENBQUMsQ0FBRUEsQ0FBQUEsUUFBUUMsaUJBQWlCLElBQUlELFFBQVFFLGdCQUFnQjtBQUNuRTtBQUNBdEQsNEJBQTRCLEdBQUdFLHNCQUMvQix3Q0FBd0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvdHJhbnNhY3Rpb25zLmpzP2JlMDMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmlzVHJhbnNhY3Rpb25Db21tYW5kID0gZXhwb3J0cy5UcmFuc2FjdGlvbiA9IGV4cG9ydHMuVHhuU3RhdGUgPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4vZXJyb3JcIik7XG5jb25zdCByZWFkX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuL3JlYWRfY29uY2VyblwiKTtcbmNvbnN0IHJlYWRfcHJlZmVyZW5jZV8xID0gcmVxdWlyZShcIi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuY29uc3Qgd3JpdGVfY29uY2Vybl8xID0gcmVxdWlyZShcIi4vd3JpdGVfY29uY2VyblwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuVHhuU3RhdGUgPSBPYmplY3QuZnJlZXplKHtcbiAgICBOT19UUkFOU0FDVElPTjogJ05PX1RSQU5TQUNUSU9OJyxcbiAgICBTVEFSVElOR19UUkFOU0FDVElPTjogJ1NUQVJUSU5HX1RSQU5TQUNUSU9OJyxcbiAgICBUUkFOU0FDVElPTl9JTl9QUk9HUkVTUzogJ1RSQU5TQUNUSU9OX0lOX1BST0dSRVNTJyxcbiAgICBUUkFOU0FDVElPTl9DT01NSVRURUQ6ICdUUkFOU0FDVElPTl9DT01NSVRURUQnLFxuICAgIFRSQU5TQUNUSU9OX0NPTU1JVFRFRF9FTVBUWTogJ1RSQU5TQUNUSU9OX0NPTU1JVFRFRF9FTVBUWScsXG4gICAgVFJBTlNBQ1RJT05fQUJPUlRFRDogJ1RSQU5TQUNUSU9OX0FCT1JURUQnXG59KTtcbmNvbnN0IHN0YXRlTWFjaGluZSA9IHtcbiAgICBbZXhwb3J0cy5UeG5TdGF0ZS5OT19UUkFOU0FDVElPTl06IFtleHBvcnRzLlR4blN0YXRlLk5PX1RSQU5TQUNUSU9OLCBleHBvcnRzLlR4blN0YXRlLlNUQVJUSU5HX1RSQU5TQUNUSU9OXSxcbiAgICBbZXhwb3J0cy5UeG5TdGF0ZS5TVEFSVElOR19UUkFOU0FDVElPTl06IFtcbiAgICAgICAgZXhwb3J0cy5UeG5TdGF0ZS5UUkFOU0FDVElPTl9JTl9QUk9HUkVTUyxcbiAgICAgICAgZXhwb3J0cy5UeG5TdGF0ZS5UUkFOU0FDVElPTl9DT01NSVRURUQsXG4gICAgICAgIGV4cG9ydHMuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQ09NTUlUVEVEX0VNUFRZLFxuICAgICAgICBleHBvcnRzLlR4blN0YXRlLlRSQU5TQUNUSU9OX0FCT1JURURcbiAgICBdLFxuICAgIFtleHBvcnRzLlR4blN0YXRlLlRSQU5TQUNUSU9OX0lOX1BST0dSRVNTXTogW1xuICAgICAgICBleHBvcnRzLlR4blN0YXRlLlRSQU5TQUNUSU9OX0lOX1BST0dSRVNTLFxuICAgICAgICBleHBvcnRzLlR4blN0YXRlLlRSQU5TQUNUSU9OX0NPTU1JVFRFRCxcbiAgICAgICAgZXhwb3J0cy5UeG5TdGF0ZS5UUkFOU0FDVElPTl9BQk9SVEVEXG4gICAgXSxcbiAgICBbZXhwb3J0cy5UeG5TdGF0ZS5UUkFOU0FDVElPTl9DT01NSVRURURdOiBbXG4gICAgICAgIGV4cG9ydHMuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQ09NTUlUVEVELFxuICAgICAgICBleHBvcnRzLlR4blN0YXRlLlRSQU5TQUNUSU9OX0NPTU1JVFRFRF9FTVBUWSxcbiAgICAgICAgZXhwb3J0cy5UeG5TdGF0ZS5TVEFSVElOR19UUkFOU0FDVElPTixcbiAgICAgICAgZXhwb3J0cy5UeG5TdGF0ZS5OT19UUkFOU0FDVElPTlxuICAgIF0sXG4gICAgW2V4cG9ydHMuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQUJPUlRFRF06IFtleHBvcnRzLlR4blN0YXRlLlNUQVJUSU5HX1RSQU5TQUNUSU9OLCBleHBvcnRzLlR4blN0YXRlLk5PX1RSQU5TQUNUSU9OXSxcbiAgICBbZXhwb3J0cy5UeG5TdGF0ZS5UUkFOU0FDVElPTl9DT01NSVRURURfRU1QVFldOiBbXG4gICAgICAgIGV4cG9ydHMuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQ09NTUlUVEVEX0VNUFRZLFxuICAgICAgICBleHBvcnRzLlR4blN0YXRlLk5PX1RSQU5TQUNUSU9OXG4gICAgXVxufTtcbmNvbnN0IEFDVElWRV9TVEFURVMgPSBuZXcgU2V0KFtcbiAgICBleHBvcnRzLlR4blN0YXRlLlNUQVJUSU5HX1RSQU5TQUNUSU9OLFxuICAgIGV4cG9ydHMuVHhuU3RhdGUuVFJBTlNBQ1RJT05fSU5fUFJPR1JFU1Ncbl0pO1xuY29uc3QgQ09NTUlUVEVEX1NUQVRFUyA9IG5ldyBTZXQoW1xuICAgIGV4cG9ydHMuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQ09NTUlUVEVELFxuICAgIGV4cG9ydHMuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQ09NTUlUVEVEX0VNUFRZLFxuICAgIGV4cG9ydHMuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQUJPUlRFRFxuXSk7XG4vKipcbiAqIEBwdWJsaWNcbiAqIEEgY2xhc3MgbWFpbnRhaW5pbmcgc3RhdGUgcmVsYXRlZCB0byBhIHNlcnZlciB0cmFuc2FjdGlvbi4gSW50ZXJuYWwgT25seVxuICovXG5jbGFzcyBUcmFuc2FjdGlvbiB7XG4gICAgLyoqIENyZWF0ZSBhIHRyYW5zYWN0aW9uIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHRoaXMuc3RhdGUgPSBleHBvcnRzLlR4blN0YXRlLk5PX1RSQU5TQUNUSU9OO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICAgICAgY29uc3Qgd3JpdGVDb25jZXJuID0gd3JpdGVfY29uY2Vybl8xLldyaXRlQ29uY2Vybi5mcm9tT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgaWYgKHdyaXRlQ29uY2Vybikge1xuICAgICAgICAgICAgaWYgKHdyaXRlQ29uY2Vybi53ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29UcmFuc2FjdGlvbkVycm9yKCdUcmFuc2FjdGlvbnMgZG8gbm90IHN1cHBvcnQgdW5hY2tub3dsZWRnZWQgd3JpdGUgY29uY2VybicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLndyaXRlQ29uY2VybiA9IHdyaXRlQ29uY2VybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5yZWFkQ29uY2Vybikge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJlYWRDb25jZXJuID0gcmVhZF9jb25jZXJuXzEuUmVhZENvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMucmVhZFByZWZlcmVuY2UpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5yZWFkUHJlZmVyZW5jZSA9IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLmZyb21PcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLm1heENvbW1pdFRpbWVNUykge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm1heFRpbWVNUyA9IG9wdGlvbnMubWF4Q29tbWl0VGltZU1TO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IFRoaXMgaXNuJ3QgdGVjaG5pY2FsbHkgbmVjZXNzYXJ5XG4gICAgICAgIHRoaXMuX3Bpbm5lZFNlcnZlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fcmVjb3ZlcnlUb2tlbiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGdldCBzZXJ2ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9waW5uZWRTZXJ2ZXI7XG4gICAgfVxuICAgIGdldCByZWNvdmVyeVRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVjb3ZlcnlUb2tlbjtcbiAgICB9XG4gICAgZ2V0IGlzUGlubmVkKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLnNlcnZlcjtcbiAgICB9XG4gICAgLyoqIEByZXR1cm5zIFdoZXRoZXIgdGhlIHRyYW5zYWN0aW9uIGhhcyBzdGFydGVkICovXG4gICAgZ2V0IGlzU3RhcnRpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlID09PSBleHBvcnRzLlR4blN0YXRlLlNUQVJUSU5HX1RSQU5TQUNUSU9OO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHRoaXMgc2Vzc2lvbiBpcyBwcmVzZW50bHkgaW4gYSB0cmFuc2FjdGlvblxuICAgICAqL1xuICAgIGdldCBpc0FjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIEFDVElWRV9TVEFURVMuaGFzKHRoaXMuc3RhdGUpO1xuICAgIH1cbiAgICBnZXQgaXNDb21taXR0ZWQoKSB7XG4gICAgICAgIHJldHVybiBDT01NSVRURURfU1RBVEVTLmhhcyh0aGlzLnN0YXRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNpdGlvbiB0aGUgdHJhbnNhY3Rpb24gaW4gdGhlIHN0YXRlIG1hY2hpbmVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gbmV4dFN0YXRlIC0gVGhlIG5ldyBzdGF0ZSB0byB0cmFuc2l0aW9uIHRvXG4gICAgICovXG4gICAgdHJhbnNpdGlvbihuZXh0U3RhdGUpIHtcbiAgICAgICAgY29uc3QgbmV4dFN0YXRlcyA9IHN0YXRlTWFjaGluZVt0aGlzLnN0YXRlXTtcbiAgICAgICAgaWYgKG5leHRTdGF0ZXMgJiYgbmV4dFN0YXRlcy5pbmNsdWRlcyhuZXh0U3RhdGUpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gbmV4dFN0YXRlO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IGV4cG9ydHMuVHhuU3RhdGUuTk9fVFJBTlNBQ1RJT04gfHxcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID09PSBleHBvcnRzLlR4blN0YXRlLlNUQVJUSU5HX1RSQU5TQUNUSU9OIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9PT0gZXhwb3J0cy5UeG5TdGF0ZS5UUkFOU0FDVElPTl9BQk9SVEVEKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnBpblNlcnZlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBBdHRlbXB0ZWQgaWxsZWdhbCBzdGF0ZSB0cmFuc2l0aW9uIGZyb20gWyR7dGhpcy5zdGF0ZX1dIHRvIFske25leHRTdGF0ZX1dYCk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBwaW5TZXJ2ZXIoc2VydmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICB0aGlzLl9waW5uZWRTZXJ2ZXIgPSBzZXJ2ZXI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIHVucGluU2VydmVyKCkge1xuICAgICAgICB0aGlzLl9waW5uZWRTZXJ2ZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuZXhwb3J0cy5UcmFuc2FjdGlvbiA9IFRyYW5zYWN0aW9uO1xuZnVuY3Rpb24gaXNUcmFuc2FjdGlvbkNvbW1hbmQoY29tbWFuZCkge1xuICAgIHJldHVybiAhIShjb21tYW5kLmNvbW1pdFRyYW5zYWN0aW9uIHx8IGNvbW1hbmQuYWJvcnRUcmFuc2FjdGlvbik7XG59XG5leHBvcnRzLmlzVHJhbnNhY3Rpb25Db21tYW5kID0gaXNUcmFuc2FjdGlvbkNvbW1hbmQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2FjdGlvbnMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiaXNUcmFuc2FjdGlvbkNvbW1hbmQiLCJUcmFuc2FjdGlvbiIsIlR4blN0YXRlIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJyZWFkX2NvbmNlcm5fMSIsInJlYWRfcHJlZmVyZW5jZV8xIiwid3JpdGVfY29uY2Vybl8xIiwiZnJlZXplIiwiTk9fVFJBTlNBQ1RJT04iLCJTVEFSVElOR19UUkFOU0FDVElPTiIsIlRSQU5TQUNUSU9OX0lOX1BST0dSRVNTIiwiVFJBTlNBQ1RJT05fQ09NTUlUVEVEIiwiVFJBTlNBQ1RJT05fQ09NTUlUVEVEX0VNUFRZIiwiVFJBTlNBQ1RJT05fQUJPUlRFRCIsInN0YXRlTWFjaGluZSIsIkFDVElWRV9TVEFURVMiLCJTZXQiLCJDT01NSVRURURfU1RBVEVTIiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwic3RhdGUiLCJ3cml0ZUNvbmNlcm4iLCJXcml0ZUNvbmNlcm4iLCJmcm9tT3B0aW9ucyIsInciLCJNb25nb1RyYW5zYWN0aW9uRXJyb3IiLCJyZWFkQ29uY2VybiIsIlJlYWRDb25jZXJuIiwicmVhZFByZWZlcmVuY2UiLCJSZWFkUHJlZmVyZW5jZSIsIm1heENvbW1pdFRpbWVNUyIsIm1heFRpbWVNUyIsIl9waW5uZWRTZXJ2ZXIiLCJ1bmRlZmluZWQiLCJfcmVjb3ZlcnlUb2tlbiIsInNlcnZlciIsInJlY292ZXJ5VG9rZW4iLCJpc1Bpbm5lZCIsImlzU3RhcnRpbmciLCJpc0FjdGl2ZSIsImhhcyIsImlzQ29tbWl0dGVkIiwidHJhbnNpdGlvbiIsIm5leHRTdGF0ZSIsIm5leHRTdGF0ZXMiLCJpbmNsdWRlcyIsInVucGluU2VydmVyIiwiTW9uZ29SdW50aW1lRXJyb3IiLCJwaW5TZXJ2ZXIiLCJjb21tYW5kIiwiY29tbWl0VHJhbnNhY3Rpb24iLCJhYm9ydFRyYW5zYWN0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/transactions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/utils.js":
/*!*******************************************!*\
  !*** ./node_modules/mongodb/lib/utils.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.matchesParentDomain = exports.parseUnsignedInteger = exports.parseInteger = exports.compareObjectId = exports.getMongoDBClientEncryption = exports.commandSupportsReadConcern = exports.shuffle = exports.supportsRetryableWrites = exports.enumToString = exports.emitWarningOnce = exports.emitWarning = exports.MONGODB_WARNING_CODE = exports.DEFAULT_PK_FACTORY = exports.HostAddress = exports.BufferPool = exports.List = exports.deepCopy = exports.isRecord = exports.setDifference = exports.isHello = exports.isSuperset = exports.resolveOptions = exports.hasAtomicOperators = exports.calculateDurationInMs = exports.now = exports.makeStateMachine = exports.errorStrictEqual = exports.arrayStrictEqual = exports.eachAsync = exports.maxWireVersion = exports.uuidV4 = exports.databaseNamespace = exports.maybeCallback = exports.makeCounter = exports.MongoDBCollectionNamespace = exports.MongoDBNamespace = exports.ns = exports.getTopology = exports.decorateWithExplain = exports.decorateWithReadConcern = exports.decorateWithCollation = exports.isPromiseLike = exports.applyRetryableWrites = exports.filterOptions = exports.mergeOptions = exports.isObject = exports.normalizeHintField = exports.checkCollectionName = exports.hostMatchesWildcards = exports.ByteUtils = void 0;\nexports.request = void 0;\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nconst http = __webpack_require__(/*! http */ \"http\");\nconst url = __webpack_require__(/*! url */ \"url\");\nconst url_1 = __webpack_require__(/*! url */ \"url\");\nconst bson_1 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst constants_1 = __webpack_require__(/*! ./cmap/wire_protocol/constants */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js\");\nconst constants_2 = __webpack_require__(/*! ./constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_concern_1 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst common_1 = __webpack_require__(/*! ./sdam/common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst write_concern_1 = __webpack_require__(/*! ./write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nexports.ByteUtils = {\n    toLocalBufferType (buffer) {\n        return Buffer.isBuffer(buffer) ? buffer : Buffer.from(buffer.buffer, buffer.byteOffset, buffer.byteLength);\n    },\n    equals (seqA, seqB) {\n        return exports.ByteUtils.toLocalBufferType(seqA).equals(seqB);\n    },\n    compare (seqA, seqB) {\n        return exports.ByteUtils.toLocalBufferType(seqA).compare(seqB);\n    },\n    toBase64 (uint8array) {\n        return exports.ByteUtils.toLocalBufferType(uint8array).toString(\"base64\");\n    }\n};\n/**\n * Determines if a connection's address matches a user provided list\n * of domain wildcards.\n */ function hostMatchesWildcards(host, wildcards) {\n    for (const wildcard of wildcards){\n        if (host === wildcard || wildcard.startsWith(\"*.\") && host?.endsWith(wildcard.substring(2, wildcard.length)) || wildcard.startsWith(\"*/\") && host?.endsWith(wildcard.substring(2, wildcard.length))) {\n            return true;\n        }\n    }\n    return false;\n}\nexports.hostMatchesWildcards = hostMatchesWildcards;\n/**\n * Throws if collectionName is not a valid mongodb collection namespace.\n * @internal\n */ function checkCollectionName(collectionName) {\n    if (\"string\" !== typeof collectionName) {\n        throw new error_1.MongoInvalidArgumentError(\"Collection name must be a String\");\n    }\n    if (!collectionName || collectionName.indexOf(\"..\") !== -1) {\n        throw new error_1.MongoInvalidArgumentError(\"Collection names cannot be empty\");\n    }\n    if (collectionName.indexOf(\"$\") !== -1 && collectionName.match(/((^\\$cmd)|(oplog\\.\\$main))/) == null) {\n        // TODO(NODE-3483): Use MongoNamespace static method\n        throw new error_1.MongoInvalidArgumentError(\"Collection names must not contain '$'\");\n    }\n    if (collectionName.match(/^\\.|\\.$/) != null) {\n        // TODO(NODE-3483): Use MongoNamespace static method\n        throw new error_1.MongoInvalidArgumentError(\"Collection names must not start or end with '.'\");\n    }\n    // Validate that we are not passing 0x00 in the collection name\n    if (collectionName.indexOf(\"\\x00\") !== -1) {\n        // TODO(NODE-3483): Use MongoNamespace static method\n        throw new error_1.MongoInvalidArgumentError(\"Collection names cannot contain a null character\");\n    }\n}\nexports.checkCollectionName = checkCollectionName;\n/**\n * Ensure Hint field is in a shape we expect:\n * - object of index names mapping to 1 or -1\n * - just an index name\n * @internal\n */ function normalizeHintField(hint) {\n    let finalHint = undefined;\n    if (typeof hint === \"string\") {\n        finalHint = hint;\n    } else if (Array.isArray(hint)) {\n        finalHint = {};\n        hint.forEach((param)=>{\n            finalHint[param] = 1;\n        });\n    } else if (hint != null && typeof hint === \"object\") {\n        finalHint = {};\n        for(const name in hint){\n            finalHint[name] = hint[name];\n        }\n    }\n    return finalHint;\n}\nexports.normalizeHintField = normalizeHintField;\nconst TO_STRING = (object)=>Object.prototype.toString.call(object);\n/**\n * Checks if arg is an Object:\n * - **NOTE**: the check is based on the `[Symbol.toStringTag]() === 'Object'`\n * @internal\n */ function isObject(arg) {\n    return \"[object Object]\" === TO_STRING(arg);\n}\nexports.isObject = isObject;\n/** @internal */ function mergeOptions(target, source) {\n    return {\n        ...target,\n        ...source\n    };\n}\nexports.mergeOptions = mergeOptions;\n/** @internal */ function filterOptions(options, names) {\n    const filterOptions = {};\n    for(const name in options){\n        if (names.includes(name)) {\n            filterOptions[name] = options[name];\n        }\n    }\n    // Filtered options\n    return filterOptions;\n}\nexports.filterOptions = filterOptions;\n/**\n * Applies retryWrites: true to a command if retryWrites is set on the command's database.\n * @internal\n *\n * @param target - The target command to which we will apply retryWrites.\n * @param db - The database from which we can inherit a retryWrites value.\n */ function applyRetryableWrites(target, db) {\n    if (db && db.s.options?.retryWrites) {\n        target.retryWrites = true;\n    }\n    return target;\n}\nexports.applyRetryableWrites = applyRetryableWrites;\n/**\n * Applies a write concern to a command based on well defined inheritance rules, optionally\n * detecting support for the write concern in the first place.\n * @internal\n *\n * @param target - the target command we will be applying the write concern to\n * @param sources - sources where we can inherit default write concerns from\n * @param options - optional settings passed into a command for write concern overrides\n */ /**\n * Checks if a given value is a Promise\n *\n * @typeParam T - The resolution type of the possible promise\n * @param value - An object that could be a promise\n * @returns true if the provided value is a Promise\n */ function isPromiseLike(value) {\n    return !!value && typeof value.then === \"function\";\n}\nexports.isPromiseLike = isPromiseLike;\n/**\n * Applies collation to a given command.\n * @internal\n *\n * @param command - the command on which to apply collation\n * @param target - target of command\n * @param options - options containing collation settings\n */ function decorateWithCollation(command, target, options) {\n    const capabilities = getTopology(target).capabilities;\n    if (options.collation && typeof options.collation === \"object\") {\n        if (capabilities && capabilities.commandsTakeCollation) {\n            command.collation = options.collation;\n        } else {\n            throw new error_1.MongoCompatibilityError(`Current topology does not support collation`);\n        }\n    }\n}\nexports.decorateWithCollation = decorateWithCollation;\n/**\n * Applies a read concern to a given command.\n * @internal\n *\n * @param command - the command on which to apply the read concern\n * @param coll - the parent collection of the operation calling this method\n */ function decorateWithReadConcern(command, coll, options) {\n    if (options && options.session && options.session.inTransaction()) {\n        return;\n    }\n    const readConcern = Object.assign({}, command.readConcern || {});\n    if (coll.s.readConcern) {\n        Object.assign(readConcern, coll.s.readConcern);\n    }\n    if (Object.keys(readConcern).length > 0) {\n        Object.assign(command, {\n            readConcern: readConcern\n        });\n    }\n}\nexports.decorateWithReadConcern = decorateWithReadConcern;\n/**\n * Applies an explain to a given command.\n * @internal\n *\n * @param command - the command on which to apply the explain\n * @param options - the options containing the explain verbosity\n */ function decorateWithExplain(command, explain) {\n    if (command.explain) {\n        return command;\n    }\n    return {\n        explain: command,\n        verbosity: explain.verbosity\n    };\n}\nexports.decorateWithExplain = decorateWithExplain;\n/**\n * A helper function to get the topology from a given provider. Throws\n * if the topology cannot be found.\n * @throws MongoNotConnectedError\n * @internal\n */ function getTopology(provider) {\n    // MongoClient or ClientSession or AbstractCursor\n    if (\"topology\" in provider && provider.topology) {\n        return provider.topology;\n    } else if (\"client\" in provider && provider.client.topology) {\n        return provider.client.topology;\n    }\n    throw new error_1.MongoNotConnectedError(\"MongoClient must be connected to perform this operation\");\n}\nexports.getTopology = getTopology;\n/** @internal */ function ns(ns) {\n    return MongoDBNamespace.fromString(ns);\n}\nexports.ns = ns;\n/** @public */ class MongoDBNamespace {\n    /**\n     * Create a namespace object\n     *\n     * @param db - database name\n     * @param collection - collection name\n     */ constructor(db, collection){\n        this.db = db;\n        this.collection = collection;\n        this.collection = collection === \"\" ? undefined : collection;\n    }\n    toString() {\n        return this.collection ? `${this.db}.${this.collection}` : this.db;\n    }\n    withCollection(collection) {\n        return new MongoDBCollectionNamespace(this.db, collection);\n    }\n    static fromString(namespace) {\n        if (typeof namespace !== \"string\" || namespace === \"\") {\n            // TODO(NODE-3483): Replace with MongoNamespaceError\n            throw new error_1.MongoRuntimeError(`Cannot parse namespace from \"${namespace}\"`);\n        }\n        const [db, ...collectionParts] = namespace.split(\".\");\n        const collection = collectionParts.join(\".\");\n        return new MongoDBNamespace(db, collection === \"\" ? undefined : collection);\n    }\n}\nexports.MongoDBNamespace = MongoDBNamespace;\n/**\n * @public\n *\n * A class representing a collection's namespace.  This class enforces (through Typescript) that\n * the `collection` portion of the namespace is defined and should only be\n * used in scenarios where this can be guaranteed.\n */ class MongoDBCollectionNamespace extends MongoDBNamespace {\n    constructor(db, collection){\n        super(db, collection);\n        this.collection = collection;\n    }\n}\nexports.MongoDBCollectionNamespace = MongoDBCollectionNamespace;\n/** @internal */ function* makeCounter(seed = 0) {\n    let count = seed;\n    while(true){\n        const newCount = count;\n        count += 1;\n        yield newCount;\n    }\n}\nexports.makeCounter = makeCounter;\nfunction maybeCallback(promiseFn, callback) {\n    const promise = promiseFn();\n    if (callback == null) {\n        return promise;\n    }\n    promise.then((result)=>callback(undefined, result), (error)=>callback(error));\n    return;\n}\nexports.maybeCallback = maybeCallback;\n/** @internal */ function databaseNamespace(ns) {\n    return ns.split(\".\")[0];\n}\nexports.databaseNamespace = databaseNamespace;\n/**\n * Synchronously Generate a UUIDv4\n * @internal\n */ function uuidV4() {\n    const result = crypto.randomBytes(16);\n    result[6] = result[6] & 0x0f | 0x40;\n    result[8] = result[8] & 0x3f | 0x80;\n    return result;\n}\nexports.uuidV4 = uuidV4;\n/**\n * A helper function for determining `maxWireVersion` between legacy and new topology instances\n * @internal\n */ function maxWireVersion(topologyOrServer) {\n    if (topologyOrServer) {\n        if (topologyOrServer.loadBalanced) {\n            // Since we do not have a monitor, we assume the load balanced server is always\n            // pointed at the latest mongodb version. There is a risk that for on-prem\n            // deployments that don't upgrade immediately that this could alert to the\n            // application that a feature is available that is actually not.\n            return constants_1.MAX_SUPPORTED_WIRE_VERSION;\n        }\n        if (topologyOrServer.hello) {\n            return topologyOrServer.hello.maxWireVersion;\n        }\n        if (\"lastHello\" in topologyOrServer && typeof topologyOrServer.lastHello === \"function\") {\n            const lastHello = topologyOrServer.lastHello();\n            if (lastHello) {\n                return lastHello.maxWireVersion;\n            }\n        }\n        if (topologyOrServer.description && \"maxWireVersion\" in topologyOrServer.description && topologyOrServer.description.maxWireVersion != null) {\n            return topologyOrServer.description.maxWireVersion;\n        }\n    }\n    return 0;\n}\nexports.maxWireVersion = maxWireVersion;\n/**\n * Applies the function `eachFn` to each item in `arr`, in parallel.\n * @internal\n *\n * @param arr - An array of items to asynchronously iterate over\n * @param eachFn - A function to call on each item of the array. The callback signature is `(item, callback)`, where the callback indicates iteration is complete.\n * @param callback - The callback called after every item has been iterated\n */ function eachAsync(arr, eachFn, callback) {\n    arr = arr || [];\n    let idx = 0;\n    let awaiting = 0;\n    for(idx = 0; idx < arr.length; ++idx){\n        awaiting++;\n        eachFn(arr[idx], eachCallback);\n    }\n    if (awaiting === 0) {\n        callback();\n        return;\n    }\n    function eachCallback(err) {\n        awaiting--;\n        if (err) {\n            callback(err);\n            return;\n        }\n        if (idx === arr.length && awaiting <= 0) {\n            callback();\n        }\n    }\n}\nexports.eachAsync = eachAsync;\n/** @internal */ function arrayStrictEqual(arr, arr2) {\n    if (!Array.isArray(arr) || !Array.isArray(arr2)) {\n        return false;\n    }\n    return arr.length === arr2.length && arr.every((elt, idx)=>elt === arr2[idx]);\n}\nexports.arrayStrictEqual = arrayStrictEqual;\n/** @internal */ function errorStrictEqual(lhs, rhs) {\n    if (lhs === rhs) {\n        return true;\n    }\n    if (!lhs || !rhs) {\n        return lhs === rhs;\n    }\n    if (lhs == null && rhs != null || lhs != null && rhs == null) {\n        return false;\n    }\n    if (lhs.constructor.name !== rhs.constructor.name) {\n        return false;\n    }\n    if (lhs.message !== rhs.message) {\n        return false;\n    }\n    return true;\n}\nexports.errorStrictEqual = errorStrictEqual;\n/** @internal */ function makeStateMachine(stateTable) {\n    return function stateTransition(target, newState) {\n        const legalStates = stateTable[target.s.state];\n        if (legalStates && legalStates.indexOf(newState) < 0) {\n            throw new error_1.MongoRuntimeError(`illegal state transition from [${target.s.state}] => [${newState}], allowed: [${legalStates}]`);\n        }\n        target.emit(\"stateChanged\", target.s.state, newState);\n        target.s.state = newState;\n    };\n}\nexports.makeStateMachine = makeStateMachine;\n/** @internal */ function now() {\n    const hrtime = process.hrtime();\n    return Math.floor(hrtime[0] * 1000 + hrtime[1] / 1000000);\n}\nexports.now = now;\n/** @internal */ function calculateDurationInMs(started) {\n    if (typeof started !== \"number\") {\n        throw new error_1.MongoInvalidArgumentError(\"Numeric value required to calculate duration\");\n    }\n    const elapsed = now() - started;\n    return elapsed < 0 ? 0 : elapsed;\n}\nexports.calculateDurationInMs = calculateDurationInMs;\n/** @internal */ function hasAtomicOperators(doc) {\n    if (Array.isArray(doc)) {\n        for (const document of doc){\n            if (hasAtomicOperators(document)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    const keys = Object.keys(doc);\n    return keys.length > 0 && keys[0][0] === \"$\";\n}\nexports.hasAtomicOperators = hasAtomicOperators;\n/**\n * Merge inherited properties from parent into options, prioritizing values from options,\n * then values from parent.\n * @internal\n */ function resolveOptions(parent, options) {\n    const result = Object.assign({}, options, (0, bson_1.resolveBSONOptions)(options, parent));\n    // Users cannot pass a readConcern/writeConcern to operations in a transaction\n    const session = options?.session;\n    if (!session?.inTransaction()) {\n        const readConcern = read_concern_1.ReadConcern.fromOptions(options) ?? parent?.readConcern;\n        if (readConcern) {\n            result.readConcern = readConcern;\n        }\n        const writeConcern = write_concern_1.WriteConcern.fromOptions(options) ?? parent?.writeConcern;\n        if (writeConcern) {\n            result.writeConcern = writeConcern;\n        }\n    }\n    const readPreference = read_preference_1.ReadPreference.fromOptions(options) ?? parent?.readPreference;\n    if (readPreference) {\n        result.readPreference = readPreference;\n    }\n    return result;\n}\nexports.resolveOptions = resolveOptions;\nfunction isSuperset(set, subset) {\n    set = Array.isArray(set) ? new Set(set) : set;\n    subset = Array.isArray(subset) ? new Set(subset) : subset;\n    for (const elem of subset){\n        if (!set.has(elem)) {\n            return false;\n        }\n    }\n    return true;\n}\nexports.isSuperset = isSuperset;\n/**\n * Checks if the document is a Hello request\n * @internal\n */ function isHello(doc) {\n    return doc[constants_2.LEGACY_HELLO_COMMAND] || doc.hello ? true : false;\n}\nexports.isHello = isHello;\n/** Returns the items that are uniquely in setA */ function setDifference(setA, setB) {\n    const difference = new Set(setA);\n    for (const elem of setB){\n        difference.delete(elem);\n    }\n    return difference;\n}\nexports.setDifference = setDifference;\nconst HAS_OWN = (object, prop)=>Object.prototype.hasOwnProperty.call(object, prop);\nfunction isRecord(value, requiredKeys = undefined) {\n    if (!isObject(value)) {\n        return false;\n    }\n    const ctor = value.constructor;\n    if (ctor && ctor.prototype) {\n        if (!isObject(ctor.prototype)) {\n            return false;\n        }\n        // Check to see if some method exists from the Object exists\n        if (!HAS_OWN(ctor.prototype, \"isPrototypeOf\")) {\n            return false;\n        }\n    }\n    if (requiredKeys) {\n        const keys = Object.keys(value);\n        return isSuperset(keys, requiredKeys);\n    }\n    return true;\n}\nexports.isRecord = isRecord;\n/**\n * Make a deep copy of an object\n *\n * NOTE: This is not meant to be the perfect implementation of a deep copy,\n * but instead something that is good enough for the purposes of\n * command monitoring.\n */ function deepCopy(value) {\n    if (value == null) {\n        return value;\n    } else if (Array.isArray(value)) {\n        return value.map((item)=>deepCopy(item));\n    } else if (isRecord(value)) {\n        const res = {};\n        for(const key in value){\n            res[key] = deepCopy(value[key]);\n        }\n        return res;\n    }\n    const ctor = value.constructor;\n    if (ctor) {\n        switch(ctor.name.toLowerCase()){\n            case \"date\":\n                return new ctor(Number(value));\n            case \"map\":\n                return new Map(value);\n            case \"set\":\n                return new Set(value);\n            case \"buffer\":\n                return Buffer.from(value);\n        }\n    }\n    return value;\n}\nexports.deepCopy = deepCopy;\n/**\n * A sequential list of items in a circularly linked list\n * @remarks\n * The head node is special, it is always defined and has a value of null.\n * It is never \"included\" in the list, in that, it is not returned by pop/shift or yielded by the iterator.\n * The circular linkage and always defined head node are to reduce checks for null next/prev references to zero.\n * New nodes are declared as object literals with keys always in the same order: next, prev, value.\n * @internal\n */ class List {\n    get length() {\n        return this.count;\n    }\n    get [Symbol.toStringTag]() {\n        return \"List\";\n    }\n    constructor(){\n        this.count = 0;\n        // this is carefully crafted:\n        // declaring a complete and consistently key ordered\n        // object is beneficial to the runtime optimizations\n        this.head = {\n            next: null,\n            prev: null,\n            value: null\n        };\n        this.head.next = this.head;\n        this.head.prev = this.head;\n    }\n    toArray() {\n        return Array.from(this);\n    }\n    toString() {\n        return `head <=> ${this.toArray().join(\" <=> \")} <=> head`;\n    }\n    *[Symbol.iterator]() {\n        for (const node of this.nodes()){\n            yield node.value;\n        }\n    }\n    *nodes() {\n        let ptr = this.head.next;\n        while(ptr !== this.head){\n            // Save next before yielding so that we make removing within iteration safe\n            const { next } = ptr;\n            yield ptr;\n            ptr = next;\n        }\n    }\n    /** Insert at end of list */ push(value) {\n        this.count += 1;\n        const newNode = {\n            next: this.head,\n            prev: this.head.prev,\n            value\n        };\n        this.head.prev.next = newNode;\n        this.head.prev = newNode;\n    }\n    /** Inserts every item inside an iterable instead of the iterable itself */ pushMany(iterable) {\n        for (const value of iterable){\n            this.push(value);\n        }\n    }\n    /** Insert at front of list */ unshift(value) {\n        this.count += 1;\n        const newNode = {\n            next: this.head.next,\n            prev: this.head,\n            value\n        };\n        this.head.next.prev = newNode;\n        this.head.next = newNode;\n    }\n    remove(node) {\n        if (node === this.head || this.length === 0) {\n            return null;\n        }\n        this.count -= 1;\n        const prevNode = node.prev;\n        const nextNode = node.next;\n        prevNode.next = nextNode;\n        nextNode.prev = prevNode;\n        return node.value;\n    }\n    /** Removes the first node at the front of the list */ shift() {\n        return this.remove(this.head.next);\n    }\n    /** Removes the last node at the end of the list */ pop() {\n        return this.remove(this.head.prev);\n    }\n    /** Iterates through the list and removes nodes where filter returns true */ prune(filter) {\n        for (const node of this.nodes()){\n            if (filter(node.value)) {\n                this.remove(node);\n            }\n        }\n    }\n    clear() {\n        this.count = 0;\n        this.head.next = this.head;\n        this.head.prev = this.head;\n    }\n    /** Returns the first item in the list, does not remove */ first() {\n        // If the list is empty, value will be the head's null\n        return this.head.next.value;\n    }\n    /** Returns the last item in the list, does not remove */ last() {\n        // If the list is empty, value will be the head's null\n        return this.head.prev.value;\n    }\n}\nexports.List = List;\n/**\n * A pool of Buffers which allow you to read them as if they were one\n * @internal\n */ class BufferPool {\n    constructor(){\n        this.buffers = new List();\n        this.totalByteLength = 0;\n    }\n    get length() {\n        return this.totalByteLength;\n    }\n    /** Adds a buffer to the internal buffer pool list */ append(buffer) {\n        this.buffers.push(buffer);\n        this.totalByteLength += buffer.length;\n    }\n    /**\n     * If BufferPool contains 4 bytes or more construct an int32 from the leading bytes,\n     * otherwise return null. Size can be negative, caller should error check.\n     */ getInt32() {\n        if (this.totalByteLength < 4) {\n            return null;\n        }\n        const firstBuffer = this.buffers.first();\n        if (firstBuffer != null && firstBuffer.byteLength >= 4) {\n            return firstBuffer.readInt32LE(0);\n        }\n        // Unlikely case: an int32 is split across buffers.\n        // Use read and put the returned buffer back on top\n        const top4Bytes = this.read(4);\n        const value = top4Bytes.readInt32LE(0);\n        // Put it back.\n        this.totalByteLength += 4;\n        this.buffers.unshift(top4Bytes);\n        return value;\n    }\n    /** Reads the requested number of bytes, optionally consuming them */ read(size) {\n        if (typeof size !== \"number\" || size < 0) {\n            throw new error_1.MongoInvalidArgumentError('Argument \"size\" must be a non-negative number');\n        }\n        // oversized request returns empty buffer\n        if (size > this.totalByteLength) {\n            return Buffer.alloc(0);\n        }\n        // We know we have enough, we just don't know how it is spread across chunks\n        // TODO(NODE-4732): alloc API should change based on raw option\n        const result = Buffer.allocUnsafe(size);\n        for(let bytesRead = 0; bytesRead < size;){\n            const buffer = this.buffers.shift();\n            if (buffer == null) {\n                break;\n            }\n            const bytesRemaining = size - bytesRead;\n            const bytesReadable = Math.min(bytesRemaining, buffer.byteLength);\n            const bytes = buffer.subarray(0, bytesReadable);\n            result.set(bytes, bytesRead);\n            bytesRead += bytesReadable;\n            this.totalByteLength -= bytesReadable;\n            if (bytesReadable < buffer.byteLength) {\n                this.buffers.unshift(buffer.subarray(bytesReadable));\n            }\n        }\n        return result;\n    }\n}\nexports.BufferPool = BufferPool;\n/** @public */ class HostAddress {\n    constructor(hostString){\n        this.host = undefined;\n        this.port = undefined;\n        this.socketPath = undefined;\n        this.isIPv6 = false;\n        const escapedHost = hostString.split(\" \").join(\"%20\"); // escape spaces, for socket path hosts\n        if (escapedHost.endsWith(\".sock\")) {\n            // heuristically determine if we're working with a domain socket\n            this.socketPath = decodeURIComponent(escapedHost);\n            return;\n        }\n        const urlString = `iLoveJS://${escapedHost}`;\n        let url;\n        try {\n            url = new url_1.URL(urlString);\n        } catch (urlError) {\n            const runtimeError = new error_1.MongoRuntimeError(`Unable to parse ${escapedHost} with URL`);\n            runtimeError.cause = urlError;\n            throw runtimeError;\n        }\n        const hostname = url.hostname;\n        const port = url.port;\n        let normalized = decodeURIComponent(hostname).toLowerCase();\n        if (normalized.startsWith(\"[\") && normalized.endsWith(\"]\")) {\n            this.isIPv6 = true;\n            normalized = normalized.substring(1, hostname.length - 1);\n        }\n        this.host = normalized.toLowerCase();\n        if (typeof port === \"number\") {\n            this.port = port;\n        } else if (typeof port === \"string\" && port !== \"\") {\n            this.port = Number.parseInt(port, 10);\n        } else {\n            this.port = 27017;\n        }\n        if (this.port === 0) {\n            throw new error_1.MongoParseError(\"Invalid port (zero) with hostname\");\n        }\n        Object.freeze(this);\n    }\n    [Symbol.for(\"nodejs.util.inspect.custom\")]() {\n        return this.inspect();\n    }\n    inspect() {\n        return `new HostAddress('${this.toString()}')`;\n    }\n    toString() {\n        if (typeof this.host === \"string\") {\n            if (this.isIPv6) {\n                return `[${this.host}]:${this.port}`;\n            }\n            return `${this.host}:${this.port}`;\n        }\n        return `${this.socketPath}`;\n    }\n    static fromString(s) {\n        return new HostAddress(s);\n    }\n    static fromHostPort(host, port) {\n        if (host.includes(\":\")) {\n            host = `[${host}]`; // IPv6 address\n        }\n        return HostAddress.fromString(`${host}:${port}`);\n    }\n    static fromSrvRecord({ name, port }) {\n        return HostAddress.fromHostPort(name, port);\n    }\n    toHostPort() {\n        if (this.socketPath) {\n            return {\n                host: this.socketPath,\n                port: 0\n            };\n        }\n        const host = this.host ?? \"\";\n        const port = this.port ?? 0;\n        return {\n            host,\n            port\n        };\n    }\n}\nexports.HostAddress = HostAddress;\nexports.DEFAULT_PK_FACTORY = {\n    // We prefer not to rely on ObjectId having a createPk method\n    createPk () {\n        return new bson_1.ObjectId();\n    }\n};\n/**\n * When the driver used emitWarning the code will be equal to this.\n * @public\n *\n * @example\n * ```ts\n * process.on('warning', (warning) => {\n *  if (warning.code === MONGODB_WARNING_CODE) console.error('Ah an important warning! :)')\n * })\n * ```\n */ exports.MONGODB_WARNING_CODE = \"MONGODB DRIVER\";\n/** @internal */ function emitWarning(message) {\n    return process.emitWarning(message, {\n        code: exports.MONGODB_WARNING_CODE\n    });\n}\nexports.emitWarning = emitWarning;\nconst emittedWarnings = new Set();\n/**\n * Will emit a warning once for the duration of the application.\n * Uses the message to identify if it has already been emitted\n * so using string interpolation can cause multiple emits\n * @internal\n */ function emitWarningOnce(message) {\n    if (!emittedWarnings.has(message)) {\n        emittedWarnings.add(message);\n        return emitWarning(message);\n    }\n}\nexports.emitWarningOnce = emitWarningOnce;\n/**\n * Takes a JS object and joins the values into a string separated by ', '\n */ function enumToString(en) {\n    return Object.values(en).join(\", \");\n}\nexports.enumToString = enumToString;\n/**\n * Determine if a server supports retryable writes.\n *\n * @internal\n */ function supportsRetryableWrites(server) {\n    if (!server) {\n        return false;\n    }\n    if (server.loadBalanced) {\n        // Loadbalanced topologies will always support retry writes\n        return true;\n    }\n    if (server.description.logicalSessionTimeoutMinutes != null) {\n        // that supports sessions\n        if (server.description.type !== common_1.ServerType.Standalone) {\n            // and that is not a standalone\n            return true;\n        }\n    }\n    return false;\n}\nexports.supportsRetryableWrites = supportsRetryableWrites;\n/**\n * FisherYates Shuffle\n *\n * Reference: https://bost.ocks.org/mike/shuffle/\n * @param sequence - items to be shuffled\n * @param limit - Defaults to `0`. If nonzero shuffle will slice the randomized array e.g, `.slice(0, limit)` otherwise will return the entire randomized array.\n */ function shuffle(sequence, limit = 0) {\n    const items = Array.from(sequence); // shallow copy in order to never shuffle the input\n    if (limit > items.length) {\n        throw new error_1.MongoRuntimeError(\"Limit must be less than the number of items\");\n    }\n    let remainingItemsToShuffle = items.length;\n    const lowerBound = limit % items.length === 0 ? 1 : items.length - limit;\n    while(remainingItemsToShuffle > lowerBound){\n        // Pick a remaining element\n        const randomIndex = Math.floor(Math.random() * remainingItemsToShuffle);\n        remainingItemsToShuffle -= 1;\n        // And swap it with the current element\n        const swapHold = items[remainingItemsToShuffle];\n        items[remainingItemsToShuffle] = items[randomIndex];\n        items[randomIndex] = swapHold;\n    }\n    return limit % items.length === 0 ? items : items.slice(lowerBound);\n}\nexports.shuffle = shuffle;\n// TODO(NODE-4936): read concern eligibility for commands should be codified in command construction\n// @see https://github.com/mongodb/specifications/blob/master/source/read-write-concern/read-write-concern.rst#read-concern\nfunction commandSupportsReadConcern(command, options) {\n    if (command.aggregate || command.count || command.distinct || command.find || command.geoNear) {\n        return true;\n    }\n    if (command.mapReduce && options && options.out && (options.out.inline === 1 || options.out === \"inline\")) {\n        return true;\n    }\n    return false;\n}\nexports.commandSupportsReadConcern = commandSupportsReadConcern;\n/** A utility function to get the instance of mongodb-client-encryption, if it exists. */ function getMongoDBClientEncryption() {\n    let mongodbClientEncryption = null;\n    // NOTE(NODE-4254): This is to get around the circular dependency between\n    // mongodb-client-encryption and the driver in the test scenarios.\n    if (typeof process.env.MONGODB_CLIENT_ENCRYPTION_OVERRIDE === \"string\" && process.env.MONGODB_CLIENT_ENCRYPTION_OVERRIDE.length > 0) {\n        try {\n            // NOTE(NODE-3199): Ensure you always wrap an optional require literally in the try block\n            // Cannot be moved to helper utility function, bundlers search and replace the actual require call\n            // in a way that makes this line throw at bundle time, not runtime, catching here will make bundling succeed\n            mongodbClientEncryption = __webpack_require__(\"(ssr)/./node_modules/mongodb/lib sync recursive\")(process.env.MONGODB_CLIENT_ENCRYPTION_OVERRIDE);\n        } catch  {\n        // ignore\n        }\n    } else {\n        try {\n            // NOTE(NODE-3199): Ensure you always wrap an optional require literally in the try block\n            // Cannot be moved to helper utility function, bundlers search and replace the actual require call\n            // in a way that makes this line throw at bundle time, not runtime, catching here will make bundling succeed\n            mongodbClientEncryption = __webpack_require__(/*! mongodb-client-encryption */ \"?a5d2\");\n        } catch  {\n        // ignore\n        }\n    }\n    return mongodbClientEncryption;\n}\nexports.getMongoDBClientEncryption = getMongoDBClientEncryption;\n/**\n * Compare objectIds. `null` is always less\n * - `+1 = oid1 is greater than oid2`\n * - `-1 = oid1 is less than oid2`\n * - `+0 = oid1 is equal oid2`\n */ function compareObjectId(oid1, oid2) {\n    if (oid1 == null && oid2 == null) {\n        return 0;\n    }\n    if (oid1 == null) {\n        return -1;\n    }\n    if (oid2 == null) {\n        return 1;\n    }\n    return exports.ByteUtils.compare(oid1.id, oid2.id);\n}\nexports.compareObjectId = compareObjectId;\nfunction parseInteger(value) {\n    if (typeof value === \"number\") return Math.trunc(value);\n    const parsedValue = Number.parseInt(String(value), 10);\n    return Number.isNaN(parsedValue) ? null : parsedValue;\n}\nexports.parseInteger = parseInteger;\nfunction parseUnsignedInteger(value) {\n    const parsedInt = parseInteger(value);\n    return parsedInt != null && parsedInt >= 0 ? parsedInt : null;\n}\nexports.parseUnsignedInteger = parseUnsignedInteger;\n/**\n * Determines whether a provided address matches the provided parent domain.\n *\n * If a DNS server were to become compromised SRV records would still need to\n * advertise addresses that are under the same domain as the srvHost.\n *\n * @param address - The address to check against a domain\n * @param srvHost - The domain to check the provided address against\n * @returns Whether the provided address matches the parent domain\n */ function matchesParentDomain(address, srvHost) {\n    // Remove trailing dot if exists on either the resolved address or the srv hostname\n    const normalizedAddress = address.endsWith(\".\") ? address.slice(0, address.length - 1) : address;\n    const normalizedSrvHost = srvHost.endsWith(\".\") ? srvHost.slice(0, srvHost.length - 1) : srvHost;\n    const allCharacterBeforeFirstDot = /^.*?\\./;\n    // Remove all characters before first dot\n    // Add leading dot back to string so\n    //   an srvHostDomain = '.trusted.site'\n    //   will not satisfy an addressDomain that endsWith '.fake-trusted.site'\n    const addressDomain = `.${normalizedAddress.replace(allCharacterBeforeFirstDot, \"\")}`;\n    const srvHostDomain = `.${normalizedSrvHost.replace(allCharacterBeforeFirstDot, \"\")}`;\n    return addressDomain.endsWith(srvHostDomain);\n}\nexports.matchesParentDomain = matchesParentDomain;\nasync function request(uri, options = {}) {\n    return new Promise((resolve, reject)=>{\n        const requestOptions = {\n            method: \"GET\",\n            timeout: 10000,\n            json: true,\n            ...url.parse(uri),\n            ...options\n        };\n        const req = http.request(requestOptions, (res)=>{\n            res.setEncoding(\"utf8\");\n            let data = \"\";\n            res.on(\"data\", (d)=>{\n                data += d;\n            });\n            res.once(\"end\", ()=>{\n                if (options.json === false) {\n                    resolve(data);\n                    return;\n                }\n                try {\n                    const parsed = JSON.parse(data);\n                    resolve(parsed);\n                } catch  {\n                    // TODO(NODE-3483)\n                    reject(new error_1.MongoRuntimeError(`Invalid JSON response: \"${data}\"`));\n                }\n            });\n        });\n        req.once(\"timeout\", ()=>req.destroy(new error_1.MongoNetworkTimeoutError(`Network request to ${uri} timed out after ${options.timeout} ms`)));\n        req.once(\"error\", (error)=>reject(error));\n        req.end();\n    });\n}\nexports.request = request; //# sourceMappingURL=utils.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvdXRpbHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDJCQUEyQixHQUFHQSw0QkFBNEIsR0FBR0Esb0JBQW9CLEdBQUdBLHVCQUF1QixHQUFHQSxrQ0FBa0MsR0FBR0Esa0NBQWtDLEdBQUdBLGVBQWUsR0FBR0EsK0JBQStCLEdBQUdBLG9CQUFvQixHQUFHQSx1QkFBdUIsR0FBR0EsbUJBQW1CLEdBQUdBLDRCQUE0QixHQUFHQSwwQkFBMEIsR0FBR0EsbUJBQW1CLEdBQUdBLGtCQUFrQixHQUFHQSxZQUFZLEdBQUdBLGdCQUFnQixHQUFHQSxnQkFBZ0IsR0FBR0EscUJBQXFCLEdBQUdBLGVBQWUsR0FBR0Esa0JBQWtCLEdBQUdBLHNCQUFzQixHQUFHQSwwQkFBMEIsR0FBR0EsNkJBQTZCLEdBQUdBLFdBQVcsR0FBR0Esd0JBQXdCLEdBQUdBLHdCQUF3QixHQUFHQSx3QkFBd0IsR0FBR0EsaUJBQWlCLEdBQUdBLHNCQUFzQixHQUFHQSxjQUFjLEdBQUdBLHlCQUF5QixHQUFHQSxxQkFBcUIsR0FBR0EsbUJBQW1CLEdBQUdBLGtDQUFrQyxHQUFHQSx3QkFBd0IsR0FBR0EsVUFBVSxHQUFHQSxtQkFBbUIsR0FBR0EsMkJBQTJCLEdBQUdBLCtCQUErQixHQUFHQSw2QkFBNkIsR0FBR0EscUJBQXFCLEdBQUdBLDRCQUE0QixHQUFHQSxxQkFBcUIsR0FBR0Esb0JBQW9CLEdBQUdBLGdCQUFnQixHQUFHQSwwQkFBMEIsR0FBR0EsMkJBQTJCLEdBQUdBLDRCQUE0QixHQUFHQSxpQkFBaUIsR0FBRyxLQUFLO0FBQzF2Q0EsZUFBZSxHQUFHLEtBQUs7QUFDdkIsTUFBTXFELFNBQVNDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQy9CLE1BQU1DLE9BQU9ELG1CQUFPQSxDQUFDLGtCQUFNO0FBQzNCLE1BQU1FLE1BQU1GLG1CQUFPQSxDQUFDLGdCQUFL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QyxDQUFDLHdCQUF3QixFQUFFb00sS0FBSyxDQUFDLENBQUM7Z0JBQzNFO1lBQ0o7UUFDSjtRQUNBRixJQUFJSyxJQUFJLENBQUMsV0FBVyxJQUFNTCxJQUFJUSxPQUFPLENBQUMsSUFBSXBSLFFBQVFxUix3QkFBd0IsQ0FBQyxDQUFDLG1CQUFtQixFQUFFbEIsSUFBSSxpQkFBaUIsRUFBRXROLFFBQVE0TixPQUFPLENBQUMsR0FBRyxDQUFDO1FBQzVJRyxJQUFJSyxJQUFJLENBQUMsU0FBUzVMLENBQUFBLFFBQVNpTCxPQUFPakw7UUFDbEN1TCxJQUFJVSxHQUFHO0lBQ1g7QUFDSjtBQUNBblYsZUFBZSxHQUFHb0QsU0FDbEIsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXJlZ2lzdGVyLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL3V0aWxzLmpzP2RjZmEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm1hdGNoZXNQYXJlbnREb21haW4gPSBleHBvcnRzLnBhcnNlVW5zaWduZWRJbnRlZ2VyID0gZXhwb3J0cy5wYXJzZUludGVnZXIgPSBleHBvcnRzLmNvbXBhcmVPYmplY3RJZCA9IGV4cG9ydHMuZ2V0TW9uZ29EQkNsaWVudEVuY3J5cHRpb24gPSBleHBvcnRzLmNvbW1hbmRTdXBwb3J0c1JlYWRDb25jZXJuID0gZXhwb3J0cy5zaHVmZmxlID0gZXhwb3J0cy5zdXBwb3J0c1JldHJ5YWJsZVdyaXRlcyA9IGV4cG9ydHMuZW51bVRvU3RyaW5nID0gZXhwb3J0cy5lbWl0V2FybmluZ09uY2UgPSBleHBvcnRzLmVtaXRXYXJuaW5nID0gZXhwb3J0cy5NT05HT0RCX1dBUk5JTkdfQ09ERSA9IGV4cG9ydHMuREVGQVVMVF9QS19GQUNUT1JZID0gZXhwb3J0cy5Ib3N0QWRkcmVzcyA9IGV4cG9ydHMuQnVmZmVyUG9vbCA9IGV4cG9ydHMuTGlzdCA9IGV4cG9ydHMuZGVlcENvcHkgPSBleHBvcnRzLmlzUmVjb3JkID0gZXhwb3J0cy5zZXREaWZmZXJlbmNlID0gZXhwb3J0cy5pc0hlbGxvID0gZXhwb3J0cy5pc1N1cGVyc2V0ID0gZXhwb3J0cy5yZXNvbHZlT3B0aW9ucyA9IGV4cG9ydHMuaGFzQXRvbWljT3BlcmF0b3JzID0gZXhwb3J0cy5jYWxjdWxhdGVEdXJhdGlvbkluTXMgPSBleHBvcnRzLm5vdyA9IGV4cG9ydHMubWFrZVN0YXRlTWFjaGluZSA9IGV4cG9ydHMuZXJyb3JTdHJpY3RFcXVhbCA9IGV4cG9ydHMuYXJyYXlTdHJpY3RFcXVhbCA9IGV4cG9ydHMuZWFjaEFzeW5jID0gZXhwb3J0cy5tYXhXaXJlVmVyc2lvbiA9IGV4cG9ydHMudXVpZFY0ID0gZXhwb3J0cy5kYXRhYmFzZU5hbWVzcGFjZSA9IGV4cG9ydHMubWF5YmVDYWxsYmFjayA9IGV4cG9ydHMubWFrZUNvdW50ZXIgPSBleHBvcnRzLk1vbmdvREJDb2xsZWN0aW9uTmFtZXNwYWNlID0gZXhwb3J0cy5Nb25nb0RCTmFtZXNwYWNlID0gZXhwb3J0cy5ucyA9IGV4cG9ydHMuZ2V0VG9wb2xvZ3kgPSBleHBvcnRzLmRlY29yYXRlV2l0aEV4cGxhaW4gPSBleHBvcnRzLmRlY29yYXRlV2l0aFJlYWRDb25jZXJuID0gZXhwb3J0cy5kZWNvcmF0ZVdpdGhDb2xsYXRpb24gPSBleHBvcnRzLmlzUHJvbWlzZUxpa2UgPSBleHBvcnRzLmFwcGx5UmV0cnlhYmxlV3JpdGVzID0gZXhwb3J0cy5maWx0ZXJPcHRpb25zID0gZXhwb3J0cy5tZXJnZU9wdGlvbnMgPSBleHBvcnRzLmlzT2JqZWN0ID0gZXhwb3J0cy5ub3JtYWxpemVIaW50RmllbGQgPSBleHBvcnRzLmNoZWNrQ29sbGVjdGlvbk5hbWUgPSBleHBvcnRzLmhvc3RNYXRjaGVzV2lsZGNhcmRzID0gZXhwb3J0cy5CeXRlVXRpbHMgPSB2b2lkIDA7XG5leHBvcnRzLnJlcXVlc3QgPSB2b2lkIDA7XG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKFwiY3J5cHRvXCIpO1xuY29uc3QgaHR0cCA9IHJlcXVpcmUoXCJodHRwXCIpO1xuY29uc3QgdXJsID0gcmVxdWlyZShcInVybFwiKTtcbmNvbnN0IHVybF8xID0gcmVxdWlyZShcInVybFwiKTtcbmNvbnN0IGJzb25fMSA9IHJlcXVpcmUoXCIuL2Jzb25cIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NtYXAvd2lyZV9wcm90b2NvbC9jb25zdGFudHNcIik7XG5jb25zdCBjb25zdGFudHNfMiA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi9lcnJvclwiKTtcbmNvbnN0IHJlYWRfY29uY2Vybl8xID0gcmVxdWlyZShcIi4vcmVhZF9jb25jZXJuXCIpO1xuY29uc3QgcmVhZF9wcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi9yZWFkX3ByZWZlcmVuY2VcIik7XG5jb25zdCBjb21tb25fMSA9IHJlcXVpcmUoXCIuL3NkYW0vY29tbW9uXCIpO1xuY29uc3Qgd3JpdGVfY29uY2Vybl8xID0gcmVxdWlyZShcIi4vd3JpdGVfY29uY2VyblwiKTtcbmV4cG9ydHMuQnl0ZVV0aWxzID0ge1xuICAgIHRvTG9jYWxCdWZmZXJUeXBlKGJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gQnVmZmVyLmlzQnVmZmVyKGJ1ZmZlcilcbiAgICAgICAgICAgID8gYnVmZmVyXG4gICAgICAgICAgICA6IEJ1ZmZlci5mcm9tKGJ1ZmZlci5idWZmZXIsIGJ1ZmZlci5ieXRlT2Zmc2V0LCBidWZmZXIuYnl0ZUxlbmd0aCk7XG4gICAgfSxcbiAgICBlcXVhbHMoc2VxQSwgc2VxQikge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5CeXRlVXRpbHMudG9Mb2NhbEJ1ZmZlclR5cGUoc2VxQSkuZXF1YWxzKHNlcUIpO1xuICAgIH0sXG4gICAgY29tcGFyZShzZXFBLCBzZXFCKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLkJ5dGVVdGlscy50b0xvY2FsQnVmZmVyVHlwZShzZXFBKS5jb21wYXJlKHNlcUIpO1xuICAgIH0sXG4gICAgdG9CYXNlNjQodWludDhhcnJheSkge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5CeXRlVXRpbHMudG9Mb2NhbEJ1ZmZlclR5cGUodWludDhhcnJheSkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgIH1cbn07XG4vKipcbiAqIERldGVybWluZXMgaWYgYSBjb25uZWN0aW9uJ3MgYWRkcmVzcyBtYXRjaGVzIGEgdXNlciBwcm92aWRlZCBsaXN0XG4gKiBvZiBkb21haW4gd2lsZGNhcmRzLlxuICovXG5mdW5jdGlvbiBob3N0TWF0Y2hlc1dpbGRjYXJkcyhob3N0LCB3aWxkY2FyZHMpIHtcbiAgICBmb3IgKGNvbnN0IHdpbGRjYXJkIG9mIHdpbGRjYXJkcykge1xuICAgICAgICBpZiAoaG9zdCA9PT0gd2lsZGNhcmQgfHxcbiAgICAgICAgICAgICh3aWxkY2FyZC5zdGFydHNXaXRoKCcqLicpICYmIGhvc3Q/LmVuZHNXaXRoKHdpbGRjYXJkLnN1YnN0cmluZygyLCB3aWxkY2FyZC5sZW5ndGgpKSkgfHxcbiAgICAgICAgICAgICh3aWxkY2FyZC5zdGFydHNXaXRoKCcqLycpICYmIGhvc3Q/LmVuZHNXaXRoKHdpbGRjYXJkLnN1YnN0cmluZygyLCB3aWxkY2FyZC5sZW5ndGgpKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydHMuaG9zdE1hdGNoZXNXaWxkY2FyZHMgPSBob3N0TWF0Y2hlc1dpbGRjYXJkcztcbi8qKlxuICogVGhyb3dzIGlmIGNvbGxlY3Rpb25OYW1lIGlzIG5vdCBhIHZhbGlkIG1vbmdvZGIgY29sbGVjdGlvbiBuYW1lc3BhY2UuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gY2hlY2tDb2xsZWN0aW9uTmFtZShjb2xsZWN0aW9uTmFtZSkge1xuICAgIGlmICgnc3RyaW5nJyAhPT0gdHlwZW9mIGNvbGxlY3Rpb25OYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0NvbGxlY3Rpb24gbmFtZSBtdXN0IGJlIGEgU3RyaW5nJyk7XG4gICAgfVxuICAgIGlmICghY29sbGVjdGlvbk5hbWUgfHwgY29sbGVjdGlvbk5hbWUuaW5kZXhPZignLi4nKSAhPT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignQ29sbGVjdGlvbiBuYW1lcyBjYW5ub3QgYmUgZW1wdHknKTtcbiAgICB9XG4gICAgaWYgKGNvbGxlY3Rpb25OYW1lLmluZGV4T2YoJyQnKSAhPT0gLTEgJiZcbiAgICAgICAgY29sbGVjdGlvbk5hbWUubWF0Y2goLygoXlxcJGNtZCl8KG9wbG9nXFwuXFwkbWFpbikpLykgPT0gbnVsbCkge1xuICAgICAgICAvLyBUT0RPKE5PREUtMzQ4Myk6IFVzZSBNb25nb05hbWVzcGFjZSBzdGF0aWMgbWV0aG9kXG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJDb2xsZWN0aW9uIG5hbWVzIG11c3Qgbm90IGNvbnRhaW4gJyQnXCIpO1xuICAgIH1cbiAgICBpZiAoY29sbGVjdGlvbk5hbWUubWF0Y2goL15cXC58XFwuJC8pICE9IG51bGwpIHtcbiAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODMpOiBVc2UgTW9uZ29OYW1lc3BhY2Ugc3RhdGljIG1ldGhvZFxuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKFwiQ29sbGVjdGlvbiBuYW1lcyBtdXN0IG5vdCBzdGFydCBvciBlbmQgd2l0aCAnLidcIik7XG4gICAgfVxuICAgIC8vIFZhbGlkYXRlIHRoYXQgd2UgYXJlIG5vdCBwYXNzaW5nIDB4MDAgaW4gdGhlIGNvbGxlY3Rpb24gbmFtZVxuICAgIGlmIChjb2xsZWN0aW9uTmFtZS5pbmRleE9mKCdcXHgwMCcpICE9PSAtMSkge1xuICAgICAgICAvLyBUT0RPKE5PREUtMzQ4Myk6IFVzZSBNb25nb05hbWVzcGFjZSBzdGF0aWMgbWV0aG9kXG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0NvbGxlY3Rpb24gbmFtZXMgY2Fubm90IGNvbnRhaW4gYSBudWxsIGNoYXJhY3RlcicpO1xuICAgIH1cbn1cbmV4cG9ydHMuY2hlY2tDb2xsZWN0aW9uTmFtZSA9IGNoZWNrQ29sbGVjdGlvbk5hbWU7XG4vKipcbiAqIEVuc3VyZSBIaW50IGZpZWxkIGlzIGluIGEgc2hhcGUgd2UgZXhwZWN0OlxuICogLSBvYmplY3Qgb2YgaW5kZXggbmFtZXMgbWFwcGluZyB0byAxIG9yIC0xXG4gKiAtIGp1c3QgYW4gaW5kZXggbmFtZVxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZUhpbnRGaWVsZChoaW50KSB7XG4gICAgbGV0IGZpbmFsSGludCA9IHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIGhpbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGZpbmFsSGludCA9IGhpbnQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaGludCkpIHtcbiAgICAgICAgZmluYWxIaW50ID0ge307XG4gICAgICAgIGhpbnQuZm9yRWFjaChwYXJhbSA9PiB7XG4gICAgICAgICAgICBmaW5hbEhpbnRbcGFyYW1dID0gMTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGhpbnQgIT0gbnVsbCAmJiB0eXBlb2YgaGludCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgZmluYWxIaW50ID0ge307XG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBoaW50KSB7XG4gICAgICAgICAgICBmaW5hbEhpbnRbbmFtZV0gPSBoaW50W25hbWVdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmaW5hbEhpbnQ7XG59XG5leHBvcnRzLm5vcm1hbGl6ZUhpbnRGaWVsZCA9IG5vcm1hbGl6ZUhpbnRGaWVsZDtcbmNvbnN0IFRPX1NUUklORyA9IChvYmplY3QpID0+IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpO1xuLyoqXG4gKiBDaGVja3MgaWYgYXJnIGlzIGFuIE9iamVjdDpcbiAqIC0gKipOT1RFKio6IHRoZSBjaGVjayBpcyBiYXNlZCBvbiB0aGUgYFtTeW1ib2wudG9TdHJpbmdUYWddKCkgPT09ICdPYmplY3QnYFxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICAgIHJldHVybiAnW29iamVjdCBPYmplY3RdJyA9PT0gVE9fU1RSSU5HKGFyZyk7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBtZXJnZU9wdGlvbnModGFyZ2V0LCBzb3VyY2UpIHtcbiAgICByZXR1cm4geyAuLi50YXJnZXQsIC4uLnNvdXJjZSB9O1xufVxuZXhwb3J0cy5tZXJnZU9wdGlvbnMgPSBtZXJnZU9wdGlvbnM7XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBmaWx0ZXJPcHRpb25zKG9wdGlvbnMsIG5hbWVzKSB7XG4gICAgY29uc3QgZmlsdGVyT3B0aW9ucyA9IHt9O1xuICAgIGZvciAoY29uc3QgbmFtZSBpbiBvcHRpb25zKSB7XG4gICAgICAgIGlmIChuYW1lcy5pbmNsdWRlcyhuYW1lKSkge1xuICAgICAgICAgICAgZmlsdGVyT3B0aW9uc1tuYW1lXSA9IG9wdGlvbnNbbmFtZV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gRmlsdGVyZWQgb3B0aW9uc1xuICAgIHJldHVybiBmaWx0ZXJPcHRpb25zO1xufVxuZXhwb3J0cy5maWx0ZXJPcHRpb25zID0gZmlsdGVyT3B0aW9ucztcbi8qKlxuICogQXBwbGllcyByZXRyeVdyaXRlczogdHJ1ZSB0byBhIGNvbW1hbmQgaWYgcmV0cnlXcml0ZXMgaXMgc2V0IG9uIHRoZSBjb21tYW5kJ3MgZGF0YWJhc2UuXG4gKiBAaW50ZXJuYWxcbiAqXG4gKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIHRhcmdldCBjb21tYW5kIHRvIHdoaWNoIHdlIHdpbGwgYXBwbHkgcmV0cnlXcml0ZXMuXG4gKiBAcGFyYW0gZGIgLSBUaGUgZGF0YWJhc2UgZnJvbSB3aGljaCB3ZSBjYW4gaW5oZXJpdCBhIHJldHJ5V3JpdGVzIHZhbHVlLlxuICovXG5mdW5jdGlvbiBhcHBseVJldHJ5YWJsZVdyaXRlcyh0YXJnZXQsIGRiKSB7XG4gICAgaWYgKGRiICYmIGRiLnMub3B0aW9ucz8ucmV0cnlXcml0ZXMpIHtcbiAgICAgICAgdGFyZ2V0LnJldHJ5V3JpdGVzID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbmV4cG9ydHMuYXBwbHlSZXRyeWFibGVXcml0ZXMgPSBhcHBseVJldHJ5YWJsZVdyaXRlcztcbi8qKlxuICogQXBwbGllcyBhIHdyaXRlIGNvbmNlcm4gdG8gYSBjb21tYW5kIGJhc2VkIG9uIHdlbGwgZGVmaW5lZCBpbmhlcml0YW5jZSBydWxlcywgb3B0aW9uYWxseVxuICogZGV0ZWN0aW5nIHN1cHBvcnQgZm9yIHRoZSB3cml0ZSBjb25jZXJuIGluIHRoZSBmaXJzdCBwbGFjZS5cbiAqIEBpbnRlcm5hbFxuICpcbiAqIEBwYXJhbSB0YXJnZXQgLSB0aGUgdGFyZ2V0IGNvbW1hbmQgd2Ugd2lsbCBiZSBhcHBseWluZyB0aGUgd3JpdGUgY29uY2VybiB0b1xuICogQHBhcmFtIHNvdXJjZXMgLSBzb3VyY2VzIHdoZXJlIHdlIGNhbiBpbmhlcml0IGRlZmF1bHQgd3JpdGUgY29uY2VybnMgZnJvbVxuICogQHBhcmFtIG9wdGlvbnMgLSBvcHRpb25hbCBzZXR0aW5ncyBwYXNzZWQgaW50byBhIGNvbW1hbmQgZm9yIHdyaXRlIGNvbmNlcm4gb3ZlcnJpZGVzXG4gKi9cbi8qKlxuICogQ2hlY2tzIGlmIGEgZ2l2ZW4gdmFsdWUgaXMgYSBQcm9taXNlXG4gKlxuICogQHR5cGVQYXJhbSBUIC0gVGhlIHJlc29sdXRpb24gdHlwZSBvZiB0aGUgcG9zc2libGUgcHJvbWlzZVxuICogQHBhcmFtIHZhbHVlIC0gQW4gb2JqZWN0IHRoYXQgY291bGQgYmUgYSBwcm9taXNlXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCB2YWx1ZSBpcyBhIFByb21pc2VcbiAqL1xuZnVuY3Rpb24gaXNQcm9taXNlTGlrZSh2YWx1ZSkge1xuICAgIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc1Byb21pc2VMaWtlID0gaXNQcm9taXNlTGlrZTtcbi8qKlxuICogQXBwbGllcyBjb2xsYXRpb24gdG8gYSBnaXZlbiBjb21tYW5kLlxuICogQGludGVybmFsXG4gKlxuICogQHBhcmFtIGNvbW1hbmQgLSB0aGUgY29tbWFuZCBvbiB3aGljaCB0byBhcHBseSBjb2xsYXRpb25cbiAqIEBwYXJhbSB0YXJnZXQgLSB0YXJnZXQgb2YgY29tbWFuZFxuICogQHBhcmFtIG9wdGlvbnMgLSBvcHRpb25zIGNvbnRhaW5pbmcgY29sbGF0aW9uIHNldHRpbmdzXG4gKi9cbmZ1bmN0aW9uIGRlY29yYXRlV2l0aENvbGxhdGlvbihjb21tYW5kLCB0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBjYXBhYmlsaXRpZXMgPSBnZXRUb3BvbG9neSh0YXJnZXQpLmNhcGFiaWxpdGllcztcbiAgICBpZiAob3B0aW9ucy5jb2xsYXRpb24gJiYgdHlwZW9mIG9wdGlvbnMuY29sbGF0aW9uID09PSAnb2JqZWN0Jykge1xuICAgICAgICBpZiAoY2FwYWJpbGl0aWVzICYmIGNhcGFiaWxpdGllcy5jb21tYW5kc1Rha2VDb2xsYXRpb24pIHtcbiAgICAgICAgICAgIGNvbW1hbmQuY29sbGF0aW9uID0gb3B0aW9ucy5jb2xsYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0NvbXBhdGliaWxpdHlFcnJvcihgQ3VycmVudCB0b3BvbG9neSBkb2VzIG5vdCBzdXBwb3J0IGNvbGxhdGlvbmApO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5kZWNvcmF0ZVdpdGhDb2xsYXRpb24gPSBkZWNvcmF0ZVdpdGhDb2xsYXRpb247XG4vKipcbiAqIEFwcGxpZXMgYSByZWFkIGNvbmNlcm4gdG8gYSBnaXZlbiBjb21tYW5kLlxuICogQGludGVybmFsXG4gKlxuICogQHBhcmFtIGNvbW1hbmQgLSB0aGUgY29tbWFuZCBvbiB3aGljaCB0byBhcHBseSB0aGUgcmVhZCBjb25jZXJuXG4gKiBAcGFyYW0gY29sbCAtIHRoZSBwYXJlbnQgY29sbGVjdGlvbiBvZiB0aGUgb3BlcmF0aW9uIGNhbGxpbmcgdGhpcyBtZXRob2RcbiAqL1xuZnVuY3Rpb24gZGVjb3JhdGVXaXRoUmVhZENvbmNlcm4oY29tbWFuZCwgY29sbCwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuc2Vzc2lvbiAmJiBvcHRpb25zLnNlc3Npb24uaW5UcmFuc2FjdGlvbigpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcmVhZENvbmNlcm4gPSBPYmplY3QuYXNzaWduKHt9LCBjb21tYW5kLnJlYWRDb25jZXJuIHx8IHt9KTtcbiAgICBpZiAoY29sbC5zLnJlYWRDb25jZXJuKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24ocmVhZENvbmNlcm4sIGNvbGwucy5yZWFkQ29uY2Vybik7XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhyZWFkQ29uY2VybikubGVuZ3RoID4gMCkge1xuICAgICAgICBPYmplY3QuYXNzaWduKGNvbW1hbmQsIHsgcmVhZENvbmNlcm46IHJlYWRDb25jZXJuIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVjb3JhdGVXaXRoUmVhZENvbmNlcm4gPSBkZWNvcmF0ZVdpdGhSZWFkQ29uY2Vybjtcbi8qKlxuICogQXBwbGllcyBhbiBleHBsYWluIHRvIGEgZ2l2ZW4gY29tbWFuZC5cbiAqIEBpbnRlcm5hbFxuICpcbiAqIEBwYXJhbSBjb21tYW5kIC0gdGhlIGNvbW1hbmQgb24gd2hpY2ggdG8gYXBwbHkgdGhlIGV4cGxhaW5cbiAqIEBwYXJhbSBvcHRpb25zIC0gdGhlIG9wdGlvbnMgY29udGFpbmluZyB0aGUgZXhwbGFpbiB2ZXJib3NpdHlcbiAqL1xuZnVuY3Rpb24gZGVjb3JhdGVXaXRoRXhwbGFpbihjb21tYW5kLCBleHBsYWluKSB7XG4gICAgaWYgKGNvbW1hbmQuZXhwbGFpbikge1xuICAgICAgICByZXR1cm4gY29tbWFuZDtcbiAgICB9XG4gICAgcmV0dXJuIHsgZXhwbGFpbjogY29tbWFuZCwgdmVyYm9zaXR5OiBleHBsYWluLnZlcmJvc2l0eSB9O1xufVxuZXhwb3J0cy5kZWNvcmF0ZVdpdGhFeHBsYWluID0gZGVjb3JhdGVXaXRoRXhwbGFpbjtcbi8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSB0b3BvbG9neSBmcm9tIGEgZ2l2ZW4gcHJvdmlkZXIuIFRocm93c1xuICogaWYgdGhlIHRvcG9sb2d5IGNhbm5vdCBiZSBmb3VuZC5cbiAqIEB0aHJvd3MgTW9uZ29Ob3RDb25uZWN0ZWRFcnJvclxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGdldFRvcG9sb2d5KHByb3ZpZGVyKSB7XG4gICAgLy8gTW9uZ29DbGllbnQgb3IgQ2xpZW50U2Vzc2lvbiBvciBBYnN0cmFjdEN1cnNvclxuICAgIGlmICgndG9wb2xvZ3knIGluIHByb3ZpZGVyICYmIHByb3ZpZGVyLnRvcG9sb2d5KSB7XG4gICAgICAgIHJldHVybiBwcm92aWRlci50b3BvbG9neTtcbiAgICB9XG4gICAgZWxzZSBpZiAoJ2NsaWVudCcgaW4gcHJvdmlkZXIgJiYgcHJvdmlkZXIuY2xpZW50LnRvcG9sb2d5KSB7XG4gICAgICAgIHJldHVybiBwcm92aWRlci5jbGllbnQudG9wb2xvZ3k7XG4gICAgfVxuICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvTm90Q29ubmVjdGVkRXJyb3IoJ01vbmdvQ2xpZW50IG11c3QgYmUgY29ubmVjdGVkIHRvIHBlcmZvcm0gdGhpcyBvcGVyYXRpb24nKTtcbn1cbmV4cG9ydHMuZ2V0VG9wb2xvZ3kgPSBnZXRUb3BvbG9neTtcbi8qKiBAaW50ZXJuYWwgKi9cbmZ1bmN0aW9uIG5zKG5zKSB7XG4gICAgcmV0dXJuIE1vbmdvREJOYW1lc3BhY2UuZnJvbVN0cmluZyhucyk7XG59XG5leHBvcnRzLm5zID0gbnM7XG4vKiogQHB1YmxpYyAqL1xuY2xhc3MgTW9uZ29EQk5hbWVzcGFjZSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmFtZXNwYWNlIG9iamVjdFxuICAgICAqXG4gICAgICogQHBhcmFtIGRiIC0gZGF0YWJhc2UgbmFtZVxuICAgICAqIEBwYXJhbSBjb2xsZWN0aW9uIC0gY29sbGVjdGlvbiBuYW1lXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGIsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uID09PSAnJyA/IHVuZGVmaW5lZCA6IGNvbGxlY3Rpb247XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xsZWN0aW9uID8gYCR7dGhpcy5kYn0uJHt0aGlzLmNvbGxlY3Rpb259YCA6IHRoaXMuZGI7XG4gICAgfVxuICAgIHdpdGhDb2xsZWN0aW9uKGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNb25nb0RCQ29sbGVjdGlvbk5hbWVzcGFjZSh0aGlzLmRiLCBjb2xsZWN0aW9uKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21TdHJpbmcobmFtZXNwYWNlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlICE9PSAnc3RyaW5nJyB8fCBuYW1lc3BhY2UgPT09ICcnKSB7XG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4Myk6IFJlcGxhY2Ugd2l0aCBNb25nb05hbWVzcGFjZUVycm9yXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcihgQ2Fubm90IHBhcnNlIG5hbWVzcGFjZSBmcm9tIFwiJHtuYW1lc3BhY2V9XCJgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBbZGIsIC4uLmNvbGxlY3Rpb25QYXJ0c10gPSBuYW1lc3BhY2Uuc3BsaXQoJy4nKTtcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbiA9IGNvbGxlY3Rpb25QYXJ0cy5qb2luKCcuJyk7XG4gICAgICAgIHJldHVybiBuZXcgTW9uZ29EQk5hbWVzcGFjZShkYiwgY29sbGVjdGlvbiA9PT0gJycgPyB1bmRlZmluZWQgOiBjb2xsZWN0aW9uKTtcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvREJOYW1lc3BhY2UgPSBNb25nb0RCTmFtZXNwYWNlO1xuLyoqXG4gKiBAcHVibGljXG4gKlxuICogQSBjbGFzcyByZXByZXNlbnRpbmcgYSBjb2xsZWN0aW9uJ3MgbmFtZXNwYWNlLiAgVGhpcyBjbGFzcyBlbmZvcmNlcyAodGhyb3VnaCBUeXBlc2NyaXB0KSB0aGF0XG4gKiB0aGUgYGNvbGxlY3Rpb25gIHBvcnRpb24gb2YgdGhlIG5hbWVzcGFjZSBpcyBkZWZpbmVkIGFuZCBzaG91bGQgb25seSBiZVxuICogdXNlZCBpbiBzY2VuYXJpb3Mgd2hlcmUgdGhpcyBjYW4gYmUgZ3VhcmFudGVlZC5cbiAqL1xuY2xhc3MgTW9uZ29EQkNvbGxlY3Rpb25OYW1lc3BhY2UgZXh0ZW5kcyBNb25nb0RCTmFtZXNwYWNlIHtcbiAgICBjb25zdHJ1Y3RvcihkYiwgY29sbGVjdGlvbikge1xuICAgICAgICBzdXBlcihkYiwgY29sbGVjdGlvbik7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IGNvbGxlY3Rpb247XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0RCQ29sbGVjdGlvbk5hbWVzcGFjZSA9IE1vbmdvREJDb2xsZWN0aW9uTmFtZXNwYWNlO1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24qIG1ha2VDb3VudGVyKHNlZWQgPSAwKSB7XG4gICAgbGV0IGNvdW50ID0gc2VlZDtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCBuZXdDb3VudCA9IGNvdW50O1xuICAgICAgICBjb3VudCArPSAxO1xuICAgICAgICB5aWVsZCBuZXdDb3VudDtcbiAgICB9XG59XG5leHBvcnRzLm1ha2VDb3VudGVyID0gbWFrZUNvdW50ZXI7XG5mdW5jdGlvbiBtYXliZUNhbGxiYWNrKHByb21pc2VGbiwgY2FsbGJhY2spIHtcbiAgICBjb25zdCBwcm9taXNlID0gcHJvbWlzZUZuKCk7XG4gICAgaWYgKGNhbGxiYWNrID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHByb21pc2UudGhlbihyZXN1bHQgPT4gY2FsbGJhY2sodW5kZWZpbmVkLCByZXN1bHQpLCBlcnJvciA9PiBjYWxsYmFjayhlcnJvcikpO1xuICAgIHJldHVybjtcbn1cbmV4cG9ydHMubWF5YmVDYWxsYmFjayA9IG1heWJlQ2FsbGJhY2s7XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBkYXRhYmFzZU5hbWVzcGFjZShucykge1xuICAgIHJldHVybiBucy5zcGxpdCgnLicpWzBdO1xufVxuZXhwb3J0cy5kYXRhYmFzZU5hbWVzcGFjZSA9IGRhdGFiYXNlTmFtZXNwYWNlO1xuLyoqXG4gKiBTeW5jaHJvbm91c2x5IEdlbmVyYXRlIGEgVVVJRHY0XG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gdXVpZFY0KCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGNyeXB0by5yYW5kb21CeXRlcygxNik7XG4gICAgcmVzdWx0WzZdID0gKHJlc3VsdFs2XSAmIDB4MGYpIHwgMHg0MDtcbiAgICByZXN1bHRbOF0gPSAocmVzdWx0WzhdICYgMHgzZikgfCAweDgwO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnRzLnV1aWRWNCA9IHV1aWRWNDtcbi8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gZm9yIGRldGVybWluaW5nIGBtYXhXaXJlVmVyc2lvbmAgYmV0d2VlbiBsZWdhY3kgYW5kIG5ldyB0b3BvbG9neSBpbnN0YW5jZXNcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBtYXhXaXJlVmVyc2lvbih0b3BvbG9neU9yU2VydmVyKSB7XG4gICAgaWYgKHRvcG9sb2d5T3JTZXJ2ZXIpIHtcbiAgICAgICAgaWYgKHRvcG9sb2d5T3JTZXJ2ZXIubG9hZEJhbGFuY2VkKSB7XG4gICAgICAgICAgICAvLyBTaW5jZSB3ZSBkbyBub3QgaGF2ZSBhIG1vbml0b3IsIHdlIGFzc3VtZSB0aGUgbG9hZCBiYWxhbmNlZCBzZXJ2ZXIgaXMgYWx3YXlzXG4gICAgICAgICAgICAvLyBwb2ludGVkIGF0IHRoZSBsYXRlc3QgbW9uZ29kYiB2ZXJzaW9uLiBUaGVyZSBpcyBhIHJpc2sgdGhhdCBmb3Igb24tcHJlbVxuICAgICAgICAgICAgLy8gZGVwbG95bWVudHMgdGhhdCBkb24ndCB1cGdyYWRlIGltbWVkaWF0ZWx5IHRoYXQgdGhpcyBjb3VsZCBhbGVydCB0byB0aGVcbiAgICAgICAgICAgIC8vIGFwcGxpY2F0aW9uIHRoYXQgYSBmZWF0dXJlIGlzIGF2YWlsYWJsZSB0aGF0IGlzIGFjdHVhbGx5IG5vdC5cbiAgICAgICAgICAgIHJldHVybiBjb25zdGFudHNfMS5NQVhfU1VQUE9SVEVEX1dJUkVfVkVSU0lPTjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9wb2xvZ3lPclNlcnZlci5oZWxsbykge1xuICAgICAgICAgICAgcmV0dXJuIHRvcG9sb2d5T3JTZXJ2ZXIuaGVsbG8ubWF4V2lyZVZlcnNpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdsYXN0SGVsbG8nIGluIHRvcG9sb2d5T3JTZXJ2ZXIgJiYgdHlwZW9mIHRvcG9sb2d5T3JTZXJ2ZXIubGFzdEhlbGxvID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb25zdCBsYXN0SGVsbG8gPSB0b3BvbG9neU9yU2VydmVyLmxhc3RIZWxsbygpO1xuICAgICAgICAgICAgaWYgKGxhc3RIZWxsbykge1xuICAgICAgICAgICAgICAgIHJldHVybiBsYXN0SGVsbG8ubWF4V2lyZVZlcnNpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcG9sb2d5T3JTZXJ2ZXIuZGVzY3JpcHRpb24gJiZcbiAgICAgICAgICAgICdtYXhXaXJlVmVyc2lvbicgaW4gdG9wb2xvZ3lPclNlcnZlci5kZXNjcmlwdGlvbiAmJlxuICAgICAgICAgICAgdG9wb2xvZ3lPclNlcnZlci5kZXNjcmlwdGlvbi5tYXhXaXJlVmVyc2lvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdG9wb2xvZ3lPclNlcnZlci5kZXNjcmlwdGlvbi5tYXhXaXJlVmVyc2lvbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gMDtcbn1cbmV4cG9ydHMubWF4V2lyZVZlcnNpb24gPSBtYXhXaXJlVmVyc2lvbjtcbi8qKlxuICogQXBwbGllcyB0aGUgZnVuY3Rpb24gYGVhY2hGbmAgdG8gZWFjaCBpdGVtIGluIGBhcnJgLCBpbiBwYXJhbGxlbC5cbiAqIEBpbnRlcm5hbFxuICpcbiAqIEBwYXJhbSBhcnIgLSBBbiBhcnJheSBvZiBpdGVtcyB0byBhc3luY2hyb25vdXNseSBpdGVyYXRlIG92ZXJcbiAqIEBwYXJhbSBlYWNoRm4gLSBBIGZ1bmN0aW9uIHRvIGNhbGwgb24gZWFjaCBpdGVtIG9mIHRoZSBhcnJheS4gVGhlIGNhbGxiYWNrIHNpZ25hdHVyZSBpcyBgKGl0ZW0sIGNhbGxiYWNrKWAsIHdoZXJlIHRoZSBjYWxsYmFjayBpbmRpY2F0ZXMgaXRlcmF0aW9uIGlzIGNvbXBsZXRlLlxuICogQHBhcmFtIGNhbGxiYWNrIC0gVGhlIGNhbGxiYWNrIGNhbGxlZCBhZnRlciBldmVyeSBpdGVtIGhhcyBiZWVuIGl0ZXJhdGVkXG4gKi9cbmZ1bmN0aW9uIGVhY2hBc3luYyhhcnIsIGVhY2hGbiwgY2FsbGJhY2spIHtcbiAgICBhcnIgPSBhcnIgfHwgW107XG4gICAgbGV0IGlkeCA9IDA7XG4gICAgbGV0IGF3YWl0aW5nID0gMDtcbiAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGFyci5sZW5ndGg7ICsraWR4KSB7XG4gICAgICAgIGF3YWl0aW5nKys7XG4gICAgICAgIGVhY2hGbihhcnJbaWR4XSwgZWFjaENhbGxiYWNrKTtcbiAgICB9XG4gICAgaWYgKGF3YWl0aW5nID09PSAwKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZnVuY3Rpb24gZWFjaENhbGxiYWNrKGVycikge1xuICAgICAgICBhd2FpdGluZy0tO1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZHggPT09IGFyci5sZW5ndGggJiYgYXdhaXRpbmcgPD0gMCkge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuZWFjaEFzeW5jID0gZWFjaEFzeW5jO1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gYXJyYXlTdHJpY3RFcXVhbChhcnIsIGFycjIpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyKSB8fCAhQXJyYXkuaXNBcnJheShhcnIyKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBhcnIubGVuZ3RoID09PSBhcnIyLmxlbmd0aCAmJiBhcnIuZXZlcnkoKGVsdCwgaWR4KSA9PiBlbHQgPT09IGFycjJbaWR4XSk7XG59XG5leHBvcnRzLmFycmF5U3RyaWN0RXF1YWwgPSBhcnJheVN0cmljdEVxdWFsO1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gZXJyb3JTdHJpY3RFcXVhbChsaHMsIHJocykge1xuICAgIGlmIChsaHMgPT09IHJocykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFsaHMgfHwgIXJocykge1xuICAgICAgICByZXR1cm4gbGhzID09PSByaHM7XG4gICAgfVxuICAgIGlmICgobGhzID09IG51bGwgJiYgcmhzICE9IG51bGwpIHx8IChsaHMgIT0gbnVsbCAmJiByaHMgPT0gbnVsbCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAobGhzLmNvbnN0cnVjdG9yLm5hbWUgIT09IHJocy5jb25zdHJ1Y3Rvci5uYW1lKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGxocy5tZXNzYWdlICE9PSByaHMubWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0cy5lcnJvclN0cmljdEVxdWFsID0gZXJyb3JTdHJpY3RFcXVhbDtcbi8qKiBAaW50ZXJuYWwgKi9cbmZ1bmN0aW9uIG1ha2VTdGF0ZU1hY2hpbmUoc3RhdGVUYWJsZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBzdGF0ZVRyYW5zaXRpb24odGFyZ2V0LCBuZXdTdGF0ZSkge1xuICAgICAgICBjb25zdCBsZWdhbFN0YXRlcyA9IHN0YXRlVGFibGVbdGFyZ2V0LnMuc3RhdGVdO1xuICAgICAgICBpZiAobGVnYWxTdGF0ZXMgJiYgbGVnYWxTdGF0ZXMuaW5kZXhPZihuZXdTdGF0ZSkgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcihgaWxsZWdhbCBzdGF0ZSB0cmFuc2l0aW9uIGZyb20gWyR7dGFyZ2V0LnMuc3RhdGV9XSA9PiBbJHtuZXdTdGF0ZX1dLCBhbGxvd2VkOiBbJHtsZWdhbFN0YXRlc31dYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0LmVtaXQoJ3N0YXRlQ2hhbmdlZCcsIHRhcmdldC5zLnN0YXRlLCBuZXdTdGF0ZSk7XG4gICAgICAgIHRhcmdldC5zLnN0YXRlID0gbmV3U3RhdGU7XG4gICAgfTtcbn1cbmV4cG9ydHMubWFrZVN0YXRlTWFjaGluZSA9IG1ha2VTdGF0ZU1hY2hpbmU7XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBub3coKSB7XG4gICAgY29uc3QgaHJ0aW1lID0gcHJvY2Vzcy5ocnRpbWUoKTtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihocnRpbWVbMF0gKiAxMDAwICsgaHJ0aW1lWzFdIC8gMTAwMDAwMCk7XG59XG5leHBvcnRzLm5vdyA9IG5vdztcbi8qKiBAaW50ZXJuYWwgKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZUR1cmF0aW9uSW5NcyhzdGFydGVkKSB7XG4gICAgaWYgKHR5cGVvZiBzdGFydGVkICE9PSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdOdW1lcmljIHZhbHVlIHJlcXVpcmVkIHRvIGNhbGN1bGF0ZSBkdXJhdGlvbicpO1xuICAgIH1cbiAgICBjb25zdCBlbGFwc2VkID0gbm93KCkgLSBzdGFydGVkO1xuICAgIHJldHVybiBlbGFwc2VkIDwgMCA/IDAgOiBlbGFwc2VkO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVEdXJhdGlvbkluTXMgPSBjYWxjdWxhdGVEdXJhdGlvbkluTXM7XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBoYXNBdG9taWNPcGVyYXRvcnMoZG9jKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZG9jKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGRvY3VtZW50IG9mIGRvYykge1xuICAgICAgICAgICAgaWYgKGhhc0F0b21pY09wZXJhdG9ycyhkb2N1bWVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhkb2MpO1xuICAgIHJldHVybiBrZXlzLmxlbmd0aCA+IDAgJiYga2V5c1swXVswXSA9PT0gJyQnO1xufVxuZXhwb3J0cy5oYXNBdG9taWNPcGVyYXRvcnMgPSBoYXNBdG9taWNPcGVyYXRvcnM7XG4vKipcbiAqIE1lcmdlIGluaGVyaXRlZCBwcm9wZXJ0aWVzIGZyb20gcGFyZW50IGludG8gb3B0aW9ucywgcHJpb3JpdGl6aW5nIHZhbHVlcyBmcm9tIG9wdGlvbnMsXG4gKiB0aGVuIHZhbHVlcyBmcm9tIHBhcmVudC5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiByZXNvbHZlT3B0aW9ucyhwYXJlbnQsIG9wdGlvbnMpIHtcbiAgICBjb25zdCByZXN1bHQgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zLCAoMCwgYnNvbl8xLnJlc29sdmVCU09OT3B0aW9ucykob3B0aW9ucywgcGFyZW50KSk7XG4gICAgLy8gVXNlcnMgY2Fubm90IHBhc3MgYSByZWFkQ29uY2Vybi93cml0ZUNvbmNlcm4gdG8gb3BlcmF0aW9ucyBpbiBhIHRyYW5zYWN0aW9uXG4gICAgY29uc3Qgc2Vzc2lvbiA9IG9wdGlvbnM/LnNlc3Npb247XG4gICAgaWYgKCFzZXNzaW9uPy5pblRyYW5zYWN0aW9uKCkpIHtcbiAgICAgICAgY29uc3QgcmVhZENvbmNlcm4gPSByZWFkX2NvbmNlcm5fMS5SZWFkQ29uY2Vybi5mcm9tT3B0aW9ucyhvcHRpb25zKSA/PyBwYXJlbnQ/LnJlYWRDb25jZXJuO1xuICAgICAgICBpZiAocmVhZENvbmNlcm4pIHtcbiAgICAgICAgICAgIHJlc3VsdC5yZWFkQ29uY2VybiA9IHJlYWRDb25jZXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdyaXRlQ29uY2VybiA9IHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucykgPz8gcGFyZW50Py53cml0ZUNvbmNlcm47XG4gICAgICAgIGlmICh3cml0ZUNvbmNlcm4pIHtcbiAgICAgICAgICAgIHJlc3VsdC53cml0ZUNvbmNlcm4gPSB3cml0ZUNvbmNlcm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVhZFByZWZlcmVuY2UgPSByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5mcm9tT3B0aW9ucyhvcHRpb25zKSA/PyBwYXJlbnQ/LnJlYWRQcmVmZXJlbmNlO1xuICAgIGlmIChyZWFkUHJlZmVyZW5jZSkge1xuICAgICAgICByZXN1bHQucmVhZFByZWZlcmVuY2UgPSByZWFkUHJlZmVyZW5jZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydHMucmVzb2x2ZU9wdGlvbnMgPSByZXNvbHZlT3B0aW9ucztcbmZ1bmN0aW9uIGlzU3VwZXJzZXQoc2V0LCBzdWJzZXQpIHtcbiAgICBzZXQgPSBBcnJheS5pc0FycmF5KHNldCkgPyBuZXcgU2V0KHNldCkgOiBzZXQ7XG4gICAgc3Vic2V0ID0gQXJyYXkuaXNBcnJheShzdWJzZXQpID8gbmV3IFNldChzdWJzZXQpIDogc3Vic2V0O1xuICAgIGZvciAoY29uc3QgZWxlbSBvZiBzdWJzZXQpIHtcbiAgICAgICAgaWYgKCFzZXQuaGFzKGVsZW0pKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnRzLmlzU3VwZXJzZXQgPSBpc1N1cGVyc2V0O1xuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGRvY3VtZW50IGlzIGEgSGVsbG8gcmVxdWVzdFxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGlzSGVsbG8oZG9jKSB7XG4gICAgcmV0dXJuIGRvY1tjb25zdGFudHNfMi5MRUdBQ1lfSEVMTE9fQ09NTUFORF0gfHwgZG9jLmhlbGxvID8gdHJ1ZSA6IGZhbHNlO1xufVxuZXhwb3J0cy5pc0hlbGxvID0gaXNIZWxsbztcbi8qKiBSZXR1cm5zIHRoZSBpdGVtcyB0aGF0IGFyZSB1bmlxdWVseSBpbiBzZXRBICovXG5mdW5jdGlvbiBzZXREaWZmZXJlbmNlKHNldEEsIHNldEIpIHtcbiAgICBjb25zdCBkaWZmZXJlbmNlID0gbmV3IFNldChzZXRBKTtcbiAgICBmb3IgKGNvbnN0IGVsZW0gb2Ygc2V0Qikge1xuICAgICAgICBkaWZmZXJlbmNlLmRlbGV0ZShlbGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIGRpZmZlcmVuY2U7XG59XG5leHBvcnRzLnNldERpZmZlcmVuY2UgPSBzZXREaWZmZXJlbmNlO1xuY29uc3QgSEFTX09XTiA9IChvYmplY3QsIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3ApO1xuZnVuY3Rpb24gaXNSZWNvcmQodmFsdWUsIHJlcXVpcmVkS2V5cyA9IHVuZGVmaW5lZCkge1xuICAgIGlmICghaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgY3RvciA9IHZhbHVlLmNvbnN0cnVjdG9yO1xuICAgIGlmIChjdG9yICYmIGN0b3IucHJvdG90eXBlKSB7XG4gICAgICAgIGlmICghaXNPYmplY3QoY3Rvci5wcm90b3R5cGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHNvbWUgbWV0aG9kIGV4aXN0cyBmcm9tIHRoZSBPYmplY3QgZXhpc3RzXG4gICAgICAgIGlmICghSEFTX09XTihjdG9yLnByb3RvdHlwZSwgJ2lzUHJvdG90eXBlT2YnKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChyZXF1aXJlZEtleXMpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGlzU3VwZXJzZXQoa2V5cywgcmVxdWlyZWRLZXlzKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnRzLmlzUmVjb3JkID0gaXNSZWNvcmQ7XG4vKipcbiAqIE1ha2UgYSBkZWVwIGNvcHkgb2YgYW4gb2JqZWN0XG4gKlxuICogTk9URTogVGhpcyBpcyBub3QgbWVhbnQgdG8gYmUgdGhlIHBlcmZlY3QgaW1wbGVtZW50YXRpb24gb2YgYSBkZWVwIGNvcHksXG4gKiBidXQgaW5zdGVhZCBzb21ldGhpbmcgdGhhdCBpcyBnb29kIGVub3VnaCBmb3IgdGhlIHB1cnBvc2VzIG9mXG4gKiBjb21tYW5kIG1vbml0b3JpbmcuXG4gKi9cbmZ1bmN0aW9uIGRlZXBDb3B5KHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUubWFwKGl0ZW0gPT4gZGVlcENvcHkoaXRlbSkpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1JlY29yZCh2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHZhbHVlKSB7XG4gICAgICAgICAgICByZXNba2V5XSA9IGRlZXBDb3B5KHZhbHVlW2tleV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGNvbnN0IGN0b3IgPSB2YWx1ZS5jb25zdHJ1Y3RvcjtcbiAgICBpZiAoY3Rvcikge1xuICAgICAgICBzd2l0Y2ggKGN0b3IubmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGN0b3IoTnVtYmVyKHZhbHVlKSk7XG4gICAgICAgICAgICBjYXNlICdtYXAnOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTWFwKHZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgJ3NldCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTZXQodmFsdWUpO1xuICAgICAgICAgICAgY2FzZSAnYnVmZmVyJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gQnVmZmVyLmZyb20odmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbmV4cG9ydHMuZGVlcENvcHkgPSBkZWVwQ29weTtcbi8qKlxuICogQSBzZXF1ZW50aWFsIGxpc3Qgb2YgaXRlbXMgaW4gYSBjaXJjdWxhcmx5IGxpbmtlZCBsaXN0XG4gKiBAcmVtYXJrc1xuICogVGhlIGhlYWQgbm9kZSBpcyBzcGVjaWFsLCBpdCBpcyBhbHdheXMgZGVmaW5lZCBhbmQgaGFzIGEgdmFsdWUgb2YgbnVsbC5cbiAqIEl0IGlzIG5ldmVyIFwiaW5jbHVkZWRcIiBpbiB0aGUgbGlzdCwgaW4gdGhhdCwgaXQgaXMgbm90IHJldHVybmVkIGJ5IHBvcC9zaGlmdCBvciB5aWVsZGVkIGJ5IHRoZSBpdGVyYXRvci5cbiAqIFRoZSBjaXJjdWxhciBsaW5rYWdlIGFuZCBhbHdheXMgZGVmaW5lZCBoZWFkIG5vZGUgYXJlIHRvIHJlZHVjZSBjaGVja3MgZm9yIG51bGwgbmV4dC9wcmV2IHJlZmVyZW5jZXMgdG8gemVyby5cbiAqIE5ldyBub2RlcyBhcmUgZGVjbGFyZWQgYXMgb2JqZWN0IGxpdGVyYWxzIHdpdGgga2V5cyBhbHdheXMgaW4gdGhlIHNhbWUgb3JkZXI6IG5leHQsIHByZXYsIHZhbHVlLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIExpc3Qge1xuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvdW50O1xuICAgIH1cbiAgICBnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7XG4gICAgICAgIHJldHVybiAnTGlzdCc7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICAgICAgLy8gdGhpcyBpcyBjYXJlZnVsbHkgY3JhZnRlZDpcbiAgICAgICAgLy8gZGVjbGFyaW5nIGEgY29tcGxldGUgYW5kIGNvbnNpc3RlbnRseSBrZXkgb3JkZXJlZFxuICAgICAgICAvLyBvYmplY3QgaXMgYmVuZWZpY2lhbCB0byB0aGUgcnVudGltZSBvcHRpbWl6YXRpb25zXG4gICAgICAgIHRoaXMuaGVhZCA9IHtcbiAgICAgICAgICAgIG5leHQ6IG51bGwsXG4gICAgICAgICAgICBwcmV2OiBudWxsLFxuICAgICAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oZWFkLm5leHQgPSB0aGlzLmhlYWQ7XG4gICAgICAgIHRoaXMuaGVhZC5wcmV2ID0gdGhpcy5oZWFkO1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgaGVhZCA8PT4gJHt0aGlzLnRvQXJyYXkoKS5qb2luKCcgPD0+ICcpfSA8PT4gaGVhZGA7XG4gICAgfVxuICAgICpbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIHRoaXMubm9kZXMoKSkge1xuICAgICAgICAgICAgeWllbGQgbm9kZS52YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAqbm9kZXMoKSB7XG4gICAgICAgIGxldCBwdHIgPSB0aGlzLmhlYWQubmV4dDtcbiAgICAgICAgd2hpbGUgKHB0ciAhPT0gdGhpcy5oZWFkKSB7XG4gICAgICAgICAgICAvLyBTYXZlIG5leHQgYmVmb3JlIHlpZWxkaW5nIHNvIHRoYXQgd2UgbWFrZSByZW1vdmluZyB3aXRoaW4gaXRlcmF0aW9uIHNhZmVcbiAgICAgICAgICAgIGNvbnN0IHsgbmV4dCB9ID0gcHRyO1xuICAgICAgICAgICAgeWllbGQgcHRyO1xuICAgICAgICAgICAgcHRyID0gbmV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogSW5zZXJ0IGF0IGVuZCBvZiBsaXN0ICovXG4gICAgcHVzaCh2YWx1ZSkge1xuICAgICAgICB0aGlzLmNvdW50ICs9IDE7XG4gICAgICAgIGNvbnN0IG5ld05vZGUgPSB7XG4gICAgICAgICAgICBuZXh0OiB0aGlzLmhlYWQsXG4gICAgICAgICAgICBwcmV2OiB0aGlzLmhlYWQucHJldixcbiAgICAgICAgICAgIHZhbHVlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGVhZC5wcmV2Lm5leHQgPSBuZXdOb2RlO1xuICAgICAgICB0aGlzLmhlYWQucHJldiA9IG5ld05vZGU7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIGV2ZXJ5IGl0ZW0gaW5zaWRlIGFuIGl0ZXJhYmxlIGluc3RlYWQgb2YgdGhlIGl0ZXJhYmxlIGl0c2VsZiAqL1xuICAgIHB1c2hNYW55KGl0ZXJhYmxlKSB7XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgaXRlcmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEluc2VydCBhdCBmcm9udCBvZiBsaXN0ICovXG4gICAgdW5zaGlmdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLmNvdW50ICs9IDE7XG4gICAgICAgIGNvbnN0IG5ld05vZGUgPSB7XG4gICAgICAgICAgICBuZXh0OiB0aGlzLmhlYWQubmV4dCxcbiAgICAgICAgICAgIHByZXY6IHRoaXMuaGVhZCxcbiAgICAgICAgICAgIHZhbHVlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGVhZC5uZXh0LnByZXYgPSBuZXdOb2RlO1xuICAgICAgICB0aGlzLmhlYWQubmV4dCA9IG5ld05vZGU7XG4gICAgfVxuICAgIHJlbW92ZShub2RlKSB7XG4gICAgICAgIGlmIChub2RlID09PSB0aGlzLmhlYWQgfHwgdGhpcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY291bnQgLT0gMTtcbiAgICAgICAgY29uc3QgcHJldk5vZGUgPSBub2RlLnByZXY7XG4gICAgICAgIGNvbnN0IG5leHROb2RlID0gbm9kZS5uZXh0O1xuICAgICAgICBwcmV2Tm9kZS5uZXh0ID0gbmV4dE5vZGU7XG4gICAgICAgIG5leHROb2RlLnByZXYgPSBwcmV2Tm9kZTtcbiAgICAgICAgcmV0dXJuIG5vZGUudmFsdWU7XG4gICAgfVxuICAgIC8qKiBSZW1vdmVzIHRoZSBmaXJzdCBub2RlIGF0IHRoZSBmcm9udCBvZiB0aGUgbGlzdCAqL1xuICAgIHNoaWZ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmUodGhpcy5oZWFkLm5leHQpO1xuICAgIH1cbiAgICAvKiogUmVtb3ZlcyB0aGUgbGFzdCBub2RlIGF0IHRoZSBlbmQgb2YgdGhlIGxpc3QgKi9cbiAgICBwb3AoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZSh0aGlzLmhlYWQucHJldik7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyB0aHJvdWdoIHRoZSBsaXN0IGFuZCByZW1vdmVzIG5vZGVzIHdoZXJlIGZpbHRlciByZXR1cm5zIHRydWUgKi9cbiAgICBwcnVuZShmaWx0ZXIpIHtcbiAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIHRoaXMubm9kZXMoKSkge1xuICAgICAgICAgICAgaWYgKGZpbHRlcihub2RlLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5oZWFkLm5leHQgPSB0aGlzLmhlYWQ7XG4gICAgICAgIHRoaXMuaGVhZC5wcmV2ID0gdGhpcy5oZWFkO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgbGlzdCwgZG9lcyBub3QgcmVtb3ZlICovXG4gICAgZmlyc3QoKSB7XG4gICAgICAgIC8vIElmIHRoZSBsaXN0IGlzIGVtcHR5LCB2YWx1ZSB3aWxsIGJlIHRoZSBoZWFkJ3MgbnVsbFxuICAgICAgICByZXR1cm4gdGhpcy5oZWFkLm5leHQudmFsdWU7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBsYXN0IGl0ZW0gaW4gdGhlIGxpc3QsIGRvZXMgbm90IHJlbW92ZSAqL1xuICAgIGxhc3QoKSB7XG4gICAgICAgIC8vIElmIHRoZSBsaXN0IGlzIGVtcHR5LCB2YWx1ZSB3aWxsIGJlIHRoZSBoZWFkJ3MgbnVsbFxuICAgICAgICByZXR1cm4gdGhpcy5oZWFkLnByZXYudmFsdWU7XG4gICAgfVxufVxuZXhwb3J0cy5MaXN0ID0gTGlzdDtcbi8qKlxuICogQSBwb29sIG9mIEJ1ZmZlcnMgd2hpY2ggYWxsb3cgeW91IHRvIHJlYWQgdGhlbSBhcyBpZiB0aGV5IHdlcmUgb25lXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgQnVmZmVyUG9vbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYnVmZmVycyA9IG5ldyBMaXN0KCk7XG4gICAgICAgIHRoaXMudG90YWxCeXRlTGVuZ3RoID0gMDtcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG90YWxCeXRlTGVuZ3RoO1xuICAgIH1cbiAgICAvKiogQWRkcyBhIGJ1ZmZlciB0byB0aGUgaW50ZXJuYWwgYnVmZmVyIHBvb2wgbGlzdCAqL1xuICAgIGFwcGVuZChidWZmZXIpIHtcbiAgICAgICAgdGhpcy5idWZmZXJzLnB1c2goYnVmZmVyKTtcbiAgICAgICAgdGhpcy50b3RhbEJ5dGVMZW5ndGggKz0gYnVmZmVyLmxlbmd0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgQnVmZmVyUG9vbCBjb250YWlucyA0IGJ5dGVzIG9yIG1vcmUgY29uc3RydWN0IGFuIGludDMyIGZyb20gdGhlIGxlYWRpbmcgYnl0ZXMsXG4gICAgICogb3RoZXJ3aXNlIHJldHVybiBudWxsLiBTaXplIGNhbiBiZSBuZWdhdGl2ZSwgY2FsbGVyIHNob3VsZCBlcnJvciBjaGVjay5cbiAgICAgKi9cbiAgICBnZXRJbnQzMigpIHtcbiAgICAgICAgaWYgKHRoaXMudG90YWxCeXRlTGVuZ3RoIDwgNCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlyc3RCdWZmZXIgPSB0aGlzLmJ1ZmZlcnMuZmlyc3QoKTtcbiAgICAgICAgaWYgKGZpcnN0QnVmZmVyICE9IG51bGwgJiYgZmlyc3RCdWZmZXIuYnl0ZUxlbmd0aCA+PSA0KSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3RCdWZmZXIucmVhZEludDMyTEUoMCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVW5saWtlbHkgY2FzZTogYW4gaW50MzIgaXMgc3BsaXQgYWNyb3NzIGJ1ZmZlcnMuXG4gICAgICAgIC8vIFVzZSByZWFkIGFuZCBwdXQgdGhlIHJldHVybmVkIGJ1ZmZlciBiYWNrIG9uIHRvcFxuICAgICAgICBjb25zdCB0b3A0Qnl0ZXMgPSB0aGlzLnJlYWQoNCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdG9wNEJ5dGVzLnJlYWRJbnQzMkxFKDApO1xuICAgICAgICAvLyBQdXQgaXQgYmFjay5cbiAgICAgICAgdGhpcy50b3RhbEJ5dGVMZW5ndGggKz0gNDtcbiAgICAgICAgdGhpcy5idWZmZXJzLnVuc2hpZnQodG9wNEJ5dGVzKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICAvKiogUmVhZHMgdGhlIHJlcXVlc3RlZCBudW1iZXIgb2YgYnl0ZXMsIG9wdGlvbmFsbHkgY29uc3VtaW5nIHRoZW0gKi9cbiAgICByZWFkKHNpemUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJyB8fCBzaXplIDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignQXJndW1lbnQgXCJzaXplXCIgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBvdmVyc2l6ZWQgcmVxdWVzdCByZXR1cm5zIGVtcHR5IGJ1ZmZlclxuICAgICAgICBpZiAoc2l6ZSA+IHRoaXMudG90YWxCeXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gQnVmZmVyLmFsbG9jKDApO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIGtub3cgd2UgaGF2ZSBlbm91Z2gsIHdlIGp1c3QgZG9uJ3Qga25vdyBob3cgaXQgaXMgc3ByZWFkIGFjcm9zcyBjaHVua3NcbiAgICAgICAgLy8gVE9ETyhOT0RFLTQ3MzIpOiBhbGxvYyBBUEkgc2hvdWxkIGNoYW5nZSBiYXNlZCBvbiByYXcgb3B0aW9uXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShzaXplKTtcbiAgICAgICAgZm9yIChsZXQgYnl0ZXNSZWFkID0gMDsgYnl0ZXNSZWFkIDwgc2l6ZTspIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuYnVmZmVycy5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKGJ1ZmZlciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBieXRlc1JlbWFpbmluZyA9IHNpemUgLSBieXRlc1JlYWQ7XG4gICAgICAgICAgICBjb25zdCBieXRlc1JlYWRhYmxlID0gTWF0aC5taW4oYnl0ZXNSZW1haW5pbmcsIGJ1ZmZlci5ieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzID0gYnVmZmVyLnN1YmFycmF5KDAsIGJ5dGVzUmVhZGFibGUpO1xuICAgICAgICAgICAgcmVzdWx0LnNldChieXRlcywgYnl0ZXNSZWFkKTtcbiAgICAgICAgICAgIGJ5dGVzUmVhZCArPSBieXRlc1JlYWRhYmxlO1xuICAgICAgICAgICAgdGhpcy50b3RhbEJ5dGVMZW5ndGggLT0gYnl0ZXNSZWFkYWJsZTtcbiAgICAgICAgICAgIGlmIChieXRlc1JlYWRhYmxlIDwgYnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcnMudW5zaGlmdChidWZmZXIuc3ViYXJyYXkoYnl0ZXNSZWFkYWJsZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuZXhwb3J0cy5CdWZmZXJQb29sID0gQnVmZmVyUG9vbDtcbi8qKiBAcHVibGljICovXG5jbGFzcyBIb3N0QWRkcmVzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFN0cmluZykge1xuICAgICAgICB0aGlzLmhvc3QgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucG9ydCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zb2NrZXRQYXRoID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmlzSVB2NiA9IGZhbHNlO1xuICAgICAgICBjb25zdCBlc2NhcGVkSG9zdCA9IGhvc3RTdHJpbmcuc3BsaXQoJyAnKS5qb2luKCclMjAnKTsgLy8gZXNjYXBlIHNwYWNlcywgZm9yIHNvY2tldCBwYXRoIGhvc3RzXG4gICAgICAgIGlmIChlc2NhcGVkSG9zdC5lbmRzV2l0aCgnLnNvY2snKSkge1xuICAgICAgICAgICAgLy8gaGV1cmlzdGljYWxseSBkZXRlcm1pbmUgaWYgd2UncmUgd29ya2luZyB3aXRoIGEgZG9tYWluIHNvY2tldFxuICAgICAgICAgICAgdGhpcy5zb2NrZXRQYXRoID0gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZWRIb3N0KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1cmxTdHJpbmcgPSBgaUxvdmVKUzovLyR7ZXNjYXBlZEhvc3R9YDtcbiAgICAgICAgbGV0IHVybDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHVybCA9IG5ldyB1cmxfMS5VUkwodXJsU3RyaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAodXJsRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHJ1bnRpbWVFcnJvciA9IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBVbmFibGUgdG8gcGFyc2UgJHtlc2NhcGVkSG9zdH0gd2l0aCBVUkxgKTtcbiAgICAgICAgICAgIHJ1bnRpbWVFcnJvci5jYXVzZSA9IHVybEVycm9yO1xuICAgICAgICAgICAgdGhyb3cgcnVudGltZUVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhvc3RuYW1lID0gdXJsLmhvc3RuYW1lO1xuICAgICAgICBjb25zdCBwb3J0ID0gdXJsLnBvcnQ7XG4gICAgICAgIGxldCBub3JtYWxpemVkID0gZGVjb2RlVVJJQ29tcG9uZW50KGhvc3RuYW1lKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAobm9ybWFsaXplZC5zdGFydHNXaXRoKCdbJykgJiYgbm9ybWFsaXplZC5lbmRzV2l0aCgnXScpKSB7XG4gICAgICAgICAgICB0aGlzLmlzSVB2NiA9IHRydWU7XG4gICAgICAgICAgICBub3JtYWxpemVkID0gbm9ybWFsaXplZC5zdWJzdHJpbmcoMSwgaG9zdG5hbWUubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ob3N0ID0gbm9ybWFsaXplZC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAodHlwZW9mIHBvcnQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0aGlzLnBvcnQgPSBwb3J0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBwb3J0ID09PSAnc3RyaW5nJyAmJiBwb3J0ICE9PSAnJykge1xuICAgICAgICAgICAgdGhpcy5wb3J0ID0gTnVtYmVyLnBhcnNlSW50KHBvcnQsIDEwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucG9ydCA9IDI3MDE3O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvcnQgPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcignSW52YWxpZCBwb3J0ICh6ZXJvKSB3aXRoIGhvc3RuYW1lJyk7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmZyZWV6ZSh0aGlzKTtcbiAgICB9XG4gICAgW1N5bWJvbC5mb3IoJ25vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tJyldKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnNwZWN0KCk7XG4gICAgfVxuICAgIGluc3BlY3QoKSB7XG4gICAgICAgIHJldHVybiBgbmV3IEhvc3RBZGRyZXNzKCcke3RoaXMudG9TdHJpbmcoKX0nKWA7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuaG9zdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSVB2Nikge1xuICAgICAgICAgICAgICAgIHJldHVybiBgWyR7dGhpcy5ob3N0fV06JHt0aGlzLnBvcnR9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmhvc3R9OiR7dGhpcy5wb3J0fWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke3RoaXMuc29ja2V0UGF0aH1gO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVN0cmluZyhzKSB7XG4gICAgICAgIHJldHVybiBuZXcgSG9zdEFkZHJlc3Mocyk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSG9zdFBvcnQoaG9zdCwgcG9ydCkge1xuICAgICAgICBpZiAoaG9zdC5pbmNsdWRlcygnOicpKSB7XG4gICAgICAgICAgICBob3N0ID0gYFske2hvc3R9XWA7IC8vIElQdjYgYWRkcmVzc1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBIb3N0QWRkcmVzcy5mcm9tU3RyaW5nKGAke2hvc3R9OiR7cG9ydH1gKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21TcnZSZWNvcmQoeyBuYW1lLCBwb3J0IH0pIHtcbiAgICAgICAgcmV0dXJuIEhvc3RBZGRyZXNzLmZyb21Ib3N0UG9ydChuYW1lLCBwb3J0KTtcbiAgICB9XG4gICAgdG9Ib3N0UG9ydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc29ja2V0UGF0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgaG9zdDogdGhpcy5zb2NrZXRQYXRoLCBwb3J0OiAwIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaG9zdCA9IHRoaXMuaG9zdCA/PyAnJztcbiAgICAgICAgY29uc3QgcG9ydCA9IHRoaXMucG9ydCA/PyAwO1xuICAgICAgICByZXR1cm4geyBob3N0LCBwb3J0IH07XG4gICAgfVxufVxuZXhwb3J0cy5Ib3N0QWRkcmVzcyA9IEhvc3RBZGRyZXNzO1xuZXhwb3J0cy5ERUZBVUxUX1BLX0ZBQ1RPUlkgPSB7XG4gICAgLy8gV2UgcHJlZmVyIG5vdCB0byByZWx5IG9uIE9iamVjdElkIGhhdmluZyBhIGNyZWF0ZVBrIG1ldGhvZFxuICAgIGNyZWF0ZVBrKCkge1xuICAgICAgICByZXR1cm4gbmV3IGJzb25fMS5PYmplY3RJZCgpO1xuICAgIH1cbn07XG4vKipcbiAqIFdoZW4gdGhlIGRyaXZlciB1c2VkIGVtaXRXYXJuaW5nIHRoZSBjb2RlIHdpbGwgYmUgZXF1YWwgdG8gdGhpcy5cbiAqIEBwdWJsaWNcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIHByb2Nlc3Mub24oJ3dhcm5pbmcnLCAod2FybmluZykgPT4ge1xuICogIGlmICh3YXJuaW5nLmNvZGUgPT09IE1PTkdPREJfV0FSTklOR19DT0RFKSBjb25zb2xlLmVycm9yKCdBaCBhbiBpbXBvcnRhbnQgd2FybmluZyEgOiknKVxuICogfSlcbiAqIGBgYFxuICovXG5leHBvcnRzLk1PTkdPREJfV0FSTklOR19DT0RFID0gJ01PTkdPREIgRFJJVkVSJztcbi8qKiBAaW50ZXJuYWwgKi9cbmZ1bmN0aW9uIGVtaXRXYXJuaW5nKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5lbWl0V2FybmluZyhtZXNzYWdlLCB7IGNvZGU6IGV4cG9ydHMuTU9OR09EQl9XQVJOSU5HX0NPREUgfSk7XG59XG5leHBvcnRzLmVtaXRXYXJuaW5nID0gZW1pdFdhcm5pbmc7XG5jb25zdCBlbWl0dGVkV2FybmluZ3MgPSBuZXcgU2V0KCk7XG4vKipcbiAqIFdpbGwgZW1pdCBhIHdhcm5pbmcgb25jZSBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBhcHBsaWNhdGlvbi5cbiAqIFVzZXMgdGhlIG1lc3NhZ2UgdG8gaWRlbnRpZnkgaWYgaXQgaGFzIGFscmVhZHkgYmVlbiBlbWl0dGVkXG4gKiBzbyB1c2luZyBzdHJpbmcgaW50ZXJwb2xhdGlvbiBjYW4gY2F1c2UgbXVsdGlwbGUgZW1pdHNcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBlbWl0V2FybmluZ09uY2UobWVzc2FnZSkge1xuICAgIGlmICghZW1pdHRlZFdhcm5pbmdzLmhhcyhtZXNzYWdlKSkge1xuICAgICAgICBlbWl0dGVkV2FybmluZ3MuYWRkKG1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gZW1pdFdhcm5pbmcobWVzc2FnZSk7XG4gICAgfVxufVxuZXhwb3J0cy5lbWl0V2FybmluZ09uY2UgPSBlbWl0V2FybmluZ09uY2U7XG4vKipcbiAqIFRha2VzIGEgSlMgb2JqZWN0IGFuZCBqb2lucyB0aGUgdmFsdWVzIGludG8gYSBzdHJpbmcgc2VwYXJhdGVkIGJ5ICcsICdcbiAqL1xuZnVuY3Rpb24gZW51bVRvU3RyaW5nKGVuKSB7XG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoZW4pLmpvaW4oJywgJyk7XG59XG5leHBvcnRzLmVudW1Ub1N0cmluZyA9IGVudW1Ub1N0cmluZztcbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgc2VydmVyIHN1cHBvcnRzIHJldHJ5YWJsZSB3cml0ZXMuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHN1cHBvcnRzUmV0cnlhYmxlV3JpdGVzKHNlcnZlcikge1xuICAgIGlmICghc2VydmVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHNlcnZlci5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgLy8gTG9hZGJhbGFuY2VkIHRvcG9sb2dpZXMgd2lsbCBhbHdheXMgc3VwcG9ydCByZXRyeSB3cml0ZXNcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChzZXJ2ZXIuZGVzY3JpcHRpb24ubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyAhPSBudWxsKSB7XG4gICAgICAgIC8vIHRoYXQgc3VwcG9ydHMgc2Vzc2lvbnNcbiAgICAgICAgaWYgKHNlcnZlci5kZXNjcmlwdGlvbi50eXBlICE9PSBjb21tb25fMS5TZXJ2ZXJUeXBlLlN0YW5kYWxvbmUpIHtcbiAgICAgICAgICAgIC8vIGFuZCB0aGF0IGlzIG5vdCBhIHN0YW5kYWxvbmVcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydHMuc3VwcG9ydHNSZXRyeWFibGVXcml0ZXMgPSBzdXBwb3J0c1JldHJ5YWJsZVdyaXRlcztcbi8qKlxuICogRmlzaGVy4oCTWWF0ZXMgU2h1ZmZsZVxuICpcbiAqIFJlZmVyZW5jZTogaHR0cHM6Ly9ib3N0Lm9ja3Mub3JnL21pa2Uvc2h1ZmZsZS9cbiAqIEBwYXJhbSBzZXF1ZW5jZSAtIGl0ZW1zIHRvIGJlIHNodWZmbGVkXG4gKiBAcGFyYW0gbGltaXQgLSBEZWZhdWx0cyB0byBgMGAuIElmIG5vbnplcm8gc2h1ZmZsZSB3aWxsIHNsaWNlIHRoZSByYW5kb21pemVkIGFycmF5IGUuZywgYC5zbGljZSgwLCBsaW1pdClgIG90aGVyd2lzZSB3aWxsIHJldHVybiB0aGUgZW50aXJlIHJhbmRvbWl6ZWQgYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIHNodWZmbGUoc2VxdWVuY2UsIGxpbWl0ID0gMCkge1xuICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbShzZXF1ZW5jZSk7IC8vIHNoYWxsb3cgY29weSBpbiBvcmRlciB0byBuZXZlciBzaHVmZmxlIHRoZSBpbnB1dFxuICAgIGlmIChsaW1pdCA+IGl0ZW1zLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignTGltaXQgbXVzdCBiZSBsZXNzIHRoYW4gdGhlIG51bWJlciBvZiBpdGVtcycpO1xuICAgIH1cbiAgICBsZXQgcmVtYWluaW5nSXRlbXNUb1NodWZmbGUgPSBpdGVtcy5sZW5ndGg7XG4gICAgY29uc3QgbG93ZXJCb3VuZCA9IGxpbWl0ICUgaXRlbXMubGVuZ3RoID09PSAwID8gMSA6IGl0ZW1zLmxlbmd0aCAtIGxpbWl0O1xuICAgIHdoaWxlIChyZW1haW5pbmdJdGVtc1RvU2h1ZmZsZSA+IGxvd2VyQm91bmQpIHtcbiAgICAgICAgLy8gUGljayBhIHJlbWFpbmluZyBlbGVtZW50XG4gICAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcmVtYWluaW5nSXRlbXNUb1NodWZmbGUpO1xuICAgICAgICByZW1haW5pbmdJdGVtc1RvU2h1ZmZsZSAtPSAxO1xuICAgICAgICAvLyBBbmQgc3dhcCBpdCB3aXRoIHRoZSBjdXJyZW50IGVsZW1lbnRcbiAgICAgICAgY29uc3Qgc3dhcEhvbGQgPSBpdGVtc1tyZW1haW5pbmdJdGVtc1RvU2h1ZmZsZV07XG4gICAgICAgIGl0ZW1zW3JlbWFpbmluZ0l0ZW1zVG9TaHVmZmxlXSA9IGl0ZW1zW3JhbmRvbUluZGV4XTtcbiAgICAgICAgaXRlbXNbcmFuZG9tSW5kZXhdID0gc3dhcEhvbGQ7XG4gICAgfVxuICAgIHJldHVybiBsaW1pdCAlIGl0ZW1zLmxlbmd0aCA9PT0gMCA/IGl0ZW1zIDogaXRlbXMuc2xpY2UobG93ZXJCb3VuZCk7XG59XG5leHBvcnRzLnNodWZmbGUgPSBzaHVmZmxlO1xuLy8gVE9ETyhOT0RFLTQ5MzYpOiByZWFkIGNvbmNlcm4gZWxpZ2liaWxpdHkgZm9yIGNvbW1hbmRzIHNob3VsZCBiZSBjb2RpZmllZCBpbiBjb21tYW5kIGNvbnN0cnVjdGlvblxuLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbW9uZ29kYi9zcGVjaWZpY2F0aW9ucy9ibG9iL21hc3Rlci9zb3VyY2UvcmVhZC13cml0ZS1jb25jZXJuL3JlYWQtd3JpdGUtY29uY2Vybi5yc3QjcmVhZC1jb25jZXJuXG5mdW5jdGlvbiBjb21tYW5kU3VwcG9ydHNSZWFkQ29uY2Vybihjb21tYW5kLCBvcHRpb25zKSB7XG4gICAgaWYgKGNvbW1hbmQuYWdncmVnYXRlIHx8IGNvbW1hbmQuY291bnQgfHwgY29tbWFuZC5kaXN0aW5jdCB8fCBjb21tYW5kLmZpbmQgfHwgY29tbWFuZC5nZW9OZWFyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoY29tbWFuZC5tYXBSZWR1Y2UgJiZcbiAgICAgICAgb3B0aW9ucyAmJlxuICAgICAgICBvcHRpb25zLm91dCAmJlxuICAgICAgICAob3B0aW9ucy5vdXQuaW5saW5lID09PSAxIHx8IG9wdGlvbnMub3V0ID09PSAnaW5saW5lJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydHMuY29tbWFuZFN1cHBvcnRzUmVhZENvbmNlcm4gPSBjb21tYW5kU3VwcG9ydHNSZWFkQ29uY2Vybjtcbi8qKiBBIHV0aWxpdHkgZnVuY3Rpb24gdG8gZ2V0IHRoZSBpbnN0YW5jZSBvZiBtb25nb2RiLWNsaWVudC1lbmNyeXB0aW9uLCBpZiBpdCBleGlzdHMuICovXG5mdW5jdGlvbiBnZXRNb25nb0RCQ2xpZW50RW5jcnlwdGlvbigpIHtcbiAgICBsZXQgbW9uZ29kYkNsaWVudEVuY3J5cHRpb24gPSBudWxsO1xuICAgIC8vIE5PVEUoTk9ERS00MjU0KTogVGhpcyBpcyB0byBnZXQgYXJvdW5kIHRoZSBjaXJjdWxhciBkZXBlbmRlbmN5IGJldHdlZW5cbiAgICAvLyBtb25nb2RiLWNsaWVudC1lbmNyeXB0aW9uIGFuZCB0aGUgZHJpdmVyIGluIHRoZSB0ZXN0IHNjZW5hcmlvcy5cbiAgICBpZiAodHlwZW9mIHByb2Nlc3MuZW52Lk1PTkdPREJfQ0xJRU5UX0VOQ1JZUFRJT05fT1ZFUlJJREUgPT09ICdzdHJpbmcnICYmXG4gICAgICAgIHByb2Nlc3MuZW52Lk1PTkdPREJfQ0xJRU5UX0VOQ1JZUFRJT05fT1ZFUlJJREUubGVuZ3RoID4gMCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gTk9URShOT0RFLTMxOTkpOiBFbnN1cmUgeW91IGFsd2F5cyB3cmFwIGFuIG9wdGlvbmFsIHJlcXVpcmUgbGl0ZXJhbGx5IGluIHRoZSB0cnkgYmxvY2tcbiAgICAgICAgICAgIC8vIENhbm5vdCBiZSBtb3ZlZCB0byBoZWxwZXIgdXRpbGl0eSBmdW5jdGlvbiwgYnVuZGxlcnMgc2VhcmNoIGFuZCByZXBsYWNlIHRoZSBhY3R1YWwgcmVxdWlyZSBjYWxsXG4gICAgICAgICAgICAvLyBpbiBhIHdheSB0aGF0IG1ha2VzIHRoaXMgbGluZSB0aHJvdyBhdCBidW5kbGUgdGltZSwgbm90IHJ1bnRpbWUsIGNhdGNoaW5nIGhlcmUgd2lsbCBtYWtlIGJ1bmRsaW5nIHN1Y2NlZWRcbiAgICAgICAgICAgIG1vbmdvZGJDbGllbnRFbmNyeXB0aW9uID0gcmVxdWlyZShwcm9jZXNzLmVudi5NT05HT0RCX0NMSUVOVF9FTkNSWVBUSU9OX09WRVJSSURFKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAvLyBpZ25vcmVcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIE5PVEUoTk9ERS0zMTk5KTogRW5zdXJlIHlvdSBhbHdheXMgd3JhcCBhbiBvcHRpb25hbCByZXF1aXJlIGxpdGVyYWxseSBpbiB0aGUgdHJ5IGJsb2NrXG4gICAgICAgICAgICAvLyBDYW5ub3QgYmUgbW92ZWQgdG8gaGVscGVyIHV0aWxpdHkgZnVuY3Rpb24sIGJ1bmRsZXJzIHNlYXJjaCBhbmQgcmVwbGFjZSB0aGUgYWN0dWFsIHJlcXVpcmUgY2FsbFxuICAgICAgICAgICAgLy8gaW4gYSB3YXkgdGhhdCBtYWtlcyB0aGlzIGxpbmUgdGhyb3cgYXQgYnVuZGxlIHRpbWUsIG5vdCBydW50aW1lLCBjYXRjaGluZyBoZXJlIHdpbGwgbWFrZSBidW5kbGluZyBzdWNjZWVkXG4gICAgICAgICAgICBtb25nb2RiQ2xpZW50RW5jcnlwdGlvbiA9IHJlcXVpcmUoJ21vbmdvZGItY2xpZW50LWVuY3J5cHRpb24nKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAvLyBpZ25vcmVcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbW9uZ29kYkNsaWVudEVuY3J5cHRpb247XG59XG5leHBvcnRzLmdldE1vbmdvREJDbGllbnRFbmNyeXB0aW9uID0gZ2V0TW9uZ29EQkNsaWVudEVuY3J5cHRpb247XG4vKipcbiAqIENvbXBhcmUgb2JqZWN0SWRzLiBgbnVsbGAgaXMgYWx3YXlzIGxlc3NcbiAqIC0gYCsxID0gb2lkMSBpcyBncmVhdGVyIHRoYW4gb2lkMmBcbiAqIC0gYC0xID0gb2lkMSBpcyBsZXNzIHRoYW4gb2lkMmBcbiAqIC0gYCswID0gb2lkMSBpcyBlcXVhbCBvaWQyYFxuICovXG5mdW5jdGlvbiBjb21wYXJlT2JqZWN0SWQob2lkMSwgb2lkMikge1xuICAgIGlmIChvaWQxID09IG51bGwgJiYgb2lkMiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBpZiAob2lkMSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgaWYgKG9pZDIgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgcmV0dXJuIGV4cG9ydHMuQnl0ZVV0aWxzLmNvbXBhcmUob2lkMS5pZCwgb2lkMi5pZCk7XG59XG5leHBvcnRzLmNvbXBhcmVPYmplY3RJZCA9IGNvbXBhcmVPYmplY3RJZDtcbmZ1bmN0aW9uIHBhcnNlSW50ZWdlcih2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKVxuICAgICAgICByZXR1cm4gTWF0aC50cnVuYyh2YWx1ZSk7XG4gICAgY29uc3QgcGFyc2VkVmFsdWUgPSBOdW1iZXIucGFyc2VJbnQoU3RyaW5nKHZhbHVlKSwgMTApO1xuICAgIHJldHVybiBOdW1iZXIuaXNOYU4ocGFyc2VkVmFsdWUpID8gbnVsbCA6IHBhcnNlZFZhbHVlO1xufVxuZXhwb3J0cy5wYXJzZUludGVnZXIgPSBwYXJzZUludGVnZXI7XG5mdW5jdGlvbiBwYXJzZVVuc2lnbmVkSW50ZWdlcih2YWx1ZSkge1xuICAgIGNvbnN0IHBhcnNlZEludCA9IHBhcnNlSW50ZWdlcih2YWx1ZSk7XG4gICAgcmV0dXJuIHBhcnNlZEludCAhPSBudWxsICYmIHBhcnNlZEludCA+PSAwID8gcGFyc2VkSW50IDogbnVsbDtcbn1cbmV4cG9ydHMucGFyc2VVbnNpZ25lZEludGVnZXIgPSBwYXJzZVVuc2lnbmVkSW50ZWdlcjtcbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGEgcHJvdmlkZWQgYWRkcmVzcyBtYXRjaGVzIHRoZSBwcm92aWRlZCBwYXJlbnQgZG9tYWluLlxuICpcbiAqIElmIGEgRE5TIHNlcnZlciB3ZXJlIHRvIGJlY29tZSBjb21wcm9taXNlZCBTUlYgcmVjb3JkcyB3b3VsZCBzdGlsbCBuZWVkIHRvXG4gKiBhZHZlcnRpc2UgYWRkcmVzc2VzIHRoYXQgYXJlIHVuZGVyIHRoZSBzYW1lIGRvbWFpbiBhcyB0aGUgc3J2SG9zdC5cbiAqXG4gKiBAcGFyYW0gYWRkcmVzcyAtIFRoZSBhZGRyZXNzIHRvIGNoZWNrIGFnYWluc3QgYSBkb21haW5cbiAqIEBwYXJhbSBzcnZIb3N0IC0gVGhlIGRvbWFpbiB0byBjaGVjayB0aGUgcHJvdmlkZWQgYWRkcmVzcyBhZ2FpbnN0XG4gKiBAcmV0dXJucyBXaGV0aGVyIHRoZSBwcm92aWRlZCBhZGRyZXNzIG1hdGNoZXMgdGhlIHBhcmVudCBkb21haW5cbiAqL1xuZnVuY3Rpb24gbWF0Y2hlc1BhcmVudERvbWFpbihhZGRyZXNzLCBzcnZIb3N0KSB7XG4gICAgLy8gUmVtb3ZlIHRyYWlsaW5nIGRvdCBpZiBleGlzdHMgb24gZWl0aGVyIHRoZSByZXNvbHZlZCBhZGRyZXNzIG9yIHRoZSBzcnYgaG9zdG5hbWVcbiAgICBjb25zdCBub3JtYWxpemVkQWRkcmVzcyA9IGFkZHJlc3MuZW5kc1dpdGgoJy4nKSA/IGFkZHJlc3Muc2xpY2UoMCwgYWRkcmVzcy5sZW5ndGggLSAxKSA6IGFkZHJlc3M7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNydkhvc3QgPSBzcnZIb3N0LmVuZHNXaXRoKCcuJykgPyBzcnZIb3N0LnNsaWNlKDAsIHNydkhvc3QubGVuZ3RoIC0gMSkgOiBzcnZIb3N0O1xuICAgIGNvbnN0IGFsbENoYXJhY3RlckJlZm9yZUZpcnN0RG90ID0gL14uKj9cXC4vO1xuICAgIC8vIFJlbW92ZSBhbGwgY2hhcmFjdGVycyBiZWZvcmUgZmlyc3QgZG90XG4gICAgLy8gQWRkIGxlYWRpbmcgZG90IGJhY2sgdG8gc3RyaW5nIHNvXG4gICAgLy8gICBhbiBzcnZIb3N0RG9tYWluID0gJy50cnVzdGVkLnNpdGUnXG4gICAgLy8gICB3aWxsIG5vdCBzYXRpc2Z5IGFuIGFkZHJlc3NEb21haW4gdGhhdCBlbmRzV2l0aCAnLmZha2UtdHJ1c3RlZC5zaXRlJ1xuICAgIGNvbnN0IGFkZHJlc3NEb21haW4gPSBgLiR7bm9ybWFsaXplZEFkZHJlc3MucmVwbGFjZShhbGxDaGFyYWN0ZXJCZWZvcmVGaXJzdERvdCwgJycpfWA7XG4gICAgY29uc3Qgc3J2SG9zdERvbWFpbiA9IGAuJHtub3JtYWxpemVkU3J2SG9zdC5yZXBsYWNlKGFsbENoYXJhY3RlckJlZm9yZUZpcnN0RG90LCAnJyl9YDtcbiAgICByZXR1cm4gYWRkcmVzc0RvbWFpbi5lbmRzV2l0aChzcnZIb3N0RG9tYWluKTtcbn1cbmV4cG9ydHMubWF0Y2hlc1BhcmVudERvbWFpbiA9IG1hdGNoZXNQYXJlbnREb21haW47XG5hc3luYyBmdW5jdGlvbiByZXF1ZXN0KHVyaSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgdGltZW91dDogMTAwMDAsXG4gICAgICAgICAgICBqc29uOiB0cnVlLFxuICAgICAgICAgICAgLi4udXJsLnBhcnNlKHVyaSksXG4gICAgICAgICAgICAuLi5vcHRpb25zXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlcSA9IGh0dHAucmVxdWVzdChyZXF1ZXN0T3B0aW9ucywgcmVzID0+IHtcbiAgICAgICAgICAgIHJlcy5zZXRFbmNvZGluZygndXRmOCcpO1xuICAgICAgICAgICAgbGV0IGRhdGEgPSAnJztcbiAgICAgICAgICAgIHJlcy5vbignZGF0YScsIGQgPT4ge1xuICAgICAgICAgICAgICAgIGRhdGEgKz0gZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVzLm9uY2UoJ2VuZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5qc29uID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocGFyc2VkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4MylcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBJbnZhbGlkIEpTT04gcmVzcG9uc2U6IFwiJHtkYXRhfVwiYCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVxLm9uY2UoJ3RpbWVvdXQnLCAoKSA9PiByZXEuZGVzdHJveShuZXcgZXJyb3JfMS5Nb25nb05ldHdvcmtUaW1lb3V0RXJyb3IoYE5ldHdvcmsgcmVxdWVzdCB0byAke3VyaX0gdGltZWQgb3V0IGFmdGVyICR7b3B0aW9ucy50aW1lb3V0fSBtc2ApKSk7XG4gICAgICAgIHJlcS5vbmNlKCdlcnJvcicsIGVycm9yID0+IHJlamVjdChlcnJvcikpO1xuICAgICAgICByZXEuZW5kKCk7XG4gICAgfSk7XG59XG5leHBvcnRzLnJlcXVlc3QgPSByZXF1ZXN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwibWF0Y2hlc1BhcmVudERvbWFpbiIsInBhcnNlVW5zaWduZWRJbnRlZ2VyIiwicGFyc2VJbnRlZ2VyIiwiY29tcGFyZU9iamVjdElkIiwiZ2V0TW9uZ29EQkNsaWVudEVuY3J5cHRpb24iLCJjb21tYW5kU3VwcG9ydHNSZWFkQ29uY2VybiIsInNodWZmbGUiLCJzdXBwb3J0c1JldHJ5YWJsZVdyaXRlcyIsImVudW1Ub1N0cmluZyIsImVtaXRXYXJuaW5nT25jZSIsImVtaXRXYXJuaW5nIiwiTU9OR09EQl9XQVJOSU5HX0NPREUiLCJERUZBVUxUX1BLX0ZBQ1RPUlkiLCJIb3N0QWRkcmVzcyIsIkJ1ZmZlclBvb2wiLCJMaXN0IiwiZGVlcENvcHkiLCJpc1JlY29yZCIsInNldERpZmZlcmVuY2UiLCJpc0hlbGxvIiwiaXNTdXBlcnNldCIsInJlc29sdmVPcHRpb25zIiwiaGFzQXRvbWljT3BlcmF0b3JzIiwiY2FsY3VsYXRlRHVyYXRpb25Jbk1zIiwibm93IiwibWFrZVN0YXRlTWFjaGluZSIsImVycm9yU3RyaWN0RXF1YWwiLCJhcnJheVN0cmljdEVxdWFsIiwiZWFjaEFzeW5jIiwibWF4V2lyZVZlcnNpb24iLCJ1dWlkVjQiLCJkYXRhYmFzZU5hbWVzcGFjZSIsIm1heWJlQ2FsbGJhY2siLCJtYWtlQ291bnRlciIsIk1vbmdvREJDb2xsZWN0aW9uTmFtZXNwYWNlIiwiTW9uZ29EQk5hbWVzcGFjZSIsIm5zIiwiZ2V0VG9wb2xvZ3kiLCJkZWNvcmF0ZVdpdGhFeHBsYWluIiwiZGVjb3JhdGVXaXRoUmVhZENvbmNlcm4iLCJkZWNvcmF0ZVdpdGhDb2xsYXRpb24iLCJpc1Byb21pc2VMaWtlIiwiYXBwbHlSZXRyeWFibGVXcml0ZXMiLCJmaWx0ZXJPcHRpb25zIiwibWVyZ2VPcHRpb25zIiwiaXNPYmplY3QiLCJub3JtYWxpemVIaW50RmllbGQiLCJjaGVja0NvbGxlY3Rpb25OYW1lIiwiaG9zdE1hdGNoZXNXaWxkY2FyZHMiLCJCeXRlVXRpbHMiLCJyZXF1ZXN0IiwiY3J5cHRvIiwicmVxdWlyZSIsImh0dHAiLCJ1cmwiLCJ1cmxfMSIsImJzb25fMSIsImNvbnN0YW50c18xIiwiY29uc3RhbnRzXzIiLCJlcnJvcl8xIiwicmVhZF9jb25jZXJuXzEiLCJyZWFkX3ByZWZlcmVuY2VfMSIsImNvbW1vbl8xIiwid3JpdGVfY29uY2Vybl8xIiwidG9Mb2NhbEJ1ZmZlclR5cGUiLCJidWZmZXIiLCJCdWZmZXIiLCJpc0J1ZmZlciIsImZyb20iLCJieXRlT2Zmc2V0IiwiYnl0ZUxlbmd0aCIsImVxdWFscyIsInNlcUEiLCJzZXFCIiwiY29tcGFyZSIsInRvQmFzZTY0IiwidWludDhhcnJheSIsInRvU3RyaW5nIiwiaG9zdCIsIndpbGRjYXJkcyIsIndpbGRjYXJkIiwic3RhcnRzV2l0aCIsImVuZHNXaXRoIiwic3Vic3RyaW5nIiwibGVuZ3RoIiwiY29sbGVjdGlvbk5hbWUiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiaW5kZXhPZiIsIm1hdGNoIiwiaGludCIsImZpbmFsSGludCIsInVuZGVmaW5lZCIsIkFycmF5IiwiaXNBcnJheSIsImZvckVhY2giLCJwYXJhbSIsIm5hbWUiLCJUT19TVFJJTkciLCJvYmplY3QiLCJwcm90b3R5cGUiLCJjYWxsIiwiYXJnIiwidGFyZ2V0Iiwic291cmNlIiwib3B0aW9ucyIsIm5hbWVzIiwiaW5jbHVkZXMiLCJkYiIsInMiLCJyZXRyeVdyaXRlcyIsInRoZW4iLCJjb21tYW5kIiwiY2FwYWJpbGl0aWVzIiwiY29sbGF0aW9uIiwiY29tbWFuZHNUYWtlQ29sbGF0aW9uIiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCJjb2xsIiwic2Vzc2lvbiIsImluVHJhbnNhY3Rpb24iLCJyZWFkQ29uY2VybiIsImFzc2lnbiIsImtleXMiLCJleHBsYWluIiwidmVyYm9zaXR5IiwicHJvdmlkZXIiLCJ0b3BvbG9neSIsImNsaWVudCIsIk1vbmdvTm90Q29ubmVjdGVkRXJyb3IiLCJmcm9tU3RyaW5nIiwiY29uc3RydWN0b3IiLCJjb2xsZWN0aW9uIiwid2l0aENvbGxlY3Rpb24iLCJuYW1lc3BhY2UiLCJNb25nb1J1bnRpbWVFcnJvciIsImNvbGxlY3Rpb25QYXJ0cyIsInNwbGl0Iiwiam9pbiIsInNlZWQiLCJjb3VudCIsIm5ld0NvdW50IiwicHJvbWlzZUZuIiwiY2FsbGJhY2siLCJwcm9taXNlIiwicmVzdWx0IiwiZXJyb3IiLCJyYW5kb21CeXRlcyIsInRvcG9sb2d5T3JTZXJ2ZXIiLCJsb2FkQmFsYW5jZWQiLCJNQVhfU1VQUE9SVEVEX1dJUkVfVkVSU0lPTiIsImhlbGxvIiwibGFzdEhlbGxvIiwiZGVzY3JpcHRpb24iLCJhcnIiLCJlYWNoRm4iLCJpZHgiLCJhd2FpdGluZyIsImVhY2hDYWxsYmFjayIsImVyciIsImFycjIiLCJldmVyeSIsImVsdCIsImxocyIsInJocyIsIm1lc3NhZ2UiLCJzdGF0ZVRhYmxlIiwic3RhdGVUcmFuc2l0aW9uIiwibmV3U3RhdGUiLCJsZWdhbFN0YXRlcyIsInN0YXRlIiwiZW1pdCIsImhydGltZSIsInByb2Nlc3MiLCJNYXRoIiwiZmxvb3IiLCJzdGFydGVkIiwiZWxhcHNlZCIsImRvYyIsImRvY3VtZW50IiwicGFyZW50IiwicmVzb2x2ZUJTT05PcHRpb25zIiwiUmVhZENvbmNlcm4iLCJmcm9tT3B0aW9ucyIsIndyaXRlQ29uY2VybiIsIldyaXRlQ29uY2VybiIsInJlYWRQcmVmZXJlbmNlIiwiUmVhZFByZWZlcmVuY2UiLCJzZXQiLCJzdWJzZXQiLCJTZXQiLCJlbGVtIiwiaGFzIiwiTEVHQUNZX0hFTExPX0NPTU1BTkQiLCJzZXRBIiwic2V0QiIsImRpZmZlcmVuY2UiLCJkZWxldGUiLCJIQVNfT1dOIiwicHJvcCIsImhhc093blByb3BlcnR5IiwicmVxdWlyZWRLZXlzIiwiY3RvciIsIm1hcCIsIml0ZW0iLCJyZXMiLCJrZXkiLCJ0b0xvd2VyQ2FzZSIsIk51bWJlciIsIk1hcCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiaGVhZCIsIm5leHQiLCJwcmV2IiwidG9BcnJheSIsIml0ZXJhdG9yIiwibm9kZSIsIm5vZGVzIiwicHRyIiwicHVzaCIsIm5ld05vZGUiLCJwdXNoTWFueSIsIml0ZXJhYmxlIiwidW5zaGlmdCIsInJlbW92ZSIsInByZXZOb2RlIiwibmV4dE5vZGUiLCJzaGlmdCIsInBvcCIsInBydW5lIiwiZmlsdGVyIiwiY2xlYXIiLCJmaXJzdCIsImxhc3QiLCJidWZmZXJzIiwidG90YWxCeXRlTGVuZ3RoIiwiYXBwZW5kIiwiZ2V0SW50MzIiLCJmaXJzdEJ1ZmZlciIsInJlYWRJbnQzMkxFIiwidG9wNEJ5dGVzIiwicmVhZCIsInNpemUiLCJhbGxvYyIsImFsbG9jVW5zYWZlIiwiYnl0ZXNSZWFkIiwiYnl0ZXNSZW1haW5pbmciLCJieXRlc1JlYWRhYmxlIiwibWluIiwiYnl0ZXMiLCJzdWJhcnJheSIsImhvc3RTdHJpbmciLCJwb3J0Iiwic29ja2V0UGF0aCIsImlzSVB2NiIsImVzY2FwZWRIb3N0IiwiZGVjb2RlVVJJQ29tcG9uZW50IiwidXJsU3RyaW5nIiwiVVJMIiwidXJsRXJyb3IiLCJydW50aW1lRXJyb3IiLCJjYXVzZSIsImhvc3RuYW1lIiwibm9ybWFsaXplZCIsInBhcnNlSW50IiwiTW9uZ29QYXJzZUVycm9yIiwiZnJlZXplIiwiZm9yIiwiaW5zcGVjdCIsImZyb21Ib3N0UG9ydCIsImZyb21TcnZSZWNvcmQiLCJ0b0hvc3RQb3J0IiwiY3JlYXRlUGsiLCJPYmplY3RJZCIsImNvZGUiLCJlbWl0dGVkV2FybmluZ3MiLCJhZGQiLCJlbiIsInZhbHVlcyIsInNlcnZlciIsImxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMiLCJ0eXBlIiwiU2VydmVyVHlwZSIsIlN0YW5kYWxvbmUiLCJzZXF1ZW5jZSIsImxpbWl0IiwiaXRlbXMiLCJyZW1haW5pbmdJdGVtc1RvU2h1ZmZsZSIsImxvd2VyQm91bmQiLCJyYW5kb21JbmRleCIsInJhbmRvbSIsInN3YXBIb2xkIiwic2xpY2UiLCJhZ2dyZWdhdGUiLCJkaXN0aW5jdCIsImZpbmQiLCJnZW9OZWFyIiwibWFwUmVkdWNlIiwib3V0IiwiaW5saW5lIiwibW9uZ29kYkNsaWVudEVuY3J5cHRpb24iLCJlbnYiLCJNT05HT0RCX0NMSUVOVF9FTkNSWVBUSU9OX09WRVJSSURFIiwib2lkMSIsIm9pZDIiLCJpZCIsInRydW5jIiwicGFyc2VkVmFsdWUiLCJTdHJpbmciLCJpc05hTiIsInBhcnNlZEludCIsImFkZHJlc3MiLCJzcnZIb3N0Iiwibm9ybWFsaXplZEFkZHJlc3MiLCJub3JtYWxpemVkU3J2SG9zdCIsImFsbENoYXJhY3RlckJlZm9yZUZpcnN0RG90IiwiYWRkcmVzc0RvbWFpbiIsInJlcGxhY2UiLCJzcnZIb3N0RG9tYWluIiwidXJpIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZXF1ZXN0T3B0aW9ucyIsIm1ldGhvZCIsInRpbWVvdXQiLCJqc29uIiwicGFyc2UiLCJyZXEiLCJzZXRFbmNvZGluZyIsImRhdGEiLCJvbiIsImQiLCJvbmNlIiwicGFyc2VkIiwiSlNPTiIsImRlc3Ryb3kiLCJNb25nb05ldHdvcmtUaW1lb3V0RXJyb3IiLCJlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/write_concern.js":
/*!***************************************************!*\
  !*** ./node_modules/mongodb/lib/write_concern.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.WriteConcern = exports.WRITE_CONCERN_KEYS = void 0;\nexports.WRITE_CONCERN_KEYS = [\n    \"w\",\n    \"wtimeout\",\n    \"j\",\n    \"journal\",\n    \"fsync\"\n];\n/**\n * A MongoDB WriteConcern, which describes the level of acknowledgement\n * requested from MongoDB for write operations.\n * @public\n *\n * @see https://www.mongodb.com/docs/manual/reference/write-concern/\n */ class WriteConcern {\n    /**\n     * Constructs a WriteConcern from the write concern properties.\n     * @param w - request acknowledgment that the write operation has propagated to a specified number of mongod instances or to mongod instances with specified tags.\n     * @param wtimeoutMS - specify a time limit to prevent write operations from blocking indefinitely\n     * @param journal - request acknowledgment that the write operation has been written to the on-disk journal\n     * @param fsync - equivalent to the j option. Is deprecated and will be removed in the next major version.\n     */ constructor(w, wtimeoutMS, journal, fsync){\n        if (w != null) {\n            if (!Number.isNaN(Number(w))) {\n                this.w = Number(w);\n            } else {\n                this.w = w;\n            }\n        }\n        if (wtimeoutMS != null) {\n            this.wtimeoutMS = this.wtimeout = wtimeoutMS;\n        }\n        if (journal != null) {\n            this.journal = this.j = journal;\n        }\n        if (fsync != null) {\n            this.journal = this.j = fsync ? true : false;\n        }\n    }\n    /**\n     * Apply a write concern to a command document. Will modify and return the command.\n     */ static apply(command, writeConcern) {\n        const wc = {};\n        // The write concern document sent to the server has w/wtimeout/j fields.\n        if (writeConcern.w != null) wc.w = writeConcern.w;\n        if (writeConcern.wtimeoutMS != null) wc.wtimeout = writeConcern.wtimeoutMS;\n        if (writeConcern.journal != null) wc.j = writeConcern.j;\n        command.writeConcern = wc;\n        return command;\n    }\n    /** Construct a WriteConcern given an options object. */ static fromOptions(options, inherit) {\n        if (options == null) return undefined;\n        inherit = inherit ?? {};\n        let opts;\n        if (typeof options === \"string\" || typeof options === \"number\") {\n            opts = {\n                w: options\n            };\n        } else if (options instanceof WriteConcern) {\n            opts = options;\n        } else {\n            opts = options.writeConcern;\n        }\n        const parentOpts = inherit instanceof WriteConcern ? inherit : inherit.writeConcern;\n        const { w = undefined, wtimeout = undefined, j = undefined, fsync = undefined, journal = undefined, wtimeoutMS = undefined } = {\n            ...parentOpts,\n            ...opts\n        };\n        if (w != null || wtimeout != null || wtimeoutMS != null || j != null || journal != null || fsync != null) {\n            return new WriteConcern(w, wtimeout ?? wtimeoutMS, j ?? journal, fsync);\n        }\n        return undefined;\n    }\n}\nexports.WriteConcern = WriteConcern; //# sourceMappingURL=write_concern.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvd3JpdGVfY29uY2Vybi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsb0JBQW9CLEdBQUdBLDBCQUEwQixHQUFHLEtBQUs7QUFDekRBLDBCQUEwQixHQUFHO0lBQUM7SUFBSztJQUFZO0lBQUs7SUFBVztDQUFRO0FBQ3ZFOzs7Ozs7Q0FNQyxHQUNELE1BQU1FO0lBQ0Y7Ozs7OztLQU1DLEdBQ0RFLFlBQVlDLENBQUMsRUFBRUMsVUFBVSxFQUFFQyxPQUFPLEVBQUVDLEtBQUssQ0FBRTtRQUN2QyxJQUFJSCxLQUFLLE1BQU07WUFDWCxJQUFJLENBQUNJLE9BQU9DLEtBQUssQ0FBQ0QsT0FBT0osS0FBSztnQkFDMUIsSUFBSSxDQUFDQSxDQUFDLEdBQUdJLE9BQU9KO1lBQ3BCLE9BQ0s7Z0JBQ0QsSUFBSSxDQUFDQSxDQUFDLEdBQUdBO1lBQ2I7UUFDSjtRQUNBLElBQUlDLGNBQWMsTUFBTTtZQUNwQixJQUFJLENBQUNBLFVBQVUsR0FBRyxJQUFJLENBQUNLLFFBQVEsR0FBR0w7UUFDdEM7UUFDQSxJQUFJQyxXQUFXLE1BQU07WUFDakIsSUFBSSxDQUFDQSxPQUFPLEdBQUcsSUFBSSxDQUFDSyxDQUFDLEdBQUdMO1FBQzVCO1FBQ0EsSUFBSUMsU0FBUyxNQUFNO1lBQ2YsSUFBSSxDQUFDRCxPQUFPLEdBQUcsSUFBSSxDQUFDSyxDQUFDLEdBQUdKLFFBQVEsT0FBTztRQUMzQztJQUNKO0lBQ0E7O0tBRUMsR0FDRCxPQUFPSyxNQUFNQyxPQUFPLEVBQUVDLFlBQVksRUFBRTtRQUNoQyxNQUFNQyxLQUFLLENBQUM7UUFDWix5RUFBeUU7UUFDekUsSUFBSUQsYUFBYVYsQ0FBQyxJQUFJLE1BQ2xCVyxHQUFHWCxDQUFDLEdBQUdVLGFBQWFWLENBQUM7UUFDekIsSUFBSVUsYUFBYVQsVUFBVSxJQUFJLE1BQzNCVSxHQUFHTCxRQUFRLEdBQUdJLGFBQWFULFVBQVU7UUFDekMsSUFBSVMsYUFBYVIsT0FBTyxJQUFJLE1BQ3hCUyxHQUFHSixDQUFDLEdBQUdHLGFBQWFILENBQUM7UUFDekJFLFFBQVFDLFlBQVksR0FBR0M7UUFDdkIsT0FBT0Y7SUFDWDtJQUNBLHNEQUFzRCxHQUN0RCxPQUFPRyxZQUFZQyxPQUFPLEVBQUVDLE9BQU8sRUFBRTtRQUNqQyxJQUFJRCxXQUFXLE1BQ1gsT0FBT0U7UUFDWEQsVUFBVUEsV0FBVyxDQUFDO1FBQ3RCLElBQUlFO1FBQ0osSUFBSSxPQUFPSCxZQUFZLFlBQVksT0FBT0EsWUFBWSxVQUFVO1lBQzVERyxPQUFPO2dCQUFFaEIsR0FBR2E7WUFBUTtRQUN4QixPQUNLLElBQUlBLG1CQUFtQmhCLGNBQWM7WUFDdENtQixPQUFPSDtRQUNYLE9BQ0s7WUFDREcsT0FBT0gsUUFBUUgsWUFBWTtRQUMvQjtRQUNBLE1BQU1PLGFBQWFILG1CQUFtQmpCLGVBQWVpQixVQUFVQSxRQUFRSixZQUFZO1FBQ25GLE1BQU0sRUFBRVYsSUFBSWUsU0FBUyxFQUFFVCxXQUFXUyxTQUFTLEVBQUVSLElBQUlRLFNBQVMsRUFBRVosUUFBUVksU0FBUyxFQUFFYixVQUFVYSxTQUFTLEVBQUVkLGFBQWFjLFNBQVMsRUFBRSxHQUFHO1lBQzNILEdBQUdFLFVBQVU7WUFDYixHQUFHRCxJQUFJO1FBQ1g7UUFDQSxJQUFJaEIsS0FBSyxRQUNMTSxZQUFZLFFBQ1pMLGNBQWMsUUFDZE0sS0FBSyxRQUNMTCxXQUFXLFFBQ1hDLFNBQVMsTUFBTTtZQUNmLE9BQU8sSUFBSU4sYUFBYUcsR0FBR00sWUFBWUwsWUFBWU0sS0FBS0wsU0FBU0M7UUFDckU7UUFDQSxPQUFPWTtJQUNYO0FBQ0o7QUFDQXBCLG9CQUFvQixHQUFHRSxjQUN2Qix5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWF1dGgtcmVnaXN0ZXIvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvd3JpdGVfY29uY2Vybi5qcz8yM2IwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Xcml0ZUNvbmNlcm4gPSBleHBvcnRzLldSSVRFX0NPTkNFUk5fS0VZUyA9IHZvaWQgMDtcbmV4cG9ydHMuV1JJVEVfQ09OQ0VSTl9LRVlTID0gWyd3JywgJ3d0aW1lb3V0JywgJ2onLCAnam91cm5hbCcsICdmc3luYyddO1xuLyoqXG4gKiBBIE1vbmdvREIgV3JpdGVDb25jZXJuLCB3aGljaCBkZXNjcmliZXMgdGhlIGxldmVsIG9mIGFja25vd2xlZGdlbWVudFxuICogcmVxdWVzdGVkIGZyb20gTW9uZ29EQiBmb3Igd3JpdGUgb3BlcmF0aW9ucy5cbiAqIEBwdWJsaWNcbiAqXG4gKiBAc2VlIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS93cml0ZS1jb25jZXJuL1xuICovXG5jbGFzcyBXcml0ZUNvbmNlcm4ge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBXcml0ZUNvbmNlcm4gZnJvbSB0aGUgd3JpdGUgY29uY2VybiBwcm9wZXJ0aWVzLlxuICAgICAqIEBwYXJhbSB3IC0gcmVxdWVzdCBhY2tub3dsZWRnbWVudCB0aGF0IHRoZSB3cml0ZSBvcGVyYXRpb24gaGFzIHByb3BhZ2F0ZWQgdG8gYSBzcGVjaWZpZWQgbnVtYmVyIG9mIG1vbmdvZCBpbnN0YW5jZXMgb3IgdG8gbW9uZ29kIGluc3RhbmNlcyB3aXRoIHNwZWNpZmllZCB0YWdzLlxuICAgICAqIEBwYXJhbSB3dGltZW91dE1TIC0gc3BlY2lmeSBhIHRpbWUgbGltaXQgdG8gcHJldmVudCB3cml0ZSBvcGVyYXRpb25zIGZyb20gYmxvY2tpbmcgaW5kZWZpbml0ZWx5XG4gICAgICogQHBhcmFtIGpvdXJuYWwgLSByZXF1ZXN0IGFja25vd2xlZGdtZW50IHRoYXQgdGhlIHdyaXRlIG9wZXJhdGlvbiBoYXMgYmVlbiB3cml0dGVuIHRvIHRoZSBvbi1kaXNrIGpvdXJuYWxcbiAgICAgKiBAcGFyYW0gZnN5bmMgLSBlcXVpdmFsZW50IHRvIHRoZSBqIG9wdGlvbi4gSXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24uXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iodywgd3RpbWVvdXRNUywgam91cm5hbCwgZnN5bmMpIHtcbiAgICAgICAgaWYgKHcgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4oTnVtYmVyKHcpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudyA9IE51bWJlcih3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudyA9IHc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHd0aW1lb3V0TVMgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy53dGltZW91dE1TID0gdGhpcy53dGltZW91dCA9IHd0aW1lb3V0TVM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGpvdXJuYWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5qb3VybmFsID0gdGhpcy5qID0gam91cm5hbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZnN5bmMgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5qb3VybmFsID0gdGhpcy5qID0gZnN5bmMgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbHkgYSB3cml0ZSBjb25jZXJuIHRvIGEgY29tbWFuZCBkb2N1bWVudC4gV2lsbCBtb2RpZnkgYW5kIHJldHVybiB0aGUgY29tbWFuZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXBwbHkoY29tbWFuZCwgd3JpdGVDb25jZXJuKSB7XG4gICAgICAgIGNvbnN0IHdjID0ge307XG4gICAgICAgIC8vIFRoZSB3cml0ZSBjb25jZXJuIGRvY3VtZW50IHNlbnQgdG8gdGhlIHNlcnZlciBoYXMgdy93dGltZW91dC9qIGZpZWxkcy5cbiAgICAgICAgaWYgKHdyaXRlQ29uY2Vybi53ICE9IG51bGwpXG4gICAgICAgICAgICB3Yy53ID0gd3JpdGVDb25jZXJuLnc7XG4gICAgICAgIGlmICh3cml0ZUNvbmNlcm4ud3RpbWVvdXRNUyAhPSBudWxsKVxuICAgICAgICAgICAgd2Mud3RpbWVvdXQgPSB3cml0ZUNvbmNlcm4ud3RpbWVvdXRNUztcbiAgICAgICAgaWYgKHdyaXRlQ29uY2Vybi5qb3VybmFsICE9IG51bGwpXG4gICAgICAgICAgICB3Yy5qID0gd3JpdGVDb25jZXJuLmo7XG4gICAgICAgIGNvbW1hbmQud3JpdGVDb25jZXJuID0gd2M7XG4gICAgICAgIHJldHVybiBjb21tYW5kO1xuICAgIH1cbiAgICAvKiogQ29uc3RydWN0IGEgV3JpdGVDb25jZXJuIGdpdmVuIGFuIG9wdGlvbnMgb2JqZWN0LiAqL1xuICAgIHN0YXRpYyBmcm9tT3B0aW9ucyhvcHRpb25zLCBpbmhlcml0KSB7XG4gICAgICAgIGlmIChvcHRpb25zID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICBpbmhlcml0ID0gaW5oZXJpdCA/PyB7fTtcbiAgICAgICAgbGV0IG9wdHM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIG9wdGlvbnMgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBvcHRzID0geyB3OiBvcHRpb25zIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucyBpbnN0YW5jZW9mIFdyaXRlQ29uY2Vybikge1xuICAgICAgICAgICAgb3B0cyA9IG9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRzID0gb3B0aW9ucy53cml0ZUNvbmNlcm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyZW50T3B0cyA9IGluaGVyaXQgaW5zdGFuY2VvZiBXcml0ZUNvbmNlcm4gPyBpbmhlcml0IDogaW5oZXJpdC53cml0ZUNvbmNlcm47XG4gICAgICAgIGNvbnN0IHsgdyA9IHVuZGVmaW5lZCwgd3RpbWVvdXQgPSB1bmRlZmluZWQsIGogPSB1bmRlZmluZWQsIGZzeW5jID0gdW5kZWZpbmVkLCBqb3VybmFsID0gdW5kZWZpbmVkLCB3dGltZW91dE1TID0gdW5kZWZpbmVkIH0gPSB7XG4gICAgICAgICAgICAuLi5wYXJlbnRPcHRzLFxuICAgICAgICAgICAgLi4ub3B0c1xuICAgICAgICB9O1xuICAgICAgICBpZiAodyAhPSBudWxsIHx8XG4gICAgICAgICAgICB3dGltZW91dCAhPSBudWxsIHx8XG4gICAgICAgICAgICB3dGltZW91dE1TICE9IG51bGwgfHxcbiAgICAgICAgICAgIGogIT0gbnVsbCB8fFxuICAgICAgICAgICAgam91cm5hbCAhPSBudWxsIHx8XG4gICAgICAgICAgICBmc3luYyAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFdyaXRlQ29uY2Vybih3LCB3dGltZW91dCA/PyB3dGltZW91dE1TLCBqID8/IGpvdXJuYWwsIGZzeW5jKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbmV4cG9ydHMuV3JpdGVDb25jZXJuID0gV3JpdGVDb25jZXJuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d3JpdGVfY29uY2Vybi5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJXcml0ZUNvbmNlcm4iLCJXUklURV9DT05DRVJOX0tFWVMiLCJjb25zdHJ1Y3RvciIsInciLCJ3dGltZW91dE1TIiwiam91cm5hbCIsImZzeW5jIiwiTnVtYmVyIiwiaXNOYU4iLCJ3dGltZW91dCIsImoiLCJhcHBseSIsImNvbW1hbmQiLCJ3cml0ZUNvbmNlcm4iLCJ3YyIsImZyb21PcHRpb25zIiwib3B0aW9ucyIsImluaGVyaXQiLCJ1bmRlZmluZWQiLCJvcHRzIiwicGFyZW50T3B0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/write_concern.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/package.json":
/*!*******************************************!*\
  !*** ./node_modules/mongodb/package.json ***!
  \*******************************************/
/***/ ((module) => {

module.exports = JSON.parse('{"name":"mongodb","version":"5.8.1","description":"The official MongoDB driver for Node.js","main":"lib/index.js","files":["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],"types":"mongodb.d.ts","repository":{"type":"git","url":"git@github.com:mongodb/node-mongodb-native.git"},"keywords":["mongodb","driver","official"],"author":{"name":"The MongoDB NodeJS Team","email":"dbx-node@mongodb.com"},"dependencies":{"bson":"^5.4.0","mongodb-connection-string-url":"^2.6.0","socks":"^2.7.1"},"optionalDependencies":{"@mongodb-js/saslprep":"^1.1.0"},"peerDependencies":{"@aws-sdk/credential-providers":"^3.188.0","@mongodb-js/zstd":"^1.0.0","kerberos":"^1.0.0 || ^2.0.0","mongodb-client-encryption":">=2.3.0 <3","snappy":"^7.2.2"},"peerDependenciesMeta":{"@aws-sdk/credential-providers":{"optional":true},"@mongodb-js/zstd":{"optional":true},"kerberos":{"optional":true},"snappy":{"optional":true},"mongodb-client-encryption":{"optional":true}},"devDependencies":{"@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.35.1","@microsoft/tsdoc-config":"^0.16.2","@mongodb-js/zstd":"^1.1.0","@octokit/core":"^4.2.4","@types/chai":"^4.3.5","@types/chai-subset":"^1.3.3","@types/express":"^4.17.17","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.1","@types/node":"^20.1.0","@types/semver":"^7.5.0","@types/sinon":"^10.0.14","@types/sinon-chai":"^3.2.9","@types/whatwg-url":"^11.0.0","@typescript-eslint/eslint-plugin":"^5.59.5","@typescript-eslint/parser":"^5.59.5","chai":"^4.3.7","chai-subset":"^1.6.0","chalk":"^4.1.2","eslint":"^8.40.0","eslint-config-prettier":"^8.8.0","eslint-plugin-import":"^2.27.5","eslint-plugin-prettier":"^4.2.1","eslint-plugin-simple-import-sort":"^10.0.0","eslint-plugin-tsdoc":"^0.2.17","express":"^4.18.2","js-yaml":"^4.1.0","mocha":"^10.2.0","mocha-sinon":"^2.1.2","mongodb-legacy":"^5.0.0","nyc":"^15.1.0","prettier":"^2.8.8","semver":"^7.5.0","sinon":"^15.0.4","sinon-chai":"^3.7.0","snappy":"^7.2.2","source-map-support":"^0.5.21","ts-node":"^10.9.1","tsd":"^0.28.1","typescript":"^5.0.4","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.2.0","yargs":"^17.7.2"},"license":"Apache-2.0","engines":{"node":">=14.20.1"},"bugs":{"url":"https://jira.mongodb.org/projects/NODE/issues/"},"homepage":"https://github.com/mongodb/node-mongodb-native","scripts":{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"node test/benchmarks/driverBench","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"mocha --config test/mocha_lambda.json test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"mocha --config test/mocha_lambda.json test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"eslint -v && eslint --max-warnings=0 --ext \'.js,.ts\' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.json test/manual/search-index-management.spec.test.ts","check:test":"mocha --config test/mocha_mongodb.json test/integration","check:unit":"mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"mocha --config test/manual/mocharc.json test/manual/atlas_connectivity.test.js","check:adl":"mocha --config test/mocha_mongodb.json test/manual/atlas-data-lake-testing","check:aws":"nyc mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_aws.test.ts","check:oidc":"mocha --config test/mocha_mongodb.json test/manual/mongodb_oidc.prose.test.ts","check:oidc-azure":"mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_oidc_azure.prose.test.ts","check:ocsp":"mocha --config test/manual/mocharc.json test/manual/ocsp_support.test.js","check:kerberos":"nyc mocha --config test/manual/mocharc.json test/manual/kerberos.test.ts","check:tls":"mocha --config test/manual/mocharc.json test/manual/tls_support.test.js","check:ldap":"nyc mocha --config test/manual/mocharc.json test/manual/ldap.test.js","check:socks5":"mocha --config test/manual/mocharc.json test/manual/socks5.test.ts","check:csfle":"mocha --config test/mocha_mongodb.json test/integration/client-side-encryption","check:snappy":"mocha test/unit/assorted/snappy.test.js","fix:eslint":"npm run check:eslint -- --fix","prepare":"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts","test":"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},"tsd":{"directory":"test/types","compilerOptions":{"strict":true,"target":"esnext","module":"commonjs","moduleResolution":"node"}}}');

/***/ })

};
;